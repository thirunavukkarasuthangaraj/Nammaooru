<div class="post-dashboard">
  <div class="dashboard-header">
    <h2>Post Dashboard</h2>
    <button mat-icon-button (click)="loadStats(); loadFeaturedPosts()" matTooltip="Refresh">
      <mat-icon>refresh</mat-icon>
    </button>
  </div>

  <!-- Featured Posts Section -->
  <div class="featured-section">
    <div class="featured-header">
      <h3><mat-icon>star</mat-icon> Featured Posts</h3>
      <span class="featured-count" *ngIf="!featuredLoading">{{ getFeaturedCount() }} items</span>
    </div>

    <div *ngIf="featuredLoading" class="featured-loading">
      <mat-spinner diameter="28"></mat-spinner>
    </div>

    <div *ngIf="featuredError" class="featured-error">
      <mat-icon>error_outline</mat-icon>
      <span>{{ featuredError }}</span>
    </div>

    <div *ngIf="!featuredLoading && !featuredError" class="featured-grid">
      <ng-container *ngFor="let category of ['combos', 'marketplace', 'farmer', 'labour', 'travel', 'parcel', 'realEstate', 'rental']">
        <div class="featured-category" *ngIf="featuredPosts[category]?.length > 0">
          <div class="category-header" (click)="navigateTo(getCategoryRoute(category))">
            <mat-icon>{{ getCategoryIcon(category) }}</mat-icon>
            <span class="category-name">{{ getCategoryLabel(category) }}</span>
            <span class="category-count">{{ featuredPosts[category].length }}</span>
          </div>
          <div class="featured-items">
            <div class="featured-item" *ngFor="let post of featuredPosts[category]" (click)="navigateTo(getCategoryRoute(category))">
              <div class="item-row">
                <div class="item-title">{{ getPostTitle(post, category) }}</div>
                <span class="paid-badge" *ngIf="post.isPaid">PAID</span>
              </div>
              <div class="item-subtitle">{{ getPostSubtitle(post, category) }}</div>
              <div class="item-price" *ngIf="post.price || post.comboPrice || post.priceInfo">
                {{ post.comboPrice ? '₹' + post.comboPrice : (post.price ? '₹' + post.price : post.priceInfo) }}
              </div>
            </div>
          </div>
        </div>
      </ng-container>

      <div *ngIf="getFeaturedCount() === 0" class="no-featured">
        <mat-icon>star_border</mat-icon>
        <p>No featured posts available</p>
      </div>
    </div>
  </div>

  <div *ngIf="isLoading" class="loading-container">
    <mat-spinner diameter="40"></mat-spinner>
    <p>Loading dashboard stats...</p>
  </div>

  <div *ngIf="errorMessage" class="error-container">
    <mat-icon>error_outline</mat-icon>
    <p>{{ errorMessage }}</p>
    <button mat-raised-button color="primary" (click)="loadStats()">Retry</button>
  </div>

  <div *ngIf="!isLoading && !errorMessage" class="stats-grid">
    <!-- Labour Section -->
    <div class="section labour-section">
      <h3><mat-icon>construction</mat-icon> Labour Posts</h3>
      <div class="cards-row">
        <div class="stat-card total" (click)="navigateTo('/admin/labours')">
          <div class="stat-value">{{ labourStats.total }}</div>
          <div class="stat-label">Total</div>
          <mat-icon class="card-icon">assessment</mat-icon>
        </div>
        <div class="stat-card pending" (click)="navigateTo('/admin/labours')">
          <div class="stat-value">{{ labourStats.pending }}</div>
          <div class="stat-label">Pending</div>
          <mat-icon class="card-icon">hourglass_empty</mat-icon>
        </div>
        <div class="stat-card approved" (click)="navigateTo('/admin/labours')">
          <div class="stat-value">{{ labourStats.approved }}</div>
          <div class="stat-label">Approved</div>
          <mat-icon class="card-icon">check_circle</mat-icon>
        </div>
        <div class="stat-card rejected" (click)="navigateTo('/admin/labours')">
          <div class="stat-value">{{ labourStats.rejected }}</div>
          <div class="stat-label">Rejected</div>
          <mat-icon class="card-icon">cancel</mat-icon>
        </div>
        <div class="stat-card reported" (click)="navigateTo('/admin/labours/reported')">
          <div class="stat-value">{{ labourStats.reported }}</div>
          <div class="stat-label">Reported</div>
          <mat-icon class="card-icon">report</mat-icon>
        </div>
      </div>
    </div>

    <!-- Travel Section -->
    <div class="section travel-section">
      <h3><mat-icon>directions_car</mat-icon> Travel Posts</h3>
      <div class="cards-row">
        <div class="stat-card total" (click)="navigateTo('/admin/travels')">
          <div class="stat-value">{{ travelStats.total }}</div>
          <div class="stat-label">Total</div>
          <mat-icon class="card-icon">assessment</mat-icon>
        </div>
        <div class="stat-card pending" (click)="navigateTo('/admin/travels')">
          <div class="stat-value">{{ travelStats.pending }}</div>
          <div class="stat-label">Pending</div>
          <mat-icon class="card-icon">hourglass_empty</mat-icon>
        </div>
        <div class="stat-card approved" (click)="navigateTo('/admin/travels')">
          <div class="stat-value">{{ travelStats.approved }}</div>
          <div class="stat-label">Approved</div>
          <mat-icon class="card-icon">check_circle</mat-icon>
        </div>
        <div class="stat-card rejected" (click)="navigateTo('/admin/travels')">
          <div class="stat-value">{{ travelStats.rejected }}</div>
          <div class="stat-label">Rejected</div>
          <mat-icon class="card-icon">cancel</mat-icon>
        </div>
        <div class="stat-card reported" (click)="navigateTo('/admin/travels/reported')">
          <div class="stat-value">{{ travelStats.reported }}</div>
          <div class="stat-label">Reported</div>
          <mat-icon class="card-icon">report</mat-icon>
        </div>
      </div>
    </div>

    <!-- Parcel Section -->
    <div class="section parcel-section">
      <h3><mat-icon>local_shipping</mat-icon> Packers & Movers Posts</h3>
      <div class="cards-row">
        <div class="stat-card total" (click)="navigateTo('/admin/parcels')">
          <div class="stat-value">{{ parcelStats.total }}</div>
          <div class="stat-label">Total</div>
          <mat-icon class="card-icon">assessment</mat-icon>
        </div>
        <div class="stat-card pending" (click)="navigateTo('/admin/parcels')">
          <div class="stat-value">{{ parcelStats.pending }}</div>
          <div class="stat-label">Pending</div>
          <mat-icon class="card-icon">hourglass_empty</mat-icon>
        </div>
        <div class="stat-card approved" (click)="navigateTo('/admin/parcels')">
          <div class="stat-value">{{ parcelStats.approved }}</div>
          <div class="stat-label">Approved</div>
          <mat-icon class="card-icon">check_circle</mat-icon>
        </div>
        <div class="stat-card rejected" (click)="navigateTo('/admin/parcels')">
          <div class="stat-value">{{ parcelStats.rejected }}</div>
          <div class="stat-label">Rejected</div>
          <mat-icon class="card-icon">cancel</mat-icon>
        </div>
        <div class="stat-card reported" (click)="navigateTo('/admin/parcels/reported')">
          <div class="stat-value">{{ parcelStats.reported }}</div>
          <div class="stat-label">Reported</div>
          <mat-icon class="card-icon">report</mat-icon>
        </div>
      </div>
    </div>

    <!-- Marketplace Section -->
    <div class="section marketplace-section">
      <h3><mat-icon>store</mat-icon> Marketplace Posts</h3>
      <div class="cards-row">
        <div class="stat-card total" (click)="navigateTo('/admin/marketplace')">
          <div class="stat-value">{{ marketplaceStats.total }}</div>
          <div class="stat-label">Total</div>
          <mat-icon class="card-icon">assessment</mat-icon>
        </div>
        <div class="stat-card pending" (click)="navigateTo('/admin/marketplace')">
          <div class="stat-value">{{ marketplaceStats.pending }}</div>
          <div class="stat-label">Pending</div>
          <mat-icon class="card-icon">hourglass_empty</mat-icon>
        </div>
        <div class="stat-card approved" (click)="navigateTo('/admin/marketplace')">
          <div class="stat-value">{{ marketplaceStats.approved }}</div>
          <div class="stat-label">Approved</div>
          <mat-icon class="card-icon">check_circle</mat-icon>
        </div>
        <div class="stat-card rejected" (click)="navigateTo('/admin/marketplace')">
          <div class="stat-value">{{ marketplaceStats.rejected }}</div>
          <div class="stat-label">Rejected</div>
          <mat-icon class="card-icon">cancel</mat-icon>
        </div>
        <div class="stat-card reported" (click)="navigateTo('/admin/marketplace/reported')">
          <div class="stat-value">{{ marketplaceStats.reported }}</div>
          <div class="stat-label">Reported</div>
          <mat-icon class="card-icon">report</mat-icon>
        </div>
      </div>
    </div>

    <!-- Farmer Products Section -->
    <div class="section farmer-section">
      <h3><mat-icon>agriculture</mat-icon> Farmer Product Posts</h3>
      <div class="cards-row">
        <div class="stat-card total" (click)="navigateTo('/admin/farmer-products')">
          <div class="stat-value">{{ farmerStats.total }}</div>
          <div class="stat-label">Total</div>
          <mat-icon class="card-icon">assessment</mat-icon>
        </div>
        <div class="stat-card pending" (click)="navigateTo('/admin/farmer-products')">
          <div class="stat-value">{{ farmerStats.pending }}</div>
          <div class="stat-label">Pending</div>
          <mat-icon class="card-icon">hourglass_empty</mat-icon>
        </div>
        <div class="stat-card approved" (click)="navigateTo('/admin/farmer-products')">
          <div class="stat-value">{{ farmerStats.approved }}</div>
          <div class="stat-label">Approved</div>
          <mat-icon class="card-icon">check_circle</mat-icon>
        </div>
        <div class="stat-card rejected" (click)="navigateTo('/admin/farmer-products')">
          <div class="stat-value">{{ farmerStats.rejected }}</div>
          <div class="stat-label">Rejected</div>
          <mat-icon class="card-icon">cancel</mat-icon>
        </div>
        <div class="stat-card reported" (click)="navigateTo('/admin/farmer-products/reported')">
          <div class="stat-value">{{ farmerStats.reported }}</div>
          <div class="stat-label">Reported</div>
          <mat-icon class="card-icon">report</mat-icon>
        </div>
      </div>
    </div>

    <!-- Real Estate Section -->
    <div class="section realestate-section">
      <h3><mat-icon>home</mat-icon> Real Estate Posts</h3>
      <div class="cards-row">
        <div class="stat-card total" (click)="navigateTo('/admin/real-estate')">
          <div class="stat-value">{{ realEstateStats.total }}</div>
          <div class="stat-label">Total</div>
          <mat-icon class="card-icon">assessment</mat-icon>
        </div>
        <div class="stat-card pending" (click)="navigateTo('/admin/real-estate')">
          <div class="stat-value">{{ realEstateStats.pending }}</div>
          <div class="stat-label">Pending</div>
          <mat-icon class="card-icon">hourglass_empty</mat-icon>
        </div>
        <div class="stat-card approved" (click)="navigateTo('/admin/real-estate')">
          <div class="stat-value">{{ realEstateStats.approved }}</div>
          <div class="stat-label">Approved</div>
          <mat-icon class="card-icon">check_circle</mat-icon>
        </div>
        <div class="stat-card rejected" (click)="navigateTo('/admin/real-estate')">
          <div class="stat-value">{{ realEstateStats.rejected }}</div>
          <div class="stat-label">Rejected</div>
          <mat-icon class="card-icon">cancel</mat-icon>
        </div>
        <div class="stat-card reported" (click)="navigateTo('/admin/real-estate/reported')">
          <div class="stat-value">{{ realEstateStats.reported }}</div>
          <div class="stat-label">Reported</div>
          <mat-icon class="card-icon">report</mat-icon>
        </div>
      </div>
    </div>

    <!-- Rental Section -->
    <div class="section rental-section">
      <h3><mat-icon>vpn_key</mat-icon> Rental Posts</h3>
      <div class="cards-row">
        <div class="stat-card total" (click)="navigateTo('/admin/rentals')">
          <div class="stat-value">{{ rentalStats.total }}</div>
          <div class="stat-label">Total</div>
          <mat-icon class="card-icon">assessment</mat-icon>
        </div>
        <div class="stat-card pending" (click)="navigateTo('/admin/rentals')">
          <div class="stat-value">{{ rentalStats.pending }}</div>
          <div class="stat-label">Pending</div>
          <mat-icon class="card-icon">hourglass_empty</mat-icon>
        </div>
        <div class="stat-card approved" (click)="navigateTo('/admin/rentals')">
          <div class="stat-value">{{ rentalStats.approved }}</div>
          <div class="stat-label">Approved</div>
          <mat-icon class="card-icon">check_circle</mat-icon>
        </div>
        <div class="stat-card rejected" (click)="navigateTo('/admin/rentals')">
          <div class="stat-value">{{ rentalStats.rejected }}</div>
          <div class="stat-label">Rejected</div>
          <mat-icon class="card-icon">cancel</mat-icon>
        </div>
        <div class="stat-card reported" (click)="navigateTo('/admin/rentals/reported')">
          <div class="stat-value">{{ rentalStats.reported }}</div>
          <div class="stat-label">Reported</div>
          <mat-icon class="card-icon">report</mat-icon>
        </div>
      </div>
    </div>
  </div>
</div>
