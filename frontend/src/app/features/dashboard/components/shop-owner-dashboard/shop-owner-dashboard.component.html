<div class="dashboard-container">
  <!-- Header Section -->
  <div class="dashboard-header">
    <div class="header-content">
      <span class="welcome-text">Welcome back,</span>
      <h1 class="user-name">Shop Owner</h1>
    </div>
    <div class="header-actions">
      <button mat-raised-button (click)="refreshDashboard()">
        <mat-icon>refresh</mat-icon> Refresh
      </button>
    </div>
  </div>

  <div class="dashboard-content">
    <!-- Orders Overview Section -->
    <div class="section">
      <div class="section-title">
        <mat-icon>shopping_cart</mat-icon>
        <span>Orders Overview</span>
      </div>
      <div class="metrics-row three-col">
        <mat-card class="metric-card">
          <mat-card-content>
            <div class="metric-icon blue">
              <mat-icon>today</mat-icon>
            </div>
            <div class="metric-value blue">{{ businessMetrics.totalOrders }}</div>
            <div class="metric-label">Today's Orders</div>
          </mat-card-content>
        </mat-card>
        <mat-card class="metric-card" [class.highlight]="businessMetrics.pendingOrders > 0">
          <mat-card-content>
            <div class="metric-icon orange">
              <mat-icon>pending_actions</mat-icon>
            </div>
            <div class="metric-value orange">{{ businessMetrics.pendingOrders }}</div>
            <div class="metric-label">Pending</div>
          </mat-card-content>
        </mat-card>
        <mat-card class="metric-card">
          <mat-card-content>
            <div class="metric-icon purple">
              <mat-icon>receipt_long</mat-icon>
            </div>
            <div class="metric-value purple">{{ businessMetrics.completedOrders }}</div>
            <div class="metric-label">Completed</div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>

    <!-- Revenue Section -->
    <div class="section">
      <div class="section-title">
        <mat-icon>account_balance_wallet</mat-icon>
        <span>Revenue</span>
      </div>
      <div class="revenue-row">
        <div class="revenue-card green">
          <div class="revenue-header">
            <mat-icon>currency_rupee</mat-icon>
            <span>Today</span>
          </div>
          <div class="revenue-value">
            <span class="currency">₹</span>
            <span class="amount">{{ businessMetrics.todayRevenue | number }}</span>
          </div>
        </div>
        <div class="revenue-card teal">
          <div class="revenue-header">
            <mat-icon>calendar_month</mat-icon>
            <span>This Month</span>
          </div>
          <div class="revenue-value">
            <span class="currency">₹</span>
            <span class="amount">{{ businessMetrics.monthRevenue | number }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Inventory Section -->
    <div class="section">
      <div class="section-title">
        <mat-icon>inventory_2</mat-icon>
        <span>Inventory</span>
      </div>
      <mat-card class="inventory-card" [class.alert]="inventory.lowStock > 0 || inventory.outOfStock > 0">
        <mat-card-content>
          <div class="inventory-stats">
            <div class="inventory-stat">
              <mat-icon class="purple">inventory_2</mat-icon>
              <div class="stat-value purple">{{ inventory.totalItems }}</div>
              <div class="stat-label">Total Products</div>
            </div>
            <div class="stat-divider"></div>
            <div class="inventory-stat">
              <mat-icon [class.orange]="inventory.lowStock > 0" [class.grey]="inventory.lowStock === 0">warning_amber</mat-icon>
              <div class="stat-value" [class.orange]="inventory.lowStock > 0" [class.grey]="inventory.lowStock === 0">{{ inventory.lowStock }}</div>
              <div class="stat-label">Low Stock</div>
            </div>
            <div class="stat-divider"></div>
            <div class="inventory-stat">
              <mat-icon [class.red]="inventory.outOfStock > 0" [class.grey]="inventory.outOfStock === 0">error_outline</mat-icon>
              <div class="stat-value" [class.red]="inventory.outOfStock > 0" [class.grey]="inventory.outOfStock === 0">{{ inventory.outOfStock }}</div>
              <div class="stat-label">Out of Stock</div>
            </div>
          </div>
          <div class="alert-banner" *ngIf="inventory.lowStock > 0 || inventory.outOfStock > 0">
            <mat-icon>warning_amber</mat-icon>
            <span>Stock needs attention! Click to manage.</span>
            <mat-icon>arrow_forward_ios</mat-icon>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Quick Actions Section -->
    <div class="section">
      <div class="section-title">
        <mat-icon>flash_on</mat-icon>
        <span>Quick Actions</span>
      </div>
      <div class="actions-grid">
        <mat-card class="action-card" *ngFor="let action of quickActions" (click)="handleQuickAction(action.action)">
          <mat-card-content>
            <div class="action-icon" [ngClass]="action.action">
              <mat-icon>{{ action.icon }}</mat-icon>
            </div>
            <span class="action-label">{{ action.label }}</span>
            <mat-icon class="action-arrow">arrow_forward_ios</mat-icon>
          </mat-card-content>
        </mat-card>
      </div>
    </div>

    <!-- Recent Orders Section -->
    <div class="section" *ngIf="recentOrders.length > 0">
      <div class="section-title">
        <mat-icon>history</mat-icon>
        <span>Recent Orders</span>
      </div>
      <mat-card class="orders-card">
        <mat-card-content>
          <mat-list>
            <mat-list-item *ngFor="let order of recentOrders.slice(0, 5)">
              <div matListItemTitle>Order #{{ order.id }}</div>
              <div matListItemLine>{{ order.customer }} - ₹{{ order.amount | number }}</div>
              <div matListItemMeta>
                <span class="status-badge" [ngClass]="order.status?.toLowerCase()">{{ order.status }}</span>
              </div>
            </mat-list-item>
          </mat-list>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
