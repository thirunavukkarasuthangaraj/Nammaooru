<div class="dashboard-wrapper">
  <!-- Welcome Header -->
  <div class="welcome-header">
    <div class="welcome-content">
      <h1 class="greeting">Good {{ getGreeting() }}, {{ getShopOwnerName() }}!</h1>
      <p class="date-text">{{ getCurrentDate() }}</p>
    </div>
    <button mat-stroked-button class="refresh-btn" (click)="refreshDashboard()">
      <mat-icon>refresh</mat-icon>
      Refresh
    </button>
  </div>

  <!-- Top Stats Row -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon blue">
        <mat-icon>shopping_bag</mat-icon>
      </div>
      <div class="stat-info">
        <span class="stat-value">{{ businessMetrics.totalOrders }}</span>
        <span class="stat-label">Today's Orders</span>
      </div>
    </div>

    <div class="stat-card" [class.alert]="businessMetrics.pendingOrders > 0">
      <div class="stat-icon orange">
        <mat-icon>pending_actions</mat-icon>
      </div>
      <div class="stat-info">
        <span class="stat-value">{{ businessMetrics.pendingOrders }}</span>
        <span class="stat-label">Pending Orders</span>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon green">
        <mat-icon>check_circle</mat-icon>
      </div>
      <div class="stat-info">
        <span class="stat-value">{{ businessMetrics.completedOrders }}</span>
        <span class="stat-label">Completed</span>
      </div>
    </div>

    <div class="stat-card revenue">
      <div class="stat-icon purple">
        <mat-icon>currency_rupee</mat-icon>
      </div>
      <div class="stat-info">
        <span class="stat-value">₹{{ formatCurrency(businessMetrics.todayRevenue) }}</span>
        <span class="stat-label">Today's Revenue</span>
      </div>
    </div>
  </div>

  <!-- Main Content Grid -->
  <div class="content-grid">
    <!-- Left Column - Revenue & Chart -->
    <div class="main-column">
      <!-- Revenue Overview Card -->
      <div class="card revenue-card">
        <div class="card-header">
          <h2 class="card-title">Revenue Overview</h2>
          <span class="period-badge">This Month</span>
        </div>
        <div class="revenue-stats">
          <div class="revenue-item">
            <span class="revenue-label">Today</span>
            <div class="revenue-amount">
              <span class="currency">₹</span>
              <span class="amount">{{ formatCurrency(businessMetrics.todayRevenue) }}</span>
            </div>
            <span class="trend up" *ngIf="businessMetrics.todayRevenue > 0">
              <mat-icon>trending_up</mat-icon> Active
            </span>
          </div>
          <div class="revenue-divider"></div>
          <div class="revenue-item">
            <span class="revenue-label">This Month</span>
            <div class="revenue-amount">
              <span class="currency">₹</span>
              <span class="amount">{{ formatCurrency(businessMetrics.monthRevenue) }}</span>
            </div>
            <span class="trend neutral">
              <mat-icon>calendar_today</mat-icon> Monthly
            </span>
          </div>
        </div>
      </div>

      <!-- Inventory Status Card -->
      <div class="card inventory-card">
        <div class="card-header">
          <h2 class="card-title">Inventory Status</h2>
          <button mat-icon-button class="card-action" routerLink="/shop-owner/products">
            <mat-icon>arrow_forward</mat-icon>
          </button>
        </div>
        <div class="inventory-grid">
          <div class="inventory-item">
            <div class="inv-icon total">
              <mat-icon>inventory_2</mat-icon>
            </div>
            <span class="inv-value">{{ inventory.totalItems }}</span>
            <span class="inv-label">Total Products</span>
          </div>
          <div class="inventory-item" [class.warning]="inventory.lowStock > 0">
            <div class="inv-icon low">
              <mat-icon>warning_amber</mat-icon>
            </div>
            <span class="inv-value">{{ inventory.lowStock }}</span>
            <span class="inv-label">Low Stock</span>
          </div>
          <div class="inventory-item" [class.danger]="inventory.outOfStock > 0">
            <div class="inv-icon out">
              <mat-icon>error_outline</mat-icon>
            </div>
            <span class="inv-value">{{ inventory.outOfStock }}</span>
            <span class="inv-label">Out of Stock</span>
          </div>
        </div>
        <div class="inventory-alert" *ngIf="inventory.lowStock > 0 || inventory.outOfStock > 0" routerLink="/shop-owner/products">
          <mat-icon>notifications_active</mat-icon>
          <span>{{ inventory.lowStock + inventory.outOfStock }} items need attention</span>
          <mat-icon class="arrow">chevron_right</mat-icon>
        </div>
      </div>
    </div>

    <!-- Right Column - Quick Actions & Orders -->
    <div class="side-column">
      <!-- Quick Actions Card -->
      <div class="card actions-card">
        <div class="card-header">
          <h2 class="card-title">Quick Actions</h2>
        </div>
        <div class="actions-list">
          <button class="action-btn" *ngFor="let action of quickActions" (click)="handleQuickAction(action.action)">
            <div class="action-icon" [ngClass]="action.action">
              <mat-icon>{{ action.icon }}</mat-icon>
            </div>
            <span class="action-text">{{ action.label }}</span>
            <mat-icon class="action-arrow">chevron_right</mat-icon>
          </button>
        </div>
      </div>

      <!-- Recent Orders Card -->
      <div class="card orders-card" *ngIf="recentOrders.length > 0">
        <div class="card-header">
          <h2 class="card-title">Recent Orders</h2>
          <button mat-icon-button class="card-action" routerLink="/shop-owner/orders">
            <mat-icon>arrow_forward</mat-icon>
          </button>
        </div>
        <div class="orders-list">
          <div class="order-item" *ngFor="let order of recentOrders.slice(0, 4)">
            <div class="order-info">
              <span class="order-id">#{{ order.id }}</span>
              <span class="order-customer">{{ order.customer }}</span>
            </div>
            <div class="order-meta">
              <span class="order-amount">₹{{ order.amount | number }}</span>
              <span class="order-status" [ngClass]="order.status?.toLowerCase()">{{ order.status }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
