<div class="my-products chennai-page">
  <div class="page-header">
    <h1>My Products</h1>
    <div class="header-actions">
      <button mat-raised-button color="primary" (click)="addProduct()">
        <mat-icon>add</mat-icon> Add Product
      </button>
      <button mat-raised-button (click)="bulkUpload()">
        <mat-icon>upload</mat-icon> Bulk Upload
      </button>
    </div>
  </div>

  <div class="filters-section">
    <mat-form-field>
      <mat-label>Search Products</mat-label>
      <input matInput [(ngModel)]="searchTerm" (ngModelChange)="applyFilter()">
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>
    
    <mat-form-field>
      <mat-label>Category</mat-label>
      <mat-select [(ngModel)]="selectedCategory" (selectionChange)="applyFilter()">
        <mat-option value="">All Categories</mat-option>
        <mat-option *ngFor="let category of categories" [value]="category">
          {{ category }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    
    <mat-form-field>
      <mat-label>Status</mat-label>
      <mat-select [(ngModel)]="selectedStatus" (selectionChange)="applyFilter()">
        <mat-option value="">All Status</mat-option>
        <mat-option value="active">Active</mat-option>
        <mat-option value="inactive">Inactive</mat-option>
        <mat-option value="out_of_stock">Out of Stock</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div class="products-grid">
    <mat-card *ngFor="let product of filteredProducts" class="product-card">
      <div class="product-image">
        <img [src]="product.primaryImageUrl || 'assets/images/placeholder-product.jpg'" 
             [alt]="product.name">
        <div class="product-status" [ngClass]="product.status">
          {{ product.status | titlecase }}
        </div>
      </div>
      
      <mat-card-content>
        <h3>{{ product.name }}</h3>
        <p class="product-description">{{ product.description }}</p>
        
        <div class="product-info">
          <div class="price-info">
            <span class="price">â‚¹{{ product.price | number }}</span>
            <span class="category">{{ product.category }}</span>
          </div>
          
          <div class="stock-info">
            <span class="stock" [ngClass]="{'low-stock': product.stockQuantity < 10, 'out-of-stock': product.stockQuantity === 0}">
              Stock: {{ product.stockQuantity }}
            </span>
          </div>
        </div>
        
        <div class="product-stats">
          <div class="stat">
            <mat-icon>shopping_cart</mat-icon>
            <span>0 sold</span>
          </div>
          <div class="stat">
            <mat-icon>star</mat-icon>
            <span>0/5</span>
          </div>
        </div>
      </mat-card-content>
      
      <mat-card-actions>
        <button mat-button (click)="editProduct(product.id)">
          <mat-icon>edit</mat-icon> Edit
        </button>
        <button mat-button (click)="duplicateProduct(product.id)">
          <mat-icon>content_copy</mat-icon> Duplicate
        </button>
        <button mat-button [color]="product.status === 'ACTIVE' ? 'warn' : 'primary'" 
                (click)="toggleProductStatus(product.id)">
          <mat-icon>{{ product.status === 'ACTIVE' ? 'visibility_off' : 'visibility' }}</mat-icon>
          {{ product.status === 'ACTIVE' ? 'Deactivate' : 'Activate' }}
        </button>
        <button mat-icon-button [matMenuTriggerFor]="productMenu">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #productMenu="matMenu">
          <button mat-menu-item (click)="viewAnalytics(product.id)">
            <mat-icon>analytics</mat-icon> View Analytics
          </button>
          <button mat-menu-item (click)="updateStock(product.id)">
            <mat-icon>inventory</mat-icon> Update Stock
          </button>
          <button mat-menu-item (click)="deleteProduct(product.id)" class="danger">
            <mat-icon>delete</mat-icon> Delete
          </button>
        </mat-menu>
      </mat-card-actions>
    </mat-card>
  </div>

  <div class="empty-state" *ngIf="filteredProducts.length === 0">
    <mat-icon>inventory_2</mat-icon>
    <h3>No products found</h3>
    <p>Start by adding your first product to your shop</p>
    <button mat-raised-button color="primary" (click)="addProduct()">
      <mat-icon>add</mat-icon> Add Product
    </button>
  </div>

  <mat-paginator [length]="totalProducts" 
                 [pageSize]="pageSize" 
                 [pageSizeOptions]="[10, 25, 50, 100]"
                 (page)="onPageChange($event)">
  </mat-paginator>
</div>