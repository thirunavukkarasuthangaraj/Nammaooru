<div class="register-container">
  <!-- Background Image with Overlay -->
  <div class="background-image">
    <img
      src="assets/images/background.png"
      alt="Fresh vegetables background"
      class="bg-img">
    <div class="overlay"></div>
  </div>

  <!-- Content Wrapper -->
  <div class="content-wrapper">
    <!-- Logo and Brand -->
    <div class="brand-section">
      <h1 class="brand-title">NammaOoru</h1>
      <p class="brand-tagline">Join us! Fresh groceries await.</p>
    </div>

    <!-- Registration Form Card -->
    <div class="form-card">
      <div class="form-header">
        <h2>Create Your Account</h2>
        <p>Join thousands of happy customers</p>
      </div>

      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
        <!-- Name Row -->
        <div class="form-row">
          <div class="form-field half-width">
            <label for="firstName">First Name</label>
            <div class="input-wrapper">
              <span class="material-icons-outlined input-icon">person_outline</span>
              <input
                id="firstName"
                type="text"
                formControlName="firstName"
                placeholder="John"
                [class.error]="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched">
            </div>
            <span class="error-message" *ngIf="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched">
              {{ registerForm.get('firstName')?.hasError('required') ? 'First name is required' : 'Minimum 2 characters' }}
            </span>
          </div>

          <div class="form-field half-width">
            <label for="lastName">Last Name</label>
            <div class="input-wrapper">
              <span class="material-icons-outlined input-icon">person_outline</span>
              <input
                id="lastName"
                type="text"
                formControlName="lastName"
                placeholder="Doe"
                [class.error]="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched">
            </div>
            <span class="error-message" *ngIf="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched">
              {{ registerForm.get('lastName')?.hasError('required') ? 'Last name is required' : 'Minimum 2 characters' }}
            </span>
          </div>
        </div>

        <!-- Email Field -->
        <div class="form-field">
          <label for="email">Email</label>
          <div class="input-wrapper">
            <span class="material-icons-outlined input-icon">mail_outline</span>
            <input
              id="email"
              type="email"
              formControlName="email"
              placeholder="you@example.com"
              [class.error]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
          </div>
          <span class="error-message" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
            <ng-container *ngIf="registerForm.get('email')?.hasError('required')">Email is required</ng-container>
            <ng-container *ngIf="registerForm.get('email')?.hasError('email')">Enter a valid email</ng-container>
          </span>
        </div>

        <!-- Mobile Field -->
        <div class="form-field">
          <label for="mobile">Mobile Number</label>
          <div class="input-wrapper">
            <span class="material-icons-outlined input-icon">phone_outline</span>
            <input
              id="mobile"
              type="tel"
              formControlName="mobile"
              placeholder="+91 98765 43210"
              [class.error]="registerForm.get('mobile')?.invalid && registerForm.get('mobile')?.touched">
          </div>
          <span class="error-message" *ngIf="registerForm.get('mobile')?.invalid && registerForm.get('mobile')?.touched">
            <ng-container *ngIf="registerForm.get('mobile')?.hasError('required')">Mobile number is required</ng-container>
            <ng-container *ngIf="registerForm.get('mobile')?.hasError('pattern')">Enter a valid mobile number</ng-container>
          </span>
        </div>

        <!-- Password Field -->
        <div class="form-field">
          <label for="password">Password</label>
          <div class="input-wrapper">
            <span class="material-icons-outlined input-icon">lock_outline</span>
            <input
              id="password"
              [type]="hidePassword ? 'password' : 'text'"
              formControlName="password"
              placeholder="••••••••"
              [class.error]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
            <button
              class="toggle-password"
              type="button"
              (click)="hidePassword = !hidePassword"
              [attr.aria-label]="hidePassword ? 'Show password' : 'Hide password'">
              <span class="material-icons-outlined">
                {{ hidePassword ? 'visibility_off' : 'visibility' }}
              </span>
            </button>
          </div>
          <span class="error-message" *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
            {{ registerForm.get('password')?.hasError('required') ? 'Password is required' : 'Minimum 8 characters' }}
          </span>
        </div>

        <!-- Submit Button -->
        <button
          type="submit"
          class="submit-button"
          [disabled]="registerForm.invalid || isLoading">
          <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
          <span *ngIf="!isLoading">Create Account</span>
          <span *ngIf="isLoading">Creating Account...</span>
        </button>

        <!-- Sign In Link -->
        <p class="signup-link">
          Already have an account?
          <a routerLink="/auth/login">Sign In</a>
        </p>

        <!-- Privacy Policy Link -->
        <p class="privacy-link">
          By creating an account, you agree to our
          <a routerLink="/privacy-policy">Privacy Policy</a>
        </p>
      </form>
    </div>
  </div>
</div>
