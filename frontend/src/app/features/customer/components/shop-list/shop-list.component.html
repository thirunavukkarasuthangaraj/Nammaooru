<div class="shop-list-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="container">
      <h1 class="page-title">
        <mat-icon>storefront</mat-icon>
        Choose Your Shop
      </h1>
      <p class="subtitle">Fresh groceries, medicines, food & more delivered to your doorstep</p>
    </div>
  </div>

  <!-- Search and Filter Section -->
  <div class="search-section">
    <div class="container">
      <div class="search-bar">
        <mat-form-field appearance="outline" class="search-field">
          <mat-label>Search shops, products, or categories</mat-label>
          <input matInput 
                 [(ngModel)]="searchTerm" 
                 (keyup)="onSearch()"
                 placeholder="Try 'grocery', 'medicine', 'restaurant'...">
          <mat-icon matPrefix>search</mat-icon>
        </mat-form-field>
        
        <mat-form-field appearance="outline" class="category-filter">
          <mat-label>Category</mat-label>
          <mat-select [(value)]="selectedCategory" (selectionChange)="onCategoryChange()">
            <mat-option value="">
              <mat-icon>apps</mat-icon> All Categories
            </mat-option>
            <mat-option value="grocery">
              <mat-icon>shopping_basket</mat-icon> Grocery & Essentials
            </mat-option>
            <mat-option value="restaurant">
              <mat-icon>restaurant</mat-icon> Food & Restaurants
            </mat-option>
            <mat-option value="pharmacy">
              <mat-icon>medical_services</mat-icon> Pharmacy & Health
            </mat-option>
            <mat-option value="electronics">
              <mat-icon>devices</mat-icon> Electronics
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="container shops-content">

    <!-- Loading State -->
    <div class="loading-container" *ngIf="loading">
      <mat-spinner diameter="60"></mat-spinner>
      <h3>Finding shops near you...</h3>
      <p>This won't take long</p>
    </div>

    <!-- Shop Grid -->
    <div class="shops-grid" *ngIf="!loading && shops.length > 0">
      <mat-card class="shop-card" 
                *ngFor="let shop of shops" 
                (click)="selectShop(shop)"
                [class.closed]="!shop.isOpen">
        
        <!-- Shop Image -->
        <div class="shop-image-container">
          <img mat-card-image 
               [src]="shop.image || '/assets/images/shop-placeholder.jpg'" 
               [alt]="shop.name">
          <div class="status-chip">
            <mat-chip [style.background-color]="shop.isOpen ? '#4caf50' : '#f44336'" 
                      [style.color]="'white'">
              {{shop.isOpen ? 'OPEN NOW' : 'CLOSED'}}
            </mat-chip>
          </div>
          <div class="shop-rating">
            <mat-icon>star</mat-icon>
            <span>{{shop.rating || '4.5'}}</span>
          </div>
        </div>

        <!-- Shop Content -->
        <mat-card-content>
          <h3 class="shop-name">{{shop.name}}</h3>
          <p class="shop-description">{{shop.description}}</p>
          
          <!-- Shop Info Pills -->
          <div class="info-pills">
            <div class="info-pill">
              <mat-icon>schedule</mat-icon>
              <span>{{shop.deliveryTime || '30-45'}} min</span>
            </div>
            <div class="info-pill">
              <mat-icon>location_on</mat-icon>
              <span>{{shop.distance || '2.5'}} km</span>
            </div>
            <div class="info-pill">
              <mat-icon>local_shipping</mat-icon>
              <span>â‚¹{{shop.deliveryFee || '40'}}</span>
            </div>
          </div>

          <!-- Categories -->
          <div class="shop-categories">
            <mat-chip *ngFor="let category of shop.categories">
              {{category}}
            </mat-chip>
          </div>
        </mat-card-content>

        <!-- Shop Actions -->
        <mat-card-actions>
          <button mat-raised-button color="primary" class="view-shop-btn" [disabled]="!shop.isOpen">
            <mat-icon>shopping_cart</mat-icon>
            {{shop.isOpen ? 'Shop Now' : 'Currently Closed'}}
          </button>
        </mat-card-actions>
      </mat-card>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="!loading && shops.length === 0">
      <mat-icon>store_mall_directory</mat-icon>
      <h2>No shops found</h2>
      <p>Try adjusting your search or select a different category</p>
      <button mat-raised-button color="primary" (click)="resetFilters()">
        <mat-icon>refresh</mat-icon>
        Reset Filters
      </button>
    </div>
  </div>
</div>
