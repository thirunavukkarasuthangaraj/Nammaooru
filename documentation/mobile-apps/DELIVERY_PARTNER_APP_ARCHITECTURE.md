# ğŸšš NammaOoru Delivery Partner Mobile App - Technical Architecture

## ğŸ“‹ Document Overview

**Purpose**: Complete technical documentation for Delivery Partner Flutter mobile application
**Platform**: Flutter (iOS, Android, Web)
**Audience**: Developers, Mobile Engineers, Technical Stakeholders
**Last Updated**: January 2025

---

## ğŸ¯ App Overview

The Delivery Partner mobile app is a specialized Flutter application designed for delivery partners to manage order pickups, deliveries, real-time navigation, earnings tracking, and route optimization with GPS-based location services.

### Key Capabilities
- ğŸ“¦ **Order Management**: Accept, pickup, and deliver customer orders
- ğŸ—ºï¸ **Real-time Navigation**: Google Maps integration with turn-by-turn directions
- ğŸ“ **Location Tracking**: Continuous GPS tracking during deliveries
- ğŸ”” **Push Notifications**: Real-time order assignment notifications
- ğŸ’° **Earnings Dashboard**: Track daily, weekly, and monthly earnings
- âœ… **OTP Verification**: Secure order handover with OTP confirmation
- ğŸ“¸ **Proof of Delivery**: Photo capture and signature collection
- ğŸ“Š **Performance Stats**: Delivery metrics and rating system

---

## ğŸ—ï¸ Application Architecture

### High-Level Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Delivery Partner Mobile App Architecture                    â”‚
â”‚                            (Flutter Framework)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             Presentation Layer                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     Home     â”‚  â”‚   Orders     â”‚  â”‚  Navigation  â”‚  â”‚   Earnings   â”‚  â”‚
â”‚  â”‚   Dashboard  â”‚  â”‚  Available   â”‚  â”‚   Screen     â”‚  â”‚    Screen    â”‚  â”‚
â”‚  â”‚              â”‚  â”‚   Active     â”‚  â”‚              â”‚  â”‚              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Profile    â”‚  â”‚   Settings   â”‚  â”‚  OTP Verify  â”‚  â”‚  Completion  â”‚  â”‚
â”‚  â”‚   Screen     â”‚  â”‚   Screen     â”‚  â”‚   Screen     â”‚  â”‚   Screen     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            State Management Layer                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                            Provider Pattern                                 â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ DeliveryPartnerProviderâ”‚  â”‚   LocationProvider    â”‚  â”‚OrderProvider â”‚  â”‚
â”‚  â”‚ - Partner info        â”‚  â”‚ - Current position    â”‚  â”‚ - Orders     â”‚  â”‚
â”‚  â”‚ - Online status       â”‚  â”‚ - Tracking active     â”‚  â”‚ - Filters    â”‚  â”‚
â”‚  â”‚ - Availability        â”‚  â”‚ - Location history    â”‚  â”‚ - Stats      â”‚  â”‚
â”‚  â”‚ - Earnings            â”‚  â”‚ - ETA calculation     â”‚  â”‚              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             Business Logic Layer                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   API Service    â”‚  â”‚ Location Service â”‚  â”‚  Storage Service â”‚         â”‚
â”‚  â”‚  - HTTP Calls    â”‚  â”‚  - GPS Tracking  â”‚  â”‚  - Local Cache   â”‚         â”‚
â”‚  â”‚  - Auth Headers  â”‚  â”‚  - Geolocator    â”‚  â”‚  - JWT Storage   â”‚         â”‚
â”‚  â”‚  - Error Handle  â”‚  â”‚  - Battery Track â”‚  â”‚  - Preferences   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Firebase FCM    â”‚  â”‚ DeliveryConfirm  â”‚  â”‚  Maps Service    â”‚         â”‚
â”‚  â”‚  - Push Notify   â”‚  â”‚  Service         â”‚  â”‚  - Route Display â”‚         â”‚
â”‚  â”‚  - Token Mgmt    â”‚  â”‚  - OTP Verify    â”‚  â”‚  - Directions    â”‚         â”‚
â”‚  â”‚  - Background    â”‚  â”‚  - Photo Capture â”‚  â”‚  - Polylines     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             Data & Network Layer                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Backend API     â”‚  â”‚  Google Maps API â”‚  â”‚  Local Storage   â”‚         â”‚
â”‚  â”‚  HTTP REST       â”‚  â”‚  Directions API  â”‚  â”‚  SharedPrefs     â”‚         â”‚
â”‚  â”‚  Port: 8080      â”‚  â”‚  Geocoding API   â”‚  â”‚  GPS Cache       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± Screen Flow Architecture

### Main Navigation & Order Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Screen Navigation Flow                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Login Screen    â”‚
                        â”‚  (Auth + OTP)    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Main Dashboard  â”‚
                        â”‚  (Home Screen)   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                       â”‚                       â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚Availableâ”‚           â”‚   Active    â”‚        â”‚  Earnings â”‚
    â”‚ Orders  â”‚           â”‚   Orders    â”‚        â”‚  History  â”‚
    â”‚         â”‚           â”‚             â”‚        â”‚           â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â”‚                       â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Order Details â”‚      â”‚  Navigation   â”‚
    â”‚ Accept/Reject â”‚      â”‚  Screen       â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  (Maps)       â”‚
         â”‚                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
    â”‚ Pickup from   â”‚      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Shop (OTP)    â”‚      â”‚ Arrive at     â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ Destination   â”‚
         â”‚                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ OTP Handover   â”‚
            â”‚ Screen         â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Delivery       â”‚
            â”‚ Completion     â”‚
            â”‚ (Photo/Sign)   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Return to      â”‚
            â”‚ Dashboard      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Complete API Call Flow

### Order Acceptance & Delivery Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Delivery  â”‚                                           â”‚ Backend  â”‚
â”‚Partner   â”‚                                           â”‚ API      â”‚
â”‚ App      â”‚                                           â”‚          â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                           â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                                                      â”‚
     â”‚ â•â•â• PARTNER LOGS IN â•â•â•                             â”‚
     â”‚                                                      â”‚
     â”‚ 1. Login with credentials                           â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
     â”‚      POST /api/delivery-partner/login               â”‚
     â”‚      Body: { email, password }                      â”‚
     â”‚                                                      â”‚
     â”‚                                  2. Validate creds   â”‚
     â”‚                                     Generate JWT    â”‚
     â”‚                                                      â”‚
     â”‚  3. Return auth response                            â”‚
     â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚      { token, partnerId, profile }                  â”‚
     â”‚                                                      â”‚
     â”‚ 4. Store token + load profile                       â”‚
     â”‚    await StorageService.setToken(token)             â”‚
     â”‚    DeliveryPartnerProvider.setPartner(profile)      â”‚
     â”‚                                                      â”‚
     â”‚ â•â•â• FETCH AVAILABLE ORDERS â•â•â•                      â”‚
     â”‚                                                      â”‚
     â”‚ 5. Get available orders                             â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
     â”‚      GET /api/delivery-partner/orders/available     â”‚
     â”‚      Headers: { Authorization: Bearer <token> }     â”‚
     â”‚                                                      â”‚
     â”‚                                  6. Query orders    â”‚
     â”‚                                     Filter by zone  â”‚
     â”‚                                                      â”‚
     â”‚  7. Return order list                               â”‚
     â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚      { orders: [{...}], count }                     â”‚
     â”‚                                                      â”‚
     â”‚ 8. Update OrderProvider state                       â”‚
     â”‚    OrderProvider.setAvailableOrders(orders)         â”‚
     â”‚                                                      â”‚
     â”‚ â•â•â• PARTNER ACCEPTS ORDER â•â•â•                       â”‚
     â”‚                                                      â”‚
     â”‚ 9. User taps "Accept Order"                         â”‚
     â”‚                                                      â”‚
     â”‚ 10. Accept order request                            â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
     â”‚      POST /api/delivery-partner/orders/{id}/accept  â”‚
     â”‚      Body: { partnerId }                            â”‚
     â”‚                                                      â”‚
     â”‚                                  11. Assign order   â”‚
     â”‚                                      Create assign  â”‚
     â”‚                                      Notify shop    â”‚
     â”‚                                                      â”‚
     â”‚  12. Return assignment details                      â”‚
     â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚      { assignment: {...}, pickup: {...} }           â”‚
     â”‚                                                      â”‚
     â”‚ 13. Navigate to Navigation Screen                   â”‚
     â”‚     Start location tracking                         â”‚
     â”‚                                                      â”‚
     â”‚ â•â•â• NAVIGATE TO PICKUP LOCATION â•â•â•                 â”‚
     â”‚                                                      â”‚
     â”‚ 14. LocationProvider starts tracking                â”‚
     â”‚     Get current GPS position                        â”‚
     â”‚     Send location updates every 30s                 â”‚
     â”‚                                                      â”‚
     â”‚ 15. Send location update                            â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
     â”‚      POST /api/location/partners/{id}/update        â”‚
     â”‚      Body: {                                        â”‚
     â”‚        latitude, longitude, accuracy,               â”‚
     â”‚        speed, heading, batteryLevel,                â”‚
     â”‚        assignmentId, orderStatus                    â”‚
     â”‚      }                                              â”‚
     â”‚                                                      â”‚
     â”‚                                  16. Store location â”‚
     â”‚                                      Update ETA     â”‚
     â”‚                                                      â”‚
     â”‚  17. Return acknowledgment                          â”‚
     â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚      { message: "Location updated" }                â”‚
     â”‚                                                      â”‚
     â”‚ â•â•â• ARRIVE AT SHOP FOR PICKUP â•â•â•                   â”‚
     â”‚                                                      â”‚
     â”‚ 18. Partner arrives, taps "Start Pickup"            â”‚
     â”‚                                                      â”‚
     â”‚ 19. Show OTP verification screen                    â”‚
     â”‚     Request pickup OTP from shop                    â”‚
     â”‚                                                      â”‚
     â”‚ 20. Verify pickup OTP                               â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
     â”‚      POST /api/delivery-partner/verify-pickup-otp   â”‚
     â”‚      Body: { orderId, otp }                         â”‚
     â”‚                                                      â”‚
     â”‚                                  21. Validate OTP   â”‚
     â”‚                                      Update status  â”‚
     â”‚                                      Mark picked up â”‚
     â”‚                                                      â”‚
     â”‚  22. Return pickup confirmation                     â”‚
     â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚      { success: true, order: {...} }                â”‚
     â”‚                                                      â”‚
     â”‚ 23. Update order status to "PICKED_UP"              â”‚
     â”‚     Navigate to customer location                   â”‚
     â”‚                                                      â”‚
     â”‚ â•â•â• NAVIGATE TO CUSTOMER â•â•â•                        â”‚
     â”‚                                                      â”‚
     â”‚ 24. Continue location tracking                      â”‚
     â”‚     Display route to customer                       â”‚
     â”‚     Calculate ETA                                   â”‚
     â”‚                                                      â”‚
     â”‚ 25. Get ETA to destination                          â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
     â”‚      POST /api/location/partners/{id}/eta           â”‚
     â”‚      Body: { latitude, longitude }                  â”‚
     â”‚                                                      â”‚
     â”‚                                  26. Calculate ETA  â”‚
     â”‚                                      Based on GPS   â”‚
     â”‚                                                      â”‚
     â”‚  27. Return ETA estimate                            â”‚
     â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚      { eta: { estimatedMinutes: 15 } }              â”‚
     â”‚                                                      â”‚
     â”‚ â•â•â• ARRIVE AT CUSTOMER LOCATION â•â•â•                 â”‚
     â”‚                                                      â”‚
     â”‚ 28. Partner arrives, taps "Complete Delivery"       â”‚
     â”‚                                                      â”‚
     â”‚ 29. Show delivery OTP screen                        â”‚
     â”‚     Get delivery OTP from customer                  â”‚
     â”‚                                                      â”‚
     â”‚ 30. Verify delivery OTP                             â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
     â”‚      POST /api/delivery-partner/verify-delivery-otp â”‚
     â”‚      Body: { orderId, otp }                         â”‚
     â”‚                                                      â”‚
     â”‚                                  31. Validate OTP   â”‚
     â”‚                                      Update status  â”‚
     â”‚                                                      â”‚
     â”‚  32. Return delivery confirmation                   â”‚
     â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚      { success: true, order: {...} }                â”‚
     â”‚                                                      â”‚
     â”‚ 33. Show completion screen                          â”‚
     â”‚     Option to capture photo/signature               â”‚
     â”‚                                                      â”‚
     â”‚ 34. Upload proof of delivery (optional)             â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
     â”‚      POST /api/delivery-partner/proof               â”‚
     â”‚      Body: FormData(photo, signature)               â”‚
     â”‚                                                      â”‚
     â”‚                                  35. Store proof    â”‚
     â”‚                                      Mark complete  â”‚
     â”‚                                      Update earning â”‚
     â”‚                                                      â”‚
     â”‚  36. Return completion response                     â”‚
     â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚      { success: true, earning: 50 }                 â”‚
     â”‚                                                      â”‚
     â”‚ 37. Stop location tracking                          â”‚
     â”‚     Update earnings in provider                     â”‚
     â”‚     Navigate back to dashboard                      â”‚
     â”‚                                                      â”‚
     â–¼                                                      â–¼
```

---

## ğŸ“ Location Tracking System

### GPS Location Service Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Location Tracking System                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        LocationService                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  Configuration:                                                      â”‚
â”‚  - Update Interval: 10 seconds (local)                             â”‚
â”‚  - Server Update: 30 seconds (backend)                             â”‚
â”‚  - Accuracy: High (GPS + Network)                                  â”‚
â”‚  - Battery Tracking: Enabled                                       â”‚
â”‚  - Network Type: Auto-detect                                       â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Location Update Flow                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  1. Permission Check                                                â”‚
â”‚     â”œâ”€â–º Request location permission                                â”‚
â”‚     â””â”€â–º Request background location (iOS)                          â”‚
â”‚                                                                      â”‚
â”‚  2. Initialize GPS Stream                                           â”‚
â”‚     â”œâ”€â–º Geolocator.getPositionStream()                            â”‚
â”‚     â”œâ”€â–º Accuracy: LocationAccuracy.high                           â”‚
â”‚     â””â”€â–º DistanceFilter: 10 meters                                 â”‚
â”‚                                                                      â”‚
â”‚  3. Receive Position Updates                                        â”‚
â”‚     â”œâ”€â–º Latitude, Longitude                                        â”‚
â”‚     â”œâ”€â–º Accuracy, Speed, Heading                                   â”‚
â”‚     â”œâ”€â–º Altitude, Timestamp                                        â”‚
â”‚     â””â”€â–º Battery Level                                              â”‚
â”‚                                                                      â”‚
â”‚  4. Process Location                                                â”‚
â”‚     â”œâ”€â–º Store in LocationProvider                                  â”‚
â”‚     â”œâ”€â–º Calculate distance to destination                          â”‚
â”‚     â”œâ”€â–º Update ETA                                                 â”‚
â”‚     â””â”€â–º Update map markers                                         â”‚
â”‚                                                                      â”‚
â”‚  5. Server Sync (Every 30s)                                         â”‚
â”‚     â”œâ”€â–º POST /api/location/update                                  â”‚
â”‚     â”œâ”€â–º Include: GPS + Battery + Network                          â”‚
â”‚     â””â”€â–º Attach: assignmentId + orderStatus                        â”‚
â”‚                                                                      â”‚
â”‚  6. Error Handling                                                  â”‚
â”‚     â”œâ”€â–º Permission denied â†’ Show dialog                            â”‚
â”‚     â”œâ”€â–º GPS disabled â†’ Prompt enable                               â”‚
â”‚     â”œâ”€â–º Network error â†’ Queue updates                              â”‚
â”‚     â””â”€â–º Battery low â†’ Reduce frequency                             â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Location Data Model

```dart
class LocationUpdate {
  double latitude;
  double longitude;
  double accuracy;        // meters
  double? speed;          // m/s
  double? heading;        // degrees
  double altitude;        // meters
  DateTime timestamp;
  int? batteryLevel;      // percentage
  String? networkType;    // WIFI/4G/5G
  int? assignmentId;
  String? orderStatus;
}
```

---

## ğŸ—ºï¸ Google Maps Integration

### Maps Display & Navigation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Google Maps Widget Architecture                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GoogleMapsWidget                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  Map Display:                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  ğŸ“ Driver Location (Blue Marker)                          â”‚   â”‚
â”‚  â”‚       â†“                                                     â”‚   â”‚
â”‚  â”‚       â”œâ”€ Polyline Route (Blue Line)                       â”‚   â”‚
â”‚  â”‚       â†“                                                     â”‚   â”‚
â”‚  â”‚  ğŸ“ Shop Location (Orange Marker)                          â”‚   â”‚
â”‚  â”‚       â†“                                                     â”‚   â”‚
â”‚  â”‚       â”œâ”€ Polyline Route (Green Line)                      â”‚   â”‚
â”‚  â”‚       â†“                                                     â”‚   â”‚
â”‚  â”‚  ğŸ“ Customer Location (Green Marker)                       â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚  Features:                                                           â”‚
â”‚  - Real-time driver position updates                                â”‚
â”‚  - Animated marker movement                                         â”‚
â”‚  - Route polylines with directions API                              â”‚
â”‚  - Distance and ETA calculations                                    â”‚
â”‚  - Auto-zoom to fit all markers                                     â”‚
â”‚  - Traffic layer option                                             â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

API Key: AIzaSyAr_uGbaOnhebjRyz7ohU6N-hWZJVV_R3U
```

### Route Calculation

```dart
// Calculate route between two points
Future<List<LatLng>> getRoute(
  LatLng origin,
  LatLng destination
) async {
  final url = 'https://maps.googleapis.com/maps/api/directions/json'
              '?origin=${origin.latitude},${origin.longitude}'
              '&destination=${destination.latitude},${destination.longitude}'
              '&key=$googleMapsApiKey';

  final response = await http.get(Uri.parse(url));
  final data = json.decode(response.body);

  // Decode polyline points
  final points = PolylinePoints().decodePolyline(
    data['routes'][0]['overview_polyline']['points']
  );

  return points.map((point) =>
    LatLng(point.latitude, point.longitude)
  ).toList();
}
```

---

## ğŸ“Š State Management Architecture

### Provider Pattern - Delivery Partner

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DeliveryPartnerProvider State                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DeliveryPartner? _currentPartner
  â”‚
  â”œâ”€ partnerId: String
  â”œâ”€ name: String
  â”œâ”€ phoneNumber: String
  â”œâ”€ isOnline: bool
  â”œâ”€ isAvailable: bool
  â”œâ”€ profileImageUrl: String?
  â”œâ”€ earnings: double
  â”œâ”€ totalDeliveries: int
  â””â”€ rating: double

List<OrderModel> _availableOrders
List<OrderModel> _activeOrders
List<OrderModel> _orderHistory
Earnings? _earnings
bool _isLoading
String? _error

Methods:
  - login(email, password) â†’ Future<bool>
  - loadProfile() â†’ Future<void>
  - fetchAvailableOrders() â†’ Future<void>
  - fetchActiveOrders() â†’ Future<void>
  - acceptOrder(orderId) â†’ Future<bool>
  - updateOnlineStatus(isOnline) â†’ Future<void>
  - updateAvailability(isAvailable) â†’ Future<void>
  - fetchEarnings() â†’ Future<void>
  - logout() â†’ Future<void>
```

### Provider Pattern - Location

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      LocationProvider State                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Position? _currentPosition
  â”‚
  â”œâ”€ latitude: double
  â”œâ”€ longitude: double
  â”œâ”€ accuracy: double
  â”œâ”€ altitude: double
  â”œâ”€ heading: double
  â”œâ”€ speed: double
  â””â”€ timestamp: DateTime

bool _isTracking
String? _currentAssignment
double? _distanceToDestination
Map<String, dynamic>? _etaData

Methods:
  - initializeLocation() â†’ Future<bool>
  - startLocationTracking(partnerId, assignmentId, status) â†’ Future<void>
  - stopLocationTracking() â†’ Future<void>
  - sendLocationUpdate() â†’ Future<void>
  - calculateDistanceToDestination(lat, lng) â†’ double?
  - getETAToDestination(partnerId, lat, lng) â†’ Future<Map?>
  - getCurrentLocation() â†’ Future<Position?>
```

---

## ğŸ”” Push Notification System

### FCM Integration for Order Assignment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Firebase Push Notification Flow                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

App Launch
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Firebase Init            â”‚
â”‚ FirebaseMessaging.init() â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Request Permissions      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Get FCM Token            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Send to Backend          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Store in DB    â”‚
â”‚ POST /fcm-token          â”‚         â”‚ delivery_tokensâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Receiving Order Assignment                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Backend assigns order to partner
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend sends FCM        â”‚
â”‚ to partner's device      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FCM delivers notificationâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚               â”‚
  Foreground      Background
      â”‚               â”‚
      â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚onMessage     â”‚ â”‚onBackground  â”‚
â”‚handler       â”‚ â”‚Message       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                â”‚
       â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parse notification         â”‚
â”‚ - type: NEW_ORDER          â”‚
â”‚ - orderId: 12345           â”‚
â”‚ - pickupAddress: "..."     â”‚
â”‚ - amount: 450              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Update OrderProvider       â”‚
â”‚ addAvailableOrder(order)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Show local notification    â”‚
â”‚ Play sound alert           â”‚
â”‚ Navigate if tapped         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Project Structure

```
nammaooru_delivery_partner/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart                          # App entry point
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                              # Core functionality
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ api_config.dart
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â””â”€â”€ app_config.dart            # Base URL config
â”‚   â”‚   â”œâ”€â”€ constants/
â”‚   â”‚   â”‚   â””â”€â”€ api_endpoints.dart
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ delivery_partner.dart
â”‚   â”‚   â”‚   â””â”€â”€ simple_order_model.dart
â”‚   â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”‚   â”œâ”€â”€ delivery_partner_provider.dart
â”‚   â”‚   â”‚   â””â”€â”€ location_provider.dart
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ api_service.dart           # HTTP client
â”‚   â”‚   â”‚   â””â”€â”€ location_service.dart      # GPS tracking
â”‚   â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”‚   â””â”€â”€ storage_service.dart       # Local storage
â”‚   â”‚   â””â”€â”€ widgets/
â”‚   â”‚       â””â”€â”€ google_maps_widget.dart    # Map display
â”‚   â”‚
â”‚   â”œâ”€â”€ features/                          # Feature modules
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login_screen.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ register_screen.dart
â”‚   â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚   â”‚       â””â”€â”€ auth_service.dart
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â””â”€â”€ screens/
â”‚   â”‚   â”‚       â””â”€â”€ dashboard_screen.dart
â”‚   â”‚   â”œâ”€â”€ delivery/
â”‚   â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ delivery_completion_screen.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ pickup_confirmation_screen.dart
â”‚   â”‚   â”‚   â””â”€â”€ services/
â”‚   â”‚   â”‚       â””â”€â”€ delivery_confirmation_service.dart
â”‚   â”‚   â”œâ”€â”€ earnings/
â”‚   â”‚   â”‚   â””â”€â”€ screens/
â”‚   â”‚   â”‚       â””â”€â”€ earnings_screen.dart
â”‚   â”‚   â”œâ”€â”€ home/
â”‚   â”‚   â”‚   â””â”€â”€ screens/
â”‚   â”‚   â”‚       â””â”€â”€ dashboard_screen.dart
â”‚   â”‚   â”œâ”€â”€ orders/
â”‚   â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ active_orders_screen.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ available_orders_screen.dart
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ navigation_screen.dart
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ otp_handover_screen.dart
â”‚   â”‚   â”‚   â””â”€â”€ widgets/
â”‚   â”‚   â”‚       â””â”€â”€ order_card.dart
â”‚   â”‚   â”œâ”€â”€ profile/
â”‚   â”‚   â”‚   â””â”€â”€ screens/
â”‚   â”‚   â”‚       â””â”€â”€ profile_screen.dart
â”‚   â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”‚   â””â”€â”€ screens/
â”‚   â”‚   â”‚       â””â”€â”€ settings_screen.dart
â”‚   â”‚   â””â”€â”€ stats/
â”‚   â”‚       â””â”€â”€ screens/
â”‚   â”‚           â””â”€â”€ stats_screen.dart
â”‚   â”‚
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ firebase_notification_service.dart
â”‚
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ (No assets currently)
â”‚
â”œâ”€â”€ pubspec.yaml                           # Dependencies
â”œâ”€â”€ android/                               # Android config
â”œâ”€â”€ ios/                                   # iOS config
â””â”€â”€ web/                                   # Web config
```

---

## ğŸ”‘ Core Dependencies

### pubspec.yaml Key Packages

```yaml
dependencies:
  flutter:
    sdk: flutter

  # Networking
  http: ^1.1.0                             # HTTP client

  # State Management
  provider: ^6.0.5                         # State management

  # Local Storage
  shared_preferences: ^2.2.2               # Key-value storage

  # Maps & Location
  google_maps_flutter: ^2.5.0              # Google Maps
  google_maps_flutter_web: ^0.5.4          # Web support
  geolocator: ^10.1.0                      # GPS location
  geolocator_web: ^2.2.0                   # Web geolocation
  geocoding: ^2.1.1                        # Address lookup
  flutter_polyline_points: ^2.0.0          # Route polylines

  # Permissions
  permission_handler: ^11.1.0              # Runtime permissions

  # Utils
  intl: ^0.18.1                            # Date/number formatting
  url_launcher: ^6.2.2                     # External URLs
  cupertino_icons: ^1.0.2                  # iOS icons

# Note: Firebase and other packages disabled for web build
# - firebase_core
# - firebase_messaging
# - flutter_local_notifications
# - image_picker (camera/photo)
# - signature (digital signatures)
```

---

## ğŸ› ï¸ API Integration

### API Service Configuration

**Base URL**: `http://192.168.1.11:8080`

### Authentication & Headers

```dart
Future<Map<String, String>> _getHeaders() async {
  final prefs = await SharedPreferences.getInstance();
  final token = prefs.getString('delivery_partner_token');

  return {
    'Content-Type': 'application/json',
    'Accept': 'application/json',
    if (token != null) 'Authorization': 'Bearer $token',
  };
}
```

### Key API Endpoints

| Method | Endpoint | Purpose | Request | Response |
|--------|----------|---------|---------|----------|
| POST | `/mobile/delivery-partner/login` | Login | `{email, password}` | `{token, partnerId}` |
| GET | `/mobile/delivery-partner/profile/{id}` | Get profile | - | `{partner data}` |
| POST | `/mobile/delivery-partner/status/{id}` | Update online status | `{isOnline}` | `{message}` |
| GET | `/mobile/delivery-partner/orders/available` | Available orders | - | `{orders: [...]}` |
| GET | `/mobile/delivery-partner/orders/active` | Active deliveries | - | `{orders: [...]}` |
| POST | `/mobile/delivery-partner/orders/{id}/accept` | Accept order | `{partnerId}` | `{assignment}` |
| POST | `/location/partners/{id}/update` | Send GPS location | `{lat, lng, ...}` | `{message}` |
| POST | `/location/partners/{id}/eta` | Get ETA | `{lat, lng}` | `{estimatedMinutes}` |
| POST | `/delivery-partner/verify-pickup-otp` | Verify pickup | `{orderId, otp}` | `{success}` |
| POST | `/delivery-partner/verify-delivery-otp` | Verify delivery | `{orderId, otp}` | `{success, earning}` |
| GET | `/mobile/delivery-partner/earnings/{id}` | Get earnings | - | `{earnings, stats}` |

---

## ğŸš€ Build & Deployment

### Development Build

```bash
# Run on device/emulator
flutter run

# Run on web (with fixes)
flutter run -d chrome

# Run with custom API URL
flutter run --dart-define=API_URL=http://192.168.1.11:8080
```

### Production Build

```bash
# Android APK
flutter build apk --release

# Android App Bundle
flutter build appbundle --release

# iOS
flutter build ios --release

# Web
flutter build web --release
```

### Web Compatibility Notes

For web builds, the following features are disabled:
- Battery level tracking
- Connectivity status detection
- Camera/image picker
- Digital signatures

These features use platform-specific plugins not supported on web.

---

## ğŸ” Security & Permissions

### Required Permissions

**Android (AndroidManifest.xml)**:
```xml
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION"/>
<uses-permission android:name="android.permission.CAMERA"/>
```

**iOS (Info.plist)**:
```xml
<key>NSLocationWhenInUseUsageDescription</key>
<string>We need your location to show delivery routes</string>
<key>NSLocationAlwaysUsageDescription</key>
<string>We need background location for real-time tracking</string>
<key>NSCameraUsageDescription</key>
<string>We need camera for proof of delivery photos</string>
```

### Security Measures

1. **JWT Authentication**: All API calls use Bearer token
2. **HTTPS Only**: Production uses SSL/TLS
3. **Location Privacy**: GPS data only sent during active deliveries
4. **OTP Verification**: Secure order handover process
5. **Token Refresh**: Auto-refresh expired JWT tokens
6. **Secure Storage**: Tokens encrypted in SharedPreferences

---

## ğŸ“ˆ Performance Optimizations

1. **Location Batching**: Updates sent every 30s to reduce battery drain
2. **Map Caching**: Google Maps tiles cached locally
3. **State Optimization**: Provider pattern prevents unnecessary rebuilds
4. **Background Location**: Efficient background tracking on iOS/Android
5. **Network Optimization**: API calls debounced and cached
6. **Battery Management**: Reduced GPS accuracy when battery low

---

## ğŸ§ª Testing

```bash
# Run unit tests
flutter test

# Run integration tests
flutter drive --target=test_driver/app.dart

# Generate coverage report
flutter test --coverage
```

---

## ğŸ“š Additional Resources

- **Flutter Documentation**: https://flutter.dev/docs
- **Google Maps Flutter**: https://pub.dev/packages/google_maps_flutter
- **Geolocator Package**: https://pub.dev/packages/geolocator
- **Provider Pattern**: https://pub.dev/packages/provider
- **Backend API Docs**: See `TECHNICAL_ARCHITECTURE.md`

---

**Document Version**: 1.0
**Last Updated**: January 2025
**Maintained By**: NammaOoru Development Team
