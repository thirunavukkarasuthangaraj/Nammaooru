"use strict";(self.webpackChunkshop_management_frontend=self.webpackChunkshop_management_frontend||[]).push([[334],{3334:(ls,At,p)=>{p.r(At),p.d(At,{ProductModule:()=>cs});var f=p(177),g=p(9417),P=p(9159),X=p(6695),ot=p(2042),T=p(9631),C=p(2102),F=p(8834),M=p(9213),A=p(2798),m=p(5596),K=p(6471),ye=p(6850),Oe=p(5911),Ee=p(9115),Gt=p(5351),mt=p(5416),E=p(9183),L=p(2765),$t=p(450),x=(p(5024),p(4402),p(1413)),ft=(p(4412),p(7673),p(6697)),Lt=p(5964),N=p(6977),t=p(7705),_=p(4085),_t=p(8203);let Re=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({})}}return i})();var S=p(6600),J=p(7786),Pt=p(6354);let $e=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[Re,S.yE,S.yE]})}}return i})();var at=p(9454),Le=p(1975),B=p(4823),Ue=p(1997),Ft=p(7575),kt=p(7333),D=p(6860),zt=p(8617),U=p(8359),ze=p(605),Ye=p(536),Yt=p(1985),Mt=p(9172),Ve=p(8141),Xe=p(5558);function yt(i,r,e){for(let n in r)if(r.hasOwnProperty(n)){const o=r[n];o?i.setProperty(n,o,e?.has(n)?"important":""):i.removeProperty(n)}return i}function z(i,r){const e=r?"":"none";yt(i.style,{"touch-action":r?"":"none","-webkit-user-drag":r?"":"none","-webkit-tap-highlight-color":r?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Vt(i,r,e){yt(i.style,{position:r?"":"fixed",top:r?"":"0",opacity:r?"":"0",left:r?"":"-999em"},e)}function ct(i,r){return r&&"none"!=r?i+" "+r:i}function Xt(i){const r=i.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(i)*r}function Ot(i,r){return i.getPropertyValue(r).split(",").map(n=>n.trim())}function Et(i){const r=i.getBoundingClientRect();return{top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:r.width,height:r.height,x:r.x,y:r.y}}function It(i,r,e){const{top:n,bottom:o,left:s,right:a}=i;return e>=n&&e<=o&&r>=s&&r<=a}function Q(i,r,e){i.top+=r,i.bottom=i.top+i.height,i.left+=e,i.right=i.left+i.width}function Kt(i,r,e,n){const{top:o,right:s,bottom:a,left:c,width:d,height:u}=i,h=d*r,v=u*r;return n>o-v&&n<a+v&&e>c-h&&e<s+h}class Wt{constructor(r){this._document=r,this.positions=new Map}clear(){this.positions.clear()}cache(r){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),r.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:Et(e)})})}handleScroll(r){const e=(0,D.Fb)(r),n=this.positions.get(e);if(!n)return null;const o=n.scrollPosition;let s,a;if(e===this._document){const u=this.getViewportScrollPosition();s=u.top,a=u.left}else s=e.scrollTop,a=e.scrollLeft;const c=o.top-s,d=o.left-a;return this.positions.forEach((u,h)=>{u.clientRect&&e!==h&&e.contains(h)&&Q(u.clientRect,c,d)}),o.top=s,o.left=a,{top:c,left:d}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function Ht(i){const r=i.cloneNode(!0),e=r.querySelectorAll("[id]"),n=i.nodeName.toLowerCase();r.removeAttribute("id");for(let o=0;o<e.length;o++)e[o].removeAttribute("id");return"canvas"===n?Zt(i,r):("input"===n||"select"===n||"textarea"===n)&&Qt(i,r),Jt("canvas",i,r,Zt),Jt("input, textarea, select",i,r,Qt),r}function Jt(i,r,e,n){const o=r.querySelectorAll(i);if(o.length){const s=e.querySelectorAll(i);for(let a=0;a<o.length;a++)n(o[a],s[a])}}let We=0;function Qt(i,r){"file"!==r.type&&(r.value=i.value),"radio"===r.type&&r.name&&(r.name=`mat-clone-${r.name}-${We++}`)}function Zt(i,r){const e=r.getContext("2d");if(e)try{e.drawImage(i,0,0)}catch{}}const qt=(0,D.BQ)({passive:!0}),dt=(0,D.BQ)({passive:!1}),St=new Set(["position"]);class Je{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(r){const e=(0,_.he)(r);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(n=>z(n,e)))}constructor(r,e,n,o,s,a){this._config=e,this._document=n,this._ngZone=o,this._viewportRuler=s,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new x.B,this._pointerMoveSubscription=U.yU.EMPTY,this._pointerUpSubscription=U.yU.EMPTY,this._scrollSubscription=U.yU.EMPTY,this._resizeSubscription=U.yU.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new x.B,this.started=new x.B,this.released=new x.B,this.ended=new x.B,this.entered=new x.B,this.exited=new x.B,this.dropped=new x.B,this.moved=this._moveEvents,this._pointerDown=c=>{if(this.beforeStarted.next(),this._handles.length){const d=this._getTargetHandle(c);d&&!this._disabledHandles.has(d)&&!this.disabled&&this._initializeDragSequence(d,c)}else this.disabled||this._initializeDragSequence(this._rootElement,c)},this._pointerMove=c=>{const d=this._getPointerPositionOnPage(c);if(!this._hasStartedDragging){if(Math.abs(d.x-this._pickupPositionOnPage.x)+Math.abs(d.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const G=Date.now()>=this._dragStartTime+this._getDragStartDelay(c),$=this._dropContainer;if(!G)return void this._endDragSequence(c);(!$||!$.isDragging()&&!$.isReceiving())&&(c.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(c)))}return}c.preventDefault();const u=this._getConstrainedPointerPosition(d);if(this._hasMoved=!0,this._lastKnownPointerPosition=d,this._updatePointerDirectionDelta(u),this._dropContainer)this._updateActiveDropContainer(u,d);else{const h=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,v=this._activeTransform;v.x=u.x-h.x+this._passiveTransform.x,v.y=u.y-h.y+this._passiveTransform.y,this._applyRootElementTransform(v.x,v.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:u,event:c,distance:this._getDragDistance(u),delta:this._pointerDirectionDelta})})},this._pointerUp=c=>{this._endDragSequence(c)},this._nativeDragStart=c=>{if(this._handles.length){const d=this._getTargetHandle(c);d&&!this._disabledHandles.has(d)&&!this.disabled&&c.preventDefault()}else this.disabled||c.preventDefault()},this.withRootElement(r).withParent(e.parentDragRef||null),this._parentPositions=new Wt(n),a.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(r){this._handles=r.map(n=>(0,_.i8)(n)),this._handles.forEach(n=>z(n,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&e.add(n)}),this._disabledHandles=e,this}withPreviewTemplate(r){return this._previewTemplate=r,this}withPlaceholderTemplate(r){return this._placeholderTemplate=r,this}withRootElement(r){const e=(0,_.i8)(r);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,dt),e.addEventListener("touchstart",this._pointerDown,qt),e.addEventListener("dragstart",this._nativeDragStart,dt)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(r){return this._boundaryElement=r?(0,_.i8)(r):null,this._resizeSubscription.unsubscribe(),r&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(r){return this._parentDragRef=r,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(r){!this._disabledHandles.has(r)&&this._handles.indexOf(r)>-1&&(this._disabledHandles.add(r),z(r,!0))}enableHandle(r){this._disabledHandles.has(r)&&(this._disabledHandles.delete(r),z(r,this.disabled))}withDirection(r){return this._direction=r,this}_withDropContainer(r){this._dropContainer=r}getFreeDragPosition(){const r=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:r.x,y:r.y}}setFreeDragPosition(r){return this._activeTransform={x:0,y:0},this._passiveTransform.x=r.x,this._passiveTransform.y=r.y,this._dropContainer||this._applyRootElementTransform(r.x,r.y),this}withPreviewContainer(r){return this._previewContainer=r,this}_sortFromLastPointerPosition(){const r=this._lastKnownPointerPosition;r&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(r),r)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(r){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:r}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(r),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(r);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:r})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(r){Z(r)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const n=this._rootElement,o=n.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment(""),c=this._getShadowRoot();o.insertBefore(a,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),Vt(n,!1,St),this._document.body.appendChild(o.replaceChild(s,n)),this._getPreviewInsertionPoint(o,c).appendChild(this._preview),this.started.next({source:this,event:r}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:r}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(r,e){this._parentDragRef&&e.stopPropagation();const n=this.isDragging(),o=Z(e),s=!o&&0!==e.button,a=this._rootElement,c=(0,D.Fb)(e),d=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),u=o?(0,zt.w6)(e):(0,zt._G)(e);if(c&&c.draggable&&"mousedown"===e.type&&e.preventDefault(),n||s||d||u)return;if(this._handles.length){const y=a.style;this._rootElementTapHighlight=y.webkitTapHighlightColor||"",y.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(y=>this._updateOnScroll(y)),this._boundaryElement&&(this._boundaryRect=Et(this._boundaryElement));const h=this._previewTemplate;this._pickupPositionInElement=h&&h.template&&!h.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,r,e);const v=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:v.x,y:v.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(r){Vt(this._rootElement,!0,St),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,n=e.getItemIndex(this),o=this._getPointerPositionOnPage(r),s=this._getDragDistance(o),a=e._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:s,dropPoint:o,event:r}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:s,dropPoint:o,event:r}),e.drop(this,n,this._initialIndex,this._initialContainer,a,s,o,r),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:r,y:e},{x:n,y:o}){let s=this._initialContainer._getSiblingContainerFromPosition(this,r,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(r,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,r,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,o),this._dropContainer._sortItem(this,r,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(r,e):this._applyPreviewTransform(r-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const r=this._previewTemplate,e=this.previewClass,n=r?r.template:null;let o;if(n&&r){const s=r.matchSize?this._initialClientRect:null,a=r.viewContainer.createEmbeddedView(n,r.context);a.detectChanges(),o=ee(a,this._document),this._previewRef=a,r.matchSize?ne(o,s):o.style.transform=lt(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else o=Ht(this._rootElement),ne(o,this._initialClientRect),this._initialTransform&&(o.style.transform=this._initialTransform);return yt(o.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},St),z(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>o.classList.add(s)):o.classList.add(e)),o}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const r=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(r.left,r.top);const e=function Ke(i){const r=getComputedStyle(i),e=Ot(r,"transition-property"),n=e.find(c=>"transform"===c||"all"===c);if(!n)return 0;const o=e.indexOf(n),s=Ot(r,"transition-duration"),a=Ot(r,"transition-delay");return Xt(s[o])+Xt(a[o])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{const o=a=>{(!a||(0,D.Fb)(a)===this._preview&&"transform"===a.propertyName)&&(this._preview?.removeEventListener("transitionend",o),n(),clearTimeout(s))},s=setTimeout(o,1.5*e);this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){const r=this._placeholderTemplate,e=r?r.template:null;let n;return e?(this._placeholderRef=r.viewContainer.createEmbeddedView(e,r.context),this._placeholderRef.detectChanges(),n=ee(this._placeholderRef,this._document)):n=Ht(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(r,e,n){const o=e===this._rootElement?null:e,s=o?o.getBoundingClientRect():r,a=Z(n)?n.targetTouches[0]:n,c=this._getViewportScrollPosition();return{x:s.left-r.left+(a.pageX-s.left-c.left),y:s.top-r.top+(a.pageY-s.top-c.top)}}_getPointerPositionOnPage(r){const e=this._getViewportScrollPosition(),n=Z(r)?r.touches[0]||r.changedTouches[0]||{pageX:0,pageY:0}:r,o=n.pageX-e.left,s=n.pageY-e.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const c=this._ownerSVGElement.createSVGPoint();return c.x=o,c.y=s,c.matrixTransform(a.inverse())}}return{x:o,y:s}}_getConstrainedPointerPosition(r){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:o}=this.constrainPosition?this.constrainPosition(r,this,this._initialClientRect,this._pickupPositionInElement):r;if("x"===this.lockAxis||"x"===e?o=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===e)&&(n=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:s,y:a}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,c=this._boundaryRect,{width:d,height:u}=this._getPreviewRect(),h=c.top+a,v=c.bottom-(u-a);n=te(n,c.left+s,c.right-(d-s)),o=te(o,h,v)}return{x:n,y:o}}_updatePointerDirectionDelta(r){const{x:e,y:n}=r,o=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,a=Math.abs(e-s.x),c=Math.abs(n-s.y);return a>this._config.pointerDirectionChangeThreshold&&(o.x=e>s.x?1:-1,s.x=e),c>this._config.pointerDirectionChangeThreshold&&(o.y=n>s.y?1:-1,s.y=n),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const r=this._handles.length>0||!this.isDragging();r!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=r,z(this._rootElement,r))}_removeRootElementListeners(r){r.removeEventListener("mousedown",this._pointerDown,dt),r.removeEventListener("touchstart",this._pointerDown,qt),r.removeEventListener("dragstart",this._nativeDragStart,dt)}_applyRootElementTransform(r,e){const n=lt(r,e),o=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=o.transform&&"none"!=o.transform?o.transform:""),o.transform=ct(n,this._initialTransform)}_applyPreviewTransform(r,e){const n=this._previewTemplate?.template?void 0:this._initialTransform,o=lt(r,e);this._preview.style.transform=ct(o,n)}_getDragDistance(r){const e=this._pickupPositionOnPage;return e?{x:r.x-e.x,y:r.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:r,y:e}=this._passiveTransform;if(0===r&&0===e||this.isDragging()||!this._boundaryElement)return;const n=this._rootElement.getBoundingClientRect(),o=this._boundaryElement.getBoundingClientRect();if(0===o.width&&0===o.height||0===n.width&&0===n.height)return;const s=o.left-n.left,a=n.right-o.right,c=o.top-n.top,d=n.bottom-o.bottom;o.width>n.width?(s>0&&(r+=s),a>0&&(r-=a)):r=0,o.height>n.height?(c>0&&(e+=c),d>0&&(e-=d)):e=0,(r!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:r})}_getDragStartDelay(r){const e=this.dragStartDelay;return"number"==typeof e?e:Z(r)?e.touch:e?e.mouse:0}_updateOnScroll(r){const e=this._parentPositions.handleScroll(r);if(e){const n=(0,D.Fb)(r);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&Q(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,D.KT)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(r,e){const n=this._previewContainer||"global";if("parent"===n)return r;if("global"===n){const o=this._document;return e||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return(0,_.i8)(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(r){return this._handles.find(e=>r.target&&(r.target===e||e.contains(r.target)))}}function lt(i,r){return`translate3d(${Math.round(i)}px, ${Math.round(r)}px, 0)`}function te(i,r,e){return Math.max(r,Math.min(e,i))}function Z(i){return"t"===i.type[0]}function ee(i,r){const e=i.rootNodes;if(1===e.length&&e[0].nodeType===r.ELEMENT_NODE)return e[0];const n=r.createElement("div");return e.forEach(o=>n.appendChild(o)),n}function ne(i,r){i.style.width=`${r.width}px`,i.style.height=`${r.height}px`,i.style.transform=lt(r.left,r.top)}function oe(i,r,e){const n=q(r,i.length-1),o=q(e,i.length-1);if(n===o)return;const s=i[n],a=o<n?-1:1;for(let c=n;c!==o;c+=a)i[c]=i[c+a];i[o]=s}function q(i,r){return Math.max(0,Math.min(r,i))}class Qe{constructor(r,e){this._element=r,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(r){this.withItems(r)}sort(r,e,n,o){const s=this._itemPositions,a=this._getItemIndexFromPointerPosition(r,e,n,o);if(-1===a&&s.length>0)return null;const c="horizontal"===this.orientation,d=s.findIndex(O=>O.drag===r),u=s[a],v=u.clientRect,y=d>a?1:-1,G=this._getItemOffsetPx(s[d].clientRect,v,y),$=this._getSiblingOffsetPx(d,s,y),V=s.slice();return oe(s,d,a),s.forEach((O,ds)=>{if(V[ds]===O)return;const ke=O.drag===r,Bt=ke?G:$,Me=ke?r.getPlaceholderElement():O.drag.getRootElement();O.offset+=Bt,c?(Me.style.transform=ct(`translate3d(${Math.round(O.offset)}px, 0, 0)`,O.initialTransform),Q(O.clientRect,0,Bt)):(Me.style.transform=ct(`translate3d(0, ${Math.round(O.offset)}px, 0)`,O.initialTransform),Q(O.clientRect,Bt,0))}),this._previousSwap.overlaps=It(v,e,n),this._previousSwap.drag=u.drag,this._previousSwap.delta=c?o.x:o.y,{previousIndex:d,currentIndex:a}}enter(r,e,n,o){const s=null==o||o<0?this._getItemIndexFromPointerPosition(r,e,n):o,a=this._activeDraggables,c=a.indexOf(r),d=r.getPlaceholderElement();let u=a[s];if(u===r&&(u=a[s+1]),!u&&(null==s||-1===s||s<a.length-1)&&this._shouldEnterAsFirstChild(e,n)&&(u=a[0]),c>-1&&a.splice(c,1),u&&!this._dragDropRegistry.isDragging(u)){const h=u.getRootElement();h.parentElement.insertBefore(d,h),a.splice(s,0,r)}else(0,_.i8)(this._element).appendChild(d),a.push(r);d.style.transform="",this._cacheItemPositions()}withItems(r){this._activeDraggables=r.slice(),this._cacheItemPositions()}withSortPredicate(r){this._sortPredicate=r}reset(){this._activeDraggables.forEach(r=>{const e=r.getRootElement();if(e){const n=this._itemPositions.find(o=>o.drag===r)?.initialTransform;e.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(r){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===r)}updateOnScroll(r,e){this._itemPositions.forEach(({clientRect:n})=>{Q(n,r,e)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}_cacheItemPositions(){const r="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const n=e.getVisibleElement();return{drag:e,offset:0,initialTransform:n.style.transform||"",clientRect:Et(n)}}).sort((e,n)=>r?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top)}_getItemOffsetPx(r,e,n){const o="horizontal"===this.orientation;let s=o?e.left-r.left:e.top-r.top;return-1===n&&(s+=o?e.width-r.width:e.height-r.height),s}_getSiblingOffsetPx(r,e,n){const o="horizontal"===this.orientation,s=e[r].clientRect,a=e[r+-1*n];let c=s[o?"width":"height"]*n;if(a){const d=o?"left":"top",u=o?"right":"bottom";-1===n?c-=a.clientRect[d]-s[u]:c+=s[d]-a.clientRect[u]}return c}_shouldEnterAsFirstChild(r,e){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,o="horizontal"===this.orientation;if(n[0].drag!==this._activeDraggables[0]){const a=n[n.length-1].clientRect;return o?r>=a.right:e>=a.bottom}{const a=n[0].clientRect;return o?r<=a.left:e<=a.top}}_getItemIndexFromPointerPosition(r,e,n,o){const s="horizontal"===this.orientation,a=this._itemPositions.findIndex(({drag:c,clientRect:d})=>c!==r&&((!o||c!==this._previousSwap.drag||!this._previousSwap.overlaps||(s?o.x:o.y)!==this._previousSwap.delta)&&(s?e>=Math.floor(d.left)&&e<Math.floor(d.right):n>=Math.floor(d.top)&&n<Math.floor(d.bottom))));return-1!==a&&this._sortPredicate(a,r)?a:-1}}class Ze{constructor(r,e,n,o,s){this._dragDropRegistry=e,this._ngZone=o,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new x.B,this.entered=new x.B,this.exited=new x.B,this.dropped=new x.B,this.sorted=new x.B,this.receivingStarted=new x.B,this.receivingStopped=new x.B,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=U.yU.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new x.B,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),(0,ze.Y)(0,Ye.X).pipe((0,N.Q)(this._stopScrollTimers)).subscribe(()=>{const a=this._scrollNode,c=this.autoScrollStep;1===this._verticalScrollDirection?a.scrollBy(0,-c):2===this._verticalScrollDirection&&a.scrollBy(0,c),1===this._horizontalScrollDirection?a.scrollBy(-c,0):2===this._horizontalScrollDirection&&a.scrollBy(c,0)})},this.element=(0,_.i8)(r),this._document=n,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new Wt(n),this._sortStrategy=new Qe(this.element,e),this._sortStrategy.withSortPredicate((a,c)=>this.sortPredicate(a,c,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(r,e,n,o){this._draggingStarted(),null==o&&this.sortingDisabled&&(o=this._draggables.indexOf(r)),this._sortStrategy.enter(r,e,n,o),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:r,container:this,currentIndex:this.getItemIndex(r)})}exit(r){this._reset(),this.exited.next({item:r,container:this})}drop(r,e,n,o,s,a,c,d={}){this._reset(),this.dropped.next({item:r,currentIndex:e,previousIndex:n,container:this,previousContainer:o,isPointerOverContainer:s,distance:a,dropPoint:c,event:d})}withItems(r){const e=this._draggables;return this._draggables=r,r.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(e.filter(o=>o.isDragging()).every(o=>-1===r.indexOf(o))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(r){return this._sortStrategy.direction=r,this}connectedTo(r){return this._siblings=r.slice(),this}withOrientation(r){return this._sortStrategy.orientation=r,this}withScrollableParents(r){const e=(0,_.i8)(this.element);return this._scrollableElements=-1===r.indexOf(e)?[e,...r]:r.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(r){return this._isDragging?this._sortStrategy.getItemIndex(r):this._draggables.indexOf(r)}isReceiving(){return this._activeSiblings.size>0}_sortItem(r,e,n,o){if(this.sortingDisabled||!this._clientRect||!Kt(this._clientRect,.05,e,n))return;const s=this._sortStrategy.sort(r,e,n,o);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:r})}_startScrollingIfNecessary(r,e){if(this.autoScrollDisabled)return;let n,o=0,s=0;if(this._parentPositions.positions.forEach((a,c)=>{c===this._document||!a.clientRect||n||Kt(a.clientRect,.05,r,e)&&([o,s]=function qe(i,r,e,n){const o=se(r,n),s=ae(r,e);let a=0,c=0;if(o){const d=i.scrollTop;1===o?d>0&&(a=1):i.scrollHeight-d>i.clientHeight&&(a=2)}if(s){const d=i.scrollLeft;1===s?d>0&&(c=1):i.scrollWidth-d>i.clientWidth&&(c=2)}return[a,c]}(c,a.clientRect,r,e),(o||s)&&(n=c))}),!o&&!s){const{width:a,height:c}=this._viewportRuler.getViewportSize(),d={width:a,height:c,top:0,right:a,bottom:c,left:0};o=se(d,e),s=ae(d,r),n=window}n&&(o!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=s,this._scrollNode=n,(o||s)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const r=(0,_.i8)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=r.msScrollSnapType||r.scrollSnapType||"",r.scrollSnapType=r.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const r=(0,_.i8)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(r).clientRect}_reset(){this._isDragging=!1;const r=(0,_.i8)(this.element).style;r.scrollSnapType=r.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(r,e){return null!=this._clientRect&&It(this._clientRect,r,e)}_getSiblingContainerFromPosition(r,e,n){return this._siblings.find(o=>o._canReceive(r,e,n))}_canReceive(r,e,n){if(!this._clientRect||!It(this._clientRect,e,n)||!this.enterPredicate(r,this))return!1;const o=this._getShadowRoot().elementFromPoint(e,n);if(!o)return!1;const s=(0,_.i8)(this.element);return o===s||s.contains(o)}_startReceiving(r,e){const n=this._activeSiblings;!n.has(r)&&e.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(n.add(r),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:r,receiver:this,items:e}))}_stopReceiving(r){this._activeSiblings.delete(r),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:r,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(r=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(r);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const r=(0,D.KT)((0,_.i8)(this.element));this._cachedShadowRoot=r||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const r=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,r))}}function se(i,r){const{top:e,bottom:n,height:o}=i,s=.05*o;return r>=e-s&&r<=e+s?1:r>=n-s&&r<=n+s?2:0}function ae(i,r){const{left:e,right:n,width:o}=i,s=.05*o;return r>=e-s&&r<=e+s?1:r>=n-s&&r<=n+s?2:0}const pt=(0,D.BQ)({passive:!1,capture:!0});let tn=(()=>{class i{constructor(e,n){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new x.B,this.pointerUp=new x.B,this.scroll=new x.B,this._preventDefaultWhileDragging=o=>{this._activeDragInstances.length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=n}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,pt)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,pt)}startDragging(e,n){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const o=n.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:pt}),o||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:pt}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,a)=>{this._document.addEventListener(a,s.handler,s.options)})})}}stopDragging(e){const n=this._activeDragInstances.indexOf(e);n>-1&&(this._activeDragInstances.splice(n,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const n=[this.scroll];return e&&e!==this._document&&n.push(new Yt.c(o=>this._ngZone.runOutsideAngular(()=>{const a=c=>{this._activeDragInstances.length&&o.next(c)};return e.addEventListener("scroll",a,!0),()=>{e.removeEventListener("scroll",a,!0)}}))),(0,J.h)(...n)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,n)=>{this._document.removeEventListener(n,e.handler,e.options)}),this._globalListeners.clear()}static{this.\u0275fac=function(n){return new(n||i)(t.KVO(t.SKi),t.KVO(f.qQ))}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const en={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let wt=(()=>{class i{constructor(e,n,o,s){this._document=e,this._ngZone=n,this._viewportRuler=o,this._dragDropRegistry=s}createDrag(e,n=en){return new Je(e,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new Ze(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static{this.\u0275fac=function(n){return new(n||i)(t.KVO(f.qQ),t.KVO(t.SKi),t.KVO(kt.Xj),t.KVO(tn))}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const jt=new t.nKC("CDK_DRAG_PARENT"),Dt=new t.nKC("CdkDragHandle");let ce=(()=>{class i{get disabled(){return this._disabled}set disabled(e){this._disabled=(0,_.he)(e),this._stateChanges.next(this)}constructor(e,n){this.element=e,this._stateChanges=new x.B,this._disabled=!1,this._parentDrag=n}ngOnDestroy(){this._stateChanges.complete()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(t.aKT),t.rXU(jt,12))}}static{this.\u0275dir=t.FsC({type:i,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},standalone:!0,features:[t.Jv_([{provide:Dt,useExisting:i}])]})}}return i})();const de=new t.nKC("CdkDragPlaceholder"),le=new t.nKC("CdkDragPreview"),pe=new t.nKC("CDK_DRAG_CONFIG"),ge=new t.nKC("CdkDropList");let ue=(()=>{class i{static{this._dragInstances=[]}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=(0,_.he)(e),this._dragRef.disabled=this._disabled}constructor(e,n,o,s,a,c,d,u,h,v,y){this.element=e,this.dropContainer=n,this._ngZone=s,this._viewContainerRef=a,this._dir=d,this._changeDetectorRef=h,this._selfHandle=v,this._parentDrag=y,this._destroyed=new x.B,this.started=new t.bkB,this.released=new t.bkB,this.ended=new t.bkB,this.entered=new t.bkB,this.exited=new t.bkB,this.dropped=new t.bkB,this.moved=new Yt.c(G=>{const $=this._dragRef.moved.pipe((0,Pt.T)(V=>({source:this,pointerPosition:V.pointerPosition,event:V.event,delta:V.delta,distance:V.distance}))).subscribe(G);return()=>{$.unsubscribe()}}),this._dragRef=u.createDrag(e,{dragStartThreshold:c&&null!=c.dragStartThreshold?c.dragStartThreshold:5,pointerDirectionChangeThreshold:c&&null!=c.pointerDirectionChangeThreshold?c.pointerDirectionChangeThreshold:5,zIndex:c?.zIndex}),this._dragRef.data=this,i._dragInstances.push(this),c&&this._assignDefaults(c),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,ft.s)(1),(0,N.Q)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(e){const n=e.rootElementSelector,o=e.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const e=i._dragInstances.indexOf(this);e>-1&&i._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const e=this.element.nativeElement;let n=e;this.rootElementSelector&&(n=void 0!==e.closest?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(n||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?this.element.nativeElement.closest(e):(0,_.i8)(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const n=this._dir,o=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof o&&o?o:(0,_.OE)(o),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),n&&e.withDirection(n.value)}}),e.beforeStarted.pipe((0,ft.s)(1)).subscribe(()=>{if(this._parentDrag)return void e.withParent(this._parentDrag._dragRef);let n=this.element.nativeElement.parentElement;for(;n;){if(n.classList.contains("cdk-drag")){e.withParent(i._dragInstances.find(o=>o.element.nativeElement===n)?._dragRef||null);break}n=n.parentElement}})}_handleEvents(e){e.started.subscribe(n=>{this.started.emit({source:this,event:n.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(n=>{this.released.emit({source:this,event:n.event})}),e.ended.subscribe(n=>{this.ended.emit({source:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(n=>{this.entered.emit({container:n.container.data,item:this,currentIndex:n.currentIndex})}),e.exited.subscribe(n=>{this.exited.emit({container:n.container.data,item:this})}),e.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,isPointerOverContainer:n.isPointerOverContainer,item:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event})})}_assignDefaults(e){const{lockAxis:n,dragStartDelay:o,constrainPosition:s,previewClass:a,boundaryElement:c,draggingDisabled:d,rootElementSelector:u,previewContainer:h}=e;this.disabled=d??!1,this.dragStartDelay=o||0,n&&(this.lockAxis=n),s&&(this.constrainPosition=s),a&&(this.previewClass=a),c&&(this.boundaryElement=c),u&&(this.rootElementSelector=u),h&&(this.previewContainer=h)}_setupHandlesListener(){this._handles.changes.pipe((0,Mt.Z)(this._handles),(0,Ve.M)(e=>{const n=e.filter(o=>o._parentDrag===this).map(o=>o.element);this._selfHandle&&this.rootElementSelector&&n.push(this.element),this._dragRef.withHandles(n)}),(0,Xe.n)(e=>(0,J.h)(...e.map(n=>n._stateChanges.pipe((0,Mt.Z)(n))))),(0,N.Q)(this._destroyed)).subscribe(e=>{const n=this._dragRef,o=e.element.nativeElement;e.disabled?n.disableHandle(o):n.enableHandle(o)})}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(t.aKT),t.rXU(ge,12),t.rXU(f.qQ),t.rXU(t.SKi),t.rXU(t.c1b),t.rXU(pe,8),t.rXU(_t.dS,8),t.rXU(wt),t.rXU(t.gRc),t.rXU(Dt,10),t.rXU(jt,12))}}static{this.\u0275dir=t.FsC({type:i,selectors:[["","cdkDrag",""]],contentQueries:function(n,o,s){if(1&n&&(t.wni(s,le,5),t.wni(s,de,5),t.wni(s,Dt,5)),2&n){let a;t.mGM(a=t.lsd())&&(o._previewTemplate=a.first),t.mGM(a=t.lsd())&&(o._placeholderTemplate=a.first),t.mGM(a=t.lsd())&&(o._handles=a)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(n,o){2&n&&t.AVh("cdk-drag-disabled",o.disabled)("cdk-drag-dragging",o._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[t.Jv_([{provide:jt,useExisting:i}]),t.OA$]})}}return i})();const Rt=new t.nKC("CdkDropListGroup");let an=0,me=(()=>{class i{static{this._dropLists=[]}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=(0,_.he)(e)}constructor(e,n,o,s,a,c,d){this.element=e,this._changeDetectorRef=o,this._scrollDispatcher=s,this._dir=a,this._group=c,this._destroyed=new x.B,this.connectedTo=[],this.id="cdk-drop-list-"+an++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new t.bkB,this.entered=new t.bkB,this.exited=new t.bkB,this.sorted=new t.bkB,this._unsortedItems=new Set,this._dropListRef=n.createDropList(e),this._dropListRef.data=this,d&&this._assignDefaults(d),this._dropListRef.enterPredicate=(u,h)=>this.enterPredicate(u.data,h.data),this._dropListRef.sortPredicate=(u,h,v)=>this.sortPredicate(u,h.data,v.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),i._dropLists.push(this),c&&c._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,n)=>e._dragRef.getVisibleElement().compareDocumentPosition(n._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const e=i._dropLists.indexOf(this);e>-1&&i._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe((0,Mt.Z)(this._dir.value),(0,N.Q)(this._destroyed)).subscribe(n=>e.withDirection(n)),e.beforeStarted.subscribe(()=>{const n=(0,_.FG)(this.connectedTo).map(o=>"string"==typeof o?i._dropLists.find(a=>a.id===o):o);if(this._group&&this._group._items.forEach(o=>{-1===n.indexOf(o)&&n.push(o)}),!this._scrollableParentsResolved){const o=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(o),this._scrollableParentsResolved=!0}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=(0,_.he)(this.sortingDisabled),e.autoScrollDisabled=(0,_.he)(this.autoScrollDisabled),e.autoScrollStep=(0,_.OE)(this.autoScrollStep,2),e.connectedTo(n.filter(o=>o&&o!==this).map(o=>o._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(n=>{this.entered.emit({container:this,item:n.item.data,currentIndex:n.currentIndex})}),e.exited.subscribe(n=>{this.exited.emit({container:this,item:n.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(n=>{this.sorted.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,container:this,item:n.item.data})}),e.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,item:n.item.data,isPointerOverContainer:n.isPointerOverContainer,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),(0,J.h)(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){const{lockAxis:n,draggingDisabled:o,sortingDisabled:s,listAutoScrollDisabled:a,listOrientation:c}=e;this.disabled=o??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=a??!1,this.orientation=c||"vertical",n&&(this.lockAxis=n)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(t.aKT),t.rXU(wt),t.rXU(t.gRc),t.rXU(kt.R),t.rXU(_t.dS,8),t.rXU(Rt,12),t.rXU(pe,8))}}static{this.\u0275dir=t.FsC({type:i,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(n,o){2&n&&(t.BMQ("id",o.id),t.AVh("cdk-drop-list-disabled",o.disabled)("cdk-drop-list-dragging",o._dropListRef.isDragging())("cdk-drop-list-receiving",o._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[t.Jv_([{provide:Rt,useValue:void 0},{provide:ge,useExisting:i}])]})}}return i})(),cn=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({providers:[wt],imports:[kt.Gj]})}}return i})();var b=p(1188),dn=p(4978),k=p(400);let ln=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-product-master"]],decls:2,vars:0,consts:[[1,"product-master-container"]],template:function(n,o){1&n&&(t.j41(0,"div",0),t.nrm(1,"router-outlet"),t.k0s())},dependencies:[b.n3],styles:[".product-master-container[_ngcontent-%COMP%]{min-height:100vh;background:#f5f5f7}"]})}}return i})();var pn=p(8032),l=p.n(pn),tt=p(7505),Y=p(1108);function gn(i,r){1&i&&(t.j41(0,"mat-icon",5),t.EFF(1,"chevron_right"),t.k0s())}function un(i,r){if(1&i&&(t.j41(0,"span",6),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.selectedCategoryName)}}function mn(i,r){1&i&&(t.j41(0,"span"),t.EFF(1,"Master Products"),t.k0s())}function hn(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.SpI("",e.selectedCategoryName," Products")}}function fn(i,r){1&i&&(t.j41(0,"span"),t.EFF(1,"Manage your complete product catalog"),t.k0s())}function _n(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.SpI("Products in ",e.selectedCategoryName," category")}}function Cn(i,r){1&i&&(t.j41(0,"button",48)(1,"mat-icon"),t.EFF(2,"arrow_back"),t.k0s(),t.EFF(3," Back to Categories "),t.k0s())}function xn(i,r){1&i&&(t.j41(0,"span"),t.EFF(1,"Filters"),t.k0s())}function bn(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.SpI("Filters - ",e.selectedCategoryName," Category")}}function Pn(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",49),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.clearFilters())}),t.j41(1,"mat-icon"),t.EFF(2,"clear"),t.k0s(),t.EFF(3," Clear All "),t.k0s()}}function vn(i,r){if(1&i&&(t.j41(0,"mat-option",50),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e),t.R7$(1),t.JRh(e)}}function Fn(i,r){if(1&i&&(t.j41(0,"mat-option",50),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e),t.R7$(1),t.JRh(e)}}function kn(i,r){1&i&&(t.j41(0,"th",64),t.EFF(1,"Image"),t.k0s())}function Mn(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",68)(1,"img",69),t.bIt("error",function(o){t.eBV(e);const s=t.XpG(3);return t.Njj(s.onImageError(o))}),t.k0s()()}if(2&i){const e=t.XpG().$implicit,n=t.XpG(2);t.R7$(1),t.Y8G("src",n.getImageUrl(e.primaryImageUrl),t.B4B)("alt",e.name)}}function yn(i,r){1&i&&(t.j41(0,"div",70)(1,"mat-icon"),t.EFF(2,"image"),t.k0s()())}function On(i,r){if(1&i&&(t.j41(0,"td",65),t.DNE(1,Mn,2,2,"div",66),t.DNE(2,yn,3,0,"div",67),t.k0s()),2&i){const e=r.$implicit;t.R7$(1),t.Y8G("ngIf",e.primaryImageUrl),t.R7$(1),t.Y8G("ngIf",!e.primaryImageUrl)}}function En(i,r){1&i&&(t.j41(0,"th",71),t.EFF(1,"Product Details"),t.k0s())}function In(i,r){if(1&i&&(t.j41(0,"span",80),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(1),t.SpI(" \u2022 ",e.nameTamil,"")}}function Sn(i,r){if(1&i&&(t.j41(0,"span",76)(1,"mat-icon",77),t.EFF(2,"business"),t.k0s(),t.EFF(3),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(3),t.SpI(" ",e.brand," ")}}function wn(i,r){if(1&i&&(t.j41(0,"td",65)(1,"div",72)(2,"div",73),t.EFF(3),t.DNE(4,In,2,1,"span",74),t.k0s(),t.j41(5,"div",75)(6,"span",76)(7,"mat-icon",77),t.EFF(8,"label"),t.k0s(),t.EFF(9),t.k0s(),t.DNE(10,Sn,4,1,"span",78),t.k0s(),t.j41(11,"div",79),t.EFF(12),t.k0s()()()),2&i){const e=r.$implicit;t.R7$(3),t.SpI(" ",e.name," "),t.R7$(1),t.Y8G("ngIf",e.nameTamil),t.R7$(5),t.SpI(" ",e.sku," "),t.R7$(1),t.Y8G("ngIf",e.brand),t.R7$(2),t.JRh(e.description||"No description available")}}function jn(i,r){1&i&&(t.j41(0,"th",64),t.EFF(1,"Category"),t.k0s())}function Dn(i,r){if(1&i&&(t.j41(0,"span",83),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(1),t.SpI(" ",e.category.name," ")}}function Rn(i,r){1&i&&(t.j41(0,"span",84),t.EFF(1,"-"),t.k0s())}function Tn(i,r){if(1&i&&(t.j41(0,"td",65),t.DNE(1,Dn,2,1,"span",81),t.DNE(2,Rn,2,0,"span",82),t.k0s()),2&i){const e=r.$implicit;t.R7$(1),t.Y8G("ngIf",e.category),t.R7$(1),t.Y8G("ngIf",!e.category)}}function Nn(i,r){1&i&&(t.j41(0,"th",64),t.EFF(1,"Status"),t.k0s())}function Bn(i,r){if(1&i&&(t.j41(0,"td",65)(1,"span",85)(2,"mat-icon",86),t.EFF(3),t.k0s(),t.EFF(4),t.k0s()()),2&i){const e=r.$implicit;t.R7$(1),t.AVh("active","ACTIVE"===e.status)("inactive","INACTIVE"===e.status),t.R7$(2),t.SpI(" ","ACTIVE"===e.status?"check_circle":"cancel"," "),t.R7$(1),t.SpI(" ",e.status," ")}}function An(i,r){1&i&&(t.j41(0,"th",64),t.EFF(1,"Actions"),t.k0s())}const Gn=function(i){return["/products/master",i]};function $n(i,r){if(1&i){const e=t.RV6();t.j41(0,"td",65)(1,"div",87)(2,"button",88)(3,"mat-icon"),t.EFF(4,"edit"),t.k0s()(),t.j41(5,"button",89),t.bIt("click",function(){const s=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.duplicateProduct(s))}),t.j41(6,"mat-icon"),t.EFF(7,"content_copy"),t.k0s()(),t.j41(8,"button",90),t.bIt("click",function(){const s=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.deleteProduct(s))}),t.j41(9,"mat-icon"),t.EFF(10,"delete"),t.k0s()()()()}if(2&i){const e=r.$implicit;t.R7$(2),t.Y8G("routerLink",t.eq3(1,Gn,e.id))}}function Ln(i,r){1&i&&t.nrm(0,"tr",91)}function Un(i,r){1&i&&t.nrm(0,"tr",92)}function zn(i,r){if(1&i&&(t.j41(0,"tr",93)(1,"td",94)(2,"div",95)(3,"mat-icon",96),t.EFF(4,"inventory_2"),t.k0s(),t.j41(5,"h3"),t.EFF(6,"No Products Found"),t.k0s(),t.j41(7,"p"),t.EFF(8,"Try adjusting your filters or add a new product"),t.k0s()()()()),2&i){const e=t.XpG(2);t.R7$(1),t.BMQ("colspan",e.displayedColumns.length)}}function Yn(i,r){if(1&i&&(t.j41(0,"div",51)(1,"table",52),t.qex(2,53),t.DNE(3,kn,2,0,"th",54),t.DNE(4,On,3,2,"td",55),t.bVm(),t.qex(5,56),t.DNE(6,En,2,0,"th",57),t.DNE(7,wn,13,5,"td",55),t.bVm(),t.qex(8,58),t.DNE(9,jn,2,0,"th",54),t.DNE(10,Tn,3,2,"td",55),t.bVm(),t.qex(11,59),t.DNE(12,Nn,2,0,"th",54),t.DNE(13,Bn,5,6,"td",55),t.bVm(),t.qex(14,60),t.DNE(15,An,2,0,"th",54),t.DNE(16,$n,11,3,"td",55),t.bVm(),t.DNE(17,Ln,1,0,"tr",61),t.DNE(18,Un,1,0,"tr",62),t.DNE(19,zn,9,1,"tr",63),t.k0s()()),2&i){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.dataSource),t.R7$(16),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",e.displayedColumns)}}function Vn(i,r){1&i&&(t.j41(0,"div",97),t.nrm(1,"mat-spinner",98),t.j41(2,"h3"),t.EFF(3,"Loading Products"),t.k0s(),t.j41(4,"p"),t.EFF(5,"Please wait while we fetch your products..."),t.k0s()())}const Xn=function(){return[10,25,50,100]};let Kn=(()=>{class i{constructor(e,n,o){this.productService=e,this.router=n,this.route=o,this.displayedColumns=["image","name","category","status","actions"],this.dataSource=new P.I6,this.loading=!1,this.products=[],this.totalElements=0,this.searchQuery="",this.categoryFilter="",this.brandFilter="",this.statusFilter="",this.categories=[],this.brands=[],this.selectedCategoryName="",this.selectedCategoryId=null}ngOnInit(){this.route.queryParams.subscribe(e=>{e.categoryName?(this.categoryFilter=e.categoryName,this.selectedCategoryName=e.categoryName,this.selectedCategoryId=e.categoryId):(this.selectedCategoryName="",this.selectedCategoryId=null),this.loadProducts()})}ngAfterViewInit(){this.setupTableFeatures(),this.paginator&&this.paginator.page.subscribe(()=>{this.loadProducts()})}setupTableFeatures(){this.sort&&(this.dataSource.sort=this.sort)}loadProducts(){this.loading=!0;const e={page:this.paginator?this.paginator.pageIndex:0,size:this.paginator?this.paginator.pageSize:10};this.searchQuery&&this.searchQuery.trim()&&(e.search=this.searchQuery.trim()),this.selectedCategoryId?e.categoryId=this.selectedCategoryId:this.categoryFilter&&(e.categoryName=this.categoryFilter),this.brandFilter&&(e.brand=this.brandFilter),this.statusFilter&&(e.status=this.statusFilter),this.productService.getMasterProducts(e).subscribe({next:n=>{this.products=n.content||[],this.totalElements=n.totalElements||0,this.dataSource.data=this.products,this.extractFilters(),this.loading=!1},error:n=>{console.error("Error loading products:",n),this.loading=!1,l().fire({title:"Error!",text:"Failed to load products",icon:"error",confirmButtonText:"OK"})}})}extractFilters(){const e=new Set,n=new Set;this.products.forEach(o=>{o.category?.name&&e.add(o.category.name),o.brand&&n.add(o.brand)}),this.categories=Array.from(e).sort(),this.brands=Array.from(n).sort()}applyFilters(){this.paginator&&(this.paginator.pageIndex=0),this.loadProducts()}clearFilters(){this.searchQuery="",this.categoryFilter="",this.brandFilter="",this.statusFilter="",this.applyFilters()}hasActiveFilters(){return!!(this.searchQuery||this.categoryFilter||this.brandFilter||this.statusFilter)}getTotalProducts(){return this.products.length}getActiveProducts(){return this.products.filter(e=>"ACTIVE"===e.status).length}getCategories(){return this.categories.length}getFeaturedProducts(){return this.products.filter(e=>e.isFeatured).length||0}deleteProduct(e){l().fire({title:"Delete Product?",text:`Are you sure you want to delete "${e.name}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#f44336",cancelButtonColor:"#666",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(n=>{n.isConfirmed&&this.productService.deleteMasterProduct(e.id).subscribe({next:()=>{l().fire({title:"Deleted!",text:"Product has been deleted.",icon:"success",timer:2e3,showConfirmButton:!1}),this.loadProducts()},error:o=>{console.error("Error deleting product:",o),l().fire({title:"Error!",text:"Failed to delete product",icon:"error",confirmButtonText:"OK"})}})})}duplicateProduct(e){const n={...e,id:0,name:`${e.name} (Copy)`,sku:`${e.sku}-COPY-${Date.now()}`};this.productService.createMasterProduct(n).subscribe({next:o=>{l().fire({title:"Duplicated!",text:"Product has been duplicated successfully.",icon:"success",timer:2e3,showConfirmButton:!1}),this.loadProducts()},error:o=>{console.error("Error duplicating product:",o),l().fire({title:"Error!",text:"Failed to duplicate product",icon:"error",confirmButtonText:"OK"})}})}getImageUrl(e){return(0,tt.V)(e)}onImageError(e){e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik02MCA2MEgxNDBWMTQwSDYwVjYwWiIgZmlsbD0iI0UwRTBFMCIvPgo8Y2lyY2xlIGN4PSI4NSIgY3k9Ijg1IiByPSIxMCIgZmlsbD0iI0QwRDBEMCIvPgo8cGF0aCBkPSJNNjAgMTIwTDkwIDkwTDExMCAxMTBMMTQwIDgwVjE0MEg2MFYxMjBaIiBmaWxsPSIjRDBEMEQwIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTcwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjOTk5IiBmb250LXNpemU9IjEyIiBmb250LWZhbWlseT0iQXJpYWwiPk5vIEltYWdlPC90ZXh0Pgo8L3N2Zz4K"}onFiltersChange(e){}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(Y.b),t.rXU(b.Ix),t.rXU(b.nX))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-master-product-list"]],viewQuery:function(n,o){if(1&n&&(t.GBs(X.iy,5),t.GBs(ot.B4,5)),2&n){let s;t.mGM(s=t.lsd())&&(o.paginator=s.first),t.mGM(s=t.lsd())&&(o.sort=s.first)}},decls:122,vars:26,consts:[[1,"master-products-container"],[1,"page-header"],[1,"header-content"],[1,"breadcrumb"],[1,"breadcrumb-item"],[1,"breadcrumb-separator"],[1,"breadcrumb-item","active"],["class","breadcrumb-separator",4,"ngIf"],["class","breadcrumb-item active",4,"ngIf"],[1,"page-title"],[4,"ngIf"],[1,"page-description"],[1,"header-actions"],["mat-stroked-button","","color","accent","routerLink","/products/dashboard","class","back-button",4,"ngIf"],["mat-raised-button","","routerLink","/products/master/new",1,"action-button"],[1,"stats-row"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","active"],[1,"stat-card","featured"],[1,"filter-card"],[1,"filter-header"],[1,"filter-title"],["mat-button","","class","clear-filters",3,"click",4,"ngIf"],[1,"filter-content"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by name, SKU, or brand...",3,"ngModel","ngModelChange","input"],["matPrefix",""],["appearance","outline",1,"filter-field"],[3,"value","valueChange","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","ACTIVE"],[1,"status-option","active"],["value","INACTIVE"],[1,"status-option","inactive"],[1,"table-card"],[1,"table-header"],[1,"table-title"],[1,"table-actions"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["mat-icon-button","","matTooltip","Export"],["class","table-container",4,"ngIf"],["class","loading-state",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSizeOptions","pageSize"],["mat-stroked-button","","color","accent","routerLink","/products/dashboard",1,"back-button"],["mat-button","",1,"clear-filters",3,"click"],[3,"value"],[1,"table-container"],["mat-table","","matSort","",1,"products-table",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","category"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","product-row",4,"matRowDef","matRowDefColumns"],["class","mat-row no-data-row",4,"matNoDataRow"],["mat-header-cell",""],["mat-cell",""],["class","product-image",4,"ngIf"],["class","product-image no-image",4,"ngIf"],[1,"product-image"],[3,"src","alt","error"],[1,"product-image","no-image"],["mat-header-cell","","mat-sort-header",""],[1,"product-details"],[1,"product-name"],["class","tamil-name",4,"ngIf"],[1,"product-meta"],[1,"meta-item"],[1,"meta-icon"],["class","meta-item",4,"ngIf"],[1,"product-description"],[1,"tamil-name"],["class","category-badge",4,"ngIf"],["class","no-category",4,"ngIf"],[1,"category-badge"],[1,"no-category"],[1,"status-badge"],[1,"status-icon"],[1,"action-buttons"],["mat-icon-button","","matTooltip","Edit Product",1,"edit-button",3,"routerLink"],["mat-icon-button","","matTooltip","Duplicate",1,"duplicate-button",3,"click"],["mat-icon-button","","matTooltip","Delete",1,"delete-button",3,"click"],["mat-header-row",""],["mat-row","",1,"product-row"],[1,"mat-row","no-data-row"],[1,"mat-cell"],[1,"empty-state"],[1,"empty-icon"],[1,"loading-state"],["diameter","60"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4)(5,"mat-icon"),t.EFF(6,"dashboard"),t.k0s(),t.EFF(7," Dashboard "),t.k0s(),t.j41(8,"mat-icon",5),t.EFF(9,"chevron_right"),t.k0s(),t.j41(10,"span",4),t.EFF(11,"Products"),t.k0s(),t.j41(12,"mat-icon",5),t.EFF(13,"chevron_right"),t.k0s(),t.j41(14,"span",6),t.EFF(15,"Master Products"),t.k0s(),t.DNE(16,gn,2,0,"mat-icon",7),t.DNE(17,un,2,1,"span",8),t.k0s(),t.j41(18,"h1",9),t.DNE(19,mn,2,0,"span",10),t.DNE(20,hn,2,1,"span",10),t.k0s(),t.j41(21,"p",11),t.DNE(22,fn,2,0,"span",10),t.DNE(23,_n,2,1,"span",10),t.k0s()(),t.j41(24,"div",12),t.DNE(25,Cn,4,0,"button",13),t.j41(26,"button",14)(27,"mat-icon"),t.EFF(28,"add_circle"),t.k0s(),t.EFF(29," New Product "),t.k0s()()(),t.j41(30,"div",15)(31,"div",16)(32,"div",17)(33,"mat-icon"),t.EFF(34,"inventory"),t.k0s()(),t.j41(35,"div",18)(36,"div",19),t.EFF(37),t.k0s(),t.j41(38,"div",20),t.EFF(39,"Total Products"),t.k0s()()(),t.j41(40,"div",21)(41,"div",17)(42,"mat-icon"),t.EFF(43,"check_circle"),t.k0s()(),t.j41(44,"div",18)(45,"div",19),t.EFF(46),t.k0s(),t.j41(47,"div",20),t.EFF(48,"Active Products"),t.k0s()()(),t.j41(49,"div",16)(50,"div",17)(51,"mat-icon"),t.EFF(52,"category"),t.k0s()(),t.j41(53,"div",18)(54,"div",19),t.EFF(55),t.k0s(),t.j41(56,"div",20),t.EFF(57,"Categories"),t.k0s()()(),t.j41(58,"div",22)(59,"div",17)(60,"mat-icon"),t.EFF(61,"star"),t.k0s()(),t.j41(62,"div",18)(63,"div",19),t.EFF(64),t.k0s(),t.j41(65,"div",20),t.EFF(66,"Featured"),t.k0s()()()(),t.j41(67,"mat-card",23)(68,"div",24)(69,"h3",25)(70,"mat-icon"),t.EFF(71,"filter_list"),t.k0s(),t.DNE(72,xn,2,0,"span",10),t.DNE(73,bn,2,1,"span",10),t.k0s(),t.DNE(74,Pn,4,0,"button",26),t.k0s(),t.j41(75,"div",27)(76,"mat-form-field",28)(77,"mat-label"),t.EFF(78,"Search Products"),t.k0s(),t.j41(79,"input",29),t.bIt("ngModelChange",function(a){return o.searchQuery=a})("input",function(){return o.applyFilters()}),t.k0s(),t.j41(80,"mat-icon",30),t.EFF(81,"search"),t.k0s()(),t.j41(82,"mat-form-field",31)(83,"mat-label"),t.EFF(84,"Category"),t.k0s(),t.j41(85,"mat-select",32),t.bIt("valueChange",function(a){return o.categoryFilter=a})("selectionChange",function(){return o.applyFilters()}),t.j41(86,"mat-option",33),t.EFF(87,"All Categories"),t.k0s(),t.DNE(88,vn,2,2,"mat-option",34),t.k0s()(),t.j41(89,"mat-form-field",31)(90,"mat-label"),t.EFF(91,"Brand"),t.k0s(),t.j41(92,"mat-select",32),t.bIt("valueChange",function(a){return o.brandFilter=a})("selectionChange",function(){return o.applyFilters()}),t.j41(93,"mat-option",33),t.EFF(94,"All Brands"),t.k0s(),t.DNE(95,Fn,2,2,"mat-option",34),t.k0s()(),t.j41(96,"mat-form-field",31)(97,"mat-label"),t.EFF(98,"Status"),t.k0s(),t.j41(99,"mat-select",32),t.bIt("valueChange",function(a){return o.statusFilter=a})("selectionChange",function(){return o.applyFilters()}),t.j41(100,"mat-option",33),t.EFF(101,"All Status"),t.k0s(),t.j41(102,"mat-option",35)(103,"span",36),t.EFF(104,"Active"),t.k0s()(),t.j41(105,"mat-option",37)(106,"span",38),t.EFF(107,"Inactive"),t.k0s()()()()()(),t.j41(108,"mat-card",39)(109,"div",40)(110,"h3",41),t.EFF(111,"Products List"),t.k0s(),t.j41(112,"div",42)(113,"button",43),t.bIt("click",function(){return o.loadProducts()}),t.j41(114,"mat-icon"),t.EFF(115,"refresh"),t.k0s()(),t.j41(116,"button",44)(117,"mat-icon"),t.EFF(118,"download"),t.k0s()()()(),t.DNE(119,Yn,20,3,"div",45),t.DNE(120,Vn,6,0,"div",46),t.nrm(121,"mat-paginator",47),t.k0s()()),2&n&&(t.R7$(16),t.Y8G("ngIf",o.selectedCategoryName),t.R7$(1),t.Y8G("ngIf",o.selectedCategoryName),t.R7$(2),t.Y8G("ngIf",!o.selectedCategoryName),t.R7$(1),t.Y8G("ngIf",o.selectedCategoryName),t.R7$(2),t.Y8G("ngIf",!o.selectedCategoryName),t.R7$(1),t.Y8G("ngIf",o.selectedCategoryName),t.R7$(2),t.Y8G("ngIf",o.selectedCategoryName),t.R7$(12),t.JRh(o.getTotalProducts()),t.R7$(9),t.JRh(o.getActiveProducts()),t.R7$(9),t.JRh(o.getCategories()),t.R7$(9),t.JRh(o.getFeaturedProducts()),t.R7$(8),t.Y8G("ngIf",!o.selectedCategoryName),t.R7$(1),t.Y8G("ngIf",o.selectedCategoryName),t.R7$(1),t.Y8G("ngIf",o.hasActiveFilters()),t.R7$(5),t.Y8G("ngModel",o.searchQuery),t.R7$(6),t.Y8G("value",o.categoryFilter),t.R7$(3),t.Y8G("ngForOf",o.categories),t.R7$(4),t.Y8G("value",o.brandFilter),t.R7$(3),t.Y8G("ngForOf",o.brands),t.R7$(4),t.Y8G("value",o.statusFilter),t.R7$(20),t.Y8G("ngIf",!o.loading),t.R7$(1),t.Y8G("ngIf",o.loading),t.R7$(1),t.Y8G("length",o.totalElements)("pageSizeOptions",t.lJ4(25,Xn))("pageSize",10))},dependencies:[f.Sq,f.bT,g.me,g.BC,g.vS,b.Wk,P.Zl,P.tL,P.ji,P.cC,P.YV,P.iL,P.KS,P.$R,P.YZ,P.NB,P.ky,X.iy,ot.B4,ot.aE,T.fg,C.rl,C.nJ,C.JW,F.$z,F.iY,M.An,A.VO,S.wT,m.RN,E.LG,B.oV],styles:[".master-products-container[_ngcontent-%COMP%]{background:#f5f5f7;min-height:100vh;padding-bottom:32px}.page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:48px 32px;color:#fff;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 20px #667eea33}.breadcrumb[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px;font-size:14px;opacity:.9}.breadcrumb-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;color:#fff;text-decoration:none}.breadcrumb-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.breadcrumb-separator[_ngcontent-%COMP%]{margin:0 8px;opacity:.6}.breadcrumb-item.active[_ngcontent-%COMP%]{font-weight:500}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;margin:0 0 8px;letter-spacing:-.5px}.page-description[_ngcontent-%COMP%]{font-size:16px;opacity:.95;margin:0}.action-button[_ngcontent-%COMP%]{background:white;color:#667eea;font-weight:600;padding:10px 24px;border-radius:8px;font-size:15px}.action-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.back-button[_ngcontent-%COMP%]{margin-right:12px;background:rgba(255,255,255,.1);color:#fff;border-color:#ffffff4d}.back-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.back-button[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.2);border-color:#ffffff80}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px;padding:32px 32px 0}.stat-card[_ngcontent-%COMP%]{background:white;border-radius:16px;padding:24px;display:flex;align-items:center;gap:20px;box-shadow:0 2px 8px #0000000f;transition:all .3s ease;border:2px solid transparent}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #0000001f}.stat-card.active[_ngcontent-%COMP%]{border-color:#4caf50;background:linear-gradient(135deg,#f1f8e9 0%,#fff 100%)}.stat-card.featured[_ngcontent-%COMP%]{border-color:#ffc107;background:linear-gradient(135deg,#fff8e1 0%,#fff 100%)}.stat-icon[_ngcontent-%COMP%]{width:56px;height:56px;background:linear-gradient(135deg,rgba(102,126,234,.1254901961) 0%,rgba(118,75,162,.1254901961) 100%);border-radius:12px;display:flex;align-items:center;justify-content:center}.stat-card.active[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(76,175,80,.1254901961) 0%,rgba(129,199,132,.1254901961) 100%)}.stat-card.featured[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(255,193,7,.1254901961) 0%,rgba(255,235,59,.1254901961) 100%)}.stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px;color:#667eea}.stat-card.active[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50}.stat-card.featured[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffc107}.stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;line-height:1;margin-bottom:4px;color:#1a1a1a}.stat-label[_ngcontent-%COMP%]{font-size:14px;color:#888;font-weight:500}.filter-card[_ngcontent-%COMP%]{margin:0 32px 24px;border-radius:16px;box-shadow:0 2px 8px #0000000f;border:none;padding:24px}.filter-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.filter-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:18px;font-weight:600;margin:0;color:#1a1a1a}.filter-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#667eea}.clear-filters[_ngcontent-%COMP%]{color:#f44336}.filter-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:16px}.search-field[_ngcontent-%COMP%]{grid-column:span 1}.filter-field[_ngcontent-%COMP%]{width:100%}.status-option[_ngcontent-%COMP%]{padding:2px 8px;border-radius:4px;font-size:12px;font-weight:600}.status-option.active[_ngcontent-%COMP%]{background:#e8f5e9;color:#4caf50}.status-option.inactive[_ngcontent-%COMP%]{background:#ffebee;color:#f44336}.table-card[_ngcontent-%COMP%]{margin:0 32px;border-radius:16px;box-shadow:0 2px 8px #0000000f;border:none;overflow:hidden}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e0e0e0;background:#fafafa}.table-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:0;color:#1a1a1a}.table-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.products-table[_ngcontent-%COMP%]{width:100%;background:white}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:13px;text-transform:uppercase;letter-spacing:.5px;color:#666;background:#fafafa;padding:16px!important}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px!important;border-bottom:1px solid #f0f0f0}.product-row[_ngcontent-%COMP%]:hover{background:#f8f9fa}.product-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;background:#f5f5f5;display:flex;align-items:center;justify-content:center}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-image.no-image[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f5f5f7 0%,#e8e8ea 100%);color:#bbb}.product-image.no-image[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.product-details[_ngcontent-%COMP%]{max-width:400px}.product-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1a1a1a;margin-bottom:4px}.tamil-name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#667eea;margin-left:4px}.product-meta[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:8px}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:13px;color:#666}.meta-icon[_ngcontent-%COMP%]{font-size:14px!important;width:14px!important;height:14px!important;color:#999}.product-description[_ngcontent-%COMP%]{font-size:13px;color:#888;line-height:1.4;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.category-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 12px;background:linear-gradient(135deg,#e3f2fd 0%,#bbdefb 100%);color:#1976d2;border-radius:20px;font-size:12px;font-weight:600}.no-category[_ngcontent-%COMP%]{color:#bbb}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase}.status-badge.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f5e9 0%,#c8e6c9 100%);color:#4caf50}.status-badge.inactive[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffebee 0%,#ffcdd2 100%);color:#f44336}.status-icon[_ngcontent-%COMP%]{font-size:14px!important;width:14px!important;height:14px!important}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px}.edit-button[_ngcontent-%COMP%]{color:#2196f3}.duplicate-button[_ngcontent-%COMP%]{color:#ff9800}.delete-button[_ngcontent-%COMP%]{color:#f44336}.empty-state[_ngcontent-%COMP%]{padding:60px 20px;text-align:center;color:#888}.empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin:0 auto 16px;color:#ddd}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;margin:0 0 8px;color:#666}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#999}.loading-state[_ngcontent-%COMP%]{padding:80px 20px;text-align:center}.loading-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:24px 0 8px;font-size:20px;color:#333}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888;margin:0}.no-data-row[_ngcontent-%COMP%]{height:200px}.no-data-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{text-align:center;padding:40px!important}@media (max-width: 1200px){.filter-content[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.search-field[_ngcontent-%COMP%]{grid-column:span 2}}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:24px}.stats-row[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:16px}.filter-card[_ngcontent-%COMP%], .table-card[_ngcontent-%COMP%]{margin:0 16px 16px}.filter-content[_ngcontent-%COMP%]{grid-template-columns:1fr}.search-field[_ngcontent-%COMP%]{grid-column:span 1}.table-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}}"]})}}return i})();var Wn=p(467),R=p(155),w=p(7338),et=p(2218),nt=p(1626);function Hn(i,r){if(1&i&&(t.j41(0,"div",10),t.nrm(1,"mat-progress-bar",11),t.j41(2,"p"),t.EFF(3),t.k0s()()),2&i){const e=t.XpG();t.R7$(1),t.Y8G("value",e.uploadProgress),t.R7$(2),t.SpI("Uploading... ",e.uploadProgress,"%")}}function Jn(i,r){1&i&&(t.j41(0,"div",30)(1,"mat-chip",31),t.EFF(2,"Primary"),t.k0s()())}function Qn(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",32),t.bIt("click",function(){t.eBV(e);const o=t.XpG().$implicit,s=t.XpG(2);return t.Njj(s.setPrimaryImage(o))}),t.j41(1,"mat-icon"),t.EFF(2,"star_border"),t.k0s()()}}function Zn(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",33),t.bIt("click",function(){t.eBV(e);const o=t.XpG().$implicit,s=t.XpG(2);return t.Njj(s.updateImageDetails(o))}),t.j41(1,"mat-icon"),t.EFF(2,"save"),t.k0s()()}}function qn(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",16)(1,"div",17)(2,"img",18),t.bIt("error",function(o){t.eBV(e);const s=t.XpG(2);return t.Njj(s.onImageError(o))}),t.k0s(),t.DNE(3,Jn,3,0,"div",19),t.j41(4,"div",20),t.DNE(5,Qn,3,0,"button",21),t.j41(6,"button",22),t.bIt("click",function(){const s=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.editImage(s))}),t.j41(7,"mat-icon"),t.EFF(8,"edit"),t.k0s()(),t.j41(9,"button",23),t.bIt("click",function(){const s=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.deleteImage(s))}),t.j41(10,"mat-icon"),t.EFF(11,"delete"),t.k0s()()()(),t.j41(12,"div",24)(13,"mat-form-field",25)(14,"mat-label"),t.EFF(15,"Alt text"),t.k0s(),t.j41(16,"input",26,27),t.bIt("ngModelChange",function(o){const a=t.eBV(e).$implicit;return t.Njj(a.altText=o)}),t.k0s()(),t.DNE(18,Zn,3,0,"button",28),t.k0s(),t.j41(19,"div",29)(20,"mat-icon"),t.EFF(21,"drag_indicator"),t.k0s()()()}if(2&i){const e=r.$implicit,n=t.XpG(2);t.AVh("primary",e.isPrimary),t.R7$(2),t.Y8G("src",n.getImageUrl(e),t.B4B)("alt",e.altText||"Product image"),t.R7$(1),t.Y8G("ngIf",e.isPrimary),t.R7$(2),t.Y8G("ngIf",!e.isPrimary),t.R7$(11),t.Y8G("ngModel",e.altText),t.R7$(2),t.Y8G("ngIf",e.altText&&e.altText.trim())}}function to(i,r){1&i&&(t.j41(0,"div",34)(1,"mat-icon"),t.EFF(2,"photo_library"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No images uploaded yet"),t.k0s()())}function eo(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",12)(1,"h4"),t.EFF(2),t.k0s(),t.j41(3,"div",13),t.bIt("cdkDropListDropped",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onImageReorder(o))}),t.DNE(4,qn,22,8,"div",14),t.k0s(),t.DNE(5,to,5,0,"div",15),t.k0s()}if(2&i){const e=t.XpG();t.R7$(2),t.Lme("",e.images.length," Image",e.images.length>1?"s":"",""),t.R7$(2),t.Y8G("ngForOf",e.images)("ngForTrackBy",e.trackByImageId),t.R7$(1),t.Y8G("ngIf",0===e.images.length)}}let he=(()=>{class i{constructor(e,n){this.http=e,this.snackBar=n,this.title="Product Images",this.productType="master",this.images=[],this.imagesChange=new t.bkB,this.imagesUploaded=new t.bkB,this.isDragOver=!1,this.uploadProgress=0}ngOnInit(){this.loadImages()}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.isDragOver=!0}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.isDragOver=!1}onDrop(e){e.preventDefault(),e.stopPropagation(),this.isDragOver=!1;const n=e.dataTransfer?.files;n&&this.uploadFiles(Array.from(n))}onFilesSelected(e){const n=e.target.files;n&&this.uploadFiles(Array.from(n))}uploadFiles(e){if(0===e.length)return;const n=e.filter(d=>this.validateFile(d));if(0===n.length)return;const o=new FormData;n.forEach((d,u)=>{console.log(`Adding file ${u+1}:`,d.name,d.size,d.type),o.append("images",d)});const s="master"===this.productType?`${w.Sn.BASE_URL}/products/images/master/${this.productId}`:`${w.Sn.BASE_URL}/products/images/shop/${this.shopId}/${this.productId}`;console.log(`Uploading ${n.length} files to:`,s),console.log(`Product Type: ${this.productType}, Product ID: ${this.productId}, Shop ID: ${this.shopId}`);const a=localStorage.getItem("auth_token")||localStorage.getItem("token");console.log("Auth token present:",!!a),this.uploadProgress=0,this.http.post(s,o,{reportProgress:!0,observe:"events",headers:{Accept:"application/json"}}).subscribe({next:d=>{if(d.type===nt.hv.UploadProgress)this.uploadProgress=Math.round(100*d.loaded/(d.total||1));else if(d.type===nt.hv.Response){this.uploadProgress=100;const u=d.body.data;console.log("Images uploaded successfully:",u),console.log("Current images before:",this.images.length),this.images.push(...u),console.log("Current images after:",this.images.length),this.imagesChange.emit(this.images),this.imagesUploaded.emit(u),this.snackBar.open(`${u.length} images uploaded successfully`,"Close",{duration:3e3}),setTimeout(()=>{this.uploadProgress=0},1e3)}},error:d=>{console.error("Upload failed:",d),console.error("Error status:",d.status),console.error("Error message:",d.message),console.error("Error body:",d.error),this.uploadProgress=0;let u="Upload failed. Please try again.";500===d.status?u="Server error during upload. Please contact support or try again later.":413===d.status?u="File too large. Please reduce file size and try again.":401===d.status?u="Authentication required. Please login again.":403===d.status?u="Permission denied. You may not have access to upload images.":d.error?.message&&(u=`Upload failed: ${d.error.message}`),this.snackBar.open(u,"Close",{duration:5e3,panelClass:["error-snackbar"]})}})}validateFile(e){return e.type.startsWith("image/")?!(e.size>5242880&&(this.snackBar.open(`${e.name} is too large (max 5MB)`,"Close",{duration:3e3}),1)):(this.snackBar.open(`${e.name} is not a valid image file`,"Close",{duration:3e3}),!1)}loadImages(){this.http.get("master"===this.productType?`${w.Sn.BASE_URL}/products/images/master/${this.productId}`:`${w.Sn.BASE_URL}/products/images/shop/${this.shopId}/${this.productId}`).subscribe({next:n=>{this.images=n.data||[],this.imagesChange.emit(this.images)},error:n=>{console.error("Failed to load images:",n)}})}getImageUrl(e){return(0,tt.V)(e.imageUrl)}onImageError(e){e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIxIDMuMDE2QzIxIDIuNDU2IDIwLjU0NCAyIDIwIDJINEMzLjQ1NiAyIDMgMi40NTYgMyAzLjAxNlY5TDE5IDlWMy4wMTZaIiBmaWxsPSIjRTBFMEUwIi8+CjxwYXRoIGQ9Ik0zIDlMMjEgOVYyMC45ODRDMjEgMjEuNTQ0IDIwLjU0NCAyMiAyMCAyMkg0QzMuNDU2IDIyIDMgMjEuNTQ0IDMgMjAuOTg0VjlaIiBmaWxsPSIjRjVGNUY1Ii8+CjxjaXJjbGUgY3g9IjcuNSIgY3k9IjYuNSIgcj0iMS41IiBmaWxsPSIjRDBEMEQwIi8+CjxwYXRoIGQ9Ik0zIDE5TDggMTRMMTEgMTdMMTcgMTFMMjEgMTVWMjBIMlYxOUgzWiIgZmlsbD0iI0QwRDBEMCIvPgo8L3N2Zz4K"}setPrimaryImage(e){this.http.patch(`${w.Sn.BASE_URL}/products/images/${e.id}/primary`,{}).subscribe({next:n=>{this.images.forEach(s=>s.isPrimary=!1);const o=this.images.find(s=>s.id===e.id);o&&(o.isPrimary=!0),this.imagesChange.emit(this.images),this.snackBar.open("Primary image updated","Close",{duration:2e3})},error:n=>{console.error("Failed to set primary image:",n),this.snackBar.open("Failed to update primary image","Close",{duration:3e3})}})}editImage(e){console.log("Edit image:",e)}deleteImage(e){confirm("Are you sure you want to delete this image?")&&(console.log("Deleting image:",e.id),console.log("Images before delete:",this.images.length),this.http.delete(`${w.Sn.BASE_URL}/products/images/${e.id}`).subscribe({next:()=>{console.log("Image deleted successfully from server"),this.images=this.images.filter(n=>n.id!==e.id),console.log("Images after delete:",this.images.length),this.imagesChange.emit(this.images),setTimeout(()=>{this.loadImages()},1e3),this.snackBar.open("Image deleted successfully","Close",{duration:2e3})},error:n=>{console.error("Failed to delete image:",n),console.error("Error details:",n.error);let o="Failed to delete image";n.error?.message&&(o=`Failed to delete image: ${n.error.message}`),this.snackBar.open(o,"Close",{duration:3e3})}}))}updateImageDetails(e){this.http.put(`${w.Sn.BASE_URL}/products/images/${e.id}`,{altText:e.altText,sortOrder:e.sortOrder}).subscribe({next:n=>{console.log("Image details updated successfully")},error:n=>{console.error("Failed to update image details:",n),"9999"===n.error?.statusCode||n.error?.message?.includes("not implemented")?console.warn("Image detail updates not implemented yet on backend - skipping update"):console.error("Unexpected error updating image details:",n)}})}onImageReorder(e){if(e.previousIndex!==e.currentIndex){oe(this.images,e.previousIndex,e.currentIndex),this.images.forEach((o,s)=>{o.sortOrder=s});const n=this.images.map(o=>o.id);this.http.post(`${w.Sn.BASE_URL}/products/images/${this.images[0].id}/reorder`,n).subscribe({next:()=>{this.imagesChange.emit(this.images)},error:o=>{console.error("Failed to reorder images:",o),this.loadImages()}})}}trackByImageId(e,n){return n.id}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(nt.Qq),t.rXU(mt.UG))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-product-image-upload"]],inputs:{title:"title",productId:"productId",shopId:"shopId",productType:"productType",images:"images"},outputs:{imagesChange:"imagesChange",imagesUploaded:"imagesUploaded"},decls:19,vars:5,consts:[[1,"image-upload-container"],[1,"upload-header"],[1,"upload-info"],[1,"upload-area",3,"dragover","dragleave","drop","click"],["type","file","multiple","","accept","image/*",2,"display","none",3,"change"],["fileInput",""],[1,"upload-content"],[1,"upload-icon"],["class","upload-progress",4,"ngIf"],["class","image-gallery",4,"ngIf"],[1,"upload-progress"],[3,"value"],[1,"image-gallery"],["cdkDropList","",1,"images-grid",3,"cdkDropListDropped"],["class","image-item","cdkDrag","",3,"primary",4,"ngFor","ngForOf","ngForTrackBy"],["class","no-images",4,"ngIf"],["cdkDrag","",1,"image-item"],[1,"image-container"],[3,"src","alt","error"],["class","primary-badge",4,"ngIf"],[1,"image-actions"],["mat-icon-button","","color","primary","matTooltip","Set as primary image",3,"click",4,"ngIf"],["mat-icon-button","","color","accent","matTooltip","Edit image details",3,"click"],["mat-icon-button","","color","warn","matTooltip","Delete image",3,"click"],[1,"image-info"],["appearance","outline",1,"alt-text-field"],["matInput","","placeholder","Describe this image",3,"ngModel","ngModelChange"],["altTextInput",""],["mat-icon-button","","matTooltip","Update image details","class","save-details-btn",3,"click",4,"ngIf"],["cdkDragHandle","",1,"drag-handle"],[1,"primary-badge"],["color","primary"],["mat-icon-button","","color","primary","matTooltip","Set as primary image",3,"click"],["mat-icon-button","","matTooltip","Update image details",1,"save-details-btn",3,"click"],[1,"no-images"]],template:function(n,o){if(1&n){const s=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"h3"),t.EFF(3),t.k0s(),t.j41(4,"div",2)(5,"p"),t.EFF(6,"Upload up to 10 images (max 5MB each). Supported formats: JPG, PNG, GIF, WebP"),t.k0s()()(),t.j41(7,"div",3),t.bIt("dragover",function(c){return o.onDragOver(c)})("dragleave",function(c){return o.onDragLeave(c)})("drop",function(c){return o.onDrop(c)})("click",function(){t.eBV(s);const c=t.sdS(9);return t.Njj(c.click())}),t.j41(8,"input",4,5),t.bIt("change",function(c){return o.onFilesSelected(c)}),t.k0s(),t.j41(10,"div",6)(11,"mat-icon",7),t.EFF(12,"cloud_upload"),t.k0s(),t.j41(13,"h4"),t.EFF(14,"Drop images here or click to browse"),t.k0s(),t.j41(15,"p"),t.EFF(16,"Choose multiple images to upload"),t.k0s()()(),t.DNE(17,Hn,4,2,"div",8),t.DNE(18,eo,6,5,"div",9),t.k0s()}2&n&&(t.R7$(3),t.JRh(o.title),t.R7$(4),t.AVh("drag-over",o.isDragOver),t.R7$(10),t.Y8G("ngIf",o.uploadProgress>0&&o.uploadProgress<100),t.R7$(1),t.Y8G("ngIf",o.images.length>0))},dependencies:[f.Sq,f.bT,g.me,g.BC,g.vS,T.fg,C.rl,C.nJ,F.iY,M.An,K.Jl,B.oV,Ft.HM,me,ue,ce],styles:[".image-upload-container[_ngcontent-%COMP%]{width:100%}.upload-header[_ngcontent-%COMP%]{margin-bottom:16px}.upload-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#333}.upload-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:0}.upload-area[_ngcontent-%COMP%]{border:2px dashed #ddd;border-radius:8px;padding:40px 20px;text-align:center;cursor:pointer;transition:all .3s ease;background:#fafafa}.upload-area[_ngcontent-%COMP%]:hover, .upload-area.drag-over[_ngcontent-%COMP%]{border-color:#3f51b5;background:#f5f7ff}.upload-content[_ngcontent-%COMP%]{pointer-events:none}.upload-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;color:#999;margin-bottom:16px}.upload-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;color:#333}.upload-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.upload-progress[_ngcontent-%COMP%]{margin:16px 0}.upload-progress[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0 0;text-align:center;font-size:14px;color:#666}.image-gallery[_ngcontent-%COMP%]{margin-top:24px}.image-gallery[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;color:#333}.images-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}.image-item[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;overflow:hidden;background:#fff;transition:all .3s ease;position:relative}.image-item[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a}.image-item.primary[_ngcontent-%COMP%]{border-color:#3f51b5;box-shadow:0 0 0 2px #3f51b533}.image-container[_ngcontent-%COMP%]{position:relative;aspect-ratio:1;overflow:hidden}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.primary-badge[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px}.image-actions[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;display:flex;gap:4px;opacity:0;transition:opacity .3s ease;background:rgba(255,255,255,.9);border-radius:20px;padding:4px}.image-item[_ngcontent-%COMP%]:hover   .image-actions[_ngcontent-%COMP%]{opacity:1}.image-info[_ngcontent-%COMP%]{padding:16px;display:flex;align-items:center;gap:8px}.alt-text-field[_ngcontent-%COMP%]{flex:1}.save-details-btn[_ngcontent-%COMP%]{color:#4caf50;background:rgba(76,175,80,.1);border-radius:50%}.save-details-btn[_ngcontent-%COMP%]:hover{background:rgba(76,175,80,.2)}.drag-handle[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px;cursor:grab;background:rgba(255,255,255,.9);border-radius:4px;padding:4px;opacity:0;transition:opacity .3s ease}.image-item[_ngcontent-%COMP%]:hover   .drag-handle[_ngcontent-%COMP%]{opacity:1}.drag-handle[_ngcontent-%COMP%]:active{cursor:grabbing}.no-images[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.no-images[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;margin-bottom:16px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:8px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.images-grid.cdk-drop-list-dragging[_ngcontent-%COMP%]   .image-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}@media (max-width: 768px){.images-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:12px}.upload-area[_ngcontent-%COMP%]{padding:30px 15px}.image-info[_ngcontent-%COMP%]{padding:12px}}"]})}}return i})();function no(i,r){1&i&&(t.j41(0,"mat-error"),t.EFF(1," Product name is required "),t.k0s())}function oo(i,r){1&i&&(t.j41(0,"mat-error"),t.EFF(1," SKU is required "),t.k0s())}function io(i,r){if(1&i&&(t.j41(0,"mat-option",50),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(1),t.SpI(" ",e.name," ")}}function ro(i,r){1&i&&(t.j41(0,"mat-option",51),t.EFF(1," No categories available "),t.k0s())}function so(i,r){1&i&&(t.j41(0,"mat-hint",52)(1,"a",53),t.EFF(2,"Create categories first"),t.k0s()())}function ao(i,r){1&i&&(t.j41(0,"mat-error"),t.EFF(1," Category is required "),t.k0s())}function co(i,r){if(1&i&&(t.j41(0,"mat-option",50),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e),t.R7$(1),t.SpI(" ",e," ")}}function lo(i,r){1&i&&(t.j41(0,"div",73)(1,"mat-chip",56),t.EFF(2,"Primary"),t.k0s()())}function po(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",67),t.nrm(1,"img",68),t.j41(2,"div",69)(3,"span",70),t.EFF(4),t.k0s(),t.j41(5,"button",71),t.bIt("click",function(){const s=t.eBV(e).index,a=t.XpG(3);return t.Njj(a.removeSelectedFile(s))}),t.j41(6,"mat-icon"),t.EFF(7,"close"),t.k0s()()(),t.DNE(8,lo,3,0,"div",72),t.k0s()}if(2&i){const e=r.$implicit,n=r.index,o=t.XpG(3);t.R7$(1),t.Y8G("src",o.getFilePreview(e),t.B4B)("alt",e.name),t.R7$(3),t.JRh(e.name),t.R7$(4),t.Y8G("ngIf",0===n)}}function go(i,r){if(1&i&&(t.j41(0,"div",64)(1,"h4"),t.EFF(2),t.k0s(),t.j41(3,"div",65),t.DNE(4,po,9,4,"div",66),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(2),t.SpI("Selected Images (",e.selectedFiles.length,")"),t.R7$(2),t.Y8G("ngForOf",e.selectedFiles)}}function uo(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",54)(1,"div",55)(2,"mat-chip",56)(3,"mat-icon",57),t.EFF(4,"info"),t.k0s(),t.EFF(5," Select images - they'll be uploaded when you save the product "),t.k0s()(),t.j41(6,"div",58),t.bIt("dragover",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onDragOver(o))})("dragleave",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onDragLeave(o))})("drop",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onDrop(o))})("click",function(){t.eBV(e);const o=t.sdS(8);return t.Njj(o.click())}),t.j41(7,"input",59,60),t.bIt("change",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onFilesSelected(o))}),t.k0s(),t.j41(9,"div",61)(10,"mat-icon",62),t.EFF(11,"cloud_upload"),t.k0s(),t.j41(12,"h4"),t.EFF(13,"Select images for your product"),t.k0s(),t.j41(14,"p"),t.EFF(15,"Drag & drop or click to choose images"),t.k0s()()(),t.DNE(16,go,5,2,"div",63),t.k0s()}if(2&i){const e=t.XpG();t.R7$(6),t.AVh("drag-over",e.isDragOver),t.R7$(10),t.Y8G("ngIf",e.selectedFiles.length>0)}}function mo(i,r){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"app-product-image-upload",74),t.bIt("imagesChange",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onImagesChange(o))})("imagesUploaded",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onImagesUploaded(o))}),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(1),t.Y8G("productId",e.productId)("images",e.productImages)}}function ho(i,r){1&i&&t.nrm(0,"mat-spinner",75)}function fo(i,r){if(1&i&&(t.j41(0,"mat-icon"),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.isEditMode?"update":"add")}}let fe=(()=>{class i{constructor(e,n,o,s,a,c,d){this.fb=e,this.productService=n,this.categoryService=o,this.route=s,this.router=a,this.http=c,this.cdr=d,this.productSaved=new t.bkB,this.cancelled=new t.bkB,this.categories=[],this.brands=[],this.productImages=[],this.selectedFiles=[],this.isDragOver=!1,this.isLoading=!1,this.isEditMode=!1,this.productForm=this.createForm()}ngOnInit(){const e=this.route.snapshot.params.id;e?(this.productId=+e,this.isEditMode=!0):this.productId&&(this.isEditMode=!0),this.loadCategories(),this.loadBrands()}createForm(){return this.fb.group({name:["",[g.k0.required,g.k0.maxLength(255)]],nameTamil:["",[g.k0.maxLength(255)]],description:[""],sku:["",[g.k0.required,g.k0.maxLength(50)]],barcode:[""],categoryId:[null,g.k0.required],brand:[""],baseUnit:[""],baseWeight:[null,[g.k0.min(0)]],specifications:[""],status:[R.S.ACTIVE],isFeatured:[!1],isGlobal:[!1]})}loadCategories(){console.log("Loading categories..."),this.categoryService.getRootCategories(!0).subscribe({next:e=>{this.categories=e||[],console.log("Root categories loaded successfully:",this.categories.length,"categories found"),console.log("Categories:",this.categories),0===this.categories.length?(console.warn("No root categories found. Trying all categories..."),this.loadCategoriesAlternative()):this.onCategoriesLoaded()},error:e=>{console.error("Error loading root categories:",e),console.log("Trying paginated categories method..."),this.loadCategoriesAlternative()}})}loadCategoriesAlternative(){this.categoryService.getCategories(void 0,!0,void 0,0,100).subscribe({next:e=>{this.categories=e.content||[],console.log("Categories loaded (paginated method):",this.categories.length,"categories found"),console.log("Categories data:",this.categories),0===this.categories.length?(console.warn("No categories available. Please create categories first."),this.loadAllCategories()):this.onCategoriesLoaded()},error:e=>{console.error("Error loading categories (paginated):",e),console.log("Trying to load all categories..."),this.loadAllCategories()}})}loadAllCategories(){this.categoryService.getCategories(void 0,void 0,void 0,0,100).subscribe({next:e=>{this.categories=e.content||[],console.log("All categories loaded (final fallback):",this.categories.length,"categories found"),0===this.categories.length?(console.warn("No categories available at all. Using sample categories for testing."),this.addSampleCategories()):this.onCategoriesLoaded()},error:e=>{console.error("Error loading categories (final fallback):",e),console.log("All category loading methods failed. Using sample categories."),this.addSampleCategories()}})}addSampleCategories(){this.categories=[{id:1,name:"Electronics",slug:"electronics",isActive:!0,description:"Electronic devices and gadgets",fullPath:"Electronics",createdBy:"system",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),productCount:0,subcategoryCount:0,hasSubcategories:!1,isRootCategory:!0},{id:2,name:"Computers",slug:"computers",isActive:!0,description:"Laptops, desktops, and accessories",fullPath:"Computers",createdBy:"system",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),productCount:0,subcategoryCount:0,hasSubcategories:!1,isRootCategory:!0},{id:3,name:"Mobile Phones",slug:"mobile-phones",isActive:!0,description:"Smartphones and mobile accessories",fullPath:"Mobile Phones",createdBy:"system",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),productCount:0,subcategoryCount:0,hasSubcategories:!1,isRootCategory:!0},{id:4,name:"Home & Garden",slug:"home-garden",isActive:!0,description:"Home improvement and garden supplies",fullPath:"Home & Garden",createdBy:"system",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),productCount:0,subcategoryCount:0,hasSubcategories:!1,isRootCategory:!0}],console.log("Added sample categories for testing:",this.categories),this.onCategoriesLoaded()}onCategoriesLoaded(){console.log("Categories loaded, checking if we need to load product data..."),this.isEditMode&&this.productId&&(console.log("Loading product data for editing..."),this.loadProduct())}loadBrands(){this.productService.getAllBrands().subscribe({next:e=>{this.brands=e||[],console.log("Brands loaded:",this.brands)},error:e=>{console.error("Error loading brands:",e),l().fire({title:"Error!",text:"Failed to load brands",icon:"error",confirmButtonText:"OK"})}})}loadProduct(){this.productId&&(console.log("Loading product with ID:",this.productId),console.log("Available categories:",this.categories.length),this.isLoading=!0,this.productService.getMasterProduct(this.productId).subscribe({next:e=>{console.log("Product data received:",e);const n=e.categoryId||e.category?.id;console.log("Resolved categoryId:",n);const o=this.categories.find(s=>s.id===n);console.log("Category exists in dropdown:",o?"Yes":"No",o),this.productForm.patchValue({name:e.name,nameTamil:e.nameTamil,description:e.description,sku:e.sku,barcode:e.barcode,categoryId:n,brand:e.brand,baseUnit:e.baseUnit,baseWeight:e.baseWeight,specifications:e.specifications,status:e.status,isFeatured:e.isFeatured,isGlobal:e.isGlobal}),setTimeout(()=>{const s=this.productForm.get("categoryId");s&&e.categoryId&&(s.setValue(e.categoryId),s.updateValueAndValidity(),console.log("Category control value after force set:",s.value),console.log("Category control valid:",s.valid),this.cdr.detectChanges())},100),console.log("Form value after patch:",this.productForm.value),console.log("Form valid:",this.productForm.valid),Object.keys(this.productForm.controls).forEach(s=>{const a=this.productForm.get(s);a&&a.errors&&console.log(`Field '${s}' has errors:`,a.errors)}),this.loadProductImages(),this.isLoading=!1},error:e=>{console.error("Error loading product:",e),l().fire({title:"Error!",text:"Failed to load product",icon:"error",confirmButtonText:"OK"}),this.isLoading=!1}}))}loadProductImages(){this.productId&&this.http.get(`${w.Sn.BASE_URL}/products/images/master/${this.productId}`).subscribe({next:n=>{this.productImages=n.data||[],console.log("Product images loaded:",this.productImages)},error:n=>{console.error("Error loading product images:",n),this.productImages=[]}})}onSubmit(){if(console.log("Form submission attempted"),console.log("Form valid:",this.productForm.valid),console.log("Form value:",this.productForm.value),this.productForm.invalid)return Object.keys(this.productForm.controls).forEach(s=>{this.productForm.get(s)?.markAsTouched()}),void l().fire({title:"Validation Error",text:"Please fill in all required fields correctly",icon:"warning",confirmButtonText:"OK"});this.isLoading=!0;const e=this.productForm.value,n={name:e.name,nameTamil:e.nameTamil||void 0,description:e.description||void 0,sku:e.sku,barcode:e.barcode||void 0,categoryId:e.categoryId,brand:e.brand||void 0,baseUnit:e.baseUnit||void 0,baseWeight:e.baseWeight||void 0,specifications:e.specifications||void 0,status:e.status,isFeatured:e.isFeatured,isGlobal:e.isGlobal};(this.isEditMode?this.productService.updateMasterProduct(this.productId,n):this.productService.createMasterProduct(n)).subscribe({next:s=>{this.isEditMode?(l().fire({title:"Success!",text:"Product updated successfully!",icon:"success",confirmButtonText:"OK"}).then(()=>{this.router.navigate(["/products/master"])}),this.productSaved.emit(s),this.productForm.reset()):(this.productId=s.id,this.selectedFiles.length>0?this.uploadSelectedImages(s.id).then(()=>{l().fire({title:"Success!",text:`Product created successfully with ${this.selectedFiles.length} image${this.selectedFiles.length>1?"s":""}!`,icon:"success",confirmButtonText:"OK"}).then(()=>{this.router.navigate(["/products/master"])})}).catch(()=>{l().fire({title:"Product Created!",text:"Product created but image upload failed. You can upload images later by editing the product.",icon:"warning",confirmButtonText:"OK"}).then(()=>{this.router.navigate(["/products/master"])})}):l().fire({title:"Success!",text:"Product created successfully!",icon:"success",confirmButtonText:"OK"}).then(()=>{this.router.navigate(["/products/master"])}),this.productSaved.emit(s)),this.isLoading=!1},error:s=>{console.error("Error saving product:",s);let a=`Failed to ${this.isEditMode?"update":"create"} product`;s.error?.message&&(a=s.error.message),l().fire({title:"Error!",text:a,icon:"error",confirmButtonText:"OK"}),this.isLoading=!1}})}onImagesChange(e){this.productImages=e}onImagesUploaded(e){l().fire({title:"Success!",text:`${e.length} image${e.length>1?"s":""} uploaded successfully!`,icon:"success",timer:2e3,showConfirmButton:!1})}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.isDragOver=!0}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.isDragOver=!1}onDrop(e){e.preventDefault(),e.stopPropagation(),this.isDragOver=!1;const n=e.dataTransfer?.files;n&&this.handleFileSelection(Array.from(n))}onFilesSelected(e){const n=e.target.files;n&&this.handleFileSelection(Array.from(n))}handleFileSelection(e){const n=e.filter(o=>this.validateFile(o));this.selectedFiles=[...this.selectedFiles,...n]}validateFile(e){return e.type.startsWith("image/")?!(e.size>5242880&&(l().fire({title:"File Too Large",text:`${e.name} is too large (max 5MB)`,icon:"error",confirmButtonText:"OK"}),1)):(l().fire({title:"Invalid File",text:`${e.name} is not a valid image file`,icon:"error",confirmButtonText:"OK"}),!1)}getFilePreview(e){return URL.createObjectURL(e)}removeSelectedFile(e){this.selectedFiles.splice(e,1)}uploadSelectedImages(e){var n=this;return(0,Wn.A)(function*(){if(0===n.selectedFiles.length)return;const o=new FormData;n.selectedFiles.forEach(a=>{o.append("images",a)});const s=`${w.Sn.BASE_URL}/products/images/master/${e}`;return new Promise((a,c)=>{n.http.post(s,o).subscribe({next:d=>{n.selectedFiles=[],a()},error:d=>{console.error("Error uploading images:",d),c(d)}})})})()}onCancel(){this.cancelled.emit(),this.productForm.reset(),this.selectedFiles=[],this.router.navigate(["/products/master"])}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(g.ok),t.rXU(Y.b),t.rXU(et.F),t.rXU(b.nX),t.rXU(b.Ix),t.rXU(nt.Qq),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-master-product-form"]],inputs:{productId:"productId"},outputs:{productSaved:"productSaved",cancelled:"cancelled"},decls:158,vars:16,consts:[[1,"form-wrapper"],[1,"form-card"],[1,"form-header"],["mat-icon-button","","matTooltip","Go back",1,"back-button",3,"click"],[1,"header-content"],["mat-card-avatar","",1,"form-avatar"],[1,"header-text"],[1,"form-content"],[1,"product-form",3,"formGroup","ngSubmit"],[1,"form-section"],[1,"section-title"],[1,"section-icon"],[1,"form-grid"],["appearance","outline",1,"form-field"],["matInput","","formControlName","name","placeholder","Enter product name in English"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","nameTamil","placeholder","\u0ba4\u0baf\u0bb5\u0bc1\u0b9a\u0bc6\u0baf\u0bcd\u0ba4\u0bc1 \u0baa\u0bca\u0bb0\u0bc1\u0bb3\u0bbf\u0ba9\u0bcd \u0baa\u0bc6\u0baf\u0bb0\u0bc8 \u0b89\u0bb3\u0bcd\u0bb3\u0bbf\u0b9f\u0bb5\u0bc1\u0bae\u0bcd"],["matInput","","formControlName","sku","placeholder","Enter SKU"],["formControlName","categoryId"],[3,"value",4,"ngFor","ngForOf"],["value","","disabled","",4,"ngIf"],["class","no-categories-hint",4,"ngIf"],["formControlName","brand"],["value",""],["appearance","outline",1,"form-field","full-width"],["matInput","","formControlName","description","rows","3","placeholder","Enter product description"],["matInput","","formControlName","barcode","placeholder","Enter barcode"],["formControlName","status"],["value","ACTIVE"],[1,"status-icon","active"],["value","INACTIVE"],[1,"status-icon","inactive"],["value","DISCONTINUED"],[1,"status-icon","discontinued"],["matInput","","formControlName","baseUnit","placeholder","kg, ltr, pcs"],["matInput","","formControlName","baseWeight","type","number","step","0.01","placeholder","0.00"],["matInput","","formControlName","specifications","rows","3","placeholder","Enter product specifications"],[1,"checkbox-group"],["formControlName","isFeatured",1,"feature-checkbox"],[1,"checkbox-content"],[1,"checkbox-icon"],[1,"checkbox-title"],[1,"checkbox-subtitle"],["formControlName","isGlobal",1,"feature-checkbox"],["class","image-selection-section",4,"ngIf"],[1,"form-actions"],["mat-button","","type","button",1,"cancel-btn",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"submit-btn",3,"disabled","click"],["diameter","20","class","loading-spinner",4,"ngIf"],[3,"value"],["value","","disabled",""],[1,"no-categories-hint"],["routerLink","/products/categories/new","target","_blank"],[1,"image-selection-section"],[1,"image-upload-info"],["color","primary","selected",""],["matChipLeadingIcon",""],[1,"file-selection-area",3,"dragover","dragleave","drop","click"],["type","file","multiple","","accept","image/*",2,"display","none",3,"change"],["fileInput",""],[1,"upload-content"],[1,"upload-icon"],["class","selected-images-preview",4,"ngIf"],[1,"selected-images-preview"],[1,"preview-grid"],["class","preview-item",4,"ngFor","ngForOf"],[1,"preview-item"],[1,"preview-image",3,"src","alt"],[1,"preview-info"],[1,"file-name"],["mat-icon-button","","color","warn","matTooltip","Remove image",3,"click"],["class","primary-badge",4,"ngIf"],[1,"primary-badge"],["title","Master Product Images","productType","master",3,"productId","images","imagesChange","imagesUploaded"],["diameter","20",1,"loading-spinner"]],template:function(n,o){if(1&n&&(t.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"button",3),t.bIt("click",function(){return o.onCancel()}),t.j41(4,"mat-icon"),t.EFF(5,"arrow_back"),t.k0s()(),t.j41(6,"div",4)(7,"div",5)(8,"mat-icon"),t.EFF(9,"inventory"),t.k0s()(),t.j41(10,"div",6)(11,"mat-card-title"),t.EFF(12),t.k0s(),t.j41(13,"mat-card-subtitle"),t.EFF(14),t.k0s()()()(),t.j41(15,"mat-card-content",7)(16,"form",8),t.bIt("ngSubmit",function(){return o.onSubmit()}),t.j41(17,"div",9)(18,"h3",10)(19,"mat-icon",11),t.EFF(20,"info"),t.k0s(),t.EFF(21," Basic Information "),t.k0s(),t.j41(22,"div",12)(23,"mat-form-field",13)(24,"mat-label"),t.EFF(25,"Product Name (English)"),t.k0s(),t.nrm(26,"input",14),t.j41(27,"mat-icon",15),t.EFF(28,"title"),t.k0s(),t.DNE(29,no,2,0,"mat-error",16),t.k0s(),t.j41(30,"mat-form-field",13)(31,"mat-label"),t.EFF(32,"Product Name (Tamil)"),t.k0s(),t.nrm(33,"input",17),t.j41(34,"mat-icon",15),t.EFF(35,"translate"),t.k0s(),t.j41(36,"mat-hint"),t.EFF(37,"Optional - Enter product name in Tamil"),t.k0s()(),t.j41(38,"mat-form-field",13)(39,"mat-label"),t.EFF(40,"SKU"),t.k0s(),t.nrm(41,"input",18),t.j41(42,"mat-icon",15),t.EFF(43,"qr_code"),t.k0s(),t.DNE(44,oo,2,0,"mat-error",16),t.k0s(),t.j41(45,"mat-form-field",13)(46,"mat-label"),t.EFF(47,"Category"),t.k0s(),t.j41(48,"mat-select",19),t.DNE(49,io,2,2,"mat-option",20),t.DNE(50,ro,2,0,"mat-option",21),t.k0s(),t.j41(51,"mat-icon",15),t.EFF(52,"category"),t.k0s(),t.DNE(53,so,3,0,"mat-hint",22),t.DNE(54,ao,2,0,"mat-error",16),t.k0s(),t.j41(55,"mat-form-field",13)(56,"mat-label"),t.EFF(57,"Brand"),t.k0s(),t.j41(58,"mat-select",23)(59,"mat-option",24),t.EFF(60,"None"),t.k0s(),t.DNE(61,co,2,2,"mat-option",20),t.k0s(),t.j41(62,"mat-icon",15),t.EFF(63,"business"),t.k0s()()(),t.j41(64,"mat-form-field",25)(65,"mat-label"),t.EFF(66,"Description"),t.k0s(),t.nrm(67,"textarea",26),t.j41(68,"mat-icon",15),t.EFF(69,"description"),t.k0s()()(),t.j41(70,"div",9)(71,"h3",10)(72,"mat-icon",11),t.EFF(73,"inventory_2"),t.k0s(),t.EFF(74," Product Details "),t.k0s(),t.j41(75,"div",12)(76,"mat-form-field",13)(77,"mat-label"),t.EFF(78,"Barcode"),t.k0s(),t.nrm(79,"input",27),t.j41(80,"mat-icon",15),t.EFF(81,"barcode"),t.k0s()(),t.j41(82,"mat-form-field",13)(83,"mat-label"),t.EFF(84,"Status"),t.k0s(),t.j41(85,"mat-select",28)(86,"mat-option",29)(87,"mat-icon",30),t.EFF(88,"check_circle"),t.k0s(),t.EFF(89," Active "),t.k0s(),t.j41(90,"mat-option",31)(91,"mat-icon",32),t.EFF(92,"pause_circle"),t.k0s(),t.EFF(93," Inactive "),t.k0s(),t.j41(94,"mat-option",33)(95,"mat-icon",34),t.EFF(96,"cancel"),t.k0s(),t.EFF(97," Discontinued "),t.k0s()(),t.j41(98,"mat-icon",15),t.EFF(99,"toggle_on"),t.k0s()(),t.j41(100,"mat-form-field",13)(101,"mat-label"),t.EFF(102,"Base Unit"),t.k0s(),t.nrm(103,"input",35),t.j41(104,"mat-icon",15),t.EFF(105,"straighten"),t.k0s()(),t.j41(106,"mat-form-field",13)(107,"mat-label"),t.EFF(108,"Base Weight"),t.k0s(),t.nrm(109,"input",36),t.j41(110,"mat-icon",15),t.EFF(111,"scale"),t.k0s()()(),t.j41(112,"mat-form-field",25)(113,"mat-label"),t.EFF(114,"Specifications"),t.k0s(),t.nrm(115,"textarea",37),t.j41(116,"mat-icon",15),t.EFF(117,"settings"),t.k0s()()(),t.j41(118,"div",9)(119,"h3",10)(120,"mat-icon",11),t.EFF(121,"tune"),t.k0s(),t.EFF(122," Settings "),t.k0s(),t.j41(123,"div",38)(124,"mat-checkbox",39)(125,"div",40)(126,"mat-icon",41),t.EFF(127,"star"),t.k0s(),t.j41(128,"div")(129,"div",42),t.EFF(130,"Featured Product"),t.k0s(),t.j41(131,"div",43),t.EFF(132,"Show this product prominently"),t.k0s()()()(),t.j41(133,"mat-checkbox",44)(134,"div",40)(135,"mat-icon",41),t.EFF(136,"public"),t.k0s(),t.j41(137,"div")(138,"div",42),t.EFF(139,"Global Product"),t.k0s(),t.j41(140,"div",43),t.EFF(141,"Available to all shops"),t.k0s()()()()()(),t.j41(142,"div",9)(143,"h3",10)(144,"mat-icon",11),t.EFF(145,"photo_library"),t.k0s(),t.EFF(146," Product Images "),t.k0s(),t.DNE(147,uo,17,3,"div",45),t.DNE(148,mo,2,2,"div",16),t.k0s()()(),t.j41(149,"mat-card-actions",46)(150,"button",47),t.bIt("click",function(){return o.onCancel()}),t.j41(151,"mat-icon"),t.EFF(152,"cancel"),t.k0s(),t.EFF(153," Cancel "),t.k0s(),t.j41(154,"button",48),t.bIt("click",function(){return o.onSubmit()}),t.DNE(155,ho,1,0,"mat-spinner",49),t.DNE(156,fo,2,1,"mat-icon",16),t.EFF(157),t.k0s()()()()),2&n){let s,a,c;t.R7$(12),t.JRh(o.isEditMode?"Edit Product":"Create New Product"),t.R7$(2),t.JRh(o.isEditMode?"Update product information":"Add a new product to your inventory"),t.R7$(2),t.Y8G("formGroup",o.productForm),t.R7$(13),t.Y8G("ngIf",null==(s=o.productForm.get("name"))?null:s.hasError("required")),t.R7$(15),t.Y8G("ngIf",null==(a=o.productForm.get("sku"))?null:a.hasError("required")),t.R7$(5),t.Y8G("ngForOf",o.categories),t.R7$(1),t.Y8G("ngIf",0===o.categories.length),t.R7$(3),t.Y8G("ngIf",0===o.categories.length),t.R7$(1),t.Y8G("ngIf",null==(c=o.productForm.get("categoryId"))?null:c.hasError("required")),t.R7$(7),t.Y8G("ngForOf",o.brands),t.R7$(86),t.Y8G("ngIf",!o.isEditMode),t.R7$(1),t.Y8G("ngIf",o.isEditMode&&o.productId),t.R7$(6),t.Y8G("disabled",o.isLoading),t.R7$(1),t.Y8G("ngIf",o.isLoading),t.R7$(1),t.Y8G("ngIf",!o.isLoading),t.R7$(1),t.SpI(" ",o.isLoading?"Saving...":o.isEditMode?"Update Product":"Create Product"," ")}},dependencies:[f.Sq,f.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.j4,g.JD,b.Wk,T.fg,C.rl,C.nJ,C.MV,C.TL,C.yw,F.$z,F.iY,M.An,A.VO,S.wT,m.RN,m.YY,m.QG,m.m2,m.MM,m.Lc,m.dh,K.Jl,E.LG,L.So,B.oV,he],styles:[".form-wrapper[_ngcontent-%COMP%]{min-height:100vh;padding:20px;background:linear-gradient(135deg,#4CAF50 0%,#66BB6A 100%);display:flex;align-items:flex-start;justify-content:center}.form-card[_ngcontent-%COMP%]{width:100%;margin:20px auto;border-radius:16px;box-shadow:0 10px 30px #00000026;overflow:hidden}.form-header[_ngcontent-%COMP%]{background:#4CAF50;color:#fff;padding:0;display:flex;align-items:center;gap:0}.back-button[_ngcontent-%COMP%]{color:#fff;flex-shrink:0;padding:16px;margin:0;border-radius:0}.back-button[_ngcontent-%COMP%]:hover{background-color:#fff3}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:24px 24px 24px 0;flex:1}.header-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-header[_ngcontent-%COMP%]   .mat-mdc-card-title[_ngcontent-%COMP%]{color:#fff!important;font-size:1.5rem;font-weight:600;margin:0}.form-header[_ngcontent-%COMP%]   .mat-mdc-card-subtitle[_ngcontent-%COMP%]{color:#fffc!important;margin:8px 0 0}.form-avatar[_ngcontent-%COMP%]{background:rgba(255,255,255,.2);border-radius:50%;width:48px;height:48px;display:flex;align-items:center;justify-content:center;margin-right:16px}.form-avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:28px;width:28px;height:28px}.form-content[_ngcontent-%COMP%]{padding:32px;background:#fafafa}.product-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px}.form-section[_ngcontent-%COMP%]{background:white;border-radius:12px;padding:24px;box-shadow:0 2px 8px #0000000a;border:1px solid #e0e0e0}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 0 24px;color:#333;font-size:1.1rem;font-weight:600}.section-icon[_ngcontent-%COMP%]{margin-right:12px;color:#4caf50;font-size:20px;width:20px;height:20px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:20px}.form-field[_ngcontent-%COMP%]{width:100%}.form-field.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px}.mat-mdc-form-field-outline[_ngcontent-%COMP%]{border-radius:8px}.mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{padding:0 16px}.status-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;margin-right:8px;vertical-align:middle}.status-icon.active[_ngcontent-%COMP%]{color:#4caf50}.status-icon.inactive[_ngcontent-%COMP%]{color:#ff9800}.status-icon.discontinued[_ngcontent-%COMP%]{color:#f44336}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.feature-checkbox[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;padding:16px;transition:all .2s ease}.feature-checkbox[_ngcontent-%COMP%]:hover{background:#e8f5e9;border-color:#4caf50}.checkbox-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.checkbox-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:20px;width:20px;height:20px}.checkbox-title[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:4px}.checkbox-subtitle[_ngcontent-%COMP%]{font-size:12px;color:#666}.form-actions[_ngcontent-%COMP%]{background:white;padding:24px 32px;border-top:1px solid #e0e0e0;display:flex;gap:16px;justify-content:flex-end}.cancel-btn[_ngcontent-%COMP%]{padding:8px 24px;border-radius:8px;color:#666;border:1px solid #ddd}.cancel-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.submit-btn[_ngcontent-%COMP%]{padding:8px 32px;border-radius:8px;font-weight:600;background:linear-gradient(135deg,#4CAF50 0%,#66BB6A 100%);display:flex;align-items:center;gap:8px}.submit-btn[_ngcontent-%COMP%]:disabled{background:#ccc;color:#666}.loading-spinner[_ngcontent-%COMP%]{margin-right:8px}.no-categories-hint[_ngcontent-%COMP%]{color:#ff9800!important;font-size:12px}.no-categories-hint[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ff9800;text-decoration:underline;font-weight:500}.no-categories-hint[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f57c00}.image-selection-section[_ngcontent-%COMP%]{width:100%}.image-upload-info[_ngcontent-%COMP%]{margin-bottom:16px}.file-selection-area[_ngcontent-%COMP%]{border:2px dashed #ddd;border-radius:8px;padding:40px 20px;text-align:center;cursor:pointer;transition:all .3s ease;background:#fafafa;margin-bottom:20px}.file-selection-area[_ngcontent-%COMP%]:hover, .file-selection-area.drag-over[_ngcontent-%COMP%]{border-color:#4caf50;background:#f1f8e9}.upload-content[_ngcontent-%COMP%]{pointer-events:none}.upload-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;color:#999;margin-bottom:16px}.upload-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;color:#333}.upload-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.selected-images-preview[_ngcontent-%COMP%]{margin-top:20px}.selected-images-preview[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;color:#333}.preview-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:16px}.preview-item[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;overflow:hidden;background:#fff;position:relative}.preview-image[_ngcontent-%COMP%]{width:100%;height:120px;object-fit:cover;display:block}.preview-info[_ngcontent-%COMP%]{padding:8px;display:flex;justify-content:space-between;align-items:center}.file-name[_ngcontent-%COMP%]{font-size:12px;color:#666;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-right:8px}.primary-badge[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px}.submit-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}@media (max-width: 768px){.form-wrapper[_ngcontent-%COMP%]{padding:10px}.form-card[_ngcontent-%COMP%]{margin:10px;border-radius:12px}.form-content[_ngcontent-%COMP%], .form-section[_ngcontent-%COMP%]{padding:20px}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.form-actions[_ngcontent-%COMP%]{padding:20px;flex-direction:column-reverse}.cancel-btn[_ngcontent-%COMP%], .submit-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}.mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mat-mdc-form-field-outline-thick[_ngcontent-%COMP%], .mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mat-mdc-floating-label[_ngcontent-%COMP%]{color:#4caf50}"]})}}return i})();var _o=p(38),gt=p(8262),ut=p(272),Tt=p(8010);function Co(i,r){if(1&i&&t.nrm(0,"img",26),2&i){const e=t.XpG(2);t.Y8G("src",e.getShopLogo(),t.B4B)("alt",e.shop.name)}}function xo(i,r){1&i&&(t.j41(0,"div",27)(1,"mat-icon"),t.EFF(2,"store"),t.k0s()())}function bo(i,r){if(1&i&&(t.j41(0,"div",23),t.DNE(1,Co,1,2,"img",24),t.DNE(2,xo,3,0,"div",25),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.Y8G("ngIf",e.getShopLogo()),t.R7$(1),t.Y8G("ngIf",!e.getShopLogo())}}function Po(i,r){if(1&i&&(t.j41(0,"div",28),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getBusinessTypeDisplay(e.shop.businessType)," ")}}function vo(i,r){if(1&i&&(t.j41(0,"div",29)(1,"div",30),t.EFF(2),t.k0s()()),2&i){const e=t.XpG();t.R7$(2),t.JRh(e.shop.businessName||e.shop.ownerName)}}function Fo(i,r){if(1&i){const e=t.RV6();t.j41(0,"img",37),t.bIt("click",function(){const s=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.viewShopPhoto(s))}),t.k0s()}if(2&i){const e=r.$implicit,n=r.index,o=t.XpG(2);t.Y8G("src",e,t.B4B)("alt",((null==o.shop?null:o.shop.name)||"Shop")+" photo "+(n+1))}}function ko(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",38),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.viewAllPhotos())}),t.j41(1,"mat-icon"),t.EFF(2,"add"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&i){const e=t.XpG(2);t.R7$(4),t.SpI("",e.getShopPhotos().length-4," more")}}function Mo(i,r){if(1&i&&(t.j41(0,"div",31)(1,"h3",32)(2,"mat-icon",33),t.EFF(3,"photo_camera"),t.k0s(),t.EFF(4," Shop Photos "),t.k0s(),t.j41(5,"div",34),t.DNE(6,Fo,1,2,"img",35),t.DNE(7,ko,5,1,"div",36),t.k0s()()),2&i){const e=t.XpG();t.R7$(6),t.Y8G("ngForOf",e.getShopPhotos().slice(0,4)),t.R7$(1),t.Y8G("ngIf",e.getShopPhotos().length>4)}}function yo(i,r){if(1&i&&(t.j41(0,"div",39)(1,"div",40)(2,"div",41),t.EFF(3),t.k0s(),t.j41(4,"div",42),t.EFF(5,"Total Products"),t.k0s()(),t.j41(6,"div",40)(7,"div",41),t.EFF(8),t.k0s(),t.j41(9,"div",42),t.EFF(10,"Active"),t.k0s()(),t.j41(11,"div",40)(12,"div",41),t.EFF(13),t.k0s(),t.j41(14,"div",42),t.EFF(15,"Low Stock"),t.k0s()(),t.j41(16,"div",40)(17,"div",41),t.EFF(18),t.nI1(19,"currency"),t.k0s(),t.j41(20,"div",42),t.EFF(21,"Total Value"),t.k0s()()()),2&i){const e=t.XpG();t.R7$(3),t.JRh(e.products.length),t.R7$(5),t.JRh(e.getActiveProductsCount()),t.R7$(5),t.JRh(e.getLowStockCount()),t.R7$(5),t.JRh(t.ii3(19,4,e.getTotalValue(),"INR","symbol","1.0-0"))}}function Oo(i,r){if(1&i&&(t.j41(0,"span",53)(1,"mat-icon"),t.EFF(2,"phone"),t.k0s(),t.EFF(3),t.k0s()),2&i){const e=t.XpG(3);t.R7$(3),t.SpI(" ",e.shop.ownerPhone," ")}}function Eo(i,r){if(1&i&&(t.j41(0,"span",53)(1,"mat-icon"),t.EFF(2,"email"),t.k0s(),t.EFF(3),t.k0s()),2&i){const e=t.XpG(3);t.R7$(3),t.SpI(" ",e.shop.ownerEmail," ")}}function Io(i,r){if(1&i&&(t.j41(0,"div",51),t.DNE(1,Oo,4,1,"span",52),t.DNE(2,Eo,4,1,"span",52),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.Y8G("ngIf",e.shop.ownerPhone),t.R7$(1),t.Y8G("ngIf",e.shop.ownerEmail)}}function So(i,r){if(1&i&&(t.j41(0,"div",43)(1,"mat-card",44)(2,"mat-card-content")(3,"div",45)(4,"mat-icon",46),t.EFF(5,"location_on"),t.k0s(),t.j41(6,"h3"),t.EFF(7,"Shop Address"),t.k0s()(),t.j41(8,"div",47)(9,"p",48),t.EFF(10),t.k0s(),t.j41(11,"p",49),t.EFF(12),t.k0s(),t.DNE(13,Io,3,2,"div",50),t.k0s()()()()),2&i){const e=t.XpG();t.R7$(10),t.JRh(e.shop.addressLine1),t.R7$(2),t.E5c("",e.shop.city,", ",e.shop.state," ",e.shop.postalCode,""),t.R7$(1),t.Y8G("ngIf",e.shop.ownerPhone||e.shop.ownerEmail)}}const _e=function(i){return["/products/assign",i]};function wo(i,r){if(1&i&&(t.j41(0,"button",54)(1,"mat-icon"),t.EFF(2,"playlist_add"),t.k0s(),t.EFF(3," Bulk Assign Products "),t.k0s()),2&i){const e=t.XpG();t.Y8G("routerLink",t.eq3(1,_e,e.shopId))}}const Ce=function(){return["/products/shop-owner"]};function jo(i,r){1&i&&(t.j41(0,"button",55)(1,"mat-icon"),t.EFF(2,"add_shopping_cart"),t.k0s(),t.EFF(3," Select from Catalog "),t.k0s()),2&i&&t.Y8G("routerLink",t.lJ4(1,Ce))}function Do(i,r){1&i&&(t.j41(0,"button",71)(1,"mat-icon"),t.EFF(2,"add_shopping_cart"),t.k0s(),t.EFF(3," Select Products "),t.k0s()),2&i&&t.Y8G("routerLink",t.lJ4(1,Ce))}function Ro(i,r){if(1&i&&(t.j41(0,"button",72)(1,"mat-icon"),t.EFF(2,"playlist_add"),t.k0s(),t.EFF(3," Bulk Assign Products "),t.k0s()),2&i){const e=t.XpG(3);t.Y8G("routerLink",t.eq3(1,_e,e.shopId))}}const Nt=function(i){return["/products/shop",i,"new"]};function To(i,r){if(1&i&&(t.j41(0,"div",59)(1,"div",60)(2,"mat-icon",61),t.EFF(3,"inventory_2"),t.k0s(),t.j41(4,"div",62)(5,"mat-icon"),t.EFF(6,"add_shopping_cart"),t.k0s(),t.j41(7,"mat-icon"),t.EFF(8,"local_offer"),t.k0s(),t.j41(9,"mat-icon"),t.EFF(10,"trending_up"),t.k0s()()(),t.j41(11,"div",63)(12,"h3"),t.EFF(13,"No Products Added Yet"),t.k0s(),t.j41(14,"p",64),t.EFF(15," {{ isMyShop ? 'Your shop is empty! Start by selecting products and setting competitive prices to attract customers.' : 'This shop hasn't added any products yet. Help them get started by adding some popular items.' }} "),t.k0s(),t.j41(16,"div",65)(17,"div",66)(18,"mat-icon"),t.EFF(19,"add_shopping_cart"),t.k0s(),t.j41(20,"span"),t.EFF(21,"Select from master products"),t.k0s()(),t.j41(22,"div",66)(23,"mat-icon"),t.EFF(24,"attach_money"),t.k0s(),t.j41(25,"span"),t.EFF(26,"Set competitive prices"),t.k0s()(),t.j41(27,"div",66)(28,"mat-icon"),t.EFF(29,"inventory"),t.k0s(),t.j41(30,"span"),t.EFF(31,"Manage stock levels"),t.k0s()()()(),t.j41(32,"div",67),t.DNE(33,Do,4,2,"button",68),t.DNE(34,Ro,4,3,"button",69),t.j41(35,"button",70)(36,"mat-icon"),t.EFF(37,"add"),t.k0s(),t.EFF(38," Add Single Product "),t.k0s()()()),2&i){const e=t.XpG(2);t.R7$(33),t.Y8G("ngIf",e.canSelectProducts()),t.R7$(1),t.Y8G("ngIf",e.canBulkAssign()),t.R7$(1),t.Y8G("routerLink",t.eq3(3,Nt,e.shopId))}}function No(i,r){if(1&i&&(t.j41(0,"div",108),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit,n=t.XpG(3);t.R7$(1),t.SpI(" Unit: ",n.getProductUnit(e)," ")}}function Bo(i,r){if(1&i&&(t.j41(0,"span",109),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit,n=t.XpG(3);t.R7$(1),t.SpI(" ",n.getUnitPriceDisplay(e)," ")}}const Ao=function(i,r){return["/products/shop",i,r]};function Go(i,r){if(1&i){const e=t.RV6();t.j41(0,"tr",87)(1,"td",88)(2,"div",89)(3,"div",90)(4,"img",91),t.bIt("error",function(o){t.eBV(e);const s=t.XpG(3);return t.Njj(s.onImageError(o))}),t.k0s()(),t.j41(5,"div",92)(6,"div",93),t.EFF(7),t.k0s(),t.j41(8,"div",94),t.EFF(9),t.k0s(),t.DNE(10,No,2,1,"div",95),t.k0s()()(),t.j41(11,"td",96)(12,"div",97)(13,"span",98),t.EFF(14),t.nI1(15,"currency"),t.k0s(),t.DNE(16,Bo,2,1,"span",99),t.k0s()(),t.j41(17,"td",100)(18,"span",101),t.EFF(19),t.k0s()(),t.j41(20,"td",102)(21,"span",103),t.EFF(22),t.k0s()(),t.j41(23,"td",104)(24,"div",105)(25,"button",106)(26,"mat-icon"),t.EFF(27,"edit"),t.k0s()(),t.j41(28,"button",107),t.bIt("click",function(){const s=t.eBV(e).$implicit,a=t.XpG(3);return t.Njj(a.removeProduct(s))}),t.j41(29,"mat-icon"),t.EFF(30,"delete"),t.k0s()()()()()}if(2&i){const e=r.$implicit,n=t.XpG(3);t.R7$(4),t.Y8G("src",n.getProductImage(e),t.B4B)("alt",e.displayName),t.R7$(3),t.JRh(e.displayName),t.R7$(2),t.JRh(e.masterProduct.sku),t.R7$(1),t.Y8G("ngIf",n.getProductUnit(e)),t.R7$(4),t.JRh(t.ii3(15,12,e.price,"INR","symbol","1.0-0")),t.R7$(2),t.Y8G("ngIf",n.getUnitPriceDisplay(e)),t.R7$(2),t.Y8G("ngClass",n.getStockClass(e.stockQuantity)),t.R7$(1),t.SpI(" ",e.stockQuantity," in stock "),t.R7$(2),t.Y8G("ngClass",n.getStatusClass(e.status)),t.R7$(1),t.SpI(" ",n.getStatusDisplay(e.status)," "),t.R7$(3),t.Y8G("routerLink",t.l_i(17,Ao,n.shopId,e.id))}}function $o(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",73)(1,"div",74)(2,"h2",75),t.EFF(3),t.k0s(),t.j41(4,"div",76)(5,"button",77),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.refreshProducts())}),t.j41(6,"mat-icon"),t.EFF(7,"refresh"),t.k0s(),t.EFF(8," Refresh "),t.k0s(),t.j41(9,"button",78)(10,"mat-icon"),t.EFF(11,"add"),t.k0s(),t.EFF(12," Add Product "),t.k0s()()(),t.j41(13,"div",79)(14,"table",80)(15,"thead")(16,"tr")(17,"th",81),t.EFF(18,"Product"),t.k0s(),t.j41(19,"th",82),t.EFF(20,"Price"),t.k0s(),t.j41(21,"th",83),t.EFF(22,"Stock"),t.k0s(),t.j41(23,"th",84),t.EFF(24,"Status"),t.k0s(),t.j41(25,"th",85),t.EFF(26,"Actions"),t.k0s()()(),t.j41(27,"tbody"),t.DNE(28,Go,31,20,"tr",86),t.k0s()()()()}if(2&i){const e=t.XpG(2);t.R7$(3),t.SpI("Products (",e.products.length,")"),t.R7$(2),t.Y8G("disabled",e.loading),t.R7$(4),t.Y8G("routerLink",t.eq3(4,Nt,e.shopId)),t.R7$(19),t.Y8G("ngForOf",e.products)}}function Lo(i,r){if(1&i&&(t.j41(0,"mat-card",56)(1,"mat-card-content"),t.DNE(2,To,39,5,"div",57),t.DNE(3,$o,29,6,"div",58),t.k0s()()),2&i){const e=t.XpG();t.R7$(2),t.Y8G("ngIf",0===e.products.length),t.R7$(1),t.Y8G("ngIf",e.products.length>0)}}function Uo(i,r){1&i&&(t.j41(0,"div",110),t.nrm(1,"mat-spinner",111),t.j41(2,"p"),t.EFF(3,"Loading shop products..."),t.k0s()())}let xe=(()=>{class i{constructor(e,n,o,s,a){this.shopProductService=e,this.shopService=n,this.authService=o,this.route=s,this.router=a,this.products=[],this.shop=null,this.loading=!0,this.isMyShop=!1,this.currentUser=null,this.navigationSubscription=new U.yU}ngOnInit(){this.currentUser=this.authService.getCurrentUser(),this.isMyShop=this.router.url.includes("/products/my-shop"),this.isMyShop&&this.currentUser?.role===_o.g.SHOP_OWNER?this.loadMyShop():(this.shopId=+this.route.snapshot.params.shopId,this.loadShop(),this.loadProducts()),this.navigationSubscription=this.router.events.pipe((0,Lt.p)(e=>e instanceof b.wF)).subscribe(e=>{e.url.includes(`/products/shops/${this.shopId}`)&&!e.url.includes("/edit")&&!e.url.includes("/new")&&e.url===e.urlAfterRedirects&&(console.log("Detected navigation back to product list, refreshing data..."),this.refreshProducts())})}ngOnDestroy(){this.navigationSubscription&&this.navigationSubscription.unsubscribe()}loadMyShop(){this.loading=!0,this.shopService.getMyShop().subscribe({next:e=>{this.shop=e,this.shopId=e.id,this.loadProducts()},error:e=>{console.error("Error loading my shop:",e),l().fire({title:"Error!",text:"Failed to load your shop. You may not have a shop assigned to your account.",icon:"error",confirmButtonText:"OK"}),this.loading=!1}})}loadShop(){this.shopService.getShop(this.shopId).subscribe({next:e=>{this.shop=e},error:e=>{console.error("Error loading shop:",e)}})}loadProducts(){this.loading=!0,this.shopProductService.getShopProducts(this.shopId).subscribe({next:e=>{console.log("Shop products loaded from API:",e),this.products=e.content||[],console.log("First product data:",this.products[0]),this.loading=!1},error:e=>{console.error("Error loading shop products:",e),l().fire({title:"Error!",text:"Failed to load shop products",icon:"error",confirmButtonText:"OK"}),this.loading=!1}})}refreshProducts(){console.log("Force refreshing products..."),this.products=[],setTimeout(()=>{this.loadProducts()},500)}canBulkAssign(){return"ADMIN"===this.currentUser?.role}canSelectProducts(){return"ADMIN"===this.currentUser?.role||"SHOP_OWNER"===this.currentUser?.role}isShopOwner(){return"SHOP_OWNER"===this.currentUser?.role}goBack(){window.history.back()}getProductImage(e){if(console.log("getProductImage called for product:",e.displayName,{shopImages:e.images,masterProductImages:e.masterProduct?.images,primaryImageUrl:e.primaryImageUrl,masterProductPrimaryImageUrl:e.masterProduct?.primaryImageUrl}),e.primaryImageUrl){const n=e.primaryImageUrl;return n.startsWith("http://")||n.startsWith("https://")?n:`http://localhost:8082${n}`}if(e.masterProduct?.primaryImageUrl){const n=e.masterProduct.primaryImageUrl;return n.startsWith("http://")||n.startsWith("https://")?n:`http://localhost:8082${n}`}if(e.images&&e.images.length>0){const o=(e.images.find(s=>s.isPrimary)||e.images[0]).imageUrl;return o.startsWith("http://")||o.startsWith("https://")?o:`http://localhost:8082${o}`}if(e.masterProduct?.images&&e.masterProduct.images.length>0){const o=(e.masterProduct.images.find(s=>s.isPrimary)||e.masterProduct.images[0]).imageUrl;return o.startsWith("http://")||o.startsWith("https://")?o:`http://localhost:8082${o}`}return console.log("No images found, using placeholder for:",e.displayName),"https://images.unsplash.com/photo-1586985289688-ca3cf47d3e6e?w=40&h=40&fit=crop&crop=center"}onImageError(e){console.log("Image failed to load, using fallback"),e.target.src="https://images.unsplash.com/photo-1586985289688-ca3cf47d3e6e?w=40&h=40&fit=crop&crop=center"}getStatusColor(e){switch(e){case"ACTIVE":return"primary";case"INACTIVE":default:return"accent";case"OUT_OF_STOCK":case"DISCONTINUED":return"warn"}}getStatusClass(e){switch(e?.toUpperCase()){case"ACTIVE":return"status-active";case"INACTIVE":case"DISCONTINUED":default:return"status-inactive";case"OUT_OF_STOCK":return"status-out-of-stock"}}removeProduct(e){l().fire({title:"Are you sure?",text:`Do you want to remove "${e.displayName}" from this shop?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, remove it!",cancelButtonText:"Cancel"}).then(n=>{n.isConfirmed&&this.shopProductService.removeProductFromShop(this.shopId,e.id).subscribe({next:()=>{l().fire({title:"Removed!",text:"Product removed from shop successfully",icon:"success",confirmButtonText:"OK"}),this.loadProducts()},error:o=>{console.error("Error removing product:",o),l().fire({title:"Error!",text:"Failed to remove product from shop",icon:"error",confirmButtonText:"OK"})}})})}getActiveProductsCount(){return this.products.filter(e=>"ACTIVE"===e.status).length}getLowStockCount(){return this.products.filter(e=>e.stockQuantity<5).length}getTotalValue(){return this.products.reduce((e,n)=>e+(n.price||0)*(n.stockQuantity||0),0)}getStockClass(e){return 0===e?"out-of-stock":e<5?"low-stock":""}getStatusDisplay(e){switch(e?.toUpperCase()){case"ACTIVE":return"Active";case"INACTIVE":return"Inactive";case"OUT_OF_STOCK":return"Out of Stock";case"DISCONTINUED":return"Discontinued";default:return e||"Unknown"}}getShopLogo(){if(!this.shop||!this.shop.images||0===this.shop.images.length)return null;const e=this.shop.images.find(n=>"LOGO"===n.imageType&&n.isPrimary);if(e){const n=e.imageUrl;return n.startsWith("http://")||n.startsWith("https://")?n:`http://localhost:8082${n}`}return null}getBusinessTypeDisplay(e){switch(e?.toUpperCase()){case"GROCERY":return"Grocery";case"SUPERMARKET":return"Supermarket";case"PHARMACY":return"Pharmacy";case"RESTAURANT":return"Restaurant";case"CAFE":return"Cafe";case"BAKERY":return"Bakery";case"ELECTRONICS":return"Electronics";case"CLOTHING":return"Clothing";case"HARDWARE":return"Hardware";case"GENERAL":return"General";default:return e||"General"}}getBusinessTypeClass(e){switch(e?.toUpperCase()){case"GROCERY":case"SUPERMARKET":return"business-type-grocery";case"PHARMACY":return"business-type-pharmacy";case"RESTAURANT":case"CAFE":case"BAKERY":return"business-type-restaurant";default:return"business-type-general"}}getShopPhotos(){return this.shop&&this.shop.images&&0!==this.shop.images.length?this.shop.images.filter(n=>"GALLERY"===n.imageType).map(n=>{const o=n.imageUrl;return o.startsWith("http://")||o.startsWith("https://")?o:`http://localhost:8082${o}`}):[]}getShopBanner(){if(!this.shop||!this.shop.images||0===this.shop.images.length)return null;const e=this.shop.images.find(n=>"BANNER"===n.imageType);if(e){const n=e.imageUrl;return n.startsWith("http://")||n.startsWith("https://")?n:`http://localhost:8082${n}`}return null}viewShopPhoto(e){window.open(e,"_blank")}viewAllPhotos(){this.getShopPhotos().forEach((n,o)=>{setTimeout(()=>{window.open(n,"_blank")},100*o)})}getProductUnit(e){if(e.masterProduct?.baseUnit)return`${e.masterProduct.baseWeight||1} ${e.masterProduct.baseUnit}`;if("GROCERY"===this.shop?.businessType){if(e.displayName?.toLowerCase().includes("rice")||e.displayName?.toLowerCase().includes("flour")||e.displayName?.toLowerCase().includes("sugar"))return"1 kg";if(e.displayName?.toLowerCase().includes("oil")||e.displayName?.toLowerCase().includes("milk"))return"1 liter"}if("PHARMACY"===this.shop?.businessType){if(e.displayName?.toLowerCase().includes("tablet")||e.displayName?.toLowerCase().includes("capsule"))return"10 tablets";if(e.displayName?.toLowerCase().includes("syrup"))return"100 ml"}return"1 piece"}getUnitPriceDisplay(e){const n=this.getProductUnit(e);if(n.includes("kg")){const o=parseFloat(n)||1;return`\u20b9${(e.price/o).toFixed(0)}/kg`}if(n.includes("gram")||n.includes("gm")){const o=parseFloat(n)||1;return`\u20b9${(e.price/o*1e3).toFixed(0)}/kg`}if(n.includes("liter")||n.includes("litre")){const o=parseFloat(n)||1;return`\u20b9${(e.price/o).toFixed(0)}/liter`}if(n.includes("ml")){const o=parseFloat(n)||1;return`\u20b9${(e.price/o*1e3).toFixed(0)}/liter`}if(n.includes("tablet")||n.includes("capsule")){const o=parseFloat(n)||1;return`\u20b9${(e.price/o).toFixed(1)}/tablet`}return""}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(gt.Z),t.rXU(ut.s),t.rXU(Tt.u),t.rXU(b.nX),t.rXU(b.Ix))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-shop-product-list"]],decls:35,vars:14,consts:[[1,"list-container"],[1,"back-section"],["mat-stroked-button","",1,"back-button",3,"click"],[1,"shop-header"],[1,"shop-info-section"],["class","shop-avatar",4,"ngIf"],[1,"shop-details"],[1,"shop-name"],["class","shop-subtitle",4,"ngIf"],["class","shop-meta",4,"ngIf"],["class","shop-photos-section",4,"ngIf"],["class","shop-stats",4,"ngIf"],["class","address-section",4,"ngIf"],[1,"create-product-section"],[1,"create-product-card"],[1,"create-product-content"],[1,"create-product-info"],[1,"create-product-actions"],["mat-raised-button","","color","primary",1,"create-single-btn",3,"routerLink"],["mat-stroked-button","","class","bulk-assign-btn",3,"routerLink",4,"ngIf"],["mat-stroked-button","","class","select-products-btn",3,"routerLink",4,"ngIf"],["class","products-card",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"shop-avatar"],["class","shop-logo",3,"src","alt",4,"ngIf"],["class","shop-logo-placeholder",4,"ngIf"],[1,"shop-logo",3,"src","alt"],[1,"shop-logo-placeholder"],[1,"shop-subtitle"],[1,"shop-meta"],[1,"shop-business"],[1,"shop-photos-section"],[1,"photos-title"],[1,"photos-icon"],[1,"photos-grid"],["class","gallery-photo",3,"src","alt","click",4,"ngFor","ngForOf"],["class","more-photos",3,"click",4,"ngIf"],[1,"gallery-photo",3,"src","alt","click"],[1,"more-photos",3,"click"],[1,"shop-stats"],[1,"stat-card"],[1,"stat-number"],[1,"stat-label"],[1,"address-section"],[1,"address-card"],[1,"address-header"],[1,"address-icon"],[1,"address-details"],[1,"address-line"],[1,"address-city"],["class","contact-info",4,"ngIf"],[1,"contact-info"],["class","contact-item",4,"ngIf"],[1,"contact-item"],["mat-stroked-button","",1,"bulk-assign-btn",3,"routerLink"],["mat-stroked-button","",1,"select-products-btn",3,"routerLink"],[1,"products-card"],["class","empty-state",4,"ngIf"],["class","products-section",4,"ngIf"],[1,"empty-state"],[1,"empty-illustration"],[1,"empty-icon"],[1,"empty-decoration"],[1,"empty-content"],[1,"empty-description"],[1,"empty-features"],[1,"feature-item"],[1,"empty-actions"],["mat-raised-button","","color","primary","class","primary-action",3,"routerLink",4,"ngIf"],["mat-raised-button","","color","accent","class","secondary-action",3,"routerLink",4,"ngIf"],["mat-stroked-button","",1,"tertiary-action",3,"routerLink"],["mat-raised-button","","color","primary",1,"primary-action",3,"routerLink"],["mat-raised-button","","color","accent",1,"secondary-action",3,"routerLink"],[1,"products-section"],[1,"products-header"],[1,"products-title"],[1,"header-actions"],["mat-stroked-button","",1,"refresh-button",3,"disabled","click"],["mat-raised-button","","color","primary",1,"add-product-btn",3,"routerLink"],[1,"products-table-container"],[1,"products-table"],[1,"product-col"],[1,"price-col"],[1,"stock-col"],[1,"status-col"],[1,"actions-col"],["class","product-row",4,"ngFor","ngForOf"],[1,"product-row"],[1,"product-info"],[1,"product-display"],[1,"product-icon"],[1,"product-image",3,"src","alt","error"],[1,"product-details"],[1,"product-name"],[1,"product-sku"],["class","product-unit",4,"ngIf"],[1,"price-info"],[1,"price-display"],[1,"price"],["class","unit-price",4,"ngIf"],[1,"stock-info"],[1,"stock-quantity",3,"ngClass"],[1,"status-info"],[1,"status-badge",3,"ngClass"],[1,"actions-info"],[1,"action-buttons"],["mat-icon-button","","matTooltip","Edit Product",1,"edit-btn",3,"routerLink"],["mat-icon-button","","matTooltip","Delete Product",1,"delete-btn",3,"click"],[1,"product-unit"],[1,"unit-price"],[1,"loading-container"],["diameter","50"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"button",2),t.bIt("click",function(){return o.goBack()}),t.j41(3,"mat-icon"),t.EFF(4,"arrow_back"),t.k0s(),t.EFF(5," Back to All Shops "),t.k0s()(),t.j41(6,"div",3)(7,"div",4),t.DNE(8,bo,3,2,"div",5),t.j41(9,"div",6)(10,"h1",7),t.EFF(11),t.k0s(),t.DNE(12,Po,2,1,"div",8),t.DNE(13,vo,3,1,"div",9),t.k0s()(),t.DNE(14,Mo,8,2,"div",10),t.DNE(15,yo,22,9,"div",11),t.k0s(),t.DNE(16,So,14,5,"div",12),t.j41(17,"div",13)(18,"mat-card",14)(19,"mat-card-content")(20,"div",15)(21,"div",16)(22,"h3"),t.EFF(23,"Add Products to Your Shop"),t.k0s(),t.j41(24,"p"),t.EFF(25,"Start building your product catalog by adding items to your shop"),t.k0s()(),t.j41(26,"div",17)(27,"button",18)(28,"mat-icon"),t.EFF(29,"add"),t.k0s(),t.EFF(30," Create New Product "),t.k0s(),t.DNE(31,wo,4,3,"button",19),t.DNE(32,jo,4,2,"button",20),t.k0s()()()()(),t.DNE(33,Lo,4,2,"mat-card",21),t.DNE(34,Uo,4,0,"div",22),t.k0s()),2&n&&(t.R7$(8),t.Y8G("ngIf",o.shop),t.R7$(3),t.JRh((null==o.shop?null:o.shop.name)||"Shop Products"),t.R7$(1),t.Y8G("ngIf",o.shop),t.R7$(1),t.Y8G("ngIf",o.shop),t.R7$(1),t.Y8G("ngIf",o.getShopPhotos().length>0),t.R7$(1),t.Y8G("ngIf",!o.loading),t.R7$(1),t.Y8G("ngIf",o.shop),t.R7$(11),t.Y8G("routerLink",t.eq3(12,Nt,o.shopId)),t.R7$(4),t.Y8G("ngIf",o.canBulkAssign()),t.R7$(1),t.Y8G("ngIf",o.canSelectProducts()),t.R7$(1),t.Y8G("ngIf",!o.loading),t.R7$(1),t.Y8G("ngIf",o.loading))},dependencies:[f.YU,f.Sq,f.bT,b.Wk,F.$z,F.iY,M.An,m.RN,m.m2,E.LG,B.oV,f.oe],styles:[".list-container[_ngcontent-%COMP%]{padding:16px;margin:0 auto;min-height:calc(100vh - 100px)}.shop-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:16px;padding:32px;margin-bottom:16px;color:#fff;box-shadow:0 8px 32px #667eea4d}.shop-info-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:16px}.shop-avatar[_ngcontent-%COMP%]{flex-shrink:0}.shop-logo[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:16px;object-fit:cover;border:3px solid rgba(255,255,255,.2)}.shop-logo-placeholder[_ngcontent-%COMP%]{width:80px;height:80px;background:rgba(255,255,255,.1);border-radius:16px;display:flex;align-items:center;justify-content:center;border:3px solid rgba(255,255,255,.2)}.shop-logo-placeholder[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;color:#fffc}.shop-details[_ngcontent-%COMP%]{flex:1}.shop-name[_ngcontent-%COMP%]{margin:0 0 4px;font-size:28px;font-weight:700;color:#fff;line-height:1.2}.shop-subtitle[_ngcontent-%COMP%]{font-size:18px;color:#fffffff2;font-weight:500;margin-bottom:8px;text-transform:capitalize}.shop-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.shop-business[_ngcontent-%COMP%]{font-size:14px;color:#fffc;font-weight:400}.shop-location[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:14px;color:#fffc}.shop-location[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.shop-type[_ngcontent-%COMP%]{margin-top:4px}.shop-stats[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px;justify-content:center}.stat-card[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:12px;padding:16px 20px;text-align:center;min-width:100px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.stat-number[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#fff;line-height:1;margin-bottom:4px}.stat-label[_ngcontent-%COMP%]{font-size:12px;color:#fffc;text-transform:uppercase;letter-spacing:.5px}.business-type-grocery[_ngcontent-%COMP%]{background-color:#10b98133!important;color:#10b981!important;border:1px solid rgba(16,185,129,.3)!important}.business-type-pharmacy[_ngcontent-%COMP%]{background-color:#3b82f633!important;color:#3b82f6!important;border:1px solid rgba(59,130,246,.3)!important}.business-type-restaurant[_ngcontent-%COMP%]{background-color:#a855f733!important;color:#a855f7!important;border:1px solid rgba(168,85,247,.3)!important}.business-type-general[_ngcontent-%COMP%]{background-color:#9ca3af33!important;color:#6b7280!important;border:1px solid rgba(156,163,175,.3)!important}.address-section[_ngcontent-%COMP%]{margin-bottom:12px}.address-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 8px #0000001a}.address-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.address-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:18px;font-weight:600}.address-icon[_ngcontent-%COMP%]{color:#667eea}.address-details[_ngcontent-%COMP%]{color:#4b5563}.address-line[_ngcontent-%COMP%]{margin:0 0 8px;font-size:16px;font-weight:500}.address-city[_ngcontent-%COMP%]{margin:0 0 16px;font-size:14px}.contact-info[_ngcontent-%COMP%]{display:flex;gap:24px;flex-wrap:wrap}.contact-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#6b7280}.contact-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;color:#667eea}.create-product-section[_ngcontent-%COMP%]{margin-bottom:16px}.create-product-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 8px #0000001a;border:2px dashed #e5e7eb;background:#f9fafb}.create-product-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:20px}.create-product-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#1f2937;font-size:18px;font-weight:600}.create-product-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#6b7280;font-size:14px}.create-product-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}.create-single-btn[_ngcontent-%COMP%]{background:#667eea!important;color:#fff!important;font-weight:600!important;padding:12px 24px!important}.bulk-assign-btn[_ngcontent-%COMP%], .select-products-btn[_ngcontent-%COMP%]{border-color:#667eea!important;color:#667eea!important;font-weight:500!important;padding:12px 20px!important}.bulk-assign-btn[_ngcontent-%COMP%]:hover, .select-products-btn[_ngcontent-%COMP%]:hover{background:rgba(102,126,234,.1)!important}.shop-photos-section[_ngcontent-%COMP%]{margin-bottom:16px}.photos-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:0 0 16px;font-size:16px;font-weight:600;color:#ffffffe6}.photos-icon[_ngcontent-%COMP%]{color:#fffc}.photos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;max-width:600px}.gallery-photo[_ngcontent-%COMP%]{width:100%;height:90px;border-radius:12px;object-fit:cover;border:2px solid rgba(255,255,255,.2);cursor:pointer;transition:all .3s ease}.gallery-photo[_ngcontent-%COMP%]:hover{border-color:#fffc;transform:scale(1.05);box-shadow:0 4px 20px #0000004d}.more-photos[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:90px;border:2px dashed rgba(255,255,255,.4);border-radius:12px;cursor:pointer;transition:all .3s ease;background:rgba(255,255,255,.1);color:#fffc;font-size:12px;font-weight:500}.more-photos[_ngcontent-%COMP%]:hover{border-color:#fffc;background:rgba(255,255,255,.2);color:#fff}.more-photos[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-bottom:4px;font-size:20px;width:20px;height:20px}.header-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:flex-end}.nav-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}.products-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 12px #0000001a}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:60px;color:#666}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 40px;color:#666;max-width:600px;margin:0 auto}.empty-illustration[_ngcontent-%COMP%]{position:relative;margin-bottom:32px}.empty-icon[_ngcontent-%COMP%]{font-size:120px;width:120px;height:120px;color:#e2e8f0;margin-bottom:16px}.empty-decoration[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;margin-top:-20px}.empty-decoration[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px;color:#cbd5e0;opacity:.6}.empty-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:24px;font-weight:600;color:#2d3748}.empty-description[_ngcontent-%COMP%]{margin-bottom:32px;font-size:16px;line-height:1.6;color:#718096}.empty-features[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:24px;margin-bottom:40px;flex-wrap:wrap}.feature-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#4a5568}.feature-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#667eea}.empty-actions[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:center;flex-wrap:wrap}.primary-action[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)!important;color:#fff!important;border:none!important;padding:12px 24px!important;font-weight:600!important;box-shadow:0 4px 16px #667eea4d!important}.secondary-action[_ngcontent-%COMP%]{padding:12px 24px!important;font-weight:600!important}.tertiary-action[_ngcontent-%COMP%]{padding:12px 24px!important;color:#667eea!important;border-color:#667eea!important}.products-section[_ngcontent-%COMP%]{background:white;border-radius:12px;overflow:hidden;box-shadow:0 1px 3px #0000001a}.products-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e5e7eb;background:#f9fafb}.products-title[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#1f2937}.add-product-btn[_ngcontent-%COMP%]{background:#3b82f6!important;color:#fff!important;font-weight:500!important;box-shadow:0 2px 8px #3b82f64d!important}.products-table-container[_ngcontent-%COMP%]{overflow-x:auto}.products-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}.products-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f8fafc}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px 20px;text-align:left;font-weight:600;color:#374151;font-size:13px;text-transform:uppercase;letter-spacing:.5px;border-bottom:1px solid #e5e7eb}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 20px;border-bottom:1px solid #f3f4f6;vertical-align:middle}.product-row[_ngcontent-%COMP%]{transition:background-color .2s ease}.product-row[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.product-row[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.product-col[_ngcontent-%COMP%]{width:40%}.price-col[_ngcontent-%COMP%], .stock-col[_ngcontent-%COMP%], .status-col[_ngcontent-%COMP%], .actions-col[_ngcontent-%COMP%]{width:15%}.product-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.product-icon[_ngcontent-%COMP%]{flex-shrink:0;width:40px;height:40px;border-radius:8px;overflow:hidden;background:#f3f4f6;display:flex;align-items:center;justify-content:center}.product-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-details[_ngcontent-%COMP%]{flex:1}.product-name[_ngcontent-%COMP%]{font-weight:600;color:#1f2937;margin-bottom:2px;line-height:1.3}.product-sku[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;font-family:Courier New,monospace}.product-unit[_ngcontent-%COMP%]{font-size:11px;color:#9ca3af;margin-top:2px;font-weight:500}.price-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.unit-price[_ngcontent-%COMP%]{font-size:11px;color:#6b7280;font-weight:400}.price[_ngcontent-%COMP%]{font-weight:700;color:#059669;font-size:16px}.stock-quantity[_ngcontent-%COMP%]{font-size:13px;color:#6b7280}.stock-quantity.low-stock[_ngcontent-%COMP%], .stock-quantity.out-of-stock[_ngcontent-%COMP%]{color:#dc2626;font-weight:600}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:16px;font-size:12px;font-weight:500;text-align:center}.status-badge.status-active[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534}.status-badge.status-inactive[_ngcontent-%COMP%]{background-color:#fee2e2;color:#dc2626}.status-badge.status-out-of-stock[_ngcontent-%COMP%]{background-color:#fef3c7;color:#d97706}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px}.edit-btn[_ngcontent-%COMP%]{color:#3b82f6!important}.delete-btn[_ngcontent-%COMP%]{color:#dc2626!important}.edit-btn[_ngcontent-%COMP%]:hover{background-color:#3b82f61a!important}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#dc26261a!important}@media (max-width: 768px){.list-container[_ngcontent-%COMP%]{padding:16px}.list-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:16px;padding:20px}.header-actions[_ngcontent-%COMP%]{justify-content:center}.header-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.nav-buttons[_ngcontent-%COMP%], .action-buttons[_ngcontent-%COMP%]{justify-content:center}.products-table-container[_ngcontent-%COMP%]{overflow-x:auto}.products-table[_ngcontent-%COMP%]{min-width:600px}.products-header[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:stretch}.add-product-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.product-display[_ngcontent-%COMP%]{gap:8px}.product-icon[_ngcontent-%COMP%]{width:32px;height:32px}.product-name[_ngcontent-%COMP%]{font-size:13px}.product-sku[_ngcontent-%COMP%]{font-size:11px}.price[_ngcontent-%COMP%]{font-size:14px}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px}.create-product-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:16px}.create-product-actions[_ngcontent-%COMP%]{justify-content:center;width:100%}.photos-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:8px}.gallery-photo[_ngcontent-%COMP%]{height:70px}.back-button[_ngcontent-%COMP%]{justify-content:center;width:100%}.contact-info[_ngcontent-%COMP%]{justify-content:center}}"]})}}return i})();function zo(i,r){if(1&i&&(t.j41(0,"div",11)(1,"h3",12)(2,"mat-icon",13),t.EFF(3,"store"),t.k0s(),t.EFF(4," Shop Information "),t.k0s(),t.j41(5,"div",49)(6,"mat-chip-set")(7,"mat-chip",50),t.EFF(8),t.k0s(),t.j41(9,"mat-chip",51),t.EFF(10),t.k0s()()()()),2&i){const e=t.XpG();t.R7$(8),t.JRh(e.shop.name),t.R7$(2),t.JRh(e.shop.businessType)}}function Yo(i,r){if(1&i){const e=t.RV6();t.j41(0,"img",60),t.bIt("error",function(o){t.eBV(e);const s=t.XpG(2);return t.Njj(s.onImageError(o))}),t.k0s()}if(2&i){const e=t.XpG(2);t.Y8G("src",e.getImageUrl(e.selectedMasterProduct.primaryImageUrl),t.B4B)("alt",e.selectedMasterProduct.name)}}function Vo(i,r){1&i&&(t.j41(0,"mat-icon"),t.EFF(1,"inventory"),t.k0s())}function Xo(i,r){if(1&i&&(t.j41(0,"div",57)(1,"span",58),t.EFF(2,"Description:"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(4),t.JRh(e.selectedMasterProduct.description)}}function Ko(i,r){if(1&i&&(t.j41(0,"div",11)(1,"h3",12)(2,"mat-icon",13),t.EFF(3,"inventory"),t.k0s(),t.EFF(4," Master Product Information "),t.k0s(),t.j41(5,"div",52)(6,"mat-card",53)(7,"mat-card-header")(8,"div",54),t.DNE(9,Yo,1,2,"img",55),t.DNE(10,Vo,2,0,"mat-icon",19),t.k0s(),t.j41(11,"mat-card-title"),t.EFF(12),t.k0s(),t.j41(13,"mat-card-subtitle"),t.EFF(14),t.k0s()(),t.j41(15,"mat-card-content")(16,"div",56)(17,"div",57)(18,"span",58),t.EFF(19,"Category:"),t.k0s(),t.j41(20,"span"),t.EFF(21),t.k0s()(),t.j41(22,"div",57)(23,"span",58),t.EFF(24,"Base Unit:"),t.k0s(),t.j41(25,"span"),t.EFF(26),t.k0s()(),t.DNE(27,Xo,5,1,"div",59),t.k0s()()()()()),2&i){const e=t.XpG();t.R7$(9),t.Y8G("ngIf",e.selectedMasterProduct.primaryImageUrl),t.R7$(1),t.Y8G("ngIf",!e.selectedMasterProduct.primaryImageUrl),t.R7$(2),t.JRh(e.selectedMasterProduct.name),t.R7$(2),t.Lme("",e.selectedMasterProduct.brand||"No brand"," \u2022 SKU: ",e.selectedMasterProduct.sku,""),t.R7$(7),t.JRh((null==e.selectedMasterProduct.category?null:e.selectedMasterProduct.category.name)||"No category"),t.R7$(5),t.Lme("",e.selectedMasterProduct.baseWeight||1," ",e.selectedMasterProduct.baseUnit||"piece",""),t.R7$(1),t.Y8G("ngIf",e.selectedMasterProduct.description)}}function Wo(i,r){1&i&&(t.j41(0,"mat-error"),t.EFF(1," Product name is required "),t.k0s())}function Ho(i,r){1&i&&(t.j41(0,"mat-error"),t.EFF(1," SKU is required "),t.k0s())}function Jo(i,r){if(1&i&&(t.j41(0,"mat-option",68),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(1),t.SpI(" ",e.name," ")}}function Qo(i,r){1&i&&(t.j41(0,"mat-error"),t.EFF(1," Category is required "),t.k0s())}function Zo(i,r){if(1&i&&(t.j41(0,"div",11)(1,"h3",12)(2,"mat-icon",13),t.EFF(3,"inventory"),t.k0s(),t.EFF(4," Product Information "),t.k0s(),t.j41(5,"div",14)(6,"mat-form-field",15)(7,"mat-label"),t.EFF(8,"Product Name *"),t.k0s(),t.nrm(9,"input",61),t.j41(10,"mat-icon",18),t.EFF(11,"title"),t.k0s(),t.DNE(12,Wo,2,0,"mat-error",19),t.k0s(),t.j41(13,"mat-form-field",15)(14,"mat-label"),t.EFF(15,"SKU *"),t.k0s(),t.nrm(16,"input",62),t.j41(17,"mat-icon",18),t.EFF(18,"qr_code"),t.k0s(),t.DNE(19,Ho,2,0,"mat-error",19),t.k0s(),t.j41(20,"mat-form-field",15)(21,"mat-label"),t.EFF(22,"Brand"),t.k0s(),t.nrm(23,"input",63),t.j41(24,"mat-icon",18),t.EFF(25,"business"),t.k0s()(),t.j41(26,"mat-form-field",15)(27,"mat-label"),t.EFF(28,"Category *"),t.k0s(),t.j41(29,"mat-select",64)(30,"mat-option",65),t.EFF(31,"Select category..."),t.k0s(),t.DNE(32,Jo,2,2,"mat-option",66),t.k0s(),t.j41(33,"mat-icon",18),t.EFF(34,"category"),t.k0s(),t.DNE(35,Qo,2,0,"mat-error",19),t.k0s()(),t.j41(36,"mat-form-field",40)(37,"mat-label"),t.EFF(38,"Product Description"),t.k0s(),t.nrm(39,"textarea",67),t.j41(40,"mat-icon",18),t.EFF(41,"description"),t.k0s()()()),2&i){const e=t.XpG();let n,o,s;t.R7$(12),t.Y8G("ngIf",null==(n=e.shopProductForm.get("productName"))?null:n.hasError("required")),t.R7$(7),t.Y8G("ngIf",null==(o=e.shopProductForm.get("sku"))?null:o.hasError("required")),t.R7$(13),t.Y8G("ngForOf",e.categories),t.R7$(3),t.Y8G("ngIf",null==(s=e.shopProductForm.get("categoryId"))?null:s.hasError("required"))}}function qo(i,r){1&i&&(t.j41(0,"div",11)(1,"h3",12)(2,"mat-icon",13),t.EFF(3,"straighten"),t.k0s(),t.EFF(4," Unit & Measurement "),t.k0s(),t.j41(5,"div",14)(6,"mat-form-field",15)(7,"mat-label"),t.EFF(8,"Unit Type"),t.k0s(),t.j41(9,"mat-select",69)(10,"mat-option",70),t.EFF(11,"Piece/Item"),t.k0s(),t.j41(12,"mat-option",71),t.EFF(13,"Kilogram (kg)"),t.k0s(),t.j41(14,"mat-option",72),t.EFF(15,"Gram (g)"),t.k0s(),t.j41(16,"mat-option",73),t.EFF(17,"Liter (L)"),t.k0s(),t.j41(18,"mat-option",74),t.EFF(19,"Milliliter (ml)"),t.k0s(),t.j41(20,"mat-option",75),t.EFF(21,"Meter (m)"),t.k0s(),t.j41(22,"mat-option",76),t.EFF(23,"Box/Pack"),t.k0s(),t.j41(24,"mat-option",77),t.EFF(25,"Dozen"),t.k0s()(),t.j41(26,"mat-icon",18),t.EFF(27,"straighten"),t.k0s()(),t.j41(28,"mat-form-field",15)(29,"mat-label"),t.EFF(30,"Unit Size/Weight"),t.k0s(),t.nrm(31,"input",78),t.j41(32,"mat-icon",18),t.EFF(33,"fitness_center"),t.k0s(),t.j41(34,"mat-hint"),t.EFF(35,"Enter the quantity per unit"),t.k0s()()()())}function ti(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",82)(1,"mat-icon",83),t.EFF(2,"cloud_upload"),t.k0s(),t.j41(3,"p"),t.EFF(4,"Click to upload product images"),t.k0s(),t.j41(5,"span",84),t.EFF(6,"Supports: JPG, PNG (Max 5MB)"),t.k0s(),t.j41(7,"input",85,86),t.bIt("change",function(o){t.eBV(e);const s=t.XpG(2);return t.Njj(s.onFileSelected(o))}),t.k0s(),t.j41(9,"button",87),t.bIt("click",function(){t.eBV(e);const o=t.sdS(8);return t.Njj(o.click())}),t.j41(10,"mat-icon"),t.EFF(11,"add_photo_alternate"),t.k0s(),t.EFF(12," Choose Images "),t.k0s()()}}function ei(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",91),t.nrm(1,"img",92),t.j41(2,"button",93),t.bIt("click",function(){const s=t.eBV(e).index,a=t.XpG(3);return t.Njj(a.removeFile(s))}),t.j41(3,"mat-icon"),t.EFF(4,"close"),t.k0s()(),t.j41(5,"span",94),t.EFF(6),t.k0s()()}if(2&i){const e=r.$implicit;t.R7$(1),t.Y8G("src",e.preview,t.B4B)("alt",e.name),t.R7$(5),t.JRh(e.name)}}function ni(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",88),t.DNE(1,ei,7,3,"div",89),t.j41(2,"button",90),t.bIt("click",function(){t.eBV(e);const o=t.sdS(7);return t.Njj(o.click())}),t.j41(3,"mat-icon"),t.EFF(4,"add"),t.k0s(),t.EFF(5," Add More "),t.k0s(),t.j41(6,"input",85,86),t.bIt("change",function(o){t.eBV(e);const s=t.XpG(2);return t.Njj(s.onFileSelected(o))}),t.k0s()()}if(2&i){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.selectedFiles)}}function oi(i,r){if(1&i&&(t.j41(0,"div",11)(1,"h3",12)(2,"mat-icon",13),t.EFF(3,"photo_camera"),t.k0s(),t.EFF(4," Product Images "),t.k0s(),t.j41(5,"div",79),t.DNE(6,ti,13,0,"div",80),t.DNE(7,ni,8,1,"div",81),t.k0s()()),2&i){const e=t.XpG();t.R7$(6),t.Y8G("ngIf",0===e.selectedFiles.length),t.R7$(1),t.Y8G("ngIf",e.selectedFiles.length>0)}}function ii(i,r){1&i&&(t.j41(0,"mat-error"),t.EFF(1," Price is required "),t.k0s())}function ri(i,r){1&i&&(t.j41(0,"mat-error"),t.EFF(1," Price must be positive "),t.k0s())}function si(i,r){if(1&i&&(t.j41(0,"div",95)(1,"mat-card",96)(2,"mat-card-content")(3,"div",97)(4,"span",98),t.EFF(5,"Profit Margin:"),t.k0s(),t.j41(6,"span",99),t.EFF(7),t.nI1(8,"number"),t.k0s()()()()()),2&i){const e=t.XpG();let n;t.R7$(6),t.AVh("positive",e.getProfit()>0)("negative",e.getProfit()<0),t.R7$(1),t.Lme(" \u20b9",t.i5U(8,6,e.getProfit(),"1.2-2")," (",null==(n=e.getProfitPercentage())?null:n.toFixed(1),"%) ")}}function ai(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",11)(1,"h3",12)(2,"mat-icon",13),t.EFF(3,"photo_camera"),t.k0s(),t.EFF(4," Shop Product Images "),t.k0s(),t.j41(5,"div",100)(6,"mat-chip-set")(7,"mat-chip",101),t.EFF(8,"Shop-specific images"),t.k0s(),t.j41(9,"mat-chip",102),t.EFF(10,"Override master product images"),t.k0s()()(),t.j41(11,"app-product-image-upload",103),t.bIt("imagesChange",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onImagesChange(o))})("imagesUploaded",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onImagesUploaded(o))}),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(11),t.Y8G("productId",e.productId)("shopId",e.shopId)("images",e.productImages)}}function ci(i,r){1&i&&t.nrm(0,"mat-spinner",104)}function di(i,r){if(1&i&&(t.j41(0,"mat-icon"),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.isEditMode?"update":"add_circle")}}function li(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(1),t.SpI(" - Missing: ",e.getInvalidFields(),"")}}function pi(i,r){if(1&i&&(t.j41(0,"div",105),t.EFF(1),t.DNE(2,li,2,1,"span",19),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.SpI(" Form Status: ",e.shopProductForm.valid?"Valid":"Invalid"," "),t.R7$(1),t.Y8G("ngIf",!e.shopProductForm.valid)}}let be=(()=>{class i{constructor(e,n,o,s,a,c,d){this.fb=e,this.productService=n,this.shopProductService=o,this.shopService=s,this.categoryService=a,this.route=c,this.router=d,this.masterProducts=[],this.categories=[],this.selectedMasterProduct=null,this.shop=null,this.productImages=[],this.selectedFiles=[],this.isLoading=!1,this.isEditMode=!1,this.shopProductForm=this.createForm()}ngOnInit(){this.shopId=+this.route.snapshot.params.shopId;const e=this.route.snapshot.params.productId;e&&(this.productId=+e,this.isEditMode=!0),this.loadShop(),this.loadCategories(),this.isEditMode&&this.productId&&(this.loadMasterProducts(),this.loadShopProduct())}createForm(){const e={price:["",[g.k0.required,g.k0.min(.01)]],originalPrice:["",[g.k0.min(0)]],costPrice:["",[g.k0.min(0)]],stockQuantity:[0,[g.k0.min(0)]],minStockLevel:["",[g.k0.min(0)]],maxStockLevel:["",[g.k0.min(0)]],trackInventory:[!0],status:[R.Q.ACTIVE],isAvailable:[!0],isFeatured:[!1],customName:[""],customDescription:[""],tags:[""],displayOrder:[0,[g.k0.min(0)]]};return this.fb.group(this.isEditMode?{...e,masterProductId:[null]}:{...e,productName:["",g.k0.required],sku:["",g.k0.required],brand:[""],categoryId:[null,g.k0.required],productDescription:[""],unitType:["piece"],unitSize:[1,[g.k0.min(.01)]]})}loadShop(){this.shopService.getShop(this.shopId).subscribe({next:e=>{this.shop=e},error:e=>{console.error("Error loading shop:",e),l().fire({title:"Error!",text:"Failed to load shop information",icon:"error",confirmButtonText:"OK"})}})}loadMasterProducts(){this.productService.getMasterProducts().subscribe({next:e=>{this.masterProducts=e.content||[]},error:e=>{console.error("Error loading master products:",e),l().fire({title:"Error!",text:"Failed to load master products",icon:"error",confirmButtonText:"OK"})}})}loadCategories(){this.categoryService.getRootCategories(!0).subscribe({next:e=>{this.categories=e||[]},error:e=>{console.error("Error loading categories:",e),l().fire({title:"Error!",text:"Failed to load categories",icon:"error",confirmButtonText:"OK"})}})}loadShopProduct(){this.productId&&(this.isLoading=!0,this.shopProductService.getShopProduct(this.shopId,this.productId).subscribe({next:e=>{this.selectedMasterProduct=e.masterProduct,this.shopProductForm.patchValue({masterProductId:e.masterProduct?.id,price:e.price,originalPrice:e.originalPrice,costPrice:e.costPrice,stockQuantity:e.stockQuantity,minStockLevel:e.minStockLevel,maxStockLevel:e.maxStockLevel,trackInventory:e.trackInventory,status:e.status,isAvailable:e.isAvailable,isFeatured:e.isFeatured,customName:e.customName,customDescription:e.customDescription,tags:e.tags,displayOrder:e.displayOrder}),this.isLoading=!1},error:e=>{console.error("Error loading shop product:",e),l().fire({title:"Error!",text:"Failed to load shop product",icon:"error",confirmButtonText:"OK"}),this.isLoading=!1}}))}onMasterProductChange(e){this.selectedMasterProduct=this.masterProducts.find(n=>n.id===e)||null}getProfit(){const e=this.shopProductForm.get("price")?.value,n=this.shopProductForm.get("costPrice")?.value;return e&&n?e-n:null}getProfitPercentage(){const e=this.shopProductForm.get("price")?.value,n=this.shopProductForm.get("costPrice")?.value;return e&&n&&n>0?(e-n)/n*100:null}onSubmit(){if(console.log("onSubmit called",{isEditMode:this.isEditMode,formValid:this.shopProductForm.valid,formValue:this.shopProductForm.value,canSubmit:this.canSubmit()}),!this.canSubmit())return void console.log("Cannot submit - canSubmit returned false");this.isLoading=!0;const e=this.shopProductForm.value;this.isEditMode?(console.log("Calling updateShopProduct"),this.updateShopProduct(e)):(console.log("Calling createMasterProductAndAssignToShop"),this.createMasterProductAndAssignToShop(e))}updateShopProduct(e){console.log("updateShopProduct called with:",e),console.log("selectedMasterProduct:",this.selectedMasterProduct),console.log("shopId:",this.shopId,"productId:",this.productId);const n=this.selectedMasterProduct?.id||e.masterProductId;if(console.log("masterProductId resolved to:",n),!n)return console.error("No master product ID found"),l().fire({title:"Error!",text:"Master product information is missing. Please refresh the page and try again.",icon:"error",confirmButtonText:"OK"}),void(this.isLoading=!1);const o={masterProductId:n,price:parseFloat(e.price),originalPrice:e.originalPrice?parseFloat(e.originalPrice):void 0,costPrice:e.costPrice?parseFloat(e.costPrice):void 0,stockQuantity:e.stockQuantity||0,minStockLevel:e.minStockLevel||void 0,maxStockLevel:e.maxStockLevel||void 0,trackInventory:e.trackInventory,status:e.status,isAvailable:e.isAvailable,isFeatured:e.isFeatured,customName:e.customName||void 0,customDescription:e.customDescription||void 0,tags:e.tags||void 0,displayOrder:e.displayOrder||void 0};console.log("Updating shop product with request:",o),console.log("Making API call to updateShopProduct..."),this.shopProductService.updateShopProduct(this.shopId,this.productId,o).subscribe({next:s=>{l().fire({title:"Success!",text:"Product updated successfully!",icon:"success",confirmButtonText:"OK"}).then(()=>{this.router.navigate(["/products/shop",this.shopId])}),this.isLoading=!1},error:s=>{console.error("Error updating shop product:",s);let a="Failed to update product";s.error?.message&&(a=s.error.message),l().fire({title:"Error!",text:a,icon:"error",confirmButtonText:"OK"}),this.isLoading=!1}})}createMasterProductAndAssignToShop(e){this.productService.createMasterProduct({name:e.productName,sku:e.sku,description:e.productDescription||"",brand:e.brand||"",categoryId:e.categoryId,baseUnit:e.unitType||"piece",baseWeight:e.unitSize||1}).subscribe({next:o=>{console.log("Master product created:",o),this.selectedFiles&&this.selectedFiles.length>0?this.uploadProductImages(o.id,()=>{this.assignMasterProductToShop(o.id,e)}):this.assignMasterProductToShop(o.id,e)},error:o=>{console.error("Error creating master product:",o);let s="Failed to create master product";o.error?.message&&(s=o.error.message),l().fire({title:"Error!",text:s,icon:"error",confirmButtonText:"OK"}),this.isLoading=!1}})}assignMasterProductToShop(e,n){const o={masterProductId:e,price:parseFloat(n.price),originalPrice:n.originalPrice?parseFloat(n.originalPrice):void 0,costPrice:n.costPrice?parseFloat(n.costPrice):void 0,stockQuantity:n.stockQuantity||0,minStockLevel:n.minStockLevel||void 0,maxStockLevel:n.maxStockLevel||void 0,trackInventory:n.trackInventory,status:n.status,isAvailable:n.isAvailable,isFeatured:n.isFeatured,customName:n.customName||void 0,customDescription:n.customDescription||void 0,tags:n.tags||void 0,displayOrder:n.displayOrder||void 0};this.shopProductService.addProductToShop(this.shopId,o).subscribe({next:s=>{const a=this.selectedFiles&&this.selectedFiles.length>0;l().fire({title:"Success!",text:a?`Product created with ${this.selectedFiles.length} image(s) and added to your shop successfully!`:"Product created and added to your shop successfully!",icon:"success",confirmButtonText:"OK"}).then(()=>{this.router.navigate(["/products/shop",this.shopId])}),this.isLoading=!1},error:s=>{if(console.error("Error adding product to shop:",s),"9999"===s.error?.statusCode||s.error?.message?.includes("already exists"))l().fire({title:"Product Already Exists",text:"This product is already available in your shop. Would you like to view existing shop products or select a different product?",icon:"warning",showCancelButton:!0,confirmButtonText:"View Shop Products",cancelButtonText:"Select Different Product",confirmButtonColor:"#3085d6",cancelButtonColor:"#6c757d"}).then(a=>{a.isConfirmed?this.router.navigate(["/products/shop",this.shopId]):this.shopProductForm.patchValue({productName:"",sku:"",brand:"",categoryId:null,productDescription:""})});else{let a="Failed to add product to shop";s.error?.message&&(a=s.error.message),l().fire({title:"Error!",text:a,icon:"error",confirmButtonText:"OK"})}this.isLoading=!1}})}onImagesChange(e){this.productImages=e}onImagesUploaded(e){l().fire({title:"Success!",text:`${e.length} shop image${e.length>1?"s":""} uploaded successfully!`,icon:"success",timer:2e3,showConfirmButton:!1})}onCancel(){this.router.navigate(["/products/shop",this.shopId])}onFileSelected(e){const n=e.target.files;if(n&&n.length>0)for(let o=0;o<n.length;o++){const s=n[o];if(s.size>5242880){l().fire({title:"Error!",text:`File ${s.name} is too large. Maximum size is 5MB.`,icon:"error",confirmButtonText:"OK"});continue}if(!s.type.startsWith("image/")){l().fire({title:"Error!",text:`File ${s.name} is not an image.`,icon:"error",confirmButtonText:"OK"});continue}const a=new FileReader;a.onload=c=>{this.selectedFiles.push({file:s,name:s.name,preview:c.target.result})},a.readAsDataURL(s)}}removeFile(e){this.selectedFiles.splice(e,1)}canSubmit(){if(console.log("canSubmit check:",{isEditMode:this.isEditMode,isLoading:this.isLoading,selectedMasterProduct:this.selectedMasterProduct,priceValid:this.shopProductForm.get("price")?.valid,priceValue:this.shopProductForm.get("price")?.value,formValid:this.shopProductForm.valid}),this.isEditMode){const e=this.shopProductForm.get("price"),n=!0===e?.valid,o=e?.value&&parseFloat(e.value)>0;return(n||o)&&!this.isLoading}return this.shopProductForm.valid&&!this.isLoading}getInvalidFields(){const e=[];return Object.keys(this.shopProductForm.controls).forEach(n=>{const o=this.shopProductForm.get(n);o&&o.invalid&&o.errors&&o.errors.required&&e.push(n)}),e.join(", ")}uploadProductImages(e,n){if(!this.selectedFiles||0===this.selectedFiles.length)return void n();console.log(`Uploading ${this.selectedFiles.length} images for master product ${e}`);const o=new FormData;this.selectedFiles.forEach((a,c)=>{o.append("images",a.file),console.log(`Adding image ${c+1}: ${a.file.name} (${a.file.size} bytes, type: ${a.file.type})`)}),this.selectedFiles.map((a,c)=>a.name.replace(/\.[^/.]+$/,"")).forEach(a=>{o.append("altTexts",a)}),console.log("FormData contents:"),o.forEach((a,c)=>{console.log(`${c}:`,a)}),this.productService.uploadMasterProductImages(e,o).subscribe({next:a=>{console.log("Images uploaded successfully:",a),l().fire({title:"Images Uploaded!",text:`${a.length} image(s) uploaded successfully`,icon:"success",timer:2e3,showConfirmButton:!1}),n()},error:a=>{console.error("Error uploading images:",a),console.error("Error details:",a.error);let c="Image upload failed. Product was created successfully.";a.error?.message&&(c=`Image upload failed: ${a.error.message}`),l().fire({title:"Warning!",text:c+" You can add images later by editing the product.",icon:"warning",confirmButtonText:"OK"}),n()}})}getImageUrl(e){return(0,tt.V)(e)}onImageError(e){console.log("Image failed to load, using fallback"),e.target.src="https://images.unsplash.com/photo-1586985289688-ca3cf47d3e6e?w=60&h=60&fit=crop&crop=center"}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(g.ok),t.rXU(Y.b),t.rXU(gt.Z),t.rXU(ut.s),t.rXU(et.F),t.rXU(b.nX),t.rXU(b.Ix))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-shop-product-form"]],decls:187,vars:18,consts:[[1,"form-wrapper"],[1,"form-card"],[1,"form-header"],[1,"header-content"],["mat-icon-button","","type","button",1,"back-button",3,"click"],[1,"header-info"],["mat-card-avatar","",1,"form-avatar"],[1,"header-text"],[1,"form-content"],[1,"product-form",3,"formGroup","ngSubmit"],["class","form-section",4,"ngIf"],[1,"form-section"],[1,"section-title"],[1,"section-icon"],[1,"form-grid"],["appearance","outline",1,"form-field"],["matInput","","formControlName","price","type","number","step","0.01","min","0","placeholder","0.00"],["matTextPrefix",""],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","originalPrice","type","number","step","0.01","min","0","placeholder","0.00"],["matInput","","formControlName","costPrice","type","number","step","0.01","min","0","placeholder","0.00"],["class","profit-display",4,"ngIf"],["matInput","","formControlName","stockQuantity","type","number","min","0","placeholder","0"],["matInput","","formControlName","minStockLevel","type","number","min","0","placeholder","0"],["matInput","","formControlName","maxStockLevel","type","number","min","0","placeholder","0"],[1,"checkbox-group"],["formControlName","trackInventory",1,"feature-checkbox"],[1,"checkbox-content"],[1,"checkbox-icon"],[1,"checkbox-title"],[1,"checkbox-subtitle"],["formControlName","status"],["value","ACTIVE"],["value","INACTIVE"],["value","OUT_OF_STOCK"],["value","DISCONTINUED"],["matInput","","formControlName","displayOrder","type","number","min","0","placeholder","0"],["formControlName","isAvailable",1,"feature-checkbox"],["formControlName","isFeatured",1,"feature-checkbox"],["appearance","outline",1,"form-field","full-width"],["matInput","","formControlName","customName","placeholder","Override product name for your shop"],["matInput","","formControlName","customDescription","rows","3","placeholder","Add shop-specific description..."],["matInput","","formControlName","tags","placeholder","tag1, tag2, tag3"],[1,"form-actions"],["mat-button","","type","button",1,"cancel-btn",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"submit-btn",3,"disabled","click"],["diameter","20","class","loading-spinner",4,"ngIf"],["class","debug-info","style","margin-top: 8px; font-size: 12px; color: #dc3545;",4,"ngIf"],[1,"shop-info"],["color","primary","selected",""],["color","accent","selected",""],[1,"master-product-info"],[1,"product-preview-card"],["mat-card-avatar","",1,"product-avatar"],[3,"src","alt","error",4,"ngIf"],[1,"product-details"],[1,"detail-item"],[1,"detail-label"],["class","detail-item",4,"ngIf"],[3,"src","alt","error"],["matInput","","formControlName","productName","placeholder","Enter product name"],["matInput","","formControlName","sku","placeholder","Enter SKU"],["matInput","","formControlName","brand","placeholder","Enter brand name"],["formControlName","categoryId"],["value",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","productDescription","rows","3","placeholder","Describe the product..."],[3,"value"],["formControlName","unitType"],["value","piece"],["value","kg"],["value","gram"],["value","liter"],["value","ml"],["value","meter"],["value","box"],["value","dozen"],["matInput","","formControlName","unitSize","type","number","placeholder","e.g., 1, 500, 250"],[1,"image-upload-area"],["class","upload-placeholder",4,"ngIf"],["class","selected-images",4,"ngIf"],[1,"upload-placeholder"],[1,"upload-icon"],[1,"upload-hint"],["type","file","accept","image/*","multiple","","hidden","",3,"change"],["fileInput",""],["mat-stroked-button","","color","primary","type","button",3,"click"],[1,"selected-images"],["class","image-preview",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary","type","button",1,"add-more-btn",3,"click"],[1,"image-preview"],[3,"src","alt"],["mat-icon-button","","color","warn","type","button",1,"remove-btn",3,"click"],[1,"file-name"],[1,"profit-display"],[1,"profit-card"],[1,"profit-info"],[1,"profit-label"],[1,"profit-value"],[1,"image-section-info"],["color","primary"],["color","accent"],["title","Shop Product Images","productType","shop",3,"productId","shopId","images","imagesChange","imagesUploaded"],["diameter","20",1,"loading-spinner"],[1,"debug-info",2,"margin-top","8px","font-size","12px","color","#dc3545"]],template:function(n,o){if(1&n&&(t.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"div",3)(4,"button",4),t.bIt("click",function(){return o.onCancel()}),t.j41(5,"mat-icon"),t.EFF(6,"arrow_back"),t.k0s()(),t.j41(7,"div",5)(8,"div",6)(9,"mat-icon"),t.EFF(10),t.k0s()(),t.j41(11,"div",7)(12,"mat-card-title"),t.EFF(13),t.k0s(),t.j41(14,"mat-card-subtitle"),t.EFF(15),t.k0s()()()()(),t.j41(16,"mat-card-content",8)(17,"form",9),t.bIt("ngSubmit",function(){return o.onSubmit()}),t.DNE(18,zo,11,2,"div",10),t.DNE(19,Ko,28,9,"div",10),t.DNE(20,Zo,42,4,"div",10),t.DNE(21,qo,36,0,"div",10),t.DNE(22,oi,8,2,"div",10),t.j41(23,"div",11)(24,"h3",12)(25,"mat-icon",13),t.EFF(26,"attach_money"),t.k0s(),t.EFF(27," Pricing Information "),t.k0s(),t.j41(28,"div",14)(29,"mat-form-field",15)(30,"mat-label"),t.EFF(31,"Selling Price *"),t.k0s(),t.nrm(32,"input",16),t.j41(33,"span",17),t.EFF(34,"\u20b9"),t.k0s(),t.j41(35,"mat-icon",18),t.EFF(36,"sell"),t.k0s(),t.DNE(37,ii,2,0,"mat-error",19),t.DNE(38,ri,2,0,"mat-error",19),t.k0s(),t.j41(39,"mat-form-field",15)(40,"mat-label"),t.EFF(41,"Original Price"),t.k0s(),t.nrm(42,"input",20),t.j41(43,"span",17),t.EFF(44,"\u20b9"),t.k0s(),t.j41(45,"mat-icon",18),t.EFF(46,"local_offer"),t.k0s(),t.j41(47,"mat-hint"),t.EFF(48,"MSRP or original price"),t.k0s()(),t.j41(49,"mat-form-field",15)(50,"mat-label"),t.EFF(51,"Cost Price"),t.k0s(),t.nrm(52,"input",21),t.j41(53,"span",17),t.EFF(54,"\u20b9"),t.k0s(),t.j41(55,"mat-icon",18),t.EFF(56,"receipt"),t.k0s(),t.j41(57,"mat-hint"),t.EFF(58,"Your cost for this product"),t.k0s()(),t.DNE(59,si,9,9,"div",22),t.k0s()(),t.j41(60,"div",11)(61,"h3",12)(62,"mat-icon",13),t.EFF(63,"inventory_2"),t.k0s(),t.EFF(64," Inventory Management "),t.k0s(),t.j41(65,"div",14)(66,"mat-form-field",15)(67,"mat-label"),t.EFF(68,"Stock Quantity"),t.k0s(),t.nrm(69,"input",23),t.j41(70,"mat-icon",18),t.EFF(71,"inventory"),t.k0s(),t.j41(72,"mat-hint"),t.EFF(73,"Current inventory count"),t.k0s()(),t.j41(74,"mat-form-field",15)(75,"mat-label"),t.EFF(76,"Minimum Stock Level"),t.k0s(),t.nrm(77,"input",24),t.j41(78,"mat-icon",18),t.EFF(79,"warning"),t.k0s(),t.j41(80,"mat-hint"),t.EFF(81,"Reorder when stock reaches this level"),t.k0s()(),t.j41(82,"mat-form-field",15)(83,"mat-label"),t.EFF(84,"Maximum Stock Level"),t.k0s(),t.nrm(85,"input",25),t.j41(86,"mat-icon",18),t.EFF(87,"storage"),t.k0s(),t.j41(88,"mat-hint"),t.EFF(89,"Maximum inventory to maintain"),t.k0s()()(),t.j41(90,"div",26)(91,"mat-checkbox",27)(92,"div",28)(93,"mat-icon",29),t.EFF(94,"track_changes"),t.k0s(),t.j41(95,"div")(96,"div",30),t.EFF(97,"Track Inventory"),t.k0s(),t.j41(98,"div",31),t.EFF(99,"Monitor stock levels and get low stock alerts"),t.k0s()()()()()(),t.j41(100,"div",11)(101,"h3",12)(102,"mat-icon",13),t.EFF(103,"settings"),t.k0s(),t.EFF(104," Product Settings "),t.k0s(),t.j41(105,"div",14)(106,"mat-form-field",15)(107,"mat-label"),t.EFF(108,"Status"),t.k0s(),t.j41(109,"mat-select",32)(110,"mat-option",33),t.EFF(111,"Active"),t.k0s(),t.j41(112,"mat-option",34),t.EFF(113,"Inactive"),t.k0s(),t.j41(114,"mat-option",35),t.EFF(115,"Out of Stock"),t.k0s(),t.j41(116,"mat-option",36),t.EFF(117,"Discontinued"),t.k0s()(),t.j41(118,"mat-icon",18),t.EFF(119,"flag"),t.k0s()(),t.j41(120,"mat-form-field",15)(121,"mat-label"),t.EFF(122,"Display Order"),t.k0s(),t.nrm(123,"input",37),t.j41(124,"mat-icon",18),t.EFF(125,"sort"),t.k0s(),t.j41(126,"mat-hint"),t.EFF(127,"Lower numbers appear first"),t.k0s()()(),t.j41(128,"div",26)(129,"mat-checkbox",38)(130,"div",28)(131,"mat-icon",29),t.EFF(132,"visibility"),t.k0s(),t.j41(133,"div")(134,"div",30),t.EFF(135,"Available for Sale"),t.k0s(),t.j41(136,"div",31),t.EFF(137,"Show this product on your storefront"),t.k0s()()()(),t.j41(138,"mat-checkbox",39)(139,"div",28)(140,"mat-icon",29),t.EFF(141,"star"),t.k0s(),t.j41(142,"div")(143,"div",30),t.EFF(144,"Featured Product"),t.k0s(),t.j41(145,"div",31),t.EFF(146,"Highlight this product in your shop"),t.k0s()()()()()(),t.j41(147,"div",11)(148,"h3",12)(149,"mat-icon",13),t.EFF(150,"edit"),t.k0s(),t.EFF(151," Shop Customization (Optional) "),t.k0s(),t.j41(152,"mat-form-field",40)(153,"mat-label"),t.EFF(154,"Custom Name"),t.k0s(),t.nrm(155,"input",41),t.j41(156,"mat-icon",18),t.EFF(157,"title"),t.k0s(),t.j41(158,"mat-hint"),t.EFF(159,"Leave empty to use master product name"),t.k0s()(),t.j41(160,"mat-form-field",40)(161,"mat-label"),t.EFF(162,"Custom Description"),t.k0s(),t.nrm(163,"textarea",42),t.j41(164,"mat-icon",18),t.EFF(165,"description"),t.k0s(),t.j41(166,"mat-hint"),t.EFF(167,"Additional description for your customers"),t.k0s()(),t.j41(168,"mat-form-field",40)(169,"mat-label"),t.EFF(170,"Tags"),t.k0s(),t.nrm(171,"input",43),t.j41(172,"mat-icon",18),t.EFF(173,"local_offer"),t.k0s(),t.j41(174,"mat-hint"),t.EFF(175,"Comma-separated tags for better searchability"),t.k0s()()(),t.DNE(176,ai,12,3,"div",10),t.k0s()(),t.j41(177,"mat-card-actions",44)(178,"button",45),t.bIt("click",function(){return o.onCancel()}),t.j41(179,"mat-icon"),t.EFF(180,"cancel"),t.k0s(),t.EFF(181," Cancel "),t.k0s(),t.j41(182,"button",46),t.bIt("click",function(){return o.onSubmit()}),t.DNE(183,ci,1,0,"mat-spinner",47),t.DNE(184,di,2,1,"mat-icon",19),t.EFF(185),t.k0s(),t.DNE(186,pi,3,2,"div",48),t.k0s()()()),2&n){let s,a;t.R7$(10),t.JRh(o.isEditMode?"edit":"add_shopping_cart"),t.R7$(3),t.JRh(o.isEditMode?"Edit Shop Product":"Add New Product"),t.R7$(2),t.JRh(o.isEditMode?"Update product pricing and inventory":"Create a new master product and add it to your shop"),t.R7$(2),t.Y8G("formGroup",o.shopProductForm),t.R7$(1),t.Y8G("ngIf",o.shop),t.R7$(1),t.Y8G("ngIf",o.isEditMode&&o.selectedMasterProduct),t.R7$(1),t.Y8G("ngIf",!o.isEditMode),t.R7$(1),t.Y8G("ngIf",!o.isEditMode),t.R7$(1),t.Y8G("ngIf",!o.isEditMode),t.R7$(15),t.Y8G("ngIf",null==(s=o.shopProductForm.get("price"))?null:s.hasError("required")),t.R7$(1),t.Y8G("ngIf",null==(a=o.shopProductForm.get("price"))?null:a.hasError("min")),t.R7$(21),t.Y8G("ngIf",null!==o.getProfit()),t.R7$(117),t.Y8G("ngIf",o.isEditMode&&o.productId),t.R7$(6),t.Y8G("disabled",!o.canSubmit()||o.isLoading),t.R7$(1),t.Y8G("ngIf",o.isLoading),t.R7$(1),t.Y8G("ngIf",!o.isLoading),t.R7$(1),t.SpI(" ",o.isLoading?o.isEditMode?"Updating Product...":"Creating Product...":o.isEditMode?"Update Product":"Create Product"," "),t.R7$(1),t.Y8G("ngIf",!o.canSubmit()&&!o.isLoading)}},dependencies:[f.Sq,f.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.VZ,g.j4,g.JD,T.fg,C.rl,C.nJ,C.MV,C.TL,C.JW,C.yw,F.$z,F.iY,M.An,A.VO,S.wT,m.RN,m.YY,m.QG,m.m2,m.MM,m.Lc,m.dh,K.Jl,K.Jo,E.LG,L.So,he,f.QX],styles:[".form-wrapper[_ngcontent-%COMP%]{min-height:100vh;padding:20px;background:linear-gradient(135deg,#4CAF50 0%,#66BB6A 100%);display:flex;align-items:flex-start;justify-content:center}.form-card[_ngcontent-%COMP%]{width:100%;margin:20px auto;border-radius:16px;box-shadow:0 10px 30px #00000026;overflow:hidden}.form-header[_ngcontent-%COMP%]{background:#4CAF50;color:#fff;padding:24px}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;width:100%}.back-button[_ngcontent-%COMP%]{color:#fff!important;background:rgba(255,255,255,.1);border-radius:50%;transition:all .3s ease}.back-button[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.2);transform:scale(1.05)}.header-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex:1}.header-text[_ngcontent-%COMP%]{flex:1}.form-header[_ngcontent-%COMP%]   .mat-mdc-card-title[_ngcontent-%COMP%]{color:#fff!important;font-size:1.5rem;font-weight:600}.form-header[_ngcontent-%COMP%]   .mat-mdc-card-subtitle[_ngcontent-%COMP%]{color:#fffc!important;margin-top:8px}.form-avatar[_ngcontent-%COMP%]{background:rgba(255,255,255,.2);border-radius:50%;width:48px;height:48px;display:flex;align-items:center;justify-content:center;margin-right:16px}.form-avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:28px;width:28px;height:28px}.form-content[_ngcontent-%COMP%]{padding:32px;background:#fafafa}.product-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px}.form-section[_ngcontent-%COMP%]{background:white;border-radius:12px;padding:24px;box-shadow:0 2px 8px #0000000a;border:1px solid #e0e0e0}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 0 24px;color:#333;font-size:1.1rem;font-weight:600}.section-icon[_ngcontent-%COMP%]{margin-right:12px;color:#4caf50}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin-bottom:20px}.form-field[_ngcontent-%COMP%]{width:100%}.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.shop-info[_ngcontent-%COMP%]{margin-bottom:16px}.product-preview[_ngcontent-%COMP%]{margin-top:16px}.preview-card[_ngcontent-%COMP%]{border:2px solid #667eea;border-radius:8px}.profit-display[_ngcontent-%COMP%]{grid-column:1/-1}.profit-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%);border-radius:8px}.profit-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.profit-label[_ngcontent-%COMP%]{font-weight:600;color:#495057}.profit-value[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.profit-value.positive[_ngcontent-%COMP%]{color:#28a745}.profit-value.negative[_ngcontent-%COMP%]{color:#dc3545}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.feature-checkbox[_ngcontent-%COMP%]{padding:12px;border:1px solid #e0e0e0;border-radius:8px;background:#f8f9fa}.checkbox-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.checkbox-icon[_ngcontent-%COMP%]{color:#4caf50}.checkbox-title[_ngcontent-%COMP%]{font-weight:600;margin-bottom:4px}.checkbox-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#666}.form-actions[_ngcontent-%COMP%]{padding:24px 32px;background:white;display:flex;gap:16px;justify-content:flex-end;border-top:1px solid #e0e0e0}.cancel-btn[_ngcontent-%COMP%]{min-width:120px}.submit-btn[_ngcontent-%COMP%]{min-width:160px}.loading-spinner[_ngcontent-%COMP%]{margin-right:8px}@media (max-width: 768px){.form-wrapper[_ngcontent-%COMP%]{padding:10px}.form-card[_ngcontent-%COMP%]{margin:10px;border-radius:12px}.form-header[_ngcontent-%COMP%]{padding:16px}.header-content[_ngcontent-%COMP%], .header-info[_ngcontent-%COMP%]{gap:12px}.form-avatar[_ngcontent-%COMP%]{width:40px!important;height:40px!important}.form-avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px!important;width:20px!important;height:20px!important}.form-header[_ngcontent-%COMP%]   .mat-mdc-card-title[_ngcontent-%COMP%]{font-size:1.2rem!important}.form-content[_ngcontent-%COMP%], .form-section[_ngcontent-%COMP%]{padding:20px}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.form-actions[_ngcontent-%COMP%]{padding:20px;flex-direction:column-reverse}.cancel-btn[_ngcontent-%COMP%], .submit-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.product-details[_ngcontent-%COMP%]{gap:6px}.detail-item[_ngcontent-%COMP%]{flex-direction:column;gap:2px}.detail-label[_ngcontent-%COMP%]{min-width:auto;font-size:12px}}.image-section-info[_ngcontent-%COMP%], .master-product-info[_ngcontent-%COMP%]{margin-bottom:16px}.product-preview-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%);border:2px solid #667eea;border-radius:12px}.product-avatar[_ngcontent-%COMP%]{width:60px!important;height:60px!important;border-radius:8px!important;background:white!important;display:flex!important;align-items:center!important;justify-content:center!important;overflow:hidden!important}.product-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:8px}.product-avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#667eea;font-size:32px;width:32px;height:32px}.product-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-top:12px}.detail-item[_ngcontent-%COMP%]{display:flex;gap:8px;font-size:14px}.detail-label[_ngcontent-%COMP%]{font-weight:600;color:#495057;min-width:80px}.detail-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.detail-label){color:#6c757d;flex:1}.image-upload-area[_ngcontent-%COMP%]{border:2px dashed #e0e0e0;border-radius:12px;padding:24px;background:#fafafa;text-align:center}.upload-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px}.upload-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#667eea;opacity:.7}.upload-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#495057;font-weight:500}.upload-hint[_ngcontent-%COMP%]{font-size:12px;color:#6c757d}.selected-images[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:16px;margin-top:20px}.image-preview[_ngcontent-%COMP%]{position:relative;border-radius:8px;overflow:hidden;background:white;border:1px solid #e0e0e0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:120px;object-fit:cover}.image-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;background:rgba(255,255,255,.9);width:24px;height:24px}.image-preview[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.file-name[_ngcontent-%COMP%]{display:block;padding:4px 8px;font-size:11px;color:#495057;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;background:white}"]})}}return i})();var Pe=p(2525);function gi(i,r){1&i&&(t.j41(0,"div",29),t.nrm(1,"mat-spinner",30),t.j41(2,"h3"),t.EFF(3,"Loading Categories"),t.k0s(),t.j41(4,"p"),t.EFF(5,"Please wait while we fetch your categories..."),t.k0s()())}function ui(i,r){1&i&&(t.j41(0,"div",31)(1,"div",32)(2,"mat-icon"),t.EFF(3,"category"),t.k0s()(),t.j41(4,"h3"),t.EFF(5,"No Categories Found"),t.k0s(),t.j41(6,"p"),t.EFF(7,"Start organizing your products by creating categories"),t.k0s(),t.j41(8,"button",33)(9,"mat-icon"),t.EFF(10,"add"),t.k0s(),t.EFF(11," Create First Category "),t.k0s()())}function mi(i,r){if(1&i){const e=t.RV6();t.j41(0,"img",61),t.bIt("error",function(o){t.eBV(e);const s=t.XpG(3);return t.Njj(s.onImageError(o))}),t.k0s()}if(2&i){const e=t.XpG().$implicit,n=t.XpG(2);t.Y8G("src",n.getCategoryImageUrl(e.iconUrl),t.B4B)("alt",e.name)}}function hi(i,r){if(1&i&&(t.j41(0,"span",62),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.iconUrl)}}function fi(i,r){1&i&&(t.j41(0,"mat-icon",63),t.EFF(1,"folder"),t.k0s())}function _i(i,r){if(1&i&&(t.j41(0,"p",64),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.nameTamil)}}function Ci(i,r){if(1&i&&(t.j41(0,"div",53)(1,"mat-icon",13),t.EFF(2,"account_tree"),t.k0s(),t.j41(3,"span",54),t.EFF(4),t.k0s()()),2&i){const e=t.XpG().$implicit;t.R7$(4),t.SpI("",e.subcategoryCount," subcategories")}}function xi(i,r){if(1&i&&(t.j41(0,"div",69)(1,"mat-icon",70),t.EFF(2,"folder_open"),t.k0s(),t.j41(3,"span",71),t.EFF(4),t.k0s(),t.j41(5,"span",72),t.EFF(6),t.k0s()()),2&i){const e=r.$implicit;t.R7$(4),t.JRh(e.name),t.R7$(2),t.SpI("(",e.productCount||0,")")}}function bi(i,r){if(1&i&&(t.j41(0,"div",65)(1,"div",66)(2,"mat-icon"),t.EFF(3,"subdirectory_arrow_right"),t.k0s(),t.j41(4,"span"),t.EFF(5,"Subcategories"),t.k0s()(),t.j41(6,"div",67),t.DNE(7,xi,7,2,"div",68),t.k0s()()),2&i){const e=t.XpG().$implicit;t.R7$(7),t.Y8G("ngForOf",e.subcategories)}}const Pi=function(i){return["/products/categories",i]};function vi(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",38)(1,"div",39)(2,"div",40),t.DNE(3,mi,1,2,"img",41),t.DNE(4,hi,2,1,"span",42),t.DNE(5,fi,2,0,"mat-icon",43),t.k0s(),t.j41(6,"div",44)(7,"span",45)(8,"mat-icon",46),t.EFF(9),t.k0s(),t.EFF(10),t.k0s()()(),t.j41(11,"div",47)(12,"h3",48),t.EFF(13),t.k0s(),t.DNE(14,_i,2,1,"p",49),t.j41(15,"p",50),t.EFF(16),t.k0s(),t.j41(17,"p",51),t.EFF(18),t.k0s()(),t.j41(19,"div",52)(20,"div",53)(21,"mat-icon",13),t.EFF(22,"inventory"),t.k0s(),t.j41(23,"span",54),t.EFF(24),t.k0s()(),t.DNE(25,Ci,5,1,"div",55),t.k0s(),t.DNE(26,bi,8,1,"div",56),t.j41(27,"div",57)(28,"button",58)(29,"mat-icon"),t.EFF(30,"edit"),t.k0s(),t.EFF(31," Edit "),t.k0s(),t.j41(32,"button",59),t.bIt("click",function(){const s=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.toggleStatus(s))}),t.j41(33,"mat-icon"),t.EFF(34),t.k0s(),t.EFF(35),t.k0s(),t.j41(36,"button",60),t.bIt("click",function(){const s=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.deleteCategory(s))}),t.j41(37,"mat-icon"),t.EFF(38,"delete"),t.k0s(),t.EFF(39," Delete "),t.k0s()()()}if(2&i){const e=r.$implicit,n=t.XpG(2);t.R7$(2),t.AVh("has-image",e.iconUrl),t.R7$(1),t.Y8G("ngIf",e.iconUrl&&n.isImageUrl(e.iconUrl)),t.R7$(1),t.Y8G("ngIf",e.iconUrl&&!n.isImageUrl(e.iconUrl)),t.R7$(1),t.Y8G("ngIf",!e.iconUrl),t.R7$(2),t.AVh("active",e.isActive)("inactive",!e.isActive),t.R7$(2),t.SpI(" ",e.isActive?"check_circle":"cancel"," "),t.R7$(1),t.SpI(" ",e.isActive?"Active":"Inactive"," "),t.R7$(3),t.JRh(e.name),t.R7$(1),t.Y8G("ngIf",e.nameTamil),t.R7$(2),t.JRh(e.slug),t.R7$(2),t.JRh(e.description||"No description available"),t.R7$(6),t.SpI("",e.productCount||0," products"),t.R7$(1),t.Y8G("ngIf",e.subcategoryCount>0),t.R7$(1),t.Y8G("ngIf",e.subcategories&&e.subcategories.length>0),t.R7$(2),t.Y8G("routerLink",t.eq3(26,Pi,e.id)),t.R7$(4),t.AVh("activate",!e.isActive)("deactivate",e.isActive),t.R7$(2),t.JRh(e.isActive?"pause":"play_arrow"),t.R7$(1),t.SpI(" ",e.isActive?"Deactivate":"Activate"," "),t.R7$(1),t.Y8G("disabled",e.productCount>0)}}const Fi=function(){return[10,20,50]};function ki(i,r){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"div",34),t.DNE(2,vi,40,28,"div",35),t.k0s(),t.j41(3,"div",36)(4,"mat-paginator",37),t.bIt("page",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onPageChange(o))}),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(2),t.Y8G("ngForOf",e.categories),t.R7$(2),t.Y8G("length",e.totalCategories)("pageSize",e.pageSize)("pageSizeOptions",t.lJ4(5,Fi))("showFirstLastButtons",!0)}}let Mi=(()=>{class i{constructor(e,n){this.dialog=e,this.categoryService=n,this.categories=[],this.loading=!1,this.pageSize=10,this.pageIndex=0,this.totalCategories=0}ngOnInit(){this.loadCategories()}loadCategories(){this.loading=!0,console.log("Loading categories with pageIndex:",this.pageIndex,"pageSize:",this.pageSize),this.categoryService.getCategories(void 0,void 0,void 0,this.pageIndex,this.pageSize).subscribe({next:e=>{console.log("Categories response:",e),this.categories=e.content||[],this.totalCategories=e.totalElements||0,this.loading=!1,console.log("Loaded categories:",this.categories.length,"Total:",this.totalCategories)},error:e=>{console.error("Error loading categories:",e),this.loading=!1,l().fire({title:"Error!",text:"Failed to load categories",icon:"error",confirmButtonText:"OK"})}})}onPageChange(e){console.log("Page change event:",e),this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,console.log("New pageIndex:",this.pageIndex,"New pageSize:",this.pageSize),this.loadCategories(),window.scrollTo({top:0,behavior:"smooth"})}getTotalCategories(){return this.totalCategories}getActiveCategories(){return this.categories.filter(e=>e.isActive).length}getSubcategories(){return this.categories.reduce((e,n)=>e+(n.subcategoryCount||0),0)}getTotalProducts(){return this.categories.reduce((e,n)=>e+(n.productCount||0),0)}toggleStatus(e){const n=e.isActive?"deactivate":"activate",o=e.isActive?"Deactivate Category?":"Activate Category?",s=`Are you sure you want to ${n} "${e.name}"?`;l().fire({title:o,text:s,icon:"question",showCancelButton:!0,confirmButtonColor:e.isActive?"#f44336":"#4caf50",cancelButtonColor:"#666",confirmButtonText:`Yes, ${n}!`,cancelButtonText:"Cancel"}).then(a=>{if(a.isConfirmed){const c={...e,isActive:!e.isActive};this.categoryService.updateCategory(e.id,c).subscribe({next:()=>{e.isActive=!e.isActive,l().fire({title:"Updated!",text:`Category ${n}d successfully.`,icon:"success",timer:2e3,showConfirmButton:!1})},error:d=>{console.error("Error updating category:",d),l().fire({title:"Error!",text:`Failed to ${n} category`,icon:"error",confirmButtonText:"OK"})}})}})}deleteCategory(e){e.productCount>0?l().fire({title:"Cannot Delete!",text:`Category "${e.name}" has ${e.productCount} products. Move or delete products first.`,icon:"warning",confirmButtonText:"OK"}):l().fire({title:"Delete Category?",text:`Are you sure you want to delete "${e.name}"? This action cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#f44336",cancelButtonColor:"#666",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(n=>{n.isConfirmed&&this.categoryService.deleteCategory(e.id).subscribe({next:()=>{l().fire({title:"Deleted!",text:"Category has been deleted.",icon:"success",timer:2e3,showConfirmButton:!1}),this.loadCategories()},error:o=>{console.error("Error deleting category:",o),l().fire({title:"Error!",text:"Failed to delete category",icon:"error",confirmButtonText:"OK"})}})})}expandAll(){}collapseAll(){}isImageUrl(e){if(!e)return!1;const n=e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/"),s=[".jpg",".jpeg",".png",".gif",".webp",".svg"].some(a=>e.toLowerCase().endsWith(a));return n&&s}getCategoryImageUrl(e){return e?e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/")?`${Pe.c.imageBaseUrl}${e}`:e:""}onImageError(e){e.target.style.display="none"}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(Gt.bZ),t.rXU(et.F))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-category-list"]],viewQuery:function(n,o){if(1&n&&t.GBs(X.iy,5),2&n){let s;t.mGM(s=t.lsd())&&(o.paginator=s.first)}},decls:82,vars:7,consts:[[1,"categories-container"],[1,"page-header"],[1,"header-content"],[1,"breadcrumb"],[1,"breadcrumb-item"],[1,"breadcrumb-separator"],[1,"breadcrumb-item","active"],[1,"page-title"],[1,"page-description"],[1,"header-actions"],["mat-raised-button","","routerLink","/products/categories/new",1,"action-button"],[1,"stats-row"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","active"],[1,"categories-section"],[1,"modern-card"],[1,"card-header"],[1,"card-title"],[1,"card-actions"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["mat-icon-button","","matTooltip","Expand All",3,"click"],["mat-icon-button","","matTooltip","Collapse All",3,"click"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],[4,"ngIf"],[1,"loading-state"],["diameter","60"],[1,"empty-state"],[1,"empty-icon"],["mat-raised-button","","color","primary","routerLink","/products/categories/new"],[1,"categories-grid"],["class","category-card",4,"ngFor","ngForOf"],[1,"pagination-wrapper"],[3,"length","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"category-card"],[1,"category-card-header"],[1,"category-icon-wrapper"],["class","category-image",3,"src","alt","error",4,"ngIf"],["class","category-emoji",4,"ngIf"],["class","category-main-icon",4,"ngIf"],[1,"category-badges"],[1,"badge"],[1,"badge-icon"],[1,"category-info"],[1,"category-name"],["class","category-tamil",4,"ngIf"],[1,"category-slug"],[1,"category-description"],[1,"category-stats"],[1,"stat-item"],[1,"stat-text"],["class","stat-item",4,"ngIf"],["class","subcategories",4,"ngIf"],[1,"category-actions"],["mat-button","",1,"action-btn","edit",3,"routerLink"],["mat-button","",1,"action-btn","toggle",3,"click"],["mat-button","",1,"action-btn","delete",3,"disabled","click"],[1,"category-image",3,"src","alt","error"],[1,"category-emoji"],[1,"category-main-icon"],[1,"category-tamil"],[1,"subcategories"],[1,"subcategories-header"],[1,"subcategory-list"],["class","subcategory-item",4,"ngFor","ngForOf"],[1,"subcategory-item"],[1,"sub-icon"],[1,"sub-name"],[1,"sub-count"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4)(5,"mat-icon"),t.EFF(6,"dashboard"),t.k0s(),t.EFF(7," Dashboard "),t.k0s(),t.j41(8,"mat-icon",5),t.EFF(9,"chevron_right"),t.k0s(),t.j41(10,"span",4),t.EFF(11,"Products"),t.k0s(),t.j41(12,"mat-icon",5),t.EFF(13,"chevron_right"),t.k0s(),t.j41(14,"span",6),t.EFF(15,"Categories"),t.k0s()(),t.j41(16,"h1",7),t.EFF(17,"Product Categories"),t.k0s(),t.j41(18,"p",8),t.EFF(19," Organize your products into hierarchical categories "),t.k0s()(),t.j41(20,"div",9)(21,"button",10)(22,"mat-icon"),t.EFF(23,"add_circle"),t.k0s(),t.EFF(24," New Category "),t.k0s()()(),t.j41(25,"div",11)(26,"div",12)(27,"div",13)(28,"mat-icon"),t.EFF(29,"category"),t.k0s()(),t.j41(30,"div",14)(31,"div",15),t.EFF(32),t.k0s(),t.j41(33,"div",16),t.EFF(34,"Total Categories"),t.k0s()()(),t.j41(35,"div",17)(36,"div",13)(37,"mat-icon"),t.EFF(38,"check_circle"),t.k0s()(),t.j41(39,"div",14)(40,"div",15),t.EFF(41),t.k0s(),t.j41(42,"div",16),t.EFF(43,"Active Categories"),t.k0s()()(),t.j41(44,"div",12)(45,"div",13)(46,"mat-icon"),t.EFF(47,"account_tree"),t.k0s()(),t.j41(48,"div",14)(49,"div",15),t.EFF(50),t.k0s(),t.j41(51,"div",16),t.EFF(52,"Subcategories"),t.k0s()()(),t.j41(53,"div",12)(54,"div",13)(55,"mat-icon"),t.EFF(56,"inventory"),t.k0s()(),t.j41(57,"div",14)(58,"div",15),t.EFF(59),t.k0s(),t.j41(60,"div",16),t.EFF(61,"Products"),t.k0s()()()(),t.j41(62,"div",18)(63,"mat-card",19)(64,"div",20)(65,"h3",21)(66,"mat-icon"),t.EFF(67,"account_tree"),t.k0s(),t.EFF(68," Category Hierarchy "),t.k0s(),t.j41(69,"div",22)(70,"button",23),t.bIt("click",function(){return o.loadCategories()}),t.j41(71,"mat-icon"),t.EFF(72,"refresh"),t.k0s()(),t.j41(73,"button",24),t.bIt("click",function(){return o.expandAll()}),t.j41(74,"mat-icon"),t.EFF(75,"unfold_more"),t.k0s()(),t.j41(76,"button",25),t.bIt("click",function(){return o.collapseAll()}),t.j41(77,"mat-icon"),t.EFF(78,"unfold_less"),t.k0s()()()(),t.DNE(79,gi,6,0,"div",26),t.DNE(80,ui,12,0,"div",27),t.DNE(81,ki,5,6,"div",28),t.k0s()()()),2&n&&(t.R7$(32),t.JRh(o.getTotalCategories()),t.R7$(9),t.JRh(o.getActiveCategories()),t.R7$(9),t.JRh(o.getSubcategories()),t.R7$(9),t.JRh(o.getTotalProducts()),t.R7$(20),t.Y8G("ngIf",o.loading),t.R7$(1),t.Y8G("ngIf",!o.loading&&0===o.categories.length),t.R7$(1),t.Y8G("ngIf",!o.loading&&o.categories.length>0))},dependencies:[f.Sq,f.bT,b.Wk,X.iy,F.$z,F.iY,M.An,m.RN,E.LG,B.oV],styles:[".categories-container[_ngcontent-%COMP%]{background:#f5f5f7;min-height:100vh;padding-bottom:32px}.page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:48px 32px;color:#fff;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 20px #667eea33}.breadcrumb[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px;font-size:14px;opacity:.9}.breadcrumb-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.breadcrumb-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.breadcrumb-separator[_ngcontent-%COMP%]{margin:0 8px;opacity:.6}.breadcrumb-item.active[_ngcontent-%COMP%]{font-weight:500}.page-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;margin:0 0 8px;letter-spacing:-.5px}.page-description[_ngcontent-%COMP%]{font-size:16px;opacity:.95;margin:0}.action-button[_ngcontent-%COMP%]{background:white;color:#667eea;font-weight:600;padding:10px 24px;border-radius:8px;font-size:15px}.action-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px;padding:32px 32px 0}.stat-card[_ngcontent-%COMP%]{background:white;border-radius:16px;padding:24px;display:flex;align-items:center;gap:20px;box-shadow:0 2px 8px #0000000f;transition:all .3s ease;border:2px solid transparent}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #0000001f}.stat-card.active[_ngcontent-%COMP%]{border-color:#4caf50;background:linear-gradient(135deg,#f1f8e9 0%,#fff 100%)}.stat-icon[_ngcontent-%COMP%]{width:56px;height:56px;background:linear-gradient(135deg,rgba(102,126,234,.1254901961) 0%,rgba(118,75,162,.1254901961) 100%);border-radius:12px;display:flex;align-items:center;justify-content:center}.stat-card.active[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(76,175,80,.1254901961) 0%,rgba(129,199,132,.1254901961) 100%)}.stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px;color:#667eea}.stat-card.active[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50}.stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;line-height:1;margin-bottom:4px;color:#1a1a1a}.stat-label[_ngcontent-%COMP%]{font-size:14px;color:#888;font-weight:500}.categories-section[_ngcontent-%COMP%]{padding:32px}.modern-card[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 2px 8px #0000000f;border:none;overflow:hidden}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e0e0e0;background:#fafafa}.card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:18px;font-weight:600;margin:0;color:#1a1a1a}.card-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.loading-state[_ngcontent-%COMP%]{padding:80px 20px;text-align:center}.loading-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:24px 0 8px;font-size:20px;color:#333}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888;margin:0}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;text-align:center}.empty-icon[_ngcontent-%COMP%]{width:120px;height:120px;background:linear-gradient(135deg,#f5f5f7 0%,#e8e8ea 100%);border-radius:24px;display:flex;align-items:center;justify-content:center;margin-bottom:24px}.empty-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;margin:0 0 8px;color:#333}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#888;margin:0 0 24px}.categories-grid[_ngcontent-%COMP%]{padding:24px;display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:24px}.category-card[_ngcontent-%COMP%]{background:white;border-radius:16px;overflow:hidden;box-shadow:0 2px 8px #0000000f;transition:all .3s ease;border:2px solid transparent}.category-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #0000001f;border-color:#667eea}.category-card-header[_ngcontent-%COMP%]{padding:20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #f0f0f0;background:linear-gradient(135deg,#f8f9fa 0%,#fff 100%)}.category-icon-wrapper[_ngcontent-%COMP%]{width:60px;height:60px;background:linear-gradient(135deg,rgba(102,126,234,.1254901961) 0%,rgba(118,75,162,.1254901961) 100%);border-radius:12px;display:flex;align-items:center;justify-content:center;overflow:hidden}.category-icon-wrapper.has-image[_ngcontent-%COMP%]{background:#f8f9fa;padding:0}.category-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:12px}.category-emoji[_ngcontent-%COMP%]{font-size:32px;line-height:1}.category-main-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#667eea}.category-badges[_ngcontent-%COMP%]{display:flex;gap:8px}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase}.badge.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f5e9 0%,#c8e6c9 100%);color:#4caf50}.badge.inactive[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffebee 0%,#ffcdd2 100%);color:#f44336}.badge-icon[_ngcontent-%COMP%]{font-size:14px!important;width:14px!important;height:14px!important}.category-info[_ngcontent-%COMP%]{padding:20px}.category-name[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0 0 4px;color:#1a1a1a}.category-tamil[_ngcontent-%COMP%]{font-size:16px;color:#4a90d9;margin:0 0 8px;font-weight:500}.category-slug[_ngcontent-%COMP%]{font-size:13px;color:#888;margin:0 0 12px;font-family:Courier New,monospace;background:#f5f5f5;padding:4px 8px;border-radius:4px;display:inline-block}.category-description[_ngcontent-%COMP%]{font-size:14px;color:#666;line-height:1.5;margin:0}.category-stats[_ngcontent-%COMP%]{padding:0 20px 16px;display:flex;gap:16px;flex-wrap:wrap}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px;color:#666}.stat-icon[_ngcontent-%COMP%]{font-size:16px!important;width:16px!important;height:16px!important;color:#999}.subcategories[_ngcontent-%COMP%]{padding:16px 20px;background:#f8f9fa;border-top:1px solid #e0e0e0}.subcategories-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;font-weight:600;color:#666;margin-bottom:12px}.subcategory-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.subcategory-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:6px 12px;background:white;border-radius:12px;font-size:12px;color:#666;border:1px solid #e0e0e0}.sub-icon[_ngcontent-%COMP%]{font-size:14px!important;width:14px!important;height:14px!important;color:#999}.sub-name[_ngcontent-%COMP%]{font-weight:500}.sub-count[_ngcontent-%COMP%]{color:#888;font-size:11px}.category-actions[_ngcontent-%COMP%]{padding:16px 20px;background:#fafafa;border-top:1px solid #e0e0e0;display:flex;gap:8px;justify-content:flex-end}.action-btn[_ngcontent-%COMP%]{border-radius:6px;font-size:12px;padding:6px 12px;min-width:auto}.action-btn.edit[_ngcontent-%COMP%]{color:#2196f3}.action-btn.toggle.activate[_ngcontent-%COMP%]{color:#4caf50}.action-btn.toggle.deactivate[_ngcontent-%COMP%]{color:#ff9800}.action-btn.delete[_ngcontent-%COMP%]{color:#f44336}.action-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px!important;width:16px!important;height:16px!important;margin-right:4px}.pagination-wrapper[_ngcontent-%COMP%]{padding:24px;border-top:1px solid #e0e0e0;background:#fafafa;display:flex;justify-content:flex-end}  .mat-mdc-paginator{background:transparent}@media (max-width: 1024px){.categories-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}.stats-row[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:24px}.stats-row[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:16px}.categories-section[_ngcontent-%COMP%]{padding:16px}.categories-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.card-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.category-actions[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.action-btn[_ngcontent-%COMP%]{justify-content:center;width:100%}}"]})}}return i})();function yi(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",37),t.bIt("click",function(){t.eBV(e),t.XpG();const o=t.sdS(19);return t.Njj(o.click())})("dragover",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onDragOver(o))})("dragleave",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onDragLeave(o))})("drop",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onDrop(o))}),t.j41(1,"mat-icon",38),t.EFF(2,"cloud_upload"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"Click to Upload Category Image"),t.k0s(),t.j41(5,"p"),t.EFF(6,"or drag and drop"),t.k0s(),t.j41(7,"span",39),t.EFF(8,"PNG, JPG, GIF up to 5MB"),t.k0s()()}if(2&i){const e=t.XpG();t.AVh("dragover",e.isDragging)}}function Oi(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",40),t.nrm(1,"img",41),t.j41(2,"div",42)(3,"button",43),t.bIt("click",function(){t.eBV(e),t.XpG();const o=t.sdS(19);return t.Njj(o.click())}),t.j41(4,"mat-icon"),t.EFF(5,"edit"),t.k0s()(),t.j41(6,"button",44),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.removeImage())}),t.j41(7,"mat-icon"),t.EFF(8,"delete"),t.k0s()()()()}if(2&i){const e=t.XpG();let n;t.R7$(1),t.Y8G("src",e.previewImageUrl||(null==(n=e.categoryForm.get("iconUrl"))?null:n.value),t.B4B)}}function Ei(i,r){1&i&&(t.j41(0,"mat-error"),t.EFF(1," Category name is required "),t.k0s())}function Ii(i,r){if(1&i&&(t.j41(0,"mat-option",22),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(1),t.SpI(" ",e.name," ")}}function Si(i,r){1&i&&t.nrm(0,"mat-spinner",45)}function wi(i,r){if(1&i&&(t.j41(0,"mat-icon"),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.isEditMode?"update":"add")}}let ve=(()=>{class i{constructor(e,n,o,s){this.fb=e,this.categoryService=n,this.route=o,this.router=s,this.parentCategories=[],this.isLoading=!1,this.isEditMode=!1,this.previewImageUrl=null,this.selectedImageFile=null,this.isDragging=!1,this.categoryForm=this.createForm()}ngOnInit(){this.loadParentCategories(),this.categoryId=this.route.snapshot.params.id,this.categoryId&&(this.isEditMode=!0,this.loadCategory()),this.categoryForm.get("name")?.valueChanges.subscribe(e=>{if(e&&!this.categoryForm.get("slug")?.value){const n=e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");this.categoryForm.get("slug")?.setValue(n)}})}createForm(){return this.fb.group({name:["",[g.k0.required,g.k0.maxLength(255)]],nameTamil:["",[g.k0.maxLength(100)]],description:[""],slug:[""],parentId:[null],isActive:[!0],sortOrder:[0,[g.k0.min(0)]],iconUrl:[""]})}loadParentCategories(){this.categoryService.getRootCategories().subscribe({next:e=>{this.parentCategories=e},error:e=>{console.error("Error loading parent categories:",e)}})}loadCategory(){this.categoryId&&(this.isLoading=!0,this.categoryService.getCategory(this.categoryId).subscribe({next:e=>{this.categoryForm.patchValue({name:e.name,nameTamil:e.nameTamil,description:e.description,slug:e.slug,parentId:e.parentId,isActive:e.isActive,sortOrder:e.sortOrder,iconUrl:e.iconUrl}),this.isLoading=!1},error:e=>{console.error("Error loading category:",e),l().fire({title:"Error!",text:"Failed to load category",icon:"error",confirmButtonText:"OK"}),this.isLoading=!1}}))}onSubmit(){if(!this.categoryForm.invalid){if(this.isLoading=!0,this.selectedImageFile)return void(this.isEditMode?this.updateCategoryThenUploadImage():this.createCategoryWithImage());this.saveCategory()}}createCategoryWithImage(){const e=new FormData;e.append("name",this.categoryForm.get("name")?.value),e.append("nameTamil",this.categoryForm.get("nameTamil")?.value||""),e.append("description",this.categoryForm.get("description")?.value||""),e.append("slug",this.categoryForm.get("slug")?.value||""),e.append("isActive",this.categoryForm.get("isActive")?.value.toString()),e.append("sortOrder",this.categoryForm.get("sortOrder")?.value.toString()),this.categoryForm.get("parentId")?.value&&e.append("parentId",this.categoryForm.get("parentId")?.value),e.append("image",this.selectedImageFile),this.categoryService.createCategoryWithImage(e).subscribe({next:()=>{this.isLoading=!1,l().fire({icon:"success",title:"Success!",text:"Category created successfully with image!",timer:2e3,showConfirmButton:!1}),this.router.navigate(["/products/categories"])},error:n=>{this.isLoading=!1,l().fire({icon:"error",title:"Error",text:n.error?.message||"Failed to create category"})}})}updateCategoryThenUploadImage(){const e=this.categoryForm.value;this.categoryService.updateCategory(this.categoryId,{name:e.name,nameTamil:e.nameTamil||void 0,description:e.description||void 0,slug:e.slug||void 0,parentId:e.parentId||void 0,isActive:e.isActive,sortOrder:e.sortOrder||void 0,iconUrl:e.iconUrl||void 0}).subscribe({next:o=>{this.categoryService.uploadCategoryImage(this.categoryId,this.selectedImageFile).subscribe({next:()=>{this.isLoading=!1,l().fire({title:"Success!",text:"Category updated successfully with image!",icon:"success",timer:2e3,showConfirmButton:!1}),this.router.navigate(["/products/categories"])},error:s=>{this.isLoading=!1,l().fire({title:"Partial Success",text:"Category updated but failed to upload image",icon:"warning",confirmButtonText:"OK"})}})},error:o=>{this.isLoading=!1,l().fire({title:"Error!",text:o.error?.message||"Failed to update category",icon:"error",confirmButtonText:"OK"})}})}saveCategory(){const e=this.categoryForm.value,n={name:e.name,nameTamil:e.nameTamil||void 0,description:e.description||void 0,slug:e.slug||void 0,parentId:e.parentId||void 0,isActive:e.isActive,sortOrder:e.sortOrder||void 0,iconUrl:e.iconUrl||void 0};(this.isEditMode?this.categoryService.updateCategory(this.categoryId,n):this.categoryService.createCategory(n)).subscribe({next:s=>{l().fire({title:"Success!",text:`Category ${this.isEditMode?"updated":"created"} successfully!`,icon:"success",timer:2e3,showConfirmButton:!1}),this.router.navigate(["/products/categories"]),this.isLoading=!1},error:s=>{console.error("Error saving category:",s);let a=`Failed to ${this.isEditMode?"update":"create"} category`;s.error?.message&&(a=s.error.message),l().fire({title:"Error!",text:a,icon:"error",confirmButtonText:"OK"}),this.isLoading=!1}})}onCancel(){this.router.navigate(["/products/categories"])}onImageSelected(e){const n=e.target;n.files&&n.files[0]&&this.processImageFile(n.files[0])}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.isDragging=!0}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.isDragging=!1}onDrop(e){e.preventDefault(),e.stopPropagation(),this.isDragging=!1;const n=e.dataTransfer?.files;if(n&&n.length>0){const o=n[0];o.type.startsWith("image/")?this.processImageFile(o):l().fire({icon:"error",title:"Invalid File",text:"Please drop an image file"})}}processImageFile(e){if(e.size>5242880)return void l().fire({icon:"error",title:"File Too Large",text:"Image size should be less than 5MB"});if(!["image/jpeg","image/png","image/gif","image/webp"].includes(e.type))return void l().fire({icon:"error",title:"Invalid File Type",text:"Please select a valid image file (JPEG, PNG, GIF, or WebP)"});this.selectedImageFile=e,this.categoryForm.get("iconUrl")?.setValue("");const o=new FileReader;o.onload=s=>{this.previewImageUrl=s.target?.result},o.readAsDataURL(e)}removeImage(){this.selectedImageFile=null,this.previewImageUrl=null}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(g.ok),t.rXU(et.F),t.rXU(b.nX),t.rXU(b.Ix))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-category-form"]],decls:98,vars:12,consts:[[1,"form-wrapper"],[1,"form-card"],[1,"form-header"],["mat-card-avatar","",1,"form-avatar"],[1,"form-content"],[1,"category-form",3,"formGroup","ngSubmit"],[1,"form-section"],[1,"section-title"],[1,"section-icon"],[1,"image-upload-area"],["type","file","accept","image/*",2,"display","none",3,"change"],["fileInput",""],["class","upload-placeholder",3,"dragover","click","dragleave","drop",4,"ngIf"],["class","image-preview-container",4,"ngIf"],[1,"form-grid"],["appearance","outline",1,"form-field"],["matInput","","formControlName","name","placeholder","Enter category name"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","nameTamil","placeholder","\u0bb5\u0b95\u0bc8 \u0baa\u0bc6\u0baf\u0bb0\u0bcd \u0b89\u0bb3\u0bcd\u0bb3\u0bbf\u0b9f\u0bb5\u0bc1\u0bae\u0bcd"],["matInput","","formControlName","slug","placeholder","URL-friendly name"],["formControlName","parentId"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","sortOrder","type","number","placeholder","0"],["appearance","outline",1,"form-field","full-width"],["matInput","","formControlName","description","rows","3","placeholder","Category description..."],[1,"checkbox-group"],["formControlName","isActive",1,"feature-checkbox"],[1,"checkbox-content"],[1,"checkbox-icon"],[1,"checkbox-title"],[1,"checkbox-subtitle"],[1,"form-actions"],["mat-button","","type","button",1,"cancel-btn",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"submit-btn",3,"disabled","click"],["diameter","20","class","loading-spinner",4,"ngIf"],[1,"upload-placeholder",3,"click","dragover","dragleave","drop"],[1,"upload-icon"],[1,"file-info"],[1,"image-preview-container"],["alt","Category Preview",1,"preview-image",3,"src"],[1,"image-actions"],["mat-icon-button","","type","button","matTooltip","Change Image",3,"click"],["mat-icon-button","","type","button","matTooltip","Remove Image",3,"click"],["diameter","20",1,"loading-spinner"]],template:function(n,o){if(1&n&&(t.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"div",3)(4,"mat-icon"),t.EFF(5,"category"),t.k0s()(),t.j41(6,"mat-card-title"),t.EFF(7),t.k0s(),t.j41(8,"mat-card-subtitle"),t.EFF(9),t.k0s()(),t.j41(10,"mat-card-content",4)(11,"form",5),t.bIt("ngSubmit",function(){return o.onSubmit()}),t.j41(12,"div",6)(13,"h3",7)(14,"mat-icon",8),t.EFF(15,"image"),t.k0s(),t.EFF(16," Category Image "),t.k0s(),t.j41(17,"div",9)(18,"input",10,11),t.bIt("change",function(a){return o.onImageSelected(a)}),t.k0s(),t.DNE(20,yi,9,2,"div",12),t.DNE(21,Oi,9,1,"div",13),t.k0s()(),t.j41(22,"div",6)(23,"h3",7)(24,"mat-icon",8),t.EFF(25,"info"),t.k0s(),t.EFF(26," Basic Information "),t.k0s(),t.j41(27,"div",14)(28,"mat-form-field",15)(29,"mat-label"),t.EFF(30,"Category Name (English)"),t.k0s(),t.nrm(31,"input",16),t.j41(32,"mat-icon",17),t.EFF(33,"title"),t.k0s(),t.DNE(34,Ei,2,0,"mat-error",18),t.k0s(),t.j41(35,"mat-form-field",15)(36,"mat-label"),t.EFF(37,"Category Name (Tamil - \u0ba4\u0bae\u0bbf\u0bb4\u0bcd)"),t.k0s(),t.nrm(38,"input",19),t.j41(39,"mat-icon",17),t.EFF(40,"translate"),t.k0s(),t.j41(41,"mat-hint"),t.EFF(42,"Optional Tamil translation"),t.k0s()(),t.j41(43,"mat-form-field",15)(44,"mat-label"),t.EFF(45,"Slug"),t.k0s(),t.nrm(46,"input",20),t.j41(47,"mat-icon",17),t.EFF(48,"link"),t.k0s(),t.j41(49,"mat-hint"),t.EFF(50,"Auto-generated from name if left empty"),t.k0s()(),t.j41(51,"mat-form-field",15)(52,"mat-label"),t.EFF(53,"Parent Category"),t.k0s(),t.j41(54,"mat-select",21)(55,"mat-option",22),t.EFF(56,"None (Root Category)"),t.k0s(),t.DNE(57,Ii,2,2,"mat-option",23),t.k0s(),t.j41(58,"mat-icon",17),t.EFF(59,"account_tree"),t.k0s()(),t.j41(60,"mat-form-field",15)(61,"mat-label"),t.EFF(62,"Sort Order"),t.k0s(),t.nrm(63,"input",24),t.j41(64,"mat-icon",17),t.EFF(65,"sort"),t.k0s(),t.j41(66,"mat-hint"),t.EFF(67,"Lower numbers appear first"),t.k0s()()(),t.j41(68,"mat-form-field",25)(69,"mat-label"),t.EFF(70,"Description"),t.k0s(),t.nrm(71,"textarea",26),t.j41(72,"mat-icon",17),t.EFF(73,"description"),t.k0s()()(),t.j41(74,"div",6)(75,"h3",7)(76,"mat-icon",8),t.EFF(77,"tune"),t.k0s(),t.EFF(78," Settings "),t.k0s(),t.j41(79,"div",27)(80,"mat-checkbox",28)(81,"div",29)(82,"mat-icon",30),t.EFF(83,"visibility"),t.k0s(),t.j41(84,"div")(85,"div",31),t.EFF(86,"Active Category"),t.k0s(),t.j41(87,"div",32),t.EFF(88,"Category is visible and can be used"),t.k0s()()()()()()()(),t.j41(89,"mat-card-actions",33)(90,"button",34),t.bIt("click",function(){return o.onCancel()}),t.j41(91,"mat-icon"),t.EFF(92,"cancel"),t.k0s(),t.EFF(93," Cancel "),t.k0s(),t.j41(94,"button",35),t.bIt("click",function(){return o.onSubmit()}),t.DNE(95,Si,1,0,"mat-spinner",36),t.DNE(96,wi,2,1,"mat-icon",18),t.EFF(97),t.k0s()()()()),2&n){let s,a,c;t.R7$(7),t.JRh(o.isEditMode?"Edit Category":"Create New Category"),t.R7$(2),t.JRh(o.isEditMode?"Update category information":"Add a new product category"),t.R7$(2),t.Y8G("formGroup",o.categoryForm),t.R7$(9),t.Y8G("ngIf",!(o.previewImageUrl||null!=(s=o.categoryForm.get("iconUrl"))&&s.value)),t.R7$(1),t.Y8G("ngIf",o.previewImageUrl||(null==(a=o.categoryForm.get("iconUrl"))?null:a.value)),t.R7$(13),t.Y8G("ngIf",null==(c=o.categoryForm.get("name"))?null:c.hasError("required")),t.R7$(21),t.Y8G("value",null),t.R7$(2),t.Y8G("ngForOf",o.parentCategories),t.R7$(37),t.Y8G("disabled",o.categoryForm.invalid||o.isLoading),t.R7$(1),t.Y8G("ngIf",o.isLoading),t.R7$(1),t.Y8G("ngIf",!o.isLoading),t.R7$(1),t.SpI(" ",o.isLoading?"Saving...":o.isEditMode?"Update Category":"Create Category"," ")}},dependencies:[f.Sq,f.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.j4,g.JD,T.fg,C.rl,C.nJ,C.MV,C.TL,C.yw,F.$z,F.iY,M.An,A.VO,S.wT,m.RN,m.YY,m.QG,m.m2,m.MM,m.Lc,m.dh,E.LG,L.So,B.oV],styles:[".form-wrapper[_ngcontent-%COMP%]{min-height:100vh;padding:20px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;align-items:flex-start;justify-content:center}.form-card[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:20px auto;border-radius:16px;box-shadow:0 10px 30px #00000026;overflow:hidden}.form-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:24px}.form-header[_ngcontent-%COMP%]   .mat-mdc-card-title[_ngcontent-%COMP%]{color:#fff!important;font-size:1.5rem;font-weight:600}.form-header[_ngcontent-%COMP%]   .mat-mdc-card-subtitle[_ngcontent-%COMP%]{color:#fffc!important;margin-top:8px}.form-avatar[_ngcontent-%COMP%]{background:rgba(255,255,255,.2);border-radius:50%;width:48px;height:48px;display:flex;align-items:center;justify-content:center;margin-right:16px}.form-avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:28px;width:28px;height:28px}.form-content[_ngcontent-%COMP%]{padding:32px;background:#fafafa}.category-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px}.form-section[_ngcontent-%COMP%]{background:white;border-radius:12px;padding:24px;box-shadow:0 2px 8px #0000000a;border:1px solid #e0e0e0}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 0 24px;color:#333;font-size:1.1rem;font-weight:600}.section-icon[_ngcontent-%COMP%]{margin-right:12px;color:#667eea;font-size:20px;width:20px;height:20px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:20px}.form-field[_ngcontent-%COMP%]{width:100%}.form-field.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.feature-checkbox[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;padding:16px;transition:all .2s ease}.feature-checkbox[_ngcontent-%COMP%]:hover{background:#e8f0fe;border-color:#1976d2}.checkbox-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.checkbox-icon[_ngcontent-%COMP%]{color:#667eea;font-size:20px;width:20px;height:20px}.checkbox-title[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:4px}.checkbox-subtitle[_ngcontent-%COMP%]{font-size:12px;color:#666}.form-actions[_ngcontent-%COMP%]{background:white;padding:24px 32px;border-top:1px solid #e0e0e0;display:flex;gap:16px;justify-content:flex-end}.cancel-btn[_ngcontent-%COMP%]{padding:8px 24px;border-radius:8px;color:#666;border:1px solid #ddd}.cancel-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.submit-btn[_ngcontent-%COMP%]{padding:8px 32px;border-radius:8px;font-weight:600;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;align-items:center;gap:8px}.submit-btn[_ngcontent-%COMP%]:disabled{background:#ccc;color:#666}.loading-spinner[_ngcontent-%COMP%]{margin-right:8px}.mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mat-mdc-form-field-outline-thick[_ngcontent-%COMP%], .mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mat-mdc-floating-label[_ngcontent-%COMP%]{color:#667eea}.image-upload-area[_ngcontent-%COMP%]{position:relative;margin-top:16px}.upload-placeholder[_ngcontent-%COMP%]{border:3px dashed #cbd5e1;border-radius:12px;padding:48px 32px;text-align:center;cursor:pointer;background:#f8fafc;transition:all .3s ease}.upload-placeholder[_ngcontent-%COMP%]:hover{border-color:#667eea;background:#f0f4ff}.upload-placeholder.dragover[_ngcontent-%COMP%]{border-color:#667eea;background:#e0e7ff;transform:scale(1.02)}.upload-icon[_ngcontent-%COMP%]{font-size:64px!important;width:64px!important;height:64px!important;color:#94a3b8;margin-bottom:16px}.upload-placeholder[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:20px;font-weight:600;color:#334155}.upload-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;color:#64748b;font-size:14px}.file-info[_ngcontent-%COMP%]{display:block;font-size:12px;color:#94a3b8}.image-preview-container[_ngcontent-%COMP%]{position:relative;border:1px solid #e2e8f0;border-radius:12px;padding:16px;background:white}.preview-image[_ngcontent-%COMP%]{width:100%;max-height:300px;object-fit:contain;border-radius:8px}.image-actions[_ngcontent-%COMP%]{position:absolute;top:24px;right:24px;display:flex;gap:8px}.image-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:white;box-shadow:0 2px 8px #0000001a}.image-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}@media (max-width: 768px){.form-wrapper[_ngcontent-%COMP%]{padding:10px}.form-card[_ngcontent-%COMP%]{margin:10px;border-radius:12px}.form-content[_ngcontent-%COMP%], .form-section[_ngcontent-%COMP%]{padding:20px}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.form-actions[_ngcontent-%COMP%]{padding:20px;flex-direction:column-reverse}.cancel-btn[_ngcontent-%COMP%], .submit-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})}}return i})();var ji=p(7468);function Di(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.JRh(e.formattedValue)}}function Ri(i,r){1&i&&t.nrm(0,"mat-spinner",8)}let Ti=(()=>{class i{constructor(){this.title="",this.value=0,this.icon="info",this.color="primary",this.loading=!1}get formattedValue(){return"number"==typeof this.value?this.value.toLocaleString():this.value.toString()}get iconColor(){switch(this.color){case"primary":default:return"#3f51b5";case"accent":return"#ff4081";case"warn":return"#ff9800"}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-product-stats-card"]],inputs:{title:"title",value:"value",icon:"icon",color:"color",loading:"loading"},decls:12,vars:8,consts:[[1,"stats-card"],[1,"stats-content"],[1,"stats-icon"],[1,"stats-info"],[1,"stats-value"],[4,"ngIf"],["diameter","20",4,"ngIf"],[1,"stats-title"],["diameter","20"]],template:function(n,o){1&n&&(t.j41(0,"mat-card",0)(1,"mat-card-content")(2,"div",1)(3,"div",2)(4,"mat-icon"),t.EFF(5),t.k0s()(),t.j41(6,"div",3)(7,"div",4),t.DNE(8,Di,2,1,"span",5),t.DNE(9,Ri,1,0,"mat-spinner",6),t.k0s(),t.j41(10,"div",7),t.EFF(11),t.k0s()()()()()),2&n&&(t.HbH("stats-"+o.color),t.R7$(4),t.xc7("color",o.iconColor),t.R7$(1),t.JRh(o.icon),t.R7$(3),t.Y8G("ngIf",!o.loading),t.R7$(1),t.Y8G("ngIf",o.loading),t.R7$(2),t.JRh(o.title))},dependencies:[f.bT,M.An,m.RN,m.m2,E.LG],styles:[".stats-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s ease-in-out,box-shadow .2s ease-in-out}.stats-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.stats-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.stats-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:48px;height:48px;border-radius:12px;background:rgba(0,0,0,.05)}.stats-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;height:24px;width:24px}.stats-info[_ngcontent-%COMP%]{flex:1}.stats-value[_ngcontent-%COMP%]{font-size:24px;font-weight:600;line-height:1.2;margin-bottom:4px;min-height:32px;display:flex;align-items:center}.stats-title[_ngcontent-%COMP%]{color:#666;font-size:14px;font-weight:500}.stats-primary[_ngcontent-%COMP%]   .stats-icon[_ngcontent-%COMP%]{background:rgba(63,81,181,.1)}.stats-primary[_ngcontent-%COMP%]   .stats-value[_ngcontent-%COMP%]{color:#3f51b5}.stats-accent[_ngcontent-%COMP%]   .stats-icon[_ngcontent-%COMP%]{background:rgba(255,64,129,.1)}.stats-accent[_ngcontent-%COMP%]   .stats-value[_ngcontent-%COMP%]{color:#ff4081}.stats-warn[_ngcontent-%COMP%]   .stats-icon[_ngcontent-%COMP%]{background:rgba(255,152,0,.1)}.stats-warn[_ngcontent-%COMP%]   .stats-value[_ngcontent-%COMP%]{color:#ff9800}@media (max-width: 768px){.stats-content[_ngcontent-%COMP%]{gap:12px}.stats-icon[_ngcontent-%COMP%]{width:40px;height:40px}.stats-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;height:20px;width:20px}.stats-value[_ngcontent-%COMP%]{font-size:20px}.stats-title[_ngcontent-%COMP%]{font-size:12px}}"]})}}return i})();function Ni(i,r){1&i&&(t.j41(0,"div",13),t.nrm(1,"mat-spinner",14),t.j41(2,"p"),t.EFF(3,"Loading categories..."),t.k0s()())}function Bi(i,r){1&i&&(t.j41(0,"div",15)(1,"mat-icon"),t.EFF(2,"category"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No Categories Found"),t.k0s(),t.j41(5,"p"),t.EFF(6,"Get started by creating your first product category"),t.k0s(),t.j41(7,"button",16)(8,"mat-icon"),t.EFF(9,"add"),t.k0s(),t.EFF(10," Create First Category "),t.k0s()())}function Ai(i,r){if(1&i&&(t.j41(0,"p",30),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function Gi(i,r){1&i&&(t.j41(0,"p",30),t.EFF(1,"No description available"),t.k0s())}function $i(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",19),t.bIt("click",function(){const s=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.viewCategoryProducts(s))}),t.j41(1,"div",20)(2,"div",21)(3,"mat-icon"),t.EFF(4,"folder"),t.k0s()(),t.j41(5,"div",22)(6,"h3",23),t.EFF(7),t.k0s(),t.DNE(8,Ai,2,1,"p",24),t.DNE(9,Gi,2,0,"p",24),t.k0s()(),t.j41(10,"div",25)(11,"div",26)(12,"span",27),t.EFF(13),t.k0s(),t.j41(14,"span",28),t.EFF(15,"Products"),t.k0s()(),t.j41(16,"mat-icon",29),t.EFF(17,"chevron_right"),t.k0s()()()}if(2&i){const e=r.$implicit,n=t.XpG(2);t.R7$(7),t.JRh(e.name),t.R7$(1),t.Y8G("ngIf",e.description),t.R7$(1),t.Y8G("ngIf",!e.description),t.R7$(4),t.JRh(n.getCategoryProductCount(e))}}function Li(i,r){if(1&i&&(t.j41(0,"div",17),t.DNE(1,$i,18,4,"div",18),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",e.categories)}}let Ui=(()=>{class i{constructor(e,n,o){this.productService=e,this.categoryService=n,this.router=o,this.loading=!0,this.totalProducts=0,this.totalCategories=0,this.featuredCount=0,this.totalBrands=0,this.recentProducts=[],this.featuredProducts=[],this.categories=[]}ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.loading=!0,(0,ji.p)({products:this.productService.getMasterProducts({size:10,sortBy:"updatedAt",sortDirection:"DESC"}),featured:this.productService.getFeaturedProducts(),categories:this.categoryService.getRootCategories(),brands:this.productService.getAllBrands()}).subscribe({next:e=>{this.totalProducts=e.products.totalElements,this.recentProducts=e.products.content.slice(0,5),this.featuredProducts=e.featured.slice(0,6),this.featuredCount=e.featured.length,this.categories=e.categories,this.totalCategories=e.categories.length,this.totalBrands=e.brands.length,this.loading=!1},error:e=>{console.error("Error loading dashboard data:",e),this.loadMockData(),this.loading=!1}})}loadMockData(){this.recentProducts=[{id:1,name:"Laptop Pro X1",sku:"LAP-001",brand:"TechBrand",status:"ACTIVE",description:"High-performance laptop",basePrice:89999,createdAt:new Date,updatedAt:new Date},{id:2,name:"Wireless Mouse",sku:"MOU-002",brand:"Accessories Plus",status:"ACTIVE",description:"Ergonomic wireless mouse",basePrice:1299,createdAt:new Date,updatedAt:new Date},{id:3,name:"USB-C Hub",sku:"HUB-003",brand:"ConnectTech",status:"ACTIVE",description:"7-in-1 USB-C hub",basePrice:2499,createdAt:new Date,updatedAt:new Date},{id:4,name:"Mechanical Keyboard",sku:"KEY-004",brand:"KeyMaster",status:"ACTIVE",description:"RGB mechanical keyboard",basePrice:5999,createdAt:new Date,updatedAt:new Date},{id:5,name:"Monitor 4K",sku:"MON-005",brand:"ViewTech",status:"ACTIVE",description:'27" 4K IPS Monitor',basePrice:34999,createdAt:new Date,updatedAt:new Date}],this.featuredProducts=this.recentProducts.slice(0,3),this.featuredCount=3,this.categories=[{id:1,name:"Electronics",slug:"electronics",description:"Electronic products",parentId:null,isActive:!0,displayOrder:1,createdAt:new Date,updatedAt:new Date},{id:2,name:"Computers",slug:"computers",description:"Computer products",parentId:null,isActive:!0,displayOrder:2,createdAt:new Date,updatedAt:new Date},{id:3,name:"Accessories",slug:"accessories",description:"Computer accessories",parentId:null,isActive:!0,displayOrder:3,createdAt:new Date,updatedAt:new Date}],this.totalProducts=156,this.totalCategories=12,this.totalBrands=25}viewCategoryProducts(e){this.router.navigate(["/products/master"],{queryParams:{categoryId:e.id,categoryName:e.name}})}getCategoryProductCount(e){return{1:7,2:2,3:3,4:4,5:2,6:2}[e.id]||0}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(Y.b),t.rXU(et.F),t.rXU(b.Ix))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-product-dashboard"]],decls:26,vars:11,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"header-actions"],["mat-raised-button","","color","primary","routerLink","/products/master/new"],[1,"stats-grid"],["title","Total Master Products","icon","inventory_2","color","primary",3,"value","loading"],["title","Active Categories","icon","category","color","accent",3,"value","loading"],["title","Featured Products","icon","star","color","warn",3,"value","loading"],["title","Total Brands","icon","business","color","primary",3,"value","loading"],[1,"categories-main-card"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","categories-large-list",4,"ngIf"],[1,"loading-container"],["diameter","50"],[1,"empty-state"],["mat-raised-button","","color","primary","routerLink","/products/categories/new"],[1,"categories-large-list"],["class","category-large-item","matRipple","",3,"click",4,"ngFor","ngForOf"],["matRipple","",1,"category-large-item",3,"click"],[1,"category-main-info"],[1,"category-icon"],[1,"category-details"],[1,"category-title"],["class","category-desc",4,"ngIf"],[1,"category-stats"],[1,"product-count-large"],[1,"count-number"],[1,"count-label"],[1,"arrow-icon"],[1,"category-desc"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Product Management Dashboard"),t.k0s(),t.j41(4,"div",2)(5,"button",3)(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.EFF(8," New Product "),t.k0s()()(),t.j41(9,"div",4),t.nrm(10,"app-product-stats-card",5)(11,"app-product-stats-card",6)(12,"app-product-stats-card",7)(13,"app-product-stats-card",8),t.k0s(),t.j41(14,"mat-card",9)(15,"mat-card-header")(16,"mat-card-title")(17,"mat-icon"),t.EFF(18,"category"),t.k0s(),t.EFF(19," Product Categories "),t.k0s(),t.j41(20,"mat-card-subtitle"),t.EFF(21,"Click any category to view all products in that category"),t.k0s()(),t.j41(22,"mat-card-content"),t.DNE(23,Ni,4,0,"div",10),t.DNE(24,Bi,11,0,"div",11),t.DNE(25,Li,2,1,"div",12),t.k0s()()()),2&n&&(t.R7$(10),t.Y8G("value",o.totalProducts)("loading",o.loading),t.R7$(1),t.Y8G("value",o.totalCategories)("loading",o.loading),t.R7$(1),t.Y8G("value",o.featuredCount)("loading",o.loading),t.R7$(1),t.Y8G("value",o.totalBrands)("loading",o.loading),t.R7$(10),t.Y8G("ngIf",o.loading),t.R7$(1),t.Y8G("ngIf",!o.loading&&0===o.categories.length),t.R7$(1),t.Y8G("ngIf",!o.loading&&o.categories.length>0))},dependencies:[f.Sq,f.bT,b.Wk,F.$z,M.An,m.RN,m.m2,m.MM,m.Lc,m.dh,E.LG,Ti],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.dashboard-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;margin-bottom:24px}.categories-main-card[_ngcontent-%COMP%]{margin:24px;border-radius:16px;box-shadow:0 4px 12px #0000001a;border:none}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 40px;text-align:center}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px;color:#666;font-size:16px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 40px;color:#666}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;height:64px;width:64px;color:#ddd;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;font-size:24px;color:#333}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:24px;font-size:16px}.products-list[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.product-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #eee}.product-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.product-info[_ngcontent-%COMP%]{flex:1}.product-name[_ngcontent-%COMP%]{font-weight:500;margin-bottom:4px}.product-meta[_ngcontent-%COMP%]{font-size:12px;color:#666}.product-meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:12px}.product-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.categories-large-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0}.category-large-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px;border-bottom:1px solid #f0f0f0;cursor:pointer;transition:all .3s ease;background:white}.category-large-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.category-large-item[_ngcontent-%COMP%]:hover{background:#f8f9fa;transform:translate(8px);box-shadow:0 2px 8px #0000001a}.category-main-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;flex:1}.category-icon[_ngcontent-%COMP%]{width:60px;height:60px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 4px 12px #667eea4d}.category-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.category-details[_ngcontent-%COMP%]{flex:1}.category-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0 0 8px;color:#1a1a1a}.category-desc[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:0;line-height:1.4}.category-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.product-count-large[_ngcontent-%COMP%]{text-align:center;padding:8px 16px;background:linear-gradient(135deg,#e3f2fd 0%,#bbdefb 100%);border-radius:12px;min-width:80px}.count-number[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:700;color:#1976d2}.count-label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#1976d2;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.arrow-icon[_ngcontent-%COMP%]{color:#999;font-size:24px;width:24px;height:24px}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:16px}.dashboard-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:16px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.categories-main-card[_ngcontent-%COMP%]{margin:16px}.category-large-item[_ngcontent-%COMP%]{padding:16px;flex-direction:column;gap:16px;text-align:center}.category-main-info[_ngcontent-%COMP%]{flex-direction:column;gap:12px;text-align:center}.category-large-item[_ngcontent-%COMP%]:hover{transform:none}}"]})}}return i})();function zi(i,r){if(1&i&&(t.j41(0,"mat-option",25)(1,"div",26)(2,"span",27),t.EFF(3),t.k0s(),t.j41(4,"span",28),t.EFF(5),t.k0s()()()),2&i){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(3),t.JRh(e.name),t.R7$(2),t.JRh(e.businessType)}}function Yi(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",13)(1,"mat-card",14)(2,"div",15)(3,"div",16)(4,"mat-icon",17),t.EFF(5,"store"),t.k0s()(),t.j41(6,"div",18)(7,"h2",19),t.EFF(8,"Select Target Shop"),t.k0s(),t.j41(9,"p",20),t.EFF(10,"Choose the shop where you want to add products"),t.k0s()()(),t.j41(11,"mat-card-content")(12,"mat-form-field",21)(13,"mat-label"),t.EFF(14,"Select Shop"),t.k0s(),t.j41(15,"mat-select",22),t.bIt("valueChange",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.selectedShopId=o)})("selectionChange",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onShopChange(o.value))}),t.DNE(16,zi,6,3,"mat-option",23),t.k0s(),t.j41(17,"mat-icon",24),t.EFF(18,"business"),t.k0s()()()()()}if(2&i){const e=t.XpG();t.R7$(15),t.Y8G("value",e.selectedShopId),t.R7$(1),t.Y8G("ngForOf",e.shops)}}function Vi(i,r){if(1&i&&(t.j41(0,"div",31)(1,"div",32)(2,"mat-icon"),t.EFF(3,"store"),t.k0s()(),t.j41(4,"div",33)(5,"div",34),t.EFF(6),t.k0s(),t.j41(7,"div",35),t.EFF(8,"Target Shop"),t.k0s()()()),2&i){const e=t.XpG(2);t.R7$(6),t.JRh(e.selectedShop.name)}}function Xi(i,r){1&i&&t.nrm(0,"mat-spinner",60)}function Ki(i,r){1&i&&(t.j41(0,"mat-icon"),t.EFF(1,"add_shopping_cart"),t.k0s())}function Wi(i,r){if(1&i&&(t.j41(0,"mat-option",25),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(1),t.JRh(e.name)}}function Hi(i,r){if(1&i){const e=t.RV6();t.j41(0,"img",84),t.bIt("error",function(o){t.eBV(e);const s=t.XpG(4);return t.Njj(s.onImageError(o))}),t.k0s()}if(2&i){const e=t.XpG().$implicit,n=t.XpG(3);t.Y8G("src",n.getImageUrl(e.product.primaryImageUrl),t.B4B)("alt",e.product.name)}}function Ji(i,r){1&i&&(t.j41(0,"div",85)(1,"mat-icon"),t.EFF(2,"image_not_supported"),t.k0s()())}function Qi(i,r){if(1&i&&(t.j41(0,"span",86),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.product.brand)}}function Zi(i,r){if(1&i&&(t.j41(0,"div",87),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(1),t.SpI(" ",e.product.description," ")}}function qi(i,r){if(1&i&&(t.j41(0,"span",88),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.product.category.name)}}function tr(i,r){1&i&&(t.j41(0,"span",89)(1,"mat-icon"),t.EFF(2,"check_circle"),t.k0s(),t.EFF(3," Already Added "),t.k0s())}function er(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",90)(1,"div",91)(2,"mat-form-field",92)(3,"mat-label"),t.EFF(4,"Price"),t.k0s(),t.j41(5,"input",93),t.bIt("ngModelChange",function(o){t.eBV(e);const s=t.XpG().$implicit;return t.Njj(s.price=o)}),t.k0s(),t.j41(6,"span",94),t.EFF(7,"\u20b9"),t.k0s()(),t.j41(8,"mat-form-field",95)(9,"mat-label"),t.EFF(10,"Stock"),t.k0s(),t.j41(11,"input",96),t.bIt("ngModelChange",function(o){t.eBV(e);const s=t.XpG().$implicit;return t.Njj(s.stockQuantity=o)}),t.k0s()(),t.j41(12,"mat-slide-toggle",97),t.bIt("ngModelChange",function(o){t.eBV(e);const s=t.XpG().$implicit;return t.Njj(s.isAvailable=o)}),t.EFF(13," Available "),t.k0s()()()}if(2&i){const e=t.XpG().$implicit;t.R7$(5),t.Y8G("ngModel",e.price),t.R7$(6),t.Y8G("ngModel",e.stockQuantity),t.R7$(1),t.Y8G("ngModel",e.isAvailable)}}const nr=function(i,r){return["/products/shop",i,r]};function or(i,r){if(1&i&&(t.j41(0,"div",98)(1,"div",99)(2,"mat-icon"),t.EFF(3,"check_circle"),t.k0s(),t.j41(4,"span"),t.EFF(5,"Already added to this shop"),t.k0s(),t.j41(6,"button",100)(7,"mat-icon"),t.EFF(8,"edit"),t.k0s(),t.EFF(9," Edit "),t.k0s()()()),2&i){const e=t.XpG().$implicit,n=t.XpG(3);t.R7$(6),t.Y8G("routerLink",t.l_i(1,nr,n.selectedShopId,e.shopProductId))}}function ir(i,r){1&i&&(t.j41(0,"div",101)(1,"span",102),t.EFF(2,"Select to set pricing"),t.k0s()())}function rr(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",64)(1,"div",65)(2,"mat-checkbox",66),t.bIt("ngModelChange",function(o){const a=t.eBV(e).$implicit;return t.Njj(a.selected=o)})("change",function(){t.eBV(e);const o=t.XpG(3);return t.Njj(o.updateSelectionState())}),t.k0s()(),t.j41(3,"div",67),t.DNE(4,Hi,1,2,"img",68),t.DNE(5,Ji,3,0,"div",69),t.k0s(),t.j41(6,"div",70)(7,"div",71)(8,"h3",72),t.EFF(9),t.k0s(),t.j41(10,"div",73)(11,"span",74),t.EFF(12),t.k0s(),t.DNE(13,Qi,2,1,"span",75),t.k0s(),t.DNE(14,Zi,2,1,"div",76),t.k0s()(),t.j41(15,"div",77),t.DNE(16,qi,2,1,"span",78),t.j41(17,"span",79),t.EFF(18),t.k0s(),t.DNE(19,tr,4,0,"span",80),t.k0s(),t.DNE(20,er,14,3,"div",81),t.DNE(21,or,10,4,"div",82),t.DNE(22,ir,3,0,"div",83),t.k0s()}if(2&i){const e=r.$implicit;t.AVh("selected",e.selected)("already-in-shop",e.alreadyInShop),t.R7$(2),t.Y8G("ngModel",e.selected)("disabled",e.alreadyInShop),t.R7$(2),t.Y8G("ngIf",e.product.primaryImageUrl),t.R7$(1),t.Y8G("ngIf",!e.product.primaryImageUrl),t.R7$(4),t.JRh(e.product.name),t.R7$(3),t.JRh(e.product.sku),t.R7$(1),t.Y8G("ngIf",e.product.brand),t.R7$(1),t.Y8G("ngIf",e.product.description),t.R7$(2),t.Y8G("ngIf",e.product.category),t.R7$(1),t.AVh("active","ACTIVE"===e.product.status)("inactive","ACTIVE"!==e.product.status),t.R7$(1),t.SpI(" ",e.product.status," "),t.R7$(1),t.Y8G("ngIf",e.alreadyInShop),t.R7$(1),t.Y8G("ngIf",e.selected&&!e.alreadyInShop),t.R7$(1),t.Y8G("ngIf",e.alreadyInShop),t.R7$(1),t.Y8G("ngIf",!e.selected&&!e.alreadyInShop)}}function sr(i,r){if(1&i&&(t.j41(0,"div",61)(1,"div",62),t.DNE(2,rr,23,22,"div",63),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(2),t.Y8G("ngForOf",e.filteredSelections)}}function ar(i,r){1&i&&(t.j41(0,"div",103),t.nrm(1,"mat-spinner",104),t.j41(2,"h3"),t.EFF(3,"Loading Products"),t.k0s(),t.j41(4,"p"),t.EFF(5,"Please wait while we fetch the master products..."),t.k0s()())}function cr(i,r){1&i&&(t.j41(0,"p"),t.EFF(1," Try adjusting your filters or search criteria "),t.k0s())}function dr(i,r){1&i&&(t.j41(0,"p"),t.EFF(1," No master products available. Create some products first. "),t.k0s())}function lr(i,r){if(1&i&&(t.j41(0,"div",105)(1,"div",106)(2,"mat-icon"),t.EFF(3,"inventory_2"),t.k0s()(),t.j41(4,"h3"),t.EFF(5,"No Products Found"),t.k0s(),t.DNE(6,cr,2,0,"p",49),t.DNE(7,dr,2,0,"p",49),t.j41(8,"button",107)(9,"mat-icon"),t.EFF(10,"add"),t.k0s(),t.EFF(11," Create Master Product "),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(6),t.Y8G("ngIf",e.searchQuery||e.categoryFilter||e.statusFilter),t.R7$(1),t.Y8G("ngIf",!e.searchQuery&&!e.categoryFilter&&!e.statusFilter)}}function pr(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",29)(1,"div",30)(2,"div",31)(3,"div",32)(4,"mat-icon"),t.EFF(5,"inventory_2"),t.k0s()(),t.j41(6,"div",33)(7,"div",34),t.EFF(8),t.k0s(),t.j41(9,"div",35),t.EFF(10,"Total Products"),t.k0s()()(),t.j41(11,"div",36)(12,"div",32)(13,"mat-icon"),t.EFF(14,"check_circle"),t.k0s()(),t.j41(15,"div",33)(16,"div",34),t.EFF(17),t.k0s(),t.j41(18,"div",35),t.EFF(19,"Selected"),t.k0s()()(),t.j41(20,"div",37)(21,"div",32)(22,"mat-icon"),t.EFF(23,"store_mall_directory"),t.k0s()(),t.j41(24,"div",33)(25,"div",34),t.EFF(26),t.k0s(),t.j41(27,"div",35),t.EFF(28,"Already in Shop"),t.k0s()()(),t.DNE(29,Vi,9,1,"div",38),t.k0s(),t.j41(30,"mat-card",39)(31,"div",40)(32,"div",41)(33,"mat-checkbox",42),t.bIt("change",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.toggleAllSelection(o.checked))}),t.j41(34,"span",43),t.EFF(35," Select All Products "),t.j41(36,"span",44),t.EFF(37),t.k0s()()()(),t.j41(38,"div",45)(39,"button",46),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.showBulkPriceDialog())}),t.j41(40,"mat-icon"),t.EFF(41,"payments"),t.k0s(),t.EFF(42," Set Bulk Price "),t.k0s(),t.j41(43,"button",47),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.assignSelectedProducts())}),t.DNE(44,Xi,1,0,"mat-spinner",48),t.DNE(45,Ki,2,0,"mat-icon",49),t.EFF(46),t.k0s()()()(),t.j41(47,"div",50)(48,"mat-form-field",51)(49,"mat-label"),t.EFF(50,"Search Products"),t.k0s(),t.j41(51,"input",52),t.bIt("ngModelChange",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.searchQuery=o)})("input",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.filterProducts())}),t.k0s(),t.j41(52,"mat-icon",24),t.EFF(53,"search"),t.k0s()(),t.j41(54,"mat-form-field",53)(55,"mat-label"),t.EFF(56,"Category"),t.k0s(),t.j41(57,"mat-select",22),t.bIt("valueChange",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.categoryFilter=o)})("selectionChange",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.filterProducts())}),t.j41(58,"mat-option",54),t.EFF(59,"All Categories"),t.k0s(),t.DNE(60,Wi,2,2,"mat-option",23),t.k0s()(),t.j41(61,"mat-form-field",53)(62,"mat-label"),t.EFF(63,"Status"),t.k0s(),t.j41(64,"mat-select",22),t.bIt("valueChange",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.statusFilter=o)})("selectionChange",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.filterProducts())}),t.j41(65,"mat-option",54),t.EFF(66,"All Status"),t.k0s(),t.j41(67,"mat-option",55),t.EFF(68,"Active"),t.k0s(),t.j41(69,"mat-option",56),t.EFF(70,"Inactive"),t.k0s()()()(),t.DNE(71,sr,3,1,"div",57),t.DNE(72,ar,6,0,"div",58),t.DNE(73,lr,12,2,"div",59),t.k0s()}if(2&i){const e=t.XpG();t.R7$(8),t.JRh(e.productSelections.length),t.R7$(9),t.JRh(e.getSelectedCount()),t.R7$(9),t.JRh(e.getAlreadyInShopCount()),t.R7$(3),t.Y8G("ngIf",e.selectedShop),t.R7$(4),t.Y8G("checked",e.allSelected)("indeterminate",e.someSelected&&!e.allSelected),t.R7$(4),t.Lme("(",e.getSelectedCount()," of ",e.productSelections.length,")"),t.R7$(2),t.Y8G("disabled",0===e.getSelectedCount()),t.R7$(4),t.Y8G("disabled",0===e.getSelectedCount()||e.isLoading),t.R7$(1),t.Y8G("ngIf",e.isLoading),t.R7$(1),t.Y8G("ngIf",!e.isLoading),t.R7$(1),t.SpI(" ",e.isLoading?"Adding...":"Add to Shop"," "),t.R7$(5),t.Y8G("ngModel",e.searchQuery),t.R7$(6),t.Y8G("value",e.categoryFilter),t.R7$(3),t.Y8G("ngForOf",e.categories),t.R7$(4),t.Y8G("value",e.statusFilter),t.R7$(7),t.Y8G("ngIf",!e.loading),t.R7$(1),t.Y8G("ngIf",e.loading),t.R7$(1),t.Y8G("ngIf",!e.loading&&0===e.filteredSelections.length)}}let Fe=(()=>{class i{constructor(e,n,o,s,a,c){this.fb=e,this.productService=n,this.shopProductService=o,this.shopService=s,this.route=a,this.router=c,this.productSelections=[],this.filteredSelections=[],this.shops=[],this.loading=!1,this.isLoading=!1,this.searchQuery="",this.categoryFilter="",this.statusFilter="",this.categories=[]}ngOnInit(){this.route.params.subscribe(e=>{if(e.shopId){const n=parseInt(e.shopId,10);isNaN(n)?(console.error("Invalid shop ID:",e.shopId),this.router.navigate(["/products/bulk-assignment"])):(this.shopId=n,this.selectedShopId=this.shopId,this.loadShopDetails(),this.loadMasterProducts())}else this.loadShops()})}loadShops(){this.shopService.getShops({page:0,size:100}).subscribe({next:e=>{this.shops=e.content||[]},error:e=>{console.error("Error loading shops:",e)}})}loadShopDetails(){this.selectedShopId&&this.shopService.getShop(this.selectedShopId).subscribe({next:e=>{this.selectedShop=e},error:e=>{console.error("Error loading shop details:",e)}})}loadMasterProducts(){this.loading=!0,Promise.all([this.productService.getMasterProducts({status:R.S.ACTIVE}).toPromise(),this.shopProductService.getShopProducts(this.selectedShopId).toPromise()]).then(([e,n])=>{const o=e?.content||[],s=n?.content||[],a=new Set(s.map(d=>d.masterProduct?.id).filter(Boolean));this.productSelections=o.map(d=>{const u=a.has(d.id),h=s.find(v=>v.masterProduct?.id===d.id);return{product:d,selected:!1,price:0,stockQuantity:0,isAvailable:!0,alreadyInShop:u||!1,shopProductId:h?.id}});const c=new Set;o.forEach(d=>{d.category&&c.add(JSON.stringify(d.category))}),this.categories=Array.from(c).map(d=>JSON.parse(d)),this.filterProducts(),this.loading=!1}).catch(e=>{console.error("Error loading products:",e),this.loading=!1})}onShopChange(e){this.selectedShopId=e,this.loadShopDetails(),this.loadMasterProducts()}filterProducts(){let e=[...this.productSelections];if(this.searchQuery.trim()){const n=this.searchQuery.toLowerCase();e=e.filter(o=>o.product.name.toLowerCase().includes(n)||o.product.sku.toLowerCase().includes(n)||o.product.brand&&o.product.brand.toLowerCase().includes(n))}this.categoryFilter&&(e=e.filter(n=>n.product.category?.id===+this.categoryFilter)),this.statusFilter&&(e=e.filter(n=>n.product.status===this.statusFilter)),this.filteredSelections=e}get allSelected(){const e=this.filteredSelections.filter(n=>!n.alreadyInShop);return e.length>0&&e.every(n=>n.selected)}get someSelected(){return this.filteredSelections.some(e=>e.selected&&!e.alreadyInShop)}toggleAllSelection(e){this.filteredSelections.forEach(n=>{n.alreadyInShop||(n.selected=e,e&&!n.price&&(n.price=0))})}updateSelectionState(){}getSelectedCount(){return this.productSelections.filter(e=>e.selected).length}getAlreadyInShopCount(){return this.productSelections.filter(e=>e.alreadyInShop).length}clearSelection(){this.productSelections.forEach(e=>{e.selected=!1,e.price=0,e.stockQuantity=0,e.isAvailable=!0})}canAssignProducts(){const e=this.productSelections.filter(n=>n.selected&&!n.alreadyInShop);return e.length>0&&e.every(n=>n.price&&n.price>0)}showBulkPriceDialog(){l().fire({title:"Set Bulk Price",input:"number",inputLabel:"Enter price for all selected products",inputPlaceholder:"Enter price in \u20b9",inputAttributes:{min:"1",step:"1"},showCancelButton:!0,confirmButtonText:"Apply Price",confirmButtonColor:"#667eea",cancelButtonText:"Cancel",inputValidator:e=>!e||parseFloat(e)<=0?"Please enter a valid price":null}).then(e=>{if(e.isConfirmed&&e.value){const n=parseFloat(e.value);this.productSelections.forEach(o=>{o.selected&&(o.price=n)}),l().fire({title:"Price Applied!",text:`Price of \u20b9${n} set for all selected products`,icon:"success",timer:2e3,showConfirmButton:!1})}})}assignSelectedProducts(){if(!this.selectedShopId||!this.canAssignProducts())return;this.isLoading=!0;const o=this.productSelections.filter(s=>s.selected&&!s.alreadyInShop).map(s=>({masterProductId:s.product.id,price:s.price,stockQuantity:s.stockQuantity||0,isAvailable:!1!==s.isAvailable,status:R.Q.ACTIVE,trackInventory:!0,isFeatured:!1})).map(s=>this.shopProductService.addProductToShop(this.selectedShopId,s).toPromise());Promise.allSettled(o).then(s=>{this.isLoading=!1;const a=s.filter(d=>"fulfilled"===d.status).length,c=s.filter(d=>"rejected"===d.status).length;0===c?l().fire({title:"Success!",text:`Successfully added ${a} products to the shop`,icon:"success",confirmButtonText:"OK",confirmButtonColor:"#667eea"}).then(()=>{this.router.navigate(["/products/shop",this.selectedShopId])}):l().fire({title:"Partial Success",text:`Added ${a} products, ${c} failed`,icon:"warning",confirmButtonText:"OK"}),this.clearSelection()})}getImageUrl(e){return(0,tt.V)(e)}onImageError(e){e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik02MCA2MEgxNDBWMTQwSDYwVjYwWiIgZmlsbD0iI0UwRTBFMCIvPgo8Y2lyY2xlIGN4PSI4NSIgY3k9Ijg1IiByPSIxMCIgZmlsbD0iI0QwRDBEMCIvPgo8cGF0aCBkPSJNNjAgMTIwTDkwIDkwTDExMCAxMTBMMTQwIDgwVjE0MEg2MFYxMjBaIiBmaWxsPSIjRDBEMEQwIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTcwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjOTk5IiBmb250LXNpemU9IjEyIiBmb250LWZhbWlseT0iQXJpYWwiPk5vIEltYWdlPC90ZXh0Pgo8L3N2Zz4K"}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(g.ok),t.rXU(Y.b),t.rXU(gt.Z),t.rXU(ut.s),t.rXU(b.nX),t.rXU(b.Ix))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-bulk-product-assignment"]],decls:25,vars:2,consts:[[1,"bulk-assignment-container"],[1,"page-header"],[1,"header-content"],[1,"breadcrumb"],[1,"breadcrumb-item"],[1,"breadcrumb-separator"],[1,"breadcrumb-item","active"],[1,"page-title"],[1,"page-description"],[1,"header-illustration"],[1,"illustration-icon"],["class","shop-selection-section",4,"ngIf"],["class","products-section",4,"ngIf"],[1,"shop-selection-section"],[1,"modern-card","shop-selector-card"],[1,"card-header"],[1,"card-icon-wrapper"],[1,"card-icon"],[1,"card-title-section"],[1,"card-title"],[1,"card-subtitle"],["appearance","outline",1,"modern-field"],[3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matPrefix",""],[3,"value"],[1,"shop-option"],[1,"shop-name"],[1,"shop-type"],[1,"products-section"],[1,"stats-row"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","selected"],[1,"stat-card","already-added"],["class","stat-card",4,"ngIf"],[1,"modern-card","toolbar-card"],[1,"toolbar-content"],[1,"toolbar-left"],[1,"select-all-checkbox",3,"checked","indeterminate","change"],[1,"checkbox-label"],[1,"selection-count"],[1,"toolbar-actions"],["mat-stroked-button","",1,"toolbar-button",3,"disabled","click"],["mat-raised-button","","color","primary",1,"toolbar-button","primary-action",3,"disabled","click"],["diameter","18",4,"ngIf"],[4,"ngIf"],[1,"filter-bar"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by name, SKU, or brand...",3,"ngModel","ngModelChange","input"],["appearance","outline",1,"filter-field"],["value",""],["value","ACTIVE"],["value","INACTIVE"],["class","products-list-container",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["diameter","18"],[1,"products-list-container"],[1,"products-list"],["class","product-list-item",3,"selected","already-in-shop",4,"ngFor","ngForOf"],[1,"product-list-item"],[1,"product-checkbox"],[3,"ngModel","disabled","ngModelChange","change"],[1,"product-image"],[3,"src","alt","error",4,"ngIf"],["class","no-image",4,"ngIf"],[1,"product-details"],[1,"product-main"],[1,"product-name"],[1,"product-meta"],[1,"product-sku"],["class","product-brand",4,"ngIf"],["class","product-description",4,"ngIf"],[1,"product-badges"],["class","badge category",4,"ngIf"],[1,"badge","status"],["class","badge already-added",4,"ngIf"],["class","product-pricing",4,"ngIf"],["class","product-pricing-placeholder already-in-shop-msg",4,"ngIf"],["class","product-pricing-placeholder",4,"ngIf"],[3,"src","alt","error"],[1,"no-image"],[1,"product-brand"],[1,"product-description"],[1,"badge","category"],[1,"badge","already-added"],[1,"product-pricing"],[1,"pricing-inputs"],["appearance","outline",1,"price-input"],["matInput","","type","number","step","1","min","1","placeholder","0",3,"ngModel","ngModelChange"],["matTextPrefix",""],["appearance","outline",1,"stock-input"],["matInput","","type","number","min","0","placeholder","0",3,"ngModel","ngModelChange"],[1,"availability-toggle",3,"ngModel","ngModelChange"],[1,"product-pricing-placeholder","already-in-shop-msg"],[1,"already-added-indicator"],["mat-stroked-button","","size","small",1,"edit-existing-btn",3,"routerLink"],[1,"product-pricing-placeholder"],[1,"select-hint"],[1,"loading-state"],["diameter","60"],[1,"empty-state"],[1,"empty-icon"],["mat-raised-button","","color","primary","routerLink","/products/master/new"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4)(5,"mat-icon"),t.EFF(6,"dashboard"),t.k0s(),t.EFF(7," Dashboard "),t.k0s(),t.j41(8,"mat-icon",5),t.EFF(9,"chevron_right"),t.k0s(),t.j41(10,"span",4),t.EFF(11,"Products"),t.k0s(),t.j41(12,"mat-icon",5),t.EFF(13,"chevron_right"),t.k0s(),t.j41(14,"span",6),t.EFF(15,"Bulk Assignment"),t.k0s()(),t.j41(16,"h1",7),t.EFF(17," Bulk Product Assignment "),t.k0s(),t.j41(18,"p",8),t.EFF(19," Efficiently assign multiple products to your shops with custom pricing "),t.k0s()(),t.j41(20,"div",9)(21,"mat-icon",10),t.EFF(22,"category"),t.k0s()()(),t.DNE(23,Yi,19,2,"div",11),t.DNE(24,pr,74,20,"div",12),t.k0s()),2&n&&(t.R7$(23),t.Y8G("ngIf",!o.shopId),t.R7$(1),t.Y8G("ngIf",o.selectedShopId))},dependencies:[f.Sq,f.bT,g.me,g.Q0,g.BC,g.VZ,g.vS,b.Wk,T.fg,C.rl,C.nJ,C.JW,F.$z,M.An,A.VO,S.wT,m.RN,m.m2,E.LG,L.So,$t.sG],styles:[".bulk-assignment-container[_ngcontent-%COMP%]{padding:0;background:#f5f5f7;min-height:100vh}.page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:48px 32px;color:#fff;display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 20px #667eea33}.breadcrumb[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px;font-size:14px;opacity:.9}.breadcrumb-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.breadcrumb-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.breadcrumb-separator[_ngcontent-%COMP%]{margin:0 8px;opacity:.6}.breadcrumb-item.active[_ngcontent-%COMP%]{font-weight:500}.page-title[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin:0 0 8px;letter-spacing:-.5px}.page-description[_ngcontent-%COMP%]{font-size:16px;opacity:.95;margin:0}.header-illustration[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:120px;height:120px;background:rgba(255,255,255,.1);border-radius:20px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.illustration-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ffffffe6}.shop-selection-section[_ngcontent-%COMP%]{padding:32px}.modern-card[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 2px 8px #00000014;border:none;overflow:hidden}.shop-selector-card[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.card-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:24px;background:linear-gradient(135deg,#f5f5f7 0%,#fff 100%);border-bottom:1px solid #e0e0e0}.card-icon-wrapper[_ngcontent-%COMP%]{width:56px;height:56px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:12px;display:flex;align-items:center;justify-content:center;margin-right:16px}.card-icon[_ngcontent-%COMP%]{color:#fff;font-size:28px;width:28px;height:28px}.card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0 0 4px;color:#1a1a1a}.card-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:0}.modern-field[_ngcontent-%COMP%]{width:100%}.modern-field[_ngcontent-%COMP%]   .mat-mdc-form-field-flex[_ngcontent-%COMP%]{background:#f8f8fa;border-radius:12px}.shop-option[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.shop-name[_ngcontent-%COMP%]{font-weight:500}.shop-type[_ngcontent-%COMP%]{font-size:12px;color:#888;background:#f0f0f0;padding:4px 8px;border-radius:6px}.products-section[_ngcontent-%COMP%]{padding:32px}.stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px;margin-bottom:32px}.stat-card[_ngcontent-%COMP%]{background:white;border-radius:16px;padding:24px;display:flex;align-items:center;gap:20px;box-shadow:0 2px 8px #0000000f;transition:all .3s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.stat-card.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}.stat-card.already-added[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff9800 0%,#f57c00 100%);color:#fff}.stat-icon[_ngcontent-%COMP%]{width:56px;height:56px;background:rgba(102,126,234,.1);border-radius:12px;display:flex;align-items:center;justify-content:center}.stat-card.selected[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:rgba(255,255,255,.2)}.stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px;color:#667eea}.stat-card.selected[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.stat-value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;line-height:1;margin-bottom:4px}.stat-label[_ngcontent-%COMP%]{font-size:14px;color:#888}.stat-card.selected[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#ffffffe6}.toolbar-card[_ngcontent-%COMP%]{margin-bottom:24px;padding:16px 24px}.toolbar-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.select-all-checkbox[_ngcontent-%COMP%]{font-size:15px}.checkbox-label[_ngcontent-%COMP%]{margin-left:8px}.selection-count[_ngcontent-%COMP%]{color:#888;font-size:14px;margin-left:8px}.toolbar-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.toolbar-button[_ngcontent-%COMP%]{border-radius:8px;padding:8px 20px;font-weight:500}.toolbar-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.primary-action[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}.filter-bar[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr;gap:16px;margin-bottom:32px}.search-field[_ngcontent-%COMP%]{grid-column:span 1}.products-list-container[_ngcontent-%COMP%]{background:white;border-radius:16px;box-shadow:0 2px 8px #0000000f;overflow:hidden}.products-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}.product-list-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:40px 80px 1fr 200px 300px;align-items:center;gap:16px;padding:16px 20px;border-bottom:1px solid #f0f0f2;transition:all .2s ease;min-height:80px}.product-list-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.product-list-item[_ngcontent-%COMP%]:hover{background:#f8f9fa}.product-list-item.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9ff 0%,#fff 100%);border-left:4px solid #667eea}.product-list-item.already-in-shop[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff8e1 0%,#fff 100%);border-left:4px solid #ff9800;opacity:.8}.product-list-item.already-in-shop[_ngcontent-%COMP%]   .product-checkbox[_ngcontent-%COMP%]{opacity:.5}.product-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.product-image[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:8px;overflow:hidden;background:#f5f5f7;display:flex;align-items:center;justify-content:center}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.product-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{color:#bbb;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.product-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.product-details[_ngcontent-%COMP%]{min-width:0;flex:1}.product-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.product-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0;color:#1a1a1a;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-meta[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.product-sku[_ngcontent-%COMP%]{font-size:12px;color:#666;font-family:Courier New,monospace;background:#f0f0f2;padding:2px 6px;border-radius:4px}.product-brand[_ngcontent-%COMP%]{font-size:12px;color:#888}.product-description[_ngcontent-%COMP%]{font-size:13px;color:#666;line-height:1.4;margin-top:4px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.product-badges[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;align-items:flex-start}.badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:10px;font-weight:500;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap}.badge.category[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.badge.status.active[_ngcontent-%COMP%]{background:#e8f5e9;color:#4caf50}.badge.status.inactive[_ngcontent-%COMP%]{background:#ffebee;color:#f44336}.badge.already-added[_ngcontent-%COMP%]{background:#fff3e0;color:#ff9800;display:flex;align-items:center;gap:4px}.badge.already-added[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:12px;width:12px;height:12px}.product-pricing[_ngcontent-%COMP%]{display:flex;align-items:center}.pricing-inputs[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.price-input[_ngcontent-%COMP%], .stock-input[_ngcontent-%COMP%]{width:100px}.price-input[_ngcontent-%COMP%]{width:120px}.availability-toggle[_ngcontent-%COMP%]{margin-left:12px}.product-pricing-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#999;font-style:italic;font-size:13px}.already-in-shop-msg[_ngcontent-%COMP%]{background:#fff3e0;border-radius:8px;padding:12px;color:#f57c00;font-style:normal}.already-added-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;font-weight:500}.already-added-indicator[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9800;font-size:18px;width:18px;height:18px}.edit-existing-btn[_ngcontent-%COMP%]{margin-left:auto;font-size:12px;padding:4px 12px;color:#ff9800;border-color:#ff9800}.edit-existing-btn[_ngcontent-%COMP%]:hover{background:rgba(255,152,0,.1)}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;text-align:center}.loading-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:24px 0 8px;font-size:20px;color:#333}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888;margin:0}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;text-align:center;background:white;border-radius:16px;box-shadow:0 2px 8px #0000000f}.empty-icon[_ngcontent-%COMP%]{width:120px;height:120px;background:linear-gradient(135deg,#f5f5f7 0%,#e8e8ea 100%);border-radius:24px;display:flex;align-items:center;justify-content:center;margin-bottom:24px}.empty-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;margin:0 0 8px;color:#333}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#888;margin:0 0 24px}@media (max-width: 1024px){.product-list-item[_ngcontent-%COMP%]{grid-template-columns:40px 60px 1fr 150px 250px;gap:12px}.product-image[_ngcontent-%COMP%]{width:60px;height:60px}.pricing-inputs[_ngcontent-%COMP%]{gap:8px}.price-input[_ngcontent-%COMP%], .stock-input[_ngcontent-%COMP%]{width:80px}.stats-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;padding:32px 20px}.header-illustration[_ngcontent-%COMP%]{margin-top:24px}.filter-bar[_ngcontent-%COMP%]{grid-template-columns:1fr}.toolbar-content[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:stretch}.toolbar-actions[_ngcontent-%COMP%]{justify-content:stretch}.toolbar-button[_ngcontent-%COMP%]{flex:1}.product-list-item[_ngcontent-%COMP%]{grid-template-columns:30px 50px 1fr;gap:8px;padding:12px 16px;min-height:70px}.product-image[_ngcontent-%COMP%]{width:50px;height:50px}.product-badges[_ngcontent-%COMP%], .product-pricing[_ngcontent-%COMP%], .product-pricing-placeholder[_ngcontent-%COMP%]{display:none}.product-name[_ngcontent-%COMP%]{font-size:14px}.product-description[_ngcontent-%COMP%]{-webkit-line-clamp:1}.products-section[_ngcontent-%COMP%]{padding:20px 16px}}@media (max-width: 480px){.product-list-item[_ngcontent-%COMP%]{grid-template-columns:24px 40px 1fr;gap:6px;padding:10px 12px;min-height:60px}.product-image[_ngcontent-%COMP%]{width:40px;height:40px}.product-name[_ngcontent-%COMP%]{font-size:13px}.product-meta[_ngcontent-%COMP%]{flex-direction:column;gap:2px;align-items:flex-start}.product-sku[_ngcontent-%COMP%], .product-brand[_ngcontent-%COMP%]{font-size:11px}}"]})}}return i})();function gr(i,r){if(1&i&&(t.j41(0,"p",28),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(1),t.SpI(" Select and manage products for ",e.userShop.name," ")}}function ur(i,r){if(1&i&&(t.j41(0,"div",29)(1,"div",30)(2,"span",31),t.EFF(3),t.k0s(),t.j41(4,"span",32),t.EFF(5,"Total"),t.k0s()(),t.j41(6,"div",30)(7,"span",31),t.EFF(8),t.k0s(),t.j41(9,"span",32),t.EFF(10,"In Shop"),t.k0s()()()),2&i){const e=t.XpG();t.R7$(3),t.JRh(e.getTotalProducts()),t.R7$(5),t.JRh(e.getActiveProducts())}}function mr(i,r){if(1&i&&(t.j41(0,"mat-option",33),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(1),t.SpI(" ",e.name," ")}}function hr(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",34)(1,"div",35)(2,"mat-checkbox",36),t.bIt("change",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.toggleAllSelection(o.checked))}),t.EFF(3),t.k0s()(),t.j41(4,"div",37)(5,"button",38),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.bulkAddToShop())}),t.j41(6,"mat-icon"),t.EFF(7,"add_shopping_cart"),t.k0s(),t.EFF(8," Add Selected to Shop "),t.k0s(),t.j41(9,"button",39),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.bulkUpdatePrices())}),t.j41(10,"mat-icon"),t.EFF(11,"attach_money"),t.k0s(),t.EFF(12," Update Prices "),t.k0s(),t.j41(13,"button",8),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.clearSelection())}),t.j41(14,"mat-icon"),t.EFF(15,"clear"),t.k0s(),t.EFF(16," Clear Selection "),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(2),t.Y8G("checked",e.allFilteredSelected)("indeterminate",e.someFilteredSelected&&!e.allFilteredSelected),t.R7$(1),t.SpI(" ",e.getSelectedCount()," selected "),t.R7$(2),t.Y8G("disabled",!e.canBulkAdd()),t.R7$(4),t.Y8G("disabled",!e.canBulkUpdate())}}function fr(i,r){if(1&i){const e=t.RV6();t.j41(0,"img",62),t.bIt("error",function(o){t.eBV(e);const s=t.XpG(3);return t.Njj(s.onImageError(o))}),t.k0s()}if(2&i){const e=t.XpG().$implicit,n=t.XpG(2);t.Y8G("src",n.getImageUrl(e.masterProduct.primaryImageUrl),t.B4B)("alt",e.masterProduct.name)}}function _r(i,r){1&i&&(t.j41(0,"div",63)(1,"mat-icon"),t.EFF(2,"image_not_supported"),t.k0s()())}function Cr(i,r){if(1&i&&(t.j41(0,"span",64),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(1),t.SpI("\u20b9",(null==e.shopProduct?null:e.shopProduct.price)||0,"")}}function xr(i,r){1&i&&(t.j41(0,"span",65),t.EFF(1,"Set Price"),t.k0s())}function br(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",68),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2).$implicit,s=t.XpG(2);return t.Njj(s.startEdit(o))}),t.j41(1,"mat-icon"),t.EFF(2,"edit"),t.k0s()()}}function Pr(i,r){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"button",69),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2).$implicit,s=t.XpG(2);return t.Njj(s.saveChanges(o))}),t.j41(2,"mat-icon"),t.EFF(3,"save"),t.k0s()(),t.j41(4,"button",70),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2).$implicit,s=t.XpG(2);return t.Njj(s.cancelEdit(o))}),t.j41(5,"mat-icon"),t.EFF(6,"cancel"),t.k0s()(),t.bVm()}if(2&i){const e=t.XpG(2).$implicit,n=t.XpG(2);t.R7$(1),t.Y8G("disabled",!n.isValidEdit(e))}}function vr(i,r){if(1&i){const e=t.RV6();t.qex(0),t.DNE(1,br,3,0,"button",66),t.DNE(2,Pr,7,1,"ng-container",61),t.j41(3,"button",67),t.bIt("click",function(){t.eBV(e);const o=t.XpG().$implicit,s=t.XpG(2);return t.Njj(s.removeFromShop(o))}),t.j41(4,"mat-icon"),t.EFF(5,"remove_shopping_cart"),t.k0s()(),t.bVm()}if(2&i){const e=t.XpG().$implicit;t.R7$(1),t.Y8G("ngIf",!e.isEditing),t.R7$(1),t.Y8G("ngIf",e.isEditing)}}function Fr(i,r){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"button",71),t.bIt("click",function(){t.eBV(e);const o=t.XpG().$implicit,s=t.XpG(2);return t.Njj(s.addToShop(o))}),t.j41(2,"mat-icon"),t.EFF(3,"add_shopping_cart"),t.k0s()(),t.bVm()}if(2&i){const e=t.XpG().$implicit,n=t.XpG(2);t.R7$(1),t.Y8G("disabled",!n.isValidAdd(e))}}function kr(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",43)(1,"div",44)(2,"mat-checkbox",45),t.bIt("ngModelChange",function(o){const a=t.eBV(e).$implicit;return t.Njj(a.isSelected=o)}),t.k0s()(),t.j41(3,"div",46),t.DNE(4,fr,1,2,"img",47),t.DNE(5,_r,3,0,"div",48),t.k0s(),t.j41(6,"div",49)(7,"div",50)(8,"h3",51),t.EFF(9),t.k0s(),t.j41(10,"div",52),t.EFF(11),t.k0s(),t.j41(12,"div",53),t.EFF(13),t.k0s()(),t.j41(14,"div",54),t.DNE(15,Cr,2,1,"span",55),t.DNE(16,xr,2,0,"span",56),t.k0s(),t.j41(17,"div",57)(18,"span",58),t.EFF(19),t.k0s(),t.j41(20,"span",59),t.EFF(21),t.k0s()()(),t.j41(22,"div",60),t.DNE(23,vr,6,2,"ng-container",61),t.DNE(24,Fr,4,1,"ng-container",61),t.k0s()()}if(2&i){const e=r.$implicit;t.AVh("in-shop",e.isInShop)("selected",e.isSelected),t.R7$(2),t.Y8G("ngModel",e.isSelected),t.R7$(2),t.Y8G("ngIf",e.masterProduct.primaryImageUrl),t.R7$(1),t.Y8G("ngIf",!e.masterProduct.primaryImageUrl),t.R7$(4),t.JRh(e.masterProduct.name),t.R7$(2),t.Lme("",e.masterProduct.sku," | ",e.masterProduct.brand,""),t.R7$(2),t.JRh(null==e.masterProduct.category?null:e.masterProduct.category.name),t.R7$(2),t.Y8G("ngIf",e.isInShop),t.R7$(1),t.Y8G("ngIf",!e.isInShop),t.R7$(2),t.Y8G("ngClass",e.isInShop?"in-shop":"available"),t.R7$(1),t.SpI(" ",e.isInShop?"In Shop":"Available"," "),t.R7$(2),t.JRh(e.masterProduct.status),t.R7$(2),t.Y8G("ngIf",e.isInShop),t.R7$(1),t.Y8G("ngIf",!e.isInShop)}}function Mr(i,r){if(1&i&&(t.j41(0,"mat-card",40)(1,"mat-card-content")(2,"div",41),t.DNE(3,kr,25,18,"div",42),t.k0s()()()),2&i){const e=t.XpG();t.R7$(3),t.Y8G("ngForOf",e.filteredProducts)}}function yr(i,r){1&i&&(t.j41(0,"div",72),t.nrm(1,"mat-spinner",73),t.j41(2,"p"),t.EFF(3,"Loading products..."),t.k0s()())}function Or(i,r){1&i&&(t.j41(0,"p"),t.EFF(1," Try adjusting your search or filters "),t.k0s())}function Er(i,r){1&i&&(t.j41(0,"p"),t.EFF(1," No master products are available yet "),t.k0s())}function Ir(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",77),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.clearFilters())}),t.j41(1,"mat-icon"),t.EFF(2,"clear"),t.k0s(),t.EFF(3," Clear Filters "),t.k0s()}}function Sr(i,r){if(1&i&&(t.j41(0,"div",74)(1,"mat-icon",75),t.EFF(2,"inventory"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No Products Found"),t.k0s(),t.DNE(5,Or,2,0,"p",61),t.DNE(6,Er,2,0,"p",61),t.DNE(7,Ir,4,0,"button",76),t.k0s()),2&i){const e=t.XpG();t.R7$(5),t.Y8G("ngIf",e.searchQuery||e.statusFilter||e.categoryFilter),t.R7$(1),t.Y8G("ngIf",!e.searchQuery&&!e.statusFilter&&!e.categoryFilter),t.R7$(1),t.Y8G("ngIf",e.searchQuery||e.statusFilter||e.categoryFilter)}}const wr=function(){return["/shops"]},jr=function(){return["/products/my-shop"]};let Dr=(()=>{class i{constructor(e,n,o,s,a,c){this.fb=e,this.productService=n,this.shopProductService=o,this.shopService=s,this.authService=a,this.router=c,this.products=[],this.filteredProducts=[],this.categories=[],this.loading=!0,this.searchQuery="",this.statusFilter="",this.categoryFilter=""}ngOnInit(){this.loadUserShop(),this.loadMasterProducts(),this.loadCategories()}loadUserShop(){this.shopService.getShops({page:0,size:1}).subscribe({next:e=>{e.content&&e.content.length>0?(this.userShop=e.content[0],this.loadShopProducts()):l().fire({title:"No Shop Found",text:"You need to have a shop to manage products",icon:"warning",confirmButtonText:"OK"})},error:e=>{console.error("Error loading user shop:",e),l().fire({title:"Error!",text:"Could not load shop information",icon:"error",confirmButtonText:"OK"})}})}loadMasterProducts(){this.productService.getMasterProducts({status:R.S.ACTIVE}).subscribe({next:e=>{this.products=(e.content||[]).map(o=>({masterProduct:o,isInShop:!1,isEditing:!1,isSelected:!1,tempPrice:0,tempStock:0,tempAvailable:!0})),this.applyFilters(),this.loading=!1},error:e=>{console.error("Error loading master products:",e),this.loading=!1}})}loadShopProducts(){this.userShop&&this.shopProductService.getShopProducts(this.userShop.id).subscribe({next:e=>{const n=e.content||[];this.products.forEach(o=>{const s=n.find(a=>a.masterProduct?.id===o.masterProduct.id);s&&(o.shopProduct=s,o.isInShop=!0,o.tempPrice=s.price,o.tempStock=s.stockQuantity,o.tempAvailable=s.isAvailable)}),this.applyFilters()},error:e=>{console.error("Error loading shop products:",e)}})}loadCategories(){this.productService.getMasterProducts().subscribe({next:e=>{const n=e.content||[],o=new Set;n.forEach(s=>{s.category&&o.add(JSON.stringify(s.category))}),this.categories=Array.from(o).map(s=>JSON.parse(s))}})}onSearchChange(){this.applyFilters()}applyFilters(){let e=[...this.products];if(this.searchQuery.trim()){const n=this.searchQuery.toLowerCase();e=e.filter(o=>o.masterProduct.name.toLowerCase().includes(n)||o.masterProduct.sku.toLowerCase().includes(n)||o.masterProduct.brand&&o.masterProduct.brand.toLowerCase().includes(n))}if(this.statusFilter)switch(this.statusFilter){case"in-shop":e=e.filter(n=>n.isInShop);break;case"not-in-shop":e=e.filter(n=>!n.isInShop);break;case"active":e=e.filter(n=>n.masterProduct.status===R.S.ACTIVE);break;case"low-stock":e=e.filter(n=>n.isInShop&&n.shopProduct&&n.shopProduct.stockQuantity<5)}this.categoryFilter&&(e=e.filter(n=>n.masterProduct.category?.id===+this.categoryFilter)),this.filteredProducts=e}clearFilters(){this.searchQuery="",this.statusFilter="",this.categoryFilter="",this.applyFilters()}get allFilteredSelected(){return this.filteredProducts.length>0&&this.filteredProducts.every(e=>e.isSelected)}get someFilteredSelected(){return this.filteredProducts.some(e=>e.isSelected)}toggleAllSelection(e){this.filteredProducts.forEach(n=>{n.isSelected=e,e&&!n.isInShop&&!n.tempPrice&&(n.tempPrice=0)})}getSelectedCount(){return this.products.filter(e=>e.isSelected).length}clearSelection(){this.products.forEach(e=>{e.isSelected=!1})}canBulkAdd(){const e=this.products.filter(n=>n.isSelected&&!n.isInShop);return e.length>0&&e.every(n=>n.tempPrice&&n.tempPrice>0)}canBulkUpdate(){return this.products.filter(n=>n.isSelected&&n.isInShop).length>0}getTotalProducts(){return this.products.filter(e=>e.isInShop).length}getActiveProducts(){return this.products.filter(e=>e.isInShop&&e.shopProduct&&e.shopProduct.status===R.Q.ACTIVE).length}goBack(){window.history.back()}startEdit(e){e.isEditing=!0,e.shopProduct&&(e.tempPrice=e.shopProduct.price,e.tempStock=e.shopProduct.stockQuantity,e.tempAvailable=e.shopProduct.isAvailable)}cancelEdit(e){e.isEditing=!1}isValidEdit(e){return!!(e.tempPrice&&e.tempPrice>0)}isValidAdd(e){return!!(e.tempPrice&&e.tempPrice>0)}saveChanges(e){this.userShop&&e.shopProduct&&this.isValidEdit(e)&&this.shopProductService.updateShopProduct(this.userShop.id,e.shopProduct.id,{masterProductId:e.masterProduct.id,price:e.tempPrice,stockQuantity:e.tempStock||0,isAvailable:!1!==e.tempAvailable,status:e.shopProduct.status,trackInventory:e.shopProduct.trackInventory,isFeatured:e.shopProduct.isFeatured}).subscribe({next:o=>{e.shopProduct=o,e.isEditing=!1,l().fire({title:"Updated!",text:"Product updated successfully",icon:"success",timer:2e3,showConfirmButton:!1})},error:o=>{console.error("Error updating product:",o),l().fire({title:"Error!",text:"Failed to update product",icon:"error",confirmButtonText:"OK"})}})}addToShop(e){this.userShop&&this.isValidAdd(e)&&this.shopProductService.addProductToShop(this.userShop.id,{masterProductId:e.masterProduct.id,price:e.tempPrice,stockQuantity:e.tempStock||0,isAvailable:!1!==e.tempAvailable,status:R.Q.ACTIVE,trackInventory:!0,isFeatured:!1}).subscribe({next:o=>{e.shopProduct=o,e.isInShop=!0,e.isSelected=!1,l().fire({title:"Added!",text:"Product added to your shop successfully",icon:"success",timer:2e3,showConfirmButton:!1})},error:o=>{console.error("Error adding product:",o),l().fire({title:"Error!",text:o.error?.message||"Failed to add product to shop",icon:"error",confirmButtonText:"OK"})}})}removeFromShop(e){!this.userShop||!e.shopProduct||l().fire({title:"Remove Product?",text:`Are you sure you want to remove "${e.masterProduct.name}" from your shop?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, remove it!",cancelButtonText:"Cancel"}).then(n=>{n.isConfirmed&&this.userShop&&e.shopProduct&&this.shopProductService.removeProductFromShop(this.userShop.id,e.shopProduct.id).subscribe({next:()=>{e.shopProduct=void 0,e.isInShop=!1,e.isSelected=!1,e.tempPrice=0,e.tempStock=0,l().fire({title:"Removed!",text:"Product removed from your shop",icon:"success",timer:2e3,showConfirmButton:!1})},error:o=>{console.error("Error removing product:",o),l().fire({title:"Error!",text:"Failed to remove product from shop",icon:"error",confirmButtonText:"OK"})}})})}bulkAddToShop(){if(!this.userShop||!this.canBulkAdd())return;const o=this.products.filter(s=>s.isSelected&&!s.isInShop).map(s=>({masterProductId:s.masterProduct.id,price:s.tempPrice,stockQuantity:s.tempStock||0,isAvailable:!1!==s.tempAvailable,status:R.Q.ACTIVE,trackInventory:!0,isFeatured:!1})).map(s=>this.shopProductService.addProductToShop(this.userShop.id,s).toPromise());Promise.allSettled(o).then(s=>{const a=s.filter(d=>"fulfilled"===d.status).length,c=s.filter(d=>"rejected"===d.status).length;0===c?(l().fire({title:"Success!",text:`Successfully added ${a} products to your shop!`,icon:"success",confirmButtonText:"OK"}),this.loadShopProducts(),this.clearSelection()):(l().fire({title:"Partial Success",text:`Added ${a} products successfully, ${c} failed.`,icon:"warning",confirmButtonText:"OK"}),this.loadShopProducts(),this.clearSelection())})}bulkUpdatePrices(){l().fire({title:"Bulk Update Prices",input:"number",inputLabel:"New price for all selected products",inputPlaceholder:"0.00",inputAttributes:{min:"0.01",step:"0.01"},showCancelButton:!0,confirmButtonText:"Update Prices",cancelButtonText:"Cancel",inputValidator:e=>!e||parseFloat(e)<=0?"Please enter a valid price greater than 0":null}).then(e=>{if(e.isConfirmed&&e.value){const n=parseFloat(e.value),o=this.products.filter(s=>s.isSelected&&s.isInShop);o.forEach(s=>{s.tempPrice=n}),l().fire({title:"Prices Updated!",text:`Set price of \u20b9${n.toFixed(0)} for ${o.length} products. Click "Save Changes" on each product to apply.`,icon:"info",confirmButtonText:"OK"})}})}getShopProductStatusColor(e){switch(e){case"ACTIVE":return"primary";case"INACTIVE":default:return"accent";case"OUT_OF_STOCK":case"DISCONTINUED":return"warn"}}getImageUrl(e){return(0,tt.V)(e)}onImageError(e){e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik02MCA2MEgxNDBWMTQwSDYwVjYwWiIgZmlsbD0iI0UwRTBFMCIvPgo8Y2lyY2xlIGN4PSI4NSIgY3k9Ijg1IiByPSIxMCIgZmlsbD0iI0QwRDBEMCIvPgo8cGF0aCBkPSJNNjAgMTIwTDkwIDkwTDExMCAxMTBMMTQwIDgwVjE0MEg2MFYxMjBaIiBmaWxsPSIjRDBEMEQwIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTcwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjOTk5IiBmb250LXNpemU9IjEyIiBmb250LWZhbWlseT0iQXJpYWwiPk5vIEltYWdlPC90ZXh0Pgo8L3N2Zz4K"}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(g.ok),t.rXU(Y.b),t.rXU(gt.Z),t.rXU(ut.s),t.rXU(Tt.u),t.rXU(b.Ix))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-shop-owner-products"]],decls:57,vars:14,consts:[[1,"shop-owner-container"],[1,"list-header"],[1,"header-content"],[1,"page-title"],[1,"title-icon"],["class","page-subtitle",4,"ngIf"],[1,"header-actions"],[1,"nav-buttons"],["mat-stroked-button","",3,"click"],["mat-stroked-button","",3,"routerLink"],["class","header-stats",4,"ngIf"],[1,"filter-card"],[1,"filter-section"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by name, SKU, or brand...",3,"ngModel","ngModelChange","input"],["matSuffix",""],["appearance","outline",1,"filter-field"],[3,"value","valueChange","selectionChange"],["value",""],["value","in-shop"],["value","not-in-shop"],["value","active"],["value","low-stock"],[3,"value",4,"ngFor","ngForOf"],["class","bulk-actions",4,"ngIf"],["class","products-card",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"page-subtitle"],[1,"header-stats"],[1,"stat-item"],[1,"stat-number"],[1,"stat-label"],[3,"value"],[1,"bulk-actions"],[1,"selection-info"],[3,"checked","indeterminate","change"],[1,"bulk-buttons"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click"],[1,"products-card"],[1,"products-list"],["class","product-list-item",3,"in-shop","selected",4,"ngFor","ngForOf"],[1,"product-list-item"],[1,"product-checkbox"],[3,"ngModel","ngModelChange"],[1,"product-image-container"],["class","product-image",3,"src","alt","error",4,"ngIf"],["class","product-image no-image",4,"ngIf"],[1,"product-content"],[1,"product-main-info"],[1,"product-title"],[1,"product-sku"],[1,"product-category"],[1,"product-price-info"],["class","price",4,"ngIf"],["class","price-placeholder",4,"ngIf"],[1,"product-status-info"],[1,"status-badge",3,"ngClass"],[1,"master-status"],[1,"product-actions"],[4,"ngIf"],[1,"product-image",3,"src","alt","error"],[1,"product-image","no-image"],[1,"price"],[1,"price-placeholder"],["mat-icon-button","","matTooltip","Edit Price & Stock","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Remove from Shop",3,"click"],["mat-icon-button","","matTooltip","Edit Price & Stock","color","primary",3,"click"],["mat-icon-button","","matTooltip","Save Changes","color","primary",3,"disabled","click"],["mat-icon-button","","matTooltip","Cancel",3,"click"],["mat-icon-button","","color","primary","matTooltip","Add to My Shop",3,"disabled","click"],[1,"loading-container"],["diameter","50"],[1,"empty-state"],[1,"empty-icon"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3)(4,"mat-icon",4),t.EFF(5,"add_shopping_cart"),t.k0s(),t.EFF(6," Select Products "),t.k0s(),t.DNE(7,gr,2,1,"p",5),t.k0s(),t.j41(8,"div",6)(9,"div",7)(10,"button",8),t.bIt("click",function(){return o.goBack()}),t.j41(11,"mat-icon"),t.EFF(12,"arrow_back"),t.k0s(),t.EFF(13," Back "),t.k0s(),t.j41(14,"button",9)(15,"mat-icon"),t.EFF(16,"store"),t.k0s(),t.EFF(17," All Shops "),t.k0s(),t.j41(18,"button",9)(19,"mat-icon"),t.EFF(20,"my_location"),t.k0s(),t.EFF(21," My Shop Products "),t.k0s()(),t.DNE(22,ur,11,2,"div",10),t.k0s()(),t.j41(23,"mat-card",11)(24,"mat-card-content")(25,"div",12)(26,"mat-form-field",13)(27,"mat-label"),t.EFF(28,"Search Products"),t.k0s(),t.j41(29,"input",14),t.bIt("ngModelChange",function(a){return o.searchQuery=a})("input",function(){return o.onSearchChange()}),t.k0s(),t.j41(30,"mat-icon",15),t.EFF(31,"search"),t.k0s()(),t.j41(32,"mat-form-field",16)(33,"mat-label"),t.EFF(34,"Filter by Status"),t.k0s(),t.j41(35,"mat-select",17),t.bIt("valueChange",function(a){return o.statusFilter=a})("selectionChange",function(){return o.applyFilters()}),t.j41(36,"mat-option",18),t.EFF(37,"All Products"),t.k0s(),t.j41(38,"mat-option",19),t.EFF(39,"In My Shop"),t.k0s(),t.j41(40,"mat-option",20),t.EFF(41,"Not in My Shop"),t.k0s(),t.j41(42,"mat-option",21),t.EFF(43,"Active Only"),t.k0s(),t.j41(44,"mat-option",22),t.EFF(45,"Low Stock"),t.k0s()()(),t.j41(46,"mat-form-field",16)(47,"mat-label"),t.EFF(48,"Category"),t.k0s(),t.j41(49,"mat-select",17),t.bIt("valueChange",function(a){return o.categoryFilter=a})("selectionChange",function(){return o.applyFilters()}),t.j41(50,"mat-option",18),t.EFF(51,"All Categories"),t.k0s(),t.DNE(52,mr,2,2,"mat-option",23),t.k0s()()(),t.DNE(53,hr,17,5,"div",24),t.k0s()(),t.DNE(54,Mr,4,1,"mat-card",25),t.DNE(55,yr,4,0,"div",26),t.DNE(56,Sr,8,3,"div",27),t.k0s()),2&n&&(t.R7$(7),t.Y8G("ngIf",o.userShop),t.R7$(7),t.Y8G("routerLink",t.lJ4(12,wr)),t.R7$(4),t.Y8G("routerLink",t.lJ4(13,jr)),t.R7$(4),t.Y8G("ngIf",o.userShop),t.R7$(7),t.Y8G("ngModel",o.searchQuery),t.R7$(6),t.Y8G("value",o.statusFilter),t.R7$(14),t.Y8G("value",o.categoryFilter),t.R7$(3),t.Y8G("ngForOf",o.categories),t.R7$(1),t.Y8G("ngIf",o.getSelectedCount()>0),t.R7$(1),t.Y8G("ngIf",!o.loading),t.R7$(1),t.Y8G("ngIf",o.loading),t.R7$(1),t.Y8G("ngIf",!o.loading&&0===o.filteredProducts.length))},dependencies:[f.YU,f.Sq,f.bT,g.me,g.BC,g.vS,b.Wk,T.fg,C.rl,C.nJ,C.yw,F.$z,F.iY,M.An,A.VO,S.wT,m.RN,m.m2,E.LG,L.So,B.oV],styles:[".shop-owner-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto;min-height:calc(100vh - 100px)}.list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:24px;padding:24px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:12px;color:#fff}.header-content[_ngcontent-%COMP%]{flex:1}.header-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;align-items:flex-end}.nav-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:8px 16px;background:rgba(255,255,255,.1);border-radius:8px;min-width:60px}.stat-number[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#fff;line-height:1}.stat-label[_ngcontent-%COMP%]{font-size:12px;color:#fffc;margin-top:2px}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 0 8px;font-size:28px;font-weight:600}.title-icon[_ngcontent-%COMP%]{margin-right:12px;font-size:32px;width:32px;height:32px}.page-subtitle[_ngcontent-%COMP%]{margin:0;opacity:.9;font-size:16px}.header-stats[_ngcontent-%COMP%]{display:flex;gap:16px}.stat-card[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:8px;min-width:120px}.stat-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{text-align:center;padding:16px}.stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#fff;line-height:1}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:#fffc;margin-top:4px}.filter-card[_ngcontent-%COMP%]{margin-bottom:24px;border-radius:12px}.filter-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr;gap:16px;margin-bottom:20px}.search-field[_ngcontent-%COMP%]{grid-column:span 1}.bulk-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background:#f8f9fa;border-radius:8px;margin-top:16px}.bulk-buttons[_ngcontent-%COMP%]{display:flex;gap:12px}.products-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 12px #0000001a}.products-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;padding:0}.product-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px 20px;border-bottom:1px solid #e5e7eb;background:white;transition:background-color .2s ease;min-height:90px}.product-list-item[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.product-list-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.product-list-item.in-shop[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0fdf4 0%,#ecfdf5 100%)}.product-list-item.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef3c7 0%,#fef3c7 100%)}.product-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0;margin-right:16px}.product-image-container[_ngcontent-%COMP%]{flex-shrink:0;width:70px;height:70px;margin-right:16px}.product-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:8px;border:1px solid #e5e7eb}.product-image.no-image[_ngcontent-%COMP%]{background:#f5f5f5;display:flex;align-items:center;justify-content:center;color:#999}.product-image.no-image[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.product-content[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:24px}.product-main-info[_ngcontent-%COMP%]{flex:1;min-width:200px}.product-title[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;font-weight:600;color:#1f2937;line-height:1.2}.product-sku[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;font-family:Courier New,monospace;margin-bottom:2px}.product-category[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af}.product-price-info[_ngcontent-%COMP%]{flex-shrink:0;min-width:100px}.price[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#059669}.price-placeholder[_ngcontent-%COMP%]{font-size:14px;color:#9ca3af;font-style:italic}.product-status-info[_ngcontent-%COMP%]{flex-shrink:0;min-width:100px;display:flex;flex-direction:column;gap:4px}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:500;text-align:center}.status-badge.in-shop[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534}.status-badge.available[_ngcontent-%COMP%]{background-color:#fef3c7;color:#d97706}.master-status[_ngcontent-%COMP%]{font-size:11px;color:#6b7280}.product-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;flex-shrink:0}.current-settings[_ngcontent-%COMP%], .shop-settings[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:16px;margin-top:12px}.setting-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.setting-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.setting-label[_ngcontent-%COMP%]{font-weight:500;color:#666}.setting-value[_ngcontent-%COMP%]{font-weight:600}.setting-value.price[_ngcontent-%COMP%]{color:#5e35b1;font-size:1.1rem;font-weight:600}.setting-value.low-stock[_ngcontent-%COMP%]{color:#f44336}.edit-grid[_ngcontent-%COMP%], .add-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.product-actions[_ngcontent-%COMP%]{padding:12px 16px;background:#fafafa;display:flex;gap:8px;flex-wrap:wrap}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:60px;color:#666}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px;color:#666}.empty-icon[_ngcontent-%COMP%]{font-size:72px;width:72px;height:72px;color:#ddd;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:24px}@media (max-width: 768px){.shop-owner-container[_ngcontent-%COMP%]{padding:16px}.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:stretch}.header-stats[_ngcontent-%COMP%]{justify-content:center}.filter-section[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.bulk-actions[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:stretch}.bulk-buttons[_ngcontent-%COMP%]{justify-content:stretch}.bulk-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}.products-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.edit-grid[_ngcontent-%COMP%], .add-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.product-actions[_ngcontent-%COMP%]{flex-direction:column}.product-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-content:center}}"]})}}return i})(),Rr=(()=>{class i{constructor(e){this.http=e,this.apiUrl=`${Pe.c.apiUrl}/products/bulk-import`}importMasterProducts(e){const n=new FormData;return n.append("file",e),this.http.post(`${this.apiUrl}/master`,n)}importShopProducts(e){const n=new FormData;return n.append("file",e),this.http.post(`${this.apiUrl}/shop-products`,n)}getTemplateInfo(e="master"){return this.http.get(`${this.apiUrl}/template-info?type=${e}`)}downloadSampleCSV(){const e=this.generateSampleCSV(),n=new Blob([e],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),s=URL.createObjectURL(n);o.setAttribute("href",s),o.setAttribute("download","product_import_template.csv"),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}generateSampleCSV(){const o=[];return o.push(["name","nameTamil","description","category","brand","sku","searchQuery","downloadLink","baseUnit","baseWeight","originalPrice","sellingPrice","discountPct","costPrice","stockQuantity","minStockLevel","maxStockLevel","trackInventory","status","isFeatured","isAvailable","reserved","tags","specifications","imagePath","imageFolder"].join(",")),[["Fresh Tomatoes","\u0ba4\u0b95\u0bcd\u0b95\u0bbe\u0bb3\u0bbf","Organic tomatoes from local farms","Vegetables","FreshFarm","VEG-TOM-001","","","kg","1","100","90","10","80","100","10","500","TRUE","ACTIVE","FALSE","TRUE","","organic,fresh,local","Rich in Vitamin C","tomato.jpg","vegetables"],["Basmati Rice 1kg","\u0baa\u0bbe\u0b9a\u0bc1\u0bae\u0ba4\u0bbf \u0b85\u0bb0\u0bbf\u0b9a\u0bbf","Premium aged basmati rice","Groceries","IndiaGate","GRO-RICE-001","","","kg","1","200","180","10","160","200","20","1000","TRUE","ACTIVE","TRUE","TRUE","","premium,aged,basmati","Aged for 2 years","rice.jpg","groceries"],["Amul Butter 500g","\u0b85\u0bae\u0bc1\u0bb2\u0bcd \u0bb5\u0bc6\u0ba3\u0bcd\u0ba3\u0bc6\u0baf\u0bcd","Fresh dairy butter","Dairy Products","Amul","DAI-BUT-001","","","gram","500","280","260","7","240","50","10","200","TRUE","ACTIVE","FALSE","TRUE","","dairy,butter,fresh","Keep refrigerated","butter.jpg","dairy"]].forEach(s=>{const a=s.map(c=>c.includes(",")||c.includes('"')?`"${c.replace(/"/g,'""')}"`:c);o.push(a.join(","))}),o.join("\n")}validateExcelFile(e){const s=e.name.substring(e.name.lastIndexOf(".")).toLowerCase();return[".xlsx",".xls"].includes(s)?e.size>10485760?{valid:!1,error:"File size exceeds 10MB limit"}:e.name&&""!==e.name.trim()?{valid:!0}:{valid:!1,error:"Invalid file name"}:{valid:!1,error:"Invalid file format. Please upload an Excel file (.xlsx or .xls)"}}static{this.\u0275fac=function(n){return new(n||i)(t.KVO(nt.Qq))}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Tr=p(1259);function Nr(i,r){1&i&&(t.j41(0,"span"),t.EFF(1,"Bulk Import Master Products"),t.k0s())}function Br(i,r){1&i&&(t.j41(0,"span"),t.EFF(1,"Bulk Import Shop Products"),t.k0s())}function Ar(i,r){1&i&&(t.j41(0,"span"),t.EFF(1,"Import products to master catalog with images"),t.k0s())}function Gr(i,r){1&i&&(t.j41(0,"span"),t.EFF(1,"Import products to your shop"),t.k0s())}function $r(i,r){1&i&&(t.j41(0,"div",5)(1,"div",31),t.EFF(2,"1"),t.k0s(),t.j41(3,"div",7)(4,"h4")(5,"mat-icon"),t.EFF(6,"folder"),t.k0s(),t.EFF(7," Prepare Product Images"),t.k0s(),t.j41(8,"p"),t.EFF(9,"Upload your product images to the server's product images folder. Organize them in subfolders (e.g., vegetables, groceries, dairy)."),t.k0s(),t.j41(10,"div",9)(11,"mat-icon"),t.EFF(12,"folder_open"),t.k0s(),t.j41(13,"span"),t.EFF(14,"Contact system administrator for image upload access"),t.k0s()()()())}function Lr(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",32)(1,"input",33,34),t.bIt("change",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onFileSelected(o))}),t.k0s(),t.j41(3,"div",35),t.bIt("click",function(){t.eBV(e);const o=t.sdS(2);return t.Njj(o.click())}),t.j41(4,"mat-icon"),t.EFF(5,"upload_file"),t.k0s(),t.j41(6,"p"),t.EFF(7,"Click to select Excel file (.xlsx)"),t.k0s(),t.j41(8,"p",36),t.EFF(9,"or drag and drop here"),t.k0s()()()}}function Ur(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",37)(1,"mat-icon",38),t.EFF(2,"description"),t.k0s(),t.j41(3,"div",39)(4,"h4"),t.EFF(5),t.k0s(),t.j41(6,"p"),t.EFF(7),t.k0s()(),t.j41(8,"button",40),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.removeFile())}),t.j41(9,"mat-icon"),t.EFF(10,"close"),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(5),t.JRh(e.selectedFile.name),t.R7$(2),t.SpI("",(e.selectedFile.size/1024).toFixed(2)," KB")}}function zr(i,r){1&i&&(t.j41(0,"div",41),t.nrm(1,"mat-progress-bar",42),t.j41(2,"p"),t.EFF(3,"Uploading and processing... Please wait."),t.k0s()())}function Yr(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",43)(1,"button",44),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.uploadFile())}),t.j41(2,"mat-icon"),t.EFF(3,"cloud_upload"),t.k0s(),t.EFF(4," Upload & Import "),t.k0s(),t.j41(5,"button",45),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.removeFile())}),t.j41(6,"mat-icon"),t.EFF(7,"cancel"),t.k0s(),t.EFF(8," Cancel "),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(1),t.Y8G("disabled",e.isUploading)}}function Vr(i,r){1&i&&(t.j41(0,"th",63),t.EFF(1,"Row"),t.k0s())}function Xr(i,r){if(1&i&&(t.j41(0,"td",64),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.R7$(1),t.JRh(e.rowNumber)}}function Kr(i,r){1&i&&(t.j41(0,"th",63),t.EFF(1,"Product Name"),t.k0s())}function Wr(i,r){if(1&i&&(t.j41(0,"td",64),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.R7$(1),t.JRh(e.productName)}}function Hr(i,r){1&i&&(t.j41(0,"th",63),t.EFF(1,"Status"),t.k0s())}function Jr(i,r){if(1&i&&(t.j41(0,"td",64)(1,"span",65)(2,"mat-icon"),t.EFF(3),t.k0s(),t.EFF(4),t.k0s()()),2&i){const e=r.$implicit,n=t.XpG(2);t.R7$(1),t.HbH(n.getStatusClass(e.status)),t.R7$(2),t.JRh(n.getStatusIcon(e.status)),t.R7$(1),t.SpI(" ",e.status," ")}}function Qr(i,r){1&i&&(t.j41(0,"th",63),t.EFF(1,"Message"),t.k0s())}function Zr(i,r){if(1&i&&(t.j41(0,"td",64),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.R7$(1),t.JRh(e.message)}}function qr(i,r){1&i&&(t.j41(0,"th",63),t.EFF(1,"Image Status"),t.k0s())}function ts(i,r){if(1&i&&(t.j41(0,"td",64),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.R7$(1),t.SpI(" ",e.imageUploadStatus||"N/A"," ")}}function es(i,r){1&i&&t.nrm(0,"tr",66)}function ns(i,r){1&i&&t.nrm(0,"tr",67)}function os(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",46)(1,"h3")(2,"mat-icon"),t.EFF(3,"assessment"),t.k0s(),t.EFF(4," Import Results "),t.k0s(),t.j41(5,"div",47)(6,"div",48)(7,"mat-icon"),t.EFF(8,"list"),t.k0s(),t.j41(9,"div")(10,"h4"),t.EFF(11),t.k0s(),t.j41(12,"p"),t.EFF(13,"Total Rows"),t.k0s()()(),t.j41(14,"div",49)(15,"mat-icon"),t.EFF(16,"check_circle"),t.k0s(),t.j41(17,"div")(18,"h4"),t.EFF(19),t.k0s(),t.j41(20,"p"),t.EFF(21,"Success"),t.k0s()()(),t.j41(22,"div",50)(23,"mat-icon"),t.EFF(24,"error"),t.k0s(),t.j41(25,"div")(26,"h4"),t.EFF(27),t.k0s(),t.j41(28,"p"),t.EFF(29,"Failed"),t.k0s()()()(),t.j41(30,"div",51)(31,"button",8),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.resetUpload())}),t.j41(32,"mat-icon"),t.EFF(33,"add"),t.k0s(),t.EFF(34," Import More Products "),t.k0s(),t.j41(35,"button",45),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.exportResults())}),t.j41(36,"mat-icon"),t.EFF(37,"download"),t.k0s(),t.EFF(38," Export Results "),t.k0s()(),t.j41(39,"div",52)(40,"table",53),t.qex(41,54),t.DNE(42,Vr,2,0,"th",55),t.DNE(43,Xr,2,1,"td",56),t.bVm(),t.qex(44,57),t.DNE(45,Kr,2,0,"th",55),t.DNE(46,Wr,2,1,"td",56),t.bVm(),t.qex(47,58),t.DNE(48,Hr,2,0,"th",55),t.DNE(49,Jr,5,4,"td",56),t.bVm(),t.qex(50,59),t.DNE(51,Qr,2,0,"th",55),t.DNE(52,Zr,2,1,"td",56),t.bVm(),t.qex(53,60),t.DNE(54,qr,2,0,"th",55),t.DNE(55,ts,2,1,"td",56),t.bVm(),t.DNE(56,es,1,0,"tr",61),t.DNE(57,ns,1,0,"tr",62),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(11),t.JRh(e.importResults.totalRows),t.R7$(8),t.JRh(e.importResults.successCount),t.R7$(8),t.JRh(e.importResults.failureCount),t.R7$(13),t.Y8G("dataSource",e.importResults.results),t.R7$(16),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",e.displayedColumns)}}const rs=[{path:"",component:ln,canActivate:[dn.q],children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:Ui,data:{title:"Product Dashboard"}},{path:"master",component:Kn,canActivate:[k.K],data:{title:"Master Products",roles:["SUPER_ADMIN","ADMIN","MANAGER","SHOP_OWNER"]}},{path:"master/new",component:fe,canActivate:[k.K],data:{title:"New Master Product",roles:["SUPER_ADMIN","ADMIN","MANAGER"]}},{path:"master/:id",component:fe,canActivate:[k.K],data:{title:"Edit Master Product",roles:["SUPER_ADMIN","ADMIN","MANAGER","SHOP_OWNER"]}},{path:"shop/:shopId",component:xe,canActivate:[k.K],data:{title:"Shop Products",roles:["SUPER_ADMIN","ADMIN","MANAGER","SHOP_OWNER"]}},{path:"shop/:shopId/new",component:be,canActivate:[k.K],data:{title:"Add Product to Shop",roles:["SUPER_ADMIN","ADMIN","MANAGER","SHOP_OWNER"]}},{path:"shop/:shopId/:productId",component:be,canActivate:[k.K],data:{title:"Edit Shop Product",roles:["SUPER_ADMIN","ADMIN","MANAGER","SHOP_OWNER"]}},{path:"categories",component:Mi,canActivate:[k.K],data:{title:"Product Categories",roles:["SUPER_ADMIN","ADMIN","MANAGER"]}},{path:"categories/new",component:ve,canActivate:[k.K],data:{title:"New Category",roles:["SUPER_ADMIN","ADMIN","MANAGER"]}},{path:"categories/:id",component:ve,canActivate:[k.K],data:{title:"Edit Category",roles:["SUPER_ADMIN","ADMIN","MANAGER"]}},{path:"bulk-assignment",component:Fe,canActivate:[k.K],data:{title:"Bulk Assign Products",roles:["SUPER_ADMIN","ADMIN"]}},{path:"assign/:shopId",component:Fe,canActivate:[k.K],data:{title:"Assign Products to Shop",roles:["SUPER_ADMIN","ADMIN","MANAGER"]}},{path:"shop-owner",component:Dr,canActivate:[k.K],data:{title:"Select Products for My Shop",roles:["SHOP_OWNER"]}},{path:"my-shop",component:xe,canActivate:[k.K],data:{title:"My Shop Products",roles:["SHOP_OWNER"]}},{path:"bulk-import",component:(()=>{class i{constructor(e,n,o,s){this.bulkImportService=e,this.snackBar=n,this.authService=o,this.offlineStorage=s,this.selectedFile=null,this.isUploading=!1,this.uploadProgress=0,this.importResults=null,this.showResults=!1,this.isSuperAdmin=!1,this.isShopOwner=!1,this.displayedColumns=["rowNumber","productName","status","message","imageStatus"]}ngOnInit(){this.checkUserRole()}checkUserRole(){this.isSuperAdmin=this.authService.isSuperAdmin()||this.authService.isAdmin(),this.isShopOwner=this.authService.isShopOwner()}onFileSelected(e){const n=e.target.files[0];if(n){const o=this.bulkImportService.validateExcelFile(n);if(!o.valid)return void this.snackBar.open(o.error||"Invalid file","Close",{duration:5e3});this.selectedFile=n,this.importResults=null,this.showResults=!1}}removeFile(){this.selectedFile=null,this.importResults=null,this.showResults=!1}uploadFile(){this.selectedFile?(this.isUploading=!0,this.uploadProgress=0,(this.isSuperAdmin?this.bulkImportService.importMasterProducts(this.selectedFile):this.bulkImportService.importShopProducts(this.selectedFile)).subscribe({next:n=>{this.isUploading=!1,this.uploadProgress=100,n.success?(this.importResults=n.data,this.showResults=!0,this.selectedFile=null,localStorage.removeItem("my_products_last_sync"),this.offlineStorage.saveProducts([],0).catch(s=>console.warn("Failed to clear product cache:",s)),console.log("Product cache cleared after bulk import"),this.snackBar.open(`Import completed! Success: ${n.data.successCount}, Failed: ${n.data.failureCount}`,"Close",{duration:5e3,panelClass:0===n.data.failureCount?["success-snackbar"]:["warning-snackbar"]})):this.snackBar.open(n.message||"Import failed","Close",{duration:5e3,panelClass:["error-snackbar"]})},error:n=>{this.isUploading=!1,this.uploadProgress=0,this.snackBar.open(n.error?.message||n.message||"Upload failed. Please try again.","Close",{duration:5e3,panelClass:["error-snackbar"]})}})):this.snackBar.open("Please select a file first","Close",{duration:3e3})}downloadSampleCSV(){this.bulkImportService.downloadSampleCSV(),this.snackBar.open("Sample CSV downloaded","Close",{duration:3e3})}getTemplateInfo(){this.bulkImportService.getTemplateInfo(this.isSuperAdmin?"master":"shop").subscribe({next:n=>{n.success&&(console.log("Template Info:",n.data),this.snackBar.open("Template info loaded. Check console for details.","Close",{duration:3e3}))},error:n=>{console.error("Error fetching template info:",n)}})}getStatusClass(e){switch(e){case"SUCCESS":return"status-success";case"FAILED":return"status-failed";case"SKIPPED":return"status-skipped";default:return""}}getStatusIcon(e){switch(e){case"SUCCESS":return"check_circle";case"FAILED":return"error";case"SKIPPED":return"info";default:return"help"}}resetUpload(){this.selectedFile=null,this.importResults=null,this.showResults=!1,this.uploadProgress=0}exportResults(){if(!this.importResults)return;const e=this.generateResultsCSV(),n=new Blob([e],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),s=URL.createObjectURL(n);o.setAttribute("href",s),o.setAttribute("download",`import_results_${(new Date).getTime()}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o),this.snackBar.open("Results exported","Close",{duration:3e3})}generateResultsCSV(){if(!this.importResults)return"";const n=this.importResults.results.map(s=>[s.rowNumber,s.productName,s.status,s.message,s.imageUploadStatus||"N/A"]),o=[];return o.push(["Row Number","Product Name","Status","Message","Image Status"].join(",")),n.forEach(s=>{const a=s.map(c=>{const d=String(c);return d.includes(",")||d.includes('"')?`"${d.replace(/"/g,'""')}"`:d});o.push(a.join(","))}),o.join("\n")}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(Rr),t.rXU(mt.UG),t.rXU(Tt.u),t.rXU(Tr.m))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-product-bulk-import"]],decls:265,vars:13,consts:[[1,"bulk-import-container"],[4,"ngIf"],[1,"instructions-section"],[1,"steps-container"],["class","step-card",4,"ngIf"],[1,"step-card"],[1,"step-number",3,"innerHTML"],[1,"step-content"],["mat-raised-button","","color","primary",3,"click"],[1,"info-box"],[1,"alert","alert-success"],[1,"upload-section"],["class","file-upload-area",4,"ngIf"],["class","file-selected",4,"ngIf"],["class","upload-progress",4,"ngIf"],["class","upload-actions",4,"ngIf"],["class","results-section",4,"ngIf"],[1,"help-section"],[1,"help-content"],[1,"columns-grid"],[1,"column-item","required"],[1,"column-item"],[1,"column-item","skip"],[1,"example-section"],[1,"folder-structure"],[1,"folder-item"],[1,"file-items"],[1,"file-item"],[1,"issues-list"],[1,"issue-item"],["color","warn"],[1,"step-number"],[1,"file-upload-area"],["type","file","accept",".xlsx,.xls",2,"display","none",3,"change"],["fileInput",""],[1,"upload-box",3,"click"],[1,"hint"],[1,"file-selected"],[1,"file-icon"],[1,"file-info"],["mat-icon-button","","color","warn",3,"click"],[1,"upload-progress"],["mode","indeterminate"],[1,"upload-actions"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-stroked-button","",3,"click"],[1,"results-section"],[1,"results-summary"],[1,"summary-card","total"],[1,"summary-card","success"],[1,"summary-card","failed"],[1,"results-actions"],[1,"results-table"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","rowNumber"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","productName"],["matColumnDef","status"],["matColumnDef","message"],["matColumnDef","imageStatus"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"status-badge"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),t.EFF(5,"cloud_upload"),t.k0s(),t.DNE(6,Nr,2,0,"span",1),t.DNE(7,Br,2,0,"span",1),t.k0s(),t.j41(8,"mat-card-subtitle"),t.DNE(9,Ar,2,0,"span",1),t.DNE(10,Gr,2,0,"span",1),t.k0s()(),t.j41(11,"mat-card-content")(12,"div",2)(13,"h3")(14,"mat-icon"),t.EFF(15,"info"),t.k0s(),t.EFF(16," How to Import Products "),t.k0s(),t.j41(17,"div",3),t.DNE(18,$r,15,0,"div",4),t.j41(19,"div",5),t.nrm(20,"div",6),t.j41(21,"div",7)(22,"h4")(23,"mat-icon"),t.EFF(24,"download"),t.k0s(),t.EFF(25," Download Template"),t.k0s(),t.j41(26,"p"),t.EFF(27,"Download our pre-formatted Excel template with all required columns."),t.k0s(),t.j41(28,"button",8),t.bIt("click",function(){return o.downloadSampleCSV()}),t.j41(29,"mat-icon"),t.EFF(30,"download"),t.k0s(),t.EFF(31," Download Sample Template "),t.k0s()()(),t.j41(32,"div",5),t.nrm(33,"div",6),t.j41(34,"div",7)(35,"h4")(36,"mat-icon"),t.EFF(37,"edit"),t.k0s(),t.EFF(38," Fill Product Details"),t.k0s(),t.j41(39,"p"),t.EFF(40,"Open the template in Excel and fill in your product information. Required: "),t.j41(41,"strong"),t.EFF(42,"name (A), category (D), imagePath (Y)"),t.k0s(),t.EFF(43,". Categories are auto-created if not found."),t.k0s(),t.j41(44,"div",9)(45,"mat-icon"),t.EFF(46,"info"),t.k0s(),t.j41(47,"span"),t.EFF(48,"Save as Excel Workbook (.xlsx) format"),t.k0s()()()(),t.j41(49,"div",5),t.nrm(50,"div",6),t.j41(51,"div",7)(52,"h4")(53,"mat-icon"),t.EFF(54,"cloud_upload"),t.k0s(),t.EFF(55," Upload & Import"),t.k0s(),t.j41(56,"p"),t.EFF(57,'Select your completed Excel file below and click "Upload & Import" to process your products.'),t.k0s()()()(),t.j41(58,"div",10)(59,"mat-icon"),t.EFF(60,"lightbulb"),t.k0s(),t.j41(61,"strong"),t.EFF(62,"Pro Tip:"),t.k0s(),t.EFF(63," Start with a small batch of 2-3 products to verify everything works correctly! "),t.k0s()(),t.j41(64,"div",11),t.DNE(65,Lr,10,0,"div",12),t.DNE(66,Ur,11,2,"div",13),t.DNE(67,zr,4,0,"div",14),t.DNE(68,Yr,9,1,"div",15),t.k0s(),t.DNE(69,os,58,6,"div",16),t.j41(70,"div",17)(71,"mat-expansion-panel")(72,"mat-expansion-panel-header")(73,"mat-panel-title")(74,"mat-icon"),t.EFF(75,"help"),t.k0s(),t.EFF(76," Need Help? "),t.k0s()(),t.j41(77,"div",18)(78,"h4")(79,"mat-icon"),t.EFF(80,"table_chart"),t.k0s(),t.EFF(81," Excel Template Columns (A-Z)"),t.k0s(),t.j41(82,"div",19)(83,"div",20)(84,"strong"),t.EFF(85,"A: name"),t.k0s(),t.j41(86,"span"),t.EFF(87,"Product name (Required)"),t.k0s()(),t.j41(88,"div",21)(89,"strong"),t.EFF(90,"B: nameTamil"),t.k0s(),t.j41(91,"span"),t.EFF(92,"Tamil name"),t.k0s()(),t.j41(93,"div",21)(94,"strong"),t.EFF(95,"C: description"),t.k0s(),t.j41(96,"span"),t.EFF(97,"Product description"),t.k0s()(),t.j41(98,"div",20)(99,"strong"),t.EFF(100,"D: category"),t.k0s(),t.j41(101,"span"),t.EFF(102,"Category name (auto-created)"),t.k0s()(),t.j41(103,"div",21)(104,"strong"),t.EFF(105,"E: brand"),t.k0s(),t.j41(106,"span"),t.EFF(107,"Brand name"),t.k0s()(),t.j41(108,"div",21)(109,"strong"),t.EFF(110,"F: sku"),t.k0s(),t.j41(111,"span"),t.EFF(112,"SKU code"),t.k0s()(),t.j41(113,"div",22)(114,"strong"),t.EFF(115,"G-H: (Skip)"),t.k0s(),t.j41(116,"span"),t.EFF(117,"Reserved columns"),t.k0s()(),t.j41(118,"div",21)(119,"strong"),t.EFF(120,"I: baseUnit"),t.k0s(),t.j41(121,"span"),t.EFF(122,"Unit (kg, piece, gram)"),t.k0s()(),t.j41(123,"div",21)(124,"strong"),t.EFF(125,"J: baseWeight"),t.k0s(),t.j41(126,"span"),t.EFF(127,"Weight value"),t.k0s()(),t.j41(128,"div",21)(129,"strong"),t.EFF(130,"K: originalPrice"),t.k0s(),t.j41(131,"span"),t.EFF(132,"MRP/Original price"),t.k0s()(),t.j41(133,"div",21)(134,"strong"),t.EFF(135,"L: sellingPrice"),t.k0s(),t.j41(136,"span"),t.EFF(137,"Selling price"),t.k0s()(),t.j41(138,"div",21)(139,"strong"),t.EFF(140,"M: discountPct"),t.k0s(),t.j41(141,"span"),t.EFF(142,"Discount %"),t.k0s()(),t.j41(143,"div",21)(144,"strong"),t.EFF(145,"N: costPrice"),t.k0s(),t.j41(146,"span"),t.EFF(147,"Cost price"),t.k0s()(),t.j41(148,"div",21)(149,"strong"),t.EFF(150,"O: stockQuantity"),t.k0s(),t.j41(151,"span"),t.EFF(152,"Available stock"),t.k0s()(),t.j41(153,"div",21)(154,"strong"),t.EFF(155,"P-Q: stockLevels"),t.k0s(),t.j41(156,"span"),t.EFF(157,"Min/Max stock levels"),t.k0s()(),t.j41(158,"div",21)(159,"strong"),t.EFF(160,"R: trackInventory"),t.k0s(),t.j41(161,"span"),t.EFF(162,"TRUE/FALSE"),t.k0s()(),t.j41(163,"div",21)(164,"strong"),t.EFF(165,"S: status"),t.k0s(),t.j41(166,"span"),t.EFF(167,"ACTIVE/INACTIVE"),t.k0s()(),t.j41(168,"div",21)(169,"strong"),t.EFF(170,"T-U: flags"),t.k0s(),t.j41(171,"span"),t.EFF(172,"isFeatured, isAvailable"),t.k0s()(),t.j41(173,"div",22)(174,"strong"),t.EFF(175,"V: (Skip)"),t.k0s(),t.j41(176,"span"),t.EFF(177,"Reserved"),t.k0s()(),t.j41(178,"div",21)(179,"strong"),t.EFF(180,"W: tags"),t.k0s(),t.j41(181,"span"),t.EFF(182,"Comma-separated tags"),t.k0s()(),t.j41(183,"div",21)(184,"strong"),t.EFF(185,"X: specifications"),t.k0s(),t.j41(186,"span"),t.EFF(187,"Product specs"),t.k0s()(),t.j41(188,"div",20)(189,"strong"),t.EFF(190,"Y: imagePath"),t.k0s(),t.j41(191,"span"),t.EFF(192,"Image filename (tomato.jpg)"),t.k0s()(),t.j41(193,"div",21)(194,"strong"),t.EFF(195,"Z: imageFolder"),t.k0s(),t.j41(196,"span"),t.EFF(197,"Folder name (vegetables)"),t.k0s()()(),t.j41(198,"div",23)(199,"h4")(200,"mat-icon"),t.EFF(201,"folder_special"),t.k0s(),t.EFF(202," Image Organization Example"),t.k0s(),t.j41(203,"div",24)(204,"div",25)(205,"mat-icon"),t.EFF(206,"folder"),t.k0s(),t.j41(207,"span"),t.EFF(208,"vegetables/"),t.k0s()(),t.j41(209,"div",26)(210,"div",27)(211,"mat-icon"),t.EFF(212,"image"),t.k0s(),t.j41(213,"span"),t.EFF(214,"tomato.jpg"),t.k0s()(),t.j41(215,"div",27)(216,"mat-icon"),t.EFF(217,"image"),t.k0s(),t.j41(218,"span"),t.EFF(219,"onion.jpg"),t.k0s()()(),t.j41(220,"div",25)(221,"mat-icon"),t.EFF(222,"folder"),t.k0s(),t.j41(223,"span"),t.EFF(224,"groceries/"),t.k0s()(),t.j41(225,"div",26)(226,"div",27)(227,"mat-icon"),t.EFF(228,"image"),t.k0s(),t.j41(229,"span"),t.EFF(230,"rice.jpg"),t.k0s()(),t.j41(231,"div",27)(232,"mat-icon"),t.EFF(233,"image"),t.k0s(),t.j41(234,"span"),t.EFF(235,"dal.jpg"),t.k0s()()()()(),t.j41(236,"h4")(237,"mat-icon"),t.EFF(238,"troubleshoot"),t.k0s(),t.EFF(239," Common Issues & Solutions"),t.k0s(),t.j41(240,"div",28)(241,"div",29)(242,"mat-icon",30),t.EFF(243,"error"),t.k0s(),t.j41(244,"div")(245,"strong"),t.EFF(246,"Invalid category ID"),t.k0s(),t.j41(247,"p"),t.EFF(248,"Solution: Get valid category IDs from the Category Management section"),t.k0s()()(),t.j41(249,"div",29)(250,"mat-icon",30),t.EFF(251,"broken_image"),t.k0s(),t.j41(252,"div")(253,"strong"),t.EFF(254,"Image not found"),t.k0s(),t.j41(255,"p"),t.EFF(256,"Solution: Ensure image filename matches exactly (case-sensitive) and file exists in specified folder"),t.k0s()()(),t.j41(257,"div",29)(258,"mat-icon",30),t.EFF(259,"description"),t.k0s(),t.j41(260,"div")(261,"strong"),t.EFF(262,"Wrong file format"),t.k0s(),t.j41(263,"p"),t.EFF(264,"Solution: File must be .xlsx format (Excel 2007 or later)"),t.k0s()()()()()()()()()()),2&n&&(t.R7$(6),t.Y8G("ngIf",o.isSuperAdmin),t.R7$(1),t.Y8G("ngIf",o.isShopOwner&&!o.isSuperAdmin),t.R7$(2),t.Y8G("ngIf",o.isSuperAdmin),t.R7$(1),t.Y8G("ngIf",o.isShopOwner&&!o.isSuperAdmin),t.R7$(8),t.Y8G("ngIf",o.isSuperAdmin),t.R7$(2),t.Y8G("innerHTML",o.isSuperAdmin?"2":"1",t.npT),t.R7$(13),t.Y8G("innerHTML",o.isSuperAdmin?"3":"2",t.npT),t.R7$(17),t.Y8G("innerHTML",o.isSuperAdmin?"4":"3",t.npT),t.R7$(15),t.Y8G("ngIf",!o.selectedFile),t.R7$(1),t.Y8G("ngIf",o.selectedFile&&!o.isUploading),t.R7$(1),t.Y8G("ngIf",o.isUploading),t.R7$(1),t.Y8G("ngIf",o.selectedFile&&!o.isUploading),t.R7$(1),t.Y8G("ngIf",o.showResults&&o.importResults))},dependencies:[f.bT,P.Zl,P.tL,P.ji,P.cC,P.YV,P.iL,P.KS,P.$R,P.YZ,P.NB,F.$z,F.iY,M.An,m.RN,m.m2,m.MM,m.Lc,m.dh,at.GK,at.Z2,at.WN,Ft.HM],styles:[".bulk-import-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.bulk-import-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-bottom:24px}.bulk-import-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:24px}.bulk-import-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:24px;font-weight:500}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]{margin-bottom:32px}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:24px;color:#1976d2;font-size:20px;font-weight:600}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .steps-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin-bottom:24px}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .step-card[_ngcontent-%COMP%]{background:white;border-radius:12px;padding:24px;box-shadow:0 2px 8px #0000001a;border:2px solid #e0e0e0;transition:all .3s ease}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .step-card[_ngcontent-%COMP%]:hover{border-color:#4ade80;box-shadow:0 4px 12px #4ade8033;transform:translateY(-2px)}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .step-card[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#4ade80 0%,#22c55e 100%);color:#fff;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700;margin-bottom:16px}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .step-card[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:16px;font-weight:600;color:#333;margin:0 0 12px}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .step-card[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4ade80;font-size:20px;width:20px;height:20px}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .step-card[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#666;line-height:1.6;margin:0 0 12px}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .step-card[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 12px;background-color:#f0fdf4;border-radius:6px;border-left:3px solid #4ade80;font-size:13px;color:#166534;margin-top:12px}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .step-card[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4ade80;font-size:18px;width:18px;height:18px}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .step-card[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:8px}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px 20px;border-radius:8px;margin-top:16px}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .alert.alert-info[_ngcontent-%COMP%]{background-color:#e3f2fd;border-left:4px solid #2196f3;color:#0d47a1}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .alert.alert-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2196f3}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .alert.alert-success[_ngcontent-%COMP%]{background-color:#f0fdf4;border-left:4px solid #4ade80;color:#166534}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .alert.alert-success[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#22c55e}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]{margin:32px 0}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   .file-upload-area[_ngcontent-%COMP%]{margin-bottom:24px}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   .file-upload-area[_ngcontent-%COMP%]   .upload-box[_ngcontent-%COMP%]{border:2px dashed #bdbdbd;border-radius:8px;padding:48px;text-align:center;cursor:pointer;transition:all .3s ease}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   .file-upload-area[_ngcontent-%COMP%]   .upload-box[_ngcontent-%COMP%]:hover{border-color:#1976d2;background-color:#f5f5f5}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   .file-upload-area[_ngcontent-%COMP%]   .upload-box[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#1976d2;margin-bottom:16px}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   .file-upload-area[_ngcontent-%COMP%]   .upload-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:16px;color:#333}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   .file-upload-area[_ngcontent-%COMP%]   .upload-box[_ngcontent-%COMP%]   p.hint[_ngcontent-%COMP%]{font-size:14px;color:#757575}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   .file-selected[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background-color:#e8f5e9;border-radius:8px;border:1px solid #4caf50;margin-bottom:16px}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   .file-selected[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#4caf50}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   .file-selected[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{flex:1}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   .file-selected[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;font-weight:500}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   .file-selected[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#757575}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   .upload-progress[_ngcontent-%COMP%]{margin:24px 0}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   .upload-progress[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin-top:12px;color:#1976d2;font-weight:500}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   .upload-actions[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:center;margin-top:16px}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]{margin-top:32px;padding-top:32px;border-top:2px solid #e0e0e0}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:24px;color:#1976d2}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:20px;border-radius:8px;background-color:#f5f5f5}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:32px;font-weight:600}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0 0;font-size:14px;color:#757575}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-card.total[_ngcontent-%COMP%]{background-color:#e3f2fd;border-left:4px solid #2196f3}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-card.total[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2196f3}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-card.total[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#1565c0}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-card.success[_ngcontent-%COMP%]{background-color:#e8f5e9;border-left:4px solid #4caf50}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-card.success[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-card.success[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2e7d32}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-card.failed[_ngcontent-%COMP%]{background-color:#ffebee;border-left:4px solid #f44336}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-card.failed[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]   .summary-card.failed[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#c62828}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-actions[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:24px}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-table[_ngcontent-%COMP%]{margin-top:24px;overflow-x:auto}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;background-color:#fff;box-shadow:0 2px 4px #0000001a}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:600;color:#333}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 16px}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:4px 12px;border-radius:16px;font-size:13px;font-weight:500}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge.status-success[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge.status-success[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge.status-failed[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge.status-failed[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge.status-skipped[_ngcontent-%COMP%]{background-color:#fff3e0;color:#e65100}.bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge.status-skipped[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9800}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]{margin-top:32px}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{padding:16px 0}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#1976d2;margin:24px 0 16px;font-size:16px;font-weight:600}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:first-child{margin-top:0}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .columns-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px;margin-bottom:24px}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .columns-grid[_ngcontent-%COMP%]   .column-item[_ngcontent-%COMP%]{background:#f5f5f5;padding:12px 16px;border-radius:8px;border-left:3px solid #2196f3}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .columns-grid[_ngcontent-%COMP%]   .column-item.required[_ngcontent-%COMP%]{border-left-color:#f44336;background:#fff3e0}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .columns-grid[_ngcontent-%COMP%]   .column-item.skip[_ngcontent-%COMP%]{border-left-color:#9e9e9e;background:#eeeeee;opacity:.7}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .columns-grid[_ngcontent-%COMP%]   .column-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:#333;font-size:14px;font-weight:600;margin-bottom:4px}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .columns-grid[_ngcontent-%COMP%]   .column-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:#666}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .example-section[_ngcontent-%COMP%]{background:#f9fafb;padding:20px;border-radius:8px;margin-bottom:24px}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .example-section[_ngcontent-%COMP%]   .folder-structure[_ngcontent-%COMP%]{margin-top:16px}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .example-section[_ngcontent-%COMP%]   .folder-structure[_ngcontent-%COMP%]   .folder-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 0;font-weight:600;color:#1976d2;font-size:14px}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .example-section[_ngcontent-%COMP%]   .folder-structure[_ngcontent-%COMP%]   .folder-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffa726}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .example-section[_ngcontent-%COMP%]   .folder-structure[_ngcontent-%COMP%]   .file-items[_ngcontent-%COMP%]{margin-left:32px;margin-bottom:16px}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .example-section[_ngcontent-%COMP%]   .folder-structure[_ngcontent-%COMP%]   .file-items[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:6px 0;font-size:13px;color:#666}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .example-section[_ngcontent-%COMP%]   .folder-structure[_ngcontent-%COMP%]   .file-items[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#4caf50}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .issues-list[_ngcontent-%COMP%]   .issue-item[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px;background:#fff3e0;border-radius:8px;margin-bottom:12px;border-left:3px solid #ff9800}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .issues-list[_ngcontent-%COMP%]   .issue-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{flex-shrink:0;margin-top:2px}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .issues-list[_ngcontent-%COMP%]   .issue-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .issues-list[_ngcontent-%COMP%]   .issue-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:#333;font-size:14px;font-weight:600;margin-bottom:4px}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .issues-list[_ngcontent-%COMP%]   .issue-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#666;line-height:1.5}.bulk-import-container[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:16px}@media (max-width: 768px){.bulk-import-container[_ngcontent-%COMP%]{padding:16px}.bulk-import-container[_ngcontent-%COMP%]   .instructions-section[_ngcontent-%COMP%]   .steps-container[_ngcontent-%COMP%], .bulk-import-container[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .columns-grid[_ngcontent-%COMP%], .bulk-import-container[_ngcontent-%COMP%]   .results-summary[_ngcontent-%COMP%]{grid-template-columns:1fr}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   .upload-actions[_ngcontent-%COMP%], .bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-actions[_ngcontent-%COMP%]{flex-direction:column}.bulk-import-container[_ngcontent-%COMP%]   .upload-section[_ngcontent-%COMP%]   .upload-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .bulk-import-container[_ngcontent-%COMP%]   .results-section[_ngcontent-%COMP%]   .results-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})}}return i})(),canActivate:[k.K],data:{title:"Bulk Import Products",roles:["SUPER_ADMIN","ADMIN","SHOP_OWNER"]}}]}];let ss=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[b.iI.forChild(rs),b.iI]})}}return i})();var as=p(3887);let cs=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[f.MD,g.X1,g.YN,ss,as.G,P.tP,X.Ou,ot.NQ,T.fS,C.RG,F.Hl,M.m_,A.Ve,m.Hu,K.YN,ye.RI,Oe.s5,Ee.Cn,Gt.hM,mt._T,E.D6,L.g7,$t.mV,$e,at.MY,Le.Y,B.uc,Ue.w,Ft.PO,cn]})}}return i})()}}]);