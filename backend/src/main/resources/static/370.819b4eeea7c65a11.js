(self.webpackChunkshop_management_frontend=self.webpackChunkshop_management_frontend||[]).push([[370],{8370:(m,E,e)=>{"use strict";e.d(E,{V:()=>I});var u=e(4412),c=e(1985),s=e(2525),o=e(467);const n_LF="\n",n_NULL="\0";class r{get body(){return!this._body&&this.isBinaryBody&&(this._body=(new TextDecoder).decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=(new TextEncoder).encode(this._body)),this._binaryBody}constructor(t){const{command:l,headers:f,body:T,binaryBody:y,escapeHeaderValues:U,skipContentLengthHeader:H}=t;this.command=l,this.headers=Object.assign({},f||{}),y?(this._binaryBody=y,this.isBinaryBody=!0):(this._body=T||"",this.isBinaryBody=!1),this.escapeHeaderValues=U||!1,this.skipContentLengthHeader=H||!1}static fromRawFrame(t,l){const f={},T=y=>y.replace(/^\s+|\s+$/g,"");for(const y of t.headers.reverse()){y.indexOf(":");const H=T(y[0]);let j=T(y[1]);l&&"CONNECT"!==t.command&&"CONNECTED"!==t.command&&(j=r.hdrValueUnEscape(j)),f[H]=j}return new r({command:t.command,headers:f,binaryBody:t.binaryBody,escapeHeaderValues:l})}toString(){return this.serializeCmdAndHeaders()}serialize(){const t=this.serializeCmdAndHeaders();return this.isBinaryBody?r.toUnit8Array(t,this._binaryBody).buffer:t+this._body+n_NULL}serializeCmdAndHeaders(){const t=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const l of Object.keys(this.headers||{})){const f=this.headers[l];t.push(this.escapeHeaderValues&&"CONNECT"!==this.command&&"CONNECTED"!==this.command?`${l}:${r.hdrValueEscape(`${f}`)}`:`${l}:${f}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&t.push(`content-length:${this.bodyLength()}`),t.join(n_LF)+n_LF+n_LF}isBodyEmpty(){return 0===this.bodyLength()}bodyLength(){const t=this.binaryBody;return t?t.length:0}static sizeOfUTF8(t){return t?(new TextEncoder).encode(t).length:0}static toUnit8Array(t,l){const f=(new TextEncoder).encode(t),T=new Uint8Array([0]),y=new Uint8Array(f.length+l.length+T.length);return y.set(f),y.set(l,f.length),y.set(T,f.length+l.length),y}static marshall(t){return new r(t).serialize()}static hdrValueEscape(t){return t.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(t){return t.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\c/g,":").replace(/\\\\/g,"\\")}}class S{constructor(t,l){this.onFrame=t,this.onIncomingPing=l,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(t,l=!1){let f;if(f="string"==typeof t?this._encoder.encode(t):new Uint8Array(t),l&&0!==f[f.length-1]){const T=new Uint8Array(f.length+1);T.set(f,0),T[f.length]=0,f=T}for(let T=0;T<f.length;T++)this._onByte(f[T])}_collectFrame(t){if(0!==t&&13!==t){if(10===t)return void this.onIncomingPing();this._onByte=this._collectCommand,this._reinjectByte(t)}}_collectCommand(t){if(13!==t){if(10===t)return this._results.command=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaders);this._consumeByte(t)}}_collectHeaders(t){if(13!==t){if(10===t)return void this._setupCollectBody();this._onByte=this._collectHeaderKey,this._reinjectByte(t)}}_reinjectByte(t){this._onByte(t)}_collectHeaderKey(t){if(58===t)return this._headerKey=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaderValue);this._consumeByte(t)}_collectHeaderValue(t){if(13!==t){if(10===t)return this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,void(this._onByte=this._collectHeaders);this._consumeByte(t)}}_setupCollectBody(){const t=this._results.headers.filter(l=>"content-length"===l[0])[0];t?(this._bodyBytesRemaining=parseInt(t[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(t){0!==t?this._consumeByte(t):this._retrievedBody()}_collectBodyFixedSize(t){0!=this._bodyBytesRemaining--?this._consumeByte(t):this._retrievedBody()}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(t){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",t)}this._initState()}_consumeByte(t){this._token.push(t)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const t=new Uint8Array(this._token);return this._token=[],t}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}var w=function(b){return b[b.CONNECTING=0]="CONNECTING",b[b.OPEN=1]="OPEN",b[b.CLOSING=2]="CLOSING",b[b.CLOSED=3]="CLOSED",b}(w||{}),O=function(b){return b[b.ACTIVE=0]="ACTIVE",b[b.DEACTIVATING=1]="DEACTIVATING",b[b.INACTIVE=2]="INACTIVE",b}(O||{}),L=function(b){return b[b.LINEAR=0]="LINEAR",b[b.EXPONENTIAL=1]="EXPONENTIAL",b}(L||{}),R=function(b){return b.Interval="interval",b.Worker="worker",b}(R||{});class A{constructor(t,l=R.Interval,f){this._interval=t,this._strategy=l,this._debug=f,this._workerScript=`\n    var startTime = Date.now();\n    setInterval(function() {\n        self.postMessage(Date.now() - startTime);\n    }, ${this._interval});\n  `}start(t){this.stop(),this.shouldUseWorker()?this.runWorker(t):this.runInterval(t)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===R.Worker}runWorker(t){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=l=>t(l.data))}runInterval(t){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const l=Date.now();this._timer=setInterval(()=>{t(Date.now()-l)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}}class k{constructor(t){this.versions=t}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(t=>`v${t.replace(".","")}.stomp`)}}k.V1_0="1.0",k.V1_1="1.1",k.V1_2="1.2",k.default=new k([k.V1_2,k.V1_1,k.V1_0]);class x{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(t,l,f){this._client=t,this._webSocket=l,this._connected=!1,this._serverFrameHandlers={CONNECTED:T=>{this.debug(`connected to server ${T.headers.server}`),this._connected=!0,this._connectedVersion=T.headers.version,this._connectedVersion===k.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(T.headers),this.onConnect(T)},MESSAGE:T=>{const y=T.headers.subscription,U=this._subscriptions[y]||this.onUnhandledMessage,H=T,j=this,W=this._connectedVersion===k.V1_2?H.headers.ack:H.headers["message-id"];H.ack=(B={})=>j.ack(W,y,B),H.nack=(B={})=>j.nack(W,y,B),U(H)},RECEIPT:T=>{const y=this._receiptWatchers[T.headers["receipt-id"]];y?(y(T),delete this._receiptWatchers[T.headers["receipt-id"]]):this.onUnhandledReceipt(T)},ERROR:T=>{this.onStompError(T)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=f.debug,this.stompVersions=f.stompVersions,this.connectHeaders=f.connectHeaders,this.disconnectHeaders=f.disconnectHeaders,this.heartbeatIncoming=f.heartbeatIncoming,this.heartbeatOutgoing=f.heartbeatOutgoing,this.splitLargeFrames=f.splitLargeFrames,this.maxWebSocketChunkSize=f.maxWebSocketChunkSize,this.forceBinaryWSFrames=f.forceBinaryWSFrames,this.logRawCommunication=f.logRawCommunication,this.appendMissingNULLonIncoming=f.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=f.discardWebsocketOnCommFailure,this.onConnect=f.onConnect,this.onDisconnect=f.onDisconnect,this.onStompError=f.onStompError,this.onWebSocketClose=f.onWebSocketClose,this.onWebSocketError=f.onWebSocketError,this.onUnhandledMessage=f.onUnhandledMessage,this.onUnhandledReceipt=f.onUnhandledReceipt,this.onUnhandledFrame=f.onUnhandledFrame}start(){const t=new S(l=>{const f=r.fromRawFrame(l,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${f}`),(this._serverFrameHandlers[f.command]||this.onUnhandledFrame)(f)},()=>{this.debug("<<< PONG")});this._webSocket.onmessage=l=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const f=l.data instanceof ArrayBuffer?(new TextDecoder).decode(l.data):l.data;this.debug(`<<< ${f}`)}t.parseChunk(l.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=l=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(l)},this._webSocket.onerror=l=>{this.onWebSocketError(l)},this._webSocket.onopen=()=>{const l=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),l["accept-version"]=this.stompVersions.supportedVersions(),l["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:l})}}_setupHeartbeat(t){if(t.version!==k.V1_1&&t.version!==k.V1_2||!t["heart-beat"])return;const[l,f]=t["heart-beat"].split(",").map(T=>parseInt(T,10));if(0!==this.heartbeatOutgoing&&0!==f){const T=Math.max(this.heartbeatOutgoing,f);this.debug(`send PING every ${T}ms`),this._pinger=new A(T,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===w.OPEN&&(this._webSocket.send(n_LF),this.debug(">>> PING"))})}if(0!==this.heartbeatIncoming&&0!==l){const T=Math.max(this.heartbeatIncoming,l);this.debug(`check PONG every ${T}ms`),this._ponger=setInterval(()=>{const y=Date.now()-this._lastServerActivityTS;y>2*T&&(this.debug(`did not receive server activity for the last ${y}ms`),this._closeOrDiscardWebsocket())},T)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===w.CONNECTING||this._webSocket.readyState===w.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){"function"!=typeof this._webSocket.terminate&&function i(b,t){b.terminate=function(){const l=()=>{};this.onerror=l,this.onmessage=l,this.onopen=l;const f=new Date,T=Math.random().toString().substring(2,8),y=this.onclose;this.onclose=U=>{const H=(new Date).getTime()-f.getTime();t(`Discarded socket (#${T})  closed after ${H}ms, with code/reason: ${U.code}/${U.reason}`)},this.close(),y?.call(b,{code:4001,reason:`Quick discarding socket (#${T}) without waiting for the shutdown sequence.`,wasClean:!1})}}(this._webSocket,t=>this.debug(t)),this._webSocket.terminate()}_transmit(t){const{command:l,headers:f,body:T,binaryBody:y,skipContentLengthHeader:U}=t,H=new r({command:l,headers:f,body:T,binaryBody:y,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:U});let j=H.serialize();if(this.debug(this.logRawCommunication?`>>> ${j}`:`>>> ${H}`),this.forceBinaryWSFrames&&"string"==typeof j&&(j=(new TextEncoder).encode(j)),"string"==typeof j&&this.splitLargeFrames){let W=j;for(;W.length>0;){const B=W.substring(0,this.maxWebSocketChunkSize);W=W.substring(this.maxWebSocketChunkSize),this._webSocket.send(B),this.debug(`chunk sent = ${B.length}, remaining = ${W.length}`)}}else this._webSocket.send(j)}dispose(){if(this.connected)try{const t=Object.assign({},this.disconnectHeaders);t.receipt||(t.receipt="close-"+this._counter++),this.watchForReceipt(t.receipt,l=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(l)}),this._transmit({command:"DISCONNECT",headers:t})}catch(t){this.debug(`Ignoring error during disconnect ${t}`)}else(this._webSocket.readyState===w.CONNECTING||this._webSocket.readyState===w.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(t){const{destination:l,headers:f,body:T,binaryBody:y,skipContentLengthHeader:U}=t,H=Object.assign({destination:l},f);this._transmit({command:"SEND",headers:H,body:T,binaryBody:y,skipContentLengthHeader:U})}watchForReceipt(t,l){this._receiptWatchers[t]=l}subscribe(t,l,f={}){(f=Object.assign({},f)).id||(f.id="sub-"+this._counter++),f.destination=t,this._subscriptions[f.id]=l,this._transmit({command:"SUBSCRIBE",headers:f});const T=this;return{id:f.id,unsubscribe:y=>T.unsubscribe(f.id,y)}}unsubscribe(t,l={}){l=Object.assign({},l),delete this._subscriptions[t],l.id=t,this._transmit({command:"UNSUBSCRIBE",headers:l})}begin(t){const l=t||"tx-"+this._counter++;this._transmit({command:"BEGIN",headers:{transaction:l}});const f=this;return{id:l,commit(){f.commit(l)},abort(){f.abort(l)}}}commit(t){this._transmit({command:"COMMIT",headers:{transaction:t}})}abort(t){this._transmit({command:"ABORT",headers:{transaction:t}})}ack(t,l,f={}){f=Object.assign({},f),this._connectedVersion===k.V1_2?f.id=t:f["message-id"]=t,f.subscription=l,this._transmit({command:"ACK",headers:f})}nack(t,l,f={}){return f=Object.assign({},f),this._connectedVersion===k.V1_2?f.id=t:f["message-id"]=t,f.subscription=l,this._transmit({command:"NACK",headers:f})}}class N{get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(t){this._disconnectHeaders=t,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===O.ACTIVE}_changeState(t){this.state=t,this.onChangeState(t)}constructor(t={}){this.stompVersions=k.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=9e5,this.reconnectTimeMode=L.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=R.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8192,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=O.INACTIVE;const l=()=>{};this.debug=l,this.beforeConnect=l,this.onConnect=l,this.onDisconnect=l,this.onUnhandledMessage=l,this.onUnhandledReceipt=l,this.onUnhandledFrame=l,this.onStompError=l,this.onWebSocketClose=l,this.onWebSocketError=l,this.logRawCommunication=!1,this.onChangeState=l,this.connectHeaders={},this._disconnectHeaders={},this.configure(t)}configure(t){Object.assign(this,t),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){const t=()=>{this.active?this.debug("Already ACTIVE, ignoring request to activate"):(this._changeState(O.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect())};this.state===O.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{t()})):t()}_connect(){var t=this;return(0,o.A)(function*(){if(yield t.beforeConnect(t),t._stompHandler)return void t.debug("There is already a stompHandler, skipping the call to connect");if(!t.active)return void t.debug("Client has been marked inactive, will not attempt to connect");t.connectionTimeout>0&&(t._connectionWatcher&&clearTimeout(t._connectionWatcher),t._connectionWatcher=setTimeout(()=>{t.connected||(t.debug(`Connection not established in ${t.connectionTimeout}ms, closing socket`),t.forceDisconnect())},t.connectionTimeout)),t.debug("Opening Web Socket...");const l=t._createWebSocket();t._stompHandler=new x(t,l,{debug:t.debug,stompVersions:t.stompVersions,connectHeaders:t.connectHeaders,disconnectHeaders:t._disconnectHeaders,heartbeatIncoming:t.heartbeatIncoming,heartbeatOutgoing:t.heartbeatOutgoing,heartbeatStrategy:t.heartbeatStrategy,splitLargeFrames:t.splitLargeFrames,maxWebSocketChunkSize:t.maxWebSocketChunkSize,forceBinaryWSFrames:t.forceBinaryWSFrames,logRawCommunication:t.logRawCommunication,appendMissingNULLonIncoming:t.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:t.discardWebsocketOnCommFailure,onConnect:f=>{if(t._connectionWatcher&&(clearTimeout(t._connectionWatcher),t._connectionWatcher=void 0),!t.active)return t.debug("STOMP got connected while deactivate was issued, will disconnect now"),void t._disposeStompHandler();t.onConnect(f)},onDisconnect:f=>{t.onDisconnect(f)},onStompError:f=>{t.onStompError(f)},onWebSocketClose:f=>{t._stompHandler=void 0,t.state===O.DEACTIVATING&&t._changeState(O.INACTIVE),t.onWebSocketClose(f),t.active&&t._schedule_reconnect()},onWebSocketError:f=>{t.onWebSocketError(f)},onUnhandledMessage:f=>{t.onUnhandledMessage(f)},onUnhandledReceipt:f=>{t.onUnhandledReceipt(f)},onUnhandledFrame:f=>{t.onUnhandledFrame(f)}}),t._stompHandler.start()})()}_createWebSocket(){let t;if(this.webSocketFactory)t=this.webSocketFactory();else{if(!this.brokerURL)throw new Error("Either brokerURL or webSocketFactory must be provided");t=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions())}return t.binaryType="arraybuffer",t}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===L.EXPONENTIAL&&(this._nextReconnectDelay=2*this._nextReconnectDelay,0!==this.maxReconnectDelay&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}deactivate(){var t=this;return(0,o.A)(function*(l={}){const f=l.force||!1,T=t.active;let y;if(t.state===O.INACTIVE)return t.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(t._changeState(O.DEACTIVATING),t._nextReconnectDelay=0,t._reconnector&&(clearTimeout(t._reconnector),t._reconnector=void 0),!t._stompHandler||t.webSocket.readyState===w.CLOSED)return t._changeState(O.INACTIVE),Promise.resolve();{const U=t._stompHandler.onWebSocketClose;y=new Promise((H,j)=>{t._stompHandler.onWebSocketClose=W=>{U(W),H()}})}return f?t._stompHandler?.discardWebsocket():T&&t._disposeStompHandler(),y}).apply(this,arguments)}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(t){this._checkConnection(),this._stompHandler.publish(t)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(t,l){this._checkConnection(),this._stompHandler.watchForReceipt(t,l)}subscribe(t,l,f={}){return this._checkConnection(),this._stompHandler.subscribe(t,l,f)}unsubscribe(t,l={}){this._checkConnection(),this._stompHandler.unsubscribe(t,l)}begin(t){return this._checkConnection(),this._stompHandler.begin(t)}commit(t){this._checkConnection(),this._stompHandler.commit(t)}abort(t){this._checkConnection(),this._stompHandler.abort(t)}ack(t,l,f={}){this._checkConnection(),this._stompHandler.ack(t,l,f)}nack(t,l,f={}){this._checkConnection(),this._stompHandler.nack(t,l,f)}}var h=e(25),a=e.n(h),C=e(7705);let I=(()=>{class b{constructor(){this.stompClient=null,this.connectionStatus$=new u.t(!1),this.subscriptions=new Map,this.messageSubjects=new Map,this.reconnectInterval=5e3,this.maxReconnectAttempts=10}connect(l){return new c.c(f=>{try{const T=`${s.c.apiUrl.replace("/api","")}/ws`;console.log("\u{1f4e1} Connecting to WebSocket via SockJS:",T),this.stompClient=new N({webSocketFactory:()=>new(a())(T),reconnectDelay:this.reconnectInterval,heartbeatIncoming:4e3,heartbeatOutgoing:4e3,debug:y=>{console.log("STOMP:",y)},onConnect:y=>{console.log("\u2705 WebSocket Connected via STOMP"),this.connectionStatus$.next(!0),f.next(!0),f.complete()},onStompError:y=>{console.error("\u274c STOMP error:",y.headers.message),console.error("Details:",y.body),this.connectionStatus$.next(!1),f.error(new Error(y.headers.message))},onDisconnect:()=>{console.log("WebSocket disconnected"),this.connectionStatus$.next(!1)},onWebSocketClose:()=>{console.log("WebSocket connection closed"),this.connectionStatus$.next(!1)}}),this.stompClient.activate()}catch(T){console.error("\u274c Error creating WebSocket connection:",T),f.error(T)}})}subscribe(l){return new c.c(f=>{if(!this.stompClient||!this.stompClient.connected)return void console.warn("WebSocket not connected, cannot subscribe to:",l);console.log("\u{1f4ec} Subscribing to:",l);const T=this.stompClient.subscribe(l,y=>{try{const U=JSON.parse(y.body);console.log("\u{1f4e9} Received message on",l,":",U),f.next(U)}catch(U){console.error("Error parsing message:",U),f.next(y.body)}});return this.subscriptions.set(l,T),()=>{console.log("Unsubscribing from:",l),T.unsubscribe(),this.subscriptions.delete(l)}})}send(l,f){this.stompClient&&this.stompClient.connected?this.stompClient.publish({destination:`/app${l}`,body:JSON.stringify(f)}):console.warn("WebSocket not connected, cannot send to:",l)}isConnected(){return this.connectionStatus$.asObservable()}disconnect(){this.stompClient&&(this.subscriptions.forEach((l,f)=>{console.log("Unsubscribing from:",f),l.unsubscribe()}),this.subscriptions.clear(),this.stompClient.deactivate(),this.stompClient=null),this.connectionStatus$.next(!1),this.messageSubjects.clear()}subscribeToTracking(l){return this.subscribe(`/topic/tracking/assignment/${l}`)}subscribeToDeliveryStatus(l){return this.subscribe(`/topic/delivery/status/${l}`)}subscribeToPartnerAssignments(l){return this.subscribe(`/queue/partner/${l}/new-assignment`)}subscribeToPartnerMessages(l){return this.subscribe(`/queue/partner/${l}/message`)}subscribeToCustomerNotifications(l){return this.subscribe(`/queue/customer/${l}/notifications`)}subscribeToEmergencyAlerts(){return this.subscribe("/topic/delivery/admin/emergency")}subscribeToAnnouncements(){return this.subscribe("/topic/delivery/announcements")}subscribeToChatMessages(l){return this.subscribe(`/topic/delivery/chat/${l}`)}subscribeToShopOrders(l){return this.subscribe(`/topic/shop/${l}/orders`)}static{this.\u0275fac=function(f){return new(f||b)}}static{this.\u0275prov=C.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})()},1993:m=>{m.exports="function"==typeof Object.create?function(e,u){u&&(e.super_=u,e.prototype=Object.create(u.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,u){if(u){e.super_=u;var c=function(){};c.prototype=u.prototype,e.prototype=new c,e.prototype.constructor=e}}},8629:(m,E)=>{"use strict";var e=Object.prototype.hasOwnProperty;function c(n){try{return decodeURIComponent(n.replace(/\+/g," "))}catch{return null}}function s(n){try{return encodeURIComponent(n)}catch{return null}}E.stringify=function i(n,r){r=r||"";var d,v,p=[];for(v in"string"!=typeof r&&(r="?"),n)if(e.call(n,v)){if(!(d=n[v])&&(null==d||isNaN(d))&&(d=""),v=s(v),d=s(d),null===v||null===d)continue;p.push(v+"="+d)}return p.length?r+p.join("&"):""},E.parse=function o(n){for(var d,r=/([^=?#&]+)=?([^&]*)/g,p={};d=r.exec(n);){var v=c(d[1]),g=c(d[2]);null===v||null===g||v in p||(p[v]=g)}return p}},5852:m=>{"use strict";m.exports=function(e,u){if(u=u.split(":")[0],!(e=+e))return!1;switch(u){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},25:(m,E,e)=>{"use strict";var u=e(1049);m.exports=e(9084)(u),"_sockjs_onload"in global&&setTimeout(global._sockjs_onload,1)},4542:(m,E,e)=>{"use strict";var u=e(1993),c=e(6886);function s(){c.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}u(s,c),m.exports=s},6964:(m,E,e)=>{"use strict";var u=e(1993),c=e(8551);function s(){c.call(this)}u(s,c),s.prototype.removeAllListeners=function(o){o?delete this._listeners[o]:this._listeners={}},s.prototype.once=function(o,i){var n=this,r=!1;this.on(o,function p(){n.removeListener(o,p),r||(r=!0,i.apply(this,arguments))})},s.prototype.emit=function(){var i=this._listeners[arguments[0]];if(i){for(var n=arguments.length,r=new Array(n-1),p=1;p<n;p++)r[p-1]=arguments[p];for(var d=0;d<i.length;d++)i[d].apply(this,r)}},s.prototype.on=s.prototype.addListener=c.prototype.addEventListener,s.prototype.removeListener=c.prototype.removeEventListener,m.exports.b=s},6886:m=>{"use strict";function E(e){this.type=e}E.prototype.initEvent=function(e,u,c){return this.type=e,this.bubbles=u,this.cancelable=c,this.timeStamp=+new Date,this},E.prototype.stopPropagation=function(){},E.prototype.preventDefault=function(){},E.CAPTURING_PHASE=1,E.AT_TARGET=2,E.BUBBLING_PHASE=3,m.exports=E},8551:m=>{"use strict";function E(){this._listeners={}}E.prototype.addEventListener=function(e,u){e in this._listeners||(this._listeners[e]=[]);var c=this._listeners[e];-1===c.indexOf(u)&&(c=c.concat([u])),this._listeners[e]=c},E.prototype.removeEventListener=function(e,u){var c=this._listeners[e];if(c){var s=c.indexOf(u);if(-1!==s)return void(c.length>1?this._listeners[e]=c.slice(0,s).concat(c.slice(s+1)):delete this._listeners[e])}},E.prototype.dispatchEvent=function(){var e=arguments[0],u=e.type,c=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+u]&&this["on"+u].apply(this,c),u in this._listeners)for(var s=this._listeners[u],o=0;o<s.length;o++)s[o].apply(this,c)},m.exports=E},5714:(m,E,e)=>{"use strict";var u=e(1993),c=e(6886);function s(o){c.call(this),this.initEvent("message",!1,!1),this.data=o}u(s,c),m.exports=s},183:(m,E,e)=>{"use strict";var u=e(9915);function c(s){this._transport=s,s.on("message",this._transportMessage.bind(this)),s.on("close",this._transportClose.bind(this))}c.prototype._transportClose=function(s,o){u.postMessage("c",JSON.stringify([s,o]))},c.prototype._transportMessage=function(s){u.postMessage("t",s)},c.prototype._send=function(s){this._transport.send(s)},c.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},m.exports=c},7958:(m,E,e)=>{"use strict";var u=e(2630),c=e(1059),s=e(183),o=e(7094),i=e(9915),n=e(6);m.exports=function(p,d){var g,v={};d.forEach(function(S){S.facadeTransport&&(v[S.facadeTransport.transportName]=S.facadeTransport)}),v[o.transportName]=o,p.bootstrap_iframe=function(){var S;i.currentWindowId=n.hash.slice(1),c.attachEvent("message",function(O){if(O.source===parent&&(typeof g>"u"&&(g=O.origin),O.origin===g)){var L;try{L=JSON.parse(O.data)}catch{return}if(L.windowId===i.currentWindowId)switch(L.type){case"s":var R;try{R=JSON.parse(L.data)}catch{break}var A=R[0],k=R[1],x=R[2],N=R[3];if(A!==p.version)throw new Error('Incompatible SockJS! Main site uses: "'+A+'", the iframe: "'+p.version+'".');if(!u.isOriginEqual(x,n.href)||!u.isOriginEqual(N,n.href))throw new Error("Can't connect to different domain from within an iframe. ("+n.href+", "+x+", "+N+")");S=new s(new v[k](x,N));break;case"m":S._send(L.data);break;case"c":S&&S._close(),S=null}}}),i.postMessage("s")}}},4036:(m,E,e)=>{"use strict";var u=e(6964).b,c=e(1993),s=e(7824);function i(n,r){u.call(this);var p=this,d=+new Date;this.xo=new r("GET",n),this.xo.once("finish",function(v,g){var S,w;if(200===v){if(w=+new Date-d,g)try{S=JSON.parse(g)}catch{}s.isObject(S)||(S={})}p.emit("finish",S,w),p.removeAllListeners()})}c(i,u),i.prototype.close=function(){this.removeAllListeners(),this.xo.close()},m.exports=i},7094:(m,E,e)=>{"use strict";var u=e(1993),c=e(6964).b,s=e(9781),o=e(4036);function i(n){var r=this;c.call(this),this.ir=new o(n,s),this.ir.once("finish",function(p,d){r.ir=null,r.emit("message",JSON.stringify([p,d]))})}u(i,c),i.transportName="iframe-info-receiver",i.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},m.exports=i},4934:(m,E,e)=>{"use strict";var u=e(6964).b,c=e(1993),s=e(1059),o=e(6531),i=e(7094);function r(p,d){var v=this;u.call(this);var g=function(){var S=v.ifr=new o(i.transportName,d,p);S.once("message",function(w){if(w){var O;try{O=JSON.parse(w)}catch{return v.emit("finish"),void v.close()}v.emit("finish",O[0],O[1])}v.close()}),S.once("close",function(){v.emit("finish"),v.close()})};global.document.body?g():s.attachEvent("load",g)}c(r,u),r.enabled=function(){return o.enabled()},r.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},m.exports=r},4779:(m,E,e)=>{"use strict";var u=e(6964).b,c=e(1993),s=e(2630),o=e(3103),i=e(53),n=e(9781),r=e(1749),p=e(4934),d=e(4036);function g(S,w){var O=this;u.call(this),setTimeout(function(){O.doXhr(S,w)},0)}c(g,u),g._getReceiver=function(S,w,O){return O.sameOrigin?new d(w,n):i.enabled?new d(w,i):o.enabled&&O.sameScheme?new d(w,o):p.enabled()?new p(S,w):new d(w,r)},g.prototype.doXhr=function(S,w){var O=this,L=s.addPath(S,"/info");this.xo=g._getReceiver(S,L,w),this.timeoutRef=setTimeout(function(){O._cleanup(!1),O.emit("finish")},g.timeout),this.xo.once("finish",function(R,A){O._cleanup(!0),O.emit("finish",R,A)})},g.prototype._cleanup=function(S){clearTimeout(this.timeoutRef),this.timeoutRef=null,!S&&this.xo&&this.xo.close(),this.xo=null},g.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},g.timeout=8e3,m.exports=g},6:m=>{"use strict";m.exports=global.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}},9084:(m,E,e)=>{"use strict";e(7015);var k,u=e(3711),c=e(1993),s=e(6944),o=e(196),i=e(2630),n=e(1059),r=e(2850),p=e(7824),d=e(9427),v=e(9697),g=e(6886),S=e(8551),w=e(6),O=e(4542),L=e(5714),R=e(4779);function x(h,a,C){if(!(this instanceof x))return new x(h,a,C);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");S.call(this),this.readyState=x.CONNECTING,this.extensions="",this.protocol="",(C=C||{}).protocols_whitelist&&v.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=C.transports,this._transportOptions=C.transportOptions||{},this._timeout=C.timeout||0;var I=C.sessionId||8;if("function"==typeof I)this._generateSessionId=I;else{if("number"!=typeof I)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return s.string(I)}}this._server=C.server||s.numberString(1e3);var b=new u(h);if(!b.host||!b.protocol)throw new SyntaxError("The URL '"+h+"' is invalid");if(b.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==b.protocol&&"https:"!==b.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+b.protocol+"' is not allowed.");if("https:"===w.protocol&&"https:"!==b.protocol&&!i.isLoopbackAddr(b.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");a?Array.isArray(a)||(a=[a]):a=[];var l=a.sort();l.forEach(function(T,y){if(!T)throw new SyntaxError("The protocols entry '"+T+"' is invalid.");if(y<l.length-1&&T===l[y+1])throw new SyntaxError("The protocols entry '"+T+"' is duplicated.")});var f=i.getOrigin(w.href);this._origin=f?f.toLowerCase():null,b.set("pathname",b.pathname.replace(/\/+$/,"")),this.url=b.href,this._urlInfo={nullOrigin:!d.hasDomain(),sameOrigin:i.isOriginEqual(this.url,w.href),sameScheme:i.isSchemeEqual(this.url,w.href)},this._ir=new R(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function N(h){return 1e3===h||h>=3e3&&h<=4999}c(x,S),x.prototype.close=function(h,a){if(h&&!N(h))throw new Error("InvalidAccessError: Invalid code");if(a&&a.length>123)throw new SyntaxError("reason argument has an invalid length");this.readyState!==x.CLOSING&&this.readyState!==x.CLOSED&&this._close(h||1e3,a||"Normal closure",!0)},x.prototype.send=function(h){if("string"!=typeof h&&(h=""+h),this.readyState===x.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===x.OPEN&&this._transport.send(o.quote(h))},x.version=e(8469),x.CONNECTING=0,x.OPEN=1,x.CLOSING=2,x.CLOSED=3,x.prototype._receiveInfo=function(h,a){if(this._ir=null,h){this._rto=this.countRTO(a),this._transUrl=h.base_url?h.base_url:this.url,h=p.extend(h,this._urlInfo);var C=k.filterToEnabled(this._transportsWhitelist,h);this._transports=C.main,this._connect()}else this._close(1002,"Cannot connect to server")},x.prototype._connect=function(){for(var h=this._transports.shift();h;h=this._transports.shift()){if(h.needBody&&(!global.document.body||typeof global.document.readyState<"u"&&"complete"!==global.document.readyState&&"interactive"!==global.document.readyState))return this._transports.unshift(h),void n.attachEvent("load",this._connect.bind(this));var a=Math.max(this._timeout,this._rto*h.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),a);var b=new h(i.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),this._transUrl,this._transportOptions[h.transportName]);return b.on("message",this._transportMessage.bind(this)),b.once("close",this._transportClose.bind(this)),b.transportName=h.transportName,void(this._transport=b)}this._close(2e3,"All transports failed",!1)},x.prototype._transportTimeout=function(){this.readyState===x.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},x.prototype._transportMessage=function(h){var b,a=this,C=h.slice(0,1),I=h.slice(1);switch(C){case"o":return void this._open();case"h":return void this.dispatchEvent(new g("heartbeat"))}if(I)try{b=JSON.parse(I)}catch{}if(!(typeof b>"u"))switch(C){case"a":Array.isArray(b)&&b.forEach(function(t){a.dispatchEvent(new L(t))});break;case"m":this.dispatchEvent(new L(b));break;case"c":Array.isArray(b)&&2===b.length&&this._close(b[0],b[1],!0)}},x.prototype._transportClose=function(h,a){this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),N(h)||2e3===h||this.readyState!==x.CONNECTING?this._close(h,a):this._connect()},x.prototype._open=function(){this.readyState===x.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=x.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new g("open"))):this._close(1006,"Server lost session")},x.prototype._close=function(h,a,C){var I=!1;if(this._ir&&(I=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===x.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=x.CLOSING,setTimeout(function(){this.readyState=x.CLOSED,I&&this.dispatchEvent(new g("error"));var b=new O("close");b.wasClean=C||!1,b.code=h||1e3,b.reason=a,this.dispatchEvent(b),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},x.prototype.countRTO=function(h){return h>100?4*h:300+h},m.exports=function(h){return k=r(h),e(7958)(x,h),x}},7015:()=>{"use strict";var p,m=Array.prototype,E=Object.prototype,e=Function.prototype,u=String.prototype,c=m.slice,s=E.toString,o=function(h){return"[object Function]"===E.toString.call(h)},n=function(a){return"[object String]"===s.call(a)},r=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}();p=r?function(h,a,C,I){!I&&a in h||Object.defineProperty(h,a,{configurable:!0,enumerable:!1,writable:!0,value:C})}:function(h,a,C,I){!I&&a in h||(h[a]=C)};var d=function(h,a,C){for(var I in a)E.hasOwnProperty.call(a,I)&&p(h,I,a[I],C)},v=function(h){if(null==h)throw new TypeError("can't convert "+h+" to object");return Object(h)};function w(){}d(e,{bind:function(a){var C=this;if(!o(C))throw new TypeError("Function.prototype.bind called on incompatible "+C);for(var I=c.call(arguments,1),t=Math.max(0,C.length-I.length),l=[],f=0;f<t;f++)l.push("$"+f);var T=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof T){var y=C.apply(this,I.concat(c.call(arguments)));return Object(y)===y?y:this}return C.apply(a,I.concat(c.call(arguments)))});return C.prototype&&(w.prototype=C.prototype,T.prototype=new w,w.prototype=null),T}}),d(Array,{isArray:function(a){return"[object Array]"===s.call(a)}});var a,C,I,O=Object("a"),L="a"!==O[0]||!(0 in O);d(m,{forEach:function(a){var C=v(this),I=L&&n(this)?this.split(""):C,b=arguments[1],t=-1,l=I.length>>>0;if(!o(a))throw new TypeError;for(;++t<l;)t in I&&a.call(b,I[t],t,C)}},(C=!0,I=!0,(a=m.forEach)&&(a.call("foo",function(b,t,l){"object"!=typeof l&&(C=!1)}),a.call([1],function(){I="string"==typeof this},"x")),!(a&&C&&I)));var A=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);d(m,{indexOf:function(a){var C=L&&n(this)?this.split(""):v(this),I=C.length>>>0;if(!I)return-1;var b=0;for(arguments.length>1&&(b=function g(h){var a=+h;return a!=a?a=0:0!==a&&a!==1/0&&a!==-1/0&&(a=(a>0||-1)*Math.floor(Math.abs(a))),a}(arguments[1])),b=b>=0?b:Math.max(0,I+b);b<I;b++)if(b in C&&C[b]===a)return b;return-1}},A);var h,k=u.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(h=void 0===/()??/.exec("")[1],u.split=function(a,C){var I=this;if(void 0===a&&0===C)return[];if("[object RegExp]"!==s.call(a))return k.call(this,a,C);var f,T,y,U,b=[],t=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":""),l=0;for(a=new RegExp(a.source,t+"g"),I+="",h||(f=new RegExp("^"+a.source+"$(?!\\s)",t)),C=void 0===C?-1>>>0:function S(h){return h>>>0}(C);(T=a.exec(I))&&!((y=T.index+T[0].length)>l&&(b.push(I.slice(l,T.index)),!h&&T.length>1&&T[0].replace(f,function(){for(var H=1;H<arguments.length-2;H++)void 0===arguments[H]&&(T[H]=void 0)}),T.length>1&&T.index<I.length&&m.push.apply(b,T.slice(1)),U=T[0].length,l=y,b.length>=C));)a.lastIndex===T.index&&a.lastIndex++;return l===I.length?(U||!a.test(""))&&b.push(""):b.push(I.slice(l)),b.length>C?b.slice(0,C):b}):"0".split(void 0,0).length&&(u.split=function(a,C){return void 0===a&&0===C?[]:k.call(this,a,C)});var x=u.substr;d(u,{substr:function(a,C){return x.call(this,a<0&&(a=this.length+a)<0?0:a,C)}},"".substr&&"b"!=="0b".substr(-1))},1049:(m,E,e)=>{"use strict";m.exports=[e(1240),e(9720),e(3356),e(6178),e(5568)(e(6178)),e(8940),e(5568)(e(8940)),e(5543),e(5483),e(5568)(e(5543)),e(9143)]},5067:(m,E,e)=>{"use strict";var u=e(6964).b,c=e(1993),s=e(1059),o=e(2630),i=global.XMLHttpRequest;function r(v,g,S,w){var O=this;u.call(this),setTimeout(function(){O._start(v,g,S,w)},0)}c(r,u),r.prototype._start=function(v,g,S,w){var O=this;try{this.xhr=new i}catch{}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();g=o.addQuery(g,"t="+ +new Date),this.unloadRef=s.unloadAdd(function(){O._cleanup(!0)});try{this.xhr.open(v,g,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){O.emit("finish",0,""),O._cleanup(!1)})}catch(R){return this.emit("finish",0,""),void this._cleanup(!1)}if((!w||!w.noCredentials)&&r.supportsCORS&&(this.xhr.withCredentials=!0),w&&w.headers)for(var L in w.headers)this.xhr.setRequestHeader(L,w.headers[L]);this.xhr.onreadystatechange=function(){if(O.xhr){var A,k,R=O.xhr;switch(R.readyState){case 3:try{k=R.status,A=R.responseText}catch{}1223===k&&(k=204),200===k&&A&&A.length>0&&O.emit("chunk",k,A);break;case 4:1223===(k=R.status)&&(k=204),(12005===k||12029===k)&&(k=0),O.emit("finish",k,R.responseText),O._cleanup(!1)}}};try{O.xhr.send(S)}catch{O.emit("finish",0,""),O._cleanup(!1)}},r.prototype._cleanup=function(v){if(this.xhr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),v)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},r.prototype.close=function(){this._cleanup(!0)},r.enabled=!!i;var p=["Active"].concat("Object").join("X");!r.enabled&&p in global&&(r.enabled=!!new(i=function(){try{return new global[p]("Microsoft.XMLHTTP")}catch{return null}}));var d=!1;try{d="withCredentials"in new i}catch{}r.supportsCORS=d,m.exports=r},3521:m=>{m.exports=global.EventSource},6419:m=>{"use strict";var E=global.WebSocket||global.MozWebSocket;m.exports=E?function(u){return new E(u)}:void 0},6178:(m,E,e)=>{"use strict";var u=e(1993),c=e(6599),s=e(3024),o=e(53),i=e(3521);function n(r){if(!n.enabled())throw new Error("Transport created when disabled");c.call(this,r,"/eventsource",s,o)}u(n,c),n.enabled=function(){return!!i},n.transportName="eventsource",n.roundTrips=2,m.exports=n},8940:(m,E,e)=>{"use strict";var u=e(1993),c=e(90),s=e(9781),o=e(6599);function i(n){if(!c.enabled)throw new Error("Transport created when disabled");o.call(this,n,"/htmlfile",c,s)}u(i,o),i.enabled=function(n){return c.enabled&&n.sameOrigin},i.transportName="htmlfile",i.roundTrips=2,m.exports=i},6531:(m,E,e)=>{"use strict";var u=e(1993),c=e(6964).b,s=e(8469),o=e(2630),i=e(9915),n=e(1059),r=e(6944);function d(v,g,S){if(!d.enabled())throw new Error("Transport created when disabled");c.call(this);var w=this;this.origin=o.getOrigin(S),this.baseUrl=S,this.transUrl=g,this.transport=v,this.windowId=r.string(8);var O=o.addPath(S,"/iframe.html")+"#"+this.windowId;this.iframeObj=i.createIframe(O,function(L){w.emit("close",1006,"Unable to load an iframe ("+L+")"),w.close()}),this.onmessageCallback=this._message.bind(this),n.attachEvent("message",this.onmessageCallback)}u(d,c),d.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){n.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},d.prototype._message=function(v){if(o.isOriginEqual(v.origin,this.origin)){var g;try{g=JSON.parse(v.data)}catch{return}if(g.windowId===this.windowId)switch(g.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([s,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",g.data);break;case"c":var S;try{S=JSON.parse(g.data)}catch{return}this.emit("close",S[0],S[1]),this.close()}}},d.prototype.postMessage=function(v,g){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:v,data:g||""}),this.origin)},d.prototype.send=function(v){this.postMessage("m",v)},d.enabled=function(){return i.iframeEnabled},d.transportName="iframe",d.roundTrips=2,m.exports=d},9143:(m,E,e)=>{"use strict";var u=e(1993),c=e(5222),s=e(979),o=e(1759);function i(n){if(!i.enabled())throw new Error("Transport created when disabled");c.call(this,n,"/jsonp",o,s)}u(i,c),i.enabled=function(){return!!global.document},i.transportName="jsonp-polling",i.roundTrips=1,i.needBody=!0,m.exports=i},6599:(m,E,e)=>{"use strict";var u=e(1993),c=e(2630),s=e(5222);function n(r,p,d,v){s.call(this,r,p,function i(r){return function(p,d,v){var g={};"string"==typeof d&&(g.headers={"Content-type":"text/plain"});var S=c.addPath(p,"/xhr_send"),w=new r("POST",S,d,g);return w.once("finish",function(O){if(w=null,200!==O&&204!==O)return v(new Error("http status "+O));v()}),function(){w.close(),w=null;var O=new Error("Aborted");O.code=1e3,v(O)}}}(v),d,v)}u(n,s),m.exports=n},5624:(m,E,e)=>{"use strict";var u=e(1993),c=e(6964).b;function o(i,n){c.call(this),this.sendBuffer=[],this.sender=n,this.url=i}u(o,c),o.prototype.send=function(i){this.sendBuffer.push(i),this.sendStop||this.sendSchedule()},o.prototype.sendScheduleWait=function(){var n,i=this;this.sendStop=function(){i.sendStop=null,clearTimeout(n)},n=setTimeout(function(){i.sendStop=null,i.sendSchedule()},25)},o.prototype.sendSchedule=function(){var i=this;if(this.sendBuffer.length>0){var n="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,n,function(r){i.sendStop=null,r?(i.emit("close",r.code||1006,"Sending error: "+r),i.close()):i.sendScheduleWait()}),this.sendBuffer=[]}},o.prototype._cleanup=function(){this.removeAllListeners()},o.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},m.exports=o},5568:(m,E,e)=>{"use strict";var u=e(1993),c=e(6531),s=e(7824);m.exports=function(o){function i(n,r){c.call(this,o.transportName,n,r)}return u(i,c),i.enabled=function(n,r){if(!global.document)return!1;var p=s.extend({},r);return p.sameOrigin=!0,o.enabled(p)&&c.enabled()},i.transportName="iframe-"+o.transportName,i.needBody=!0,i.roundTrips=c.roundTrips+o.roundTrips-1,i.facadeTransport=o,i}},3500:(m,E,e)=>{"use strict";var u=e(1993),c=e(6964).b;function o(i,n,r){c.call(this),this.Receiver=i,this.receiveUrl=n,this.AjaxObject=r,this._scheduleReceiver()}u(o,c),o.prototype._scheduleReceiver=function(){var i=this,n=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);n.on("message",function(r){i.emit("message",r)}),n.once("close",function(r,p){i.poll=n=null,i.pollIsClosing||("network"===p?i._scheduleReceiver():(i.emit("close",r||1006,p),i.removeAllListeners()))})},o.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},m.exports=o},5222:(m,E,e)=>{"use strict";var u=e(1993),c=e(2630),s=e(5624),o=e(3500);function n(r,p,d,v,g){var S=c.addPath(r,p),w=this;s.call(this,r,d),this.poll=new o(v,S,g),this.poll.on("message",function(O){w.emit("message",O)}),this.poll.once("close",function(O,L){w.poll=null,w.emit("close",O,L),w.close()})}u(n,s),n.prototype.close=function(){s.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},m.exports=n},3024:(m,E,e)=>{"use strict";var u=e(1993),c=e(6964).b,s=e(3521);function i(n){c.call(this);var r=this,p=this.es=new s(n);p.onmessage=function(d){r.emit("message",decodeURI(d.data))},p.onerror=function(d){var v=2!==p.readyState?"network":"permanent";r._cleanup(),r._close(v)}}u(i,c),i.prototype.abort=function(){this._cleanup(),this._close("user")},i.prototype._cleanup=function(){var n=this.es;n&&(n.onmessage=n.onerror=null,n.close(),this.es=null)},i.prototype._close=function(n){var r=this;setTimeout(function(){r.emit("close",null,n),r.removeAllListeners()},200)},m.exports=i},90:(m,E,e)=>{"use strict";var u=e(1993),c=e(9915),s=e(2630),o=e(6964).b,i=e(6944);function r(d){o.call(this);var v=this;c.polluteGlobalNamespace(),this.id="a"+i.string(6),d=s.addQuery(d,"c="+decodeURIComponent(c.WPrefix+"."+this.id));var g=r.htmlfileEnabled?c.createHtmlfile:c.createIframe;global[c.WPrefix][this.id]={start:function(){v.iframeObj.loaded()},message:function(S){v.emit("message",S)},stop:function(){v._cleanup(),v._close("network")}},this.iframeObj=g(d,function(){v._cleanup(),v._close("permanent")})}u(r,o),r.prototype.abort=function(){this._cleanup(),this._close("user")},r.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete global[c.WPrefix][this.id]},r.prototype._close=function(d){this.emit("close",null,d),this.removeAllListeners()},r.htmlfileEnabled=!1;var p=["Active"].concat("Object").join("X");if(p in global)try{r.htmlfileEnabled=!!new global[p]("htmlfile")}catch{}r.enabled=r.htmlfileEnabled||c.iframeEnabled,m.exports=r},979:(m,E,e)=>{"use strict";var u=e(9915),c=e(6944),s=e(9427),o=e(2630),i=e(1993),n=e(6964).b;function p(d){var v=this;n.call(this),u.polluteGlobalNamespace(),this.id="a"+c.string(6);var g=o.addQuery(d,"c="+encodeURIComponent(u.WPrefix+"."+this.id));global[u.WPrefix][this.id]=this._callback.bind(this),this._createScript(g),this.timeoutId=setTimeout(function(){v._abort(new Error("JSONP script loaded abnormally (timeout)"))},p.timeout)}i(p,n),p.prototype.abort=function(){if(global[u.WPrefix][this.id]){var d=new Error("JSONP user aborted read");d.code=1e3,this._abort(d)}},p.timeout=35e3,p.scriptErrorTimeout=1e3,p.prototype._callback=function(d){this._cleanup(),!this.aborting&&(d&&this.emit("message",d),this.emit("close",null,"network"),this.removeAllListeners())},p.prototype._abort=function(d){this._cleanup(),this.aborting=!0,this.emit("close",d.code,d.message),this.removeAllListeners()},p.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var d=this.script;d.parentNode.removeChild(d),d.onreadystatechange=d.onerror=d.onload=d.onclick=null,this.script=null}delete global[u.WPrefix][this.id]},p.prototype._scriptError=function(){var d=this;this.errorTimer||(this.errorTimer=setTimeout(function(){d.loadedOkay||d._abort(new Error("JSONP script loaded abnormally (onerror)"))},p.scriptErrorTimeout))},p.prototype._createScript=function(d){var S,v=this,g=this.script=global.document.createElement("script");if(g.id="a"+c.string(8),g.src=d,g.type="text/javascript",g.charset="UTF-8",g.onerror=this._scriptError.bind(this),g.onload=function(){v._abort(new Error("JSONP script loaded abnormally (onload)"))},g.onreadystatechange=function(){if(/loaded|closed/.test(g.readyState)){if(g&&g.htmlFor&&g.onclick){v.loadedOkay=!0;try{g.onclick()}catch{}}g&&v._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof g.async>"u"&&global.document.attachEvent)if(s.isOpera())(S=this.script2=global.document.createElement("script")).text="try{var a = document.getElementById('"+g.id+"'); if(a)a.onerror();}catch(x){};",g.async=S.async=!1;else{try{g.htmlFor=g.id,g.event="onclick"}catch{}g.async=!0}typeof g.async<"u"&&(g.async=!0);var w=global.document.getElementsByTagName("head")[0];w.insertBefore(g,w.firstChild),S&&w.insertBefore(S,w.firstChild)},m.exports=p},5847:(m,E,e)=>{"use strict";var u=e(1993),c=e(6964).b;function o(i,n){c.call(this);var r=this;this.bufferPosition=0,this.xo=new n("POST",i,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(p,d){r._chunkHandler(p,d),r.xo=null,r.emit("close",null,200===p?"network":"permanent"),r._cleanup()})}u(o,c),o.prototype._chunkHandler=function(i,n){if(200===i&&n)for(var r=-1;;this.bufferPosition+=r+1){var p=n.slice(this.bufferPosition);if(-1===(r=p.indexOf("\n")))break;var d=p.slice(0,r);d&&this.emit("message",d)}},o.prototype._cleanup=function(){this.removeAllListeners()},o.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},m.exports=o},1759:(m,E,e)=>{"use strict";var o,i,u=e(6944),c=e(2630);m.exports=function(p,d,v){o||function r(){(o=global.document.createElement("form")).style.display="none",o.style.position="absolute",o.method="POST",o.enctype="application/x-www-form-urlencoded",o.acceptCharset="UTF-8",(i=global.document.createElement("textarea")).name="d",o.appendChild(i),global.document.body.appendChild(o)}();var g="a"+u.string(8);o.target=g,o.action=c.addQuery(c.addPath(p,"/jsonp_send"),"i="+g);var S=function n(p){try{return global.document.createElement('<iframe name="'+p+'">')}catch{var d=global.document.createElement("iframe");return d.name=p,d}}(g);S.id=g,S.style.display="none",o.appendChild(S);try{i.value=d}catch{}o.submit();var w=function(O){S.onerror&&(S.onreadystatechange=S.onerror=S.onload=null,setTimeout(function(){S.parentNode.removeChild(S),S=null},500),i.value="",v(O))};return S.onerror=function(){w()},S.onload=function(){w()},S.onreadystatechange=function(O){"complete"===S.readyState&&w()},function(){w(new Error("Aborted"))}}},3103:(m,E,e)=>{"use strict";var u=e(6964).b,c=e(1993),s=e(1059),o=e(9427),i=e(2630);function r(p,d,v){var g=this;u.call(this),setTimeout(function(){g._start(p,d,v)},0)}c(r,u),r.prototype._start=function(p,d,v){var g=this,S=new global.XDomainRequest;d=i.addQuery(d,"t="+ +new Date),S.onerror=function(){g._error()},S.ontimeout=function(){g._error()},S.onprogress=function(){g.emit("chunk",200,S.responseText)},S.onload=function(){g.emit("finish",200,S.responseText),g._cleanup(!1)},this.xdr=S,this.unloadRef=s.unloadAdd(function(){g._cleanup(!0)});try{this.xdr.open(p,d),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(v)}catch{this._error()}},r.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},r.prototype._cleanup=function(p){if(this.xdr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,p)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},r.prototype.close=function(){this._cleanup(!0)},r.enabled=!(!global.XDomainRequest||!o.hasDomain()),m.exports=r},53:(m,E,e)=>{"use strict";var u=e(1993),c=e(5067);function s(o,i,n,r){c.call(this,o,i,n,r)}u(s,c),s.enabled=c.enabled&&c.supportsCORS,m.exports=s},1749:(m,E,e)=>{"use strict";var u=e(6964).b;function s(){var o=this;u.call(this),this.to=setTimeout(function(){o.emit("finish",200,"{}")},s.timeout)}e(1993)(s,u),s.prototype.close=function(){clearTimeout(this.to)},s.timeout=2e3,m.exports=s},9781:(m,E,e)=>{"use strict";var u=e(1993),c=e(5067);function s(o,i,n){c.call(this,o,i,n,{noCredentials:!0})}u(s,c),s.enabled=c.enabled,m.exports=s},1240:(m,E,e)=>{"use strict";var u=e(1059),c=e(2630),s=e(1993),o=e(6964).b,i=e(6419);function r(p,d,v){if(!r.enabled())throw new Error("Transport created when disabled");o.call(this);var g=this,S=c.addPath(p,"/websocket");S="https"===S.slice(0,5)?"wss"+S.slice(5):"ws"+S.slice(4),this.url=S,this.ws=new i(this.url,[],v),this.ws.onmessage=function(w){g.emit("message",w.data)},this.unloadRef=u.unloadAdd(function(){g.ws.close()}),this.ws.onclose=function(w){g.emit("close",w.code,w.reason),g._cleanup()},this.ws.onerror=function(w){g.emit("close",1006,"WebSocket connection broken"),g._cleanup()}}s(r,o),r.prototype.send=function(p){this.ws.send("["+p+"]")},r.prototype.close=function(){var p=this.ws;this._cleanup(),p&&p.close()},r.prototype._cleanup=function(){var p=this.ws;p&&(p.onmessage=p.onclose=p.onerror=null),u.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},r.enabled=function(){return!!i},r.transportName="websocket",r.roundTrips=2,m.exports=r},5483:(m,E,e)=>{"use strict";var u=e(1993),c=e(6599),s=e(3356),o=e(5847),i=e(3103);function n(r){if(!i.enabled)throw new Error("Transport created when disabled");c.call(this,r,"/xhr",o,i)}u(n,c),n.enabled=s.enabled,n.transportName="xdr-polling",n.roundTrips=2,m.exports=n},3356:(m,E,e)=>{"use strict";var u=e(1993),c=e(6599),s=e(5847),o=e(3103);function i(n){if(!o.enabled)throw new Error("Transport created when disabled");c.call(this,n,"/xhr_streaming",s,o)}u(i,c),i.enabled=function(n){return!n.cookie_needed&&!n.nullOrigin&&o.enabled&&n.sameScheme},i.transportName="xdr-streaming",i.roundTrips=2,m.exports=i},5543:(m,E,e)=>{"use strict";var u=e(1993),c=e(6599),s=e(5847),o=e(53),i=e(9781);function n(r){if(!i.enabled&&!o.enabled)throw new Error("Transport created when disabled");c.call(this,r,"/xhr",s,o)}u(n,c),n.enabled=function(r){return!r.nullOrigin&&(!(!i.enabled||!r.sameOrigin)||o.enabled)},n.transportName="xhr-polling",n.roundTrips=2,m.exports=n},9720:(m,E,e)=>{"use strict";var u=e(1993),c=e(6599),s=e(5847),o=e(53),i=e(9781),n=e(9427);function r(p){if(!i.enabled&&!o.enabled)throw new Error("Transport created when disabled");c.call(this,p,"/xhr_streaming",s,o)}u(r,c),r.enabled=function(p){return!p.nullOrigin&&!n.isOpera()&&o.enabled},r.transportName="xhr-streaming",r.roundTrips=2,r.needBody=!!global.document,m.exports=r},5893:m=>{"use strict";m.exports.randomBytes=global.crypto&&global.crypto.getRandomValues?function(E){var e=new Uint8Array(E);return global.crypto.getRandomValues(e),e}:function(E){for(var e=new Array(E),u=0;u<E;u++)e[u]=Math.floor(256*Math.random());return e}},9427:m=>{"use strict";m.exports={isOpera:function(){return global.navigator&&/opera/i.test(global.navigator.userAgent)},isKonqueror:function(){return global.navigator&&/konqueror/i.test(global.navigator.userAgent)},hasDomain:function(){if(!global.document)return!0;try{return!!global.document.domain}catch{return!1}}}},196:m=>{"use strict";var e,E=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;m.exports={quote:function(c){var s=JSON.stringify(c);return E.lastIndex=0,E.test(s)?(e||(e=function(c){var s,o={},i=[];for(s=0;s<65536;s++)i.push(String.fromCharCode(s));return c.lastIndex=0,i.join("").replace(c,function(n){return o[n]="\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4),""}),c.lastIndex=0,o}(E)),s.replace(E,function(o){return e[o]})):s}}},1059:(m,E,e)=>{"use strict";var u=e(6944),c={},s=!1,o=global.chrome&&global.chrome.app&&global.chrome.app.runtime;m.exports={attachEvent:function(n,r){typeof global.addEventListener<"u"?global.addEventListener(n,r,!1):global.document&&global.attachEvent&&(global.document.attachEvent("on"+n,r),global.attachEvent("on"+n,r))},detachEvent:function(n,r){typeof global.addEventListener<"u"?global.removeEventListener(n,r,!1):global.document&&global.detachEvent&&(global.document.detachEvent("on"+n,r),global.detachEvent("on"+n,r))},unloadAdd:function(n){if(o)return null;var r=u.string(8);return c[r]=n,s&&setTimeout(this.triggerUnloadCallbacks,0),r},unloadDel:function(n){n in c&&delete c[n]},triggerUnloadCallbacks:function(){for(var n in c)c[n](),delete c[n]}},o||m.exports.attachEvent("unload",function(){s||(s=!0,m.exports.triggerUnloadCallbacks())})},9915:(m,E,e)=>{"use strict";var u=e(1059),c=e(9427);m.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){m.exports.WPrefix in global||(global[m.exports.WPrefix]={})},postMessage:function(o,i){global.parent!==global&&global.parent.postMessage(JSON.stringify({windowId:m.exports.currentWindowId,type:o,data:i||""}),"*")},createIframe:function(o,i){var r,p,n=global.document.createElement("iframe"),d=function(){clearTimeout(r);try{n.onload=null}catch{}n.onerror=null},v=function(){n&&(d(),setTimeout(function(){n&&n.parentNode.removeChild(n),n=null},0),u.unloadDel(p))},g=function(w){n&&(v(),i(w))};return n.src=o,n.style.display="none",n.style.position="absolute",n.onerror=function(){g("onerror")},n.onload=function(){clearTimeout(r),r=setTimeout(function(){g("onload timeout")},2e3)},global.document.body.appendChild(n),r=setTimeout(function(){g("timeout")},15e3),p=u.unloadAdd(v),{post:function(w,O){setTimeout(function(){try{n&&n.contentWindow&&n.contentWindow.postMessage(w,O)}catch{}},0)},cleanup:v,loaded:d}},createHtmlfile:function(o,i){var p,d,v,n=["Active"].concat("Object").join("X"),r=new global[n]("htmlfile"),g=function(){clearTimeout(p),v.onerror=null},S=function(){r&&(g(),u.unloadDel(d),v.parentNode.removeChild(v),v=r=null,CollectGarbage())},w=function(R){r&&(S(),i(R))};r.open(),r.write('<html><script>document.domain="'+global.document.domain+'";<\/script></html>'),r.close(),r.parentWindow[m.exports.WPrefix]=global[m.exports.WPrefix];var L=r.createElement("div");return r.body.appendChild(L),v=r.createElement("iframe"),L.appendChild(v),v.src=o,v.onerror=function(){w("onerror")},p=setTimeout(function(){w("timeout")},15e3),d=u.unloadAdd(S),{post:function(R,A){try{setTimeout(function(){v&&v.contentWindow&&v.contentWindow.postMessage(R,A)},0)}catch{}},cleanup:S,loaded:g}}},m.exports.iframeEnabled=!1,global.document&&(m.exports.iframeEnabled=("function"==typeof global.postMessage||"object"==typeof global.postMessage)&&!c.isKonqueror())},9697:m=>{"use strict";var E={};["log","debug","warn"].forEach(function(e){var u;try{u=global.console&&global.console[e]&&global.console[e].apply}catch{}E[e]=u?function(){return global.console[e].apply(global.console,arguments)}:"log"===e?function(){}:E.log}),m.exports=E},7824:m=>{"use strict";m.exports={isObject:function(E){var e=typeof E;return"function"===e||"object"===e&&!!E},extend:function(E){if(!this.isObject(E))return E;for(var e,u,c=1,s=arguments.length;c<s;c++)for(u in e=arguments[c])Object.prototype.hasOwnProperty.call(e,u)&&(E[u]=e[u]);return E}}},6944:(m,E,e)=>{"use strict";var u=e(5893);m.exports={string:function(s){for(var i=u.randomBytes(s),n=[],r=0;r<s;r++)n.push("abcdefghijklmnopqrstuvwxyz012345".substr(i[r]%32,1));return n.join("")},number:function(s){return Math.floor(Math.random()*s)},numberString:function(s){var o=(""+(s-1)).length;return(new Array(o+1).join("0")+this.number(s)).slice(-o)}}},2850:m=>{"use strict";m.exports=function(e){return{filterToEnabled:function(u,c){var s={main:[],facade:[]};return u?"string"==typeof u&&(u=[u]):u=[],e.forEach(function(o){if(o){if("websocket"===o.transportName&&!1===c.websocket)return;if(u.length&&-1===u.indexOf(o.transportName))return;o.enabled(c)&&(s.main.push(o),o.facadeTransport&&s.facade.push(o.facadeTransport))}}),s}}}},2630:(m,E,e)=>{"use strict";var u=e(3711);m.exports={getOrigin:function(s){if(!s)return null;var o=new u(s);if("file:"===o.protocol)return null;var i=o.port;return i||(i="https:"===o.protocol?"443":"80"),o.protocol+"//"+o.hostname+":"+i},isOriginEqual:function(s,o){return this.getOrigin(s)===this.getOrigin(o)},isSchemeEqual:function(s,o){return s.split(":")[0]===o.split(":")[0]},addPath:function(s,o){var i=s.split("?");return i[0]+o+(i[1]?"?"+i[1]:"")},addQuery:function(s,o){return s+(-1===s.indexOf("?")?"?"+o:"&"+o)},isLoopbackAddr:function(s){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(s)||/^\[::1\]$/.test(s)}}},8469:m=>{m.exports="1.6.1"},3711:(m,E,e)=>{"use strict";var u=e(5852),c=e(8629),s=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o=/[\n\r\t]/g,i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,n=/:\d+$/,r=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,p=/^[a-zA-Z]:/;function d(x){return(x||"").toString().replace(s,"")}var v=[["#","hash"],["?","query"],function(N,h){return w(h.protocol)?N.replace(/\\/g,"/"):N},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],g={hash:1,query:1};function S(x){var N;N=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var I,a={},C=typeof(x=x||N.location||{});if("blob:"===x.protocol)a=new R(unescape(x.pathname),{});else if("string"===C)for(I in a=new R(x,{}),g)delete a[I];else if("object"===C){for(I in x)I in g||(a[I]=x[I]);void 0===a.slashes&&(a.slashes=i.test(x.href))}return a}function w(x){return"file:"===x||"ftp:"===x||"http:"===x||"https:"===x||"ws:"===x||"wss:"===x}function O(x,N){x=(x=d(x)).replace(o,""),N=N||{};var t,h=r.exec(x),a=h[1]?h[1].toLowerCase():"",C=!!h[2],I=!!h[3],b=0;return C?I?(t=h[2]+h[3]+h[4],b=h[2].length+h[3].length):(t=h[2]+h[4],b=h[2].length):I?(t=h[3]+h[4],b=h[3].length):t=h[4],"file:"===a?b>=2&&(t=t.slice(2)):w(a)?t=h[4]:a?C&&(t=t.slice(2)):b>=2&&w(N.protocol)&&(t=h[4]),{protocol:a,slashes:C||w(a),slashesCount:b,rest:t}}function R(x,N,h){if(x=(x=d(x)).replace(o,""),!(this instanceof R))return new R(x,N,h);var a,C,I,b,t,l,f=v.slice(),T=typeof N,y=this,U=0;for("object"!==T&&"string"!==T&&(h=N,N=null),h&&"function"!=typeof h&&(h=c.parse),a=!(C=O(x||"",N=S(N))).protocol&&!C.slashes,y.slashes=C.slashes||a&&N.slashes,y.protocol=C.protocol||N.protocol||"",x=C.rest,("file:"===C.protocol&&(2!==C.slashesCount||p.test(x))||!C.slashes&&(C.protocol||C.slashesCount<2||!w(y.protocol)))&&(f[3]=[/(.*)/,"pathname"]);U<f.length;U++)"function"!=typeof(b=f[U])?(l=b[1],(I=b[0])!=I?y[l]=x:"string"==typeof I?~(t="@"===I?x.lastIndexOf(I):x.indexOf(I))&&("number"==typeof b[2]?(y[l]=x.slice(0,t),x=x.slice(t+b[2])):(y[l]=x.slice(t),x=x.slice(0,t))):(t=I.exec(x))&&(y[l]=t[1],x=x.slice(0,t.index)),y[l]=y[l]||a&&b[3]&&N[l]||"",b[4]&&(y[l]=y[l].toLowerCase())):x=b(x,y);h&&(y.query=h(y.query)),a&&N.slashes&&"/"!==y.pathname.charAt(0)&&(""!==y.pathname||""!==N.pathname)&&(y.pathname=function L(x,N){if(""===x)return N;for(var h=(N||"/").split("/").slice(0,-1).concat(x.split("/")),a=h.length,C=h[a-1],I=!1,b=0;a--;)"."===h[a]?h.splice(a,1):".."===h[a]?(h.splice(a,1),b++):b&&(0===a&&(I=!0),h.splice(a,1),b--);return I&&h.unshift(""),("."===C||".."===C)&&h.push(""),h.join("/")}(y.pathname,N.pathname)),"/"!==y.pathname.charAt(0)&&w(y.protocol)&&(y.pathname="/"+y.pathname),u(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(~(t=y.auth.indexOf(":"))?(y.username=y.auth.slice(0,t),y.username=encodeURIComponent(decodeURIComponent(y.username)),y.password=y.auth.slice(t+1),y.password=encodeURIComponent(decodeURIComponent(y.password))):y.username=encodeURIComponent(decodeURIComponent(y.auth)),y.auth=y.password?y.username+":"+y.password:y.username),y.origin="file:"!==y.protocol&&w(y.protocol)&&y.host?y.protocol+"//"+y.host:"null",y.href=y.toString()}R.prototype={set:function A(x,N,h){var a=this;switch(x){case"query":"string"==typeof N&&N.length&&(N=(h||c.parse)(N)),a[x]=N;break;case"port":a[x]=N,u(N,a.protocol)?N&&(a.host=a.hostname+":"+N):(a.host=a.hostname,a[x]="");break;case"hostname":a[x]=N,a.port&&(N+=":"+a.port),a.host=N;break;case"host":a[x]=N,n.test(N)?(N=N.split(":"),a.port=N.pop(),a.hostname=N.join(":")):(a.hostname=N,a.port="");break;case"protocol":a.protocol=N.toLowerCase(),a.slashes=!h;break;case"pathname":case"hash":if(N){var C="pathname"===x?"/":"#";a[x]=N.charAt(0)!==C?C+N:N}else a[x]=N;break;case"username":case"password":a[x]=encodeURIComponent(N);break;case"auth":var I=N.indexOf(":");~I?(a.username=N.slice(0,I),a.username=encodeURIComponent(decodeURIComponent(a.username)),a.password=N.slice(I+1),a.password=encodeURIComponent(decodeURIComponent(a.password))):a.username=encodeURIComponent(decodeURIComponent(N))}for(var b=0;b<v.length;b++){var t=v[b];t[4]&&(a[t[1]]=a[t[1]].toLowerCase())}return a.auth=a.password?a.username+":"+a.password:a.username,a.origin="file:"!==a.protocol&&w(a.protocol)&&a.host?a.protocol+"//"+a.host:"null",a.href=a.toString(),a},toString:function k(x){(!x||"function"!=typeof x)&&(x=c.stringify);var N,h=this,a=h.host,C=h.protocol;C&&":"!==C.charAt(C.length-1)&&(C+=":");var I=C+(h.protocol&&h.slashes||w(h.protocol)?"//":"");return h.username?(I+=h.username,h.password&&(I+=":"+h.password),I+="@"):h.password?(I+=":"+h.password,I+="@"):"file:"!==h.protocol&&w(h.protocol)&&!a&&"/"!==h.pathname&&(I+="@"),(":"===a[a.length-1]||n.test(h.hostname)&&!h.port)&&(a+=":"),I+=a+h.pathname,(N="object"==typeof h.query?x(h.query):h.query)&&(I+="?"!==N.charAt(0)?"?"+N:N),h.hash&&(I+=h.hash),I}},R.extractProtocol=O,R.location=S,R.trimLeft=d,R.qs=c,m.exports=R}}]);