"use strict";(self.webpackChunkshop_management_frontend=self.webpackChunkshop_management_frontend||[]).push([[728],{7897:(E,M,s)=>{s.d(M,{h:()=>P});var d=s(6354),r=s(9437),u=s(8810),g=s(3904),O=s(7338),f=s(7705),C=s(1626);let P=(()=>{class p{constructor(e){this.http=e,this.API_URL=O.Sn.BASE_URL+"/settings"}mapSetting(e){return{id:e.id,key:e.settingKey||e.key,value:e.settingValue||e.value,description:e.description||"",scope:e.scope||e.scopeLabel||"",category:e.category||e.categoryLabel||""}}getAllSettings(){return this.http.get(`${this.API_URL}/all`).pipe((0,d.T)(e=>{if(g.c.isError(e))throw new Error(g.c.getErrorMessage(e));return(e.data||[]).map(a=>this.mapSetting(a))}),(0,r.W)(e=>(console.error("Error fetching settings:",e),(0,u.$)(()=>e))))}updateSetting(e,a){return this.http.put(`${this.API_URL}/value/${e}`,a).pipe((0,d.T)(l=>this.mapSetting(l)),(0,r.W)(l=>(console.error("Error updating setting:",l),(0,u.$)(()=>l))))}updateMultipleSettings(e){return this.http.put(`${this.API_URL}/bulk`,e).pipe((0,d.T)(a=>{if(g.c.isError(a))throw new Error(g.c.getErrorMessage(a));return(a.data||[]).map(l=>this.mapSetting(l))}),(0,r.W)(a=>(console.error("Error updating multiple settings:",a),(0,u.$)(()=>a))))}resetToDefaults(){return this.http.post(`${this.API_URL}/reset`,{}).pipe((0,d.T)(e=>{if(g.c.isError(e))throw new Error(g.c.getErrorMessage(e));return(e.data||[]).map(a=>this.mapSetting(a))}),(0,r.W)(e=>(console.error("Error resetting settings:",e),(0,u.$)(()=>e))))}getSettingsByCategory(e){return this.http.get(`${this.API_URL}/category/${e}`).pipe((0,d.T)(a=>{const l=a?.content||a?.data||a||[];return(Array.isArray(l)?l:[]).map(_=>this.mapSetting(_))}),(0,r.W)(a=>(console.error("Error fetching settings by category:",a),(0,u.$)(()=>a))))}static{this.\u0275fac=function(a){return new(a||p)(f.KVO(C.Qq))}}static{this.\u0275prov=f.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})()},3728:(E,M,s)=>{s.r(M),s.d(M,{SettingsModule:()=>A});var d=s(177),r=s(9417),u=s(1188),g=s(5596),O=s(8834),f=s(9213),C=s(2102),P=s(9631),p=s(2798),y=s(450),e=s(6850),a=s(9183),l=s(5416),_=s(3902),v=s(1997),b=s(6471),S=s(8032),h=s.n(S),t=s(7705),x=s(7897);function k(i,m){1&i&&t.nrm(0,"mat-spinner",11)}function F(i,m){1&i&&(t.j41(0,"div",12),t.nrm(1,"mat-spinner"),t.j41(2,"p"),t.EFF(3,"Loading settings..."),t.k0s()())}function T(i,m){if(1&i&&t.nrm(0,"mat-slide-toggle",27),2&i){const n=t.XpG().$implicit;t.Y8G("formControlName",n.key)}}function I(i,m){if(1&i&&(t.j41(0,"mat-form-field",28)(1,"mat-label"),t.EFF(2),t.k0s(),t.nrm(3,"input",29),t.k0s()),2&i){const n=t.XpG().$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.getSettingDisplayName(n.key)),t.R7$(1),t.Y8G("formControlName",n.key)}}function R(i,m){if(1&i&&(t.j41(0,"mat-card",19)(1,"mat-card-content")(2,"div",20)(3,"div",21)(4,"h4"),t.EFF(5),t.k0s(),t.j41(6,"p",22),t.EFF(7),t.k0s(),t.j41(8,"mat-chip",23),t.EFF(9),t.k0s()(),t.j41(10,"div",24),t.DNE(11,T,1,1,"mat-slide-toggle",25),t.DNE(12,I,4,2,"mat-form-field",26),t.k0s()()()()),2&i){const n=m.$implicit,o=t.XpG(3);t.R7$(5),t.JRh(o.getSettingDisplayName(n.key)),t.R7$(2),t.JRh(n.description),t.R7$(1),t.AVh("global-scope","GLOBAL"===n.scope)("user-scope","USER"===n.scope),t.R7$(1),t.SpI(" ",n.scope," "),t.R7$(2),t.Y8G("ngIf",o.isToggleSetting(n.key)),t.R7$(1),t.Y8G("ngIf",!o.isToggleSetting(n.key))}}function D(i,m){if(1&i&&(t.j41(0,"mat-tab",16)(1,"div",17),t.DNE(2,R,13,9,"mat-card",18),t.k0s()()),2&i){const n=m.$implicit,o=t.XpG(2);t.Y8G("label",n),t.R7$(2),t.Y8G("ngForOf",o.getSettingsByCategory(n))}}function $(i,m){if(1&i){const n=t.RV6();t.j41(0,"div",13)(1,"form",14),t.bIt("ngSubmit",function(){t.eBV(n);const c=t.XpG();return t.Njj(c.onSubmit())}),t.j41(2,"mat-tab-group"),t.DNE(3,D,3,2,"mat-tab",15),t.k0s()()()}if(2&i){const n=t.XpG();t.R7$(1),t.Y8G("formGroup",n.settingsForm),t.R7$(2),t.Y8G("ngForOf",n.categories)}}const G=[{path:"",component:(()=>{class i{constructor(n,o,c){this.fb=n,this.snackBar=o,this.settingsService=c,this.loading=!1,this.settings=[],this.categories=["General","Email","Notifications","Security","Shop"],this.settingsForm=this.fb.group({})}ngOnInit(){this.loadSettings()}createForm(){const n={};return this.settings.forEach(o=>{n[o.key]=[o.value]}),this.fb.group(n)}loadSettings(){this.loading=!0,this.settingsService.getAllSettings().subscribe({next:n=>{this.settings=n,this.settingsForm=this.createForm(),this.loading=!1},error:n=>{console.error("Error loading settings:",n),this.loadMockData(),this.loading=!1}})}loadMockData(){this.settings=[{id:1,key:"app.name",value:"Nammaooru Thiru Software",description:"Application name",category:"General",type:"text",defaultValue:"Nammaooru Thiru Software",isEditable:!0},{id:2,key:"app.version",value:"1.0.9",description:"Current application version",category:"General",type:"text",defaultValue:"1.0.0",isEditable:!1},{id:3,key:"general.timezone",value:"Asia/Kolkata",description:"Default timezone",category:"General",type:"select",defaultValue:"Asia/Kolkata",isEditable:!0},{id:4,key:"general.currency",value:"INR",description:"Default currency",category:"General",type:"select",defaultValue:"INR",isEditable:!0},{id:5,key:"general.maintenance.enabled",value:"false",description:"Enable maintenance mode",category:"General",type:"boolean",defaultValue:"false",isEditable:!0},{id:6,key:"email.enabled",value:"true",description:"Enable email notifications",category:"Email",type:"boolean",defaultValue:"true",isEditable:!0},{id:7,key:"email.smtp.host",value:"smtp.gmail.com",description:"SMTP server host",category:"Email",type:"text",defaultValue:"localhost",isEditable:!0},{id:8,key:"email.smtp.port",value:"587",description:"SMTP server port",category:"Email",type:"number",defaultValue:"25",isEditable:!0},{id:9,key:"email.from.address",value:"noreply@nammaooru.com",description:"Default sender email address",category:"Email",type:"email",defaultValue:"noreply@example.com",isEditable:!0},{id:10,key:"notifications.order.enabled",value:"true",description:"Enable order notifications",category:"Notifications",type:"boolean",defaultValue:"true",isEditable:!0},{id:11,key:"notifications.shop.enabled",value:"true",description:"Enable shop notifications",category:"Notifications",type:"boolean",defaultValue:"true",isEditable:!0},{id:12,key:"notifications.push.enabled",value:"true",description:"Enable push notifications",category:"Notifications",type:"boolean",defaultValue:"false",isEditable:!0},{id:13,key:"notifications.sms.enabled",value:"false",description:"Enable SMS notifications",category:"Notifications",type:"boolean",defaultValue:"false",isEditable:!0},{id:14,key:"security.password.minLength",value:"8",description:"Minimum password length",category:"Security",type:"number",defaultValue:"6",isEditable:!0},{id:15,key:"security.session.timeout",value:"30",description:"Session timeout in minutes",category:"Security",type:"number",defaultValue:"60",isEditable:!0},{id:16,key:"security.twoFactor.enabled",value:"false",description:"Enable two-factor authentication",category:"Security",type:"boolean",defaultValue:"false",isEditable:!0},{id:17,key:"security.maxLoginAttempts",value:"5",description:"Maximum login attempts before lockout",category:"Security",type:"number",defaultValue:"3",isEditable:!0},{id:18,key:"shop.approval.autoApprove",value:"false",description:"Auto-approve new shop registrations",category:"Shop",type:"boolean",defaultValue:"false",isEditable:!0},{id:19,key:"shop.commission.rate",value:"10",description:"Default commission rate (%)",category:"Shop",type:"number",defaultValue:"5",isEditable:!0},{id:20,key:"shop.delivery.maxRadius",value:"15",description:"Maximum delivery radius (km)",category:"Shop",type:"number",defaultValue:"10",isEditable:!0},{id:21,key:"shop.minOrderValue",value:"100",description:"Minimum order value (INR)",category:"Shop",type:"number",defaultValue:"50",isEditable:!0}],this.settingsForm=this.createForm(),this.snackBar.open("Loaded mock settings - API not available","Close",{duration:3e3})}getSettingsByCategory(n){return this.settings.filter(o=>o.category===n)}onSubmit(){this.settingsForm.valid&&(this.loading=!0,this.settingsService.updateMultipleSettings(this.settingsForm.value).subscribe({next:o=>{this.settings=o,this.loading=!1,h().fire({title:"Success!",text:"Settings updated successfully.",icon:"success",confirmButtonText:"OK"})},error:o=>{console.error("Error updating settings:",o),this.loading=!1,h().fire({title:"Error!",text:"Failed to update settings. Please try again.",icon:"error",confirmButtonText:"OK"})}}))}resetToDefaults(){h().fire({title:"Reset Settings",text:"Are you sure you want to reset all settings to default values? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, reset",cancelButtonText:"Cancel"}).then(n=>{n.isConfirmed&&(this.loading=!0,this.settingsService.resetToDefaults().subscribe({next:o=>{this.settings=o,this.settingsForm=this.createForm(),this.loading=!1,h().fire({title:"Success!",text:"Settings have been reset to defaults.",icon:"success",confirmButtonText:"OK"})},error:o=>{console.error("Error resetting settings:",o),this.loading=!1,h().fire({title:"Error!",text:"Failed to reset settings. Please try again.",icon:"error",confirmButtonText:"OK"})}}))})}isToggleSetting(n){return n.includes("enabled")||n.includes("active")}getSettingDisplayName(n){return n.split(".").pop()?.replace(/([A-Z])/g," $1").trim()||n}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(r.ok),t.rXU(l.UG),t.rXU(x.h))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-settings"]],decls:36,vars:6,consts:[[1,"settings-container"],[1,"settings-header"],[1,"header-actions"],["mat-button","",3,"disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"],["diameter","20",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","settings-content",4,"ngIf"],[1,"quick-actions-card"],[1,"quick-actions-grid"],["mat-stroked-button","",1,"action-btn"],["diameter","20"],[1,"loading-container"],[1,"settings-content"],[3,"formGroup","ngSubmit"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],[1,"tab-content"],["class","setting-card",4,"ngFor","ngForOf"],[1,"setting-card"],[1,"setting-item"],[1,"setting-info"],[1,"setting-description"],["selected","",1,"scope-chip"],[1,"setting-control"],[3,"formControlName",4,"ngIf"],["appearance","outline","class","setting-field",4,"ngIf"],[3,"formControlName"],["appearance","outline",1,"setting-field"],["matInput","",3,"formControlName"]],template:function(o,c){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"System Settings"),t.k0s(),t.j41(4,"div",2)(5,"button",3),t.bIt("click",function(){return c.resetToDefaults()}),t.j41(6,"mat-icon"),t.EFF(7,"restore"),t.k0s(),t.EFF(8," Reset to Defaults "),t.k0s(),t.j41(9,"button",4),t.bIt("click",function(){return c.onSubmit()}),t.DNE(10,k,1,0,"mat-spinner",5),t.EFF(11),t.k0s()()(),t.DNE(12,F,4,0,"div",6),t.DNE(13,$,4,2,"div",7),t.j41(14,"mat-card",8)(15,"mat-card-header")(16,"mat-card-title"),t.EFF(17,"Quick Actions"),t.k0s()(),t.j41(18,"mat-card-content")(19,"div",9)(20,"button",10)(21,"mat-icon"),t.EFF(22,"backup"),t.k0s(),t.EFF(23," Export Settings "),t.k0s(),t.j41(24,"button",10)(25,"mat-icon"),t.EFF(26,"restore"),t.k0s(),t.EFF(27," Import Settings "),t.k0s(),t.j41(28,"button",10)(29,"mat-icon"),t.EFF(30,"refresh"),t.k0s(),t.EFF(31," Clear Cache "),t.k0s(),t.j41(32,"button",10)(33,"mat-icon"),t.EFF(34,"bug_report"),t.k0s(),t.EFF(35," System Health "),t.k0s()()()()()),2&o&&(t.R7$(5),t.Y8G("disabled",c.loading),t.R7$(4),t.Y8G("disabled",c.loading),t.R7$(1),t.Y8G("ngIf",c.loading),t.R7$(1),t.SpI(" ",c.loading?"Saving...":"Save Settings"," "),t.R7$(1),t.Y8G("ngIf",c.loading&&!c.settingsForm.dirty),t.R7$(1),t.Y8G("ngIf",!c.loading||c.settingsForm.dirty))},dependencies:[d.Sq,d.bT,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,g.RN,g.m2,g.MM,g.dh,O.$z,f.An,C.rl,C.nJ,P.fg,y.sG,e.mq,e.T8,a.LG,b.Jl],styles:[".settings-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.settings-container[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.settings-container[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-weight:500}.settings-container[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.settings-container[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}.settings-container[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:8px}.settings-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.settings-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:24px 0}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .setting-card[_ngcontent-%COMP%]{margin-bottom:16px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .setting-card[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:24px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .setting-card[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-info[_ngcontent-%COMP%]{flex:1}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .setting-card[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;color:#333;font-weight:500;font-size:16px;text-transform:capitalize}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .setting-card[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-info[_ngcontent-%COMP%]   .setting-description[_ngcontent-%COMP%]{margin:0 0 12px;color:#666;font-size:14px;line-height:1.4}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .setting-card[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-info[_ngcontent-%COMP%]   .scope-chip[_ngcontent-%COMP%]{font-size:12px;height:24px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .setting-card[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-control[_ngcontent-%COMP%]{min-width:200px;display:flex;justify-content:flex-end}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .setting-card[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-control[_ngcontent-%COMP%]   .setting-field[_ngcontent-%COMP%]{width:100%}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .setting-card[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-control[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin:0}.settings-container[_ngcontent-%COMP%]   .quick-actions-card[_ngcontent-%COMP%]{margin-top:32px}.settings-container[_ngcontent-%COMP%]   .quick-actions-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{color:#333;font-weight:500}.settings-container[_ngcontent-%COMP%]   .quick-actions-card[_ngcontent-%COMP%]   .quick-actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}.settings-container[_ngcontent-%COMP%]   .quick-actions-card[_ngcontent-%COMP%]   .quick-actions-grid[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:16px;height:auto;display:flex;flex-direction:column;align-items:center;gap:8px}.settings-container[_ngcontent-%COMP%]   .quick-actions-card[_ngcontent-%COMP%]   .quick-actions-grid[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}mat-tab-group[_ngcontent-%COMP%]     .mat-tab-header{border-bottom:1px solid #e0e0e0}mat-tab-group[_ngcontent-%COMP%]     .mat-tab-label{font-weight:500;text-transform:uppercase;letter-spacing:.5px}mat-tab-group[_ngcontent-%COMP%]     .mat-tab-body-content{overflow:visible}mat-form-field.setting-field[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%]{background:#f8f9fa}@media (max-width: 768px){.settings-container[_ngcontent-%COMP%]{padding:16px}.settings-container[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.settings-container[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.settings-container[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-width:auto}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .setting-card[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .setting-card[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-control[_ngcontent-%COMP%]{width:100%;min-width:auto}.settings-container[_ngcontent-%COMP%]   .quick-actions-card[_ngcontent-%COMP%]   .quick-actions-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}mat-chip.global-scope[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}mat-chip.user-scope[_ngcontent-%COMP%]{background-color:#ff4081;color:#fff}"]})}}return i})()}];let j=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[u.iI.forChild(G),u.iI]})}}return i})(),A=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[d.MD,r.X1,u.iI,j,g.Hu,O.Hl,f.m_,C.RG,P.fS,p.Ve,y.mV,e.RI,a.D6,l._T,_.Fg,v.w,b.YN]})}}return i})()}}]);