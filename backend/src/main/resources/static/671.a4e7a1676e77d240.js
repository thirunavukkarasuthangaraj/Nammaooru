"use strict";(self.webpackChunkshop_management_frontend=self.webpackChunkshop_management_frontend||[]).push([[671],{6932:(it,U,l)=>{l.d(U,{f:()=>V});var O=l(4412),s=l(7673),h=l(983),k=l(1397),w=l(8071),G=l(9437),z=l(7705),L=l(3921);let V=(()=>{class y{constructor(p){this.angularFireMessaging=p,this.currentMessage=new O.t(null),this.isSupported=!1,this.currentToken=null,this.lastNotificationTime=0,this.notificationDebounceTime=1e3,this.checkSupport(),this.isSupported&&this.initializeMessaging()}checkSupport(){this.isSupported="serviceWorker"in navigator&&"Notification"in window}initializeMessaging(){try{this.angularFireMessaging.messages.subscribe(p=>{console.log("New Firebase message received: ",p),this.currentMessage.next(p),this.handleForegroundMessage(p)},p=>{console.error("Error receiving Firebase message: ",p)})}catch(p){console.error("Error initializing Firebase messaging: ",p)}}handleForegroundMessage(p){p.notification&&this.showNotification(p.notification.title||"New Notification",{body:p.notification.body||"You have a new message",icon:p.notification.icon})}requestPermission(){return this.isSupported?this.angularFireMessaging.requestToken.pipe(function M(y,R,p=1/0){return(0,w.T)(R)?(0,k.Z)(()=>y,R,p):("number"==typeof R&&(p=R),(0,k.Z)(()=>y,p))}((0,s.of)("Permission granted")),(0,G.W)(p=>(console.error("Error requesting notification permission:",p),(0,s.of)(null)))):(console.warn("Firebase messaging is not supported in this browser"),(0,s.of)(null))}receiveMessage(){return this.isSupported?this.angularFireMessaging.messages:h.w}showNotification(p,E){const j=Date.now();if(j-this.lastNotificationTime<this.notificationDebounceTime)console.log("Notification debounced to prevent duplicate sound");else if(this.lastNotificationTime=j,this.isSupported)if("granted"===Notification.permission){const T=new Notification(p,{body:"string"==typeof E?E:E?.body||"",icon:("string"==typeof E?void 0:E?.icon)||"/assets/icons/notification.png",badge:"/assets/icons/badge.png",tag:"order-notification",requireInteraction:!1,silent:!1});setTimeout(()=>{T.close()},5e3),T.onclick=()=>{window.focus(),T.close()}}else"default"===Notification.permission&&Notification.requestPermission().then(T=>{"granted"===T&&this.showNotification(p,E)});else console.warn("Notifications not supported")}getToken(){return this.isSupported?this.angularFireMessaging.requestToken.pipe((0,G.W)(p=>(console.error("Error getting FCM token:",p),(0,s.of)(null)))):(0,s.of)(null)}testNotification(){this.showNotification("Test Notification",{body:"This is a test notification from NammaOoru!",icon:"/assets/icons/notification.png"})}sendOrderNotification(p,E,j){let b="",N="";switch(E){case"CONFIRMED":b="Order Confirmed! \u{1f389}",N=`Your order ${p} has been confirmed. ${j}`;break;case"PREPARING":b="Order Being Prepared \u{1f468}\u200d\u{1f373}",N=`Your order ${p} is being prepared. ${j}`;break;case"OUT_FOR_DELIVERY":b="Order Out for Delivery \u{1f69a}",N=`Your order ${p} is on its way! ${j}`;break;case"DELIVERED":b="Order Delivered! \u2705",N=`Your order ${p} has been delivered. ${j}`;break;case"REJECTED":b="Order Rejected",N=`Your order ${p} has been rejected. ${j}`;break;default:b="Order Update",N=`Update for order ${p}: ${j}`}this.showNotification(b,{body:N})}sendDeliveryNotification(p,E,j){const b={title:E,body:j,icon:"/assets/icons/delivery-icon.png",badge:"/assets/icons/badge-icon.png",data:{type:"delivery_assignment",partnerPhone:p,timestamp:(new Date).toISOString()}};this.currentToken&&console.log("Sending delivery notification:",b),this.showNotification(b.title,{body:b.body,icon:b.icon,badge:b.badge,data:b.data})}sendAdminNotification(p,E){this.showNotification(p,{body:E,icon:"/assets/icons/admin-icon.png"})}onMessageReceived(){return this.currentMessage.asObservable()}static{this.\u0275fac=function(E){return new(E||y)(z.KVO(L.rk))}}static{this.\u0275prov=z.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}}return y})()},8671:(it,U,l)=>{l.r(U),l.d(U,{CustomerModule:()=>Cn});var O=l(177),s=l(9417),h=l(5596),k=l(8834),w=l(9213),M=l(2102),G=l(9631),z=l(2798),L=l(5951),V=l(2765),y=l(9183),R=l(5416),p=l(4823),E=l(1975),j=l(6471),b=l(1997),N=l(450),T=l(5351),B=l(6850),$=l(1188),A=l(1413),Q=l(152),v=l(6977),t=l(7705),D=l(1626),f=l(7673),K=l(1985),Y=l(5558),P=l(9437),F=l(2525);let Z=(()=>{class o{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}`}getShops(e="",n="",r,i,a=10){let d=new D.Nl;return e&&(d=d.set("search",e)),n&&(d=d.set("category",n)),null!=r&&null!=i&&(d=d.set("latitude",r.toString()),d=d.set("longitude",i.toString()),d=d.set("radiusKm",a.toString())),this.http.get(`${this.apiUrl}/customer/shops`,{params:d}).pipe((0,Y.n)(m=>{const u=m.data?.content||m.data?.shops;if(u){const _=u.map(g=>{let S="/assets/images/shop-placeholder.jpg";if(g.images&&g.images.length>0){const H=g.images.find(rt=>"LOGO"===rt.imageType||!0===rt.isPrimary);H&&H.imageUrl&&(S=H.imageUrl)}return{id:g.id,name:g.name,description:g.description||g.businessName||"",image:S,isOpen:g.isActive||!0,rating:g.rating||4.5,distance:"2.5",deliveryTime:"30-45",deliveryFee:g.deliveryFee||40,categories:[g.businessType||"General"],address:`${g.city}, ${g.state}`,phone:g.ownerPhone||""}});return(0,f.of)(_)}return(0,f.of)([])}),(0,P.W)(()=>{let u=[{id:1,name:"Annamalai Stores",description:"Fresh vegetables and groceries",image:"/assets/images/shops/annamalai-stores.jpg",isOpen:!0,rating:4.5,distance:"1.2",deliveryTime:"25-30",deliveryFee:40,categories:["grocery","vegetables"],address:"T. Nagar, Chennai",phone:"+91 98765 43210"},{id:2,name:"Saravana Medical",description:"Medicines and healthcare products",image:"/assets/images/shops/saravana-medical.jpg",isOpen:!0,rating:4.8,distance:"0.8",deliveryTime:"15-20",deliveryFee:40,categories:["pharmacy","healthcare"],address:"Adyar, Chennai",phone:"+91 98765 43211"},{id:3,name:"Murugan Idli Shop",description:"Authentic South Indian cuisine",image:"/assets/images/shops/murugan-idli.jpg",isOpen:!0,rating:4.3,distance:"2.1",deliveryTime:"35-45",deliveryFee:40,categories:["restaurant","south-indian"],address:"Mylapore, Chennai",phone:"+91 98765 43212"},{id:4,name:"Vijay Electronics",description:"Mobile phones and accessories",image:"/assets/images/shops/vijay-electronics.jpg",isOpen:!1,rating:4.1,distance:"3.5",deliveryTime:"45-60",deliveryFee:60,categories:["electronics","mobile"],address:"Velachery, Chennai",phone:"+91 98765 43213"}];return e&&(u=u.filter(_=>_.name.toLowerCase().includes(e.toLowerCase())||_.description.toLowerCase().includes(e.toLowerCase()))),n&&(u=u.filter(_=>_.categories.includes(n))),(0,f.of)(u)}))}getNearbyShops(e,n,r=10){const i=(new D.Nl).set("lat",e.toString()).set("lng",n.toString()).set("radius",r.toString());return this.http.get(`${this.apiUrl}/shops/nearby`,{params:i}).pipe((0,Y.n)(a=>{const d=a.data?.shops||a.data?.content||a.data;if(d&&Array.isArray(d)){const m=d.map(u=>{let _="/assets/images/shop-placeholder.jpg";if(u.images&&u.images.length>0){const g=u.images.find(S=>"LOGO"===S.imageType||!0===S.isPrimary);g&&g.imageUrl&&(_=g.imageUrl)}return{id:u.id,name:u.name,description:u.description||u.businessName||"",image:_,isOpen:u.isActive||!0,rating:u.rating||4.5,distance:u.distance||"",deliveryTime:"30-45",deliveryFee:u.deliveryFee||40,categories:[u.businessType||"General"],address:`${u.city}, ${u.state}`,phone:u.ownerPhone||""}});return(0,f.of)(m)}return(0,f.of)([])}),(0,P.W)(()=>(0,f.of)([])))}getShopById(e){return this.http.get(`${this.apiUrl}/customer/shops/${e}`).pipe((0,Y.n)(n=>(0,f.of)(n.data||null)),(0,P.W)(()=>new K.c(n=>{this.getShops().subscribe(r=>{const i=r.find(a=>a.id===e);n.next(i||null),n.complete()})})))}getProductsByShop(e,n="",r=""){let i=new D.Nl;return n&&(i=i.set("category",n)),r&&(i=i.set("search",r)),this.http.get(`${this.apiUrl}/customer/shops/${e}/products`,{params:i}).pipe((0,Y.n)(a=>{if(a.data&&a.data.content){const d=a.data.content.map(m=>({id:m.id,name:m.customName||m.displayName||m.masterProduct&&m.masterProduct.name||"Product",description:m.customDescription||m.displayDescription||m.masterProduct&&m.masterProduct.description||"",price:m.price||0,image:m.primaryImageUrl||m.masterProduct&&m.masterProduct.primaryImageUrl||"/assets/images/product-placeholder.jpg",unit:m.masterProduct&&m.masterProduct.baseUnit||"piece",category:m.masterProduct&&m.masterProduct.category&&m.masterProduct.category.name||"General",inStock:!1!==m.inStock&&m.stockQuantity>0,quantity:m.stockQuantity||0,discount:m.discountPercentage||0,shopId:e}));return(0,f.of)(d)}return(0,f.of)([])}),(0,P.W)(()=>{let d=[{id:1,name:"Tomatoes",description:"Fresh red tomatoes",price:40,unit:"kg",category:"vegetables",inStock:!0,shopId:1,image:"/assets/images/products/tomatoes.jpg"},{id:2,name:"Onions",description:"Fresh onions",price:30,unit:"kg",category:"vegetables",inStock:!0,shopId:1,image:"/assets/images/products/onions.jpg"},{id:3,name:"Rice - Ponni",description:"Premium quality ponni rice",price:55,unit:"kg",category:"grains",inStock:!0,shopId:1,image:"/assets/images/products/rice.jpg"},{id:4,name:"Dal - Toor",description:"Yellow toor dal",price:120,unit:"kg",category:"pulses",inStock:!0,shopId:1,image:"/assets/images/products/dal.jpg"},{id:5,name:"Paracetamol",description:"Fever and pain relief",price:5,unit:"strip",category:"medicines",inStock:!0,shopId:2,image:"/assets/images/products/paracetamol.jpg"},{id:6,name:"Sanitizer",description:"Hand sanitizer 500ml",price:75,unit:"bottle",category:"hygiene",inStock:!0,shopId:2,image:"/assets/images/products/sanitizer.jpg"},{id:7,name:"Idli (4 pcs)",description:"Soft steamed idli with chutney",price:40,unit:"plate",category:"breakfast",inStock:!0,shopId:3,image:"/assets/images/products/idli.jpg"},{id:8,name:"Dosa",description:"Crispy dosa with sambar and chutney",price:60,unit:"piece",category:"breakfast",inStock:!0,shopId:3,image:"/assets/images/products/dosa.jpg"},{id:9,name:"Phone Cover",description:"Protective phone cover",price:299,unit:"piece",category:"accessories",inStock:!0,shopId:4,image:"/assets/images/products/phone-cover.jpg"},{id:10,name:"Earphones",description:"Wired earphones",price:599,unit:"piece",category:"accessories",inStock:!0,shopId:4,image:"/assets/images/products/earphones.jpg"}].filter(m=>m.shopId===e);return n&&(d=d.filter(m=>m.category.toLowerCase()===n.toLowerCase())),r&&(d=d.filter(m=>m.name.toLowerCase().includes(r.toLowerCase())||m.description.toLowerCase().includes(r.toLowerCase()))),(0,f.of)(d)}))}getProductCategories(e){return new K.c(n=>{this.getProductsByShop(e).subscribe(r=>{const i=[...new Set(r.map(a=>a.category))];n.next(i),n.complete()})})}static{this.\u0275fac=function(n){return new(n||o)(t.KVO(D.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var X=l(6932),J=l(6600);function at(o,c){1&o&&(t.j41(0,"div",21),t.nrm(1,"mat-spinner",22),t.j41(2,"h3"),t.EFF(3,"Finding shops near you..."),t.k0s(),t.j41(4,"p"),t.EFF(5,"This won't take long"),t.k0s()())}function ct(o,c){if(1&o&&(t.j41(0,"mat-chip"),t.EFF(1),t.k0s()),2&o){const e=c.$implicit;t.R7$(1),t.SpI(" ",e," ")}}function st(o,c){if(1&o){const e=t.RV6();t.j41(0,"mat-card",25),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.selectShop(i))}),t.j41(1,"div",26),t.nrm(2,"img",27),t.j41(3,"div",28)(4,"mat-chip"),t.EFF(5),t.k0s()(),t.j41(6,"div",29)(7,"mat-icon"),t.EFF(8,"star"),t.k0s(),t.j41(9,"span"),t.EFF(10),t.k0s()()(),t.j41(11,"mat-card-content")(12,"h3",30),t.EFF(13),t.k0s(),t.j41(14,"p",31),t.EFF(15),t.k0s(),t.j41(16,"div",32)(17,"div",33)(18,"mat-icon"),t.EFF(19,"schedule"),t.k0s(),t.j41(20,"span"),t.EFF(21),t.k0s()(),t.j41(22,"div",33)(23,"mat-icon"),t.EFF(24,"location_on"),t.k0s(),t.j41(25,"span"),t.EFF(26),t.k0s()(),t.j41(27,"div",33)(28,"mat-icon"),t.EFF(29,"local_shipping"),t.k0s(),t.j41(30,"span"),t.EFF(31),t.k0s()()(),t.j41(32,"div",34),t.DNE(33,ct,2,1,"mat-chip",35),t.k0s()(),t.j41(34,"mat-card-actions")(35,"button",36)(36,"mat-icon"),t.EFF(37,"shopping_cart"),t.k0s(),t.EFF(38),t.k0s()()()}if(2&o){const e=c.$implicit;t.AVh("closed",!e.isOpen),t.R7$(2),t.Y8G("src",e.image||"/assets/images/shop-placeholder.jpg",t.B4B)("alt",e.name),t.R7$(2),t.xc7("background-color",e.isOpen?"#4caf50":"#f44336")("color","white"),t.R7$(1),t.SpI(" ",e.isOpen?"OPEN NOW":"CLOSED"," "),t.R7$(5),t.JRh(e.rating||"4.5"),t.R7$(3),t.JRh(e.name),t.R7$(2),t.JRh(e.description),t.R7$(6),t.SpI("",e.deliveryTime||"30-45"," min"),t.R7$(5),t.SpI("",e.distance||"2.5"," km"),t.R7$(5),t.SpI("\u20b9",e.deliveryFee||"40",""),t.R7$(2),t.Y8G("ngForOf",e.categories),t.R7$(2),t.Y8G("disabled",!e.isOpen),t.R7$(3),t.SpI(" ",e.isOpen?"Shop Now":"Currently Closed"," ")}}function dt(o,c){if(1&o&&(t.j41(0,"div",23),t.DNE(1,st,39,18,"mat-card",24),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",e.shops)}}function lt(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",37)(1,"mat-icon"),t.EFF(2,"store_mall_directory"),t.k0s(),t.j41(3,"h2"),t.EFF(4,"No shops found"),t.k0s(),t.j41(5,"p"),t.EFF(6,"Try adjusting your search or select a different category"),t.k0s(),t.j41(7,"button",38),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.resetFilters())}),t.j41(8,"mat-icon"),t.EFF(9,"refresh"),t.k0s(),t.EFF(10," Reset Filters "),t.k0s()()}}let mt=(()=>{class o{constructor(e,n,r){this.router=e,this.shopService=n,this.firebaseService=r,this.destroy$=new A.B,this.searchSubject=new A.B,this.shops=[],this.loading=!1,this.searchTerm="",this.selectedCategory="",this.userLat=null,this.userLng=null,this.locationStatus="loading",this.searchSubject.pipe((0,Q.B)(300),(0,v.Q)(this.destroy$)).subscribe(()=>this.loadShops())}ngOnInit(){this.getUserLocation()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getUserLocation(){if(!navigator.geolocation)return this.locationStatus="unavailable",void this.loadShops();navigator.geolocation.getCurrentPosition(e=>{this.userLat=e.coords.latitude,this.userLng=e.coords.longitude,this.locationStatus="granted",this.loadShops()},()=>{this.locationStatus="denied",this.loadShops()},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}loadShops(){this.loading=!0,null!=this.userLat&&null!=this.userLng?this.shopService.getNearbyShops(this.userLat,this.userLng,10).pipe((0,v.Q)(this.destroy$)).subscribe({next:e=>{this.shops=this.applyFilters(e),this.loading=!1},error:()=>{this.loadAllShops()}}):this.loadAllShops()}loadAllShops(){this.shopService.getShops(this.searchTerm,this.selectedCategory).pipe((0,v.Q)(this.destroy$)).subscribe({next:e=>{this.shops=e,this.loading=!1},error:e=>{console.error("Error loading shops:",e),this.loading=!1}})}applyFilters(e){let n=e;if(this.searchTerm){const r=this.searchTerm.toLowerCase();n=n.filter(i=>i.name.toLowerCase().includes(r)||i.description.toLowerCase().includes(r))}return this.selectedCategory&&(n=n.filter(r=>r.categories.some(i=>i.toLowerCase()===this.selectedCategory.toLowerCase()))),n}onSearch(){this.searchSubject.next(this.searchTerm)}onCategoryChange(){this.loadShops()}selectShop(e){e.isOpen&&this.router.navigate(["/customer/products",e.id],{queryParams:{shopName:e.name}})}testNotification(){this.firebaseService.testNotification()}resetFilters(){this.searchTerm="",this.selectedCategory="",this.loadShops()}static{this.\u0275fac=function(n){return new(n||o)(t.rXU($.Ix),t.rXU(Z),t.rXU(X.f))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-shop-list"]],decls:46,vars:5,consts:[[1,"shop-list-container"],[1,"header-section"],[1,"container"],[1,"page-title"],[1,"subtitle"],[1,"search-section"],[1,"search-bar"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Try 'grocery', 'medicine', 'restaurant'...",3,"ngModel","ngModelChange","keyup"],["matPrefix",""],["appearance","outline",1,"category-filter"],[3,"value","valueChange","selectionChange"],["value",""],["value","grocery"],["value","restaurant"],["value","pharmacy"],["value","electronics"],[1,"container","shops-content"],["class","loading-container",4,"ngIf"],["class","shops-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"loading-container"],["diameter","60"],[1,"shops-grid"],["class","shop-card",3,"closed","click",4,"ngFor","ngForOf"],[1,"shop-card",3,"click"],[1,"shop-image-container"],["mat-card-image","",3,"src","alt"],[1,"status-chip"],[1,"shop-rating"],[1,"shop-name"],[1,"shop-description"],[1,"info-pills"],[1,"info-pill"],[1,"shop-categories"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"view-shop-btn",3,"disabled"],[1,"empty-state"],["mat-raised-button","","color","primary",3,"click"]],template:function(n,r){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"mat-icon"),t.EFF(5,"storefront"),t.k0s(),t.EFF(6," Choose Your Shop "),t.k0s(),t.j41(7,"p",4),t.EFF(8,"Fresh groceries, medicines, food & more delivered to your doorstep"),t.k0s()()(),t.j41(9,"div",5)(10,"div",2)(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),t.EFF(14,"Search shops, products, or categories"),t.k0s(),t.j41(15,"input",8),t.bIt("ngModelChange",function(a){return r.searchTerm=a})("keyup",function(){return r.onSearch()}),t.k0s(),t.j41(16,"mat-icon",9),t.EFF(17,"search"),t.k0s()(),t.j41(18,"mat-form-field",10)(19,"mat-label"),t.EFF(20,"Category"),t.k0s(),t.j41(21,"mat-select",11),t.bIt("valueChange",function(a){return r.selectedCategory=a})("selectionChange",function(){return r.onCategoryChange()}),t.j41(22,"mat-option",12)(23,"mat-icon"),t.EFF(24,"apps"),t.k0s(),t.EFF(25," All Categories "),t.k0s(),t.j41(26,"mat-option",13)(27,"mat-icon"),t.EFF(28,"shopping_basket"),t.k0s(),t.EFF(29," Grocery & Essentials "),t.k0s(),t.j41(30,"mat-option",14)(31,"mat-icon"),t.EFF(32,"restaurant"),t.k0s(),t.EFF(33," Food & Restaurants "),t.k0s(),t.j41(34,"mat-option",15)(35,"mat-icon"),t.EFF(36,"medical_services"),t.k0s(),t.EFF(37," Pharmacy & Health "),t.k0s(),t.j41(38,"mat-option",16)(39,"mat-icon"),t.EFF(40,"devices"),t.k0s(),t.EFF(41," Electronics "),t.k0s()()()()()(),t.j41(42,"div",17),t.DNE(43,at,6,0,"div",18),t.DNE(44,dt,2,1,"div",19),t.DNE(45,lt,11,0,"div",20),t.k0s()()),2&n&&(t.R7$(15),t.Y8G("ngModel",r.searchTerm),t.R7$(6),t.Y8G("value",r.selectedCategory),t.R7$(22),t.Y8G("ngIf",r.loading),t.R7$(1),t.Y8G("ngIf",!r.loading&&r.shops.length>0),t.R7$(1),t.Y8G("ngIf",!r.loading&&0===r.shops.length))},dependencies:[O.Sq,O.bT,s.me,s.BC,s.vS,h.RN,h.YY,h.m2,h.kF,k.$z,w.An,M.rl,M.nJ,M.JW,G.fg,z.VO,J.wT,y.LG,j.Jl],styles:[".shop-list-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}.header-section[_ngcontent-%COMP%]{padding:60px 0 40px;color:#fff;text-align:center}.header-section[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:600;margin-bottom:10px;display:flex;align-items:center;justify-content:center;gap:15px}.header-section[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem}.header-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.95;max-width:600px;margin:0 auto}.search-section[_ngcontent-%COMP%]{background:white;padding:30px 0;box-shadow:0 2px 10px #0000001a;position:sticky;top:0;z-index:100}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center;max-width:900px;margin:0 auto}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{flex:1}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-outline{background:#f8f9fa}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{color:#667eea}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .category-filter[_ngcontent-%COMP%]{width:250px}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .category-filter[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.shops-content[_ngcontent-%COMP%]{padding:40px 15px}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;background:white;border-radius:20px;margin:40px auto;max-width:400px;box-shadow:0 10px 30px #0000001a}.loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:0 auto 20px}.loading-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin-bottom:10px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.shops-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:30px;padding:20px 0}.shop-card[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s ease;border-radius:16px!important;overflow:hidden;background:white;box-shadow:0 4px 20px #00000014}.shop-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 40px #00000026}.shop-card.closed[_ngcontent-%COMP%]{opacity:.7}.shop-card.closed[_ngcontent-%COMP%]   .shop-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:grayscale(100%)}.shop-card[_ngcontent-%COMP%]   .shop-image-container[_ngcontent-%COMP%]{position:relative;height:200px;overflow:hidden}.shop-card[_ngcontent-%COMP%]   .shop-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.shop-card[_ngcontent-%COMP%]   .shop-image-container[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.shop-card[_ngcontent-%COMP%]   .shop-image-container[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px}.shop-card[_ngcontent-%COMP%]   .shop-image-container[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]     .mat-chip{font-weight:600;font-size:.75rem}.shop-card[_ngcontent-%COMP%]   .shop-image-container[_ngcontent-%COMP%]   .shop-rating[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:15px;background:rgba(255,255,255,.95);padding:5px 12px;border-radius:20px;display:flex;align-items:center;gap:5px;box-shadow:0 2px 10px #0000001a}.shop-card[_ngcontent-%COMP%]   .shop-image-container[_ngcontent-%COMP%]   .shop-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffc107;font-size:18px;width:18px;height:18px}.shop-card[_ngcontent-%COMP%]   .shop-image-container[_ngcontent-%COMP%]   .shop-rating[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:.9rem}.shop-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:20px!important}.shop-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .shop-name[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#333;margin:0 0 8px}.shop-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .shop-description[_ngcontent-%COMP%]{color:#666;font-size:.95rem;margin-bottom:15px;line-height:1.4}.shop-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .info-pills[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:15px;flex-wrap:wrap}.shop-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .info-pills[_ngcontent-%COMP%]   .info-pill[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;color:#555;font-size:.9rem}.shop-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .info-pills[_ngcontent-%COMP%]   .info-pill[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#667eea}.shop-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .shop-categories[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.shop-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .shop-categories[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{height:26px!important;font-size:.85rem;background:#f0f4ff!important;color:#667eea!important}.shop-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{padding:0 20px 20px!important}.shop-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   .view-shop-btn[_ngcontent-%COMP%]{width:100%;height:45px;font-size:1rem;font-weight:500;border-radius:8px}.shop-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   .view-shop-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;background:white;border-radius:20px;margin:40px auto;max-width:500px;box-shadow:0 10px 30px #0000001a}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:80px;width:80px;height:80px;color:#ccc;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:#333;margin-bottom:10px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem;margin-bottom:30px}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:45px;padding:0 30px;font-size:1rem;border-radius:8px}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]{padding:40px 15px 30px}.header-section[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{flex-direction:column;padding:0 15px}.search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%], .search-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .category-filter[_ngcontent-%COMP%]{width:100%}.shops-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:15px}}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 15px}"]})}}return o})();var tt=l(7505),gt=l(4412);let q=(()=>{class o{constructor(e,n){this.snackBar=e,this.http=n,this.CART_KEY="nammaooru_cart",this.DELIVERY_FEE=40,this.apiUrl=`${F.c.apiUrl}`,this.cartSubject=new gt.t(this.getEmptyCart()),this.cart$=this.cartSubject.asObservable(),this.loadCart()}getEmptyCart(){return{items:[],shopId:null,shopName:null,subtotal:0,discount:0,deliveryFee:0,total:0}}loadCart(){const e=localStorage.getItem(this.CART_KEY);if(e){const n=JSON.parse(e);this.cartSubject.next(n)}}saveCart(e){localStorage.setItem(this.CART_KEY,JSON.stringify(e)),this.cartSubject.next(e),this.syncCartWithBackend(e)}syncCartWithBackend(e){const n=this.getCustomerId();n&&e.items.length>0&&this.http.post(`${this.apiUrl}/customers/${n}/cart/sync`,e).pipe((0,P.W)(()=>(0,f.of)(null))).subscribe()}getCustomerId(){const e=localStorage.getItem("currentUser");if(e)try{return JSON.parse(e).id||null}catch{return null}return null}loadCartFromBackend(){const e=this.getCustomerId();return e?this.http.get(`${this.apiUrl}/customers/${e}/cart`).pipe((0,Y.n)(n=>(n.data&&n.data.items.length>0&&(this.cartSubject.next(n.data),localStorage.setItem(this.CART_KEY,JSON.stringify(n.data))),(0,f.of)(n.data||this.cartSubject.value))),(0,P.W)(()=>(0,f.of)(this.cartSubject.value))):(0,f.of)(this.cartSubject.value)}addToCart(e,n,r){const i=this.cartSubject.value;if(i.shopId&&i.shopId!==n)return this.snackBar.open("You can only order from one shop at a time. Clear cart to order from different shop.","Clear Cart",{duration:5e3}).onAction().subscribe(()=>{this.clearCart(),this.addToCart(e,n,r)}),!1;i.shopId||(i.shopId=n,i.shopName=r);const a=i.items.find(d=>d.productId===e.id);return a?a.quantity++:i.items.push({productId:e.id,productName:e.name,productImage:e.image||"/assets/images/product-placeholder.jpg",price:e.price,quantity:1,unit:e.unit||"item",shopId:n,shopName:r}),this.updateCartTotals(i),this.saveCart(i),this.snackBar.open(`${e.name} added to cart`,"View Cart",{duration:3e3}),!0}updateQuantity(e,n){const r=this.cartSubject.value,i=r.items.find(a=>a.productId===e);i&&(n<=0?this.removeFromCart(e):(i.quantity=n,this.updateCartTotals(r),this.saveCart(r)))}removeFromCart(e){const n=this.cartSubject.value;n.items=n.items.filter(r=>r.productId!==e),0===n.items.length&&(n.shopId=null,n.shopName=null),this.updateCartTotals(n),this.saveCart(n)}applyDiscount(e){const n=this.cartSubject.value;n.discount=e,this.updateCartTotals(n),this.saveCart(n)}updateDeliveryFee(e){const n=this.cartSubject.value;n.deliveryFee=e,this.updateCartTotals(n),this.saveCart(n)}updateCartTotals(e){e.subtotal=e.items.reduce((n,r)=>n+r.price*r.quantity,0),null==e.deliveryFee&&(e.deliveryFee=e.items.length>0?this.DELIVERY_FEE:0),e.total=e.subtotal-e.discount+e.deliveryFee}clearCart(){const e=this.getEmptyCart();this.saveCart(e)}getCart(){return this.cartSubject.value}getItemCount(){return this.cartSubject.value.items.reduce((e,n)=>e+n.quantity,0)}getTotalAmount(){return this.cartSubject.value.total}getCurrentShopId(){return this.cartSubject.value.shopId}static{this.\u0275fac=function(n){return new(n||o)(t.KVO(R.UG),t.KVO(D.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function pt(o,c){if(1&o){const e=t.RV6();t.j41(0,"mat-card",28)(1,"mat-card-content")(2,"div",29)(3,"button",30),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.goBack())}),t.j41(4,"mat-icon"),t.EFF(5,"arrow_back"),t.k0s(),t.EFF(6," Back to Shops "),t.k0s(),t.j41(7,"div",31)(8,"img",32),t.bIt("error",function(r){t.eBV(e);const i=t.XpG();return t.Njj(i.onShopImageError(r))}),t.k0s(),t.j41(9,"div",33)(10,"h2",34),t.EFF(11),t.k0s(),t.j41(12,"p",35),t.EFF(13),t.k0s(),t.j41(14,"div",36)(15,"div",37)(16,"span",38)(17,"mat-icon",39),t.EFF(18,"star"),t.k0s(),t.EFF(19),t.k0s(),t.j41(20,"span",38)(21,"mat-icon",39),t.EFF(22,"schedule"),t.k0s(),t.EFF(23),t.k0s(),t.j41(24,"span",38)(25,"mat-icon",39),t.EFF(26,"local_shipping"),t.k0s(),t.EFF(27),t.k0s()()()()()()()()}if(2&o){const e=t.XpG();t.R7$(8),t.Y8G("src",e.shop.image||"/assets/images/shop-placeholder.jpg",t.B4B)("alt",e.shop.name),t.R7$(3),t.JRh(e.shop.name),t.R7$(2),t.JRh(e.shop.description||"Premium electronics and gadgets store"),t.R7$(6),t.SpI(" ",e.shop.rating||"4.2"," "),t.R7$(4),t.SpI(" ",e.shop.deliveryTime||"30-45"," min "),t.R7$(4),t.SpI(" Delivery \u20b9",e.shop.deliveryFee||"50"," ")}}function ut(o,c){if(1&o){const e=t.RV6();t.j41(0,"button",40),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return r.searchTerm="",t.Njj(r.onSearch())}),t.j41(1,"mat-icon"),t.EFF(2,"clear"),t.k0s()()}}function _t(o,c){if(1&o&&(t.j41(0,"mat-radio-button",41)(1,"span",13),t.EFF(2),t.k0s()()),2&o){const e=c.$implicit;t.Y8G("value",e),t.R7$(2),t.JRh(e)}}function ft(o,c){if(1&o){const e=t.RV6();t.j41(0,"mat-card",42)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),t.EFF(4,"shopping_cart"),t.k0s(),t.EFF(5),t.k0s()(),t.j41(6,"mat-card-content")(7,"div",43)(8,"span",44),t.EFF(9,"Subtotal:"),t.k0s(),t.j41(10,"span",45),t.EFF(11),t.k0s()(),t.j41(12,"button",46),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.goToCart())}),t.j41(13,"mat-icon"),t.EFF(14,"shopping_cart_checkout"),t.k0s(),t.EFF(15," View Cart & Checkout "),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(5),t.SpI(" Cart (",e.cartItemCount," items) "),t.R7$(6),t.SpI("\u20b9",e.cartTotal,"")}}function ht(o,c){1&o&&(t.j41(0,"div",47)(1,"div",48),t.nrm(2,"mat-spinner",49),t.j41(3,"p",50),t.EFF(4,"Loading products..."),t.k0s()()())}function Ct(o,c){if(1&o&&(t.j41(0,"span",70),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(1),t.SpI(" ",e.discount,"% OFF ")}}function Ot(o,c){1&o&&(t.j41(0,"div",71)(1,"mat-icon",72),t.EFF(2,"block"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Out of Stock"),t.k0s()())}function Pt(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",73)(1,"button",74),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.decreaseQuantity(r))}),t.j41(2,"mat-icon"),t.EFF(3,"remove_circle_outline"),t.k0s()(),t.j41(4,"span",75),t.EFF(5),t.k0s(),t.j41(6,"button",74),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.increaseQuantity(r))}),t.j41(7,"mat-icon"),t.EFF(8,"add_circle_outline"),t.k0s()()()}if(2&o){const e=t.XpG().$implicit,n=t.XpG(2);t.R7$(5),t.JRh(n.getProductCartQuantity(e.id))}}function Mt(o,c){if(1&o){const e=t.RV6();t.j41(0,"button",76),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.addToCart(r))}),t.j41(1,"mat-icon"),t.EFF(2,"add_shopping_cart"),t.k0s(),t.EFF(3," Add to Cart "),t.k0s()}}function xt(o,c){1&o&&(t.j41(0,"button",77),t.EFF(1," Out of Stock "),t.k0s())}function bt(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",53)(1,"div",54)(2,"img",55),t.bIt("error",function(r){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onImageError(r))}),t.k0s(),t.DNE(3,Ct,2,1,"span",56),t.k0s(),t.j41(4,"div",57)(5,"h3",58),t.EFF(6),t.k0s(),t.j41(7,"p",59),t.EFF(8),t.k0s(),t.j41(9,"span",60),t.EFF(10),t.k0s()(),t.j41(11,"div",61)(12,"div",62)(13,"span",63),t.EFF(14),t.k0s(),t.j41(15,"span",64),t.EFF(16),t.k0s()(),t.DNE(17,Ot,5,0,"div",65),t.k0s(),t.j41(18,"div",66),t.DNE(19,Pt,9,1,"div",67),t.DNE(20,Mt,4,0,"button",68),t.DNE(21,xt,2,0,"button",69),t.k0s()()}if(2&o){const e=c.$implicit,n=t.XpG(2);t.R7$(2),t.Y8G("src",n.getProductImageUrl(e),t.B4B)("alt",e.name),t.R7$(1),t.Y8G("ngIf",e.discount),t.R7$(3),t.JRh(e.name),t.R7$(2),t.JRh(e.description||"Latest product with advanced features"),t.R7$(2),t.JRh(e.category||"Electronics"),t.R7$(4),t.SpI("\u20b9",e.price||"999",""),t.R7$(2),t.SpI("/",e.unit||"pcs",""),t.R7$(1),t.Y8G("ngIf",!1===e.inStock),t.R7$(2),t.Y8G("ngIf",n.getProductCartQuantity(e.id)>0&&!1!==e.inStock),t.R7$(1),t.Y8G("ngIf",0===n.getProductCartQuantity(e.id)&&!1!==e.inStock),t.R7$(1),t.Y8G("ngIf",!1===e.inStock)}}function kt(o,c){if(1&o&&(t.j41(0,"div",51),t.DNE(1,bt,22,12,"div",52),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",e.products)}}function yt(o,c){1&o&&(t.j41(0,"div",47)(1,"div",48)(2,"mat-icon",78),t.EFF(3,"shopping_basket"),t.k0s(),t.j41(4,"h5",79),t.EFF(5,"No products found"),t.k0s(),t.j41(6,"p",80),t.EFF(7,"Try adjusting your search or category filter"),t.k0s()()())}function vt(o,c){if(1&o){const e=t.RV6();t.j41(0,"button",81),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.goToCart())}),t.j41(1,"mat-icon"),t.EFF(2,"shopping_cart"),t.k0s(),t.j41(3,"span",82),t.EFF(4),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(4),t.E5c(" ",e.cartItemCount," ",1===e.cartItemCount?"item":"items"," | \u20b9",e.cartTotal," ")}}let Ft=(()=>{class o{constructor(e,n,r,i,a){this.route=e,this.router=n,this.location=r,this.shopService=i,this.cartService=a,this.destroy$=new A.B,this.searchSubject=new A.B,this.shop=null,this.products=[],this.categories=[],this.loading=!1,this.searchTerm="",this.selectedCategory="",this.sortBy="name",this.cartItemCount=0,this.cartTotal=0,this.shopId=0,this.searchSubject.pipe((0,Q.B)(300),(0,v.Q)(this.destroy$)).subscribe(()=>this.loadProducts())}ngOnInit(){this.route.params.pipe((0,v.Q)(this.destroy$)).subscribe(e=>{this.shopId=+e.id,this.loadShop(),this.loadProducts(),this.loadCategories()}),this.cartService.cart$.pipe((0,v.Q)(this.destroy$)).subscribe(e=>{this.cartItemCount=this.cartService.getItemCount(),this.cartTotal=e.total})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadShop(){this.shopService.getShopById(this.shopId).pipe((0,v.Q)(this.destroy$)).subscribe(e=>{this.shop=e})}loadProducts(){this.loading=!0,this.shopService.getProductsByShop(this.shopId,this.selectedCategory,this.searchTerm).pipe((0,v.Q)(this.destroy$)).subscribe({next:e=>{this.products=this.sortProducts(e),this.loading=!1},error:e=>{console.error("Error loading products:",e),this.loading=!1}})}loadCategories(){this.shopService.getProductCategories(this.shopId).pipe((0,v.Q)(this.destroy$)).subscribe(e=>{this.categories=e})}sortProducts(e){switch(this.sortBy){case"name":return e.sort((n,r)=>n.name.localeCompare(r.name));case"price-low":return e.sort((n,r)=>n.price-r.price);case"price-high":return e.sort((n,r)=>r.price-n.price);default:return e}}onSearch(){this.searchSubject.next(this.searchTerm)}onCategoryChange(){this.loadProducts()}onSortChange(){this.products=this.sortProducts([...this.products])}addToCart(e){this.shop&&this.cartService.addToCart(e,this.shop.id,this.shop.name)}increaseQuantity(e){const n=this.getProductCartQuantity(e.id);this.cartService.updateQuantity(e.id,n+1)}decreaseQuantity(e){const n=this.getProductCartQuantity(e.id);n>1?this.cartService.updateQuantity(e.id,n-1):this.cartService.removeFromCart(e.id)}getProductCartQuantity(e){const r=this.cartService.getCart().items.find(i=>i.productId===e);return r?r.quantity:0}goToCart(){this.router.navigate(["/customer/cart"])}goBack(){this.location.back()}getProductImageUrl(e){return e.image&&""!==e.image?e.image.startsWith("/assets")?e.image:(0,tt.V)(e.image):"/assets/images/product-placeholder.jpg"}onImageError(e){e.target.src="/assets/images/product-placeholder.jpg"}onShopImageError(e){e.target.src="/assets/images/shop-placeholder.jpg"}static{this.\u0275fac=function(n){return new(n||o)(t.rXU($.nX),t.rXU($.Ix),t.rXU(O.aZ),t.rXU(Z),t.rXU(q))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-product-list"]],decls:47,vars:12,consts:[[1,"product-list-container"],["class","shop-header-card",4,"ngIf"],[1,"content-wrapper"],[1,"filters-sidebar"],[1,"filter-card"],["appearance","outline",1,"full-width"],["matPrefix",""],["matInput","","placeholder","Search...",3,"ngModel","ngModelChange","keyup"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],[1,"filter-section"],[1,"filter-title"],[1,"category-list",3,"ngModel","ngModelChange","change"],["value","",1,"category-option"],[1,"category-label"],["class","category-option",3,"value",4,"ngFor","ngForOf"],["class","cart-summary-card",4,"ngIf"],[1,"products-section"],[1,"products-container"],[1,"products-header"],["appearance","outline",1,"sort-field"],[3,"value","valueChange","selectionChange"],["value","name"],["value","price-low"],["value","price-high"],["value","popular"],["class","row",4,"ngIf"],["class","products-list",4,"ngIf"],["mat-fab","","extended","","color","accent","class","floating-cart-button",3,"click",4,"ngIf"],[1,"shop-header-card"],[1,"shop-header"],["mat-stroked-button","","color","primary",1,"back-button",3,"click"],[1,"shop-info"],[1,"shop-logo",3,"src","alt","error"],[1,"shop-details"],[1,"shop-name"],[1,"shop-description"],[1,"shop-metrics"],[1,"metrics-container"],[1,"metric-badge"],[1,"metric-icon"],["mat-icon-button","","matSuffix","",3,"click"],[1,"category-option",3,"value"],[1,"cart-summary-card"],[1,"cart-info"],[1,"cart-label"],[1,"cart-value"],["mat-raised-button","","color","accent",1,"full-width","checkout-btn",3,"click"],[1,"row"],[1,"col-12","text-center","py-5"],["diameter","50"],[1,"mt-3"],[1,"products-list"],["class","product-list-item",4,"ngFor","ngForOf"],[1,"product-list-item"],[1,"product-image"],[3,"src","alt","error"],["class","discount-badge",4,"ngIf"],[1,"product-info"],[1,"product-name"],[1,"product-description"],[1,"category-chip"],[1,"product-pricing"],[1,"price-container"],[1,"price"],[1,"unit"],["class","stock-status",4,"ngIf"],[1,"product-actions"],["class","quantity-selector",4,"ngIf"],["mat-raised-button","","color","primary","class","add-to-cart-btn",3,"click",4,"ngIf"],["mat-button","","disabled","",4,"ngIf"],[1,"discount-badge"],[1,"stock-status"],[1,"out-of-stock-icon"],[1,"quantity-selector"],["mat-icon-button","","color","primary",3,"click"],[1,"quantity"],["mat-raised-button","","color","primary",1,"add-to-cart-btn",3,"click"],["mat-button","","disabled",""],[1,"display-1","text-muted"],[1,"text-muted","mt-3"],[1,"text-muted"],["mat-fab","","extended","","color","accent",1,"floating-cart-button",3,"click"],[1,"cart-text"]],template:function(n,r){1&n&&(t.j41(0,"div",0),t.DNE(1,pt,28,7,"mat-card",1),t.j41(2,"div",2)(3,"div",3)(4,"mat-card",4)(5,"mat-card-header")(6,"mat-card-title"),t.EFF(7,"Filters"),t.k0s()(),t.j41(8,"mat-card-content")(9,"mat-form-field",5)(10,"mat-label"),t.EFF(11,"Search products"),t.k0s(),t.j41(12,"mat-icon",6),t.EFF(13,"search"),t.k0s(),t.j41(14,"input",7),t.bIt("ngModelChange",function(a){return r.searchTerm=a})("keyup",function(){return r.onSearch()}),t.k0s(),t.DNE(15,ut,3,0,"button",8),t.k0s(),t.j41(16,"div",9)(17,"h3",10),t.EFF(18,"Categories"),t.k0s(),t.j41(19,"mat-radio-group",11),t.bIt("ngModelChange",function(a){return r.selectedCategory=a})("change",function(){return r.onCategoryChange()}),t.j41(20,"mat-radio-button",12)(21,"span",13),t.EFF(22,"All Categories"),t.k0s()(),t.DNE(23,_t,3,2,"mat-radio-button",14),t.k0s()()()(),t.DNE(24,ft,16,2,"mat-card",15),t.k0s(),t.j41(25,"div",16)(26,"mat-card",17)(27,"mat-card-header",18)(28,"mat-card-title"),t.EFF(29),t.k0s(),t.j41(30,"mat-form-field",19)(31,"mat-label"),t.EFF(32,"Sort by"),t.k0s(),t.j41(33,"mat-select",20),t.bIt("valueChange",function(a){return r.sortBy=a})("selectionChange",function(){return r.onSortChange()}),t.j41(34,"mat-option",21),t.EFF(35,"Name"),t.k0s(),t.j41(36,"mat-option",22),t.EFF(37,"Price: Low to High"),t.k0s(),t.j41(38,"mat-option",23),t.EFF(39,"Price: High to Low"),t.k0s(),t.j41(40,"mat-option",24),t.EFF(41,"Most Popular"),t.k0s()()()(),t.j41(42,"mat-card-content"),t.DNE(43,ht,5,0,"div",25),t.DNE(44,kt,2,1,"div",26),t.DNE(45,yt,8,0,"div",25),t.k0s()()()(),t.DNE(46,vt,5,3,"button",27),t.k0s()),2&n&&(t.R7$(1),t.Y8G("ngIf",r.shop),t.R7$(13),t.Y8G("ngModel",r.searchTerm),t.R7$(1),t.Y8G("ngIf",r.searchTerm),t.R7$(4),t.Y8G("ngModel",r.selectedCategory),t.R7$(4),t.Y8G("ngForOf",r.categories),t.R7$(1),t.Y8G("ngIf",r.cartItemCount>0),t.R7$(5),t.SpI("Products (",r.products.length,")"),t.R7$(4),t.Y8G("value",r.sortBy),t.R7$(10),t.Y8G("ngIf",r.loading),t.R7$(1),t.Y8G("ngIf",!r.loading&&r.products.length>0),t.R7$(1),t.Y8G("ngIf",!r.loading&&0===r.products.length),t.R7$(1),t.Y8G("ngIf",r.cartItemCount>0))},dependencies:[O.Sq,O.bT,s.me,s.BC,s.vS,h.RN,h.m2,h.MM,h.dh,k.$z,k.iY,k.Sr,w.An,M.rl,M.nJ,M.JW,M.yw,G.fg,z.VO,J.wT,L.VT,L._g,y.LG],styles:[".product-list-container[_ngcontent-%COMP%]{height:100vh;background:#f5f5f5;display:flex;flex-direction:column;overflow:hidden}.shop-header-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;flex-shrink:0;position:sticky;top:0;z-index:100;box-shadow:0 2px 8px #00000026;margin:0;border-radius:0}.shop-header-card[_ngcontent-%COMP%]   .shop-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px}.shop-header-card[_ngcontent-%COMP%]   .shop-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;flex:1}.shop-header-card[_ngcontent-%COMP%]   .shop-logo[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:white;padding:4px;object-fit:cover}.shop-header-card[_ngcontent-%COMP%]   .shop-details[_ngcontent-%COMP%]{flex:1}.shop-header-card[_ngcontent-%COMP%]   .shop-name[_ngcontent-%COMP%]{margin:0 0 8px;font-size:28px;font-weight:500;color:#fff}.shop-header-card[_ngcontent-%COMP%]   .shop-description[_ngcontent-%COMP%]{margin:0 0 12px;opacity:.9;font-size:14px}.shop-header-card[_ngcontent-%COMP%]   .shop-metrics[_ngcontent-%COMP%]   .metrics-container[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}.shop-header-card[_ngcontent-%COMP%]   .shop-metrics[_ngcontent-%COMP%]   .metric-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;background:rgba(255,255,255,.2);color:#fff;font-size:13px;padding:6px 12px;border-radius:16px}.shop-header-card[_ngcontent-%COMP%]   .shop-metrics[_ngcontent-%COMP%]   .metric-badge[_ngcontent-%COMP%]   .metric-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.shop-header-card[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{background:white;flex-shrink:0}.shop-header-card[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}.content-wrapper[_ngcontent-%COMP%]{display:flex;gap:24px;flex:1;overflow:hidden;padding:24px}@media (max-width: 960px){.content-wrapper[_ngcontent-%COMP%]{flex-direction:column;overflow-y:auto}}.filters-sidebar[_ngcontent-%COMP%]{width:280px;min-width:280px;height:100%;overflow-y:auto;padding-right:16px}@media (max-width: 960px){.filters-sidebar[_ngcontent-%COMP%]{width:100%;height:auto;overflow-y:visible}}.filters-sidebar[_ngcontent-%COMP%]   .filter-card[_ngcontent-%COMP%]{margin-bottom:16px}.filters-sidebar[_ngcontent-%COMP%]   .filter-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:500}.filters-sidebar[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.filters-sidebar[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]{margin-top:24px}.filters-sidebar[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#000000b3;margin-bottom:12px;text-transform:uppercase;letter-spacing:.5px}.filters-sidebar[_ngcontent-%COMP%]   .category-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filters-sidebar[_ngcontent-%COMP%]   .category-option[_ngcontent-%COMP%]{margin:0}.filters-sidebar[_ngcontent-%COMP%]   .category-option[_ngcontent-%COMP%]   .category-label[_ngcontent-%COMP%]{font-size:14px;text-transform:capitalize}.cart-summary-card[_ngcontent-%COMP%]{background:#48bb78;color:#fff}.cart-summary-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.cart-summary-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:16px;color:#fff}.cart-summary-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.cart-summary-card[_ngcontent-%COMP%]   .cart-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding:12px;background:rgba(255,255,255,.1);border-radius:8px}.cart-summary-card[_ngcontent-%COMP%]   .cart-info[_ngcontent-%COMP%]   .cart-label[_ngcontent-%COMP%]{font-weight:500}.cart-summary-card[_ngcontent-%COMP%]   .cart-info[_ngcontent-%COMP%]   .cart-value[_ngcontent-%COMP%]{font-size:20px;font-weight:600}.cart-summary-card[_ngcontent-%COMP%]   .checkout-btn[_ngcontent-%COMP%]{width:100%;height:48px;font-size:16px;font-weight:500}.cart-summary-card[_ngcontent-%COMP%]   .checkout-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.products-section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}.products-section[_ngcontent-%COMP%]   .products-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;background:white;border-radius:8px;box-shadow:0 2px 8px #00000014}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid rgba(0,0,0,.12)}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:500}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]{width:180px;margin:0}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.products-list[_ngcontent-%COMP%]{padding:0;height:100%}.products-list[_ngcontent-%COMP%]   .product-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding:20px;background:white;border-bottom:1px solid #e0e0e0;transition:all .2s ease}.products-list[_ngcontent-%COMP%]   .product-list-item[_ngcontent-%COMP%]:hover{background:#f8f9fa;box-shadow:0 2px 8px #00000014}.products-list[_ngcontent-%COMP%]   .product-list-item[_ngcontent-%COMP%]:last-child{border-bottom:none}@media (max-width: 768px){.products-list[_ngcontent-%COMP%]   .product-list-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}.products-list[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{position:relative;width:100px;height:100px;flex-shrink:0}.products-list[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:8px;border:1px solid #e0e0e0}.products-list[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]   .discount-badge[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;background:#ff4757;color:#fff;padding:2px 6px;border-radius:4px;font-size:10px;font-weight:600;text-transform:uppercase}.products-list[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{flex:1;min-width:0}.products-list[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:500;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.products-list[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .product-description[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#666;line-height:1.4;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.products-list[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]{display:inline-block;font-size:11px;padding:4px 10px;background:#f0f0f0;color:#666;border-radius:12px;text-transform:capitalize}.products-list[_ngcontent-%COMP%]   .product-pricing[_ngcontent-%COMP%]{min-width:120px;text-align:right}.products-list[_ngcontent-%COMP%]   .product-pricing[_ngcontent-%COMP%]   .price-container[_ngcontent-%COMP%]{margin-bottom:8px}.products-list[_ngcontent-%COMP%]   .product-pricing[_ngcontent-%COMP%]   .price-container[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#48bb78}.products-list[_ngcontent-%COMP%]   .product-pricing[_ngcontent-%COMP%]   .price-container[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{font-size:13px;color:#999;margin-left:4px}.products-list[_ngcontent-%COMP%]   .product-pricing[_ngcontent-%COMP%]   .stock-status[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:4px;color:#ff6b6b;font-size:12px}.products-list[_ngcontent-%COMP%]   .product-pricing[_ngcontent-%COMP%]   .stock-status[_ngcontent-%COMP%]   .out-of-stock-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}@media (max-width: 768px){.products-list[_ngcontent-%COMP%]   .product-pricing[_ngcontent-%COMP%]{text-align:left}.products-list[_ngcontent-%COMP%]   .product-pricing[_ngcontent-%COMP%]   .stock-status[_ngcontent-%COMP%]{justify-content:flex-start}}.products-list[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]{min-width:200px;display:flex;align-items:center;justify-content:flex-end}.products-list[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .quantity-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#f5f5f5;border-radius:25px;padding:4px 8px}.products-list[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .quantity-selector[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{width:32px;height:32px;line-height:32px}.products-list[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .quantity-selector[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px}.products-list[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .quantity-selector[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{font-size:16px;font-weight:600;min-width:30px;text-align:center}.products-list[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]{min-width:150px;height:40px}.products-list[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:20px}@media (max-width: 768px){.products-list[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]{width:100%;justify-content:center;margin-top:12px}.products-list[_ngcontent-%COMP%]   .product-actions[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]{width:100%}}mat-spinner[_ngcontent-%COMP%]{margin:40px auto}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#666;margin-bottom:8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#999}.floating-cart-button[_ngcontent-%COMP%]{position:fixed!important;right:24px;bottom:24px;z-index:1000;box-shadow:0 4px 12px #00000026,0 8px 24px #48bb784d;background:linear-gradient(135deg,#48bb78 0%,#38a169 100%)!important;color:#fff!important;height:56px;padding:0 20px!important;min-width:200px;transition:all .3s cubic-bezier(.4,0,.2,1)}.floating-cart-button[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 16px #0003,0 12px 32px #48bb7866}.floating-cart-button[_ngcontent-%COMP%]:active{transform:translateY(-2px)}.floating-cart-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:12px;font-size:24px;width:24px;height:24px}.floating-cart-button[_ngcontent-%COMP%]   .cart-text[_ngcontent-%COMP%]{font-size:15px;font-weight:600;letter-spacing:.3px}@media (max-width: 768px){.floating-cart-button[_ngcontent-%COMP%]{right:16px;bottom:16px;height:48px;padding:0 16px!important;min-width:160px}.floating-cart-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:20px;width:20px;height:20px}.floating-cart-button[_ngcontent-%COMP%]   .cart-text[_ngcontent-%COMP%]{font-size:13px}}  .mat-form-field-appearance-outline .mat-form-field-outline{color:#0000001f}  .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline{color:#667eea}  .mat-radio-button.mat-radio-checked .mat-radio-label-content{color:#667eea}  .mat-chip{font-size:12px}"]})}}return o})();function Et(o,c){if(1&o&&(t.j41(0,"span",10),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.SpI("(",e.cartItems.length," items)")}}function jt(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",11)(1,"mat-card",12)(2,"mat-icon",13),t.EFF(3,"remove_shopping_cart"),t.k0s(),t.j41(4,"h2"),t.EFF(5,"Your cart is empty"),t.k0s(),t.j41(6,"p"),t.EFF(7,"Looks like you haven't added anything to your cart yet"),t.k0s(),t.j41(8,"button",14),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.goToShops())}),t.j41(9,"mat-icon"),t.EFF(10,"store"),t.k0s(),t.EFF(11," Start Shopping "),t.k0s()()()}}function It(o,c){if(1&o&&(t.j41(0,"mat-card",38)(1,"mat-icon",39),t.EFF(2,"storefront"),t.k0s(),t.j41(3,"div",40)(4,"h3"),t.EFF(5),t.k0s(),t.j41(6,"p"),t.EFF(7,"Delivery in 30-45 minutes"),t.k0s()()()),2&o){const e=t.XpG(2);t.R7$(5),t.JRh(e.cart.shopName)}}function wt(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",41)(1,"div",42)(2,"img",43),t.bIt("error",function(r){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onImageError(r))}),t.k0s()(),t.j41(3,"div",44)(4,"h4",45),t.EFF(5),t.k0s(),t.j41(6,"p",46),t.EFF(7),t.k0s(),t.j41(8,"span",47),t.EFF(9),t.k0s()(),t.j41(10,"div",48)(11,"span",49),t.EFF(12),t.k0s(),t.j41(13,"span",50),t.EFF(14),t.k0s()(),t.j41(15,"div",51)(16,"button",52),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.decreaseQuantity(i))}),t.j41(17,"mat-icon"),t.EFF(18,"remove_circle_outline"),t.k0s()(),t.j41(19,"span",53),t.EFF(20),t.k0s(),t.j41(21,"button",52),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.increaseQuantity(i))}),t.j41(22,"mat-icon"),t.EFF(23,"add_circle_outline"),t.k0s()()(),t.j41(24,"div",54)(25,"span",55),t.EFF(26,"Subtotal"),t.k0s(),t.j41(27,"span",56),t.EFF(28),t.k0s()(),t.j41(29,"div",57)(30,"button",58),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.removeItem(i))}),t.j41(31,"mat-icon"),t.EFF(32,"delete_outline"),t.k0s()()()()}if(2&o){const e=c.$implicit,n=t.XpG(2);t.R7$(2),t.Y8G("src",n.getProductImageUrl(e.productImage),t.B4B)("alt",e.productName),t.R7$(3),t.JRh(e.productName),t.R7$(2),t.JRh(e.shopName),t.R7$(2),t.JRh(e.unit),t.R7$(3),t.SpI("\u20b9",e.price,""),t.R7$(2),t.SpI("/",e.unit,""),t.R7$(6),t.JRh(e.quantity),t.R7$(8),t.SpI("\u20b9",e.price*e.quantity,"")}}function Rt(o,c){if(1&o&&(t.j41(0,"div",59)(1,"span",26),t.EFF(2,"Discount:"),t.k0s(),t.j41(3,"span",27),t.EFF(4),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(4),t.SpI("-\u20b9",e.cart.discount,"")}}function Tt(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",60)(1,"mat-form-field",61)(2,"mat-label"),t.EFF(3,"Have a discount code?"),t.k0s(),t.j41(4,"input",62),t.bIt("ngModelChange",function(r){t.eBV(e);const i=t.XpG(2);return t.Njj(i.discountCode=r)}),t.k0s(),t.j41(5,"button",63),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.applyDiscount())}),t.j41(6,"mat-icon"),t.EFF(7,"local_offer"),t.k0s()()()()}if(2&o){const e=t.XpG(2);t.R7$(4),t.Y8G("ngModel",e.discountCode),t.R7$(1),t.Y8G("disabled",!e.discountCode)}}function St(o,c){1&o&&(t.j41(0,"div",64)(1,"mat-icon"),t.EFF(2,"check_circle"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Discount applied successfully!"),t.k0s()())}function Nt(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",15)(1,"div",16),t.DNE(2,It,8,1,"mat-card",17),t.j41(3,"mat-card",18)(4,"mat-card-header")(5,"mat-card-title"),t.EFF(6,"Cart Items"),t.k0s()(),t.j41(7,"mat-card-content"),t.DNE(8,wt,33,9,"div",19),t.k0s(),t.j41(9,"mat-card-actions")(10,"button",20),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.clearCart())}),t.j41(11,"mat-icon"),t.EFF(12,"delete_sweep"),t.k0s(),t.EFF(13," Clear Cart "),t.k0s(),t.j41(14,"button",21),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.goToShops())}),t.j41(15,"mat-icon"),t.EFF(16,"add_circle_outline"),t.k0s(),t.EFF(17," Add More Items "),t.k0s()()()(),t.j41(18,"div",22)(19,"mat-card",23)(20,"mat-card-header")(21,"mat-card-title"),t.EFF(22,"Order Summary"),t.k0s()(),t.j41(23,"mat-card-content")(24,"div",24)(25,"div",25)(26,"span",26),t.EFF(27,"Items Subtotal:"),t.k0s(),t.j41(28,"span",27),t.EFF(29),t.k0s()(),t.j41(30,"div",25)(31,"span",26),t.EFF(32,"Delivery Fee:"),t.k0s(),t.j41(33,"span",27),t.EFF(34),t.k0s()(),t.DNE(35,Rt,5,1,"div",28),t.k0s(),t.nrm(36,"mat-divider"),t.j41(37,"div",29)(38,"span",30),t.EFF(39,"Total Amount:"),t.k0s(),t.j41(40,"span",31),t.EFF(41),t.k0s()(),t.DNE(42,Tt,8,2,"div",32),t.DNE(43,St,5,0,"div",33),t.j41(44,"button",34),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.proceedToCheckout())}),t.j41(45,"mat-icon"),t.EFF(46,"shopping_cart_checkout"),t.k0s(),t.EFF(47," Proceed to Checkout "),t.k0s(),t.j41(48,"div",35)(49,"mat-icon"),t.EFF(50,"payments"),t.k0s(),t.j41(51,"div")(52,"strong"),t.EFF(53,"Payment Method"),t.k0s(),t.j41(54,"p"),t.EFF(55,"Cash on Delivery Available"),t.k0s()()()()(),t.j41(56,"mat-card",36)(57,"mat-card-content")(58,"h4")(59,"mat-icon"),t.EFF(60,"local_shipping"),t.k0s(),t.EFF(61," Delivery Information "),t.k0s(),t.j41(62,"div",37)(63,"mat-icon"),t.EFF(64,"schedule"),t.k0s(),t.j41(65,"span"),t.EFF(66,"Estimated: 30-45 minutes"),t.k0s()(),t.j41(67,"div",37)(68,"mat-icon"),t.EFF(69,"local_offer"),t.k0s(),t.j41(70,"span"),t.EFF(71,"Free delivery above \u20b9500"),t.k0s()(),t.j41(72,"div",37)(73,"mat-icon"),t.EFF(74,"support_agent"),t.k0s(),t.j41(75,"span"),t.EFF(76,"Support: +91 98765 43210"),t.k0s()()()()()()}if(2&o){const e=t.XpG();t.R7$(2),t.Y8G("ngIf",e.cart.shopName),t.R7$(6),t.Y8G("ngForOf",e.cartItems),t.R7$(21),t.SpI("\u20b9",e.cart.subtotal,""),t.R7$(5),t.SpI("\u20b9",e.cart.deliveryFee||40,""),t.R7$(1),t.Y8G("ngIf",e.cart.discount>0),t.R7$(6),t.SpI("\u20b9",e.cart.total||e.cart.subtotal+(e.cart.deliveryFee||40),""),t.R7$(1),t.Y8G("ngIf",!e.discountApplied),t.R7$(1),t.Y8G("ngIf",e.discountApplied),t.R7$(1),t.Y8G("disabled",0===e.cartItems.length)}}let $t=(()=>{class o{constructor(e,n,r,i){this.router=e,this.location=n,this.cartService=r,this.snackBar=i,this.destroy$=new A.B,this.cart={items:[],shopId:null,shopName:null,subtotal:0,discount:0,deliveryFee:0,total:0},this.cartItems=[],this.discountCode="",this.discountApplied=!1,this.discountMessage="",this.applyingDiscount=!1}ngOnInit(){this.cartService.cart$.pipe((0,v.Q)(this.destroy$)).subscribe(e=>{this.cart=e,this.cartItems=e.items})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}increaseQuantity(e){this.cartService.updateQuantity(e.productId,e.quantity+1)}decreaseQuantity(e){e.quantity>1?this.cartService.updateQuantity(e.productId,e.quantity-1):this.removeItem(e)}removeItem(e){this.cartService.removeFromCart(e.productId),this.snackBar.open(`${e.productName} removed from cart`,"Close",{duration:2e3})}clearCart(){this.cartService.clearCart(),this.discountApplied=!1,this.discountCode="",this.discountMessage="",this.snackBar.open("Cart cleared","Close",{duration:2e3})}applyDiscount(){if(!this.discountCode.trim())return;this.applyingDiscount=!0;const n={WELCOME10:10,SAVE20:20,NEWUSER:15,CHENNAI5:5}[this.discountCode.toUpperCase()];setTimeout(()=>{if(n){const r=Math.round(this.cart.subtotal*n/100);this.cartService.applyDiscount(r),this.discountApplied=!0,this.discountMessage=`${n}% discount applied!`,this.snackBar.open(`Discount of \u20b9${r} applied!`,"Close",{duration:3e3})}else this.discountMessage="Invalid discount code",this.snackBar.open("Invalid discount code","Close",{duration:2e3});this.applyingDiscount=!1},1e3)}proceedToCheckout(){0!==this.cartItems.length&&this.router.navigate(["/customer/checkout"])}goToShops(){this.router.navigate(["/customer/shops"])}goBack(){this.location.back()}getProductImageUrl(e){return e&&""!==e?e.startsWith("/assets")?e:(0,tt.V)(e):"/assets/images/product-placeholder.jpg"}onImageError(e){e.target.src="/assets/images/product-placeholder.jpg"}static{this.\u0275fac=function(n){return new(n||o)(t.rXU($.Ix),t.rXU(O.aZ),t.rXU(q),t.rXU(R.UG))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-shopping-cart"]],decls:16,vars:3,consts:[[1,"shopping-cart-page"],[1,"page-header"],[1,"header-container"],["mat-stroked-button","","color","primary",1,"back-button",3,"click"],[1,"header-title"],[1,"cart-icon"],["class","item-count",4,"ngIf"],[1,"cart-main-content"],["class","empty-cart-container",4,"ngIf"],["class","cart-content-grid",4,"ngIf"],[1,"item-count"],[1,"empty-cart-container"],[1,"empty-cart-card"],[1,"empty-icon"],["mat-raised-button","","color","primary",3,"click"],[1,"cart-content-grid"],[1,"cart-items-column"],["class","shop-info-banner",4,"ngIf"],[1,"cart-items-card"],["class","cart-item",4,"ngFor","ngForOf"],["mat-button","","color","warn",3,"click"],["mat-button","",3,"click"],[1,"order-summary-column"],[1,"order-summary-card"],[1,"price-breakdown"],[1,"price-row"],[1,"label"],[1,"value"],["class","price-row discount",4,"ngIf"],[1,"total-section"],[1,"total-label"],[1,"total-value"],["class","discount-section",4,"ngIf"],["class","discount-success",4,"ngIf"],["mat-raised-button","","color","accent",1,"checkout-button",3,"disabled","click"],[1,"payment-info"],[1,"delivery-info-card"],[1,"info-item"],[1,"shop-info-banner"],[1,"shop-icon"],[1,"shop-details"],[1,"cart-item"],[1,"item-image"],[3,"src","alt","error"],[1,"item-details"],[1,"item-name"],[1,"item-shop"],[1,"item-unit"],[1,"item-price"],[1,"price"],[1,"unit"],[1,"item-quantity"],["mat-icon-button","","color","primary",3,"click"],[1,"quantity-value"],[1,"item-subtotal"],[1,"subtotal-label"],[1,"subtotal-value"],[1,"item-remove"],["mat-icon-button","","color","warn",3,"click"],[1,"price-row","discount"],[1,"discount-section"],["appearance","outline",1,"discount-field"],["matInput","","placeholder","Enter code",3,"ngModel","ngModelChange"],["mat-icon-button","","matSuffix","","color","primary",3,"disabled","click"],[1,"discount-success"]],template:function(n,r){1&n&&(t.j41(0,"div",0)(1,"mat-card",1)(2,"div",2)(3,"button",3),t.bIt("click",function(){return r.goBack()}),t.j41(4,"mat-icon"),t.EFF(5,"arrow_back"),t.k0s(),t.EFF(6," Continue Shopping "),t.k0s(),t.j41(7,"div",4)(8,"mat-icon",5),t.EFF(9,"shopping_cart"),t.k0s(),t.j41(10,"h1"),t.EFF(11,"Your Shopping Cart"),t.k0s(),t.DNE(12,Et,2,1,"span",6),t.k0s()()(),t.j41(13,"div",7),t.DNE(14,jt,12,0,"div",8),t.DNE(15,Nt,77,9,"div",9),t.k0s()()),2&n&&(t.R7$(12),t.Y8G("ngIf",r.cartItems.length>0),t.R7$(2),t.Y8G("ngIf",0===r.cartItems.length),t.R7$(1),t.Y8G("ngIf",r.cartItems.length>0))},dependencies:[O.Sq,O.bT,s.me,s.BC,s.vS,h.RN,h.YY,h.m2,h.MM,h.dh,k.$z,k.iY,w.An,M.rl,M.nJ,M.yw,G.fg,b.q],styles:[".shopping-cart-page[_ngcontent-%COMP%]{min-height:100vh;background:#f5f5f5;padding-bottom:40px}.page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;margin-bottom:24px;border-radius:0}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:24px;display:flex;align-items:center;flex-wrap:wrap;gap:16px}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{background:white;flex-shrink:0}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1;justify-content:center}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .cart-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:500}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]{font-size:18px;opacity:.9}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:white}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}.cart-main-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 24px}.empty-cart-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px}.empty-cart-container[_ngcontent-%COMP%]   .empty-cart-card[_ngcontent-%COMP%]{text-align:center;padding:60px 40px;max-width:500px}.empty-cart-container[_ngcontent-%COMP%]   .empty-cart-card[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:80px;width:80px;height:80px;color:#ccc;margin:0 auto 24px}.empty-cart-container[_ngcontent-%COMP%]   .empty-cart-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:24px;color:#333}.empty-cart-container[_ngcontent-%COMP%]   .empty-cart-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;color:#666;font-size:16px}.empty-cart-container[_ngcontent-%COMP%]   .empty-cart-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.cart-content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 380px;gap:24px}@media (max-width: 960px){.cart-content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.cart-items-column[_ngcontent-%COMP%]   .shop-info-banner[_ngcontent-%COMP%]{margin-bottom:16px;background:#fff}.cart-items-column[_ngcontent-%COMP%]   .shop-info-banner[_ngcontent-%COMP%]   mat-icon.shop-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;color:#667eea;margin-right:16px}.cart-items-column[_ngcontent-%COMP%]   .shop-info-banner[_ngcontent-%COMP%]   .shop-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:18px;color:#333}.cart-items-column[_ngcontent-%COMP%]   .shop-info-banner[_ngcontent-%COMP%]   .shop-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.cart-items-column[_ngcontent-%COMP%]   .shop-info-banner[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;align-items:center}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;padding-bottom:16px;margin-bottom:0}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;margin:0}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:0}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 1fr auto auto auto 48px;gap:16px;align-items:center;padding:20px;border-bottom:1px solid #f0f0f0;transition:background .2s}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]:hover{background:#fafafa}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{width:80px;height:80px}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:8px;border:1px solid #e0e0e0}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;font-weight:500;color:#333}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-shop[_ngcontent-%COMP%]{margin:0 0 4px;font-size:13px;color:#666}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-unit[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;background:#f0f0f0;border-radius:4px;font-size:11px;color:#666}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{text-align:right}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{display:block;font-size:18px;font-weight:600;color:#48bb78}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{font-size:12px;color:#999}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:32px;height:32px}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]   .quantity-value[_ngcontent-%COMP%]{min-width:30px;text-align:center;font-size:16px;font-weight:600}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-subtotal[_ngcontent-%COMP%]{text-align:right}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-subtotal[_ngcontent-%COMP%]   .subtotal-label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#999;margin-bottom:2px}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-subtotal[_ngcontent-%COMP%]   .subtotal-value[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-remove[_ngcontent-%COMP%]{text-align:center}@media (max-width: 768px){.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]{grid-template-columns:60px 1fr;gap:12px}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%], .cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%], .cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-subtotal[_ngcontent-%COMP%], .cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   .cart-item[_ngcontent-%COMP%]   .item-remove[_ngcontent-%COMP%]{grid-column:span 2}}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{padding:16px 20px;border-top:1px solid #f0f0f0;display:flex;gap:12px}.cart-items-column[_ngcontent-%COMP%]   .cart-items-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}.order-summary-column[_ngcontent-%COMP%]{position:sticky;top:24px;height:-moz-fit-content;height:fit-content}@media (max-width: 960px){.order-summary-column[_ngcontent-%COMP%]{position:static}}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]{margin-bottom:16px}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;padding-bottom:16px;margin-bottom:16px}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;margin:0}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .price-breakdown[_ngcontent-%COMP%]{margin-bottom:16px}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .price-breakdown[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .price-breakdown[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-size:14px}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .price-breakdown[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#333}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .price-breakdown[_ngcontent-%COMP%]   .price-row.discount[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .price-breakdown[_ngcontent-%COMP%]   .price-row.discount[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#48bb78}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin:16px 0}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:20px 0}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-label[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#333}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-value[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#48bb78}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .discount-section[_ngcontent-%COMP%]{margin:20px 0}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .discount-section[_ngcontent-%COMP%]   .discount-field[_ngcontent-%COMP%]{width:100%}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .discount-section[_ngcontent-%COMP%]   .discount-field[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .discount-success[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px;background:#e8f5e9;border-radius:8px;color:#2e7d32;margin:16px 0}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .discount-success[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .checkout-button[_ngcontent-%COMP%]{width:100%;height:48px;font-size:16px;font-weight:500;margin:20px 0}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .checkout-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;background:#f5f5f5;border-radius:8px}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#666}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:2px;font-size:14px;color:#333}.order-summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .payment-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#666}.order-summary-column[_ngcontent-%COMP%]   .delivery-info-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:0 0 16px;font-size:16px;font-weight:500;color:#333}.order-summary-column[_ngcontent-%COMP%]   .delivery-info-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#667eea}.order-summary-column[_ngcontent-%COMP%]   .delivery-info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:12px}.order-summary-column[_ngcontent-%COMP%]   .delivery-info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.order-summary-column[_ngcontent-%COMP%]   .delivery-info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#999}.order-summary-column[_ngcontent-%COMP%]   .delivery-info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#666}  .mat-form-field-appearance-outline .mat-form-field-outline{color:#0000001f}  .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline{color:#667eea}  .mat-card{border-radius:8px;box-shadow:0 2px 8px #00000014}  .mat-button,   .mat-raised-button,   .mat-stroked-button{border-radius:6px;text-transform:none;font-weight:500}"]})}}return o})();var W=l(467),Dt=l(8032),x=l.n(Dt),I=l(6354),et=l(8141),C=l(3904);let nt=(()=>{class o{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/customer/delivery-locations`}getAddresses(){return this.http.get(this.apiUrl).pipe((0,I.T)(e=>{if(C.c.isError(e)){const n=C.c.getErrorMessage(e);throw new Error(n)}return e.data}),(0,P.W)(e=>(console.error("Error fetching addresses:",e),(0,f.of)([]))))}addAddress(e){return this.http.post(this.apiUrl,e).pipe((0,I.T)(n=>{if(C.c.isError(n)){const r=C.c.getErrorMessage(n);throw new Error(r)}return n.data}),(0,P.W)(n=>{throw console.error("Error adding address:",n),n}))}updateAddress(e,n){return this.http.put(`${this.apiUrl}/${e}`,n).pipe((0,I.T)(r=>{if(C.c.isError(r)){const i=C.c.getErrorMessage(r);throw new Error(i)}return r.data}),(0,P.W)(r=>{throw console.error("Error updating address:",r),r}))}deleteAddress(e){return this.http.delete(`${this.apiUrl}/${e}`).pipe((0,I.T)(n=>{if(C.c.isError(n)){const r=C.c.getErrorMessage(n);throw new Error(r)}}),(0,P.W)(n=>{throw console.error("Error deleting address:",n),n}))}setDefaultAddress(e){return this.http.put(`${this.apiUrl}/${e}/set-default`,{}).pipe((0,I.T)(n=>{if(C.c.isError(n)){const r=C.c.getErrorMessage(n);throw new Error(r)}return n.data}),(0,P.W)(n=>{throw console.error("Error setting default address:",n),n}))}static{this.\u0275fac=function(n){return new(n||o)(t.KVO(D.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),Gt=(()=>{class o{constructor(e,n,r,i){this.http=e,this.cartService=n,this.router=r,this.addressService=i,this.apiUrl=`${F.c.apiUrl}/customer`}placeOrder(e,n,r){const i=this.cartService.getCart();if(0===i.items.length)return x().fire("Error","Your cart is empty","error"),(0,f.of)(null);let a=this.getCustomerId();if(!a)return x().fire("Error","Please login to place an order","error"),this.router.navigate(["/auth/login"]),(0,f.of)(null);const d=i.discount||0,u={customerId:a,shopId:i.shopId,deliveryType:"HOME_DELIVERY",items:i.items.map(_=>({productId:_.productId,productName:_.productName,price:_.price,quantity:_.quantity,unit:_.unit||"unit"})),deliveryAddress:{streetAddress:e.address,landmark:e.landmark||"",city:e.city,state:e.state,pincode:e.postalCode},paymentMethod:n,subtotal:i.subtotal,deliveryFee:40,discount:d,total:i.total,notes:r||"",customerInfo:{customerId:a,firstName:e.contactName.split(" ")[0]||"",lastName:e.contactName.split(" ").slice(1).join(" ")||"",phone:e.phone,email:""}};return console.log("Placing order with request:",u),this.http.post(`${this.apiUrl}/orders`,u).pipe((0,I.T)(_=>{if(C.c.isError(_)){const g=C.c.getErrorMessage(_);throw new Error(g)}return _.data}),(0,et.M)(_=>{_&&_.id&&this.cartService.clearCart()}),(0,P.W)(_=>{console.error("Error placing order:",_);let g="Failed to place order. Please try again.";return _.error&&_.error.message?g=_.error.message:400===_.status?g="Invalid order data. Please check your cart and try again.":401===_.status?g="Please login to place an order.":500===_.status&&(g="Server error. Please try again later."),x().fire("Error",g,"error"),(0,f.of)(null)}))}validateDeliveryAddress(e){return!!(e.contactName&&e.phone&&e.address&&e.city&&e.state&&e.postalCode)}getSavedAddresses(){return this.addressService.getAddresses().pipe((0,I.T)(e=>this.convertToDeliveryAddresses(e)),(0,P.W)(()=>(0,f.of)([])))}convertToDeliveryAddresses(e){return e.map(n=>({contactName:n.contactPersonName,phone:n.contactMobileNumber,address:this.buildFullAddress(n),city:n.city,state:n.state,postalCode:n.pincode,landmark:n.landmark,isDefault:n.isDefault}))}buildFullAddress(e){const n=[];return e.flatHouse&&n.push(e.flatHouse),e.floor&&n.push(`Floor ${e.floor}`),e.street&&n.push(e.street),e.area&&n.push(e.area),e.village&&n.push(e.village),n.join(", ")}saveAddress(e){const n=this.getCustomerId();return n?this.http.post(`${F.c.apiUrl}/customers/${n}/addresses`,e).pipe((0,I.T)(r=>{if(C.c.isError(r)){const i=C.c.getErrorMessage(r);throw new Error(i)}return r.data}),(0,P.W)(()=>(0,f.of)(e))):(0,f.of)(null)}processPayment(e,n){const i={orderId:e,paymentMethod:n,amount:this.cartService.getCart().total};return"CASH_ON_DELIVERY"===n?(0,f.of)({success:!0,message:"Cash on Delivery selected"}):this.http.post(`${F.c.apiUrl}/payments/process`,i).pipe((0,P.W)(a=>(console.error("Payment processing error:",a),(0,f.of)({success:!1,message:"Payment failed"}))))}getCustomerId(){let e=localStorage.getItem("shop_management_user")||localStorage.getItem("currentUser");if(e)try{const n=JSON.parse(e);console.log("User data from localStorage:",n);const r=n.id||n.userId||1;return console.log("Using user ID as customer ID placeholder:",r),r}catch(n){return console.error("Error parsing user data:",n),1}return console.log("No user data in localStorage, using default customer ID"),1}calculateDeliveryTime(e){return(0,f.of)("30-45 minutes")}applyPromoCode(e){return this.http.post(`${F.c.apiUrl}/promo/apply`,{code:e}).pipe((0,Y.n)(n=>(0,f.of)(n.discount)),(0,P.W)(()=>(x().fire("Invalid Code","This promo code is not valid","error"),(0,f.of)(0))))}placeOrderWithDeliveryType(e,n,r,i){const a=this.cartService.getCart();if(0===a.items.length)return x().fire("Error","Your cart is empty","error"),(0,f.of)(null);let d=this.getCustomerId();if(!d)return x().fire("Error","Please login to place an order","error"),this.router.navigate(["/auth/login"]),(0,f.of)(null);const m="SELF_PICKUP"===e?0:50,u=a.discount||0,_={customerId:d,shopId:a.shopId,deliveryType:e,items:a.items.map(g=>({productId:g.productId,productName:g.productName,price:g.price,quantity:g.quantity,unit:g.unit||"unit"})),deliveryAddress:"HOME_DELIVERY"===e&&n?{streetAddress:n.address,landmark:n.landmark||"",city:n.city,state:n.state,pincode:n.postalCode}:{streetAddress:"SELF_PICKUP",city:"N/A",state:"N/A",pincode:"000000"},paymentMethod:r,subtotal:a.subtotal,deliveryFee:m,discount:u,total:a.total,notes:i||"",customerInfo:n?{customerId:d,firstName:n.contactName.split(" ")[0]||"",lastName:n.contactName.split(" ").slice(1).join(" ")||"",phone:n.phone,email:""}:void 0};return console.log("Placing order with delivery type:",e),console.log("Order request:",_),this.http.post(`${this.apiUrl}/orders`,_).pipe((0,I.T)(g=>{if(C.c.isError(g)){const S=C.c.getErrorMessage(g);throw new Error(S)}return g.data}),(0,et.M)(g=>{g&&g.id&&this.cartService.clearCart()}),(0,P.W)(g=>{console.error("Error placing order:",g);let S="Failed to place order. Please try again.";return g.error&&g.error.message?S=g.error.message:400===g.status?S="Invalid order data. Please check your cart and try again.":401===g.status?S="Please login to place an order.":500===g.status&&(S="Server error. Please try again later."),x().fire("Error",S,"error"),(0,f.of)(null)}))}static{this.\u0275fac=function(n){return new(n||o)(t.KVO(D.Qq),t.KVO(q),t.KVO($.Ix),t.KVO(nt))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function Yt(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1," First name is required "),t.k0s())}function zt(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1," Last name is required "),t.k0s())}function Lt(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1," Phone number is required "),t.k0s())}function At(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1," Please enter a valid 10-digit number "),t.k0s())}function Bt(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1," Email is required "),t.k0s())}function Vt(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1," Please enter a valid email "),t.k0s())}function Ut(o,c){if(1&o){const e=t.RV6();t.j41(0,"mat-card",63),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(4);return t.Njj(a.selectAddress(i))}),t.j41(1,"mat-card-content")(2,"div",64)(3,"mat-icon"),t.EFF(4),t.k0s(),t.j41(5,"strong"),t.EFF(6),t.k0s()(),t.j41(7,"p",65),t.EFF(8),t.k0s(),t.j41(9,"p",66),t.EFF(10),t.k0s(),t.j41(11,"p",67),t.EFF(12),t.k0s()()()}if(2&o){const e=c.$implicit;t.R7$(4),t.JRh(e.isDefault?"star":"location_on"),t.R7$(2),t.JRh(e.contactName),t.R7$(2),t.JRh(e.address),t.R7$(2),t.E5c("",e.city,", ",e.state," - ",e.postalCode,""),t.R7$(2),t.JRh(e.phone)}}function Xt(o,c){if(1&o&&(t.j41(0,"div",59)(1,"h4"),t.EFF(2,"Select from saved addresses"),t.k0s(),t.j41(3,"div",60),t.DNE(4,Ut,13,7,"mat-card",61),t.k0s(),t.nrm(5,"mat-divider"),t.j41(6,"p",62),t.EFF(7,"Or enter a new address below"),t.k0s()()),2&o){const e=t.XpG(3);t.R7$(4),t.Y8G("ngForOf",e.savedAddresses)}}function qt(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1," Street address is required "),t.k0s())}function Jt(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1," Pincode is required "),t.k0s())}function Wt(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1," Please enter a valid 6-digit pincode "),t.k0s())}function Ht(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1," City is required "),t.k0s())}function Qt(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1," State is required "),t.k0s())}function Kt(o,c){if(1&o&&(t.j41(0,"mat-card",12)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),t.EFF(4,"location_on"),t.k0s(),t.EFF(5," Delivery Address "),t.k0s()(),t.j41(6,"mat-card-content"),t.DNE(7,Xt,8,1,"div",53),t.j41(8,"mat-form-field",27)(9,"mat-label"),t.EFF(10,"Street Address"),t.k0s(),t.j41(11,"mat-icon",23),t.EFF(12,"home"),t.k0s(),t.nrm(13,"textarea",54),t.DNE(14,qt,2,0,"mat-error",21),t.k0s(),t.j41(15,"div",18)(16,"mat-form-field",19)(17,"mat-label"),t.EFF(18,"Landmark"),t.k0s(),t.j41(19,"mat-icon",23),t.EFF(20,"place"),t.k0s(),t.nrm(21,"input",55),t.k0s(),t.j41(22,"mat-form-field",19)(23,"mat-label"),t.EFF(24,"Pincode"),t.k0s(),t.j41(25,"mat-icon",23),t.EFF(26,"pin_drop"),t.k0s(),t.nrm(27,"input",56),t.DNE(28,Jt,2,0,"mat-error",21),t.DNE(29,Wt,2,0,"mat-error",21),t.k0s()(),t.j41(30,"div",18)(31,"mat-form-field",19)(32,"mat-label"),t.EFF(33,"City"),t.k0s(),t.j41(34,"mat-icon",23),t.EFF(35,"location_city"),t.k0s(),t.nrm(36,"input",57),t.DNE(37,Ht,2,0,"mat-error",21),t.k0s(),t.j41(38,"mat-form-field",19)(39,"mat-label"),t.EFF(40,"State"),t.k0s(),t.j41(41,"mat-icon",23),t.EFF(42,"map"),t.k0s(),t.nrm(43,"input",58),t.DNE(44,Qt,2,0,"mat-error",21),t.k0s()()()()),2&o){const e=t.XpG(2);let n,r,i,a,d;t.R7$(7),t.Y8G("ngIf",e.savedAddresses.length>0),t.R7$(7),t.Y8G("ngIf",null==(n=e.checkoutForm.get("streetAddress"))?null:n.hasError("required")),t.R7$(14),t.Y8G("ngIf",null==(r=e.checkoutForm.get("pincode"))?null:r.hasError("required")),t.R7$(1),t.Y8G("ngIf",null==(i=e.checkoutForm.get("pincode"))?null:i.hasError("pattern")),t.R7$(8),t.Y8G("ngIf",null==(a=e.checkoutForm.get("city"))?null:a.hasError("required")),t.R7$(7),t.Y8G("ngIf",null==(d=e.checkoutForm.get("state"))?null:d.hasError("required"))}}function Zt(o,c){if(1&o&&(t.j41(0,"div",68)(1,"div",69)(2,"span",70),t.EFF(3),t.k0s(),t.j41(4,"span",71),t.EFF(5),t.k0s()(),t.j41(6,"span",72),t.EFF(7),t.k0s()()),2&o){const e=c.$implicit;t.R7$(3),t.JRh(e.productName),t.R7$(2),t.Lme("",e.quantity," \xd7 \u20b9",e.price,""),t.R7$(2),t.SpI("\u20b9",e.price*e.quantity,"")}}function te(o,c){1&o&&(t.j41(0,"span",73),t.EFF(1,"FREE"),t.k0s())}function ee(o,c){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2);t.R7$(1),t.SpI("\u20b9",e.cart.deliveryFee||50,"")}}function ne(o,c){if(1&o&&(t.j41(0,"div",74)(1,"span"),t.EFF(2,"Discount:"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(4),t.SpI("-\u20b9",e.cart.discount,"")}}function oe(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1," Please accept terms and conditions "),t.k0s())}function re(o,c){1&o&&(t.j41(0,"mat-icon"),t.EFF(1,"shopping_bag"),t.k0s())}function ie(o,c){1&o&&t.nrm(0,"mat-spinner",75)}function ae(o,c){1&o&&(t.j41(0,"div",52)(1,"mat-icon"),t.EFF(2,"schedule"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Estimated delivery in 30-45 minutes"),t.k0s()())}function ce(o,c){1&o&&(t.j41(0,"div",52)(1,"mat-icon"),t.EFF(2,"schedule"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Ready for pickup in 20-30 minutes"),t.k0s()())}function se(o,c){1&o&&(t.j41(0,"div",52)(1,"mat-icon"),t.EFF(2,"verified_user"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Safe & contactless delivery"),t.k0s()())}function de(o,c){1&o&&(t.j41(0,"div",52)(1,"mat-icon"),t.EFF(2,"verified_user"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Collect from store when ready"),t.k0s()())}const le=function(){return{standalone:!0}};function me(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",2)(1,"mat-card",3)(2,"div",4)(3,"button",5),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.goBackToCart())}),t.j41(4,"mat-icon"),t.EFF(5,"arrow_back"),t.k0s(),t.EFF(6," Back to Cart "),t.k0s(),t.j41(7,"div",6)(8,"mat-icon",7),t.EFF(9,"payment"),t.k0s(),t.j41(10,"h1"),t.EFF(11,"Checkout"),t.k0s()()()(),t.j41(12,"div",8)(13,"form",9),t.bIt("ngSubmit",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.placeOrder())}),t.j41(14,"div",10)(15,"div",11)(16,"mat-card",12)(17,"mat-card-header")(18,"mat-card-title")(19,"mat-icon"),t.EFF(20,"local_shipping"),t.k0s(),t.EFF(21," Delivery Method "),t.k0s()(),t.j41(22,"mat-card-content")(23,"mat-radio-group",13),t.bIt("ngModelChange",function(r){t.eBV(e);const i=t.XpG();return t.Njj(i.selectedDeliveryType=r)})("change",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.onDeliveryTypeChange(r.selectedDeliveryType))}),t.j41(24,"mat-radio-button",14)(25,"div",15)(26,"mat-icon"),t.EFF(27,"home"),t.k0s(),t.j41(28,"div",16)(29,"strong"),t.EFF(30,"Home Delivery"),t.k0s(),t.j41(31,"p"),t.EFF(32,"Get it delivered to your doorstep (\u20b950 delivery fee)"),t.k0s()()()(),t.j41(33,"mat-radio-button",17)(34,"div",15)(35,"mat-icon"),t.EFF(36,"store"),t.k0s(),t.j41(37,"div",16)(38,"strong"),t.EFF(39,"Self Pickup"),t.k0s(),t.j41(40,"p"),t.EFF(41,"Pick up from the store (No delivery fee)"),t.k0s()()()()()()(),t.j41(42,"mat-card",12)(43,"mat-card-header")(44,"mat-card-title")(45,"mat-icon"),t.EFF(46,"person"),t.k0s(),t.EFF(47," Customer Information "),t.k0s()(),t.j41(48,"mat-card-content")(49,"div",18)(50,"mat-form-field",19)(51,"mat-label"),t.EFF(52,"First Name"),t.k0s(),t.nrm(53,"input",20),t.DNE(54,Yt,2,0,"mat-error",21),t.k0s(),t.j41(55,"mat-form-field",19)(56,"mat-label"),t.EFF(57,"Last Name"),t.k0s(),t.nrm(58,"input",22),t.DNE(59,zt,2,0,"mat-error",21),t.k0s()(),t.j41(60,"div",18)(61,"mat-form-field",19)(62,"mat-label"),t.EFF(63,"Phone Number"),t.k0s(),t.j41(64,"mat-icon",23),t.EFF(65,"phone"),t.k0s(),t.nrm(66,"input",24),t.DNE(67,Lt,2,0,"mat-error",21),t.DNE(68,At,2,0,"mat-error",21),t.k0s(),t.j41(69,"mat-form-field",19)(70,"mat-label"),t.EFF(71,"Email"),t.k0s(),t.j41(72,"mat-icon",23),t.EFF(73,"email"),t.k0s(),t.nrm(74,"input",25),t.DNE(75,Bt,2,0,"mat-error",21),t.DNE(76,Vt,2,0,"mat-error",21),t.k0s()()()(),t.DNE(77,Kt,45,6,"mat-card",26),t.j41(78,"mat-card",12)(79,"mat-card-header")(80,"mat-card-title")(81,"mat-icon"),t.EFF(82,"notes"),t.k0s(),t.EFF(83," Special Instructions "),t.k0s()(),t.j41(84,"mat-card-content")(85,"mat-form-field",27)(86,"mat-label"),t.EFF(87,"Delivery Instructions (Optional)"),t.k0s(),t.j41(88,"mat-icon",23),t.EFF(89,"edit_note"),t.k0s(),t.nrm(90,"textarea",28),t.k0s()()()(),t.j41(91,"div",29)(92,"mat-card",30)(93,"mat-card-header")(94,"mat-card-title"),t.EFF(95,"Order Summary"),t.k0s()(),t.j41(96,"mat-card-content")(97,"div",31)(98,"mat-icon"),t.EFF(99,"storefront"),t.k0s(),t.j41(100,"div")(101,"span",32),t.EFF(102,"Ordering from"),t.k0s(),t.j41(103,"strong",33),t.EFF(104),t.k0s()()(),t.j41(105,"div",34),t.DNE(106,Zt,8,4,"div",35),t.k0s(),t.nrm(107,"mat-divider"),t.j41(108,"div",36)(109,"div",37)(110,"span"),t.EFF(111,"Items Subtotal:"),t.k0s(),t.j41(112,"span"),t.EFF(113),t.k0s()(),t.j41(114,"div",37)(115,"span"),t.EFF(116,"Delivery Fee:"),t.k0s(),t.DNE(117,te,2,0,"span",38),t.DNE(118,ee,2,1,"span",21),t.k0s(),t.DNE(119,ne,5,1,"div",39),t.k0s(),t.nrm(120,"mat-divider"),t.j41(121,"div",40)(122,"span",41),t.EFF(123,"Total Amount:"),t.k0s(),t.j41(124,"span",42),t.EFF(125),t.k0s()(),t.j41(126,"div",43)(127,"mat-icon"),t.EFF(128,"payments"),t.k0s(),t.j41(129,"div")(130,"strong"),t.EFF(131,"Payment Method"),t.k0s(),t.j41(132,"p"),t.EFF(133,"Cash on Delivery"),t.k0s(),t.j41(134,"small"),t.EFF(135),t.k0s()()(),t.j41(136,"div",44)(137,"mat-checkbox",45),t.EFF(138," I agree to the "),t.j41(139,"a",46),t.EFF(140,"terms and conditions"),t.k0s()(),t.DNE(141,oe,2,0,"mat-error",21),t.k0s(),t.j41(142,"button",47),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.placeOrder())}),t.DNE(143,re,2,0,"mat-icon",21),t.DNE(144,ie,1,0,"mat-spinner",48),t.EFF(145),t.k0s()()(),t.j41(146,"mat-card",49)(147,"mat-card-content")(148,"div",50)(149,"mat-icon"),t.EFF(150),t.k0s(),t.j41(151,"h4"),t.EFF(152),t.k0s()(),t.DNE(153,ae,5,0,"div",51),t.DNE(154,ce,5,0,"div",51),t.DNE(155,se,5,0,"div",51),t.DNE(156,de,5,0,"div",51),t.j41(157,"div",52)(158,"mat-icon"),t.EFF(159,"support_agent"),t.k0s(),t.j41(160,"span"),t.EFF(161,"24/7 customer support"),t.k0s()()()()()()()()()}if(2&o){const e=t.XpG();let n,r,i,a,d,m,u;t.R7$(13),t.Y8G("formGroup",e.checkoutForm),t.R7$(10),t.Y8G("ngModel",e.selectedDeliveryType)("ngModelOptions",t.lJ4(29,le)),t.R7$(31),t.Y8G("ngIf",null==(n=e.checkoutForm.get("firstName"))?null:n.hasError("required")),t.R7$(5),t.Y8G("ngIf",null==(r=e.checkoutForm.get("lastName"))?null:r.hasError("required")),t.R7$(8),t.Y8G("ngIf",null==(i=e.checkoutForm.get("phone"))?null:i.hasError("required")),t.R7$(1),t.Y8G("ngIf",null==(a=e.checkoutForm.get("phone"))?null:a.hasError("pattern")),t.R7$(7),t.Y8G("ngIf",null==(d=e.checkoutForm.get("email"))?null:d.hasError("required")),t.R7$(1),t.Y8G("ngIf",null==(m=e.checkoutForm.get("email"))?null:m.hasError("email")),t.R7$(1),t.Y8G("ngIf","HOME_DELIVERY"===e.selectedDeliveryType),t.R7$(27),t.JRh(e.cart.shopName||"Test Grocery Store"),t.R7$(2),t.Y8G("ngForOf",e.cart.items),t.R7$(7),t.SpI("\u20b9",e.cart.subtotal,""),t.R7$(4),t.Y8G("ngIf","SELF_PICKUP"===e.selectedDeliveryType),t.R7$(1),t.Y8G("ngIf","HOME_DELIVERY"===e.selectedDeliveryType),t.R7$(1),t.Y8G("ngIf",e.cart.discount>0),t.R7$(6),t.SpI("\u20b9",e.cart.total||e.cart.subtotal+(e.cart.deliveryFee||40),""),t.R7$(10),t.SpI("Pay \u20b9",e.cart.total||e.cart.subtotal+(e.cart.deliveryFee||40)," when your order is delivered"),t.R7$(6),t.Y8G("ngIf",(null==(u=e.checkoutForm.get("agreeToTerms"))?null:u.hasError("required"))&&(null==(u=e.checkoutForm.get("agreeToTerms"))?null:u.touched)),t.R7$(1),t.Y8G("disabled",e.checkoutForm.invalid||e.placingOrder),t.R7$(1),t.Y8G("ngIf",!e.placingOrder),t.R7$(1),t.Y8G("ngIf",e.placingOrder),t.R7$(1),t.SpI(" ",e.placingOrder?"Placing Order...":"Place Order"," "),t.R7$(5),t.JRh("SELF_PICKUP"===e.selectedDeliveryType?"store":"local_shipping"),t.R7$(2),t.JRh("SELF_PICKUP"===e.selectedDeliveryType?"Pickup Information":"Delivery Information"),t.R7$(1),t.Y8G("ngIf","HOME_DELIVERY"===e.selectedDeliveryType),t.R7$(1),t.Y8G("ngIf","SELF_PICKUP"===e.selectedDeliveryType),t.R7$(1),t.Y8G("ngIf","HOME_DELIVERY"===e.selectedDeliveryType),t.R7$(1),t.Y8G("ngIf","SELF_PICKUP"===e.selectedDeliveryType)}}function ge(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",76)(1,"mat-card",77)(2,"mat-card-content")(3,"div",78)(4,"mat-icon"),t.EFF(5,"check_circle"),t.k0s()(),t.j41(6,"h2"),t.EFF(7,"Order Placed Successfully!"),t.k0s(),t.j41(8,"p"),t.EFF(9,"Your order has been placed and will be delivered soon."),t.k0s(),t.j41(10,"div",79)(11,"div",80)(12,"span",32),t.EFF(13,"Order Number"),t.k0s(),t.j41(14,"span",81),t.EFF(15),t.k0s()(),t.j41(16,"div",80)(17,"span",32),t.EFF(18,"Total Amount"),t.k0s(),t.j41(19,"span",81),t.EFF(20),t.k0s()(),t.j41(21,"div",80)(22,"span",32),t.EFF(23,"Estimated Delivery"),t.k0s(),t.j41(24,"span",81),t.EFF(25,"30-45 minutes"),t.k0s()()(),t.j41(26,"div",82)(27,"button",83),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.trackOrder())}),t.j41(28,"mat-icon"),t.EFF(29,"local_shipping"),t.k0s(),t.EFF(30," Track Order "),t.k0s(),t.j41(31,"button",84),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.continueShopping())}),t.j41(32,"mat-icon"),t.EFF(33,"store"),t.k0s(),t.EFF(34," Continue Shopping "),t.k0s()()()()()}if(2&o){const e=t.XpG();t.R7$(15),t.JRh((null==e.orderResponse?null:e.orderResponse.orderNumber)||"ORD-2024-0001"),t.R7$(5),t.SpI("\u20b9",e.cart.total,"")}}let pe=(()=>{class o{constructor(e,n,r,i,a,d){this.fb=e,this.router=n,this.cartService=r,this.checkoutService=i,this.firebaseService=a,this.snackBar=d,this.destroy$=new A.B,this.cart={items:[],shopId:null,shopName:null,subtotal:0,discount:0,deliveryFee:0,total:0},this.placingOrder=!1,this.orderPlaced=!1,this.orderResponse=null,this.savedAddresses=[],this.selectedPaymentMethod="CASH_ON_DELIVERY",this.selectedDeliveryType="HOME_DELIVERY",this.estimatedDeliveryTime="30-45 minutes",this.promoCode="",this.promoDiscount=0,this.paymentMethods=[{value:"CASH_ON_DELIVERY",label:"Cash on Delivery",icon:"money"},{value:"ONLINE_PAYMENT",label:"Online Payment",icon:"credit_card"},{value:"UPI",label:"UPI Payment",icon:"account_balance"}],this.checkoutForm=this.createForm()}ngOnInit(){this.cartService.cart$.pipe((0,v.Q)(this.destroy$)).subscribe(e=>{this.cart=e,0===e.items.length&&this.router.navigate(["/customer/shops"]),this.updateDeliveryFee()}),this.loadSavedAddresses(),this.estimatedDeliveryTime="30-45 minutes"}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}createForm(){return this.fb.group({firstName:["",[s.k0.required,s.k0.minLength(2)]],lastName:["",[s.k0.required,s.k0.minLength(2)]],phone:["",[s.k0.required,s.k0.pattern(/^[6-9]\d{9}$/)]],email:["",[s.k0.required,s.k0.email]],streetAddress:["",[s.k0.required,s.k0.minLength(10)]],landmark:[""],pincode:["",[s.k0.required,s.k0.pattern(/^\d{6}$/)]],city:["",[s.k0.required]],state:["",[s.k0.required]],notes:[""],agreeToTerms:[!1,[s.k0.requiredTrue]]})}loadSavedAddresses(){this.checkoutService.getSavedAddresses().subscribe(e=>{if(this.savedAddresses=e,e.length>0){const n=e.find(r=>r.isDefault)||e[0];this.selectAddress(n)}})}selectAddress(e){const n=(e.contactName||"").split(" ");this.checkoutForm.patchValue({firstName:n[0]||"",lastName:n.slice(1).join(" ")||"",phone:e.phone,streetAddress:e.address,landmark:e.landmark||"",city:e.city,state:e.state,pincode:e.postalCode})}onDeliveryTypeChange(e){this.selectedDeliveryType=e;const n=["streetAddress","city","state","pincode"];"SELF_PICKUP"===e?n.forEach(r=>{this.checkoutForm.get(r)?.clearValidators(),this.checkoutForm.get(r)?.updateValueAndValidity()}):(this.checkoutForm.get("streetAddress")?.setValidators([s.k0.required,s.k0.minLength(10)]),this.checkoutForm.get("city")?.setValidators([s.k0.required]),this.checkoutForm.get("state")?.setValidators([s.k0.required]),this.checkoutForm.get("pincode")?.setValidators([s.k0.required,s.k0.pattern(/^\d{6}$/)]),n.forEach(r=>{this.checkoutForm.get(r)?.updateValueAndValidity()})),this.updateDeliveryFee()}updateDeliveryFee(){this.cartService.updateDeliveryFee("SELF_PICKUP"===this.selectedDeliveryType?0:50)}calculateDeliveryTime(){this.estimatedDeliveryTime="30-45 minutes"}applyPromoCode(){this.promoCode?this.checkoutService.applyPromoCode(this.promoCode).subscribe(e=>{e>0&&(this.promoDiscount=e,this.cartService.applyDiscount(e),x().fire("Success",`Promo code applied! You saved \u20b9${e}`,"success"))}):x().fire("Error","Please enter a promo code","error")}placeOrder(){var e=this;return(0,W.A)(function*(){if(e.checkoutForm.invalid||0===e.cart.items.length)return void x().fire("Error","Please fill all required fields","error");e.placingOrder=!0;const n=e.checkoutForm.value;let r=null;var i;"HOME_DELIVERY"===e.selectedDeliveryType&&(r={contactName:`${n.firstName} ${n.lastName}`.trim(),phone:n.phone,address:n.streetAddress,city:n.city,state:n.state,postalCode:n.pincode,landmark:n.landmark||""}),console.log("Checkout form values:",n),console.log("Delivery type:",e.selectedDeliveryType),console.log("Delivery address:",r),e.checkoutService.placeOrderWithDeliveryType(e.selectedDeliveryType,r,e.selectedPaymentMethod,n.notes).pipe((0,v.Q)(e.destroy$)).subscribe({next:(i=(0,W.A)(function*(a){if(a&&a.id){e.orderResponse=a,e.placingOrder=!1;const d="SELF_PICKUP"===e.selectedDeliveryType?"You can collect your order from the store once it's ready.":`Your order #${a.orderNumber} will be delivered soon.`;x().fire({title:"Order Placed Successfully!",text:d,icon:"success",confirmButtonText:"View Orders",showCancelButton:!0,cancelButtonText:"Continue Shopping"}).then(m=>{e.router.navigate(m.isConfirmed?["/customer/orders"]:["/customer/shops"])}),yield e.sendOrderNotification(a),"CASH_ON_DELIVERY"!==e.selectedPaymentMethod&&e.processPayment(a.id)}else e.placingOrder=!1}),function(d){return i.apply(this,arguments)}),error:i=>{console.error("Error placing order:",i),e.placingOrder=!1,x().fire("Error","Failed to place order. Please try again.","error")}})})()}processPayment(e){this.checkoutService.processPayment(e,this.selectedPaymentMethod).subscribe({next:n=>{n.success?x().fire("Payment Successful","Your payment has been processed","success"):x().fire("Payment Failed","Your order is placed but payment failed. Please pay on delivery.","warning")},error:()=>{x().fire("Payment Error","Payment processing failed. Order placed with COD.","warning")}})}sendOrderNotification(e){var n=this;return(0,W.A)(function*(){try{n.firebaseService.sendOrderNotification(e.orderNumber,"CONFIRMED",`Estimated delivery: ${e.estimatedDeliveryTime||"30-45 minutes"}`),n.firebaseService.requestPermission().subscribe(r=>{r&&console.log("Notification permission granted")},r=>{console.error("Error requesting notification permission:",r)}),console.log("Order notification sent:",e.orderNumber)}catch(r){console.error("Error sending notification:",r)}})()}trackOrder(){this.orderResponse&&this.router.navigate(["/customer/orders"])}continueShopping(){this.router.navigate(["/customer/shops"])}goBackToCart(){this.router.navigate(["/customer/cart"])}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(s.ok),t.rXU($.Ix),t.rXU(q),t.rXU(Gt),t.rXU(X.f),t.rXU(R.UG))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-checkout"]],decls:2,vars:2,consts:[["class","checkout-page",4,"ngIf"],["class","order-success-page",4,"ngIf"],[1,"checkout-page"],[1,"page-header"],[1,"header-container"],["mat-stroked-button","","color","primary",1,"back-button",3,"click"],[1,"header-title"],[1,"checkout-icon"],[1,"checkout-content"],[3,"formGroup","ngSubmit"],[1,"checkout-grid"],[1,"form-column"],[1,"form-section"],[1,"delivery-type-group",3,"ngModel","ngModelOptions","ngModelChange","change"],["value","HOME_DELIVERY",1,"delivery-option"],[1,"delivery-option-content"],[1,"delivery-option-text"],["value","SELF_PICKUP",1,"delivery-option"],[1,"form-row"],["appearance","outline",1,"form-field"],["matInput","","formControlName","firstName","placeholder","Enter first name"],[4,"ngIf"],["matInput","","formControlName","lastName","placeholder","Enter last name"],["matPrefix",""],["matInput","","formControlName","phone","placeholder","10-digit mobile number"],["matInput","","formControlName","email","placeholder","your@email.com"],["class","form-section",4,"ngIf"],["appearance","outline",1,"form-field","full-width"],["matInput","","formControlName","notes","placeholder","Any special delivery instructions, gate code, etc.","rows","3"],[1,"summary-column"],[1,"order-summary-card"],[1,"shop-info"],[1,"label"],[1,"shop-name"],[1,"order-items"],["class","item",4,"ngFor","ngForOf"],[1,"price-breakdown"],[1,"price-row"],["style","color: #4caf50; font-weight: 600;",4,"ngIf"],["class","price-row discount",4,"ngIf"],[1,"total-section"],[1,"total-label"],[1,"total-value"],[1,"payment-method"],[1,"terms-section"],["formControlName","agreeToTerms","color","primary"],["href","/terms","target","_blank"],["mat-raised-button","","color","accent","type","button",1,"place-order-btn",3,"disabled","click"],["diameter","20",4,"ngIf"],[1,"delivery-info-card"],[1,"delivery-header"],["class","info-item",4,"ngIf"],[1,"info-item"],["class","saved-addresses-section",4,"ngIf"],["matInput","","formControlName","streetAddress","placeholder","House no., Building, Street, Area","rows","2"],["matInput","","formControlName","landmark","placeholder","Near landmark"],["matInput","","formControlName","pincode","placeholder","6-digit pincode"],["matInput","","formControlName","city","placeholder","City name"],["matInput","","formControlName","state","placeholder","State name"],[1,"saved-addresses-section"],[1,"saved-addresses-list"],["class","saved-address-card",3,"click",4,"ngFor","ngForOf"],[1,"or-text"],[1,"saved-address-card",3,"click"],[1,"address-type"],[1,"address-text"],[1,"address-details"],[1,"phone-number"],[1,"item"],[1,"item-info"],[1,"item-name"],[1,"item-quantity"],[1,"item-total"],[2,"color","#4caf50","font-weight","600"],[1,"price-row","discount"],["diameter","20"],[1,"order-success-page"],[1,"success-card"],[1,"success-icon"],[1,"order-details"],[1,"detail-item"],[1,"value"],[1,"success-actions"],["mat-raised-button","","color","primary",3,"click"],["mat-stroked-button","","color","primary",3,"click"]],template:function(n,r){1&n&&(t.DNE(0,me,162,30,"div",0),t.DNE(1,ge,35,2,"div",1)),2&n&&(t.Y8G("ngIf",!r.orderPlaced),t.R7$(1),t.Y8G("ngIf",r.orderPlaced))},dependencies:[O.Sq,O.bT,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,s.vS,h.RN,h.m2,h.MM,h.dh,k.$z,w.An,M.rl,M.nJ,M.TL,M.JW,G.fg,L.VT,L._g,V.So,y.LG,b.q],styles:[".checkout-page[_ngcontent-%COMP%]{min-height:100vh;background:#f5f5f5;padding-bottom:40px;overflow-y:auto}.page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;margin-bottom:24px;border-radius:0}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:24px;display:flex;align-items:center;gap:16px}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{background:white;flex-shrink:0}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1;justify-content:center}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .checkout-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:500}.checkout-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 24px}.checkout-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 400px;gap:24px}@media (max-width: 960px){.checkout-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:20px}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;padding-bottom:16px;margin-bottom:20px}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:18px;font-weight:500;margin:0}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px;color:#667eea}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}@media (max-width: 600px){.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-field.full-width[_ngcontent-%COMP%]{grid-column:span 2}@media (max-width: 600px){.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-field.full-width[_ngcontent-%COMP%]{grid-column:span 1}}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]     .mat-form-field-prefix{margin-right:8px}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]     .mat-form-field-prefix mat-icon{font-size:20px;width:20px;height:20px;color:#999}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .saved-addresses-section[_ngcontent-%COMP%]{margin-bottom:24px}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .saved-addresses-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#333;margin:0 0 16px}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .saved-addresses-section[_ngcontent-%COMP%]   .saved-addresses-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px;margin-bottom:16px}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .saved-addresses-section[_ngcontent-%COMP%]   .saved-addresses-list[_ngcontent-%COMP%]   .saved-address-card[_ngcontent-%COMP%]{cursor:pointer;border:2px solid #e0e0e0;transition:all .3s ease}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .saved-addresses-section[_ngcontent-%COMP%]   .saved-addresses-list[_ngcontent-%COMP%]   .saved-address-card[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 4px 12px #667eea33;transform:translateY(-2px)}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .saved-addresses-section[_ngcontent-%COMP%]   .saved-addresses-list[_ngcontent-%COMP%]   .saved-address-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:12px}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .saved-addresses-section[_ngcontent-%COMP%]   .saved-addresses-list[_ngcontent-%COMP%]   .saved-address-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .address-type[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .saved-addresses-section[_ngcontent-%COMP%]   .saved-addresses-list[_ngcontent-%COMP%]   .saved-address-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .address-type[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#667eea;font-size:18px;width:18px;height:18px}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .saved-addresses-section[_ngcontent-%COMP%]   .saved-addresses-list[_ngcontent-%COMP%]   .saved-address-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .address-type[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:14px;color:#333}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .saved-addresses-section[_ngcontent-%COMP%]   .saved-addresses-list[_ngcontent-%COMP%]   .saved-address-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .address-text[_ngcontent-%COMP%]{font-size:13px;color:#666;margin:4px 0;line-height:1.4}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .saved-addresses-section[_ngcontent-%COMP%]   .saved-addresses-list[_ngcontent-%COMP%]   .saved-address-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .address-details[_ngcontent-%COMP%]{font-size:12px;color:#999;margin:4px 0}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .saved-addresses-section[_ngcontent-%COMP%]   .saved-addresses-list[_ngcontent-%COMP%]   .saved-address-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .phone-number[_ngcontent-%COMP%]{font-size:13px;color:#48bb78;font-weight:500;margin:4px 0}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .saved-addresses-section[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin:16px 0}.form-column[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .saved-addresses-section[_ngcontent-%COMP%]   .or-text[_ngcontent-%COMP%]{text-align:center;color:#999;font-size:14px;margin:16px 0;font-style:italic}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]{margin-bottom:16px}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0;padding-bottom:16px;margin-bottom:20px}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;margin:0}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .shop-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;background:#f8f9fa;border-radius:8px;margin-bottom:20px}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .shop-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#667eea}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .shop-info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#666;margin-bottom:2px}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .shop-info[_ngcontent-%COMP%]   .shop-name[_ngcontent-%COMP%]{font-size:16px;color:#333}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]{margin-bottom:16px;max-height:200px;overflow-y:auto}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:8px 0;border-bottom:1px solid #f0f0f0}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:last-child{border-bottom:none}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{flex:1}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#333;margin-bottom:2px}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]{font-size:12px;color:#666}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .order-items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .item-total[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .price-breakdown[_ngcontent-%COMP%]{margin:16px 0}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .price-breakdown[_ngcontent-%COMP%]   .price-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;font-size:14px}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .price-breakdown[_ngcontent-%COMP%]   .price-row.discount[_ngcontent-%COMP%]{color:#48bb78}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:20px 0;padding:16px;background:#f8f9fa;border-radius:8px}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-label[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#333}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .total-section[_ngcontent-%COMP%]   .total-value[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#48bb78}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .payment-method[_ngcontent-%COMP%]{display:flex;gap:12px;padding:12px;background:#fff3cd;border:1px solid #ffeeba;border-radius:8px;margin-bottom:20px}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .payment-method[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#856404}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .payment-method[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .payment-method[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:14px;color:#856404;margin-bottom:4px}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .payment-method[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-size:13px;color:#856404}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .payment-method[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:11px;color:#856404;opacity:.8}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .terms-section[_ngcontent-%COMP%]{margin:20px 0}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .terms-section[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-label{font-size:13px;line-height:1.4}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .terms-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .terms-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .terms-section[_ngcontent-%COMP%]   mat-error[_ngcontent-%COMP%]{display:block;margin-top:4px;font-size:12px}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .place-order-btn[_ngcontent-%COMP%]{width:100%;height:56px;font-size:18px;font-weight:600;margin-top:24px;background:linear-gradient(135deg,#48bb78 0%,#38a169 100%);color:#fff;box-shadow:0 4px 12px #48bb784d;transition:all .3s ease}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .place-order-btn[_ngcontent-%COMP%]:hover:not([disabled]){transform:translateY(-2px);box-shadow:0 6px 20px #48bb7866}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .place-order-btn[disabled][_ngcontent-%COMP%]{background:#e0e0e0;color:#999}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .place-order-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.summary-column[_ngcontent-%COMP%]   .order-summary-card[_ngcontent-%COMP%]   .place-order-btn[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}.summary-column[_ngcontent-%COMP%]   .delivery-info-card[_ngcontent-%COMP%]   .delivery-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:16px}.summary-column[_ngcontent-%COMP%]   .delivery-info-card[_ngcontent-%COMP%]   .delivery-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px;color:#667eea}.summary-column[_ngcontent-%COMP%]   .delivery-info-card[_ngcontent-%COMP%]   .delivery-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500;color:#333}.summary-column[_ngcontent-%COMP%]   .delivery-info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:12px}.summary-column[_ngcontent-%COMP%]   .delivery-info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.summary-column[_ngcontent-%COMP%]   .delivery-info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#999}.summary-column[_ngcontent-%COMP%]   .delivery-info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:#666}.order-success-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:#f5f5f5;padding:24px}.order-success-page[_ngcontent-%COMP%]   .success-card[_ngcontent-%COMP%]{max-width:600px;text-align:center;padding:40px}.order-success-page[_ngcontent-%COMP%]   .success-card[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{margin-bottom:24px}.order-success-page[_ngcontent-%COMP%]   .success-card[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:80px;width:80px;height:80px;color:#48bb78}.order-success-page[_ngcontent-%COMP%]   .success-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:28px;font-weight:500;color:#333}.order-success-page[_ngcontent-%COMP%]   .success-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 32px;font-size:16px;color:#666}.order-success-page[_ngcontent-%COMP%]   .success-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;padding:24px;background:#f8f9fa;border-radius:8px;margin-bottom:32px}@media (max-width: 600px){.order-success-page[_ngcontent-%COMP%]   .success-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]{grid-template-columns:1fr}}.order-success-page[_ngcontent-%COMP%]   .success-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#666;margin-bottom:4px;text-transform:uppercase}.order-success-page[_ngcontent-%COMP%]   .success-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333}.order-success-page[_ngcontent-%COMP%]   .success-card[_ngcontent-%COMP%]   .success-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;flex-wrap:wrap}.order-success-page[_ngcontent-%COMP%]   .success-card[_ngcontent-%COMP%]   .success-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:160px}.order-success-page[_ngcontent-%COMP%]   .success-card[_ngcontent-%COMP%]   .success-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}  .mat-form-field-appearance-outline .mat-form-field-outline{color:#0000001f}  .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline{color:#667eea}  .mat-card{border-radius:8px;box-shadow:0 2px 8px #00000014}  .mat-button,   .mat-raised-button,   .mat-stroked-button{border-radius:6px;text-transform:none;font-weight:500}  mat-divider{margin:16px 0}.delivery-type-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;width:100%}.delivery-type-group[_ngcontent-%COMP%]   .delivery-option[_ngcontent-%COMP%]{width:100%;padding:16px;border:2px solid #e0e0e0;border-radius:8px;transition:all .3s ease;background:white}.delivery-type-group[_ngcontent-%COMP%]   .delivery-option[_ngcontent-%COMP%]:hover{border-color:#667eea;background:#f8f9ff}.delivery-type-group[_ngcontent-%COMP%]   .delivery-option.mat-radio-checked[_ngcontent-%COMP%]{border-color:#667eea;background:#f0f2ff;box-shadow:0 2px 8px #667eea33}.delivery-type-group[_ngcontent-%COMP%]   .delivery-option[_ngcontent-%COMP%]     .mat-radio-container{margin-right:16px}.delivery-type-group[_ngcontent-%COMP%]   .delivery-option[_ngcontent-%COMP%]   .delivery-option-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;width:100%}.delivery-type-group[_ngcontent-%COMP%]   .delivery-option[_ngcontent-%COMP%]   .delivery-option-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#667eea;font-size:32px;width:32px;height:32px}.delivery-type-group[_ngcontent-%COMP%]   .delivery-option[_ngcontent-%COMP%]   .delivery-option-content[_ngcontent-%COMP%]   .delivery-option-text[_ngcontent-%COMP%]{flex:1}.delivery-type-group[_ngcontent-%COMP%]   .delivery-option[_ngcontent-%COMP%]   .delivery-option-content[_ngcontent-%COMP%]   .delivery-option-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:16px;color:#333;margin-bottom:4px}.delivery-type-group[_ngcontent-%COMP%]   .delivery-option[_ngcontent-%COMP%]   .delivery-option-content[_ngcontent-%COMP%]   .delivery-option-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#666}"]})}}return o})();var ue=l(605);let _e=(()=>{class o{constructor(e,n){this.http=e,this.firebaseService=n,this.apiUrl=`${F.c.apiUrl}`}createOrder(e){return this.firebaseService.getToken().pipe((0,Y.n)(n=>{const r={...e,customerToken:n};return this.http.post(`${this.apiUrl}/customer/orders`,r).pipe((0,I.T)(i=>{if(C.c.isError(i)){const a=C.c.getErrorMessage(i);throw new Error(a)}return i.data}),(0,P.W)(i=>{console.error("Order creation error:",i);const a={id:Math.floor(1e4*Math.random())+1e3,orderNumber:"ORD"+Date.now().toString().slice(-8),status:"PLACED",total:e.total,estimatedDeliveryTime:"30-45 minutes",createdAt:(new Date).toISOString()};return this.firebaseService.sendOrderNotification(a.orderNumber,"PLACED","Your order has been placed successfully!"),(0,f.of)(a)}))}),(0,P.W)(()=>this.http.post(`${this.apiUrl}/customer/orders`,e).pipe((0,I.T)(n=>{if(C.c.isError(n)){const r=C.c.getErrorMessage(n);throw new Error(r)}return n.data}),(0,P.W)(()=>{const n={id:Math.floor(1e4*Math.random())+1e3,orderNumber:"ORD"+Date.now().toString().slice(-8),status:"PLACED",total:e.total,estimatedDeliveryTime:"30-45 minutes",createdAt:(new Date).toISOString()};return(0,f.of)(n)}))))}getOrderTracking(e){return this.http.get(`${this.apiUrl}/customer/orders/${e}/tracking`).pipe((0,I.T)(n=>{if(C.c.isError(n)){const r=C.c.getErrorMessage(n);throw new Error(r)}return n.data}),(0,P.W)(n=>{console.error("Order tracking error:",n);const r={orderId:1234,orderNumber:e,status:"CONFIRMED",total:450,statusHistory:[{status:"PLACED",timestamp:new Date(Date.now()-6e5).toISOString(),message:"Order placed successfully"},{status:"CONFIRMED",timestamp:new Date(Date.now()-48e4).toISOString(),message:"Order confirmed by restaurant"},{status:"PREPARING",timestamp:new Date(Date.now()-3e5).toISOString(),message:"Order is being prepared"}],deliveryPartner:{id:1,name:"Ravi Kumar",phone:"+91 98765 43210",vehicleType:"Bike",vehicleNumber:"TN01AB1234",rating:4.8},estimatedDeliveryTime:"20 minutes",currentLocation:{lat:12.9716,lng:77.5946}};return(0,f.of)(r)}))}getMyOrders(e){return this.http.get(`${this.apiUrl}/customer/orders`,{params:e?{customerId:e.toString()}:{}}).pipe((0,I.T)(n=>{if(C.c.isError(n)){const r=C.c.getErrorMessage(n);throw new Error(r)}return n.data}),(0,P.W)(n=>{console.error("Get orders error:",n);const r=[{id:1234,orderNumber:"ORD12345678",status:"DELIVERED",total:450,createdAt:new Date(Date.now()-864e5).toISOString()},{id:1235,orderNumber:"ORD12345679",status:"OUT_FOR_DELIVERY",total:280,createdAt:new Date(Date.now()-72e5).toISOString()}];return(0,f.of)(r)}))}cancelOrder(e,n){return this.firebaseService.getToken().pipe((0,Y.n)(r=>this.http.put(`${this.apiUrl}/customer/orders/${e}/cancel`,null,{params:{reason:n,customerToken:r||""}}).pipe((0,I.T)(i=>{if(C.c.isError(i)){const a=C.c.getErrorMessage(i);throw new Error(a)}return i.data}),(0,P.W)(i=>{console.error("Cancel order error:",i);const a={id:e,orderNumber:"ORD"+e,status:"CANCELLED",total:0,createdAt:(new Date).toISOString()};return this.firebaseService.sendOrderNotification(a.orderNumber,"CANCELLED","Your order has been cancelled."),(0,f.of)(a)}))),(0,P.W)(()=>this.http.put(`${this.apiUrl}/customer/orders/${e}/cancel`,null,{params:{reason:n}}).pipe((0,I.T)(r=>{if(C.c.isError(r)){const i=C.c.getErrorMessage(r);throw new Error(i)}return r.data}),(0,P.W)(()=>{const r={id:e,orderNumber:"ORD"+e,status:"CANCELLED",total:0,createdAt:(new Date).toISOString()};return(0,f.of)(r)}))))}static{this.\u0275fac=function(n){return new(n||o)(t.KVO(D.Qq),t.KVO(X.f))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function fe(o,c){1&o&&(t.j41(0,"div",5)(1,"div",6),t.nrm(2,"mat-spinner",7),t.j41(3,"p",8),t.EFF(4,"Loading order details..."),t.k0s()()())}function he(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",5)(1,"div",6)(2,"mat-icon",9),t.EFF(3,"search_off"),t.k0s(),t.j41(4,"h5",10),t.EFF(5,"Order not found"),t.k0s(),t.j41(6,"p",11),t.EFF(7,"Please check your order number and try again"),t.k0s(),t.j41(8,"button",12),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.goToShops())}),t.j41(9,"mat-icon"),t.EFF(10,"store"),t.k0s(),t.EFF(11," Browse Shops "),t.k0s()()()}}function Ce(o,c){if(1&o&&(t.j41(0,"div",34)(1,"mat-icon",22),t.EFF(2,"person"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Delivery partner: "),t.j41(5,"strong"),t.EFF(6),t.k0s()(),t.j41(7,"a",35)(8,"mat-icon"),t.EFF(9,"phone"),t.k0s(),t.EFF(10," Call "),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(6),t.JRh(e.orderTracking.deliveryPartner.name),t.R7$(1),t.Mz_("href","tel:",e.orderTracking.deliveryPartner.phone,"",t.B4B)}}function Oe(o,c){if(1&o&&(t.j41(0,"div",36)(1,"div",37),t.nrm(2,"div",38),t.k0s(),t.j41(3,"div",39)(4,"div",40)(5,"div")(6,"h6",41),t.EFF(7),t.k0s(),t.j41(8,"p",42),t.EFF(9),t.k0s()(),t.j41(10,"small",11),t.EFF(11),t.k0s()()()()),2&o){const e=c.$implicit,n=c.index,r=t.XpG(2);t.AVh("timeline-item-active",0===n),t.R7$(2),t.AVh("bg-success",0===n)("bg-primary",0!==n),t.R7$(5),t.JRh(r.getStatusDisplayText(e.status)),t.R7$(2),t.JRh(e.message),t.R7$(2),t.JRh(r.formatTime(e.timestamp))}}function Pe(o,c){1&o&&(t.j41(0,"div",43),t.nrm(1,"mat-spinner",44),t.j41(2,"p",45),t.EFF(3,"Loading map..."),t.k0s()())}function Me(o,c){if(1&o&&(t.j41(0,"div",8)(1,"div",46)(2,"div",34)(3,"mat-icon",47),t.EFF(4,"two_wheeler"),t.k0s(),t.j41(5,"div")(6,"small",48),t.EFF(7),t.k0s(),t.j41(8,"small",49),t.EFF(9),t.k0s()()(),t.j41(10,"div",50)(11,"div",34)(12,"mat-icon",51),t.EFF(13,"star"),t.k0s(),t.j41(14,"small"),t.EFF(15),t.k0s()()()()()),2&o){const e=t.XpG(2);t.R7$(7),t.JRh(e.orderTracking.deliveryPartner.name),t.R7$(2),t.Lme("",e.orderTracking.deliveryPartner.vehicleType," - ",e.orderTracking.deliveryPartner.vehicleNumber,""),t.R7$(6),t.JRh(e.orderTracking.deliveryPartner.rating)}}function xe(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",52)(1,"div",14)(2,"h6",16),t.EFF(3,"Order Actions"),t.k0s()(),t.j41(4,"div",19)(5,"div",53)(6,"button",54),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.cancelOrder())}),t.j41(7,"mat-icon"),t.EFF(8,"cancel"),t.k0s(),t.EFF(9," Cancel Order "),t.k0s(),t.j41(10,"button",25),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.contactSupport())}),t.j41(11,"mat-icon"),t.EFF(12,"support_agent"),t.k0s(),t.EFF(13," Contact Support "),t.k0s()()()()}}function be(o,c){if(1&o&&(t.j41(0,"div",52)(1,"div",55)(2,"h6",16)(3,"mat-icon",17),t.EFF(4,"local_shipping"),t.k0s(),t.EFF(5," Your order is on the way! "),t.k0s()(),t.j41(6,"div",19)(7,"p",56),t.EFF(8,"Your delivery partner is on the way with your order. Please:"),t.k0s(),t.j41(9,"ul",16)(10,"li"),t.EFF(11,"Keep your phone nearby for delivery updates"),t.k0s(),t.j41(12,"li"),t.EFF(13),t.k0s(),t.j41(14,"li"),t.EFF(15,"Be available at the delivery address"),t.k0s()()()()),2&o){const e=t.XpG(2);t.R7$(13),t.SpI("Have the exact cash amount ready (\u20b9",e.orderTracking.total||0,")")}}function ke(o,c){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",13)(2,"div",14)(3,"div",15)(4,"h5",16)(5,"mat-icon",17),t.EFF(6,"receipt_long"),t.k0s(),t.EFF(7),t.k0s(),t.j41(8,"span",18),t.EFF(9),t.k0s()()(),t.j41(10,"div",19)(11,"div",1)(12,"div",20)(13,"div",21)(14,"mat-icon",22),t.EFF(15,"access_time"),t.k0s(),t.j41(16,"span"),t.EFF(17,"Estimated delivery: "),t.j41(18,"strong"),t.EFF(19),t.k0s()()(),t.DNE(20,Ce,11,2,"div",23),t.k0s(),t.j41(21,"div",24)(22,"button",25),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.refreshTracking())}),t.j41(23,"mat-icon"),t.EFF(24,"refresh"),t.k0s(),t.EFF(25," Refresh "),t.k0s()()()()(),t.j41(26,"div",1)(27,"div",26)(28,"div",5)(29,"div",14)(30,"h6",16)(31,"mat-icon",17),t.EFF(32,"timeline"),t.k0s(),t.EFF(33," Order Status "),t.k0s()(),t.j41(34,"div",19)(35,"div",27),t.DNE(36,Oe,12,9,"div",28),t.k0s()()()(),t.j41(37,"div",26)(38,"div",5)(39,"div",14)(40,"h6",16)(41,"mat-icon",17),t.EFF(42,"map"),t.k0s(),t.EFF(43," Live Tracking "),t.k0s()(),t.j41(44,"div",19)(45,"div",29)(46,"div",30),t.DNE(47,Pe,4,0,"div",31),t.k0s()(),t.DNE(48,Me,16,4,"div",32),t.k0s()()()(),t.DNE(49,xe,14,0,"div",33),t.DNE(50,be,16,1,"div",33),t.k0s()}if(2&o){const e=t.XpG();t.R7$(7),t.SpI(" Order #",e.orderTracking.orderNumber," "),t.R7$(1),t.Y8G("ngClass",e.getStatusBadgeClass(e.orderTracking.status)),t.R7$(1),t.SpI(" ",e.getStatusDisplayText(e.orderTracking.status)," "),t.R7$(10),t.JRh(e.orderTracking.estimatedDeliveryTime||"30-45 minutes"),t.R7$(1),t.Y8G("ngIf",e.orderTracking.deliveryPartner),t.R7$(16),t.Y8G("ngForOf",e.orderTracking.statusHistory),t.R7$(11),t.Y8G("ngIf",!e.mapLoaded),t.R7$(1),t.Y8G("ngIf",e.orderTracking.deliveryPartner),t.R7$(1),t.Y8G("ngIf",e.canCancelOrder()),t.R7$(1),t.Y8G("ngIf","OUT_FOR_DELIVERY"===e.orderTracking.status)}}let ye=(()=>{class o{constructor(e,n,r,i,a){this.route=e,this.router=n,this.orderService=r,this.firebaseService=i,this.snackBar=a,this.destroy$=new A.B,this.orderTracking=null,this.loading=!1,this.mapLoaded=!1,this.orderNumber=""}ngOnInit(){this.route.params.pipe((0,v.Q)(this.destroy$)).subscribe(e=>{this.orderNumber=e.orderNumber,this.loadOrderTracking()}),(0,ue.Y)(3e4).pipe((0,v.Q)(this.destroy$)).subscribe(()=>{this.orderTracking&&this.canAutoRefresh()&&this.refreshTracking()}),this.firebaseService.receiveMessage().pipe((0,v.Q)(this.destroy$)).subscribe(e=>{e&&e.data?.orderNumber===this.orderNumber&&this.refreshTracking()})}ngAfterViewInit(){this.loadGoogleMaps()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadOrderTracking(){this.loading=!0,this.orderService.getOrderTracking(this.orderNumber).pipe((0,v.Q)(this.destroy$)).subscribe({next:e=>{const n=this.orderTracking?.status;this.orderTracking=e,this.loading=!1,n&&n!==e.status&&this.firebaseService.sendOrderNotification(e.orderNumber,e.status,this.getStatusMessage(e.status)),this.map&&this.updateMapMarkers()},error:e=>{console.error("Error loading order tracking:",e),this.loading=!1,this.snackBar.open("Failed to load order tracking","Close",{duration:3e3})}})}getStatusMessage(e){switch(e){case"CONFIRMED":return"Your order has been confirmed by the restaurant";case"PREPARING":return"Your order is being prepared";case"READY_FOR_PICKUP":return"Your order is ready for pickup";case"OUT_FOR_DELIVERY":return"Your delivery partner is on the way";case"DELIVERED":return"Your order has been delivered successfully";default:return"Order status updated"}}refreshTracking(){this.loadOrderTracking()}loadGoogleMaps(){if(typeof google<"u")this.initializeMap();else{const e=document.createElement("script");e.src=`https://maps.googleapis.com/maps/api/js?key=${F.c.googleMapsApiKey}&libraries=geometry`,e.onload=()=>{this.initializeMap()},e.onerror=()=>{console.error("Failed to load Google Maps"),this.mapLoaded=!1},document.head.appendChild(e)}}initializeMap(){const e=document.getElementById("delivery-map");e&&(this.map=new google.maps.Map(e,{zoom:13,center:{lat:12.9716,lng:77.5946},styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]}),this.mapLoaded=!0,this.orderTracking&&this.updateMapMarkers())}updateMapMarkers(){if(!this.map||!this.orderTracking)return;this.deliveryMarker&&this.deliveryMarker.setMap(null),this.destinationMarker&&this.destinationMarker.setMap(null),this.orderTracking.currentLocation&&(this.deliveryMarker=new google.maps.Marker({position:this.orderTracking.currentLocation,map:this.map,title:"Delivery Partner",icon:{url:"/assets/icons/delivery-bike.png",scaledSize:new google.maps.Size(40,40)}}));const e={lat:12.9816,lng:77.6046};this.destinationMarker=new google.maps.Marker({position:e,map:this.map,title:"Delivery Address",icon:{url:"/assets/icons/home-marker.png",scaledSize:new google.maps.Size(40,40)}});const n=new google.maps.LatLngBounds;this.orderTracking.currentLocation&&n.extend(this.orderTracking.currentLocation),n.extend(e),this.map.fitBounds(n)}getStatusBadgeClass(e){switch(e){case"PLACED":default:return"bg-secondary";case"CONFIRMED":return"bg-info";case"PREPARING":case"OUT_FOR_DELIVERY":return"bg-warning";case"READY_FOR_PICKUP":return"bg-primary";case"DELIVERED":return"bg-success";case"CANCELLED":return"bg-danger"}}getStatusDisplayText(e){switch(e){case"PLACED":return"Order Placed";case"CONFIRMED":return"Order Confirmed";case"PREPARING":return"Preparing Order";case"READY_FOR_PICKUP":return"Ready for Pickup";case"OUT_FOR_DELIVERY":return"Out for Delivery";case"DELIVERED":return"Delivered";case"CANCELLED":return"Cancelled";default:return e}}formatTime(e){return new Date(e).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0})}canCancelOrder(){return!!this.orderTracking&&["PLACED","CONFIRMED","PREPARING"].includes(this.orderTracking.status)}canAutoRefresh(){return!!this.orderTracking&&!["DELIVERED","CANCELLED"].includes(this.orderTracking.status)}cancelOrder(){if(!this.orderTracking||!this.canCancelOrder())return;const e=prompt("Please provide a reason for cancellation:");e&&this.orderService.cancelOrder(this.orderTracking.orderId,e).pipe((0,v.Q)(this.destroy$)).subscribe({next:()=>{this.snackBar.open("Order cancelled successfully","Close",{duration:3e3}),this.refreshTracking()},error:n=>{console.error("Error cancelling order:",n),this.snackBar.open("Failed to cancel order","Close",{duration:3e3})}})}contactSupport(){window.open("tel:+919876543210","_self")}goToShops(){this.router.navigate(["/customer/shops"])}static{this.\u0275fac=function(n){return new(n||o)(t.rXU($.nX),t.rXU($.Ix),t.rXU(_e),t.rXU(X.f),t.rXU(R.UG))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-order-tracking"]],decls:6,vars:3,consts:[[1,"container-fluid","py-4"],[1,"row"],[1,"col-12"],["class","card",4,"ngIf"],[4,"ngIf"],[1,"card"],[1,"card-body","text-center","py-5"],["diameter","50"],[1,"mt-3"],[1,"display-1","text-muted"],[1,"text-muted","mt-3"],[1,"text-muted"],["mat-raised-button","","color","primary",3,"click"],[1,"card","mb-4"],[1,"card-header"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"me-2"],[1,"badge","fs-6",3,"ngClass"],[1,"card-body"],[1,"col-md-8"],[1,"d-flex","align-items-center","mb-2"],[1,"me-2","text-muted"],["class","d-flex align-items-center",4,"ngIf"],[1,"col-md-4","text-end"],["mat-button","","color","primary",3,"click"],[1,"col-lg-6"],[1,"timeline"],["class","timeline-item",3,"timeline-item-active",4,"ngFor","ngForOf"],["id","delivery-map",1,"map-container",2,"height","400px","border-radius","8px"],[1,"d-flex","align-items-center","justify-content-center","h-100","bg-light"],["class","text-center",4,"ngIf"],["class","mt-3",4,"ngIf"],["class","card mt-4",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"btn","btn-sm","btn-outline-primary","ms-3",3,"href"],[1,"timeline-item"],[1,"timeline-marker"],[1,"timeline-marker-dot"],[1,"timeline-content"],[1,"d-flex","justify-content-between","align-items-start"],[1,"mb-1"],[1,"text-muted","small","mb-0"],[1,"text-center"],["diameter","30"],[1,"mt-2","text-muted","small"],[1,"d-flex","align-items-center","justify-content-between","p-2","bg-light","rounded"],[1,"me-2","text-primary"],[1,"fw-bold"],[1,"text-muted","d-block"],[1,"text-end"],[1,"text-warning","me-1","small"],[1,"card","mt-4"],[1,"d-flex","gap-2"],["mat-button","","color","warn",3,"click"],[1,"card-header","bg-warning","text-dark"],[1,"mb-2"]],template:function(n,r){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.DNE(3,fe,5,0,"div",3),t.DNE(4,he,12,0,"div",3),t.DNE(5,ke,51,10,"div",4),t.k0s()()()),2&n&&(t.R7$(3),t.Y8G("ngIf",r.loading),t.R7$(1),t.Y8G("ngIf",!r.loading&&!r.orderTracking),t.R7$(1),t.Y8G("ngIf",!r.loading&&r.orderTracking))},dependencies:[O.YU,O.Sq,O.bT,k.$z,w.An,y.LG]})}}return o})(),ve=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-order-confirmation"]],decls:2,vars:0,template:function(n,r){1&n&&(t.j41(0,"p"),t.EFF(1,"order-confirmation works!"),t.k0s())}})}}return o})();function Fe(o,c){1&o&&t.nrm(0,"mat-tab",11),2&o&&t.Y8G("label",c.$implicit.label)}function Ee(o,c){1&o&&(t.j41(0,"div",12),t.nrm(1,"mat-spinner"),t.j41(2,"p"),t.EFF(3,"Loading your orders..."),t.k0s()())}function je(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",13)(1,"mat-icon",14),t.EFF(2,"shopping_bag"),t.k0s(),t.j41(3,"h2"),t.EFF(4,"No Orders Yet"),t.k0s(),t.j41(5,"p"),t.EFF(6,"You haven't placed any orders yet. Start shopping to see your orders here!"),t.k0s(),t.j41(7,"button",15),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.continueShopping())}),t.j41(8,"mat-icon"),t.EFF(9,"store"),t.k0s(),t.EFF(10," Start Shopping "),t.k0s()()}}function Ie(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",40)(1,"img",41),t.bIt("error",function(r){t.eBV(e);const i=t.XpG(4);return t.Njj(i.onImageError(r))}),t.k0s(),t.j41(2,"div",42)(3,"div",43),t.EFF(4),t.k0s(),t.j41(5,"div",44),t.EFF(6),t.k0s()(),t.j41(7,"div",45),t.EFF(8),t.k0s()()}if(2&o){const e=c.$implicit;t.R7$(1),t.Y8G("src",e.productImageUrl||"/assets/images/product-placeholder.jpg",t.B4B)("alt",e.productName),t.R7$(3),t.JRh(e.productName),t.R7$(2),t.SpI("Qty: ",e.quantity,""),t.R7$(2),t.SpI("\u20b9",e.totalPrice||e.unitPrice*e.quantity,"")}}function we(o,c){if(1&o&&(t.j41(0,"div",36)(1,"div",37)(2,"mat-icon"),t.EFF(3,"receipt"),t.k0s(),t.j41(4,"span"),t.EFF(5,"Order Items"),t.k0s()(),t.j41(6,"div",38),t.DNE(7,Ie,9,5,"div",39),t.k0s()()),2&o){const e=t.XpG().$implicit;t.R7$(7),t.Y8G("ngForOf",e.items)}}function Re(o,c){if(1&o){const e=t.RV6();t.j41(0,"button",46),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.cancelOrder(r))}),t.j41(1,"mat-icon"),t.EFF(2,"cancel"),t.k0s(),t.EFF(3," Cancel "),t.k0s()}}function Te(o,c){if(1&o){const e=t.RV6();t.j41(0,"mat-card",18)(1,"mat-card-content",19),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.viewOrderDetails(i))}),t.j41(2,"div",20)(3,"div",21)(4,"div",22),t.EFF(5),t.k0s(),t.j41(6,"div",23),t.EFF(7),t.k0s()(),t.j41(8,"div",24),t.EFF(9),t.k0s()(),t.j41(10,"div",25)(11,"div",26)(12,"span",27),t.EFF(13),t.k0s(),t.j41(14,"span",28),t.EFF(15),t.k0s()()(),t.DNE(16,we,8,1,"div",29),t.j41(17,"div",30)(18,"div",31)(19,"div",32),t.EFF(20),t.k0s(),t.j41(21,"div",33),t.EFF(22),t.k0s()(),t.j41(23,"div",34),t.bIt("click",function(r){return r.stopPropagation()}),t.DNE(24,Re,4,0,"button",35),t.k0s()()()()}if(2&o){const e=c.$implicit,n=t.XpG(2);t.AVh("expanded",n.isOrderExpanded(e)),t.R7$(5),t.SpI("Order #",e.orderNumber,""),t.R7$(2),t.JRh(n.formatDate(e.createdAt)),t.R7$(1),t.xc7("background-color",n.getStatusColor(e.status)),t.R7$(1),t.SpI(" ",e.status," "),t.R7$(4),t.Lme("",(null==e.items?null:e.items.length)||0," item",((null==e.items?null:e.items.length)||0)>1?"s":"",""),t.R7$(2),t.JRh(n.getItemsPreview(e)),t.R7$(1),t.Y8G("ngIf",n.isOrderExpanded(e)),t.R7$(4),t.SpI("\u20b9",e.totalAmount,""),t.R7$(2),t.JRh(n.formatPaymentMethod(e.paymentMethod)),t.R7$(2),t.Y8G("ngIf",n.canCancelOrder(e))}}function Se(o,c){if(1&o&&(t.j41(0,"div",16),t.DNE(1,Te,25,14,"mat-card",17),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",e.orders)}}let Ne=(()=>{class o{constructor(e,n,r){this.router=e,this.http=n,this.snackBar=r,this.orders=[],this.loading=!1,this.selectedStatus=null,this.expandedOrderId=null,this.statusTabs=[{key:null,label:"All"},{key:"PENDING",label:"Pending"},{key:"CONFIRMED",label:"Confirmed"},{key:"PREPARING",label:"Preparing"},{key:"OUT_FOR_DELIVERY",label:"Out for Delivery"},{key:"DELIVERED",label:"Delivered"},{key:"CANCELLED",label:"Cancelled"}]}ngOnInit(){this.loadOrders()}onTabChange(e){this.selectedStatus=e,this.loadOrders()}loadOrders(){this.loading=!0;const e=localStorage.getItem("shop_management_token"),n={};e&&(n.Authorization=`Bearer ${e}`);const r=this.selectedStatus?`?status=${this.selectedStatus}`:"";console.log("Fetching orders with status:",this.selectedStatus),console.log("API URL:",`${F.c.apiUrl}/customer/orders${r}`),console.log("Headers:",n),this.http.get(`${F.c.apiUrl}/customer/orders${r}`,{headers:n}).subscribe({next:i=>{if(console.log("Orders API response:",i),console.log("Response type:",typeof i),console.log("Response keys:",Object.keys(i||{})),i&&"0000"===i.statusCode&&i.data){console.log("Response data:",i.data),console.log("Response data.content:",i.data.content);const a=i.data.content||[];console.log("Raw orders count:",a.length),this.orders=a.map(d=>({...d,items:d.orderItems||d.items||[]})),console.log("Processed orders:",this.orders)}else Array.isArray(i)?(console.log("Response is an array, processing directly"),this.orders=i.map(a=>({...a,items:a.orderItems||a.items||[]}))):(console.log("No orders found in response or error occurred"),console.log("StatusCode:",i?.statusCode),this.orders=[]);this.loading=!1},error:i=>{console.error("Error loading orders:",i),console.error("Error status:",i.status),console.error("Error message:",i.message),this.orders=[],this.loading=!1,this.snackBar.open("Failed to load orders","Close",{duration:3e3})}})}trackOrder(e){this.router.navigate(["/customer/track-order",e.orderNumber])}continueShopping(){this.router.navigate(["/customer/shops"])}getStatusColor(e){return{PENDING:"#FF9800",CONFIRMED:"#2196F3",PREPARING:"#9C27B0",READY_FOR_PICKUP:"#2196F3",OUT_FOR_DELIVERY:"#2196F3",DELIVERED:"#4CAF50",CANCELLED:"#F44336",REFUNDED:"#F44336"}[e]||"#9E9E9E"}getStatusIcon(e){return{PENDING:"schedule",CONFIRMED:"check_circle",PREPARING:"restaurant",READY_FOR_PICKUP:"inventory",OUT_FOR_DELIVERY:"local_shipping",DELIVERED:"done_all",CANCELLED:"cancel",REFUNDED:"money_off"}[e]||"info"}formatDate(e){const n=new Date(e),i=Math.abs((new Date).getTime()-n.getTime()),a=Math.floor(i/864e5);return 0===a?`Today, ${this.formatTime(n)}`:1===a?`Yesterday, ${this.formatTime(n)}`:a<7?`${a} days ago`:`${n.getDate()}/${n.getMonth()+1}/${n.getFullYear()}`}formatTime(e){let n=e.getHours();const i=n>=12?"PM":"AM";return n=n>12?n-12:n,n=0===n?12:n,`${n}:${e.getMinutes().toString().padStart(2,"0")} ${i}`}getItemsPreview(e){if(!e.items||0===e.items.length)return"";const r=e.items.slice(0,2).map(i=>i.productName).join(", ");return e.items.length>2?r+"...":r}getSelectedTabIndex(){return this.statusTabs.findIndex(e=>e.key===this.selectedStatus)}formatPaymentMethod(e){return e?e.replace(/_/g," "):""}canCancelOrder(e){return["PENDING","CONFIRMED"].includes(e.status)}cancelOrder(e){x().fire({title:"Cancel Order?",html:`\n        <p>Are you sure you want to cancel this order?</p>\n        <p><strong>Order #${e.orderNumber}</strong></p>\n        <p>Total: \u20b9${e.totalAmount}</p>\n        <hr>\n        <p>Please select a reason for cancellation:</p>\n      `,input:"select",inputOptions:{"Changed my mind":"Changed my mind","Ordered by mistake":"Ordered by mistake","Found better price elsewhere":"Found better price elsewhere","Delivery taking too long":"Delivery taking too long","Need to modify order":"Need to modify order",Other:"Other reason"},inputPlaceholder:"Select reason",showCancelButton:!0,confirmButtonText:"Yes, Cancel Order",cancelButtonText:"Keep Order",confirmButtonColor:"#f44336",cancelButtonColor:"#6c757d",inputValidator:n=>!n&&"You need to select a reason for cancellation!"}).then(n=>{n.isConfirmed&&n.value&&this.performOrderCancellation(e,n.value)})}performOrderCancellation(e,n){const r=localStorage.getItem("shop_management_token"),i={};r&&(i.Authorization=`Bearer ${r}`),this.http.post(`${F.c.apiUrl}/customer/orders/${e.id}/cancel`,{reason:n},{headers:i}).subscribe({next:a=>{e.status="CANCELLED",this.snackBar.open("Order cancelled successfully","Close",{duration:5e3,panelClass:["success-snackbar"]}),x().fire({title:"Order Cancelled!",html:`\n            <p>Your order has been cancelled successfully.</p>\n            <p><strong>Order #${e.orderNumber}</strong></p>\n            <p>If you paid online, the refund will be processed within 3-5 business days.</p>\n          `,icon:"success",confirmButtonText:"OK"})},error:a=>{console.error("Error cancelling order:",a);let d="Failed to cancel order. Please try again.";a.error?.message&&(d=a.error.message),this.snackBar.open(d,"Close",{duration:5e3,panelClass:["error-snackbar"]})}})}reorderItems(e){this.router.navigate(["/customer/shops"],{queryParams:{reorder:e.id}})}viewOrderDetails(e){this.expandedOrderId=this.expandedOrderId===e.id?null:e.id}isOrderExpanded(e){return this.expandedOrderId===e.id}onImageError(e){e.target.src="/assets/images/product-placeholder.jpg"}static{this.\u0275fac=function(n){return new(n||o)(t.rXU($.Ix),t.rXU(D.Qq),t.rXU(R.UG))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-orders-list"]],decls:14,vars:5,consts:[[1,"orders-page"],[1,"page-header"],[1,"header-container"],[1,"header-title"],[1,"orders-icon"],[1,"order-tabs",3,"selectedIndex","selectedIndexChange"],[3,"label",4,"ngFor","ngForOf"],[1,"orders-content"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","orders-list",4,"ngIf"],[3,"label"],[1,"loading-container"],[1,"empty-state"],[1,"empty-icon"],["mat-raised-button","","color","primary",3,"click"],[1,"orders-list"],["class","order-card",3,"expanded",4,"ngFor","ngForOf"],[1,"order-card"],[3,"click"],[1,"order-header"],[1,"order-info"],[1,"order-number"],[1,"order-date"],[1,"status-chip"],[1,"order-summary"],[1,"items-summary"],[1,"items-count"],[1,"items-preview"],["class","order-details",4,"ngIf"],[1,"order-footer"],[1,"amount-section"],[1,"total-amount"],[1,"payment-method"],[1,"action-buttons",3,"click"],["mat-stroked-button","","color","warn","class","compact-btn",3,"click",4,"ngIf"],[1,"order-details"],[1,"details-header"],[1,"items-list"],["class","order-item",4,"ngFor","ngForOf"],[1,"order-item"],[1,"item-image",3,"src","alt","error"],[1,"item-info"],[1,"item-name"],[1,"item-quantity"],[1,"item-price"],["mat-stroked-button","","color","warn",1,"compact-btn",3,"click"]],template:function(n,r){1&n&&(t.j41(0,"div",0)(1,"mat-card",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),t.EFF(5,"receipt_long"),t.k0s(),t.j41(6,"h1"),t.EFF(7,"My Orders"),t.k0s()()(),t.j41(8,"mat-tab-group",5),t.bIt("selectedIndexChange",function(a){return r.onTabChange(r.statusTabs[a].key)}),t.DNE(9,Fe,1,1,"mat-tab",6),t.k0s()(),t.j41(10,"div",7),t.DNE(11,Ee,4,0,"div",8),t.DNE(12,je,11,0,"div",9),t.DNE(13,Se,2,1,"div",10),t.k0s()()),2&n&&(t.R7$(8),t.Y8G("selectedIndex",r.getSelectedTabIndex()),t.R7$(1),t.Y8G("ngForOf",r.statusTabs),t.R7$(2),t.Y8G("ngIf",r.loading),t.R7$(1),t.Y8G("ngIf",!r.loading&&0===r.orders.length),t.R7$(1),t.Y8G("ngIf",!r.loading&&r.orders.length>0))},dependencies:[O.Sq,O.bT,h.RN,h.m2,k.$z,w.An,y.LG,B.mq,B.T8],styles:[".orders-page[_ngcontent-%COMP%]{min-height:100vh;background:#f5f5f5;padding-bottom:20px}.page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;margin-bottom:16px;border-radius:0}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{padding:20px 24px 0}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .orders-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:500}.page-header[_ngcontent-%COMP%]     .order-tabs .mat-tab-header{border-bottom:none}.page-header[_ngcontent-%COMP%]     .order-tabs .mat-tab-labels{background:transparent}.page-header[_ngcontent-%COMP%]     .order-tabs .mat-tab-label{color:#ffffffb3;min-width:70px;padding:0 12px;opacity:1;font-size:13px}.page-header[_ngcontent-%COMP%]     .order-tabs .mat-tab-label.mat-tab-label-active{color:#fff;opacity:1;font-weight:600}.page-header[_ngcontent-%COMP%]     .order-tabs .mat-ink-bar{background-color:#fff;height:3px}.page-header[_ngcontent-%COMP%]     .order-tabs .mat-tab-label-container{overflow-x:auto;overflow-y:hidden}.page-header[_ngcontent-%COMP%]     .order-tabs .mat-tab-label-container::-webkit-scrollbar{height:3px}.page-header[_ngcontent-%COMP%]     .order-tabs .mat-tab-label-container::-webkit-scrollbar-track{background:rgba(255,255,255,.1)}.page-header[_ngcontent-%COMP%]     .order-tabs .mat-tab-label-container::-webkit-scrollbar-thumb{background:rgba(255,255,255,.3);border-radius:3px}.orders-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 16px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px}.loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-bottom:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:80px;width:80px;height:80px;color:#ccc;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#333;margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:0 0 24px}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.orders-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 1px 3px #0000001a;cursor:pointer;transition:all .2s ease;padding:0;border:1px solid #e0e0e0}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:16px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]{flex:1}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .order-number[_ngcontent-%COMP%]{font-weight:600;font-size:15px;color:#1a1a1a;margin-bottom:4px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .order-date[_ngcontent-%COMP%]{font-size:13px;color:#757575}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{padding:6px 12px;border-radius:16px;color:#fff;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-summary[_ngcontent-%COMP%]{margin-bottom:12px;padding:10px;background:#f8f9fa;border-radius:6px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-summary[_ngcontent-%COMP%]   .items-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-summary[_ngcontent-%COMP%]   .items-summary[_ngcontent-%COMP%]   .items-count[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#424242}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-summary[_ngcontent-%COMP%]   .items-summary[_ngcontent-%COMP%]   .items-preview[_ngcontent-%COMP%]{font-size:12px;color:#757575;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]{margin:12px 0;padding:12px;background:#ffffff;border:1px solid #e0e0e0;border-radius:6px;animation:_ngcontent-%COMP%_slideDown .3s ease}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .details-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #e0e0e0;font-weight:600;font-size:14px;color:#424242}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .details-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#667eea}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;padding:8px;background:#f8f9fa;border-radius:4px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:6px;flex-shrink:0;border:1px solid #e0e0e0}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{flex:1;min-width:0}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:#1a1a1a;margin-bottom:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]   .item-quantity[_ngcontent-%COMP%]{font-size:12px;color:#757575}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#2e7d32;flex-shrink:0}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:12px;border-top:1px solid #e0e0e0}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .amount-section[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#2e7d32;margin-bottom:2px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .amount-section[_ngcontent-%COMP%]   .payment-method[_ngcontent-%COMP%]{font-size:12px;color:#757575;text-transform:uppercase;font-weight:500}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .compact-btn[_ngcontent-%COMP%]{font-size:13px;font-weight:500;padding:6px 16px;border-radius:6px;border-width:1.5px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .compact-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;margin-right:4px}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;max-height:0;transform:translateY(-10px)}to{opacity:1;max-height:500px;transform:translateY(0)}}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{padding:16px 16px 0}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.orders-content[_ngcontent-%COMP%]{padding:0 12px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:12px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-header[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .order-number[_ngcontent-%COMP%]{font-size:14px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .amount-section[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{font-size:18px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .compact-btn[_ngcontent-%COMP%]{font-size:12px;padding:6px 12px}}"]})}}return o})();function $e(o,c){if(1&o&&(t.j41(0,"div",24)(1,"div",25)(2,"p",26),t.EFF(3),t.k0s(),t.j41(4,"p",27),t.EFF(5),t.k0s()(),t.j41(6,"div",28)(7,"mat-chip",29),t.EFF(8),t.k0s()(),t.j41(9,"div",30),t.EFF(10),t.k0s()()),2&o){const e=c.$implicit,n=t.XpG(2);t.R7$(3),t.SpI("#",e.orderNumber,""),t.R7$(2),t.JRh(e.shopName),t.R7$(2),t.Y8G("color",n.getStatusColor(e.status)),t.R7$(1),t.SpI(" ",e.status," "),t.R7$(2),t.SpI("\u20b9",e.totalAmount,"")}}function De(o,c){if(1&o&&(t.j41(0,"mat-card",20)(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3,"Recent Orders"),t.k0s(),t.j41(4,"button",21),t.EFF(5,"View All"),t.k0s()(),t.j41(6,"mat-card-content")(7,"div",22),t.DNE(8,$e,11,5,"div",23),t.k0s()()()),2&o){const e=t.XpG();t.R7$(8),t.Y8G("ngForOf",e.recentOrders.slice(0,3))}}const Ge=function(o){return["/customer/products",o]};function Ye(o,c){if(1&o&&(t.j41(0,"div",31),t.nrm(1,"img",32),t.j41(2,"div",33)(3,"h4"),t.EFF(4),t.k0s(),t.j41(5,"p",34),t.EFF(6),t.k0s(),t.j41(7,"div",35)(8,"mat-icon"),t.EFF(9,"star"),t.k0s(),t.j41(10,"span"),t.EFF(11),t.k0s()()(),t.j41(12,"button",36),t.EFF(13," Shop Now "),t.k0s()()),2&o){const e=c.$implicit;t.R7$(1),t.FS9("alt",e.name),t.Y8G("src",e.image||"/assets/images/default-shop.png",t.B4B),t.R7$(3),t.JRh(e.name),t.R7$(2),t.JRh(e.category),t.R7$(5),t.JRh(e.rating),t.R7$(1),t.Y8G("routerLink",t.eq3(6,Ge,e.id))}}let ze=(()=>{class o{constructor(e){this.http=e,this.customerName="Customer",this.totalOrders=0,this.totalSpent=0,this.favoriteShops=0,this.cartItemCount=0,this.recentOrders=[],this.recommendedShops=[]}ngOnInit(){this.loadDashboardData(),this.loadRecentOrders(),this.loadRecommendedShops()}loadDashboardData(){const e=JSON.parse(localStorage.getItem("shop_management_user")||localStorage.getItem("currentUser")||"{}");this.customerName=e.firstName||e.username||"Customer",this.totalOrders=12,this.totalSpent=4500,this.favoriteShops=3,this.cartItemCount=0}loadRecentOrders(){this.recentOrders=[{orderNumber:"ORD-2024-0045",shopName:"Test Grocery Store",status:"DELIVERED",totalAmount:565},{orderNumber:"ORD-2024-0044",shopName:"TechMart Electronics",status:"CONFIRMED",totalAmount:85e3}]}loadRecommendedShops(){this.recommendedShops=[{id:1,name:"Test Grocery Store",category:"GROCERY",rating:4.5,image:""},{id:2,name:"TechMart Electronics",category:"GENERAL",rating:4.5,image:""}]}getStatusColor(e){return{PENDING:"warn",CONFIRMED:"primary",DELIVERED:"primary",CANCELLED:"warn"}[e]||"basic"}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(D.Qq))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-customer-dashboard"]],decls:67,vars:7,consts:[[1,"customer-dashboard"],[1,"welcome-section"],[1,"welcome-subtitle"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-content"],[1,"stat-icon","orders"],[1,"stat-details"],[1,"stat-icon","amount"],[1,"stat-icon","favorites"],[1,"quick-actions-card"],[1,"actions-grid"],["mat-raised-button","","color","primary","routerLink","/customer/shops"],["mat-raised-button","","routerLink","/customer/orders"],["mat-raised-button","","routerLink","/customer/cart"],["mat-raised-button","","routerLink","/customer/profile"],["class","recent-orders-card",4,"ngIf"],[1,"recommended-shops"],[1,"shops-grid"],["class","shop-card",4,"ngFor","ngForOf"],[1,"recent-orders-card"],["mat-button","","routerLink","/customer/orders"],[1,"recent-orders-list"],["class","order-item",4,"ngFor","ngForOf"],[1,"order-item"],[1,"order-info"],[1,"order-number"],[1,"order-shop"],[1,"order-status"],["selected","",3,"color"],[1,"order-amount"],[1,"shop-card"],[3,"src","alt"],[1,"shop-details"],[1,"shop-category"],[1,"shop-rating"],["mat-raised-button","","color","primary",3,"routerLink"]],template:function(n,r){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3),t.k0s(),t.j41(4,"p",2),t.EFF(5,"Ready to shop from your favorite local stores?"),t.k0s()(),t.j41(6,"div",3)(7,"mat-card",4)(8,"mat-card-content")(9,"div",5)(10,"mat-icon",6),t.EFF(11,"receipt_long"),t.k0s(),t.j41(12,"div",7)(13,"h3"),t.EFF(14),t.k0s(),t.j41(15,"p"),t.EFF(16,"Total Orders"),t.k0s()()()()(),t.j41(17,"mat-card",4)(18,"mat-card-content")(19,"div",5)(20,"mat-icon",8),t.EFF(21,"account_balance_wallet"),t.k0s(),t.j41(22,"div",7)(23,"h3"),t.EFF(24),t.k0s(),t.j41(25,"p"),t.EFF(26,"Total Spent"),t.k0s()()()()(),t.j41(27,"mat-card",4)(28,"mat-card-content")(29,"div",5)(30,"mat-icon",9),t.EFF(31,"favorite"),t.k0s(),t.j41(32,"div",7)(33,"h3"),t.EFF(34),t.k0s(),t.j41(35,"p"),t.EFF(36,"Favorite Shops"),t.k0s()()()()()(),t.j41(37,"mat-card",10)(38,"mat-card-header")(39,"mat-card-title"),t.EFF(40,"Quick Actions"),t.k0s()(),t.j41(41,"mat-card-content")(42,"div",11)(43,"button",12)(44,"mat-icon"),t.EFF(45,"store"),t.k0s(),t.EFF(46," Browse Shops "),t.k0s(),t.j41(47,"button",13)(48,"mat-icon"),t.EFF(49,"receipt_long"),t.k0s(),t.EFF(50," My Orders "),t.k0s(),t.j41(51,"button",14)(52,"mat-icon"),t.EFF(53,"shopping_cart"),t.k0s(),t.EFF(54),t.k0s(),t.j41(55,"button",15)(56,"mat-icon"),t.EFF(57,"person"),t.k0s(),t.EFF(58," My Profile "),t.k0s()()()(),t.DNE(59,De,9,1,"mat-card",16),t.j41(60,"mat-card",17)(61,"mat-card-header")(62,"mat-card-title"),t.EFF(63,"Recommended for You"),t.k0s()(),t.j41(64,"mat-card-content")(65,"div",18),t.DNE(66,Ye,14,8,"div",19),t.k0s()()()()),2&n&&(t.R7$(3),t.SpI("Welcome back, ",r.customerName||"Customer","!"),t.R7$(11),t.JRh(r.totalOrders),t.R7$(10),t.SpI("\u20b9",r.totalSpent,""),t.R7$(10),t.JRh(r.favoriteShops),t.R7$(20),t.SpI(" View Cart (",r.cartItemCount,") "),t.R7$(5),t.Y8G("ngIf",r.recentOrders.length>0),t.R7$(7),t.Y8G("ngForOf",r.recommendedShops))},dependencies:[O.Sq,O.bT,$.Wk,h.RN,h.m2,h.MM,h.dh,k.$z,w.An,j.Jl],styles:[".customer-dashboard[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.welcome-section[_ngcontent-%COMP%]{margin-bottom:32px}.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:600;margin:0 0 8px;color:#333}.welcome-section[_ngcontent-%COMP%]   .welcome-subtitle[_ngcontent-%COMP%]{color:#666;font-size:16px;margin:0}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:32px}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:36px;width:36px;height:36px;margin-right:16px}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-icon.orders[_ngcontent-%COMP%]{color:#2196f3}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-icon.amount[_ngcontent-%COMP%]{color:#4caf50}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-icon.favorites[_ngcontent-%COMP%]{color:#e91e63}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin:0;color:#333}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;color:#666;margin:4px 0 0;text-transform:uppercase;letter-spacing:.5px}.quick-actions-card[_ngcontent-%COMP%]{margin-bottom:24px}.quick-actions-card[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}.quick-actions-card[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;padding:12px 16px}.quick-actions-card[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.recent-orders-card[_ngcontent-%COMP%], .recommended-shops[_ngcontent-%COMP%]{margin-bottom:24px}.recent-orders-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%], .recommended-shops[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.recent-orders-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%], .recommended-shops[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:500}.recent-orders-list[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px;border-bottom:1px solid #f0f0f0}.recent-orders-list[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.recent-orders-list[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]{flex:1}.recent-orders-list[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .order-number[_ngcontent-%COMP%]{font-weight:500;margin:0 0 4px;color:#333}.recent-orders-list[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .order-shop[_ngcontent-%COMP%]{font-size:12px;color:#666;margin:0}.recent-orders-list[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .order-status[_ngcontent-%COMP%]{margin:0 16px}.recent-orders-list[_ngcontent-%COMP%]   .order-item[_ngcontent-%COMP%]   .order-amount[_ngcontent-%COMP%]{font-weight:600;color:#333}.shops-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.shops-grid[_ngcontent-%COMP%]   .shop-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;padding:16px;text-align:center;transition:transform .2s}.shops-grid[_ngcontent-%COMP%]   .shop-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.shops-grid[_ngcontent-%COMP%]   .shop-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;object-fit:cover;margin-bottom:12px}.shops-grid[_ngcontent-%COMP%]   .shop-card[_ngcontent-%COMP%]   .shop-details[_ngcontent-%COMP%]{margin-bottom:16px}.shops-grid[_ngcontent-%COMP%]   .shop-card[_ngcontent-%COMP%]   .shop-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:500;margin:0 0 4px;color:#333}.shops-grid[_ngcontent-%COMP%]   .shop-card[_ngcontent-%COMP%]   .shop-details[_ngcontent-%COMP%]   .shop-category[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase;margin:0 0 8px}.shops-grid[_ngcontent-%COMP%]   .shop-card[_ngcontent-%COMP%]   .shop-details[_ngcontent-%COMP%]   .shop-rating[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:4px;color:#ff9800}.shops-grid[_ngcontent-%COMP%]   .shop-card[_ngcontent-%COMP%]   .shop-details[_ngcontent-%COMP%]   .shop-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.shops-grid[_ngcontent-%COMP%]   .shop-card[_ngcontent-%COMP%]   .shop-details[_ngcontent-%COMP%]   .shop-rating[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.shops-grid[_ngcontent-%COMP%]   .shop-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}@media (max-width: 768px){.customer-dashboard[_ngcontent-%COMP%]{padding:16px}.welcome-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.actions-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.shops-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return o})();function Le(o,c){if(1&o&&(t.j41(0,"mat-option",26),t.EFF(1),t.k0s()),2&o){const e=c.$implicit;t.Y8G("value",e.value),t.R7$(1),t.SpI(" ",e.label," ")}}function Ae(o,c){if(1&o&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("addressType")," ")}}function Be(o,c){if(1&o&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("contactPersonName")," ")}}function Ve(o,c){if(1&o&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("contactMobileNumber")," ")}}function Ue(o,c){if(1&o&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("area")," ")}}function Xe(o,c){if(1&o&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("city")," ")}}function qe(o,c){if(1&o&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("state")," ")}}function Je(o,c){if(1&o&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("pincode")," ")}}let ot=(()=>{class o{constructor(e,n,r){this.fb=e,this.dialogRef=n,this.data=r,this.isEditMode=!1,this.dialogTitle="Add New Address",this.addressTypes=[{value:"Home",label:"Home"},{value:"Work",label:"Work"},{value:"Other",label:"Other"}]}ngOnInit(){this.isEditMode=!!this.data?.id,this.dialogTitle=this.isEditMode?"Edit Address":"Add New Address",this.addressForm=this.fb.group({addressType:[this.data?.addressType||"Home",s.k0.required],contactPersonName:[this.data?.contactPersonName||"",s.k0.required],contactMobileNumber:[this.data?.contactMobileNumber||"",[s.k0.required,s.k0.pattern(/^[6-9]\d{9}$/)]],flatHouse:[this.data?.flatHouse||""],floor:[this.data?.floor||""],street:[this.data?.street||""],area:[this.data?.area||"",s.k0.required],village:[this.data?.village||""],landmark:[this.data?.landmark||""],city:[this.data?.city||"",s.k0.required],state:[this.data?.state||"",s.k0.required],pincode:[this.data?.pincode||"",[s.k0.required,s.k0.pattern(/^\d{6}$/)]],isDefault:[this.data?.isDefault||!1],latitude:[this.data?.latitude||0],longitude:[this.data?.longitude||0]})}onCancel(){this.dialogRef.close()}onSave(){if(this.addressForm.valid){const n={...this.addressForm.value,id:this.data?.id};this.dialogRef.close(n)}else Object.keys(this.addressForm.controls).forEach(e=>{this.addressForm.get(e)?.markAsTouched()})}getErrorMessage(e){const n=this.addressForm.get(e);return n?.hasError("required")?"This field is required":"contactMobileNumber"===e&&n?.hasError("pattern")?"Enter a valid 10-digit mobile number":"pincode"===e&&n?.hasError("pattern")?"Enter a valid 6-digit pincode":""}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(s.ok),t.rXU(T.CP),t.rXU(T.Vh))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-address-dialog"]],decls:89,vars:11,consts:[["mat-dialog-title",""],[1,"address-form",3,"formGroup"],["appearance","outline",1,"full-width"],["formControlName","addressType"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"form-section"],[1,"section-title"],["matPrefix",""],["matInput","","formControlName","contactPersonName","placeholder","Enter name"],["matInput","","formControlName","contactMobileNumber","placeholder","Enter 10-digit mobile number"],[1,"form-row"],["appearance","outline",1,"half-width"],["matInput","","formControlName","flatHouse","placeholder","Enter flat/house number"],["matInput","","formControlName","floor","placeholder","Enter floor"],["matInput","","formControlName","street","placeholder","Enter street name"],["matInput","","formControlName","area","placeholder","Enter area or locality"],["matInput","","formControlName","village","placeholder","Enter village name"],["matInput","","formControlName","landmark","placeholder","Enter nearby landmark"],["matInput","","formControlName","city","placeholder","Enter city"],["matInput","","formControlName","state","placeholder","Enter state"],["matInput","","formControlName","pincode","placeholder","Enter 6-digit pincode"],["formControlName","isDefault","color","primary"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(n,r){if(1&n&&(t.j41(0,"h2",0),t.EFF(1),t.k0s(),t.j41(2,"mat-dialog-content")(3,"form",1)(4,"mat-form-field",2)(5,"mat-label"),t.EFF(6,"Address Type"),t.k0s(),t.j41(7,"mat-select",3),t.DNE(8,Le,2,2,"mat-option",4),t.k0s(),t.DNE(9,Ae,2,1,"mat-error",5),t.k0s(),t.j41(10,"div",6)(11,"h3",7),t.EFF(12,"Contact Information"),t.k0s(),t.j41(13,"mat-form-field",2)(14,"mat-label"),t.EFF(15,"Contact Person Name"),t.k0s(),t.j41(16,"mat-icon",8),t.EFF(17,"person"),t.k0s(),t.nrm(18,"input",9),t.DNE(19,Be,2,1,"mat-error",5),t.k0s(),t.j41(20,"mat-form-field",2)(21,"mat-label"),t.EFF(22,"Contact Mobile Number"),t.k0s(),t.j41(23,"mat-icon",8),t.EFF(24,"phone"),t.k0s(),t.nrm(25,"input",10),t.DNE(26,Ve,2,1,"mat-error",5),t.k0s()(),t.j41(27,"div",6)(28,"h3",7),t.EFF(29,"Address Details"),t.k0s(),t.j41(30,"div",11)(31,"mat-form-field",12)(32,"mat-label"),t.EFF(33,"Flat/House Number"),t.k0s(),t.nrm(34,"input",13),t.k0s(),t.j41(35,"mat-form-field",12)(36,"mat-label"),t.EFF(37,"Floor"),t.k0s(),t.nrm(38,"input",14),t.k0s()(),t.j41(39,"mat-form-field",2)(40,"mat-label"),t.EFF(41,"Street"),t.k0s(),t.nrm(42,"input",15),t.k0s(),t.j41(43,"mat-form-field",2)(44,"mat-label"),t.EFF(45,"Area/Locality *"),t.k0s(),t.j41(46,"mat-icon",8),t.EFF(47,"location_on"),t.k0s(),t.nrm(48,"input",16),t.DNE(49,Ue,2,1,"mat-error",5),t.k0s(),t.j41(50,"mat-form-field",2)(51,"mat-label"),t.EFF(52,"Village"),t.k0s(),t.nrm(53,"input",17),t.k0s(),t.j41(54,"mat-form-field",2)(55,"mat-label"),t.EFF(56,"Landmark"),t.k0s(),t.nrm(57,"input",18),t.k0s()(),t.j41(58,"div",6)(59,"h3",7),t.EFF(60,"Location"),t.k0s(),t.j41(61,"div",11)(62,"mat-form-field",12)(63,"mat-label"),t.EFF(64,"City *"),t.k0s(),t.nrm(65,"input",19),t.DNE(66,Xe,2,1,"mat-error",5),t.k0s(),t.j41(67,"mat-form-field",12)(68,"mat-label"),t.EFF(69,"State *"),t.k0s(),t.nrm(70,"input",20),t.DNE(71,qe,2,1,"mat-error",5),t.k0s()(),t.j41(72,"mat-form-field",2)(73,"mat-label"),t.EFF(74,"Pincode *"),t.k0s(),t.j41(75,"mat-icon",8),t.EFF(76,"mail"),t.k0s(),t.nrm(77,"input",21),t.DNE(78,Je,2,1,"mat-error",5),t.k0s()(),t.j41(79,"div",6)(80,"mat-checkbox",22),t.EFF(81," Set as default address "),t.k0s()()()(),t.j41(82,"mat-dialog-actions",23)(83,"button",24),t.bIt("click",function(){return r.onCancel()}),t.EFF(84,"Cancel"),t.k0s(),t.j41(85,"button",25),t.bIt("click",function(){return r.onSave()}),t.j41(86,"mat-icon"),t.EFF(87,"save"),t.k0s(),t.EFF(88," Save Address "),t.k0s()()),2&n){let i,a,d,m,u,_,g;t.R7$(1),t.JRh(r.dialogTitle),t.R7$(2),t.Y8G("formGroup",r.addressForm),t.R7$(5),t.Y8G("ngForOf",r.addressTypes),t.R7$(1),t.Y8G("ngIf",null==(i=r.addressForm.get("addressType"))?null:i.hasError("required")),t.R7$(10),t.Y8G("ngIf",null==(a=r.addressForm.get("contactPersonName"))?null:a.invalid),t.R7$(7),t.Y8G("ngIf",null==(d=r.addressForm.get("contactMobileNumber"))?null:d.invalid),t.R7$(23),t.Y8G("ngIf",null==(m=r.addressForm.get("area"))?null:m.invalid),t.R7$(17),t.Y8G("ngIf",null==(u=r.addressForm.get("city"))?null:u.invalid),t.R7$(5),t.Y8G("ngIf",null==(_=r.addressForm.get("state"))?null:_.invalid),t.R7$(7),t.Y8G("ngIf",null==(g=r.addressForm.get("pincode"))?null:g.invalid),t.R7$(7),t.Y8G("disabled",r.addressForm.invalid)}},dependencies:[O.Sq,O.bT,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,k.$z,w.An,M.rl,M.nJ,M.TL,M.JW,G.fg,z.VO,J.wT,V.So,T.BI,T.Yi,T.E7],styles:[".address-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px 0;min-width:500px;max-width:600px}@media (max-width: 768px){.address-form[_ngcontent-%COMP%]{min-width:100%}}.full-width[_ngcontent-%COMP%]{width:100%}.form-section[_ngcontent-%COMP%]{margin-top:16px}.form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#000000b3;margin:0 0 12px;text-transform:uppercase;letter-spacing:.5px}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}}.half-width[_ngcontent-%COMP%]{flex:1;min-width:0}mat-dialog-content[_ngcontent-%COMP%]{max-height:70vh;overflow-y:auto}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;margin:0}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px;font-size:18px;width:18px;height:18px}  .mat-form-field-appearance-outline .mat-form-field-outline{color:#0000001f}  .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline{color:#667eea}"]})}}return o})();function We(o,c){1&o&&(t.j41(0,"div",25),t.nrm(1,"mat-spinner",26),t.j41(2,"p"),t.EFF(3,"Loading addresses..."),t.k0s()())}function He(o,c){1&o&&(t.j41(0,"mat-icon",42),t.EFF(1,"star"),t.k0s())}function Qe(o,c){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(1),t.SpI("",e.flatHouse,", ")}}function Ke(o,c){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(1),t.SpI("Floor ",e.floor,", ")}}function Ze(o,c){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(1),t.SpI("",e.street,", ")}}function tn(o,c){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(1),t.SpI(", ",e.village,"")}}function en(o,c){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(1),t.SpI("Near ",e.landmark,", ")}}function nn(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",29)(1,"div",30)(2,"div",31)(3,"mat-icon"),t.EFF(4),t.k0s(),t.j41(5,"span"),t.EFF(6),t.k0s(),t.DNE(7,He,2,0,"mat-icon",32),t.k0s()(),t.j41(8,"div",33)(9,"div",34)(10,"p",35)(11,"mat-icon"),t.EFF(12,"person"),t.k0s(),t.EFF(13),t.k0s(),t.j41(14,"p",36)(15,"mat-icon"),t.EFF(16,"phone"),t.k0s(),t.EFF(17),t.k0s(),t.j41(18,"p",37)(19,"mat-icon"),t.EFF(20,"location_on"),t.k0s(),t.j41(21,"span"),t.DNE(22,Qe,2,1,"span",38),t.DNE(23,Ke,2,1,"span",38),t.DNE(24,Ze,2,1,"span",38),t.EFF(25),t.DNE(26,tn,2,1,"span",38),t.nrm(27,"br"),t.DNE(28,en,2,1,"span",38),t.EFF(29),t.k0s()()()(),t.j41(30,"div",39)(31,"button",40),t.bIt("click",function(){const i=t.eBV(e).index,a=t.XpG(2);return t.Njj(a.editAddress(i))}),t.j41(32,"mat-icon"),t.EFF(33,"edit"),t.k0s()(),t.j41(34,"button",41),t.bIt("click",function(){const i=t.eBV(e).index,a=t.XpG(2);return t.Njj(a.deleteAddress(i))}),t.j41(35,"mat-icon"),t.EFF(36,"delete"),t.k0s()()()()}if(2&o){const e=c.$implicit;t.R7$(2),t.AVh("default",e.isDefault),t.R7$(2),t.JRh("Home"===e.addressType?"home":"Work"===e.addressType?"work":"location_on"),t.R7$(2),t.JRh(e.addressType),t.R7$(1),t.Y8G("ngIf",e.isDefault),t.R7$(6),t.SpI(" ",e.contactPersonName," "),t.R7$(4),t.SpI(" ",e.contactMobileNumber," "),t.R7$(5),t.Y8G("ngIf",e.flatHouse),t.R7$(1),t.Y8G("ngIf",e.floor),t.R7$(1),t.Y8G("ngIf",e.street),t.R7$(1),t.SpI(" ",e.area,""),t.R7$(1),t.Y8G("ngIf",e.village),t.R7$(2),t.Y8G("ngIf",e.landmark),t.R7$(1),t.E5c(" ",e.city,", ",e.state," - ",e.pincode," ")}}function on(o,c){if(1&o&&(t.j41(0,"div",27),t.DNE(1,nn,37,16,"div",28),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",e.addresses)}}function rn(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",43)(1,"mat-icon"),t.EFF(2,"location_off"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No saved addresses"),t.k0s(),t.j41(5,"button",24),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.addAddress())}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.EFF(8," Add Your First Address "),t.k0s()()}}let an=(()=>{class o{constructor(e,n,r,i){this.fb=e,this.snackBar=n,this.dialog=r,this.addressService=i,this.addresses=[],this.loading=!1,this.preferences={emailNotifications:!0,smsNotifications:!0,marketing:!1},this.profileForm=this.createForm()}ngOnInit(){this.loadProfile(),this.loadAddresses()}createForm(){return this.fb.group({firstName:["",[s.k0.required]],lastName:["",[s.k0.required]],email:["",[s.k0.required,s.k0.email]],phone:["",[s.k0.required]]})}loadProfile(){const e=JSON.parse(localStorage.getItem("shop_management_user")||localStorage.getItem("currentUser")||"{}");this.profileForm.patchValue({firstName:e.firstName||"Test",lastName:e.lastName||"Customer",email:e.email||"customer1@test.com",phone:e.phone||"9876543210"})}loadAddresses(){this.loading=!0,this.addressService.getAddresses().subscribe({next:e=>{this.addresses=e,this.loading=!1},error:e=>{console.error("Error loading addresses:",e),this.loading=!1,this.snackBar.open("Failed to load addresses","Close",{duration:3e3})}})}saveProfile(){if(this.profileForm.valid){const n={...JSON.parse(localStorage.getItem("shop_management_user")||localStorage.getItem("currentUser")||"{}"),...this.profileForm.value};localStorage.setItem("shop_management_user",JSON.stringify(n)),this.snackBar.open("Profile updated successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]})}}addAddress(){this.dialog.open(ot,{width:"600px",data:null}).afterClosed().subscribe(n=>{n&&(console.log("Dialog closed with result:",n),this.addressService.addAddress(n).subscribe({next:r=>{console.log("Address saved successfully:",r),this.addresses.push(r),this.snackBar.open("Address added successfully!","Close",{duration:3e3})},error:r=>{console.error("Error adding address:",r),x().fire("Error","Failed to add address. Please try again.","error")}}))})}editAddress(e){const n=this.addresses[e];this.dialog.open(ot,{width:"600px",data:n}).afterClosed().subscribe(i=>{i&&n.id&&(console.log("Updating address with ID:",n.id),console.log("Update data:",i),this.addressService.updateAddress(n.id,i).subscribe({next:a=>{console.log("Address updated successfully:",a),this.addresses[e]=a,this.snackBar.open("Address updated successfully!","Close",{duration:3e3})},error:a=>{console.error("Error updating address:",a),x().fire("Error","Failed to update address. Please try again.","error")}}))})}deleteAddress(e){const n=this.addresses[e];x().fire({title:"Delete Address?",text:"Are you sure you want to delete this address?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(r=>{r.isConfirmed&&n.id&&this.addressService.deleteAddress(n.id).subscribe({next:()=>{this.addresses.splice(e,1),this.snackBar.open("Address deleted successfully","Close",{duration:2e3})},error:i=>{console.error("Error deleting address:",i),x().fire("Error","Failed to delete address. Please try again.","error")}})})}savePreferences(){this.snackBar.open("Preferences saved!","Close",{duration:3e3,panelClass:["success-snackbar"]})}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(s.ok),t.rXU(R.UG),t.rXU(T.bZ),t.rXU(nt))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-customer-profile"]],decls:79,vars:8,consts:[[1,"profile-container"],[1,"header-section"],[1,"subtitle"],[1,"profile-content"],[1,"profile-card"],[3,"formGroup","ngSubmit"],[1,"form-grid"],["appearance","outline"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","type","email","formControlName","email"],["matInput","","formControlName","phone"],[1,"actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"addresses-card"],["mat-button","","color","primary",3,"click"],["class","loading-state",4,"ngIf"],["class","addresses-list",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"preferences-card"],[1,"preferences-list"],[1,"preference-item"],[1,"preference-info"],[3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],[1,"loading-state"],["diameter","40"],[1,"addresses-list"],["class","address-item",4,"ngFor","ngForOf"],[1,"address-item"],[1,"address-header"],[1,"address-type-badge"],["class","default-icon",4,"ngIf"],[1,"address-info"],[1,"address-details"],[1,"contact-name"],[1,"contact-phone"],[1,"full-address"],[4,"ngIf"],[1,"address-actions"],["mat-icon-button","","matTooltip","Edit Address",3,"click"],["mat-icon-button","","color","warn","matTooltip","Delete Address",3,"click"],[1,"default-icon"],[1,"empty-state"]],template:function(n,r){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3,"My Profile"),t.k0s(),t.j41(4,"p",2),t.EFF(5,"Manage your personal information and preferences"),t.k0s()(),t.j41(6,"div",3)(7,"mat-card",4)(8,"mat-card-header")(9,"mat-card-title"),t.EFF(10,"Personal Information"),t.k0s()(),t.j41(11,"mat-card-content")(12,"form",5),t.bIt("ngSubmit",function(){return r.saveProfile()}),t.j41(13,"div",6)(14,"mat-form-field",7)(15,"mat-label"),t.EFF(16,"First Name"),t.k0s(),t.nrm(17,"input",8),t.k0s(),t.j41(18,"mat-form-field",7)(19,"mat-label"),t.EFF(20,"Last Name"),t.k0s(),t.nrm(21,"input",9),t.k0s(),t.j41(22,"mat-form-field",7)(23,"mat-label"),t.EFF(24,"Email"),t.k0s(),t.nrm(25,"input",10),t.k0s(),t.j41(26,"mat-form-field",7)(27,"mat-label"),t.EFF(28,"Phone Number"),t.k0s(),t.nrm(29,"input",11),t.k0s()(),t.j41(30,"div",12)(31,"button",13)(32,"mat-icon"),t.EFF(33,"save"),t.k0s(),t.EFF(34," Save Changes "),t.k0s()()()()(),t.j41(35,"mat-card",14)(36,"mat-card-header")(37,"mat-card-title"),t.EFF(38,"Delivery Addresses"),t.k0s(),t.j41(39,"button",15),t.bIt("click",function(){return r.addAddress()}),t.j41(40,"mat-icon"),t.EFF(41,"add"),t.k0s(),t.EFF(42," Add Address "),t.k0s()(),t.j41(43,"mat-card-content"),t.DNE(44,We,4,0,"div",16),t.DNE(45,on,2,1,"div",17),t.DNE(46,rn,9,0,"div",18),t.k0s()(),t.j41(47,"mat-card",19)(48,"mat-card-header")(49,"mat-card-title"),t.EFF(50,"Preferences"),t.k0s()(),t.j41(51,"mat-card-content")(52,"div",20)(53,"div",21)(54,"div",22)(55,"h4"),t.EFF(56,"Email Notifications"),t.k0s(),t.j41(57,"p"),t.EFF(58,"Receive order updates and promotional emails"),t.k0s()(),t.j41(59,"mat-slide-toggle",23),t.bIt("ngModelChange",function(a){return r.preferences.emailNotifications=a}),t.k0s()(),t.j41(60,"div",21)(61,"div",22)(62,"h4"),t.EFF(63,"SMS Notifications"),t.k0s(),t.j41(64,"p"),t.EFF(65,"Receive order updates via SMS"),t.k0s()(),t.j41(66,"mat-slide-toggle",23),t.bIt("ngModelChange",function(a){return r.preferences.smsNotifications=a}),t.k0s()(),t.j41(67,"div",21)(68,"div",22)(69,"h4"),t.EFF(70,"Marketing Communications"),t.k0s(),t.j41(71,"p"),t.EFF(72,"Receive promotional offers and deals"),t.k0s()(),t.j41(73,"mat-slide-toggle",23),t.bIt("ngModelChange",function(a){return r.preferences.marketing=a}),t.k0s()()(),t.j41(74,"div",12)(75,"button",24),t.bIt("click",function(){return r.savePreferences()}),t.j41(76,"mat-icon"),t.EFF(77,"save"),t.k0s(),t.EFF(78," Save Preferences "),t.k0s()()()()()()),2&n&&(t.R7$(12),t.Y8G("formGroup",r.profileForm),t.R7$(19),t.Y8G("disabled",r.profileForm.invalid),t.R7$(13),t.Y8G("ngIf",r.loading),t.R7$(1),t.Y8G("ngIf",!r.loading&&r.addresses.length>0),t.R7$(1),t.Y8G("ngIf",!r.loading&&0===r.addresses.length),t.R7$(13),t.Y8G("ngModel",r.preferences.emailNotifications),t.R7$(7),t.Y8G("ngModel",r.preferences.smsNotifications),t.R7$(7),t.Y8G("ngModel",r.preferences.marketing))},dependencies:[O.Sq,O.bT,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,s.vS,h.RN,h.m2,h.MM,h.dh,k.$z,k.iY,w.An,M.rl,M.nJ,G.fg,y.LG,p.oV,N.sG],styles:[".profile-container[_ngcontent-%COMP%]{padding:24px;max-width:1000px;margin:0 auto}.header-section[_ngcontent-%COMP%]{margin-bottom:32px}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:600;margin:0 0 8px;color:#333}.header-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.profile-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.profile-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%], .addresses-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%], .preferences-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.profile-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%], .addresses-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%], .preferences-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:500}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;margin-bottom:24px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:16px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:40px}.loading-state[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:0 auto 16px}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.addresses-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]{background:#fff;border:2px solid #e0e0e0;border-radius:12px;padding:20px;transition:all .3s ease;box-shadow:0 2px 4px #0000000d}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 4px 12px #667eea26;transform:translateY(-2px)}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]   .address-header[_ngcontent-%COMP%]{margin-bottom:16px}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]   .address-header[_ngcontent-%COMP%]   .address-type-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:8px 16px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border-radius:20px;font-size:14px;font-weight:500}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]   .address-header[_ngcontent-%COMP%]   .address-type-badge.default[_ngcontent-%COMP%]{background:linear-gradient(135deg,#48bb78 0%,#38a169 100%)}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]   .address-header[_ngcontent-%COMP%]   .address-type-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]   .address-header[_ngcontent-%COMP%]   .address-type-badge[_ngcontent-%COMP%]   .default-icon[_ngcontent-%COMP%]{margin-left:4px;font-size:16px;width:16px;height:16px}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]   .address-info[_ngcontent-%COMP%]{flex:1}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]   .address-info[_ngcontent-%COMP%]   .address-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]   .address-info[_ngcontent-%COMP%]   .address-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;margin:0;color:#333;font-size:14px;line-height:1.6}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]   .address-info[_ngcontent-%COMP%]   .address-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#667eea;font-size:20px;width:20px;height:20px;flex-shrink:0;margin-top:2px}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]   .address-info[_ngcontent-%COMP%]   .address-details[_ngcontent-%COMP%]   p.contact-name[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#333}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]   .address-info[_ngcontent-%COMP%]   .address-details[_ngcontent-%COMP%]   p.contact-phone[_ngcontent-%COMP%]{font-weight:500;color:#48bb78}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]   .address-info[_ngcontent-%COMP%]   .address-details[_ngcontent-%COMP%]   p.full-address[_ngcontent-%COMP%]{color:#666}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]   .address-info[_ngcontent-%COMP%]   .address-details[_ngcontent-%COMP%]   p.full-address[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]   .address-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end;margin-top:16px;padding-top:16px;border-top:1px solid #f0f0f0}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]   .address-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40px}.addresses-list[_ngcontent-%COMP%]   .address-item[_ngcontent-%COMP%]   .address-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:rgba(102,126,234,.1)}.preferences-list[_ngcontent-%COMP%]   .preference-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 0;border-bottom:1px solid #f0f0f0}.preferences-list[_ngcontent-%COMP%]   .preference-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.preferences-list[_ngcontent-%COMP%]   .preference-item[_ngcontent-%COMP%]   .preference-info[_ngcontent-%COMP%]{flex:1}.preferences-list[_ngcontent-%COMP%]   .preference-item[_ngcontent-%COMP%]   .preference-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;font-weight:500;margin:0 0 4px;color:#333}.preferences-list[_ngcontent-%COMP%]   .preference-item[_ngcontent-%COMP%]   .preference-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;color:#999}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;font-size:16px}@media (max-width: 768px){.profile-container[_ngcontent-%COMP%]{padding:16px}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.address-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.address-item[_ngcontent-%COMP%]   .address-actions[_ngcontent-%COMP%]{align-self:flex-end}.preference-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}}"]})}}return o})();function cn(o,c){if(1&o){const e=t.RV6();t.j41(0,"button",12),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.markAllAsRead())}),t.j41(1,"mat-icon"),t.EFF(2,"done_all"),t.k0s()()}}function sn(o,c){if(1&o&&(t.j41(0,"mat-icon"),t.EFF(1),t.k0s(),t.j41(2,"span"),t.EFF(3),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function dn(o,c){1&o&&(t.j41(0,"mat-tab"),t.DNE(1,sn,4,2,"ng-template",13),t.k0s())}function ln(o,c){1&o&&(t.j41(0,"div",14),t.nrm(1,"mat-spinner"),t.j41(2,"p"),t.EFF(3,"Loading notifications..."),t.k0s()())}function mn(o,c){1&o&&(t.j41(0,"div",15)(1,"mat-icon",16),t.EFF(2,"notifications_none"),t.k0s(),t.j41(3,"h2"),t.EFF(4,"No Notifications"),t.k0s(),t.j41(5,"p"),t.EFF(6,"You don't have any notifications yet. We'll notify you when there's something new!"),t.k0s()())}function gn(o,c){1&o&&t.nrm(0,"span",32)}function pn(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",33)(1,"button",34),t.bIt("click",function(r){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG(2);return r.stopPropagation(),t.Njj(a.viewOrder(i))}),t.j41(2,"mat-icon"),t.EFF(3,"receipt_long"),t.k0s(),t.EFF(4),t.k0s()()}if(2&o){const e=t.XpG().$implicit;t.R7$(4),t.SpI(" View Order #",e.orderNumber," ")}}function un(o,c){if(1&o){const e=t.RV6();t.j41(0,"mat-card",19),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.markAsRead(i))}),t.j41(1,"mat-card-content")(2,"div",20)(3,"div",21)(4,"mat-icon",22),t.EFF(5),t.k0s()(),t.j41(6,"div",23)(7,"div",24)(8,"h3",25),t.EFF(9),t.k0s(),t.DNE(10,gn,1,0,"span",26),t.k0s(),t.j41(11,"p",27),t.EFF(12),t.k0s(),t.j41(13,"div",28)(14,"span",29)(15,"mat-icon"),t.EFF(16,"schedule"),t.k0s(),t.EFF(17),t.k0s(),t.j41(18,"span",30),t.EFF(19),t.k0s()()()(),t.DNE(20,pn,5,1,"div",31),t.k0s()()}if(2&o){const e=c.$implicit,n=t.XpG(2);t.AVh("unread",!e.isRead),t.R7$(3),t.xc7("background-color",n.getNotificationColor(e)),t.R7$(2),t.JRh(n.getNotificationIcon(e)),t.R7$(4),t.JRh(e.title),t.R7$(1),t.Y8G("ngIf",!e.isRead),t.R7$(2),t.JRh(e.message),t.R7$(5),t.SpI(" ",n.formatDate(e.createdAt)," "),t.R7$(1),t.xc7("color",n.getNotificationColor(e)),t.R7$(1),t.SpI(" ",e.type," "),t.R7$(1),t.Y8G("ngIf",e.orderId&&e.orderNumber)}}function _n(o,c){if(1&o&&(t.j41(0,"div",17),t.DNE(1,un,21,13,"mat-card",18),t.k0s()),2&o){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",e.notifications)}}const fn=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:ze},{path:"shops",component:mt},{path:"products/:id",component:Ft},{path:"cart",component:$t},{path:"checkout",component:pe},{path:"orders",component:Ne},{path:"notifications",component:(()=>{class o{constructor(e,n){this.http=e,this.snackBar=n,this.notifications=[],this.loading=!1,this.selectedFilter="all",this.filterTabs=[{key:"all",label:"All",icon:"notifications"},{key:"unread",label:"Unread",icon:"mark_email_unread"},{key:"ORDER",label:"Orders",icon:"shopping_bag"},{key:"MARKETING",label:"Marketing",icon:"local_offer"}]}viewOrder(e){e.orderNumber&&(window.location.href=`/customer/track-order/${e.orderNumber}`)}ngOnInit(){this.loadNotifications()}onFilterChange(e){this.selectedFilter=e,this.loadNotifications()}loadNotifications(){this.loading=!0;const e=localStorage.getItem("shop_management_token"),n=localStorage.getItem("shop_management_user");if(!n||!e)return void(this.loading=!1);let r;try{r=JSON.parse(n).id}catch(d){return console.error("Error parsing user data:",d),void(this.loading=!1)}const i={Authorization:`Bearer ${e}`};let a=`${F.c.apiUrl}/notifications/user/${r}`;"unread"===this.selectedFilter?a=`${F.c.apiUrl}/notifications/user/${r}/unread`:"all"!==this.selectedFilter&&(a=`${F.c.apiUrl}/notifications/user/${r}/type/${this.selectedFilter}`),console.log("Loading notifications from:",a),this.http.get(a,{headers:i}).subscribe({next:d=>{console.log("Notifications response:",d),this.notifications=d&&d.content?d.content:Array.isArray(d)?d:[],this.loading=!1},error:d=>{console.error("Error loading notifications:",d),this.notifications=[],this.loading=!1,this.snackBar.open("Failed to load notifications","Close",{duration:3e3})}})}markAsRead(e){if(e.isRead)return;const r={Authorization:`Bearer ${localStorage.getItem("shop_management_token")}`};this.http.put(`${F.c.apiUrl}/notifications/${e.id}/read`,{},{headers:r}).subscribe({next:()=>{e.isRead=!0,this.snackBar.open("Notification marked as read","Close",{duration:2e3})},error:i=>{console.error("Error marking notification as read:",i)}})}markAllAsRead(){const e=localStorage.getItem("shop_management_token"),n=localStorage.getItem("shop_management_user");if(!n||!e)return;let r;try{r=JSON.parse(n).id}catch(a){return void console.error("Error parsing user data:",a)}this.http.put(`${F.c.apiUrl}/notifications/user/${r}/read-all`,{},{headers:{Authorization:`Bearer ${e}`}}).subscribe({next:()=>{this.notifications.forEach(a=>a.isRead=!0),this.snackBar.open("All notifications marked as read","Close",{duration:2e3})},error:a=>{console.error("Error marking all as read:",a),this.snackBar.open("Failed to mark all as read","Close",{duration:3e3})}})}getNotificationIcon(e){return{ORDER:"shopping_bag",ORDER_STATUS_UPDATE:"local_shipping",PAYMENT:"payment",MARKETING:"local_offer",SYSTEM:"info",PROMOTION:"card_giftcard"}[e.type]||"notifications"}getNotificationColor(e){return{HIGH:"#f44336",MEDIUM:"#ff9800",LOW:"#2196f3",NORMAL:"#757575"}[e.priority]||"#757575"}formatDate(e){const n=new Date(e),i=Math.abs((new Date).getTime()-n.getTime()),a=Math.floor(i/864e5),d=Math.floor(i/36e5),m=Math.floor(i/6e4);return m<1?"Just now":m<60?`${m} minute${m>1?"s":""} ago`:d<24?`${d} hour${d>1?"s":""} ago`:1===a?"Yesterday":a<7?`${a} days ago`:`${n.getDate()}/${n.getMonth()+1}/${n.getFullYear()}`}getSelectedTabIndex(){return this.filterTabs.findIndex(e=>e.key===this.selectedFilter)}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(D.Qq),t.rXU(R.UG))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-notifications"]],decls:15,vars:6,consts:[[1,"notifications-page"],[1,"page-header"],[1,"header-container"],[1,"header-title"],[1,"notifications-icon"],["mat-icon-button","","class","mark-all-btn","matTooltip","Mark all as read",3,"click",4,"ngIf"],[1,"notification-tabs",3,"selectedIndex","selectedIndexChange"],[4,"ngFor","ngForOf"],[1,"notifications-content"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","notifications-list",4,"ngIf"],["mat-icon-button","","matTooltip","Mark all as read",1,"mark-all-btn",3,"click"],["mat-tab-label",""],[1,"loading-container"],[1,"empty-state"],[1,"empty-icon"],[1,"notifications-list"],["class","notification-card",3,"unread","click",4,"ngFor","ngForOf"],[1,"notification-card",3,"click"],[1,"notification-header"],[1,"notification-icon-wrapper"],[1,"notification-icon"],[1,"notification-content"],[1,"notification-title-row"],[1,"notification-title"],["class","notification-badge",4,"ngIf"],[1,"notification-message"],[1,"notification-footer"],[1,"notification-time"],[1,"notification-type"],["class","order-link",4,"ngIf"],[1,"notification-badge"],[1,"order-link"],["mat-stroked-button","","color","primary",3,"click"]],template:function(n,r){1&n&&(t.j41(0,"div",0)(1,"mat-card",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),t.EFF(5,"notifications"),t.k0s(),t.j41(6,"h1"),t.EFF(7,"Notifications"),t.k0s()(),t.DNE(8,cn,3,0,"button",5),t.k0s(),t.j41(9,"mat-tab-group",6),t.bIt("selectedIndexChange",function(a){return r.onFilterChange(r.filterTabs[a].key)}),t.DNE(10,dn,2,0,"mat-tab",7),t.k0s()(),t.j41(11,"div",8),t.DNE(12,ln,4,0,"div",9),t.DNE(13,mn,7,0,"div",10),t.DNE(14,_n,2,1,"div",11),t.k0s()()),2&n&&(t.R7$(8),t.Y8G("ngIf",r.notifications.length>0),t.R7$(1),t.Y8G("selectedIndex",r.getSelectedTabIndex()),t.R7$(1),t.Y8G("ngForOf",r.filterTabs),t.R7$(2),t.Y8G("ngIf",r.loading),t.R7$(1),t.Y8G("ngIf",!r.loading&&0===r.notifications.length),t.R7$(1),t.Y8G("ngIf",!r.loading&&r.notifications.length>0))},dependencies:[O.Sq,O.bT,h.RN,h.m2,k.$z,k.iY,w.An,y.LG,p.oV,B.ES,B.mq,B.T8],styles:[".notifications-page[_ngcontent-%COMP%]{min-height:100vh;background:#f5f5f5;padding-bottom:20px}.page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;margin-bottom:16px;border-radius:0}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{padding:20px 24px 0;display:flex;justify-content:space-between;align-items:center}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .notifications-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:500}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .mark-all-btn[_ngcontent-%COMP%]{color:#fff}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .mark-all-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.page-header[_ngcontent-%COMP%]     .notification-tabs .mat-tab-header{border-bottom:none}.page-header[_ngcontent-%COMP%]     .notification-tabs .mat-tab-labels{background:transparent}.page-header[_ngcontent-%COMP%]     .notification-tabs .mat-tab-label{color:#ffffffb3;min-width:90px;padding:0 16px;opacity:1;font-size:13px}.page-header[_ngcontent-%COMP%]     .notification-tabs .mat-tab-label mat-icon{margin-right:6px;font-size:20px;width:20px;height:20px}.page-header[_ngcontent-%COMP%]     .notification-tabs .mat-tab-label.mat-tab-label-active{color:#fff;opacity:1;font-weight:600}.page-header[_ngcontent-%COMP%]     .notification-tabs .mat-ink-bar{background-color:#fff;height:3px}.notifications-content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:0 16px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px}.loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-bottom:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:80px;width:80px;height:80px;color:#ccc;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#333;margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:0;max-width:400px}.notifications-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 1px 3px #0000001a;cursor:pointer;transition:all .2s ease;padding:0;border-left:4px solid transparent}.notifications-list[_ngcontent-%COMP%]   .notification-card.unread[_ngcontent-%COMP%]{border-left-color:#667eea;background-color:#f8f9ff}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:16px}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:12px}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]   .notification-icon-wrapper[_ngcontent-%COMP%]{flex-shrink:0;width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]   .notification-icon-wrapper[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{color:#fff;font-size:24px;width:24px;height:24px}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{flex:1;min-width:0}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification-title-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:6px}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification-title-row[_ngcontent-%COMP%]   .notification-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1a1a1a;margin:0;flex:1}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification-title-row[_ngcontent-%COMP%]   .notification-badge[_ngcontent-%COMP%]{width:10px;height:10px;background-color:#667eea;border-radius:50%;flex-shrink:0}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification-message[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:0 0 12px;line-height:1.5}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:12px}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification-footer[_ngcontent-%COMP%]   .notification-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:12px;color:#999}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification-footer[_ngcontent-%COMP%]   .notification-time[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification-footer[_ngcontent-%COMP%]   .notification-type[_ngcontent-%COMP%]{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-link[_ngcontent-%COMP%]{margin-top:12px;padding-top:12px;border-top:1px solid #e0e0e0}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-link[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:13px;font-weight:500}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .order-link[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;margin-right:4px}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{padding:16px 16px 0}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.page-header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]   .notifications-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.notifications-content[_ngcontent-%COMP%]{padding:0 12px}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:12px}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]{gap:12px}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]   .notification-icon-wrapper[_ngcontent-%COMP%]{width:40px;height:40px}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]   .notification-icon-wrapper[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification-title-row[_ngcontent-%COMP%]   .notification-title[_ngcontent-%COMP%]{font-size:15px}.notifications-list[_ngcontent-%COMP%]   .notification-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .notification-header[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification-message[_ngcontent-%COMP%]{font-size:13px}}"]})}}return o})()},{path:"track-order/:orderNumber",component:ye},{path:"order-confirmation",component:ve},{path:"profile",component:an}];let hn=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[$.iI.forChild(fn),$.iI]})}}return o})(),Cn=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[O.MD,s.X1,s.YN,hn,h.Hu,k.Hl,w.m_,M.RG,G.fS,z.Ve,L.Wk,V.g7,y.D6,R._T,p.uc,E.Y,j.YN,b.w,N.mV,T.hM,B.RI]})}}return o})()}}]);