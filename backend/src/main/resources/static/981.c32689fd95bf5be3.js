"use strict";(self.webpackChunkshop_management_frontend=self.webpackChunkshop_management_frontend||[]).push([[981],{981:(Dn,T,l)=>{l.r(T),l.d(T,{UsersModule:()=>wn});var f=l(177),g=l(9417),C=l(9159),R=l(6695),y=l(2042),N=l(9631),j=l(2798),O=l(8834),k=l(9213),P=l(5596),F=l(6471),D=l(5351),w=l(5416),I=l(9183),x=l(9115),W=l(1975),A=l(450),V=l(2765),H=l(6850),U=l(1997),b=l(2102),G=l(4823),h=l(1188),L=l(2525),q=l(8032),B=l.n(q),t=l(7705),S=l(2150),K=l(7575);function Q(o,i){if(1&o&&(t.j41(0,"span",32)(1,"mat-icon"),t.EFF(2,"card_membership"),t.k0s(),t.EFF(3),t.k0s()),2&o){const n=t.XpG(2).$implicit;t.R7$(3),t.SpI(" License: ",n.licenseNumber," ")}}function Z(o,i){if(1&o&&(t.j41(0,"span",32)(1,"mat-icon"),t.EFF(2,"motorcycle"),t.k0s(),t.EFF(3),t.k0s()),2&o){const n=t.XpG(2).$implicit;t.R7$(3),t.SpI(" Vehicle: ",n.vehicleNumber," ")}}function tt(o,i){if(1&o&&(t.j41(0,"div",30),t.DNE(1,Q,4,1,"span",31),t.DNE(2,Z,4,1,"span",31),t.k0s()),2&o){const n=t.XpG().$implicit;t.R7$(1),t.Y8G("ngIf",n.licenseNumber),t.R7$(1),t.Y8G("ngIf",n.vehicleNumber)}}function nt(o,i){if(1&o){const n=t.RV6();t.j41(0,"div",33)(1,"img",34),t.bIt("click",function(){t.eBV(n);const r=t.XpG().$implicit,a=t.XpG(2);return t.Njj(a.openFullImage(r))}),t.k0s()()}if(2&o){const n=t.XpG().$implicit,e=t.XpG(2);t.R7$(1),t.Y8G("src",e.getFullImageUrl(n),t.B4B)("alt",n.documentName)}}function et(o,i){1&o&&(t.j41(0,"div",35)(1,"mat-icon",36),t.EFF(2,"picture_as_pdf"),t.k0s(),t.j41(3,"span"),t.EFF(4,"PDF Document"),t.k0s()())}function ot(o,i){if(1&o&&(t.j41(0,"div",37)(1,"mat-icon",36),t.EFF(2,"description"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&o){const n=t.XpG().$implicit;t.R7$(4),t.JRh(n.fileType)}}function rt(o,i){if(1&o){const n=t.RV6();t.j41(0,"div",38)(1,"button",9),t.bIt("click",function(){t.eBV(n);const r=t.XpG().$implicit,a=t.XpG(2);return t.Njj(a.verifyDocument(r,"VERIFIED"))}),t.j41(2,"mat-icon"),t.EFF(3,"check_circle"),t.k0s(),t.EFF(4," Approve "),t.k0s(),t.j41(5,"button",39),t.bIt("click",function(){t.eBV(n);const r=t.XpG().$implicit,a=t.XpG(2);return t.Njj(a.verifyDocument(r,"REJECTED"))}),t.j41(6,"mat-icon"),t.EFF(7,"cancel"),t.k0s(),t.EFF(8," Reject "),t.k0s()()}}function at(o,i){if(1&o&&(t.j41(0,"div",40)(1,"h5"),t.EFF(2,"Admin Notes:"),t.k0s(),t.j41(3,"p"),t.EFF(4),t.k0s(),t.j41(5,"small"),t.EFF(6),t.nI1(7,"date"),t.k0s()()),2&o){const n=t.XpG().$implicit;t.R7$(4),t.JRh(n.verificationNotes),t.R7$(2),t.Lme("Verified by: ",n.verifiedBy," on ",t.i5U(7,3,n.verifiedAt,"dd/MM/yyyy HH:mm"),"")}}function it(o,i){if(1&o){const n=t.RV6();t.j41(0,"div",12)(1,"div",13)(2,"div",14)(3,"h4"),t.EFF(4),t.k0s(),t.j41(5,"p",15),t.EFF(6),t.k0s(),t.j41(7,"div",16)(8,"span",17),t.EFF(9),t.k0s(),t.j41(10,"span",18),t.EFF(11),t.nI1(12,"date"),t.k0s()(),t.DNE(13,tt,3,2,"div",19),t.k0s(),t.j41(14,"div",20)(15,"mat-chip")(16,"mat-icon",21),t.EFF(17),t.k0s(),t.EFF(18),t.k0s()()(),t.j41(19,"div",22),t.DNE(20,nt,2,2,"div",23),t.DNE(21,et,5,0,"div",24),t.DNE(22,ot,5,1,"div",25),t.k0s(),t.j41(23,"div",26)(24,"button",9),t.bIt("click",function(){const a=t.eBV(n).$implicit,s=t.XpG(2);return t.Njj(s.downloadDocument(a))}),t.j41(25,"mat-icon"),t.EFF(26,"download"),t.k0s(),t.EFF(27," Download "),t.k0s(),t.j41(28,"button",27),t.bIt("click",function(){const a=t.eBV(n).$implicit,s=t.XpG(2);return t.Njj(s.viewFullDocument(a))}),t.j41(29,"mat-icon"),t.EFF(30,"visibility"),t.k0s(),t.EFF(31," View "),t.k0s(),t.DNE(32,rt,9,0,"div",28),t.k0s(),t.DNE(33,at,8,6,"div",29),t.k0s()}if(2&o){const n=i.$implicit,e=t.XpG(2);t.R7$(4),t.JRh(e.getDocumentDisplayName(n.documentType)),t.R7$(2),t.JRh(n.originalFilename),t.R7$(3),t.JRh(e.formatFileSize(n.fileSize)),t.R7$(2),t.JRh(t.i5U(12,14,n.createdAt,"dd/MM/yyyy HH:mm")),t.R7$(2),t.Y8G("ngIf",n.licenseNumber||n.vehicleNumber),t.R7$(2),t.HbH("status-chip status-"+n.verificationStatus.toLowerCase()),t.R7$(2),t.JRh(e.getStatusIcon(n.verificationStatus)),t.R7$(1),t.SpI(" ",n.verificationStatus," "),t.R7$(2),t.Y8G("ngIf",e.isImageFile(n.fileType)),t.R7$(1),t.Y8G("ngIf",e.isPdfFile(n.fileType)),t.R7$(1),t.Y8G("ngIf",!e.isImageFile(n.fileType)&&!e.isPdfFile(n.fileType)),t.R7$(10),t.Y8G("ngIf",e.data.isAdmin&&"PENDING"===n.verificationStatus),t.R7$(1),t.Y8G("ngIf",n.verificationNotes)}}function st(o,i){if(1&o&&(t.j41(0,"div",10),t.DNE(1,it,34,17,"div",11),t.k0s()),2&o){const n=t.XpG();t.R7$(1),t.Y8G("ngForOf",n.documents)}}function ct(o,i){if(1&o){const n=t.RV6();t.j41(0,"div",41)(1,"mat-icon"),t.EFF(2,"folder_open"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No Documents Found"),t.k0s(),t.j41(5,"p"),t.EFF(6,"This delivery partner hasn't uploaded any documents yet."),t.k0s(),t.j41(7,"button",9),t.bIt("click",function(){t.eBV(n);const r=t.XpG();return t.Njj(r.closeDialog("manage"))}),t.j41(8,"mat-icon"),t.EFF(9,"upload_file"),t.k0s(),t.EFF(10," Manage Documents "),t.k0s()()}}function lt(o,i){if(1&o&&(t.j41(0,"div",42)(1,"h4"),t.EFF(2,"Document Summary"),t.k0s(),t.j41(3,"div",43)(4,"div",44)(5,"span",45),t.EFF(6),t.k0s(),t.j41(7,"span",46),t.EFF(8,"Total Documents"),t.k0s()(),t.j41(9,"div",44)(10,"span",45),t.EFF(11),t.k0s(),t.j41(12,"span",46),t.EFF(13,"Verified"),t.k0s()(),t.j41(14,"div",44)(15,"span",45),t.EFF(16),t.k0s(),t.j41(17,"span",46),t.EFF(18,"Pending"),t.k0s()(),t.j41(19,"div",44)(20,"span",45),t.EFF(21),t.k0s(),t.j41(22,"span",46),t.EFF(23,"Rejected"),t.k0s()()(),t.j41(24,"div",47)(25,"div",48)(26,"span"),t.EFF(27),t.k0s(),t.nrm(28,"mat-progress-bar",49),t.k0s()()()),2&o){const n=t.XpG();t.R7$(6),t.JRh(n.documents.length),t.R7$(5),t.JRh(n.getVerifiedCount()),t.R7$(5),t.JRh(n.getPendingCount()),t.R7$(5),t.JRh(n.getRejectedCount()),t.R7$(6),t.SpI("Verification Progress: ",n.getVerificationPercentage(),"%"),t.R7$(1),t.Y8G("value",n.getVerificationPercentage())}}let dt=(()=>{class o{constructor(n,e,r,a){this.dialogRef=n,this.data=e,this.deliveryPartnerService=r,this.snackBar=a,this.documents=[]}ngOnInit(){this.documents=this.data.documents||[]}closeDialog(n){this.dialogRef.close(n)}refreshDocuments(){this.deliveryPartnerService.getPartnerDocuments(this.data.partnerId).subscribe({next:n=>{this.documents=n.data||[],this.snackBar.open("Documents refreshed successfully","Close",{duration:2e3})},error:n=>{console.error("Error refreshing documents:",n),this.snackBar.open("Error refreshing documents","Close",{duration:3e3})}})}downloadDocument(n){this.deliveryPartnerService.downloadPartnerDocument(this.data.partnerId,n.id).subscribe({next:e=>{const r=window.URL.createObjectURL(e),a=window.document.createElement("a");a.href=r,a.download=n.originalFilename,a.click(),window.URL.revokeObjectURL(r)},error:e=>{console.error("Error downloading document:",e),this.snackBar.open("Error downloading document","Close",{duration:3e3})}})}viewFullDocument(n){if(this.isImageFile(n.fileType))this.openFullImage(n);else{const e=this.getFullImageUrl(n);window.open(e,"_blank")}}openFullImage(n){B().fire({imageUrl:this.getFullImageUrl(n),imageAlt:n.documentName,showConfirmButton:!1,showCloseButton:!0,width:"auto",customClass:{image:"swal-image-full"}})}verifyDocument(n,e){if(!this.data.isAdmin)return;const r="VERIFIED"===e,a=r?"approve":"reject",s=e;B().fire({title:(r?"Approve":"Reject")+" Document",text:`Are you sure you want to ${a} this ${this.getDocumentDisplayName(n.documentType)}?`,input:"textarea",inputPlaceholder:`Enter notes for ${a}ing this document...`,showCancelButton:!0,confirmButtonText:r?"Approve":"Reject",confirmButtonColor:r?"#4caf50":"#f44336",cancelButtonText:"Cancel"}).then(c=>{c.isConfirmed&&this.deliveryPartnerService.verifyPartnerDocument(this.data.partnerId,n.id,s,c.value||void 0).subscribe({next:u=>{const J=this.documents.findIndex(yn=>yn.id===n.id);-1!==J&&(this.documents[J]=u.data),this.snackBar.open(`Document ${a}ed successfully`,"Close",{duration:3e3})},error:u=>{console.error(`Error ${a}ing document:`,u),this.snackBar.open(`Error ${a}ing document`,"Close",{duration:3e3})}})})}getDocumentDisplayName(n){return this.deliveryPartnerService.getDocumentDisplayName(n)}isImageFile(n){return!!n&&n.startsWith("image/")}isPdfFile(n){return!!n&&"application/pdf"===n}formatFileSize(n){if(0===n)return"0 Bytes";const a=Math.floor(Math.log(n)/Math.log(1024));return parseFloat((n/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]}getStatusIcon(n){switch(n){case"VERIFIED":return"check_circle";case"REJECTED":return"cancel";case"PENDING":return"schedule";default:return"help"}}getVerifiedCount(){return this.documents.filter(n=>"VERIFIED"===n.verificationStatus).length}getPendingCount(){return this.documents.filter(n=>"PENDING"===n.verificationStatus).length}getRejectedCount(){return this.documents.filter(n=>"REJECTED"===n.verificationStatus).length}getVerificationPercentage(){return 0===this.documents.length?0:Math.round(this.getVerifiedCount()/this.documents.length*100)}getFullImageUrl(n){return n.downloadUrl?n.downloadUrl.startsWith("http")?n.downloadUrl:L.c.apiUrl+n.downloadUrl:""}static{this.\u0275fac=function(e){return new(e||o)(t.rXU(D.CP),t.rXU(D.Vh),t.rXU(S.WS),t.rXU(w.UG))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-delivery-partner-document-viewer"]],decls:18,vars:4,consts:[[1,"document-viewer-container"],[1,"dialog-header"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"dialog-content"],["class","documents-grid",4,"ngIf"],["class","no-documents",4,"ngIf"],["class","document-summary",4,"ngIf"],[1,"dialog-actions"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"],[1,"documents-grid"],["class","document-card",4,"ngFor","ngForOf"],[1,"document-card"],[1,"document-header"],[1,"document-info"],[1,"document-filename"],[1,"document-meta"],[1,"file-size"],[1,"upload-date"],["class","metadata",4,"ngIf"],[1,"verification-status"],[1,"status-icon"],[1,"document-preview"],["class","image-preview",4,"ngIf"],["class","pdf-preview",4,"ngIf"],["class","other-file-preview",4,"ngIf"],[1,"document-actions"],["mat-raised-button","","color","accent",3,"click"],["class","admin-actions",4,"ngIf"],["class","verification-notes",4,"ngIf"],[1,"metadata"],["class","metadata-item",4,"ngIf"],[1,"metadata-item"],[1,"image-preview"],[1,"preview-image",3,"src","alt","click"],[1,"pdf-preview"],[1,"file-icon"],[1,"other-file-preview"],[1,"admin-actions"],["mat-raised-button","","color","warn",3,"click"],[1,"verification-notes"],[1,"no-documents"],[1,"document-summary"],[1,"summary-stats"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],[1,"completion-status"],[1,"progress-info"],["mode","determinate",3,"value"]],template:function(e,r){1&e&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return r.closeDialog()}),t.j41(5,"mat-icon"),t.EFF(6,"close"),t.k0s()()(),t.j41(7,"div",3),t.DNE(8,st,2,1,"div",4),t.DNE(9,ct,11,0,"div",5),t.k0s(),t.DNE(10,lt,29,6,"div",6),t.j41(11,"div",7)(12,"button",8),t.bIt("click",function(){return r.closeDialog()}),t.EFF(13,"Close"),t.k0s(),t.j41(14,"button",9),t.bIt("click",function(){return r.refreshDocuments()}),t.j41(15,"mat-icon"),t.EFF(16,"refresh"),t.k0s(),t.EFF(17," Refresh "),t.k0s()()()),2&e&&(t.R7$(3),t.SpI("\u{1f4c4} ",r.data.partnerName," - Documents"),t.R7$(5),t.Y8G("ngIf",r.documents.length>0),t.R7$(1),t.Y8G("ngIf",0===r.documents.length),t.R7$(1),t.Y8G("ngIf",r.documents.length>0))},dependencies:[f.Sq,f.bT,O.$z,O.iY,k.An,F.Jl,K.HM,f.vh],styles:[".document-viewer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-height:80vh}.dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:20px 24px;border-bottom:1px solid #e0e0e0;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;margin:-24px -24px 0}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600}.close-btn[_ngcontent-%COMP%]{color:#fff}.dialog-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px 0}.documents-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:20px;margin-bottom:20px}.document-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:12px;padding:16px;background:white;box-shadow:0 2px 8px #0000001a;transition:all .3s ease}.document-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #00000026;transform:translateY(-2px)}.document-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px}.document-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;color:#333;font-size:16px;font-weight:600}.document-filename[_ngcontent-%COMP%]{margin:0 0 8px;color:#666;font-size:12px;word-break:break-all}.document-meta[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:11px;color:#999}.metadata[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;margin-top:8px}.metadata-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:12px;color:#666}.metadata-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.verification-status[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{font-size:11px;height:24px;padding:0 8px}.status-chip.status-verified[_ngcontent-%COMP%]{background:#e8f5e8;color:#2e7d32}.status-chip.status-pending[_ngcontent-%COMP%]{background:#fff3e0;color:#f57c00}.status-chip.status-rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.status-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;margin-right:4px}.document-preview[_ngcontent-%COMP%]{margin-bottom:16px;text-align:center;min-height:120px;display:flex;align-items:center;justify-content:center;background:#f8f9fa;border-radius:8px}.preview-image[_ngcontent-%COMP%]{max-width:100%;max-height:120px;border-radius:4px;cursor:pointer;transition:transform .3s ease}.preview-image[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.pdf-preview[_ngcontent-%COMP%], .other-file-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;color:#666}.file-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#999}.document-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.admin-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-left:auto}.verification-notes[_ngcontent-%COMP%]{margin-top:16px;padding:12px;background:#f8f9fa;border-radius:8px;border-left:4px solid #1976d2}.verification-notes[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 8px;color:#333;font-size:14px;font-weight:600}.verification-notes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;color:#666;font-size:14px}.verification-notes[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#999;font-size:12px}.no-documents[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.no-documents[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;color:#ccc}.document-summary[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding:20px 0;margin-top:20px}.summary-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:16px;margin-bottom:16px}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:12px;background:#f8f9fa;border-radius:8px}.stat-value[_ngcontent-%COMP%]{display:block;font-size:24px;font-weight:600;color:#1976d2}.stat-label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#666;margin-top:4px}.completion-status[_ngcontent-%COMP%]{margin-top:16px}.progress-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.progress-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;color:#333}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding-top:20px;border-top:1px solid #e0e0e0}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:100px}"]})}}return o})();var v=l(1626),m=l(6354),_=l(9437),p=l(8810),d=l(3904);let $=(()=>{class o{constructor(n){this.http=n,this.apiUrl=`${L.c.apiUrl}/users`}getAllUsers(n=0,e=10,r="firstName",a="asc"){const s=(new v.Nl).set("page",n.toString()).set("size",e.toString()).set("sortBy",r).set("sortDirection",a);return this.http.get(this.apiUrl,{params:s}).pipe((0,m.T)(c=>{if(d.c.isError(c))throw new Error(d.c.getErrorMessage(c));const u=c.data;return{content:u.content||u.items||[],totalElements:u.totalItems||u.totalElements||0,totalPages:u.totalPages||0,size:u.pageSize||u.size||e,number:u.currentPage||u.number||n}}),(0,_.W)(c=>(0,p.$)(()=>c)))}getUserById(n){return this.http.get(`${this.apiUrl}/${n}`).pipe((0,m.T)(e=>{if(d.c.isError(e))throw new Error(d.c.getErrorMessage(e));return e.data}),(0,_.W)(e=>(0,p.$)(()=>e)))}getUserByUsername(n){return this.http.get(`${this.apiUrl}/username/${n}`).pipe((0,m.T)(e=>{if(d.c.isError(e))throw new Error(d.c.getErrorMessage(e));return e.data}),(0,_.W)(e=>(0,p.$)(()=>e)))}getUserByEmail(n){return this.http.get(`${this.apiUrl}/email/${n}`).pipe((0,m.T)(e=>{if(d.c.isError(e))throw new Error(d.c.getErrorMessage(e));return e.data}),(0,_.W)(e=>(0,p.$)(()=>e)))}createUser(n){return this.http.post(this.apiUrl,n).pipe((0,m.T)(e=>{if(d.c.isError(e))throw new Error(d.c.getErrorMessage(e));return e.data}),(0,_.W)(e=>(0,p.$)(()=>e)))}updateUser(n,e){return this.http.put(`${this.apiUrl}/${n}`,e).pipe((0,m.T)(r=>{if(d.c.isError(r))throw new Error(d.c.getErrorMessage(r));return r.data}),(0,_.W)(r=>(0,p.$)(()=>r)))}deleteUser(n){return this.http.delete(`${this.apiUrl}/${n}`).pipe((0,m.T)(e=>{if(d.c.isError(e))throw new Error(d.c.getErrorMessage(e));return e.data}),(0,_.W)(e=>(0,p.$)(()=>e)))}toggleUserStatus(n){return this.http.put(`${this.apiUrl}/${n}/toggle-status`,{}).pipe((0,m.T)(e=>{if(d.c.isError(e))throw new Error(d.c.getErrorMessage(e));return e.data}),(0,_.W)(e=>(0,p.$)(()=>e)))}lockUser(n,e){const r=(new v.Nl).set("reason",e);return this.http.put(`${this.apiUrl}/${n}/lock`,{},{params:r}).pipe((0,m.T)(a=>{if(d.c.isError(a))throw new Error(d.c.getErrorMessage(a));return a.data}),(0,_.W)(a=>(0,p.$)(()=>a)))}unlockUser(n){return this.http.put(`${this.apiUrl}/${n}/unlock`,{}).pipe((0,m.T)(e=>{if(d.c.isError(e))throw new Error(d.c.getErrorMessage(e));return e.data}),(0,_.W)(e=>(0,p.$)(()=>e)))}resetPassword(n){return this.http.post(`${this.apiUrl}/${n}/reset-password`,{}).pipe((0,m.T)(e=>{if(d.c.isError(e))throw new Error(d.c.getErrorMessage(e));return e.data}),(0,_.W)(e=>(0,p.$)(()=>e)))}getUsersByRole(n,e=0,r=10){const a=(new v.Nl).set("page",e.toString()).set("size",r.toString());return this.http.get(`${this.apiUrl}/role/${n}`,{params:a}).pipe((0,m.T)(s=>{if(d.c.isError(s))throw new Error(d.c.getErrorMessage(s));const c=s.data;return{content:c.content||c.items||[],totalElements:c.totalItems||c.totalElements||0,totalPages:c.totalPages||0,size:c.pageSize||c.size||r,number:c.currentPage||c.number||e}}),(0,_.W)(s=>(0,p.$)(()=>s)))}getUsersByStatus(n,e=0,r=10){const a=(new v.Nl).set("page",e.toString()).set("size",r.toString());return this.http.get(`${this.apiUrl}/status/${n}`,{params:a}).pipe((0,m.T)(s=>{if(d.c.isError(s))throw new Error(d.c.getErrorMessage(s));const c=s.data;return{content:c.content||c.items||[],totalElements:c.totalItems||c.totalElements||0,totalPages:c.totalPages||0,size:c.pageSize||c.size||r,number:c.currentPage||c.number||e}}),(0,_.W)(s=>(0,p.$)(()=>s)))}getUsersByDepartment(n,e=0,r=10){const a=(new v.Nl).set("page",e.toString()).set("size",r.toString());return this.http.get(`${this.apiUrl}/department/${n}`,{params:a}).pipe((0,m.T)(s=>{if(d.c.isError(s))throw new Error(d.c.getErrorMessage(s));const c=s.data;return{content:c.content||c.items||[],totalElements:c.totalItems||c.totalElements||0,totalPages:c.totalPages||0,size:c.pageSize||c.size||r,number:c.currentPage||c.number||e}}),(0,_.W)(s=>(0,p.$)(()=>s)))}searchUsers(n,e=0,r=10){const a=(new v.Nl).set("searchTerm",n).set("page",e.toString()).set("size",r.toString());return this.http.get(`${this.apiUrl}/search`,{params:a}).pipe((0,m.T)(s=>{if(d.c.isError(s))throw new Error(d.c.getErrorMessage(s));const c=s.data;return{content:c.content||c.items||[],totalElements:c.totalItems||c.totalElements||0,totalPages:c.totalPages||0,size:c.pageSize||c.size||r,number:c.currentPage||c.number||e}}),(0,_.W)(s=>(0,p.$)(()=>s)))}getSubordinates(n){return this.http.get(`${this.apiUrl}/${n}/subordinates`).pipe((0,m.T)(e=>{if(d.c.isError(e))throw new Error(d.c.getErrorMessage(e));return e.data.items||e.data||[]}),(0,_.W)(e=>(0,p.$)(()=>e)))}assignDriverToShop(n,e){return this.http.put(`${this.apiUrl}/${n}/assign-shop/${e}`,{}).pipe((0,m.T)(r=>{if(d.c.isError(r))throw new Error(d.c.getErrorMessage(r));return r.data}),(0,_.W)(r=>(0,p.$)(()=>r)))}unassignDriverFromShop(n){return this.http.put(`${this.apiUrl}/${n}/unassign-shop`,{}).pipe((0,m.T)(e=>{if(d.c.isError(e))throw new Error(d.c.getErrorMessage(e));return e.data}),(0,_.W)(e=>(0,p.$)(()=>e)))}getUserRoles(){return this.http.get(`${this.apiUrl}/roles`).pipe((0,m.T)(n=>{if(d.c.isError(n))throw new Error(d.c.getErrorMessage(n));return n.data}),(0,_.W)(n=>(0,p.$)(()=>n)))}static{this.\u0275fac=function(e){return new(e||o)(t.KVO(v.Qq))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Y=l(6600);function gt(o,i){if(1&o&&(t.j41(0,"mat-option",30),t.EFF(1),t.k0s()),2&o){const n=i.$implicit;t.Y8G("value",n.value),t.R7$(1),t.SpI(" ",n.label," ")}}function ut(o,i){if(1&o&&(t.j41(0,"mat-option",30),t.EFF(1),t.k0s()),2&o){const n=i.$implicit;t.Y8G("value",n.value),t.R7$(1),t.SpI(" ",n.label," ")}}function mt(o,i){1&o&&(t.j41(0,"mat-header-cell",31),t.EFF(1,"Name"),t.k0s())}function _t(o,i){if(1&o&&(t.j41(0,"mat-cell")(1,"div",32)(2,"div",33)(3,"mat-icon"),t.EFF(4,"person"),t.k0s()(),t.j41(5,"div",34)(6,"span",35),t.EFF(7),t.k0s(),t.j41(8,"span",36),t.EFF(9),t.k0s()()()()),2&o){const n=i.$implicit;t.R7$(7),t.JRh(n.fullName),t.R7$(2),t.SpI("@",n.username,"")}}function pt(o,i){1&o&&(t.j41(0,"mat-header-cell",31),t.EFF(1,"Email"),t.k0s())}function ft(o,i){1&o&&(t.j41(0,"mat-icon",40),t.EFF(1,"verified"),t.k0s())}function Ct(o,i){if(1&o&&(t.j41(0,"mat-cell")(1,"div",37)(2,"span",38),t.EFF(3),t.k0s(),t.DNE(4,ft,2,0,"mat-icon",39),t.k0s()()),2&o){const n=i.$implicit;t.R7$(3),t.JRh(n.email),t.R7$(1),t.Y8G("ngIf",n.emailVerified)}}function Pt(o,i){1&o&&(t.j41(0,"mat-header-cell",31),t.EFF(1,"Role"),t.k0s())}function Mt(o,i){if(1&o&&(t.j41(0,"mat-cell")(1,"div",41)(2,"span"),t.EFF(3),t.k0s()()()),2&o){const n=i.$implicit,e=t.XpG();t.R7$(2),t.HbH("role-badge role-"+n.role.toLowerCase().replace("_","-")),t.R7$(1),t.SpI(" ",e.getRoleDisplayName(n.role)," ")}}function Ot(o,i){1&o&&(t.j41(0,"mat-header-cell",31),t.EFF(1,"Department"),t.k0s())}function ht(o,i){if(1&o&&(t.j41(0,"span",45),t.EFF(1),t.k0s()),2&o){const n=t.XpG().$implicit;t.R7$(1),t.JRh(n.designation)}}function bt(o,i){if(1&o&&(t.j41(0,"mat-cell")(1,"div",42)(2,"span",43),t.EFF(3),t.k0s(),t.DNE(4,ht,2,1,"span",44),t.k0s()()),2&o){const n=i.$implicit;t.R7$(3),t.JRh(n.department||"Not assigned"),t.R7$(1),t.Y8G("ngIf",n.designation)}}function xt(o,i){1&o&&(t.j41(0,"mat-header-cell",31),t.EFF(1,"Status"),t.k0s())}function vt(o,i){if(1&o&&(t.j41(0,"mat-chip",50)(1,"mat-icon",51),t.EFF(2),t.k0s(),t.j41(3,"span",52),t.EFF(4),t.k0s()()),2&o){const n=t.XpG(2).$implicit,e=t.XpG();t.HbH("status-chip ride-status-"+e.getRideStatusClass(n.rideStatus)),t.Y8G("matTooltip",e.getRideStatusTooltip(n.rideStatus)),t.R7$(2),t.JRh(e.getRideStatusIcon(n.rideStatus)),t.R7$(2),t.JRh(e.getRideStatusDisplay(n.rideStatus))}}function Et(o,i){if(1&o&&(t.j41(0,"div",49)(1,"mat-chip",50)(2,"mat-icon",51),t.EFF(3),t.k0s(),t.j41(4,"span",52),t.EFF(5),t.k0s()(),t.DNE(6,vt,5,5,"mat-chip",53),t.k0s()),2&o){const n=t.XpG().$implicit,e=t.XpG();t.R7$(1),t.HbH("status-chip online-status-"+(n.isOnline?"online":"offline")),t.Y8G("matTooltip",e.getOnlineStatusTooltip(n)),t.R7$(2),t.SpI(" ",n.isOnline?"wifi":"wifi_off"," "),t.R7$(2),t.JRh(n.isOnline?"Online":"Offline"),t.R7$(1),t.Y8G("ngIf",n.isOnline)}}function kt(o,i){if(1&o&&(t.j41(0,"mat-chip",50)(1,"mat-icon",51),t.EFF(2),t.k0s(),t.j41(3,"span",52),t.EFF(4),t.k0s()()),2&o){const n=t.XpG().$implicit,e=t.XpG();t.HbH("status-chip status-"+(n.isActive?"active":"inactive")),t.Y8G("matTooltip",e.getStatusTooltip(n)),t.R7$(2),t.JRh(e.getStatusIcon(n)),t.R7$(2),t.JRh(e.getDisplayStatus(n))}}function Ft(o,i){if(1&o&&(t.j41(0,"mat-cell")(1,"div",46),t.DNE(2,Et,7,6,"div",47),t.DNE(3,kt,5,5,"ng-template",null,48,t.C5r),t.k0s()()),2&o){const n=i.$implicit,e=t.sdS(4);t.R7$(2),t.Y8G("ngIf","DELIVERY_PARTNER"===n.role)("ngIfElse",e)}}function wt(o,i){1&o&&(t.j41(0,"mat-header-cell",31),t.EFF(1,"Last Login"),t.k0s())}function yt(o,i){if(1&o&&(t.j41(0,"span",57),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&o){const n=t.XpG().$implicit;t.R7$(1),t.SpI(" ",t.i5U(2,1,n.lastLogin,"dd/MM/yyyy HH:mm")," ")}}function Dt(o,i){1&o&&(t.j41(0,"span",58),t.EFF(1,"Never logged in"),t.k0s())}function It(o,i){if(1&o&&(t.j41(0,"mat-cell")(1,"div",54),t.DNE(2,yt,3,4,"span",55),t.DNE(3,Dt,2,0,"ng-template",null,56,t.C5r),t.k0s()()),2&o){const n=i.$implicit,e=t.sdS(4);t.R7$(2),t.Y8G("ngIf",n.lastLogin)("ngIfElse",e)}}function Rt(o,i){1&o&&(t.j41(0,"mat-header-cell"),t.EFF(1,"Actions"),t.k0s())}function Nt(o,i){if(1&o){const n=t.RV6();t.j41(0,"button",74),t.bIt("click",function(){t.eBV(n);const r=t.XpG(2).$implicit,a=t.XpG();return t.Njj(a.viewDocuments(r))}),t.j41(1,"mat-icon",75),t.EFF(2,"folder_open"),t.k0s(),t.EFF(3," View Docs "),t.k0s()}}function jt(o,i){if(1&o){const n=t.RV6();t.j41(0,"button",76),t.bIt("click",function(){t.eBV(n);const r=t.XpG(2).$implicit,a=t.XpG();return t.Njj(a.addDocuments(r))}),t.j41(1,"mat-icon",75),t.EFF(2,"add_circle"),t.k0s(),t.EFF(3," Add Docs "),t.k0s()}}function Ut(o,i){if(1&o&&(t.qex(0),t.DNE(1,Nt,4,0,"button",72),t.DNE(2,jt,4,0,"button",73),t.bVm()),2&o){const n=t.XpG().$implicit,e=t.XpG();t.R7$(1),t.Y8G("ngIf",e.hasDocuments(n.id)),t.R7$(1),t.Y8G("ngIf",!e.hasDocuments(n.id))}}function St(o,i){if(1&o){const n=t.RV6();t.qex(0),t.j41(1,"button",77),t.bIt("click",function(){t.eBV(n);const r=t.XpG(2).$implicit,a=t.XpG();return t.Njj(a.viewDocuments(r))}),t.j41(2,"mat-icon",69),t.EFF(3,"folder_open"),t.k0s(),t.j41(4,"span")(5,"strong"),t.EFF(6,"View Documents"),t.k0s()()(),t.j41(7,"button",68),t.bIt("click",function(){t.eBV(n);const r=t.XpG(2).$implicit,a=t.XpG();return t.Njj(a.manageDocuments(r))}),t.j41(8,"mat-icon",78),t.EFF(9,"upload_file"),t.k0s(),t.j41(10,"span"),t.EFF(11,"Manage Documents"),t.k0s()(),t.bVm()}}function $t(o,i){if(1&o){const n=t.RV6();t.qex(0),t.j41(1,"button",77),t.bIt("click",function(){t.eBV(n);const r=t.XpG(2).$implicit,a=t.XpG();return t.Njj(a.addDocuments(r))}),t.j41(2,"mat-icon",78),t.EFF(3,"add_circle"),t.k0s(),t.j41(4,"span")(5,"strong"),t.EFF(6,"Add Documents"),t.k0s()()(),t.j41(7,"button",68),t.bIt("click",function(){t.eBV(n);const r=t.XpG(2).$implicit,a=t.XpG();return t.Njj(a.manageDocuments(r))}),t.j41(8,"mat-icon",69),t.EFF(9,"upload_file"),t.k0s(),t.j41(10,"span"),t.EFF(11,"Upload Documents"),t.k0s()(),t.bVm()}}function Tt(o,i){if(1&o&&(t.qex(0),t.DNE(1,St,12,0,"ng-container",64),t.DNE(2,$t,12,0,"ng-container",64),t.nrm(3,"mat-divider"),t.bVm()),2&o){const n=t.XpG().$implicit,e=t.XpG();t.R7$(1),t.Y8G("ngIf",e.hasDocuments(n.id)),t.R7$(1),t.Y8G("ngIf",!e.hasDocuments(n.id))}}function At(o,i){if(1&o){const n=t.RV6();t.j41(0,"mat-cell")(1,"div",59)(2,"mat-slide-toggle",60),t.bIt("change",function(){const a=t.eBV(n).$implicit,s=t.XpG();return t.Njj(s.toggleUserStatus(a))}),t.k0s(),t.j41(3,"div",61)(4,"button",62),t.bIt("click",function(){const a=t.eBV(n).$implicit,s=t.XpG();return t.Njj(s.viewUser(a))}),t.j41(5,"mat-icon"),t.EFF(6,"visibility"),t.k0s()(),t.j41(7,"button",63),t.bIt("click",function(){const a=t.eBV(n).$implicit,s=t.XpG();return t.Njj(s.editUser(a))}),t.j41(8,"mat-icon"),t.EFF(9,"edit"),t.k0s()(),t.DNE(10,Ut,3,2,"ng-container",64),t.j41(11,"button",65)(12,"mat-icon"),t.EFF(13,"more_vert"),t.k0s()()(),t.j41(14,"mat-menu",66,67),t.DNE(16,Tt,4,2,"ng-container",64),t.j41(17,"button",68),t.bIt("click",function(){const a=t.eBV(n).$implicit,s=t.XpG();return t.Njj(s.resetPassword(a))}),t.j41(18,"mat-icon",69),t.EFF(19,"lock_reset"),t.k0s(),t.j41(20,"span"),t.EFF(21,"Reset Password"),t.k0s()(),t.nrm(22,"mat-divider"),t.j41(23,"button",70),t.bIt("click",function(){const a=t.eBV(n).$implicit,s=t.XpG();return t.Njj(s.deleteUser(a))}),t.j41(24,"mat-icon",71),t.EFF(25,"delete"),t.k0s(),t.j41(26,"span"),t.EFF(27,"Delete User"),t.k0s()()()()()}if(2&o){const n=i.$implicit,e=t.sdS(15);t.R7$(2),t.Y8G("checked",n.isActive)("matTooltip",n.isActive?"User is Active - Click to Deactivate":"User is Inactive - Click to Activate")("color",n.isActive?"primary":"warn"),t.R7$(8),t.Y8G("ngIf","DELIVERY_PARTNER"===n.role),t.R7$(1),t.Y8G("matMenuTriggerFor",e),t.R7$(5),t.Y8G("ngIf","DELIVERY_PARTNER"===n.role)}}function Vt(o,i){1&o&&t.nrm(0,"mat-header-row")}function Gt(o,i){if(1&o){const n=t.RV6();t.j41(0,"mat-row",79),t.bIt("click",function(){const a=t.eBV(n).$implicit,s=t.XpG();return t.Njj(s.viewUser(a))}),t.k0s()}}function Lt(o,i){1&o&&(t.j41(0,"div",80),t.nrm(1,"mat-spinner"),t.j41(2,"p"),t.EFF(3,"Loading users..."),t.k0s()())}function Bt(o,i){1&o&&(t.j41(0,"h3"),t.EFF(1,"No users in the system"),t.k0s())}function Yt(o,i){1&o&&(t.j41(0,"h3"),t.EFF(1,"No users match your filters"),t.k0s())}function Xt(o,i){1&o&&(t.j41(0,"p"),t.EFF(1," Get started by adding your first user to the system. "),t.k0s())}function zt(o,i){1&o&&(t.j41(0,"p"),t.EFF(1,"Try adjusting your search terms or clearing the filters to see more results."),t.k0s())}function Jt(o,i){if(1&o){const n=t.RV6();t.j41(0,"button",90),t.bIt("click",function(){t.eBV(n);const r=t.XpG(2);return t.Njj(r.createUser())}),t.j41(1,"mat-icon"),t.EFF(2,"person_add"),t.k0s(),t.EFF(3," Add First User "),t.k0s()}}function Wt(o,i){if(1&o){const n=t.RV6();t.j41(0,"button",91),t.bIt("click",function(){t.eBV(n);const r=t.XpG(2);return t.Njj(r.clearFilters())}),t.j41(1,"mat-icon"),t.EFF(2,"clear_all"),t.k0s(),t.EFF(3," Clear Filters "),t.k0s()}}function Ht(o,i){if(1&o){const n=t.RV6();t.j41(0,"button",92),t.bIt("click",function(){t.eBV(n);const r=t.XpG(2);return t.Njj(r.createUser())}),t.j41(1,"mat-icon"),t.EFF(2,"person_add"),t.k0s(),t.EFF(3," Add New User "),t.k0s()}}function qt(o,i){if(1&o&&(t.j41(0,"div",81)(1,"mat-icon"),t.EFF(2,"people_outline"),t.k0s(),t.j41(3,"div",82),t.DNE(4,Bt,2,0,"h3",83),t.DNE(5,Yt,2,0,"ng-template",null,84,t.C5r),t.DNE(7,Xt,2,0,"p",83),t.DNE(8,zt,2,0,"ng-template",null,85,t.C5r),t.j41(10,"div",86),t.DNE(11,Jt,4,0,"button",87),t.DNE(12,Wt,4,0,"button",88),t.DNE(13,Ht,4,0,"button",89),t.k0s()()()),2&o){const n=t.sdS(6),e=t.sdS(9),r=t.XpG();t.R7$(4),t.Y8G("ngIf",0===r.originalData.length)("ngIfElse",n),t.R7$(3),t.Y8G("ngIf",0===r.originalData.length)("ngIfElse",e),t.R7$(4),t.Y8G("ngIf",0===r.originalData.length),t.R7$(1),t.Y8G("ngIf",r.originalData.length>0),t.R7$(1),t.Y8G("ngIf",r.originalData.length>0)}}const Kt=function(){return[5,10,25,100]};let E=(()=>{class o{constructor(n,e,r,a,s,c){this.userService=n,this.snackBar=e,this.router=r,this.route=a,this.dialog=s,this.deliveryPartnerService=c,this.displayedColumns=["fullName","email","role","department","status","lastLogin","actions"],this.dataSource=new C.I6,this.originalData=[],this.loading=!1,this.searchText="",this.roleFilter="",this.statusFilter="",this.documentStatus=new Map,this.roleOptions=[{value:"",label:"All Roles"},{value:"SUPER_ADMIN",label:"Super Admin"},{value:"ADMIN",label:"Admin"},{value:"SHOP_OWNER",label:"Shop Owner"},{value:"MANAGER",label:"Manager"},{value:"EMPLOYEE",label:"Employee"},{value:"CUSTOMER_SERVICE",label:"Customer Service"},{value:"DELIVERY_PARTNER",label:"Delivery Partner"},{value:"USER",label:"User"}],this.statusOptions=[{value:"",label:"All Statuses"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"SUSPENDED",label:"Suspended"},{value:"PENDING_VERIFICATION",label:"Pending Verification"}]}ngOnInit(){const n=this.route.snapshot.data.role;n&&(this.roleFilter=n),this.loadUsers()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}loadUsers(){this.loading=!0,(this.roleFilter?this.userService.getUsersByRole(this.roleFilter,0,100):this.userService.getAllUsers(0,100)).subscribe({next:e=>{console.log("\u2705 Users API SUCCESS:",e),console.log("Real API Users data:",e.content),this.originalData=e.content,this.dataSource.data=[...this.originalData],this.checkDocumentStatusForDeliveryPartners(),this.loading=!1,this.snackBar.open(`\u2705 Loaded ${this.roleFilter?`${this.roleFilter} users`:"all users"} successfully!`,"Close",{duration:3e3})},error:e=>{console.error("\u274c Error loading users from API:",e),console.log("\u{1f504} Falling back to mock data..."),this.loadMockData(),this.loading=!1}})}loadMockData(){const n=[{id:1,username:"superadmin",email:"admin@nammaooru.com",firstName:"Super",lastName:"Admin",fullName:"Super Admin",role:"SUPER_ADMIN",status:"ACTIVE",department:"Administration",designation:"System Administrator",isActive:!0,emailVerified:!0,lastLogin:new Date(Date.now()-72e5).toISOString(),createdAt:new Date(Date.now()-31536e6).toISOString()},{id:2,username:"adminuser",email:"admin@management.com",firstName:"Admin",lastName:"User",fullName:"Admin User",role:"ADMIN",status:"ACTIVE",department:"Management",designation:"Platform Administrator",isActive:!0,emailVerified:!0,lastLogin:new Date(Date.now()-864e5).toISOString(),createdAt:new Date(Date.now()-15552e6).toISOString()},{id:3,username:"rajeshkumar",email:"rajesh@annamalai.com",firstName:"Rajesh",lastName:"Kumar",fullName:"Rajesh Kumar",role:"SHOP_OWNER",status:"ACTIVE",department:"Operations",designation:"Shop Owner",isActive:!0,emailVerified:!0,lastLogin:new Date(Date.now()-108e5).toISOString(),createdAt:new Date(Date.now()-3888e6).toISOString()},{id:4,username:"priyasharma",email:"priya@example.com",firstName:"Priya",lastName:"Sharma",fullName:"Priya Sharma",role:"USER",status:"ACTIVE",department:"Customer",designation:"Customer",isActive:!0,emailVerified:!0,lastLogin:new Date(Date.now()-18e5).toISOString(),createdAt:new Date(Date.now()-1296e6).toISOString()},{id:5,username:"csmanager",email:"support@nammaooru.com",firstName:"Customer",lastName:"Support",fullName:"Customer Support Manager",role:"CUSTOMER_SERVICE",status:"ACTIVE",department:"Customer Service",designation:"Support Manager",isActive:!0,emailVerified:!0,lastLogin:new Date(Date.now()-144e5).toISOString(),createdAt:new Date(Date.now()-7776e6).toISOString()},{id:6,username:"deliveryboy1",email:"delivery1@nammaooru.com",firstName:"Ravi",lastName:"Delivery",fullName:"Ravi Delivery",role:"DELIVERY_PARTNER",status:"ACTIVE",department:"Logistics",designation:"Delivery Partner",isActive:!0,emailVerified:!0,lastLogin:new Date(Date.now()-36e5).toISOString(),createdAt:new Date(Date.now()-2592e6).toISOString()},{id:7,username:"opsmanager",email:"ops@nammaooru.com",firstName:"Operations",lastName:"Manager",fullName:"Operations Manager",role:"MANAGER",status:"ACTIVE",department:"Operations",designation:"Operations Manager",isActive:!0,emailVerified:!0,lastLogin:new Date(Date.now()-216e5).toISOString(),createdAt:new Date(Date.now()-10368e6).toISOString()},{id:8,username:"employee1",email:"emp1@nammaooru.com",firstName:"John",lastName:"Employee",fullName:"John Employee",role:"EMPLOYEE",status:"ACTIVE",department:"Operations",designation:"Operations Executive",isActive:!0,emailVerified:!0,lastLogin:new Date(Date.now()-288e5).toISOString(),createdAt:new Date(Date.now()-5184e6).toISOString()},{id:9,username:"inactiveuser",email:"inactive@example.com",firstName:"Inactive",lastName:"User",fullName:"Inactive User",role:"USER",status:"INACTIVE",department:"Customer",designation:"Customer",isActive:!1,emailVerified:!1,lastLogin:new Date(Date.now()-2592e6).toISOString(),createdAt:new Date(Date.now()-7776e6).toISOString()},{id:10,username:"pendinguser",email:"pending@example.com",firstName:"Pending",lastName:"Verification",fullName:"Pending Verification",role:"USER",status:"PENDING_VERIFICATION",department:"Customer",designation:"Customer",isActive:!1,emailVerified:!1,lastLogin:"",createdAt:new Date(Date.now()-864e5).toISOString()}];this.originalData=n,this.dataSource.data=[...this.originalData],this.snackBar.open("Loaded mock user data - API not available","Close",{duration:3e3})}applyFilter(){let n=[...this.originalData];if(this.searchText&&this.searchText.trim()){const e=this.searchText.toLowerCase().trim();n=n.filter(r=>r.fullName&&r.fullName.toLowerCase().includes(e)||r.email&&r.email.toLowerCase().includes(e)||r.username&&r.username.toLowerCase().includes(e)||r.department&&r.department.toLowerCase().includes(e)||r.designation&&r.designation.toLowerCase().includes(e))}this.roleFilter&&(n=n.filter(e=>e.role===this.roleFilter)),this.statusFilter&&(n=n.filter(e=>(e.isActive?e.status||"ACTIVE":"INACTIVE")===this.statusFilter)),this.dataSource.data=n,this.paginator&&this.paginator.firstPage()}clearFilters(){this.searchText="",this.roleFilter="",this.statusFilter="",this.dataSource.data=[...this.originalData],this.paginator&&this.paginator.firstPage(),this.snackBar.open("Filters cleared","Close",{duration:2e3})}createUser(){this.router.navigate(["/users/new"])}viewUser(n){console.log("Viewing user:",n),console.log("User ID:",n.id,"Type:",typeof n.id),n.id?this.router.navigate(["/users",n.id]):(console.error("User ID is missing or invalid:",n),this.snackBar.open("Invalid user ID","Close",{duration:3e3}))}editUser(n){this.router.navigate(["/users",n.id,"edit"])}toggleUserStatus(n){const e=n.isActive?"deactivate":"activate";confirm(`Are you sure you want to ${e} ${n.fullName}?`)&&this.userService.toggleUserStatus(n.id).subscribe({next:a=>{const s=this.originalData.findIndex(u=>u.id===n.id);-1!==s&&(this.originalData[s]=a);const c=this.dataSource.data.findIndex(u=>u.id===n.id);-1!==c&&(this.dataSource.data[c]=a,this.dataSource.data=[...this.dataSource.data]),this.snackBar.open(`User ${n.fullName} ${e}d successfully`,"Close",{duration:3e3})},error:a=>{console.error("Error toggling user status:",a),this.snackBar.open(`Error ${e}ing user`,"Close",{duration:3e3})}})}resetPassword(n){confirm(`Reset password for ${n.fullName}?`)&&this.userService.resetPassword(n.id).subscribe({next:()=>{this.snackBar.open("Password reset email sent successfully","Close",{duration:3e3})},error:e=>{console.error("Error resetting password:",e),this.snackBar.open("Error resetting password","Close",{duration:3e3})}})}deleteUser(n){confirm(`Are you sure you want to delete ${n.fullName}?`)&&this.userService.deleteUser(n.id).subscribe({next:()=>{this.snackBar.open("User deleted successfully","Close",{duration:3e3}),this.loadUsers()},error:e=>{console.error("Error deleting user:",e),this.snackBar.open("Error deleting user","Close",{duration:3e3})}})}getRoleColor(n){switch(n){case"SUPER_ADMIN":return"warn";case"ADMIN":case"MANAGER":return"primary";case"SHOP_OWNER":return"accent";default:return""}}getStatusColor(n){switch(n){case"ACTIVE":return"primary";case"INACTIVE":case"SUSPENDED":return"warn";case"PENDING_VERIFICATION":return"accent";default:return""}}getPageTitle(){if(!this.roleFilter)return"User Management";switch(this.roleFilter){case"ADMIN":return"Admin Users";case"MANAGER":return"Manager Users";case"SHOP_OWNER":return"Shop Owner Users";case"DELIVERY_PARTNER":return"Delivery Partners";case"USER":return"Customer Users";default:return"User Management"}}getActualStatus(n){return n.isActive?n.status||"ACTIVE":"INACTIVE"}getActualStatusColor(n){switch(this.getActualStatus(n)){case"ACTIVE":return"primary";case"INACTIVE":case"SUSPENDED":return"warn";case"PENDING_VERIFICATION":return"accent";default:return""}}getStatusIcon(n){return n.isActive?"check_circle":"cancel"}getStatusIconColor(n){return n.isActive?"primary":"warn"}getDisplayStatus(n){return n.isActive?"ACTIVE"===n.status?"Active":(n.status||"Active").replace("_"," "):"Inactive"}getStatusTooltip(n){return n.isActive?"SUSPENDED"===n.status?"User account is suspended":"PENDING_VERIFICATION"===n.status?"User account is pending email verification":"User account is active and operational":"User account is deactivated"}getRoleDisplayName(n){switch(n){case"SUPER_ADMIN":return"Super Admin";case"ADMIN":return"Admin";case"SHOP_OWNER":return"Shop Owner";case"MANAGER":return"Manager";case"EMPLOYEE":return"Employee";case"CUSTOMER_SERVICE":return"Customer Service";case"DELIVERY_PARTNER":return"Delivery Partner";case"USER":return"Customer";default:return n.replace("_"," ")}}getOnlineStatusTooltip(n){const e=n.lastActivity?new Date(n.lastActivity).toLocaleString():"Never";return n.isOnline?`Partner is online. Last activity: ${e}`:`Partner is offline. Last activity: ${e}`}getRideStatusClass(n){switch(n){case"AVAILABLE":return"available";case"ON_RIDE":return"on-ride";case"BUSY":return"busy";case"ON_BREAK":return"on-break";case"OFFLINE":return"offline";default:return"unknown"}}getRideStatusIcon(n){switch(n){case"AVAILABLE":return"check_circle";case"ON_RIDE":return"directions_bike";case"BUSY":return"hourglass_empty";case"ON_BREAK":return"coffee";case"OFFLINE":return"offline_pin";default:return"help_outline"}}getRideStatusDisplay(n){switch(n){case"AVAILABLE":return"Available";case"ON_RIDE":return"On Ride";case"BUSY":return"Busy";case"ON_BREAK":return"On Break";case"OFFLINE":return"Offline";default:return"Unknown"}}getRideStatusTooltip(n){switch(n){case"AVAILABLE":return"Partner is available for new deliveries";case"ON_RIDE":return"Partner is currently on a delivery";case"BUSY":return"Partner is busy and cannot take new orders";case"ON_BREAK":return"Partner is on a break";case"OFFLINE":return"Partner is offline";default:return"Status unknown"}}viewDocuments(n){"DELIVERY_PARTNER"===n.role?this.router.navigate(["/delivery/documents/view",n.id,n.fullName]):this.snackBar.open("Document viewing is only available for delivery partners","Close",{duration:3e3})}manageDocuments(n){"DELIVERY_PARTNER"===n.role?this.router.navigate(["/users",n.id,"documents"]):this.snackBar.open("Document management is only available for delivery partners","Close",{duration:3e3})}checkDocumentStatusForDeliveryPartners(){this.originalData.filter(e=>"DELIVERY_PARTNER"===e.role).forEach(e=>{this.deliveryPartnerService.getPartnerDocuments(e.id).subscribe({next:r=>{this.documentStatus.set(e.id,r.data&&r.data.length>0)},error:r=>{console.error(`Error checking documents for partner ${e.id}:`,r),this.documentStatus.set(e.id,!1)}})})}hasDocuments(n){return this.documentStatus.get(n)||!1}addDocuments(n){"DELIVERY_PARTNER"===n.role?this.router.navigate(["/users",n.id,"documents"]):this.snackBar.open("Document upload is only available for delivery partners","Close",{duration:3e3})}openDocumentViewerDialog(n){this.deliveryPartnerService.getPartnerDocuments(n.id).subscribe({next:e=>{e.data&&e.data.length>0?this.dialog.open(dt,{width:"90%",maxWidth:"1200px",height:"80vh",data:{partnerId:n.id,partnerName:n.fullName,documents:e.data,isAdmin:!0}}).afterClosed().subscribe(a=>{"refresh"===a&&this.loadUsers()}):this.snackBar.open(`No documents found for ${n.fullName}. Use "Manage Documents" to upload.`,"Close",{duration:5e3})},error:e=>{console.error("Error loading partner documents:",e),this.snackBar.open("Error loading documents. Please try again.","Close",{duration:3e3})}})}static{this.\u0275fac=function(e){return new(e||o)(t.rXU($),t.rXU(w.UG),t.rXU(h.Ix),t.rXU(h.nX),t.rXU(D.bZ),t.rXU(S.WS))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-user-list"]],viewQuery:function(e,r){if(1&e&&(t.GBs(R.iy,5),t.GBs(y.B4,5)),2&e){let a;t.mGM(a=t.lsd())&&(r.paginator=a.first),t.mGM(a=t.lsd())&&(r.sort=a.first)}},decls:58,vars:13,consts:[[1,"users-container"],[1,"header-section"],[1,"title-section"],["mat-raised-button","","color","primary",1,"create-btn",3,"click"],[1,"filters-section"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Name, email, username...",3,"ngModel","ngModelChange","keyup"],["matSuffix",""],["appearance","outline",1,"role-filter"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"status-filter"],["mat-raised-button","","color","primary",1,"clear-btn",3,"click"],[1,"table-container"],["matSort","",1,"users-table",3,"dataSource"],["matColumnDef","fullName"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","email"],["matColumnDef","role"],["matColumnDef","department"],["matColumnDef","status"],["matColumnDef","lastLogin"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef"],["class","user-row",3,"click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["class","loading-container",4,"ngIf"],["class","no-data",4,"ngIf"],[3,"value"],["mat-sort-header",""],[1,"user-info"],[1,"user-avatar"],[1,"user-details"],[1,"user-name"],[1,"username"],[1,"email-info"],[1,"email"],["class","verified-icon","color","primary","matTooltip","Email verified",4,"ngIf"],["color","primary","matTooltip","Email verified",1,"verified-icon"],[1,"role-container"],[1,"department-info"],[1,"department"],["class","designation",4,"ngIf"],[1,"designation"],[1,"status-container"],["class","delivery-status",4,"ngIf","ngIfElse"],["generalStatus",""],[1,"delivery-status"],[3,"matTooltip"],[1,"status-icon"],[1,"status-text"],[3,"class","matTooltip",4,"ngIf"],[1,"last-login-container"],["class","last-login",4,"ngIf","ngIfElse"],["noLoginTemplate",""],[1,"last-login"],[1,"no-login"],[1,"actions-container"],[1,"status-toggle",3,"checked","matTooltip","color","change"],[1,"action-buttons"],["mat-icon-button","","matTooltip","View Details","color","primary",1,"action-btn","view-btn",3,"click"],["mat-icon-button","","matTooltip","Edit User","color","accent",1,"action-btn","edit-btn",3,"click"],[4,"ngIf"],["mat-icon-button","","matTooltip","More Actions",1,"action-btn","more-btn",3,"matMenuTriggerFor"],[1,"user-actions-menu"],["menu","matMenu"],["mat-menu-item","",3,"click"],["color","primary"],["mat-menu-item","",1,"delete-action",3,"click"],["color","warn"],["mat-raised-button","","matTooltip","View Uploaded Documents","color","primary","class","action-btn view-doc-btn","style","margin-right: 4px; font-size: 11px;",3,"click",4,"ngIf"],["mat-raised-button","","matTooltip","Add Documents","color","accent","class","action-btn add-doc-btn","style","margin-right: 4px; font-size: 11px;",3,"click",4,"ngIf"],["mat-raised-button","","matTooltip","View Uploaded Documents","color","primary",1,"action-btn","view-doc-btn",2,"margin-right","4px","font-size","11px",3,"click"],[2,"font-size","16px"],["mat-raised-button","","matTooltip","Add Documents","color","accent",1,"action-btn","add-doc-btn",2,"margin-right","4px","font-size","11px",3,"click"],["mat-menu-item","",1,"primary-menu-item",3,"click"],["color","accent"],[1,"user-row",3,"click"],[1,"loading-container"],[1,"no-data"],[1,"no-data-content"],[4,"ngIf","ngIfElse"],["filteredEmpty",""],["filteredMessage",""],[1,"no-data-actions"],["mat-raised-button","","color","primary","class","add-first-btn",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary","class","clear-filters-btn",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","class","add-user-btn",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",1,"add-first-btn",3,"click"],["mat-stroked-button","","color","primary",1,"clear-filters-btn",3,"click"],["mat-raised-button","","color","primary",1,"add-user-btn",3,"click"]],template:function(e,r){1&e&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t.EFF(4),t.k0s(),t.j41(5,"button",3),t.bIt("click",function(){return r.createUser()}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.EFF(8," Add New User "),t.k0s()(),t.j41(9,"div",4)(10,"mat-form-field",5)(11,"mat-label"),t.EFF(12,"Search users"),t.k0s(),t.j41(13,"input",6),t.bIt("ngModelChange",function(s){return r.searchText=s})("keyup",function(){return r.applyFilter()}),t.k0s(),t.j41(14,"mat-icon",7),t.EFF(15,"search"),t.k0s()(),t.j41(16,"mat-form-field",8)(17,"mat-label"),t.EFF(18,"Filter by Role"),t.k0s(),t.j41(19,"mat-select",9),t.bIt("ngModelChange",function(s){return r.roleFilter=s})("selectionChange",function(){return r.applyFilter()}),t.DNE(20,gt,2,2,"mat-option",10),t.k0s()(),t.j41(21,"mat-form-field",11)(22,"mat-label"),t.EFF(23,"Filter by Status"),t.k0s(),t.j41(24,"mat-select",9),t.bIt("ngModelChange",function(s){return r.statusFilter=s})("selectionChange",function(){return r.applyFilter()}),t.DNE(25,ut,2,2,"mat-option",10),t.k0s()(),t.j41(26,"button",12),t.bIt("click",function(){return r.clearFilters()}),t.j41(27,"mat-icon"),t.EFF(28,"clear"),t.k0s(),t.EFF(29," Clear Filters "),t.k0s()()(),t.j41(30,"div",13)(31,"mat-table",14),t.qex(32,15),t.DNE(33,mt,2,0,"mat-header-cell",16),t.DNE(34,_t,10,2,"mat-cell",17),t.bVm(),t.qex(35,18),t.DNE(36,pt,2,0,"mat-header-cell",16),t.DNE(37,Ct,5,2,"mat-cell",17),t.bVm(),t.qex(38,19),t.DNE(39,Pt,2,0,"mat-header-cell",16),t.DNE(40,Mt,4,3,"mat-cell",17),t.bVm(),t.qex(41,20),t.DNE(42,Ot,2,0,"mat-header-cell",16),t.DNE(43,bt,5,2,"mat-cell",17),t.bVm(),t.qex(44,21),t.DNE(45,xt,2,0,"mat-header-cell",16),t.DNE(46,Ft,5,2,"mat-cell",17),t.bVm(),t.qex(47,22),t.DNE(48,wt,2,0,"mat-header-cell",16),t.DNE(49,It,5,2,"mat-cell",17),t.bVm(),t.qex(50,23),t.DNE(51,Rt,2,0,"mat-header-cell",24),t.DNE(52,At,28,6,"mat-cell",17),t.bVm(),t.DNE(53,Vt,1,0,"mat-header-row",25),t.DNE(54,Gt,1,0,"mat-row",26),t.k0s(),t.nrm(55,"mat-paginator",27),t.k0s(),t.DNE(56,Lt,4,0,"div",28),t.DNE(57,qt,14,7,"div",29),t.k0s()),2&e&&(t.R7$(4),t.JRh(r.getPageTitle()),t.R7$(9),t.Y8G("ngModel",r.searchText),t.R7$(6),t.Y8G("ngModel",r.roleFilter),t.R7$(1),t.Y8G("ngForOf",r.roleOptions),t.R7$(4),t.Y8G("ngModel",r.statusFilter),t.R7$(1),t.Y8G("ngForOf",r.statusOptions),t.R7$(6),t.Y8G("dataSource",r.dataSource),t.R7$(22),t.Y8G("matHeaderRowDef",r.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",r.displayedColumns),t.R7$(1),t.Y8G("pageSizeOptions",t.lJ4(12,Kt)),t.R7$(1),t.Y8G("ngIf",r.loading),t.R7$(1),t.Y8G("ngIf",!r.loading&&0===r.dataSource.data.length))},dependencies:[f.Sq,f.bT,g.me,g.BC,g.vS,C.Zl,C.tL,C.ji,C.cC,C.YV,C.iL,C.KS,C.$R,C.YZ,C.NB,R.iy,y.B4,y.aE,N.fg,b.rl,b.nJ,b.yw,j.VO,Y.wT,O.$z,O.iY,k.An,F.Jl,I.LG,x.kk,x.fb,x.Cp,A.sG,U.q,G.oV,f.vh],styles:[".users-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.users-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]{margin-bottom:24px;background:white;padding:20px;border-radius:8px;box-shadow:0 2px 8px #0000001a}.users-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.users-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#2d3748;font-weight:600;font-size:28px}.users-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .create-btn[_ngcontent-%COMP%]{height:48px;display:flex;align-items:center;gap:8px;font-weight:500}.users-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.users-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{flex:1;min-width:300px}.users-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .role-filter[_ngcontent-%COMP%], .users-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .status-filter[_ngcontent-%COMP%]{width:180px}.users-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{height:56px}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{background:white;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden;border:1px solid #e2e8f0}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]{width:100%}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .mat-mdc-header-cell[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#495057;border-bottom:2px solid #e9ecef;padding:16px 12px;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #f1f3f4;font-size:14px;vertical-align:middle}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .user-row[_ngcontent-%COMP%]{cursor:pointer;transition:all .2s ease}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .user-row[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .user-row[_ngcontent-%COMP%]:last-child   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:none}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #667eea4d}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:20px;width:20px;height:20px}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:600;font-size:15px;color:#2d3748}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:12px;color:#667eea;font-family:Courier New,monospace;font-weight:500}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .email-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .email-info[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:#4a5568;font-weight:500;font-size:14px}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .email-info[_ngcontent-%COMP%]   .verified-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;color:#48bb78}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .role-container[_ngcontent-%COMP%]{display:flex;align-items:center}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .role-container[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:12px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .role-container[_ngcontent-%COMP%]   .role-badge.role-super-admin[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .role-container[_ngcontent-%COMP%]   .role-badge.role-admin[_ngcontent-%COMP%]{background:#ecfdf5;color:#059669}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .role-container[_ngcontent-%COMP%]   .role-badge.role-shop-owner[_ngcontent-%COMP%]{background:#eff6ff;color:#2563eb}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .role-container[_ngcontent-%COMP%]   .role-badge.role-manager[_ngcontent-%COMP%]{background:#f0fdf4;color:#16a34a}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .role-container[_ngcontent-%COMP%]   .role-badge.role-employee[_ngcontent-%COMP%]{background:#fefce8;color:#a16207}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .role-container[_ngcontent-%COMP%]   .role-badge.role-customer-service[_ngcontent-%COMP%]{background:#fdf2f8;color:#be185d}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .role-container[_ngcontent-%COMP%]   .role-badge.role-delivery-agent[_ngcontent-%COMP%]{background:#f3e8ff;color:#7c3aed}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .role-container[_ngcontent-%COMP%]   .role-badge.role-user[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .department-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .department-info[_ngcontent-%COMP%]   .department[_ngcontent-%COMP%]{font-weight:500;color:#2d3748;font-size:14px}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .department-info[_ngcontent-%COMP%]   .designation[_ngcontent-%COMP%]{font-size:12px;color:#718096;font-weight:400}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]{display:flex;align-items:center}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .delivery-status[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;align-items:flex-start}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border-radius:16px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;border:1px solid transparent;transition:all .2s ease}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{font-size:11px;font-weight:700}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip.status-active[_ngcontent-%COMP%]{background:#e6fffa;color:#047857;border:1px solid #10b981}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip.status-inactive[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626;border:1px solid #ef4444}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip.online-status-online[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e6fffa 0%,#ccfbf1 100%);color:#047857;border:1px solid #10b981;box-shadow:0 2px 4px #10b98133}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip.online-status-online[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{color:#059669;animation:_ngcontent-%COMP%_pulse-online 2s ease-in-out infinite}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip.online-status-offline[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f3f4f6 0%,#e5e7eb 100%);color:#6b7280;border:1px solid #9ca3af;box-shadow:0 2px 4px #6b72801a}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip.online-status-offline[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{color:#9ca3af}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip.ride-status-available[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ecfdf5 0%,#d1fae5 100%);color:#065f46;border:1px solid #16a34a;box-shadow:0 2px 4px #16a34a33}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip.ride-status-available[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{color:#16a34a;animation:_ngcontent-%COMP%_pulse-available 3s ease-in-out infinite}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip.ride-status-on-ride[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eff6ff 0%,#dbeafe 100%);color:#1e40af;border:1px solid #2563eb;box-shadow:0 2px 4px #2563eb33}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip.ride-status-on-ride[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{color:#2563eb;animation:_ngcontent-%COMP%_spin 2s linear infinite}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip.ride-status-busy[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef3c7 0%,#fde68a 100%);color:#92400e;border:1px solid #d97706;box-shadow:0 2px 4px #d9770633}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip.ride-status-busy[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{color:#d97706;animation:_ngcontent-%COMP%_pulse-busy 1.5s ease-in-out infinite}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip.ride-status-on-break[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f3e8ff 0%,#e9d5ff 100%);color:#6b21a8;border:1px solid #7c3aed;box-shadow:0 2px 4px #7c3aed33}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip.ride-status-on-break[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{color:#7c3aed}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip.ride-status-offline[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef2f2 0%,#fecaca 100%);color:#991b1b;border:1px solid #dc2626;box-shadow:0 2px 4px #dc262633}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip.ride-status-offline[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{color:#dc2626}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .status-container[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .last-login-container[_ngcontent-%COMP%]   .last-login[_ngcontent-%COMP%]{color:#4a5568;font-size:14px;font-weight:500}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .last-login-container[_ngcontent-%COMP%]   .no-login[_ngcontent-%COMP%]{color:#a0aec0;font-size:13px;font-style:italic;font-weight:400}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:12px}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .status-toggle[_ngcontent-%COMP%]{transform:scale(.85)}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .status-toggle[_ngcontent-%COMP%]     .mat-mdc-slide-toggle{--mdc-switch-selected-track-color: #48bb78;--mdc-switch-selected-handle-color: #ffffff;--mdc-switch-unselected-track-color: #ef4444;--mdc-switch-unselected-handle-color: #ffffff}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:16px;transition:all .2s ease}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.view-btn[_ngcontent-%COMP%]{background:#e1f5fe;color:#0277bd}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.view-btn[_ngcontent-%COMP%]:hover{background:#b3e5fc}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.edit-btn[_ngcontent-%COMP%]{background:#fff3e0;color:#f57c00}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.edit-btn[_ngcontent-%COMP%]:hover{background:#ffe0b2}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.more-btn[_ngcontent-%COMP%]{background:#f5f5f5;color:#757575}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.more-btn[_ngcontent-%COMP%]:hover{background:#eeeeee}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .view-doc-btn[_ngcontent-%COMP%]{background-color:#1976d2!important;color:#fff!important}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .view-doc-btn[_ngcontent-%COMP%]:hover{background-color:#1565c0!important}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .add-doc-btn[_ngcontent-%COMP%]{background-color:#f57c00!important;color:#fff!important;border:none!important}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .add-doc-btn[_ngcontent-%COMP%]:hover{background-color:#ef6c00!important}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .primary-menu-item[_ngcontent-%COMP%]{font-weight:600!important}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]   .primary-menu-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700!important}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .delete-action[_ngcontent-%COMP%]{color:#d32f2f!important}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .delete-action[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#d32f2f!important}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]   .delete-action[_ngcontent-%COMP%]:hover{background:rgba(211,47,47,.1)!important}.users-container[_ngcontent-%COMP%]     .user-actions-menu{border-radius:8px;box-shadow:0 4px 16px #0000001a}.users-container[_ngcontent-%COMP%]     .user-actions-menu .mat-mdc-menu-item{transition:all .2s ease}.users-container[_ngcontent-%COMP%]     .user-actions-menu .mat-mdc-menu-item .mat-icon{margin-right:12px;font-size:18px;width:18px;height:18px}.users-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.users-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.users-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:64px 24px;text-align:center;background:#fafafa;border-radius:12px;margin:24px}.users-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ddd;margin-bottom:16px}.users-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{max-width:400px}.users-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;font-size:20px;margin:0 0 12px;font-weight:500}.users-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px;line-height:1.5;margin:0 0 24px}.users-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]   .no-data-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}.users-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]   .no-data-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;min-width:140px}.users-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]   .no-data-actions[_ngcontent-%COMP%]   button.add-first-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none}.users-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]   .no-data-actions[_ngcontent-%COMP%]   button.add-first-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5a67d8 0%,#6b46c1 100%)}.users-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]   .no-data-actions[_ngcontent-%COMP%]   button.clear-filters-btn[_ngcontent-%COMP%]{color:#666;border-color:#ddd}.users-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]   .no-data-actions[_ngcontent-%COMP%]   button.clear-filters-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.users-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]   .no-data-actions[_ngcontent-%COMP%]   button.add-user-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px}@media (max-width: 1024px){.users-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.users-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.users-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%], .users-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .role-filter[_ngcontent-%COMP%], .users-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .status-filter[_ngcontent-%COMP%]{width:100%;min-width:unset}}@media (max-width: 768px){.users-container[_ngcontent-%COMP%]{padding:16px}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto}.users-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .users-table[_ngcontent-%COMP%]{min-width:800px}}@keyframes _ngcontent-%COMP%_pulse-online{0%{opacity:1}50%{opacity:.7}to{opacity:1}}@keyframes _ngcontent-%COMP%_pulse-available{0%{opacity:1;transform:scale(1)}50%{opacity:.8;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_pulse-busy{0%{opacity:1}25%{opacity:.6}50%{opacity:1}75%{opacity:.8}to{opacity:1}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return o})();function Qt(o,i){1&o&&(t.j41(0,"div",7),t.nrm(1,"mat-spinner"),t.j41(2,"p"),t.EFF(3,"Loading user details..."),t.k0s()())}function Zt(o,i){if(1&o){const n=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(n);const r=t.XpG(2);return t.Njj(r.lockUser())}),t.j41(1,"mat-icon"),t.EFF(2,"lock"),t.k0s(),t.EFF(3," Lock User "),t.k0s()}}function tn(o,i){if(1&o){const n=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(n);const r=t.XpG(2);return t.Njj(r.unlockUser())}),t.j41(1,"mat-icon"),t.EFF(2,"lock_open"),t.k0s(),t.EFF(3," Unlock User "),t.k0s()}}function nn(o,i){if(1&o&&(t.j41(0,"div",25)(1,"span",26),t.EFF(2,"Mobile:"),t.k0s(),t.j41(3,"span",27),t.EFF(4),t.k0s(),t.j41(5,"mat-icon",28),t.EFF(6),t.k0s()()),2&o){const n=t.XpG(2);t.R7$(4),t.JRh(n.user.mobileNumber),t.R7$(1),t.AVh("verified",n.user.mobileVerified),t.R7$(1),t.SpI(" ",n.user.mobileVerified?"verified":"cancel"," ")}}function en(o,i){if(1&o&&(t.j41(0,"div",25)(1,"span",26),t.EFF(2,"Department:"),t.k0s(),t.j41(3,"span",27),t.EFF(4),t.k0s()()),2&o){const n=t.XpG(2);t.R7$(4),t.JRh(n.user.department)}}function on(o,i){if(1&o&&(t.j41(0,"div",25)(1,"span",26),t.EFF(2,"Designation:"),t.k0s(),t.j41(3,"span",27),t.EFF(4),t.k0s()()),2&o){const n=t.XpG(2);t.R7$(4),t.JRh(n.user.designation)}}function rn(o,i){if(1&o&&(t.j41(0,"div",31)(1,"mat-icon"),t.EFF(2,"schedule"),t.k0s(),t.j41(3,"div",32)(4,"span",33),t.EFF(5,"Last Login"),t.k0s(),t.j41(6,"span",34),t.EFF(7),t.nI1(8,"date"),t.k0s()()()),2&o){const n=t.XpG(2);t.R7$(7),t.JRh(t.i5U(8,1,n.user.lastLogin,"medium"))}}function an(o,i){1&o&&(t.j41(0,"div",31)(1,"mat-icon",37),t.EFF(2,"warning"),t.k0s(),t.j41(3,"div",32)(4,"span",33),t.EFF(5,"Account Status"),t.k0s(),t.j41(6,"span",38),t.EFF(7,"Locked"),t.k0s()()())}function sn(o,i){if(1&o&&(t.j41(0,"div",25)(1,"span",26),t.EFF(2,"Last Updated:"),t.k0s(),t.j41(3,"span",27),t.EFF(4),t.nI1(5,"date"),t.k0s()()),2&o){const n=t.XpG(2);t.R7$(4),t.JRh(t.i5U(5,1,n.user.updatedAt,"medium"))}}function cn(o,i){if(1&o&&(t.j41(0,"div",25)(1,"span",26),t.EFF(2,"Last Login:"),t.k0s(),t.j41(3,"span",27),t.EFF(4),t.nI1(5,"date"),t.k0s()()),2&o){const n=t.XpG(2);t.R7$(4),t.JRh(t.i5U(5,1,n.user.lastLogin,"medium"))}}const ln=function(o){return["/users",o]};function dn(o,i){if(1&o&&(t.j41(0,"div",42)(1,"div",43)(2,"mat-icon"),t.EFF(3,"person"),t.k0s()(),t.j41(4,"div",44)(5,"span",45),t.EFF(6),t.k0s(),t.j41(7,"span",46),t.EFF(8),t.k0s()(),t.j41(9,"div",47)(10,"button",48)(11,"mat-icon"),t.EFF(12,"visibility"),t.k0s()()()()),2&o){const n=i.$implicit;t.R7$(6),t.JRh(n.fullName),t.R7$(2),t.JRh(n.role),t.R7$(2),t.Y8G("routerLink",t.eq3(3,ln,n.id))}}function gn(o,i){if(1&o&&(t.j41(0,"mat-card",39)(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3),t.k0s()(),t.j41(4,"mat-card-content")(5,"div",40),t.DNE(6,dn,13,5,"div",41),t.k0s()()()),2&o){const n=t.XpG(2);t.R7$(3),t.SpI("Team Members (",n.subordinates.length,")"),t.R7$(3),t.Y8G("ngForOf",n.subordinates)}}function un(o,i){if(1&o){const n=t.RV6();t.j41(0,"div",8)(1,"mat-card",9)(2,"mat-card-content")(3,"div",10)(4,"div",11)(5,"mat-icon",12),t.EFF(6,"person"),t.k0s()(),t.j41(7,"div",13)(8,"h3"),t.EFF(9),t.k0s(),t.j41(10,"p",14),t.EFF(11),t.k0s(),t.j41(12,"mat-chip-set")(13,"mat-chip",15),t.EFF(14),t.k0s(),t.j41(15,"mat-chip",15),t.EFF(16),t.k0s()()(),t.j41(17,"div",16)(18,"button",17)(19,"mat-icon"),t.EFF(20,"more_vert"),t.k0s()(),t.j41(21,"mat-menu",null,18)(23,"button",19),t.bIt("click",function(){t.eBV(n);const r=t.XpG();return t.Njj(r.editUser())}),t.j41(24,"mat-icon"),t.EFF(25,"edit"),t.k0s(),t.EFF(26," Edit User "),t.k0s(),t.j41(27,"button",19),t.bIt("click",function(){t.eBV(n);const r=t.XpG();return t.Njj(r.toggleUserStatus())}),t.j41(28,"mat-icon"),t.EFF(29),t.k0s(),t.EFF(30),t.k0s(),t.j41(31,"button",19),t.bIt("click",function(){t.eBV(n);const r=t.XpG();return t.Njj(r.resetPassword())}),t.j41(32,"mat-icon"),t.EFF(33,"lock_reset"),t.k0s(),t.EFF(34," Reset Password "),t.k0s(),t.nrm(35,"mat-divider"),t.DNE(36,Zt,4,0,"button",20),t.DNE(37,tn,4,0,"button",20),t.nrm(38,"mat-divider"),t.j41(39,"button",21),t.bIt("click",function(){t.eBV(n);const r=t.XpG();return t.Njj(r.deleteUser())}),t.j41(40,"mat-icon"),t.EFF(41,"delete"),t.k0s(),t.EFF(42," Delete User "),t.k0s()()()()()(),t.j41(43,"div",22)(44,"mat-card",23)(45,"mat-card-header")(46,"mat-card-title"),t.EFF(47,"Personal Information"),t.k0s()(),t.j41(48,"mat-card-content")(49,"div",24)(50,"div",25)(51,"span",26),t.EFF(52,"Full Name:"),t.k0s(),t.j41(53,"span",27),t.EFF(54),t.k0s()(),t.j41(55,"div",25)(56,"span",26),t.EFF(57,"Email:"),t.k0s(),t.j41(58,"span",27),t.EFF(59),t.k0s(),t.j41(60,"mat-icon",28),t.EFF(61),t.k0s()(),t.DNE(62,nn,7,4,"div",29),t.DNE(63,en,5,1,"div",29),t.DNE(64,on,5,1,"div",29),t.k0s()()(),t.j41(65,"mat-card",23)(66,"mat-card-header")(67,"mat-card-title"),t.EFF(68,"Security Settings"),t.k0s()(),t.j41(69,"mat-card-content")(70,"div",30)(71,"div",31)(72,"mat-icon"),t.EFF(73,"security"),t.k0s(),t.j41(74,"div",32)(75,"span",33),t.EFF(76,"Two-Factor Authentication"),t.k0s(),t.j41(77,"span",34),t.EFF(78),t.k0s()()(),t.j41(79,"div",31)(80,"mat-icon"),t.EFF(81,"lock"),t.k0s(),t.j41(82,"div",32)(83,"span",33),t.EFF(84,"Password Change"),t.k0s(),t.j41(85,"span",34),t.EFF(86),t.k0s()()(),t.DNE(87,rn,9,4,"div",35),t.DNE(88,an,8,0,"div",35),t.k0s()()(),t.j41(89,"mat-card",23)(90,"mat-card-header")(91,"mat-card-title"),t.EFF(92,"Activity Information"),t.k0s()(),t.j41(93,"mat-card-content")(94,"div",24)(95,"div",25)(96,"span",26),t.EFF(97,"Created At:"),t.k0s(),t.j41(98,"span",27),t.EFF(99),t.nI1(100,"date"),t.k0s()(),t.DNE(101,sn,6,4,"div",29),t.DNE(102,cn,6,4,"div",29),t.k0s()()()(),t.DNE(103,gn,7,2,"mat-card",36),t.k0s()}if(2&o){const n=t.sdS(22),e=t.XpG();t.R7$(9),t.JRh(e.user.fullName),t.R7$(2),t.SpI("@",e.user.username,""),t.R7$(2),t.Y8G("color",e.getRoleColor(e.user.role)),t.R7$(1),t.JRh(e.user.role),t.R7$(1),t.Y8G("color",e.getStatusColor(e.user.status)),t.R7$(1),t.JRh(e.user.status),t.R7$(2),t.Y8G("matMenuTriggerFor",n),t.R7$(11),t.JRh(e.user.isActive?"block":"check_circle"),t.R7$(1),t.SpI(" ",e.user.isActive?"Deactivate":"Activate"," "),t.R7$(6),t.Y8G("ngIf",!e.user.isLocked),t.R7$(1),t.Y8G("ngIf",e.user.isLocked),t.R7$(17),t.JRh(e.user.fullName),t.R7$(5),t.JRh(e.user.email),t.R7$(1),t.AVh("verified",e.user.emailVerified),t.R7$(1),t.SpI(" ",e.user.emailVerified?"verified":"cancel"," "),t.R7$(1),t.Y8G("ngIf",e.user.mobileNumber),t.R7$(1),t.Y8G("ngIf",e.user.department),t.R7$(1),t.Y8G("ngIf",e.user.designation),t.R7$(8),t.AVh("enabled",e.user.twoFactorEnabled),t.R7$(6),t.JRh(e.user.twoFactorEnabled?"Enabled":"Disabled"),t.R7$(2),t.AVh("warning",e.user.passwordChangeRequired),t.R7$(6),t.JRh(e.user.passwordChangeRequired?"Required":"Not Required"),t.R7$(1),t.Y8G("ngIf",e.user.lastLogin),t.R7$(1),t.Y8G("ngIf",e.user.isLocked),t.R7$(11),t.JRh(t.i5U(100,31,e.user.createdAt,"medium")),t.R7$(2),t.Y8G("ngIf",e.user.updatedAt),t.R7$(1),t.Y8G("ngIf",e.user.lastLogin),t.R7$(1),t.Y8G("ngIf",e.subordinates.length>0)}}let mn=(()=>{class o{constructor(n,e,r,a){this.route=n,this.router=e,this.userService=r,this.snackBar=a,this.user=null,this.loading=!1,this.subordinates=[]}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");if(n){const e=parseInt(n,10);isNaN(e)?(console.error("Invalid user ID:",n),this.snackBar.open("Invalid user ID","Close",{duration:3e3}),this.router.navigate(["/users"])):this.loadUser(e)}}loadUser(n){this.loading=!0,this.userService.getUserById(n).subscribe({next:e=>{this.user=e,this.loading=!1,this.loadSubordinates(n)},error:e=>{console.error("Error loading user:",e),this.snackBar.open("Error loading user details","Close",{duration:3e3}),this.loading=!1,this.router.navigate(["/users"])}})}loadSubordinates(n){this.userService.getSubordinates(n).subscribe({next:e=>{this.subordinates=e},error:e=>{console.error("Error loading subordinates:",e)}})}goBack(){this.router.navigate(["/users"])}editUser(){this.user&&this.router.navigate(["/users",this.user.id,"edit"])}toggleUserStatus(){this.user&&this.userService.toggleUserStatus(this.user.id).subscribe({next:n=>{this.user=n,this.snackBar.open(`User ${n.isActive?"activated":"deactivated"} successfully`,"Close",{duration:3e3})},error:n=>{console.error("Error toggling user status:",n),this.snackBar.open("Error updating user status","Close",{duration:3e3})}})}resetPassword(){this.user&&confirm(`Reset password for ${this.user.fullName}?`)&&this.userService.resetPassword(this.user.id).subscribe({next:()=>{this.snackBar.open("Password reset email sent successfully","Close",{duration:3e3})},error:n=>{console.error("Error resetting password:",n),this.snackBar.open("Error resetting password","Close",{duration:3e3})}})}lockUser(){if(!this.user)return;const n=prompt("Enter reason for locking the user:");n&&this.userService.lockUser(this.user.id,n).subscribe({next:e=>{this.user=e,this.snackBar.open("User locked successfully","Close",{duration:3e3})},error:e=>{console.error("Error locking user:",e),this.snackBar.open("Error locking user","Close",{duration:3e3})}})}unlockUser(){this.user&&this.userService.unlockUser(this.user.id).subscribe({next:n=>{this.user=n,this.snackBar.open("User unlocked successfully","Close",{duration:3e3})},error:n=>{console.error("Error unlocking user:",n),this.snackBar.open("Error unlocking user","Close",{duration:3e3})}})}deleteUser(){this.user&&confirm(`Are you sure you want to delete ${this.user.fullName}? This action cannot be undone.`)&&this.userService.deleteUser(this.user.id).subscribe({next:()=>{this.snackBar.open("User deleted successfully","Close",{duration:3e3}),this.router.navigate(["/users"])},error:n=>{console.error("Error deleting user:",n),this.snackBar.open("Error deleting user","Close",{duration:3e3})}})}getRoleColor(n){switch(n){case"SUPER_ADMIN":return"warn";case"ADMIN":case"MANAGER":return"primary";case"SHOP_OWNER":return"accent";default:return""}}getStatusColor(n){switch(n){case"ACTIVE":return"primary";case"INACTIVE":case"SUSPENDED":return"warn";case"PENDING_VERIFICATION":return"accent";default:return""}}static{this.\u0275fac=function(e){return new(e||o)(t.rXU(h.nX),t.rXU(h.Ix),t.rXU($),t.rXU(w.UG))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-user-detail"]],decls:14,vars:3,consts:[[1,"user-detail-container"],[1,"detail-header"],["mat-icon-button","",1,"back-btn",3,"click"],[1,"header-actions"],["mat-raised-button","","color","primary",3,"disabled","click"],["class","loading-container",4,"ngIf"],["class","user-content",4,"ngIf"],[1,"loading-container"],[1,"user-content"],[1,"summary-card"],[1,"user-summary"],[1,"user-avatar"],[1,"avatar-icon"],[1,"user-info"],[1,"username"],["selected","",3,"color"],[1,"user-actions"],["mat-icon-button","",1,"action-menu",3,"matMenuTriggerFor"],["userMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",1,"delete-action",3,"click"],[1,"detail-grid"],[1,"info-card"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"status-icon"],["class","info-item",4,"ngIf"],[1,"security-grid"],[1,"security-item"],[1,"security-info"],[1,"security-title"],[1,"security-status"],["class","security-item",4,"ngIf"],["class","subordinates-card",4,"ngIf"],[1,"warning"],[1,"security-status","warning"],[1,"subordinates-card"],[1,"subordinates-grid"],["class","subordinate-item",4,"ngFor","ngForOf"],[1,"subordinate-item"],[1,"subordinate-avatar"],[1,"subordinate-info"],[1,"subordinate-name"],[1,"subordinate-role"],[1,"subordinate-actions"],["mat-icon-button","",3,"routerLink"]],template:function(e,r){1&e&&(t.j41(0,"div",0)(1,"div",1)(2,"button",2),t.bIt("click",function(){return r.goBack()}),t.j41(3,"mat-icon"),t.EFF(4,"arrow_back"),t.k0s()(),t.j41(5,"h2"),t.EFF(6,"User Details"),t.k0s(),t.j41(7,"div",3)(8,"button",4),t.bIt("click",function(){return r.editUser()}),t.j41(9,"mat-icon"),t.EFF(10,"edit"),t.k0s(),t.EFF(11," Edit User "),t.k0s()()(),t.DNE(12,Qt,4,0,"div",5),t.DNE(13,un,104,34,"div",6),t.k0s()),2&e&&(t.R7$(8),t.Y8G("disabled",!r.user),t.R7$(4),t.Y8G("ngIf",r.loading),t.R7$(1),t.Y8G("ngIf",r.user&&!r.loading))},dependencies:[f.Sq,f.bT,h.Wk,O.$z,O.iY,k.An,P.RN,P.m2,P.MM,P.dh,F.Jl,F.Jo,I.LG,x.kk,x.fb,x.Cp,U.q,f.vh],styles:[".user-detail-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.user-detail-container[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px}.user-detail-container[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{color:#1976d2;margin-right:16px}.user-detail-container[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-weight:500;flex:1}.user-detail-container[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.user-detail-container[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}.user-detail-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.user-detail-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{margin-bottom:24px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .user-summary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .user-summary[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:linear-gradient(45deg,#1976d2,#42a5f5);display:flex;align-items:center;justify-content:center}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .user-summary[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   .avatar-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;color:#fff}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .user-summary[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{flex:1}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .user-summary[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#333;font-weight:500;font-size:24px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .user-summary[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{margin:0 0 12px;color:#666;font-size:16px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .user-summary[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{margin-right:8px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .user-summary[_ngcontent-%COMP%]   .user-actions[_ngcontent-%COMP%]   .action-menu[_ngcontent-%COMP%]{color:#666}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:24px;margin-bottom:24px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{color:#333;font-weight:500;font-size:18px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 0;border-bottom:1px solid #f0f0f0}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#666;min-width:120px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333;flex:1}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#f44336}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .status-icon.verified[_ngcontent-%COMP%]{color:#4caf50}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .security-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .security-grid[_ngcontent-%COMP%]   .security-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:#f8f9fa;border-radius:8px;border:1px solid #e9ecef}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .security-grid[_ngcontent-%COMP%]   .security-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px;color:#666}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .security-grid[_ngcontent-%COMP%]   .security-item[_ngcontent-%COMP%]   mat-icon.enabled[_ngcontent-%COMP%]{color:#4caf50}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .security-grid[_ngcontent-%COMP%]   .security-item[_ngcontent-%COMP%]   mat-icon.warning[_ngcontent-%COMP%]{color:#ff9800}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .security-grid[_ngcontent-%COMP%]   .security-item[_ngcontent-%COMP%]   .security-info[_ngcontent-%COMP%]{flex:1}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .security-grid[_ngcontent-%COMP%]   .security-item[_ngcontent-%COMP%]   .security-info[_ngcontent-%COMP%]   .security-title[_ngcontent-%COMP%]{display:block;font-weight:500;color:#333;margin-bottom:4px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .security-grid[_ngcontent-%COMP%]   .security-item[_ngcontent-%COMP%]   .security-info[_ngcontent-%COMP%]   .security-status[_ngcontent-%COMP%]{display:block;color:#666;font-size:14px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .security-grid[_ngcontent-%COMP%]   .security-item[_ngcontent-%COMP%]   .security-info[_ngcontent-%COMP%]   .security-status.warning[_ngcontent-%COMP%]{color:#ff9800;font-weight:500}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .subordinates-card[_ngcontent-%COMP%]   .subordinates-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .subordinates-card[_ngcontent-%COMP%]   .subordinates-grid[_ngcontent-%COMP%]   .subordinate-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;background:#f8f9fa;border-radius:8px;border:1px solid #e9ecef}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .subordinates-card[_ngcontent-%COMP%]   .subordinates-grid[_ngcontent-%COMP%]   .subordinate-item[_ngcontent-%COMP%]   .subordinate-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(45deg,#42a5f5,#1976d2);display:flex;align-items:center;justify-content:center}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .subordinates-card[_ngcontent-%COMP%]   .subordinates-grid[_ngcontent-%COMP%]   .subordinate-item[_ngcontent-%COMP%]   .subordinate-avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:20px;width:20px;height:20px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .subordinates-card[_ngcontent-%COMP%]   .subordinates-grid[_ngcontent-%COMP%]   .subordinate-item[_ngcontent-%COMP%]   .subordinate-info[_ngcontent-%COMP%]{flex:1}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .subordinates-card[_ngcontent-%COMP%]   .subordinates-grid[_ngcontent-%COMP%]   .subordinate-item[_ngcontent-%COMP%]   .subordinate-info[_ngcontent-%COMP%]   .subordinate-name[_ngcontent-%COMP%]{display:block;font-weight:500;color:#333;margin-bottom:4px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .subordinates-card[_ngcontent-%COMP%]   .subordinates-grid[_ngcontent-%COMP%]   .subordinate-item[_ngcontent-%COMP%]   .subordinate-info[_ngcontent-%COMP%]   .subordinate-role[_ngcontent-%COMP%]{display:block;color:#666;font-size:14px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .subordinates-card[_ngcontent-%COMP%]   .subordinates-grid[_ngcontent-%COMP%]   .subordinate-item[_ngcontent-%COMP%]   .subordinate-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#1976d2}.delete-action[_ngcontent-%COMP%]{color:#f44336!important}.delete-action[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336!important}@media (max-width: 768px){.user-detail-container[_ngcontent-%COMP%]{padding:16px}.user-detail-container[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.user-detail-container[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .user-summary[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:16px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.user-detail-container[_ngcontent-%COMP%]   .user-content[_ngcontent-%COMP%]   .subordinates-card[_ngcontent-%COMP%]   .subordinates-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}mat-chip[color=primary][_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}mat-chip[color=accent][_ngcontent-%COMP%]{background-color:#ff4081;color:#fff}mat-chip[color=warn][_ngcontent-%COMP%]{background-color:#f44336;color:#fff}"]})}}return o})();var _n=l(272),X=l(1034);function pn(o,i){if(1&o&&(t.j41(0,"div",7)(1,"mat-form-field",8)(2,"mat-label"),t.EFF(3,"Password *"),t.k0s(),t.nrm(4,"input",33),t.j41(5,"mat-hint"),t.EFF(6,"Minimum 8 characters with uppercase, lowercase, number and special character"),t.k0s(),t.j41(7,"mat-error"),t.EFF(8),t.k0s()()()),2&o){const n=t.XpG();t.R7$(8),t.JRh(n.getErrorMessage("password"))}}function fn(o,i){1&o&&(t.j41(0,"div",7)(1,"mat-form-field",8)(2,"mat-label"),t.EFF(3,"New Password (leave blank to keep current)"),t.k0s(),t.nrm(4,"input",34),t.j41(5,"mat-hint"),t.EFF(6,"Leave blank to keep current password"),t.k0s()()())}function Cn(o,i){if(1&o&&(t.j41(0,"mat-option",35),t.EFF(1),t.k0s()),2&o){const n=i.$implicit;t.Y8G("value",n.value),t.R7$(1),t.SpI(" ",n.label," ")}}function Pn(o,i){if(1&o&&(t.j41(0,"mat-option",35),t.EFF(1),t.k0s()),2&o){const n=i.$implicit;t.Y8G("value",n.value),t.R7$(1),t.SpI(" ",n.label," ")}}function Mn(o,i){if(1&o&&(t.j41(0,"mat-option",35),t.EFF(1),t.k0s()),2&o){const n=i.$implicit;t.Y8G("value",n.id),t.R7$(1),t.Lme(" ",n.name," - ",n.city||n.addressLine1||""," ")}}function On(o,i){if(1&o&&(t.j41(0,"div",7)(1,"mat-form-field",8)(2,"mat-label"),t.EFF(3,"Assigned Shops"),t.k0s(),t.j41(4,"mat-select",36),t.DNE(5,Mn,2,3,"mat-option",17),t.k0s(),t.j41(6,"mat-hint"),t.EFF(7,"Select shops this driver will serve (e.g., all Mittur shops)"),t.k0s()()()),2&o){const n=t.XpG();t.R7$(5),t.Y8G("ngForOf",n.shops)}}function hn(o,i){if(1&o&&(t.j41(0,"mat-option",35),t.EFF(1),t.k0s()),2&o){const n=i.$implicit;t.Y8G("value",n),t.R7$(1),t.SpI(" ",n," ")}}function bn(o,i){1&o&&t.nrm(0,"mat-spinner",37)}function xn(o,i){if(1&o){const n=t.RV6();t.j41(0,"mat-card",38)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),t.EFF(4,"upload_file"),t.k0s(),t.EFF(5," Delivery Partner Documents "),t.k0s(),t.j41(6,"mat-card-subtitle"),t.EFF(7,"Upload required documents for delivery partner verification"),t.k0s()(),t.j41(8,"mat-card-content")(9,"div",39)(10,"p",40)(11,"mat-icon"),t.EFF(12,"info"),t.k0s(),t.EFF(13," Delivery partner created successfully! Now upload the required documents for verification. "),t.k0s()(),t.j41(14,"app-delivery-partner-documents",41),t.bIt("documentsChanged",function(r){t.eBV(n);const a=t.XpG();return t.Njj(a.onDocumentsChanged(r))}),t.k0s(),t.j41(15,"div",42)(16,"button",43),t.bIt("click",function(){t.eBV(n);const r=t.XpG();return t.Njj(r.finishDeliveryPartnerSetup())}),t.j41(17,"mat-icon"),t.EFF(18,"check"),t.k0s(),t.EFF(19," Complete Setup "),t.k0s(),t.j41(20,"button",44),t.bIt("click",function(){t.eBV(n);const r=t.XpG();return t.Njj(r.skipDocumentUpload())}),t.EFF(21," Skip for Now "),t.k0s()()()()}if(2&o){const n=t.XpG();t.R7$(14),t.Y8G("partnerId",n.deliveryPartnerId)("readonly",!1)("isAdmin",!0)}}function vn(o,i){1&o&&(t.j41(0,"div",45),t.nrm(1,"mat-spinner"),t.j41(2,"p"),t.EFF(3,"Loading user details..."),t.k0s()())}let z=(()=>{class o{constructor(n,e,r,a,s,c,u){this.fb=n,this.route=e,this.router=r,this.userService=a,this.snackBar=s,this.deliveryPartnerService=c,this.shopService=u,this.loading=!1,this.isEditMode=!1,this.userId=null,this.showDeliveryPartnerDocuments=!1,this.savedUserId=null,this.deliveryPartnerId=null,this.shops=[],this.roleOptions=[{value:"SUPER_ADMIN",label:"Super Admin"},{value:"ADMIN",label:"Admin"},{value:"SHOP_OWNER",label:"Shop Owner"},{value:"MANAGER",label:"Manager"},{value:"EMPLOYEE",label:"Employee"},{value:"CUSTOMER_SERVICE",label:"Customer Service"},{value:"DELIVERY_PARTNER",label:"Delivery Partner"},{value:"USER",label:"User"}],this.statusOptions=[{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"SUSPENDED",label:"Suspended"},{value:"PENDING_VERIFICATION",label:"Pending Verification"}],this.departmentOptions=["Information Technology","Human Resources","Finance","Marketing","Operations","Customer Service","Sales","Administration"],this.userForm=this.createForm()}ngOnInit(){this.loadShops(),this.route.params.subscribe(n=>{if(n.id){const e=parseInt(n.id,10);isNaN(e)?(console.error("Invalid user ID:",n.id),this.snackBar.open("Invalid user ID","Close",{duration:3e3}),this.router.navigate(["/users"])):(this.userId=e,this.isEditMode=!0,this.loadUser())}})}loadShops(){this.shopService.getShops({page:0,size:100}).subscribe({next:n=>{this.shops=n.content},error:n=>{console.error("Error loading shops:",n)}})}createForm(){return this.fb.group({username:["",[g.k0.required,g.k0.minLength(3),g.k0.maxLength(50)]],email:["",[g.k0.required,g.k0.email]],password:["",this.isEditMode?[]:[g.k0.required,g.k0.minLength(8)]],firstName:["",[g.k0.required,g.k0.maxLength(100)]],lastName:["",[g.k0.required,g.k0.maxLength(100)]],mobileNumber:["",[g.k0.pattern(/^[6-9][0-9]{9}$/)]],role:["USER",g.k0.required],status:["ACTIVE"],department:[""],designation:[""],reportsTo:[""],emailVerified:[!1],mobileVerified:[!1],twoFactorEnabled:[!1],passwordChangeRequired:[!1],assignedShopIds:[[]]})}loadUser(){this.userId&&(this.loading=!0,this.userService.getUserById(this.userId).subscribe({next:n=>{this.userForm.patchValue({username:n.username,email:n.email,firstName:n.firstName,lastName:n.lastName,mobileNumber:n.mobileNumber,role:n.role,status:n.status,department:n.department,designation:n.designation,reportsTo:n.reportsTo,emailVerified:n.emailVerified,mobileVerified:n.mobileVerified,twoFactorEnabled:n.twoFactorEnabled,passwordChangeRequired:n.passwordChangeRequired,assignedShopIds:n.assignedShopIds||[]}),this.userForm.get("password")?.clearValidators(),this.userForm.get("password")?.updateValueAndValidity(),this.loading=!1},error:n=>{console.error("Error loading user:",n),this.snackBar.open("Error loading user details","Close",{duration:3e3}),this.loading=!1,this.goBack()}}))}onSubmit(){if(this.userForm.valid){this.loading=!0;const n=this.userForm.value;this.isEditMode&&!n.password&&delete n.password;const e={username:n.username,email:n.email,password:n.password,firstName:n.firstName,lastName:n.lastName,mobileNumber:n.mobileNumber||void 0,role:n.role,status:n.status,department:n.department||void 0,designation:n.designation||void 0,reportsTo:n.reportsTo||void 0,emailVerified:n.emailVerified,mobileVerified:n.mobileVerified,twoFactorEnabled:n.twoFactorEnabled,passwordChangeRequired:n.passwordChangeRequired};(this.isEditMode?this.userService.updateUser(this.userId,e):this.userService.createUser(e)).subscribe({next:a=>{this.loading=!1;const s=n.assignedShopIds||[];"DELIVERY_PARTNER"===n.role&&s.length>0&&s.forEach(c=>{this.userService.assignDriverToShop(a.id,c).subscribe({next:()=>{console.log("Driver assigned to shop",c)},error:u=>{console.error("Error assigning driver to shop:",u)}})}),this.isEditMode?(this.snackBar.open("User updated successfully","Close",{duration:3e3}),this.router.navigate(["/users"])):(this.savedUserId=a.id,this.snackBar.open("User created successfully","Close",{duration:3e3}),"DELIVERY_PARTNER"===n.role?this.handleDeliveryPartnerCreation(a.id):this.router.navigate(["/users"]))},error:a=>{console.error(`Error ${this.isEditMode?"updating":"creating"} user:`,a),this.snackBar.open(a.error?.message||`Error ${this.isEditMode?"updating":"creating"} user`,"Close",{duration:3e3}),this.loading=!1}})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.userForm.controls).forEach(n=>{this.userForm.get(n)?.markAsTouched()})}goBack(){this.router.navigate(["/users"])}getErrorMessage(n){const e=this.userForm.get(n);if(e?.hasError("required"))return`${this.getFieldDisplayName(n)} is required`;if(e?.hasError("email"))return"Enter a valid email address";if(e?.hasError("minlength")){const r=e.errors?.minlength?.requiredLength;return`${this.getFieldDisplayName(n)} must be at least ${r} characters`}if(e?.hasError("maxlength")){const r=e.errors?.maxlength?.requiredLength;return`${this.getFieldDisplayName(n)} cannot exceed ${r} characters`}return e?.hasError("pattern")&&"mobileNumber"===n?"Enter a valid mobile number (10 digits starting with 6-9)":""}getFieldDisplayName(n){return{username:"Username",email:"Email",password:"Password",firstName:"First Name",lastName:"Last Name",mobileNumber:"Mobile Number",role:"Role",department:"Department",designation:"Designation"}[n]||n}handleDeliveryPartnerCreation(n){this.deliveryPartnerService.getPartnerByUserId(n).subscribe({next:e=>{e.data?(this.deliveryPartnerId=e.data.id,this.showDeliveryPartnerDocuments=!0):this.createDeliveryPartnerRecord(n)},error:e=>{console.error("Error checking delivery partner:",e),this.snackBar.open("User created. Please create delivery partner record separately.","Close",{duration:5e3}),this.router.navigate(["/users"])}})}createDeliveryPartnerRecord(n){this.deliveryPartnerId=n,this.showDeliveryPartnerDocuments=!0,this.snackBar.open("Delivery partner record created. Please upload required documents.","Close",{duration:3e3})}onDocumentsChanged(n){console.log("Documents updated:",n)}finishDeliveryPartnerSetup(){this.snackBar.open("Delivery partner setup completed successfully!","Close",{duration:3e3}),this.router.navigate(["/users"])}skipDocumentUpload(){this.snackBar.open("Documents can be uploaded later from the delivery partners section.","Close",{duration:5e3}),this.router.navigate(["/users"])}static{this.\u0275fac=function(e){return new(e||o)(t.rXU(g.ok),t.rXU(h.nX),t.rXU(h.Ix),t.rXU($),t.rXU(w.UG),t.rXU(S.WS),t.rXU(_n.s))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-user-form"]],decls:97,vars:20,consts:[[1,"user-form-container"],[1,"form-header"],["mat-icon-button","",1,"back-btn",3,"click"],[1,"form-card"],[3,"formGroup","ngSubmit"],[1,"form-grid"],[1,"form-section"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","placeholder","Enter username"],["appearance","outline",1,"half-width"],["matInput","","formControlName","firstName","placeholder","Enter first name"],["matInput","","formControlName","lastName","placeholder","Enter last name"],["matInput","","formControlName","email","type","email","placeholder","Enter email address"],["matInput","","formControlName","mobileNumber","placeholder","Enter mobile number"],["class","form-row",4,"ngIf"],["formControlName","role"],[3,"value",4,"ngFor","ngForOf"],["formControlName","status"],["formControlName","department"],["value",""],["matInput","","formControlName","designation","placeholder","Enter designation"],[1,"form-checkboxes"],["formControlName","emailVerified"],["formControlName","mobileVerified"],["formControlName","twoFactorEnabled"],["formControlName","passwordChangeRequired"],[1,"form-actions"],["mat-button","","type","button",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20",4,"ngIf"],["class","document-card",4,"ngIf"],["class","loading-container",4,"ngIf"],["matInput","","formControlName","password","type","password","placeholder","Enter password"],["matInput","","formControlName","password","type","password","placeholder","Enter new password"],[3,"value"],["formControlName","assignedShopIds","multiple",""],["diameter","20"],[1,"document-card"],[1,"document-upload-header"],[1,"info-text"],[3,"partnerId","readonly","isAdmin","documentsChanged"],[1,"document-actions"],["mat-raised-button","","color","primary",3,"click"],["mat-stroked-button","",3,"click"],[1,"loading-container"]],template:function(e,r){if(1&e&&(t.j41(0,"div",0)(1,"div",1)(2,"button",2),t.bIt("click",function(){return r.goBack()}),t.j41(3,"mat-icon"),t.EFF(4,"arrow_back"),t.k0s()(),t.j41(5,"h2"),t.EFF(6),t.k0s()(),t.j41(7,"mat-card",3)(8,"form",4),t.bIt("ngSubmit",function(){return r.onSubmit()}),t.j41(9,"div",5)(10,"div",6)(11,"h3"),t.EFF(12,"Basic Information"),t.k0s(),t.j41(13,"div",7)(14,"mat-form-field",8)(15,"mat-label"),t.EFF(16,"Username *"),t.k0s(),t.nrm(17,"input",9),t.j41(18,"mat-error"),t.EFF(19),t.k0s()()(),t.j41(20,"div",7)(21,"mat-form-field",10)(22,"mat-label"),t.EFF(23,"First Name *"),t.k0s(),t.nrm(24,"input",11),t.j41(25,"mat-error"),t.EFF(26),t.k0s()(),t.j41(27,"mat-form-field",10)(28,"mat-label"),t.EFF(29,"Last Name *"),t.k0s(),t.nrm(30,"input",12),t.j41(31,"mat-error"),t.EFF(32),t.k0s()()(),t.j41(33,"div",7)(34,"mat-form-field",10)(35,"mat-label"),t.EFF(36,"Email *"),t.k0s(),t.nrm(37,"input",13),t.j41(38,"mat-error"),t.EFF(39),t.k0s()(),t.j41(40,"mat-form-field",10)(41,"mat-label"),t.EFF(42,"Mobile Number"),t.k0s(),t.nrm(43,"input",14),t.j41(44,"mat-error"),t.EFF(45),t.k0s()()(),t.DNE(46,pn,9,1,"div",15),t.DNE(47,fn,7,0,"div",15),t.k0s(),t.j41(48,"div",6)(49,"h3"),t.EFF(50,"Role and Access"),t.k0s(),t.j41(51,"div",7)(52,"mat-form-field",10)(53,"mat-label"),t.EFF(54,"Role *"),t.k0s(),t.j41(55,"mat-select",16),t.DNE(56,Cn,2,2,"mat-option",17),t.k0s(),t.j41(57,"mat-error"),t.EFF(58),t.k0s()(),t.j41(59,"mat-form-field",10)(60,"mat-label"),t.EFF(61,"Status"),t.k0s(),t.j41(62,"mat-select",18),t.DNE(63,Pn,2,2,"mat-option",17),t.k0s()()(),t.DNE(64,On,8,1,"div",15),t.j41(65,"div",7)(66,"mat-form-field",10)(67,"mat-label"),t.EFF(68,"Department"),t.k0s(),t.j41(69,"mat-select",19)(70,"mat-option",20),t.EFF(71,"None"),t.k0s(),t.DNE(72,hn,2,2,"mat-option",17),t.k0s()(),t.j41(73,"mat-form-field",10)(74,"mat-label"),t.EFF(75,"Designation"),t.k0s(),t.nrm(76,"input",21),t.k0s()()(),t.j41(77,"div",6)(78,"h3"),t.EFF(79,"Security Settings"),t.k0s(),t.j41(80,"div",22)(81,"mat-checkbox",23),t.EFF(82,"Email Verified"),t.k0s(),t.j41(83,"mat-checkbox",24),t.EFF(84,"Mobile Verified"),t.k0s(),t.j41(85,"mat-checkbox",25),t.EFF(86,"Two-Factor Authentication"),t.k0s(),t.j41(87,"mat-checkbox",26),t.EFF(88,"Password Change Required"),t.k0s()()()(),t.j41(89,"div",27)(90,"button",28),t.bIt("click",function(){return r.goBack()}),t.EFF(91," Cancel "),t.k0s(),t.j41(92,"button",29),t.DNE(93,bn,1,0,"mat-spinner",30),t.EFF(94),t.k0s()()()(),t.DNE(95,xn,22,3,"mat-card",31),t.DNE(96,vn,4,0,"div",32),t.k0s()),2&e){let a;t.R7$(6),t.JRh(r.isEditMode?"Edit User":"Create New User"),t.R7$(2),t.Y8G("formGroup",r.userForm),t.R7$(11),t.JRh(r.getErrorMessage("username")),t.R7$(7),t.JRh(r.getErrorMessage("firstName")),t.R7$(6),t.JRh(r.getErrorMessage("lastName")),t.R7$(7),t.JRh(r.getErrorMessage("email")),t.R7$(6),t.JRh(r.getErrorMessage("mobileNumber")),t.R7$(1),t.Y8G("ngIf",!r.isEditMode),t.R7$(1),t.Y8G("ngIf",r.isEditMode),t.R7$(9),t.Y8G("ngForOf",r.roleOptions),t.R7$(2),t.JRh(r.getErrorMessage("role")),t.R7$(5),t.Y8G("ngForOf",r.statusOptions),t.R7$(1),t.Y8G("ngIf","DELIVERY_PARTNER"===(null==(a=r.userForm.get("role"))?null:a.value)),t.R7$(8),t.Y8G("ngForOf",r.departmentOptions),t.R7$(18),t.Y8G("disabled",r.loading),t.R7$(2),t.Y8G("disabled",!r.userForm.valid||r.loading),t.R7$(1),t.Y8G("ngIf",r.loading),t.R7$(1),t.SpI(" ",r.isEditMode?"Update User":"Create User"," "),t.R7$(1),t.Y8G("ngIf",r.showDeliveryPartnerDocuments&&r.savedUserId),t.R7$(1),t.Y8G("ngIf",r.loading&&!r.userForm.dirty)}},dependencies:[f.Sq,f.bT,X.u,g.qT,g.me,g.BC,g.cb,g.j4,g.JD,N.fg,b.rl,b.nJ,b.MV,b.TL,j.VO,Y.wT,O.$z,O.iY,k.An,P.RN,P.m2,P.MM,P.Lc,P.dh,I.LG,V.So],styles:['.user-form-container[_ngcontent-%COMP%]{padding:24px;margin:0 auto;min-height:calc(100vh - 200px);background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);border-radius:20px}.user-form-container[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-bottom:32px;padding:24px 32px;background:white;border-radius:16px;box-shadow:0 4px 20px #0000001a;border-left:5px solid #667eea}.user-form-container[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{color:#667eea;background:rgba(102,126,234,.1);border-radius:50%;transition:all .3s ease}.user-form-container[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background:rgba(102,126,234,.2);transform:scale(1.1)}.user-form-container[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px}.user-form-container[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-weight:600;font-size:28px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{padding:0;background:transparent;box-shadow:none;border-radius:0}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{background:white;padding:32px;border-radius:16px;box-shadow:0 8px 32px #0000001a;border:1px solid rgba(255,255,255,.2);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s ease}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]:hover{box-shadow:0 12px 40px #00000026;transform:translateY(-2px)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 28px;color:#333;font-weight:600;font-size:20px;position:relative;padding-left:20px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:4px;height:24px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:2px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-8px;left:20px;right:0;height:2px;background:linear-gradient(90deg,#667eea 0%,transparent 100%)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px;align-items:flex-start}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{flex:1}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field{background:#f8f9ff;border-radius:12px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field .mdc-notched-outline{border-color:#e0e7ff;border-width:2px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field:hover .mdc-notched-outline{border-color:#667eea}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field.mdc-text-field--focused .mdc-notched-outline{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]{flex:1}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]     .mat-mdc-form-field{background:#f8f9ff;border-radius:12px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]     .mat-mdc-form-field .mdc-notched-outline{border-color:#e0e7ff;border-width:2px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]     .mat-mdc-form-field:hover .mdc-notched-outline{border-color:#667eea}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]     .mat-mdc-form-field.mdc-text-field--focused .mdc-notched-outline{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-checkboxes[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;background:linear-gradient(135deg,#f8f9ff 0%,#e0e7ff 100%);padding:24px;border-radius:16px;border:2px solid #e0e7ff}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-checkboxes[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin:0;padding:12px 16px;background:white;border-radius:12px;box-shadow:0 2px 8px #0000000d;transition:all .3s ease}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-checkboxes[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #0000001a;transform:translateY(-1px)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-checkboxes[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-mdc-checkbox{--mdc-checkbox-selected-checkmark-color: white;--mdc-checkbox-selected-icon-color: #667eea;--mdc-checkbox-unselected-icon-color: #c1c7cd}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-checkboxes[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mdc-form-field{font-weight:500;color:#4a5568}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;margin-top:32px;padding:28px 32px;background:white;border-radius:16px;box-shadow:0 8px 32px #0000001a}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px;height:48px;font-weight:500;transition:all .3s ease}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:8px}.user-form-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.user-form-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.user-form-container[_ngcontent-%COMP%]   .document-card[_ngcontent-%COMP%]{margin-top:32px;background:white;border-radius:16px;box-shadow:0 8px 32px #0000001a;border:1px solid rgba(255,255,255,.2);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);overflow:hidden}.user-form-container[_ngcontent-%COMP%]   .document-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:24px 32px}.user-form-container[_ngcontent-%COMP%]   .document-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:20px;font-weight:600;margin-bottom:8px}.user-form-container[_ngcontent-%COMP%]   .document-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.user-form-container[_ngcontent-%COMP%]   .document-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{color:#ffffffe6;font-size:14px;margin:0}.user-form-container[_ngcontent-%COMP%]   .document-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:32px}.user-form-container[_ngcontent-%COMP%]   .document-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .document-upload-header[_ngcontent-%COMP%]{margin-bottom:24px}.user-form-container[_ngcontent-%COMP%]   .document-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .document-upload-header[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;background:#e8f5e8;border:1px solid #4caf50;border-radius:8px;padding:16px;margin:0;color:#2e7d32;font-weight:500}.user-form-container[_ngcontent-%COMP%]   .document-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .document-upload-header[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:20px;width:20px;height:20px}.user-form-container[_ngcontent-%COMP%]   .document-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .document-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;margin-top:32px;padding-top:24px;border-top:1px solid #e9ecef}.user-form-container[_ngcontent-%COMP%]   .document-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .document-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:160px;height:48px;font-weight:500;transition:all .3s ease}.user-form-container[_ngcontent-%COMP%]   .document-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .document-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}.user-form-container[_ngcontent-%COMP%]   .document-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .document-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:hover:not([disabled]){background:linear-gradient(135deg,#5a6fd8 0%,#6a4190 100%);transform:translateY(-2px);box-shadow:0 8px 25px #667eea4d}.user-form-container[_ngcontent-%COMP%]   .document-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .document-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-form-field.full-width[_ngcontent-%COMP%]{width:100%}mat-form-field.half-width[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]   mat-hint[_ngcontent-%COMP%]{font-size:12px;color:#667eea;font-weight:500}mat-form-field[_ngcontent-%COMP%]   mat-error[_ngcontent-%COMP%]{font-size:12px;font-weight:500}mat-form-field[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{font-weight:600;color:#4a5568}@media (max-width: 768px){.user-form-container[_ngcontent-%COMP%]{padding:16px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{padding:20px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]{width:100%}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.form-checkboxes[_ngcontent-%COMP%]{background:#f8f9fa;padding:20px;border-radius:8px;border:1px solid #e9ecef}.form-checkboxes[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-layout{margin-bottom:4px}.form-checkboxes[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-label{font-size:14px;color:#495057}.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-outline-thick[_ngcontent-%COMP%]{color:#f44336}']})}}return o})();var M=l(4978);const En=[{path:"",component:E,canActivate:[M.q]},{path:"admins",component:E,canActivate:[M.q],data:{role:"ADMIN"}},{path:"managers",component:E,canActivate:[M.q],data:{role:"MANAGER"}},{path:"shop-owners",component:E,canActivate:[M.q],data:{role:"SHOP_OWNER"}},{path:"delivery-partners",component:E,canActivate:[M.q],data:{role:"DELIVERY_PARTNER"}},{path:"customers",component:E,canActivate:[M.q],data:{role:"USER"}},{path:"new",component:z,canActivate:[M.q]},{path:":id",component:mn,canActivate:[M.q]},{path:":id/edit",component:z,canActivate:[M.q]},{path:":id/documents",component:X.u,canActivate:[M.q]}];let kn=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[h.iI.forChild(En),h.iI]})}}return o})();var Fn=l(5126);let wn=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[f.MD,kn,Fn.DeliveryModule,g.X1,g.YN,C.tP,R.Ou,y.NQ,N.fS,j.Ve,O.Hl,k.m_,P.Hu,F.YN,D.hM,w._T,I.D6,x.Cn,W.Y,A.mV,V.g7,H.RI,U.w,b.RG,G.uc]})}}return o})()}}]);