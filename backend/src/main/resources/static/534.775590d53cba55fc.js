"use strict";(self.webpackChunkshop_management_frontend=self.webpackChunkshop_management_frontend||[]).push([[534],{534:(M4,it,_)=>{_.r(it),_.d(it,{AdminModule:()=>b4});var p=_(177),A=_(1188),l=_(9417),s=_(9159),$=_(6695),G=_(2042),g=_(8834),C=_(9213),k=_(9631),m=_(2102),I=_(2798),u=_(5596),M=_(5351),V=_(5084),N=_(6600),U=_(2765),L=_(6471),R=_(4823),h=_(9183),b=_(5416),S=_(450),X=_(5571),f=_(9115),K=_(5951),Q=_(7575),z=_(1997),zt=_(8032),y=_.n(zt),t=_(7705),v=_(7673),D=_(5558),j=_(9437),x=_(6354),F=_(2525),O=_(1626);let Jt=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}`}getDashboardStats(){return this.http.get(`${this.apiUrl}/admin/dashboard/stats`).pipe((0,D.n)(e=>(0,v.of)(e.data)),(0,j.W)(()=>(0,v.of)({totalUsers:1547,totalShops:234,totalOrders:8923,totalRevenue:1234567,activeUsers:892,pendingShops:23,todayOrders:156,todayRevenue:23456,userGrowth:12.5,shopGrowth:8.3,orderGrowth:15.7,revenueGrowth:22.1})))}getAllUsers(e=0,o=20){return this.http.get(`${this.apiUrl}/admin/users`,{params:{page:e.toString(),size:o.toString()}}).pipe((0,D.n)(i=>(0,v.of)(i.data||[])),(0,j.W)(()=>{const i=[{id:1,username:"superadmin",email:"admin@nammaooru.com",firstName:"Super",lastName:"Admin",role:"SUPER_ADMIN",status:"ACTIVE",isActive:!0,emailVerified:!0,createdAt:(new Date).toISOString(),lastLoginAt:(new Date).toISOString()},{id:2,username:"shopowner1",email:"shop1@example.com",firstName:"Rajesh",lastName:"Kumar",role:"SHOP_OWNER",status:"ACTIVE",isActive:!0,emailVerified:!0,createdAt:new Date(Date.now()-6048e5).toISOString(),lastLoginAt:new Date(Date.now()-72e5).toISOString()}];return(0,v.of)(i)}))}getAllShops(e=0,o=20){return this.http.get(`${this.apiUrl}/admin/shops`,{params:{page:e.toString(),size:o.toString()}}).pipe((0,D.n)(i=>(0,v.of)(i.data||[])),(0,j.W)(()=>{const i=[{id:1,name:"Annamalai Stores",description:"Fresh vegetables and groceries",ownerName:"Annamalai",ownerEmail:"annamalai@stores.com",ownerPhone:"+91 98765 43210",category:"Grocery",status:"APPROVED",isActive:!0,addressLine1:"123 T.Nagar Main Road",city:"Chennai",state:"Tamil Nadu",postalCode:"600017",createdAt:new Date(Date.now()-2592e6).toISOString(),approvedAt:new Date(Date.now()-216e7).toISOString()},{id:2,name:"Saravana Medical",description:"Medicines and healthcare products",ownerName:"Dr. Saravanan",ownerEmail:"saravana@medical.com",ownerPhone:"+91 98765 43211",category:"Pharmacy",status:"PENDING",isActive:!1,addressLine1:"456 Adyar Main Road",city:"Chennai",state:"Tamil Nadu",postalCode:"600020",createdAt:new Date(Date.now()-1728e5).toISOString()}];return(0,v.of)(i)}))}updateUserStatus(e,o){return this.http.put(`${this.apiUrl}/admin/users/${e}/status`,{status:o}).pipe((0,D.n)(i=>(0,v.of)(i.data)),(0,j.W)(()=>{const i={id:e,username:"mockuser",email:"mock@example.com",firstName:"Mock",lastName:"User",role:"CUSTOMER",status:o,isActive:"ACTIVE"===o,emailVerified:!0,createdAt:(new Date).toISOString()};return(0,v.of)(i)}))}approveShop(e,o){return this.http.post(`${this.apiUrl}/admin/shops/${e}/approve`,{notes:o}).pipe((0,D.n)(i=>(0,v.of)(i.data)),(0,j.W)(()=>{const i={id:e,name:"Mock Shop",description:"Mock description",ownerName:"Mock Owner",ownerEmail:"mock@shop.com",ownerPhone:"+91 9876543210",category:"Mock Category",status:"APPROVED",isActive:!0,addressLine1:"Mock Address",city:"Chennai",state:"Tamil Nadu",postalCode:"600001",createdAt:(new Date).toISOString(),approvedAt:(new Date).toISOString()};return(0,v.of)(i)}))}rejectShop(e,o){return this.http.post(`${this.apiUrl}/admin/shops/${e}/reject`,{reason:o}).pipe((0,D.n)(i=>(0,v.of)(i.data)),(0,j.W)(()=>{const i={id:e,name:"Mock Shop",description:"Mock description",ownerName:"Mock Owner",ownerEmail:"mock@shop.com",ownerPhone:"+91 9876543210",category:"Mock Category",status:"REJECTED",isActive:!1,addressLine1:"Mock Address",city:"Chennai",state:"Tamil Nadu",postalCode:"600001",createdAt:(new Date).toISOString(),rejectedAt:(new Date).toISOString(),rejectionReason:o};return(0,v.of)(i)}))}getSystemMetrics(){return this.http.get(`${this.apiUrl}/admin/system/metrics`).pipe((0,D.n)(e=>(0,v.of)(e.data)),(0,j.W)(()=>{const e={cpuUsage:Math.floor(30*Math.random())+20,memoryUsage:Math.floor(20*Math.random())+60,diskUsage:Math.floor(15*Math.random())+45,activeConnections:Math.floor(100*Math.random())+50,responseTime:Math.floor(50*Math.random())+100,errorRate:2*Math.random()};return(0,v.of)(e)}))}getRecentActivity(){return this.http.get(`${this.apiUrl}/admin/activity/recent`).pipe((0,D.n)(e=>(0,v.of)(e.data||[])),(0,j.W)(()=>{const e=[{id:1,type:"USER_REGISTRATION",message:"New user registered: john.doe@example.com",timestamp:new Date(Date.now()-6e5).toISOString(),severity:"info"},{id:2,type:"SHOP_APPLICATION",message:"New shop application: Chennai Fresh Mart",timestamp:new Date(Date.now()-15e5).toISOString(),severity:"warning"},{id:3,type:"ORDER_PLACED",message:"High value order placed: \u20b95,000",timestamp:new Date(Date.now()-27e5).toISOString(),severity:"success"}];return(0,v.of)(e)}))}getUsersByRole(e){return this.http.get(`${this.apiUrl}/admin/users/role/${e}`).pipe((0,D.n)(o=>(0,v.of)(o.data||[])),(0,j.W)(()=>this.getAllUsers().pipe((0,x.T)(o=>o.filter(i=>i.role===e)))))}getShopsByStatus(e){return this.http.get(`${this.apiUrl}/admin/shops/status/${e}`).pipe((0,D.n)(o=>(0,v.of)(o.data||[])),(0,j.W)(()=>this.getAllShops().pipe((0,x.T)(o=>o.filter(i=>i.status===e)))))}searchUsers(e){return this.http.get(`${this.apiUrl}/admin/users/search`,{params:{q:e}}).pipe((0,D.n)(o=>(0,v.of)(o.data||[])),(0,j.W)(()=>this.getAllUsers().pipe((0,x.T)(o=>o.filter(i=>i.username.toLowerCase().includes(e.toLowerCase())||i.email.toLowerCase().includes(e.toLowerCase())||i.firstName.toLowerCase().includes(e.toLowerCase())||i.lastName.toLowerCase().includes(e.toLowerCase()))))))}searchShops(e){return this.http.get(`${this.apiUrl}/admin/shops/search`,{params:{q:e}}).pipe((0,D.n)(o=>(0,v.of)(o.data||[])),(0,j.W)(()=>this.getAllShops().pipe((0,x.T)(o=>o.filter(i=>i.name.toLowerCase().includes(e.toLowerCase())||i.ownerName.toLowerCase().includes(e.toLowerCase())||i.category.toLowerCase().includes(e.toLowerCase()))))))}createUser(e){return this.http.post(`${this.apiUrl}/admin/users`,e).pipe((0,D.n)(o=>(0,v.of)(o.data)),(0,j.W)(()=>{const o={id:Math.floor(1e4*Math.random()),username:e.username||"newuser",email:e.email||"new@example.com",firstName:e.firstName||"New",lastName:e.lastName||"User",role:e.role||"CUSTOMER",status:"ACTIVE",isActive:!0,emailVerified:!1,createdAt:(new Date).toISOString()};return(0,v.of)(o)}))}deleteUser(e){return this.http.delete(`${this.apiUrl}/admin/users/${e}`).pipe((0,D.n)(()=>(0,v.of)(!0)),(0,j.W)(()=>(0,v.of)(!0)))}exportData(e){return this.http.get(`${this.apiUrl}/admin/export/${e}`,{responseType:"blob"}).pipe((0,j.W)(()=>{const o=`id,name,email,created_at\n1,Mock User,mock@example.com,${(new Date).toISOString()}`,i=new Blob([o],{type:"text/csv"});return(0,v.of)(i)}))}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function qt(n,a){if(1&n&&(t.j41(0,"mat-option",37),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.SpI(" ",e.label," ")}}function Ht(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Name"),t.k0s())}function Kt(n,a){if(1&n&&(t.j41(0,"td",39)(1,"div",40)(2,"strong"),t.EFF(3),t.k0s(),t.j41(4,"div",41),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.Lme("",e.firstName," ",e.lastName,""),t.R7$(2),t.SpI("ID: ",e.id,"")}}function Qt(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Email"),t.k0s())}function Wt(n,a){1&n&&(t.j41(0,"div",44)(1,"mat-icon",45),t.EFF(2,"verified"),t.k0s(),t.EFF(3," Verified "),t.k0s())}function Zt(n,a){if(1&n&&(t.j41(0,"td",39)(1,"div",42)(2,"div"),t.EFF(3),t.k0s(),t.DNE(4,Wt,4,0,"div",43),t.k0s()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.email),t.R7$(1),t.Y8G("ngIf",e.emailVerified)}}function te(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Mobile"),t.k0s())}function ee(n,a){1&n&&(t.j41(0,"div",44)(1,"mat-icon",45),t.EFF(2,"verified"),t.k0s(),t.EFF(3," Verified "),t.k0s())}function ne(n,a){if(1&n&&(t.j41(0,"td",39)(1,"div",42)(2,"div"),t.EFF(3),t.k0s(),t.DNE(4,ee,4,0,"div",43),t.k0s()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.mobileNumber),t.R7$(1),t.Y8G("ngIf",e.mobileVerified)}}function oe(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"City"),t.k0s())}function ae(n,a){if(1&n&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.SpI(" ",e.city||"N/A"," ")}}function ie(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Status"),t.k0s())}function re(n,a){if(1&n&&(t.j41(0,"td",39)(1,"mat-chip"),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG();t.R7$(1),t.HbH(o.getStatusClass(e.status||"ACTIVE")),t.R7$(1),t.SpI(" ",o.getStatusLabel(e.status||"ACTIVE")," ")}}function se(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Orders"),t.k0s())}function ce(n,a){if(1&n&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.SpI(" ",e.role," ")}}function le(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Total Spent"),t.k0s())}function pe(n,a){if(1&n&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,o=t.XpG();t.R7$(1),t.SpI(" ",o.getRoleLabel(e.role)," ")}}function me(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Joined"),t.k0s())}function de(n,a){if(1&n&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,o=t.XpG();t.R7$(1),t.SpI(" ",o.formatDate(e.createdAt||"")," ")}}function ge(n,a){1&n&&(t.j41(0,"th",46),t.EFF(1,"Actions"),t.k0s())}function _e(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",53),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG();return t.Njj(r.verifyUserEmail(i))}),t.j41(1,"mat-icon"),t.EFF(2,"email"),t.k0s()()}}function ue(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",39)(1,"div",47)(2,"button",48),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.viewUser(r))}),t.j41(3,"mat-icon"),t.EFF(4,"visibility"),t.k0s()(),t.j41(5,"button",49),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.editUser(r))}),t.j41(6,"mat-icon"),t.EFF(7,"edit"),t.k0s()(),t.j41(8,"button",50),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.toggleUserStatus(r))}),t.j41(9,"mat-icon"),t.EFF(10),t.k0s()(),t.DNE(11,_e,3,0,"button",51),t.j41(12,"button",52),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.deleteUser(r))}),t.j41(13,"mat-icon"),t.EFF(14,"delete"),t.k0s()()()()}if(2&n){const e=a.$implicit;t.R7$(8),t.Y8G("color",e.isActive?"warn":"primary")("matTooltip",e.isActive?"Deactivate":"Activate"),t.R7$(2),t.JRh(e.isActive?"block":"check_circle"),t.R7$(1),t.Y8G("ngIf",!e.emailVerified)}}function fe(n,a){1&n&&t.nrm(0,"tr",54)}function Ce(n,a){if(1&n){const e=t.RV6();t.j41(0,"tr",55),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.viewUser(r))}),t.k0s()}}function he(n,a){1&n&&(t.j41(0,"div",56),t.nrm(1,"mat-spinner"),t.k0s())}function Pe(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",57)(1,"mat-icon"),t.EFF(2,"people_outline"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No users found"),t.k0s(),t.j41(5,"p"),t.EFF(6,"Try adjusting your search criteria or create a new user."),t.k0s(),t.j41(7,"button",2),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.createUser())}),t.j41(8,"mat-icon"),t.EFF(9,"add"),t.k0s(),t.EFF(10," Add First User "),t.k0s()()}}const be=function(){return[5,10,25,50,100]};let Me=(()=>{class n{constructor(e,o){this.adminService=e,this.router=o,this.displayedColumns=["fullName","email","mobileNumber","city","status","totalOrders","totalSpent","createdAt","actions"],this.dataSource=new s.I6,this.isLoading=!1,this.totalElements=0,this.pageSize=10,this.pageIndex=0,this.searchTerm="",this.selectedStatus="",this.selectedRole="",this.statusOptions=[{value:"",label:"All Statuses"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"SUSPENDED",label:"Suspended"}],this.roleOptions=[{value:"",label:"All Roles"},{value:"SUPER_ADMIN",label:"Super Admin"},{value:"ADMIN",label:"Admin"},{value:"SHOP_OWNER",label:"Shop Owner"},{value:"CUSTOMER",label:"Customer"}],this.userStats={totalUsers:0,activeUsers:0,verifiedUsers:0,adminUsers:0}}ngOnInit(){this.loadUsers(),this.loadUserStats()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.sortingDataAccessor=(e,o)=>{switch(o){case"fullName":return`${e.firstName} ${e.lastName}`.toLowerCase();case"status":return e.status||"";case"role":return e.role||"";case"createdAt":return new Date(e.createdAt||"").getTime();default:return e[o]||""}}}loadUsers(){this.isLoading=!0,this.adminService.getAllUsers(this.pageIndex,this.pageSize).subscribe({next:e=>{let o=e;this.searchTerm&&(o=e.filter(i=>i.username.toLowerCase().includes(this.searchTerm.toLowerCase())||i.email.toLowerCase().includes(this.searchTerm.toLowerCase())||i.firstName.toLowerCase().includes(this.searchTerm.toLowerCase())||i.lastName.toLowerCase().includes(this.searchTerm.toLowerCase()))),this.selectedStatus&&(o=o.filter(i=>i.status===this.selectedStatus)),this.selectedRole&&(o=o.filter(i=>i.role===this.selectedRole)),this.dataSource.data=o,this.totalElements=o.length,this.isLoading=!1},error:e=>{console.error("Error loading users:",e),this.dataSource.data=[],this.totalElements=0,this.isLoading=!1}})}loadUserStats(){this.adminService.getDashboardStats().subscribe({next:e=>{this.userStats={totalUsers:e.totalUsers,activeUsers:e.activeUsers,verifiedUsers:e.activeUsers,adminUsers:e.totalUsers}},error:e=>{console.error("Error loading user stats:",e)}})}onSearchChange(){this.pageIndex=0,this.loadUsers()}onStatusChange(){this.pageIndex=0,this.loadUsers()}onRoleChange(){this.pageIndex=0,this.loadUsers()}onPageChange(e){this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.loadUsers()}createUser(){this.router.navigate(["/admin/users/create"])}viewUser(e){this.router.navigate(["/admin/users",e.id])}editUser(e){this.router.navigate(["/admin/users",e.id,"edit"])}deleteUser(e){y().fire({title:"Delete User",text:`Are you sure you want to delete "${e.firstName} ${e.lastName}"? This action cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete",cancelButtonText:"Cancel"}).then(o=>{o.isConfirmed&&this.adminService.deleteUser(e.id).subscribe({next:()=>{y().fire("Deleted!","User has been deleted successfully.","success"),this.loadUsers(),this.loadUserStats()},error:i=>{console.error("Error deleting user:",i),y().fire("Error!","Failed to delete user. Please try again.","error")}})})}toggleUserStatus(e){const o=e.isActive?"INACTIVE":"ACTIVE",i=e.isActive?"deactivate":"activate";y().fire({title:`${i.charAt(0).toUpperCase()+i.slice(1)} User`,text:`Are you sure you want to ${i} "${e.firstName} ${e.lastName}"?`,icon:"question",showCancelButton:!0,confirmButtonText:`Yes, ${i}`,cancelButtonText:"Cancel"}).then(r=>{r.isConfirmed&&this.adminService.updateUserStatus(e.id,o).subscribe({next:c=>{y().fire("Success!",`User ${i}d successfully.`,"success"),this.loadUsers()},error:c=>{console.error("Error updating user status:",c),y().fire("Error!",`Failed to ${i} user. Please try again.`,"error")}})})}sendWelcomeEmail(e){y().fire({title:"Send Welcome Email",text:`Send welcome email to ${e.firstName} ${e.lastName} (${e.email})?`,icon:"info",showCancelButton:!0,confirmButtonText:"Send Email",cancelButtonText:"Cancel"}).then(o=>{o.isConfirmed&&y().fire("Success!","Welcome email sent successfully.","success")})}verifyUserEmail(e){y().fire({title:"Verify Email",text:`Send email verification to ${e.email}?`,icon:"question",showCancelButton:!0,confirmButtonText:"Send Verification",cancelButtonText:"Cancel"}).then(o=>{o.isConfirmed&&(y().fire("Success!","Email verification sent successfully.","success"),this.loadUsers())})}getStatusClass(e){switch(e){case"ACTIVE":return"status-active";case"INACTIVE":return"status-inactive";case"SUSPENDED":return"status-suspended";default:return""}}getStatusLabel(e){switch(e){case"ACTIVE":return"Active";case"INACTIVE":return"Inactive";case"SUSPENDED":return"Suspended";default:return e}}getRoleLabel(e){switch(e){case"SUPER_ADMIN":return"Super Admin";case"ADMIN":return"Admin";case"SHOP_OWNER":return"Shop Owner";case"CUSTOMER":return"Customer";default:return e}}formatDate(e){return new Date(e).toLocaleDateString()}exportUsers(){y().fire({title:"Export Users",text:"Choose export format:",icon:"question",showCancelButton:!0,confirmButtonText:"Export CSV",cancelButtonText:"Cancel",showDenyButton:!0,denyButtonText:"Export Excel"}).then(e=>{e.isConfirmed?this.performExport("csv"):e.isDenied&&this.performExport("xlsx")})}performExport(e){this.adminService.exportData("users").subscribe({next:o=>{const i=window.URL.createObjectURL(o),r=document.createElement("a");r.href=i,r.download=`users-${(new Date).toISOString().split("T")[0]}.${e}`,r.click(),window.URL.revokeObjectURL(i),y().fire("Success!","Users exported successfully.","success")},error:o=>{console.error("Error exporting users:",o),y().fire("Error!","Failed to export users. Please try again.","error")}})}clearFilters(){this.searchTerm="",this.selectedStatus="",this.selectedRole="",this.pageIndex=0,this.loadUsers()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(Jt),t.rXU(A.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-customer-list"]],viewQuery:function(o,i){if(1&o&&(t.GBs($.iy,5),t.GBs(G.B4,5)),2&o){let r;t.mGM(r=t.lsd())&&(i.paginator=r.first),t.mGM(r=t.lsd())&&(i.sort=r.first)}},decls:96,vars:16,consts:[[1,"user-list-container"],[1,"header-section"],["mat-raised-button","","color","primary",3,"click"],[1,"stats-section"],[1,"stat-card"],[1,"stat-number"],[1,"stat-label"],[1,"filters-card"],[1,"filters-row"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by name, email, or mobile",3,"ngModel","ngModelChange","keyup.enter"],["matSuffix",""],["appearance","outline"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"filter-actions"],["mat-button","",3,"click"],[1,"table-card"],[1,"table-container"],["mat-table","","matSort","",1,"user-table",3,"dataSource"],["matColumnDef","fullName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","mobileNumber"],["matColumnDef","city"],["matColumnDef","status"],["matColumnDef","totalOrders"],["matColumnDef","totalSpent"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","user-row",3,"click",4,"matRowDef","matRowDefColumns"],["class","loading-container",4,"ngIf"],["class","no-data",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"user-name"],[1,"user-id"],[1,"contact-info"],["class","verification-status",4,"ngIf"],[1,"verification-status"],[1,"verified-icon"],["mat-header-cell",""],[1,"action-buttons"],["mat-icon-button","","matTooltip","View Details",3,"click"],["mat-icon-button","","matTooltip","Edit Customer",3,"click"],["mat-icon-button","",3,"color","matTooltip","click"],["mat-icon-button","","matTooltip","Send Verification Email","color","accent",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Delete Customer","color","warn",3,"click"],["mat-icon-button","","matTooltip","Send Verification Email","color","accent",3,"click"],["mat-header-row",""],["mat-row","",1,"user-row",3,"click"],[1,"loading-container"],[1,"no-data"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"User Management"),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return i.createUser()}),t.j41(5,"mat-icon"),t.EFF(6,"add"),t.k0s(),t.EFF(7," Add User "),t.k0s()(),t.j41(8,"div",3)(9,"mat-card",4)(10,"mat-card-content")(11,"div",5),t.EFF(12),t.k0s(),t.j41(13,"div",6),t.EFF(14,"Total Users"),t.k0s()()(),t.j41(15,"mat-card",4)(16,"mat-card-content")(17,"div",5),t.EFF(18),t.k0s(),t.j41(19,"div",6),t.EFF(20,"Active Users"),t.k0s()()(),t.j41(21,"mat-card",4)(22,"mat-card-content")(23,"div",5),t.EFF(24),t.k0s(),t.j41(25,"div",6),t.EFF(26,"Verified Users"),t.k0s()()(),t.j41(27,"mat-card",4)(28,"mat-card-content")(29,"div",5),t.EFF(30),t.k0s(),t.j41(31,"div",6),t.EFF(32,"Admin Users"),t.k0s()()()(),t.j41(33,"mat-card",7)(34,"mat-card-content")(35,"div",8)(36,"mat-form-field",9)(37,"mat-label"),t.EFF(38,"Search Customers"),t.k0s(),t.j41(39,"input",10),t.bIt("ngModelChange",function(c){return i.searchTerm=c})("keyup.enter",function(){return i.onSearchChange()}),t.k0s(),t.j41(40,"mat-icon",11),t.EFF(41,"search"),t.k0s()(),t.j41(42,"mat-form-field",12)(43,"mat-label"),t.EFF(44,"Status"),t.k0s(),t.j41(45,"mat-select",13),t.bIt("ngModelChange",function(c){return i.selectedStatus=c})("selectionChange",function(){return i.onStatusChange()}),t.DNE(46,qt,2,2,"mat-option",14),t.k0s()(),t.j41(47,"div",15)(48,"button",16),t.bIt("click",function(){return i.onSearchChange()}),t.j41(49,"mat-icon"),t.EFF(50,"search"),t.k0s(),t.EFF(51," Search "),t.k0s(),t.j41(52,"button",16),t.bIt("click",function(){return i.clearFilters()}),t.j41(53,"mat-icon"),t.EFF(54,"clear"),t.k0s(),t.EFF(55," Clear "),t.k0s(),t.j41(56,"button",16),t.bIt("click",function(){return i.exportUsers()}),t.j41(57,"mat-icon"),t.EFF(58,"download"),t.k0s(),t.EFF(59," Export "),t.k0s()()()()(),t.j41(60,"mat-card",17)(61,"mat-card-content")(62,"div",18)(63,"table",19),t.qex(64,20),t.DNE(65,Ht,2,0,"th",21),t.DNE(66,Kt,6,3,"td",22),t.bVm(),t.qex(67,23),t.DNE(68,Qt,2,0,"th",21),t.DNE(69,Zt,5,2,"td",22),t.bVm(),t.qex(70,24),t.DNE(71,te,2,0,"th",21),t.DNE(72,ne,5,2,"td",22),t.bVm(),t.qex(73,25),t.DNE(74,oe,2,0,"th",21),t.DNE(75,ae,2,1,"td",22),t.bVm(),t.qex(76,26),t.DNE(77,ie,2,0,"th",21),t.DNE(78,re,3,3,"td",22),t.bVm(),t.qex(79,27),t.DNE(80,se,2,0,"th",21),t.DNE(81,ce,2,1,"td",22),t.bVm(),t.qex(82,28),t.DNE(83,le,2,0,"th",21),t.DNE(84,pe,2,1,"td",22),t.bVm(),t.qex(85,29),t.DNE(86,me,2,0,"th",21),t.DNE(87,de,2,1,"td",22),t.bVm(),t.qex(88,30),t.DNE(89,ge,2,0,"th",31),t.DNE(90,ue,15,4,"td",22),t.bVm(),t.DNE(91,fe,1,0,"tr",32),t.DNE(92,Ce,1,0,"tr",33),t.k0s(),t.DNE(93,he,2,0,"div",34),t.DNE(94,Pe,11,0,"div",35),t.k0s(),t.j41(95,"mat-paginator",36),t.bIt("page",function(c){return i.onPageChange(c)}),t.k0s()()()()),2&o&&(t.R7$(12),t.JRh(i.userStats.totalUsers),t.R7$(6),t.JRh(i.userStats.activeUsers),t.R7$(6),t.JRh(i.userStats.verifiedUsers),t.R7$(6),t.JRh(i.userStats.adminUsers),t.R7$(9),t.Y8G("ngModel",i.searchTerm),t.R7$(6),t.Y8G("ngModel",i.selectedStatus),t.R7$(1),t.Y8G("ngForOf",i.statusOptions),t.R7$(17),t.Y8G("dataSource",i.dataSource),t.R7$(28),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading&&0===i.dataSource.data.length),t.R7$(1),t.Y8G("length",i.totalElements)("pageSize",i.pageSize)("pageSizeOptions",t.lJ4(15,be)))},dependencies:[p.Sq,p.bT,l.me,l.BC,l.vS,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,$.iy,G.B4,G.aE,g.$z,g.iY,C.An,k.fg,m.rl,m.nJ,m.yw,I.VO,N.wT,u.RN,u.m2,L.Jl,R.oV,h.LG],styles:[".customer-list-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#1976d2;font-weight:500}.header-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:stretch}}.stats-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;margin-bottom:24px}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{text-align:center;box-shadow:0 2px 4px #0000001a}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:20px}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:28px;font-weight:600;color:#1976d2;margin-bottom:8px}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:14px;color:#666;text-transform:uppercase;letter-spacing:.5px}.filters-card[_ngcontent-%COMP%]{margin-bottom:24px;box-shadow:0 2px 4px #0000001a}.filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{flex:2;min-width:250px}.filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:150px}.filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}@media (max-width: 768px){.filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%], .filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:none;width:100%}.filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{justify-content:center;margin-top:16px}}.table-card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{position:relative;min-height:400px}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]{width:100%}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]   .customer-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .3s ease}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]   .customer-row[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:4px}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]   .customer-id[_ngcontent-%COMP%]{font-size:12px;color:#666}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .verification-status[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px;color:#4caf50;margin-top:4px}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .verification-status[_ngcontent-%COMP%]   .verified-icon[_ngcontent-%COMP%]{font-size:16px;margin-right:4px}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0000001a}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;color:#666}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px;color:#ccc}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-weight:500}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;color:#999}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}mat-chip.status-active[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#2e7d32}mat-chip.status-inactive[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00}mat-chip.status-blocked[_ngcontent-%COMP%]{background-color:#ffebee;color:#d32f2f}mat-chip.status-pending[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}@media (max-width: 1200px){.customer-list-container[_ngcontent-%COMP%]{padding:16px}}@media (max-width: 768px){.customer-list-container[_ngcontent-%COMP%]{padding:8px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]{min-width:800px}.action-buttons[_ngcontent-%COMP%]{flex-wrap:wrap}}mat-paginator[_ngcontent-%COMP%]{background:transparent;border-top:1px solid #e0e0e0;margin-top:16px}mat-form-field[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(255,255,255,.8);display:flex;align-items:center;justify-content:center;z-index:1000}"]})}}return n})();var rt=_(5680);function ve(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("firstName")," ")}}function xe(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("lastName")," ")}}function Fe(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("email")," ")}}function Oe(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("mobileNumber")," ")}}function ke(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("alternateMobileNumber")," ")}}function Ee(n,a){if(1&n&&(t.j41(0,"mat-option",43),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.SpI(" ",e.label," ")}}function Re(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("postalCode")," ")}}function Te(n,a){if(1&n&&(t.j41(0,"mat-option",43),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.SpI(" ",e.label," ")}}function ye(n,a){1&n&&(t.j41(0,"mat-icon"),t.nrm(1,"mat-spinner",44),t.k0s())}let st=(()=>{class n{constructor(e,o,i,r){this.fb=e,this.customerService=o,this.router=i,this.route=r,this.isEditMode=!1,this.customerId=null,this.isLoading=!1,this.isSubmitting=!1,this.genderOptions=[{value:"MALE",label:"Male"},{value:"FEMALE",label:"Female"},{value:"OTHER",label:"Other"},{value:"PREFER_NOT_TO_SAY",label:"Prefer not to say"}],this.statusOptions=[{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"BLOCKED",label:"Blocked"},{value:"PENDING_VERIFICATION",label:"Pending Verification"}],this.customerForm=this.createForm()}ngOnInit(){this.route.params.subscribe(e=>{if(e.id){const o=parseInt(e.id,10);isNaN(o)?(console.error("Invalid customer ID:",e.id),this.router.navigate(["/admin/customers"])):(this.isEditMode=!0,this.customerId=o,this.loadCustomer())}})}createForm(){return this.fb.group({firstName:["",[l.k0.required,l.k0.minLength(2)]],lastName:["",[l.k0.required,l.k0.minLength(2)]],email:["",[l.k0.required,l.k0.email]],mobileNumber:["",[l.k0.required,l.k0.pattern(/^[6-9][0-9]{9}$/)]],alternateMobileNumber:["",[l.k0.pattern(/^[6-9][0-9]{9}$/)]],gender:[""],dateOfBirth:[""],addressLine1:[""],addressLine2:[""],city:[""],state:[""],postalCode:["",[l.k0.pattern(/^[0-9]{6}$/)]],country:["India"],emailNotifications:[!0],smsNotifications:[!0],promotionalEmails:[!1],preferredLanguage:["English"],status:["ACTIVE"],isActive:[!0],referredBy:[""],notes:[""]})}loadCustomer(){this.customerId&&(this.isLoading=!0,this.customerService.getCustomerById(this.customerId).subscribe({next:e=>{this.populateForm(e),this.isLoading=!1},error:e=>{console.error("Error loading customer:",e),this.isLoading=!1}}))}populateForm(e){this.customerForm.patchValue({firstName:e.firstName,lastName:e.lastName,email:e.email,mobileNumber:e.mobileNumber,alternateMobileNumber:e.alternateMobileNumber,gender:e.gender,dateOfBirth:e.dateOfBirth,addressLine1:e.addressLine1,addressLine2:e.addressLine2,city:e.city,state:e.state,postalCode:e.postalCode,country:e.country,emailNotifications:e.emailNotifications,smsNotifications:e.smsNotifications,promotionalEmails:e.promotionalEmails,preferredLanguage:e.preferredLanguage,status:e.status,isActive:e.isActive,referredBy:e.referredBy,notes:e.notes})}onSubmit(){if(this.customerForm.valid){this.isSubmitting=!0;const e=this.customerForm.value;this.isEditMode&&this.customerId?this.customerService.updateCustomer(this.customerId,e).subscribe({next:o=>{y().fire("Success!","Customer updated successfully.","success").then(()=>{this.router.navigate(["/admin/customers"])})},error:o=>{console.error("Error updating customer:",o),this.isSubmitting=!1,y().fire("Error!","Failed to update customer. Please try again.","error")}}):this.customerService.createCustomer(e).subscribe({next:o=>{y().fire("Success!","Customer created successfully.","success").then(()=>{this.router.navigate(["/admin/customers"])})},error:o=>{console.error("Error creating customer:",o),this.isSubmitting=!1,y().fire("Error!","Failed to create customer. Please try again.","error")}})}else this.markFormGroupTouched()}onCancel(){this.router.navigate(["/admin/customers"])}markFormGroupTouched(){Object.keys(this.customerForm.controls).forEach(e=>{this.customerForm.get(e)?.markAsTouched()})}getErrorMessage(e){const o=this.customerForm.get(e);if(o?.hasError("required"))return`${this.getFieldLabel(e)} is required`;if(o?.hasError("email"))return"Please enter a valid email address";if(o?.hasError("pattern")){if("mobileNumber"===e||"alternateMobileNumber"===e)return"Please enter a valid 10-digit mobile number";if("postalCode"===e)return"Please enter a valid 6-digit postal code"}return o?.hasError("minlength")?`${this.getFieldLabel(e)} must be at least ${o.errors?.minlength.requiredLength} characters`:""}getFieldLabel(e){return{firstName:"First Name",lastName:"Last Name",email:"Email",mobileNumber:"Mobile Number",alternateMobileNumber:"Alternate Mobile Number",postalCode:"Postal Code"}[e]||e}isFieldInvalid(e){const o=this.customerForm.get(e);return!(!o?.invalid||!o?.dirty&&!o?.touched)}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(l.ok),t.rXU(rt.m),t.rXU(A.Ix),t.rXU(A.nX))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-customer-form"]],decls:139,vars:16,consts:[[1,"customer-form-container"],[1,"customer-form",3,"formGroup","ngSubmit"],[1,"form-section"],[1,"form-row"],["appearance","outline",1,"half-width"],["matInput","","formControlName","firstName","placeholder","Enter first name"],[4,"ngIf"],["matInput","","formControlName","lastName","placeholder","Enter last name"],["matInput","","type","email","formControlName","email","placeholder","Enter email address"],["matInput","","formControlName","mobileNumber","placeholder","10-digit mobile number"],["matInput","","formControlName","alternateMobileNumber","placeholder","Optional alternate number"],["formControlName","gender"],["value",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","dateOfBirth","readonly","",3,"matDatepicker"],["matSuffix","",3,"for"],["dobPicker",""],["appearance","outline",1,"full-width"],["matInput","","formControlName","addressLine1","placeholder","House/Flat number, Street name"],["matInput","","formControlName","addressLine2","placeholder","Landmark, Area (Optional)"],["appearance","outline",1,"third-width"],["matInput","","formControlName","city","placeholder","City"],["matInput","","formControlName","state","placeholder","State"],["matInput","","formControlName","postalCode","placeholder","6-digit PIN code"],["matInput","","formControlName","country","placeholder","Country"],[1,"checkbox-group"],["formControlName","emailNotifications"],["formControlName","smsNotifications"],["formControlName","promotionalEmails"],["formControlName","preferredLanguage"],["value","English"],["value","Hindi"],["value","Kannada"],["value","Telugu"],["value","Tamil"],["formControlName","status"],[1,"checkbox-group","half-width"],["formControlName","isActive"],["matInput","","formControlName","referredBy","placeholder","Referral code or customer"],["matInput","","formControlName","notes","rows","3","placeholder","Additional notes about the customer"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"disabled","click"],[3,"value"],["diameter","16"]],template:function(o,i){if(1&o&&(t.j41(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),t.EFF(4),t.k0s()(),t.j41(5,"mat-card-content")(6,"form",1),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(7,"div",2)(8,"h3"),t.EFF(9,"Basic Information"),t.k0s(),t.j41(10,"div",3)(11,"mat-form-field",4)(12,"mat-label"),t.EFF(13,"First Name"),t.k0s(),t.nrm(14,"input",5),t.DNE(15,ve,2,1,"mat-error",6),t.k0s(),t.j41(16,"mat-form-field",4)(17,"mat-label"),t.EFF(18,"Last Name"),t.k0s(),t.nrm(19,"input",7),t.DNE(20,xe,2,1,"mat-error",6),t.k0s()(),t.j41(21,"div",3)(22,"mat-form-field",4)(23,"mat-label"),t.EFF(24,"Email"),t.k0s(),t.nrm(25,"input",8),t.DNE(26,Fe,2,1,"mat-error",6),t.k0s(),t.j41(27,"mat-form-field",4)(28,"mat-label"),t.EFF(29,"Mobile Number"),t.k0s(),t.nrm(30,"input",9),t.DNE(31,Oe,2,1,"mat-error",6),t.k0s()(),t.j41(32,"div",3)(33,"mat-form-field",4)(34,"mat-label"),t.EFF(35,"Alternate Mobile Number"),t.k0s(),t.nrm(36,"input",10),t.DNE(37,ke,2,1,"mat-error",6),t.k0s(),t.j41(38,"mat-form-field",4)(39,"mat-label"),t.EFF(40,"Gender"),t.k0s(),t.j41(41,"mat-select",11)(42,"mat-option",12),t.EFF(43,"Not Specified"),t.k0s(),t.DNE(44,Ee,2,2,"mat-option",13),t.k0s()()(),t.j41(45,"div",3)(46,"mat-form-field",4)(47,"mat-label"),t.EFF(48,"Date of Birth"),t.k0s(),t.nrm(49,"input",14)(50,"mat-datepicker-toggle",15)(51,"mat-datepicker",null,16),t.k0s()()(),t.j41(53,"div",2)(54,"h3"),t.EFF(55,"Address Information"),t.k0s(),t.j41(56,"div",3)(57,"mat-form-field",17)(58,"mat-label"),t.EFF(59,"Address Line 1"),t.k0s(),t.nrm(60,"input",18),t.k0s()(),t.j41(61,"div",3)(62,"mat-form-field",17)(63,"mat-label"),t.EFF(64,"Address Line 2"),t.k0s(),t.nrm(65,"input",19),t.k0s()(),t.j41(66,"div",3)(67,"mat-form-field",20)(68,"mat-label"),t.EFF(69,"City"),t.k0s(),t.nrm(70,"input",21),t.k0s(),t.j41(71,"mat-form-field",20)(72,"mat-label"),t.EFF(73,"State"),t.k0s(),t.nrm(74,"input",22),t.k0s(),t.j41(75,"mat-form-field",20)(76,"mat-label"),t.EFF(77,"Postal Code"),t.k0s(),t.nrm(78,"input",23),t.DNE(79,Re,2,1,"mat-error",6),t.k0s()(),t.j41(80,"div",3)(81,"mat-form-field",4)(82,"mat-label"),t.EFF(83,"Country"),t.k0s(),t.nrm(84,"input",24),t.k0s()()(),t.j41(85,"div",2)(86,"h3"),t.EFF(87,"Preferences"),t.k0s(),t.j41(88,"div",3)(89,"div",25)(90,"mat-checkbox",26),t.EFF(91," Email Notifications "),t.k0s(),t.j41(92,"mat-checkbox",27),t.EFF(93," SMS Notifications "),t.k0s(),t.j41(94,"mat-checkbox",28),t.EFF(95," Promotional Emails "),t.k0s()()(),t.j41(96,"div",3)(97,"mat-form-field",4)(98,"mat-label"),t.EFF(99,"Preferred Language"),t.k0s(),t.j41(100,"mat-select",29)(101,"mat-option",30),t.EFF(102,"English"),t.k0s(),t.j41(103,"mat-option",31),t.EFF(104,"Hindi"),t.k0s(),t.j41(105,"mat-option",32),t.EFF(106,"Kannada"),t.k0s(),t.j41(107,"mat-option",33),t.EFF(108,"Telugu"),t.k0s(),t.j41(109,"mat-option",34),t.EFF(110,"Tamil"),t.k0s()()()()(),t.j41(111,"div",2)(112,"h3"),t.EFF(113,"Status & Additional Information"),t.k0s(),t.j41(114,"div",3)(115,"mat-form-field",4)(116,"mat-label"),t.EFF(117,"Status"),t.k0s(),t.j41(118,"mat-select",35),t.DNE(119,Te,2,2,"mat-option",13),t.k0s()(),t.j41(120,"div",36)(121,"mat-checkbox",37),t.EFF(122," Active Account "),t.k0s()()(),t.j41(123,"div",3)(124,"mat-form-field",4)(125,"mat-label"),t.EFF(126,"Referred By"),t.k0s(),t.nrm(127,"input",38),t.k0s()(),t.j41(128,"div",3)(129,"mat-form-field",17)(130,"mat-label"),t.EFF(131,"Notes"),t.k0s(),t.nrm(132,"textarea",39),t.k0s()()(),t.j41(133,"div",40)(134,"button",41),t.DNE(135,ye,2,0,"mat-icon",6),t.EFF(136),t.k0s(),t.j41(137,"button",42),t.bIt("click",function(){return i.onCancel()}),t.EFF(138," Cancel "),t.k0s()()()()()()),2&o){const r=t.sdS(52);t.R7$(4),t.SpI(" ",i.isEditMode?"Edit Customer":"Create New Customer"," "),t.R7$(2),t.Y8G("formGroup",i.customerForm),t.R7$(9),t.Y8G("ngIf",i.isFieldInvalid("firstName")),t.R7$(5),t.Y8G("ngIf",i.isFieldInvalid("lastName")),t.R7$(6),t.Y8G("ngIf",i.isFieldInvalid("email")),t.R7$(5),t.Y8G("ngIf",i.isFieldInvalid("mobileNumber")),t.R7$(6),t.Y8G("ngIf",i.isFieldInvalid("alternateMobileNumber")),t.R7$(7),t.Y8G("ngForOf",i.genderOptions),t.R7$(5),t.Y8G("matDatepicker",r),t.R7$(1),t.Y8G("for",r),t.R7$(29),t.Y8G("ngIf",i.isFieldInvalid("postalCode")),t.R7$(40),t.Y8G("ngForOf",i.statusOptions),t.R7$(15),t.Y8G("disabled",i.isSubmitting||i.customerForm.invalid),t.R7$(1),t.Y8G("ngIf",i.isSubmitting),t.R7$(1),t.SpI(" ",i.isEditMode?"Update Customer":"Create Customer"," "),t.R7$(1),t.Y8G("disabled",i.isSubmitting)}},dependencies:[p.Sq,p.bT,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,g.$z,C.An,k.fg,m.rl,m.nJ,m.TL,m.yw,I.VO,N.wT,u.RN,u.m2,u.MM,u.dh,V.Vh,V.bZ,V.bU,U.So,h.LG],styles:[".customer-form-container[_ngcontent-%COMP%]{max-width:1000px;margin:20px auto;padding:20px}.customer-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:30px;border-bottom:1px solid #e0e0e0;padding-bottom:20px}.customer-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.customer-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1976d2;margin-bottom:20px;font-weight:500;font-size:16px}.customer-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px;align-items:flex-start;flex-wrap:wrap}@media (max-width: 768px){.customer-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}.customer-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{flex:1;width:100%}.customer-form[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]{flex:1;min-width:250px}@media (max-width: 768px){.customer-form[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]{width:100%;min-width:100%}}.customer-form[_ngcontent-%COMP%]   .third-width[_ngcontent-%COMP%]{flex:1;min-width:200px}@media (max-width: 768px){.customer-form[_ngcontent-%COMP%]   .third-width[_ngcontent-%COMP%]{width:100%;min-width:100%}}.customer-form[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:12px 0}.customer-form[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-bottom:8px}.customer-form[_ngcontent-%COMP%]   .checkbox-group.half-width[_ngcontent-%COMP%]{justify-content:center}.customer-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:flex-end;margin-top:30px;padding-top:20px;border-top:1px solid #e0e0e0}@media (max-width: 768px){.customer-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse}.customer-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.customer-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}.customer-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}mat-form-field[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}mat-card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a;border-radius:8px}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:16px;border-bottom:1px solid #e0e0e0;margin-bottom:24px}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#1976d2}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:0}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px}.mat-error[_ngcontent-%COMP%]{font-size:12px;margin-top:4px}@media (max-width: 1024px){.customer-form-container[_ngcontent-%COMP%]{margin:10px;padding:10px}}@media (max-width: 768px){.customer-form-container[_ngcontent-%COMP%]{margin:5px;padding:5px}.customer-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:20px}}.form-success[_ngcontent-%COMP%]{color:#4caf50;background-color:#e8f5e8;border:1px solid #4caf50;border-radius:4px;padding:12px;margin-bottom:16px}.form-error[_ngcontent-%COMP%]{color:#f44336;background-color:#ffebee;border:1px solid #f44336;border-radius:4px;padding:12px;margin-bottom:16px}"]})}}return n})();function je(n,a){1&n&&(t.j41(0,"mat-icon",19),t.EFF(1,"verified"),t.k0s())}function De(n,a){1&n&&(t.j41(0,"mat-icon",20),t.EFF(1,"verified"),t.k0s())}function $e(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Alternate Mobile"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.customer.alternateMobileNumber)}}function Ie(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Gender"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.getGenderLabel(e.customer.gender))}}function Ne(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Date of Birth"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.formatDate(e.customer.dateOfBirth))}}function Ge(n,a){if(1&n&&(t.j41(0,"div",22)(1,"label"),t.EFF(2,"Address Line 1"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.JRh(e.customer.addressLine1)}}function we(n,a){if(1&n&&(t.j41(0,"div",22)(1,"label"),t.EFF(2,"Address Line 2"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.JRh(e.customer.addressLine2)}}function Se(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"City"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.JRh(e.customer.city)}}function Ae(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"State"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.JRh(e.customer.state)}}function Ve(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Postal Code"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.JRh(e.customer.postalCode)}}function Le(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Country"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.JRh(e.customer.country)}}function Be(n,a){if(1&n&&(t.j41(0,"mat-card",7)(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3,"Address Information"),t.k0s()(),t.j41(4,"mat-card-content")(5,"div",8),t.DNE(6,Ge,5,1,"div",21),t.DNE(7,we,5,1,"div",21),t.DNE(8,Se,5,1,"div",12),t.DNE(9,Ae,5,1,"div",12),t.DNE(10,Ve,5,1,"div",12),t.DNE(11,Le,5,1,"div",12),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(6),t.Y8G("ngIf",e.customer.addressLine1),t.R7$(1),t.Y8G("ngIf",e.customer.addressLine2),t.R7$(1),t.Y8G("ngIf",e.customer.city),t.R7$(1),t.Y8G("ngIf",e.customer.state),t.R7$(1),t.Y8G("ngIf",e.customer.postalCode),t.R7$(1),t.Y8G("ngIf",e.customer.country)}}function Ye(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Referred By"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.customer.referredBy)}}function Ue(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Preferred Language"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.customer.preferredLanguage)}}function Xe(n,a){if(1&n&&(t.j41(0,"div",15)(1,"div",16),t.EFF(2),t.k0s(),t.j41(3,"div",17),t.EFF(4,"Last Order"),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(2),t.JRh(e.formatDate(e.customer.lastOrderDate))}}function ze(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Last Login"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.formatDateTime(e.customer.lastLoginDate))}}function Je(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Created By"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.customer.createdBy)}}function qe(n,a){if(1&n&&(t.j41(0,"mat-card",7)(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3,"Notes"),t.k0s()(),t.j41(4,"mat-card-content")(5,"p",23),t.EFF(6),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(6),t.JRh(e.customer.notes)}}function He(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.goBack())}),t.j41(3,"mat-icon"),t.EFF(4,"arrow_back"),t.k0s()(),t.j41(5,"h2"),t.EFF(6,"Customer Details"),t.k0s(),t.j41(7,"button",5),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.editCustomer())}),t.j41(8,"mat-icon"),t.EFF(9,"edit"),t.k0s(),t.EFF(10," Edit Customer "),t.k0s()(),t.j41(11,"div",6)(12,"mat-card",7)(13,"mat-card-header")(14,"mat-card-title"),t.EFF(15,"Basic Information"),t.k0s()(),t.j41(16,"mat-card-content")(17,"div",8)(18,"div",9)(19,"label"),t.EFF(20,"Full Name"),t.k0s(),t.j41(21,"span"),t.EFF(22),t.k0s()(),t.j41(23,"div",9)(24,"label"),t.EFF(25,"Email"),t.k0s(),t.j41(26,"span"),t.EFF(27),t.DNE(28,je,2,0,"mat-icon",10),t.k0s()(),t.j41(29,"div",9)(30,"label"),t.EFF(31,"Mobile Number"),t.k0s(),t.j41(32,"span"),t.EFF(33),t.DNE(34,De,2,0,"mat-icon",11),t.k0s()(),t.DNE(35,$e,5,1,"div",12),t.DNE(36,Ie,5,1,"div",12),t.DNE(37,Ne,5,1,"div",12),t.k0s()()(),t.DNE(38,Be,12,6,"mat-card",13),t.j41(39,"mat-card",7)(40,"mat-card-header")(41,"mat-card-title"),t.EFF(42,"Account Status"),t.k0s()(),t.j41(43,"mat-card-content")(44,"div",8)(45,"div",9)(46,"label"),t.EFF(47,"Status"),t.k0s(),t.j41(48,"mat-chip"),t.EFF(49),t.k0s()(),t.j41(50,"div",9)(51,"label"),t.EFF(52,"Account Active"),t.k0s(),t.j41(53,"span")(54,"mat-icon"),t.EFF(55),t.k0s(),t.EFF(56),t.k0s()(),t.j41(57,"div",9)(58,"label"),t.EFF(59,"Verified"),t.k0s(),t.j41(60,"span")(61,"mat-icon"),t.EFF(62),t.k0s(),t.EFF(63),t.k0s()(),t.DNE(64,Ye,5,1,"div",12),t.k0s()()(),t.j41(65,"mat-card",7)(66,"mat-card-header")(67,"mat-card-title"),t.EFF(68,"Preferences"),t.k0s()(),t.j41(69,"mat-card-content")(70,"div",8)(71,"div",9)(72,"label"),t.EFF(73,"Email Notifications"),t.k0s(),t.j41(74,"span")(75,"mat-icon"),t.EFF(76),t.k0s(),t.EFF(77),t.k0s()(),t.j41(78,"div",9)(79,"label"),t.EFF(80,"SMS Notifications"),t.k0s(),t.j41(81,"span")(82,"mat-icon"),t.EFF(83),t.k0s(),t.EFF(84),t.k0s()(),t.j41(85,"div",9)(86,"label"),t.EFF(87,"Promotional Emails"),t.k0s(),t.j41(88,"span")(89,"mat-icon"),t.EFF(90),t.k0s(),t.EFF(91),t.k0s()(),t.DNE(92,Ue,5,1,"div",12),t.k0s()()(),t.j41(93,"mat-card",7)(94,"mat-card-header")(95,"mat-card-title"),t.EFF(96,"Customer Metrics"),t.k0s()(),t.j41(97,"mat-card-content")(98,"div",14)(99,"div",15)(100,"div",16),t.EFF(101),t.k0s(),t.j41(102,"div",17),t.EFF(103,"Total Orders"),t.k0s()(),t.j41(104,"div",15)(105,"div",16),t.EFF(106),t.k0s(),t.j41(107,"div",17),t.EFF(108,"Total Spent"),t.k0s()(),t.j41(109,"div",15)(110,"div",16),t.EFF(111),t.k0s(),t.j41(112,"div",17),t.EFF(113,"Referrals"),t.k0s()(),t.DNE(114,Xe,5,1,"div",18),t.k0s()()(),t.j41(115,"mat-card",7)(116,"mat-card-header")(117,"mat-card-title"),t.EFF(118,"Account Timeline"),t.k0s()(),t.j41(119,"mat-card-content")(120,"div",8)(121,"div",9)(122,"label"),t.EFF(123,"Member Since"),t.k0s(),t.j41(124,"span"),t.EFF(125),t.k0s()(),t.j41(126,"div",9)(127,"label"),t.EFF(128,"Last Updated"),t.k0s(),t.j41(129,"span"),t.EFF(130),t.k0s()(),t.DNE(131,ze,5,1,"div",12),t.DNE(132,Je,5,1,"div",12),t.k0s()()(),t.DNE(133,qe,7,1,"mat-card",13),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(22),t.Lme("",e.customer.firstName," ",e.customer.lastName,""),t.R7$(5),t.SpI(" ",e.customer.email," "),t.R7$(1),t.Y8G("ngIf",e.customer.emailVerified),t.R7$(5),t.SpI(" ",e.customer.mobileNumber," "),t.R7$(1),t.Y8G("ngIf",e.customer.mobileVerified),t.R7$(1),t.Y8G("ngIf",e.customer.alternateMobileNumber),t.R7$(1),t.Y8G("ngIf",e.customer.gender),t.R7$(1),t.Y8G("ngIf",e.customer.dateOfBirth),t.R7$(1),t.Y8G("ngIf",e.customer.addressLine1||e.customer.city),t.R7$(10),t.HbH(e.getStatusClass(e.customer.status||"ACTIVE")),t.R7$(1),t.SpI(" ",e.customer.status||"ACTIVE"," "),t.R7$(5),t.HbH(e.customer.isActive?"status-active":"status-inactive"),t.R7$(1),t.SpI(" ",e.customer.isActive?"check_circle":"cancel"," "),t.R7$(1),t.SpI(" ",e.customer.isActive?"Yes":"No"," "),t.R7$(5),t.HbH(e.customer.isVerified?"status-active":"status-inactive"),t.R7$(1),t.SpI(" ",e.customer.isVerified?"verified_user":"pending"," "),t.R7$(1),t.SpI(" ",e.customer.isVerified?"Yes":"No"," "),t.R7$(1),t.Y8G("ngIf",e.customer.referredBy),t.R7$(11),t.HbH(e.customer.emailNotifications?"status-active":"status-inactive"),t.R7$(1),t.SpI(" ",e.customer.emailNotifications?"notifications_active":"notifications_off"," "),t.R7$(1),t.SpI(" ",e.customer.emailNotifications?"Enabled":"Disabled"," "),t.R7$(5),t.HbH(e.customer.smsNotifications?"status-active":"status-inactive"),t.R7$(1),t.SpI(" ",e.customer.smsNotifications?"sms":"sms_failed"," "),t.R7$(1),t.SpI(" ",e.customer.smsNotifications?"Enabled":"Disabled"," "),t.R7$(5),t.HbH(e.customer.promotionalEmails?"status-active":"status-inactive"),t.R7$(1),t.SpI(" ",e.customer.promotionalEmails?"mark_email_read":"mark_email_unread"," "),t.R7$(1),t.SpI(" ",e.customer.promotionalEmails?"Enabled":"Disabled"," "),t.R7$(1),t.Y8G("ngIf",e.customer.preferredLanguage),t.R7$(9),t.JRh(e.customer.totalOrders||0),t.R7$(5),t.JRh(e.formatCurrency(e.customer.totalSpent||0)),t.R7$(5),t.JRh(e.customer.referralCount||0),t.R7$(3),t.Y8G("ngIf",e.customer.lastOrderDate),t.R7$(11),t.JRh(e.formatDateTime(e.customer.createdAt||"")),t.R7$(5),t.JRh(e.formatDateTime(e.customer.updatedAt||"")),t.R7$(1),t.Y8G("ngIf",e.customer.lastLoginDate),t.R7$(1),t.Y8G("ngIf",e.customer.createdBy),t.R7$(1),t.Y8G("ngIf",e.customer.notes)}}function Ke(n,a){1&n&&(t.j41(0,"div",24),t.nrm(1,"mat-spinner"),t.j41(2,"p"),t.EFF(3,"Loading customer details..."),t.k0s()())}let Qe=(()=>{class n{constructor(e,o,i){this.route=e,this.router=o,this.customerService=i,this.customer=null,this.isLoading=!0,this.customerId=+this.route.snapshot.params.id}ngOnInit(){this.loadCustomer()}loadCustomer(){this.isLoading=!0,this.customerService.getCustomerById(this.customerId).subscribe({next:e=>{this.customer=e,this.isLoading=!1},error:e=>{console.error("Error loading customer:",e),this.isLoading=!1,y().fire({title:"Error!",text:"Failed to load customer details. Redirecting to customer list.",icon:"error",confirmButtonText:"OK"}).then(()=>{this.router.navigate(["/admin/customers"])})}})}editCustomer(){this.router.navigate(["/admin/customers",this.customerId,"edit"])}goBack(){this.router.navigate(["/admin/customers"])}formatCurrency(e){return this.customerService.formatCurrency(e||0)}formatDate(e){return this.customerService.formatDate(e)}formatDateTime(e){return this.customerService.formatDateTime(e)}getStatusClass(e){switch(e){case"ACTIVE":return"status-active";case"INACTIVE":return"status-inactive";case"BLOCKED":return"status-blocked";case"PENDING_VERIFICATION":return"status-pending";default:return""}}getGenderLabel(e){switch(e){case"MALE":return"Male";case"FEMALE":return"Female";case"OTHER":return"Other";case"PREFER_NOT_TO_SAY":return"Prefer not to say";default:return"Not specified"}}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(A.nX),t.rXU(A.Ix),t.rXU(rt.m))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-customer-detail"]],decls:2,vars:2,consts:[["class","customer-detail-container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"customer-detail-container"],[1,"header-section"],["mat-icon-button","",1,"back-button",3,"click"],["mat-raised-button","","color","primary",3,"click"],[1,"detail-content"],[1,"info-card"],[1,"info-grid"],[1,"info-item"],["class","verified-icon","matTooltip","Email Verified",4,"ngIf"],["class","verified-icon","matTooltip","Mobile Verified",4,"ngIf"],["class","info-item",4,"ngIf"],["class","info-card",4,"ngIf"],[1,"metrics-grid"],[1,"metric-item"],[1,"metric-value"],[1,"metric-label"],["class","metric-item",4,"ngIf"],["matTooltip","Email Verified",1,"verified-icon"],["matTooltip","Mobile Verified",1,"verified-icon"],["class","info-item full-width",4,"ngIf"],[1,"info-item","full-width"],[1,"notes-content"],[1,"loading-container"]],template:function(o,i){1&o&&(t.DNE(0,He,134,44,"div",0),t.DNE(1,Ke,4,0,"div",1)),2&o&&(t.Y8G("ngIf",!i.isLoading&&i.customer),t.R7$(1),t.Y8G("ngIf",i.isLoading))},dependencies:[p.bT,g.$z,g.iY,C.An,u.RN,u.m2,u.MM,u.dh,L.Jl,R.oV,h.LG],styles:[".customer-detail-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.header-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:24px}.header-section[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{margin-right:8px}.header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{flex:1;margin:0;color:#1976d2;font-weight:500}.header-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]{flex-wrap:wrap;gap:12px}.header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{order:2;flex-basis:100%}.header-section[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{order:1;margin-right:0}.header-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.back-button){order:3;width:100%}}.detail-content[_ngcontent-%COMP%]{display:grid;gap:24px}@media (min-width: 1024px){.detail-content[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}.info-card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a;border-radius:8px}@media (min-width: 1024px){.info-card[_ngcontent-%COMP%]:first-child{grid-column:1/-1}}.info-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:16px;border-bottom:1px solid #e0e0e0;margin-bottom:16px}.info-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#1976d2}.info-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:0}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}@media (max-width: 768px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-grid[_ngcontent-%COMP%]   .info-item.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#666;text-transform:uppercase;letter-spacing:.5px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#333;display:flex;align-items:center;gap:8px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .verified-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:16px}.metrics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:24px}.metrics-grid[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]{text-align:center;padding:16px;background-color:#f8f9fa;border-radius:8px}.metrics-grid[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1976d2;margin-bottom:4px}.metrics-grid[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   .metric-label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase;letter-spacing:.5px}mat-chip.status-active[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#2e7d32}mat-chip.status-inactive[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00}mat-chip.status-blocked[_ngcontent-%COMP%]{background-color:#ffebee;color:#d32f2f}mat-chip.status-pending[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}mat-icon.status-active[_ngcontent-%COMP%]{color:#4caf50}mat-icon.status-inactive[_ngcontent-%COMP%]{color:#ff9800}mat-icon.verified-icon[_ngcontent-%COMP%]{color:#4caf50}.notes-content[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:16px;border-radius:8px;border-left:4px solid #1976d2;margin:0;line-height:1.5;color:#333}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px;gap:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}@media (max-width: 1024px){.customer-detail-container[_ngcontent-%COMP%]{padding:16px}.detail-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.customer-detail-container[_ngcontent-%COMP%]{padding:8px}.info-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:16px}.metrics-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:16px}.metrics-grid[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]{padding:12px}.metrics-grid[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:20px}}@media print{.header-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.info-card[_ngcontent-%COMP%]{break-inside:avoid;box-shadow:none;border:1px solid #e0e0e0}}"]})}}return n})(),We=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/delivery-fees`,this.superAdminApiUrl=`${F.c.apiUrl}/super-admin/delivery-fees`}getAllRanges(){return this.http.get(`${this.superAdminApiUrl}`)}getActiveRanges(){return this.http.get(`${this.apiUrl}/active`)}createRange(e){return this.http.post(`${this.superAdminApiUrl}`,e)}updateRange(e,o){return this.http.put(`${this.superAdminApiUrl}/${e}`,o)}deleteRange(e){return this.http.delete(`${this.superAdminApiUrl}/${e}`)}getRangeById(e){return this.http.get(`${this.superAdminApiUrl}/${e}`)}toggleRangeStatus(e){return this.http.patch(`${this.superAdminApiUrl}/${e}/toggle-status`,{})}calculateFee(e){return this.http.post(`${this.apiUrl}/calculate`,e)}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ze(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",6)(1,"h3"),t.EFF(2,"Add New Delivery Fee Range"),t.k0s(),t.j41(3,"div",7)(4,"mat-form-field")(5,"mat-label"),t.EFF(6,"Min Distance (km)"),t.k0s(),t.j41(7,"input",8),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newRange.minDistanceKm=i)}),t.k0s()(),t.j41(8,"mat-form-field")(9,"mat-label"),t.EFF(10,"Max Distance (km)"),t.k0s(),t.j41(11,"input",8),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newRange.maxDistanceKm=i)}),t.k0s()(),t.j41(12,"mat-form-field")(13,"mat-label"),t.EFF(14,"Delivery Fee (\u20b9)"),t.k0s(),t.j41(15,"input",9),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newRange.deliveryFee=i)}),t.k0s()(),t.j41(16,"mat-form-field")(17,"mat-label"),t.EFF(18,"Partner Commission (\u20b9)"),t.k0s(),t.j41(19,"input",9),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newRange.partnerCommission=i)}),t.k0s()()(),t.j41(20,"div",10)(21,"button",11),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.addRange())}),t.EFF(22,"Add Range"),t.k0s(),t.j41(23,"button",12),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.cancelAdding())}),t.EFF(24,"Cancel"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(7),t.Y8G("ngModel",e.newRange.minDistanceKm),t.R7$(4),t.Y8G("ngModel",e.newRange.maxDistanceKm),t.R7$(4),t.Y8G("ngModel",e.newRange.deliveryFee),t.R7$(4),t.Y8G("ngModel",e.newRange.partnerCommission)}}function tn(n,a){1&n&&(t.j41(0,"div",13),t.nrm(1,"mat-spinner",14),t.j41(2,"p"),t.EFF(3,"Loading delivery fee ranges..."),t.k0s()())}function en(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Distance Range"),t.k0s())}function nn(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(1),t.JRh(o.getDistanceRangeText(e))}}function on(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",31)(1,"mat-form-field",32)(2,"input",8),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(3);return t.Njj(r.editingRange.minDistanceKm=i)}),t.k0s()(),t.j41(3,"span"),t.EFF(4,"to"),t.k0s(),t.j41(5,"mat-form-field",32)(6,"input",8),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(3);return t.Njj(r.editingRange.maxDistanceKm=i)}),t.k0s()(),t.j41(7,"span"),t.EFF(8,"km"),t.k0s()()}if(2&n){const e=t.XpG(3);t.R7$(2),t.Y8G("ngModel",e.editingRange.minDistanceKm),t.R7$(4),t.Y8G("ngModel",e.editingRange.maxDistanceKm)}}function an(n,a){if(1&n&&(t.j41(0,"td",28),t.DNE(1,nn,2,1,"span",29),t.DNE(2,on,9,2,"div",30),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)!==e.id),t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)===e.id)}}function rn(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Delivery Fee"),t.k0s())}function sn(n,a){if(1&n&&(t.j41(0,"span",35),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.SpI("\u20b9",e.deliveryFee,"")}}function cn(n,a){if(1&n){const e=t.RV6();t.j41(0,"mat-form-field",36)(1,"input",9),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(3);return t.Njj(r.editingRange.deliveryFee=i)}),t.k0s()()}if(2&n){const e=t.XpG(3);t.R7$(1),t.Y8G("ngModel",e.editingRange.deliveryFee)}}function ln(n,a){if(1&n&&(t.j41(0,"td",28),t.DNE(1,sn,2,1,"span",33),t.DNE(2,cn,2,1,"mat-form-field",34),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)!==e.id),t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)===e.id)}}function pn(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Partner Commission"),t.k0s())}function mn(n,a){if(1&n&&(t.j41(0,"span",39),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.SpI("\u20b9",e.partnerCommission,"")}}function dn(n,a){if(1&n){const e=t.RV6();t.j41(0,"mat-form-field",40)(1,"input",9),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(3);return t.Njj(r.editingRange.partnerCommission=i)}),t.k0s()()}if(2&n){const e=t.XpG(3);t.R7$(1),t.Y8G("ngModel",e.editingRange.partnerCommission)}}function gn(n,a){if(1&n&&(t.j41(0,"td",28),t.DNE(1,mn,2,1,"span",37),t.DNE(2,dn,2,1,"mat-form-field",38),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)!==e.id),t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)===e.id)}}function _n(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Status"),t.k0s())}function un(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.HbH(e.isActive?"status-active":"status-inactive"),t.R7$(1),t.SpI(" ",e.isActive?"Active":"Inactive"," ")}}function fn(n,a){if(1&n){const e=t.RV6();t.j41(0,"mat-slide-toggle",43),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(3);return t.Njj(r.editingRange.isActive=i)}),t.k0s()}if(2&n){const e=t.XpG(3);t.Y8G("ngModel",e.editingRange.isActive)}}function Cn(n,a){if(1&n&&(t.j41(0,"td",28),t.DNE(1,un,2,3,"span",41),t.DNE(2,fn,1,1,"mat-slide-toggle",42),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)!==e.id),t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)===e.id)}}function hn(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Actions"),t.k0s())}function Pn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",46)(1,"button",47),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.startEditing(i))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()(),t.j41(4,"button",48),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.deleteRange(i.id))}),t.j41(5,"mat-icon"),t.EFF(6,"delete"),t.k0s()()()}}function bn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",49)(1,"button",47),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.updateRange(i.editingRange))}),t.j41(2,"mat-icon"),t.EFF(3,"save"),t.k0s()(),t.j41(4,"button",50),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.cancelEditing())}),t.j41(5,"mat-icon"),t.EFF(6,"cancel"),t.k0s()()()}}function Mn(n,a){if(1&n&&(t.j41(0,"td",28),t.DNE(1,Pn,7,0,"div",44),t.DNE(2,bn,7,0,"div",45),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)!==e.id),t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)===e.id)}}function vn(n,a){1&n&&t.nrm(0,"tr",51)}function xn(n,a){1&n&&t.nrm(0,"tr",52)}function Fn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",53)(1,"mat-icon"),t.EFF(2,"local_shipping"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No delivery fee ranges configured"),t.k0s(),t.j41(5,"p"),t.EFF(6,"Add your first delivery fee range to get started"),t.k0s(),t.j41(7,"button",11),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.startAdding())}),t.EFF(8," Add Range "),t.k0s()()}}const ct=function(){return["distanceRange","deliveryFee","partnerCommission","status","actions"]};function On(n,a){if(1&n&&(t.j41(0,"div",15)(1,"table",16),t.qex(2,17),t.DNE(3,en,2,0,"th",18),t.DNE(4,an,3,2,"td",19),t.bVm(),t.qex(5,20),t.DNE(6,rn,2,0,"th",18),t.DNE(7,ln,3,2,"td",19),t.bVm(),t.qex(8,21),t.DNE(9,pn,2,0,"th",18),t.DNE(10,gn,3,2,"td",19),t.bVm(),t.qex(11,22),t.DNE(12,_n,2,0,"th",18),t.DNE(13,Cn,3,2,"td",19),t.bVm(),t.qex(14,23),t.DNE(15,hn,2,0,"th",18),t.DNE(16,Mn,3,2,"td",19),t.bVm(),t.DNE(17,vn,1,0,"tr",24),t.DNE(18,xn,1,0,"tr",25),t.k0s(),t.DNE(19,Fn,9,0,"div",26),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.ranges),t.R7$(16),t.Y8G("matHeaderRowDef",t.lJ4(4,ct)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(5,ct)),t.R7$(1),t.Y8G("ngIf",0===e.ranges.length)}}let kn=(()=>{class n{constructor(e,o){this.deliveryFeeService=e,this.snackBar=o,this.ranges=[],this.isLoading=!1,this.newRange={minDistanceKm:0,maxDistanceKm:0,deliveryFee:0,partnerCommission:0,isActive:!0},this.editingRange=null,this.isAddingRange=!1}ngOnInit(){this.loadRanges()}loadRanges(){this.isLoading=!0,this.deliveryFeeService.getAllRanges().subscribe({next:e=>{e.success?this.ranges=e.data||[]:this.snackBar.open("Failed to load delivery fee ranges","Close",{duration:3e3}),this.isLoading=!1},error:e=>{console.error("Error loading ranges:",e),this.snackBar.open("Error loading delivery fee ranges","Close",{duration:3e3}),this.isLoading=!1}})}addRange(){this.validateRange(this.newRange)&&this.deliveryFeeService.createRange(this.newRange).subscribe({next:e=>{e.success?(this.snackBar.open("Delivery fee range created successfully","Close",{duration:3e3}),this.loadRanges(),this.resetNewRange(),this.isAddingRange=!1):this.snackBar.open(e.message||"Failed to create range","Close",{duration:3e3})},error:e=>{console.error("Error creating range:",e),this.snackBar.open("Error creating delivery fee range","Close",{duration:3e3})}})}updateRange(e){!e.id||!this.validateRange(e)||this.deliveryFeeService.updateRange(e.id,e).subscribe({next:o=>{o.success?(this.snackBar.open("Delivery fee range updated successfully","Close",{duration:3e3}),this.loadRanges(),this.editingRange=null):this.snackBar.open(o.message||"Failed to update range","Close",{duration:3e3})},error:o=>{console.error("Error updating range:",o),this.snackBar.open("Error updating delivery fee range","Close",{duration:3e3})}})}deleteRange(e){confirm("Are you sure you want to delete this delivery fee range?")&&this.deliveryFeeService.deleteRange(e).subscribe({next:o=>{o.success?(this.snackBar.open("Delivery fee range deleted successfully","Close",{duration:3e3}),this.loadRanges()):this.snackBar.open(o.message||"Failed to delete range","Close",{duration:3e3})},error:o=>{console.error("Error deleting range:",o),this.snackBar.open("Error deleting delivery fee range","Close",{duration:3e3})}})}startEditing(e){this.editingRange={...e}}cancelEditing(){this.editingRange=null}startAdding(){this.isAddingRange=!0,this.resetNewRange()}cancelAdding(){this.isAddingRange=!1,this.resetNewRange()}resetNewRange(){this.newRange={minDistanceKm:0,maxDistanceKm:0,deliveryFee:0,partnerCommission:0,isActive:!0}}validateRange(e){return e.minDistanceKm<0||e.maxDistanceKm<=0?(this.snackBar.open("Distance values must be positive","Close",{duration:3e3}),!1):e.minDistanceKm>=e.maxDistanceKm?(this.snackBar.open("Maximum distance must be greater than minimum distance","Close",{duration:3e3}),!1):e.deliveryFee<=0||e.partnerCommission<=0?(this.snackBar.open("Fee and commission must be positive values","Close",{duration:3e3}),!1):!(e.partnerCommission>=e.deliveryFee&&(this.snackBar.open("Partner commission must be less than delivery fee","Close",{duration:3e3}),1))}getDistanceRangeText(e){return e.maxDistanceKm>=999?`${e.minDistanceKm}+ km`:`${e.minDistanceKm} - ${e.maxDistanceKm} km`}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(We),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-delivery-fee-management"]],decls:11,vars:4,consts:[[1,"delivery-fee-management"],[1,"page-header"],["mat-raised-button","","color","primary",3,"disabled","click"],["class","add-range-form",4,"ngIf"],["class","loading",4,"ngIf"],["class","ranges-table",4,"ngIf"],[1,"add-range-form"],[1,"form-row"],["matInput","","type","number","min","0","step","0.1",3,"ngModel","ngModelChange"],["matInput","","type","number","min","0","step","1",3,"ngModel","ngModelChange"],[1,"form-actions"],["mat-raised-button","","color","primary",3,"click"],["mat-button","",3,"click"],[1,"loading"],["diameter","40"],[1,"ranges-table"],["mat-table","",1,"mat-elevation-8",3,"dataSource"],["matColumnDef","distanceRange"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","deliveryFee"],["matColumnDef","partnerCommission"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["class","edit-distance",4,"ngIf"],[1,"edit-distance"],[1,"distance-input"],["class","fee-amount",4,"ngIf"],["class","fee-input",4,"ngIf"],[1,"fee-amount"],[1,"fee-input"],["class","commission-amount",4,"ngIf"],["class","commission-input",4,"ngIf"],[1,"commission-amount"],[1,"commission-input"],[3,"class",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelChange"],["class","action-buttons",4,"ngIf"],["class","edit-actions",4,"ngIf"],[1,"action-buttons"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],[1,"edit-actions"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-state"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3,"Delivery Fee Management"),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return i.startAdding()}),t.j41(5,"mat-icon"),t.EFF(6,"add"),t.k0s(),t.EFF(7," Add New Range "),t.k0s()(),t.DNE(8,Ze,25,4,"div",3),t.DNE(9,tn,4,0,"div",4),t.DNE(10,On,20,6,"div",5),t.k0s()),2&o&&(t.R7$(4),t.Y8G("disabled",i.isAddingRange),t.R7$(4),t.Y8G("ngIf",i.isAddingRange),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading))},dependencies:[p.bT,l.me,l.Q0,l.BC,l.VZ,l.vS,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,g.iY,C.An,k.fg,m.rl,m.nJ,h.LG,S.sG],styles:[".delivery-fee-management[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.delivery-fee-management[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:32px;padding-bottom:16px;border-bottom:1px solid #e0e0e0}.delivery-fee-management[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:600;color:#333}.delivery-fee-management[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.delivery-fee-management[_ngcontent-%COMP%]   .add-range-form[_ngcontent-%COMP%]{background:white;padding:24px;border-radius:8px;box-shadow:0 2px 8px #0000001a;margin-bottom:24px}.delivery-fee-management[_ngcontent-%COMP%]   .add-range-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#333}.delivery-fee-management[_ngcontent-%COMP%]   .add-range-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:20px}.delivery-fee-management[_ngcontent-%COMP%]   .add-range-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.delivery-fee-management[_ngcontent-%COMP%]   .add-range-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end}.delivery-fee-management[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px}.delivery-fee-management[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]{background:white;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000001a}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:600;color:#333}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .fee-amount[_ngcontent-%COMP%], .delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .commission-amount[_ngcontent-%COMP%]{font-weight:600;color:#2e7d32}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-active[_ngcontent-%COMP%]{color:#2e7d32;font-weight:500}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-inactive[_ngcontent-%COMP%]{color:#d32f2f;font-weight:500}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .edit-distance[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .edit-distance[_ngcontent-%COMP%]   .distance-input[_ngcontent-%COMP%]{width:80px}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .edit-distance[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#666}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .fee-input[_ngcontent-%COMP%], .delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .commission-input[_ngcontent-%COMP%]{width:100px}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%], .delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .edit-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;text-align:center}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#ccc;margin-bottom:16px}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#666}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;color:#999}@media (max-width: 768px){.delivery-fee-management[_ngcontent-%COMP%]{padding:16px}.delivery-fee-management[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:stretch}.delivery-fee-management[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.delivery-fee-management[_ngcontent-%COMP%]   .add-range-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-size:14px}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px}}"]})}}return n})(),W=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/promotions`}getAllPromoCodes(e){let o=new O.Nl;return e&&(e.status&&(o=o.set("status",e.status)),e.shopId&&(o=o.set("shopId",e.shopId.toString())),void 0!==e.page&&(o=o.set("page",e.page.toString())),void 0!==e.size&&(o=o.set("size",e.size.toString()))),this.http.get(this.apiUrl,{params:o}).pipe((0,x.T)(i=>i.content||i.data||i))}getPromoCodeById(e){return this.http.get(`${this.apiUrl}/${e}`).pipe((0,x.T)(o=>o.data||o))}getActivePromoCodes(e){let o=new O.Nl;return e&&(o=o.set("shopId",e.toString())),this.http.get(`${this.apiUrl}/active`,{params:o}).pipe((0,x.T)(i=>i.data||i))}createPromoCode(e){return this.http.post(this.apiUrl,e).pipe((0,x.T)(o=>o.data||o))}updatePromoCode(e,o){return this.http.put(`${this.apiUrl}/${e}`,o).pipe((0,x.T)(i=>i.data||i))}deletePromoCode(e){return this.http.delete(`${this.apiUrl}/${e}`)}validatePromoCode(e){return this.http.post(`${this.apiUrl}/validate`,e)}getPromoCodeStats(e){return this.http.get(`${this.apiUrl}/${e}/stats`).pipe((0,x.T)(o=>o.data||o))}getPromoCodeUsageHistory(e,o=0,i=20){const r=(new O.Nl).set("page",o.toString()).set("size",i.toString());return this.http.get(`${this.apiUrl}/${e}/usage`,{params:r}).pipe((0,x.T)(c=>c.data||c))}getCustomerUsageHistory(e){return this.http.get(`${this.apiUrl}/my-usage?customerId=${e}`).pipe((0,x.T)(o=>o.data||o))}activatePromoCode(e){return this.http.patch(`${this.apiUrl}/${e}/activate`,{}).pipe((0,x.T)(o=>o.data||o))}deactivatePromoCode(e){return this.http.patch(`${this.apiUrl}/${e}/deactivate`,{}).pipe((0,x.T)(o=>o.data||o))}getFormattedDiscount(e){switch(e.type){case"PERCENTAGE":return`${e.discountValue}% OFF`;case"FIXED_AMOUNT":return`\u20b9${e.discountValue} OFF`;case"FREE_SHIPPING":return"FREE DELIVERY";default:return"SPECIAL OFFER"}}getFormattedMinOrder(e){return e.minimumOrderAmount&&e.minimumOrderAmount>0?`Min order: \u20b9${e.minimumOrderAmount}`:"No minimum order"}isExpired(e){return new Date(e.endDate)<new Date}getStatusBadgeColor(e){switch(e){case"ACTIVE":return"success";case"INACTIVE":return"warning";case"EXPIRED":return"danger";default:return"secondary"}}uploadPromoImage(e){const o=new FormData;return o.append("file",e),o.append("folder","promos"),this.http.post(`${F.c.apiUrl}/uploads/image`,o).pipe((0,x.T)(i=>({imageUrl:i.data?.url||i.url||i.imageUrl||i})))}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function En(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("code")," ")}}function Rn(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("title")," ")}}function Tn(n,a){if(1&n&&(t.j41(0,"mat-option",47)(1,"mat-icon"),t.EFF(2),t.k0s(),t.EFF(3),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(2),t.JRh(e.icon),t.R7$(1),t.SpI(" ",e.label," ")}}function yn(n,a){1&n&&(t.j41(0,"span",24),t.EFF(1,"\u20b9\xa0"),t.k0s())}function jn(n,a){1&n&&(t.j41(0,"span",48),t.EFF(1,"%"),t.k0s())}function Dn(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("discountValue")," ")}}function $n(n,a){1&n&&(t.j41(0,"div",9)(1,"mat-form-field",10)(2,"mat-label"),t.EFF(3,"Maximum Discount Amount"),t.k0s(),t.nrm(4,"input",49),t.j41(5,"span",24),t.EFF(6,"\u20b9\xa0"),t.k0s(),t.j41(7,"mat-hint"),t.EFF(8,"Cap the discount at this amount (optional)"),t.k0s()()())}function In(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("startDate")," ")}}function Nn(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("endDate")," ")}}function Gn(n,a){if(1&n&&(t.j41(0,"mat-radio-button",47),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.SpI(" ",e.label," ")}}function wn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",50),t.nrm(1,"img",51),t.j41(2,"div",52)(3,"button",53),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.removeImage())}),t.j41(4,"mat-icon"),t.EFF(5,"delete"),t.k0s()()()()}if(2&n){const e=t.XpG();let o;t.R7$(1),t.Y8G("src",e.imagePreview||(null==(o=e.promoForm.get("imageUrl"))?null:o.value),t.B4B)}}function Sn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",54),t.bIt("click",function(){t.eBV(e),t.XpG();const i=t.sdS(129);return t.Njj(i.click())}),t.j41(1,"mat-icon",55),t.EFF(2,"cloud_upload"),t.k0s(),t.j41(3,"span",56),t.EFF(4,"Click to select banner image"),t.k0s(),t.j41(5,"span",57),t.EFF(6,"Recommended: 1200 x 400px, Max 5MB"),t.k0s()()}}function An(n,a){1&n&&t.nrm(0,"mat-spinner",63)}function Vn(n,a){1&n&&(t.j41(0,"mat-icon"),t.EFF(1,"cloud_upload"),t.k0s())}function Ln(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",58)(1,"span",59),t.EFF(2),t.k0s(),t.j41(3,"button",60),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.uploadImage())}),t.DNE(4,An,1,0,"mat-spinner",61),t.DNE(5,Vn,2,0,"mat-icon",13),t.j41(6,"span"),t.EFF(7),t.k0s()(),t.j41(8,"button",62),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.removeImage())}),t.EFF(9,"Cancel"),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(2),t.JRh(e.selectedFile.name),t.R7$(1),t.Y8G("disabled",e.isUploading),t.R7$(1),t.Y8G("ngIf",e.isUploading),t.R7$(1),t.Y8G("ngIf",!e.isUploading),t.R7$(2),t.JRh(e.isUploading?"Uploading...":"Upload"),t.R7$(1),t.Y8G("disabled",e.isUploading)}}function Bn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",64)(1,"button",65),t.bIt("click",function(){t.eBV(e),t.XpG();const i=t.sdS(129);return t.Njj(i.click())}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s(),t.EFF(4," Change Image "),t.k0s()()}}function Yn(n,a){1&n&&t.nrm(0,"mat-spinner",66)}function Un(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.JRh(e.isEditMode?"Update":"Create")}}let lt=(()=>{class n{constructor(e,o,i,r,c){this.fb=e,this.promoCodeService=o,this.snackBar=i,this.dialogRef=r,this.data=c,this.isEditMode=!1,this.isLoading=!1,this.isUploading=!1,this.selectedFile=null,this.imagePreview=null,this.discountTypes=[{value:"PERCENTAGE",label:"Percentage Discount",icon:"percent"},{value:"FIXED_AMOUNT",label:"Fixed Amount",icon:"attach_money"},{value:"FREE_SHIPPING",label:"Free Delivery",icon:"local_shipping"}],this.statusOptions=[{value:"ACTIVE",label:"Active",color:"primary"},{value:"INACTIVE",label:"Inactive",color:"warn"}],this.isEditMode="edit"===c.mode}ngOnInit(){this.initForm(),this.isEditMode&&this.data.promoCode&&this.populateForm(this.data.promoCode)}initForm(){const e=new Date,o=new Date;o.setMonth(o.getMonth()+1),this.promoForm=this.fb.group({code:["",[l.k0.required,l.k0.pattern(/^[A-Z0-9]+$/),l.k0.minLength(4),l.k0.maxLength(20)]],title:["",[l.k0.required,l.k0.maxLength(100)]],description:["",l.k0.maxLength(500)],type:["PERCENTAGE",l.k0.required],discountValue:[0,[l.k0.required,l.k0.min(0)]],minimumOrderAmount:[0,l.k0.min(0)],maximumDiscountAmount:[null],startDate:[e,l.k0.required],endDate:[o,l.k0.required],status:["ACTIVE",l.k0.required],usageLimit:[null,l.k0.min(1)],usageLimitPerCustomer:[null,l.k0.min(1)],firstTimeOnly:[!1],applicableToAllShops:[!0],imageUrl:[""]}),this.promoForm.get("type")?.valueChanges.subscribe(i=>{const r=this.promoForm.get("discountValue");r?.setValidators("PERCENTAGE"===i?[l.k0.required,l.k0.min(0),l.k0.max(100)]:[l.k0.required,l.k0.min(0)]),r?.updateValueAndValidity()}),this.isEditMode&&this.promoForm.get("code")?.disable()}populateForm(e){this.promoForm.patchValue({code:e.code,title:e.title,description:e.description,type:e.type,discountValue:e.discountValue,minimumOrderAmount:e.minimumOrderAmount||0,maximumDiscountAmount:e.maximumDiscountAmount,startDate:new Date(e.startDate),endDate:new Date(e.endDate),status:e.status,usageLimit:e.usageLimit,usageLimitPerCustomer:e.usageLimitPerCustomer,firstTimeOnly:e.firstTimeOnly,applicableToAllShops:e.applicableToAllShops,imageUrl:e.imageUrl}),e.imageUrl&&(this.imagePreview=e.imageUrl)}onSubmit(){if(this.promoForm.valid){this.isLoading=!0;const e=this.promoForm.getRawValue(),o={...e,code:e.code.toUpperCase(),startDate:this.formatDateToISO(e.startDate),endDate:this.formatDateToISO(e.endDate)};(this.isEditMode&&this.data.promoCode?this.promoCodeService.updatePromoCode(this.data.promoCode.id,o):this.promoCodeService.createPromoCode(o)).subscribe({next:()=>{this.isLoading=!1,this.showSnackBar(this.isEditMode?"Promo code updated successfully":"Promo code created successfully","success"),this.dialogRef.close(!0)},error:r=>{console.error("Error saving promo code:",r),this.isLoading=!1,this.showSnackBar(r.error?.message||"Failed to save promo code","error")}})}else this.markFormGroupTouched(this.promoForm),this.showSnackBar("Please fill all required fields correctly","error")}formatDateToISO(e){return e.toISOString()}markFormGroupTouched(e){Object.keys(e.controls).forEach(o=>{e.get(o)?.markAsTouched()})}getErrorMessage(e){const o=this.promoForm.get(e);return o?.hasError("required")?"This field is required":o?.hasError("pattern")?"Only uppercase letters and numbers allowed":o?.hasError("minlength")?`Minimum ${o.errors?.minlength.requiredLength} characters`:o?.hasError("maxlength")?`Maximum ${o.errors?.maxlength.requiredLength} characters`:o?.hasError("min")?`Minimum value is ${o.errors?.min.min}`:o?.hasError("max")?`Maximum value is ${o.errors?.max.max}`:""}onCancel(){this.dialogRef.close(!1)}generateRandomCode(){let o="";for(let i=0;i<8;i++)o+="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(36*Math.random()));this.promoForm.patchValue({code:o})}onFileSelected(e){const o=e.target;if(o.files&&o.files[0]){const i=o.files[0];if(!i.type.startsWith("image/"))return void this.showSnackBar("Please select an image file","error");if(i.size>5242880)return void this.showSnackBar("Image size should be less than 5MB","error");this.selectedFile=i;const r=new FileReader;r.onload=c=>{this.imagePreview=c.target?.result},r.readAsDataURL(i)}}uploadImage(){this.selectedFile&&(this.isUploading=!0,this.promoCodeService.uploadPromoImage(this.selectedFile).subscribe({next:e=>{this.promoForm.patchValue({imageUrl:e.imageUrl}),this.isUploading=!1,this.showSnackBar("Image uploaded successfully","success")},error:e=>{console.error("Error uploading image:",e),this.isUploading=!1,this.showSnackBar("Failed to upload image","error")}}))}removeImage(){this.selectedFile=null,this.imagePreview=null,this.promoForm.patchValue({imageUrl:""})}showSnackBar(e,o){this.snackBar.open(e,"Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:"success"===o?"snackbar-success":"snackbar-error"})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(l.ok),t.rXU(W),t.rXU(b.UG),t.rXU(M.CP),t.rXU(M.Vh))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-promo-code-form"]],decls:140,vars:28,consts:[[1,"dialog-container"],[1,"dialog-header"],["mat-dialog-title",""],[1,"header-icon"],["mat-icon-button","","mat-dialog-close",""],[1,"dialog-content"],[1,"promo-form",3,"formGroup"],[1,"form-section"],[1,"section-title"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","code","placeholder","e.g., WELCOME50",2,"text-transform","uppercase",3,"readonly"],["mat-icon-button","","matSuffix","","type","button","matTooltip","Generate random code",3,"disabled","click"],[4,"ngIf"],["matInput","","formControlName","title","placeholder","e.g., Welcome Offer"],["matInput","","formControlName","description","rows","3","placeholder","Brief description of the offer"],["align","end"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"half-width"],["matInput","","type","number","formControlName","discountValue","min","0"],["matPrefix","",4,"ngIf"],["matSuffix","",4,"ngIf"],["matInput","","type","number","formControlName","minimumOrderAmount","min","0"],["matPrefix",""],["class","form-row",4,"ngIf"],["matInput","","type","number","formControlName","usageLimit","min","1"],["matInput","","type","number","formControlName","usageLimitPerCustomer","min","1"],["formControlName","firstTimeOnly","color","primary"],["formControlName","applicableToAllShops","color","primary"],["matInput","","formControlName","startDate",3,"matDatepicker"],["matSuffix","",3,"for"],["startPicker",""],["matInput","","formControlName","endDate",3,"matDatepicker"],["endPicker",""],["formControlName","status",1,"status-group"],[1,"image-upload-container"],["type","file","accept","image/*",2,"display","none",3,"change"],["fileInput",""],["class","image-preview-area",4,"ngIf"],["class","upload-placeholder",3,"click",4,"ngIf"],["class","upload-actions",4,"ngIf"],["class","change-image-btn",4,"ngIf"],["align","end",1,"dialog-actions"],["mat-button","",3,"disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"],["diameter","20","class","button-spinner",4,"ngIf"],[3,"value"],["matSuffix",""],["matInput","","type","number","formControlName","maximumDiscountAmount","min","0"],[1,"image-preview-area"],["alt","Promo banner preview",1,"preview-image",3,"src"],[1,"image-overlay"],["mat-icon-button","","color","warn","matTooltip","Remove image","type","button",3,"click"],[1,"upload-placeholder",3,"click"],[1,"upload-icon"],[1,"upload-text"],[1,"upload-hint"],[1,"upload-actions"],[1,"file-name"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],["diameter","18",4,"ngIf"],["mat-button","","type","button",3,"disabled","click"],["diameter","18"],[1,"change-image-btn"],["mat-stroked-button","","type","button",3,"click"],["diameter","20",1,"button-spinner"]],template:function(o,i){if(1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2",2)(3,"mat-icon",3),t.EFF(4),t.k0s(),t.EFF(5),t.k0s(),t.j41(6,"button",4)(7,"mat-icon"),t.EFF(8,"close"),t.k0s()()(),t.j41(9,"mat-dialog-content",5)(10,"form",6)(11,"div",7)(12,"h3",8)(13,"mat-icon"),t.EFF(14,"info"),t.k0s(),t.EFF(15," Basic Information "),t.k0s(),t.j41(16,"div",9)(17,"mat-form-field",10)(18,"mat-label"),t.EFF(19,"Promo Code *"),t.k0s(),t.nrm(20,"input",11),t.j41(21,"button",12),t.bIt("click",function(){return i.generateRandomCode()}),t.j41(22,"mat-icon"),t.EFF(23,"casino"),t.k0s()(),t.j41(24,"mat-hint"),t.EFF(25,"Uppercase letters and numbers only"),t.k0s(),t.DNE(26,En,2,1,"mat-error",13),t.k0s()(),t.j41(27,"div",9)(28,"mat-form-field",10)(29,"mat-label"),t.EFF(30,"Title *"),t.k0s(),t.nrm(31,"input",14),t.DNE(32,Rn,2,1,"mat-error",13),t.k0s()(),t.j41(33,"div",9)(34,"mat-form-field",10)(35,"mat-label"),t.EFF(36,"Description"),t.k0s(),t.nrm(37,"textarea",15),t.j41(38,"mat-hint",16),t.EFF(39),t.k0s()()()(),t.j41(40,"div",7)(41,"h3",8)(42,"mat-icon"),t.EFF(43,"discount"),t.k0s(),t.EFF(44," Discount Settings "),t.k0s(),t.j41(45,"div",9)(46,"mat-form-field",10)(47,"mat-label"),t.EFF(48,"Discount Type *"),t.k0s(),t.j41(49,"mat-select",17),t.DNE(50,Tn,4,3,"mat-option",18),t.k0s()()(),t.j41(51,"div",9)(52,"mat-form-field",19)(53,"mat-label"),t.EFF(54,"Discount Value *"),t.k0s(),t.nrm(55,"input",20),t.DNE(56,yn,2,0,"span",21),t.DNE(57,jn,2,0,"span",22),t.DNE(58,Dn,2,1,"mat-error",13),t.k0s(),t.j41(59,"mat-form-field",19)(60,"mat-label"),t.EFF(61,"Minimum Order Amount"),t.k0s(),t.nrm(62,"input",23),t.j41(63,"span",24),t.EFF(64,"\u20b9\xa0"),t.k0s(),t.j41(65,"mat-hint"),t.EFF(66,"Orders below this won't qualify"),t.k0s()()(),t.DNE(67,$n,9,0,"div",25),t.k0s(),t.j41(68,"div",7)(69,"h3",8)(70,"mat-icon"),t.EFF(71,"people"),t.k0s(),t.EFF(72," Usage Limits "),t.k0s(),t.j41(73,"div",9)(74,"mat-form-field",19)(75,"mat-label"),t.EFF(76,"Total Usage Limit"),t.k0s(),t.nrm(77,"input",26),t.j41(78,"mat-hint"),t.EFF(79,"Total times this code can be used"),t.k0s()(),t.j41(80,"mat-form-field",19)(81,"mat-label"),t.EFF(82,"Per Customer Limit"),t.k0s(),t.nrm(83,"input",27),t.j41(84,"mat-hint"),t.EFF(85,"Times each customer can use this"),t.k0s()()(),t.j41(86,"div",9)(87,"mat-checkbox",28),t.EFF(88," First-time customers only "),t.k0s()(),t.j41(89,"div",9)(90,"mat-checkbox",29),t.EFF(91," Applicable to all shops "),t.k0s()()(),t.j41(92,"div",7)(93,"h3",8)(94,"mat-icon"),t.EFF(95,"calendar_today"),t.k0s(),t.EFF(96," Validity Period "),t.k0s(),t.j41(97,"div",9)(98,"mat-form-field",19)(99,"mat-label"),t.EFF(100,"Start Date *"),t.k0s(),t.nrm(101,"input",30)(102,"mat-datepicker-toggle",31)(103,"mat-datepicker",null,32),t.DNE(105,In,2,1,"mat-error",13),t.k0s(),t.j41(106,"mat-form-field",19)(107,"mat-label"),t.EFF(108,"End Date *"),t.k0s(),t.nrm(109,"input",33)(110,"mat-datepicker-toggle",31)(111,"mat-datepicker",null,34),t.DNE(113,Nn,2,1,"mat-error",13),t.k0s()()(),t.j41(114,"div",7)(115,"h3",8)(116,"mat-icon"),t.EFF(117,"toggle_on"),t.k0s(),t.EFF(118," Status "),t.k0s(),t.j41(119,"div",9)(120,"mat-radio-group",35),t.DNE(121,Gn,2,2,"mat-radio-button",18),t.k0s()()(),t.j41(122,"div",7)(123,"h3",8)(124,"mat-icon"),t.EFF(125,"image"),t.k0s(),t.EFF(126," Promotional Banner (Optional) "),t.k0s(),t.j41(127,"div",36)(128,"input",37,38),t.bIt("change",function(c){return i.onFileSelected(c)}),t.k0s(),t.DNE(130,wn,6,1,"div",39),t.DNE(131,Sn,7,0,"div",40),t.DNE(132,Ln,10,6,"div",41),t.DNE(133,Bn,5,0,"div",42),t.k0s()()()(),t.j41(134,"mat-dialog-actions",43)(135,"button",44),t.bIt("click",function(){return i.onCancel()}),t.EFF(136," Cancel "),t.k0s(),t.j41(137,"button",45),t.bIt("click",function(){return i.onSubmit()}),t.DNE(138,Yn,1,0,"mat-spinner",46),t.DNE(139,Un,2,1,"span",13),t.k0s()()()),2&o){const r=t.sdS(104),c=t.sdS(112);let d,T,P,w,q,St,At,Vt,Lt,Bt,Yt,Ut,Xt;t.R7$(4),t.JRh(i.isEditMode?"edit":"add_circle"),t.R7$(1),t.SpI(" ",i.isEditMode?"Edit Promo Code":"Create New Promo Code"," "),t.R7$(5),t.Y8G("formGroup",i.promoForm),t.R7$(10),t.Y8G("readonly",i.isEditMode),t.R7$(1),t.Y8G("disabled",i.isEditMode),t.R7$(5),t.Y8G("ngIf",null==(d=i.promoForm.get("code"))?null:d.touched),t.R7$(6),t.Y8G("ngIf",null==(T=i.promoForm.get("title"))?null:T.touched),t.R7$(7),t.SpI(" ",(null==(P=i.promoForm.get("description"))||null==P.value?null:P.value.length)||0,"/500 "),t.R7$(11),t.Y8G("ngForOf",i.discountTypes),t.R7$(6),t.Y8G("ngIf","FIXED_AMOUNT"===(null==(w=i.promoForm.get("type"))?null:w.value)),t.R7$(1),t.Y8G("ngIf","PERCENTAGE"===(null==(q=i.promoForm.get("type"))?null:q.value)),t.R7$(1),t.Y8G("ngIf",null==(St=i.promoForm.get("discountValue"))?null:St.touched),t.R7$(9),t.Y8G("ngIf","PERCENTAGE"===(null==(At=i.promoForm.get("type"))?null:At.value)),t.R7$(34),t.Y8G("matDatepicker",r),t.R7$(1),t.Y8G("for",r),t.R7$(3),t.Y8G("ngIf",null==(Vt=i.promoForm.get("startDate"))?null:Vt.touched),t.R7$(4),t.Y8G("matDatepicker",c),t.R7$(1),t.Y8G("for",c),t.R7$(3),t.Y8G("ngIf",null==(Lt=i.promoForm.get("endDate"))?null:Lt.touched),t.R7$(8),t.Y8G("ngForOf",i.statusOptions),t.R7$(9),t.Y8G("ngIf",i.imagePreview||(null==(Bt=i.promoForm.get("imageUrl"))?null:Bt.value)),t.R7$(1),t.Y8G("ngIf",!(i.imagePreview||null!=(Yt=i.promoForm.get("imageUrl"))&&Yt.value)),t.R7$(1),t.Y8G("ngIf",i.selectedFile&&!(null!=(Ut=i.promoForm.get("imageUrl"))&&Ut.value)),t.R7$(1),t.Y8G("ngIf",null==(Xt=i.promoForm.get("imageUrl"))?null:Xt.value),t.R7$(2),t.Y8G("disabled",i.isLoading),t.R7$(2),t.Y8G("disabled",i.isLoading||i.promoForm.invalid),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading)}},dependencies:[p.Sq,p.bT,l.qT,l.me,l.Q0,l.BC,l.cb,l.VZ,l.j4,l.JD,g.$z,g.iY,C.An,k.fg,m.rl,m.nJ,m.MV,m.TL,m.JW,m.yw,I.VO,N.wT,M.tx,M.BI,M.Yi,M.E7,V.Vh,V.bZ,V.bU,U.So,R.oV,h.LG,K.VT,K._g],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:90vh}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #e0e0e0}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0;font-size:24px;font-weight:600;color:#333}.header-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:28px;width:28px;height:28px}.dialog-content[_ngcontent-%COMP%]{padding:24px;overflow-y:auto}.promo-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.form-section[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:20px;border-left:4px solid #4CAF50}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:16px;font-weight:600;color:#333;margin:0 0 16px}.section-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:20px;width:20px;height:20px}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px}.form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.full-width[_ngcontent-%COMP%]{width:100%}.half-width[_ngcontent-%COMP%]{flex:1}mat-form-field[_ngcontent-%COMP%]{font-size:14px}.status-group[_ngcontent-%COMP%]{display:flex;gap:24px}.dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e0e0e0;gap:12px}.button-spinner[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}mat-checkbox[_ngcontent-%COMP%]{font-size:14px}  .mat-form-field-prefix,   .mat-form-field-suffix{align-self:center}  .mat-option{display:flex;align-items:center;gap:8px}  .mat-option mat-icon{font-size:20px;width:20px;height:20px}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{flex-direction:column}.half-width[_ngcontent-%COMP%]{width:100%}.status-group[_ngcontent-%COMP%]{flex-direction:column;gap:12px}}.image-upload-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.image-preview-area[_ngcontent-%COMP%]{position:relative;width:100%;max-width:400px;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000001a}.preview-image[_ngcontent-%COMP%]{width:100%;height:150px;object-fit:cover;display:block}.image-overlay[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:rgba(255,255,255,.9);border-radius:50%}.upload-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 24px;border:2px dashed #ccc;border-radius:8px;cursor:pointer;transition:all .3s ease;background:#fafafa}.upload-placeholder[_ngcontent-%COMP%]:hover{border-color:#4caf50;background:#f0f9f0}.upload-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#9e9e9e;margin-bottom:8px}.upload-placeholder[_ngcontent-%COMP%]:hover   .upload-icon[_ngcontent-%COMP%]{color:#4caf50}.upload-text[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#666;margin-bottom:4px}.upload-hint[_ngcontent-%COMP%]{font-size:12px;color:#999}.upload-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;background:#e8f5e9;border-radius:8px}.file-name[_ngcontent-%COMP%]{flex:1;font-size:13px;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.upload-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.upload-actions[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:4px}.change-image-btn[_ngcontent-%COMP%]{margin-top:8px}.change-image-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}  .snackbar-success{background-color:#4caf50!important;color:#fff!important}  .snackbar-error{background-color:#f44336!important;color:#fff!important}"]})}}return n})();function Xn(n,a){1&n&&(t.j41(0,"div",10),t.nrm(1,"mat-spinner"),t.k0s())}function zn(n,a){if(1&n&&(t.j41(0,"p",45),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.SpI(" ",e.data.promoCode.description," ")}}function Jn(n,a){if(1&n&&(t.j41(0,"div",27),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.SpI(" of ",e.data.promoCode.usageLimit," limit ")}}function qn(n,a){if(1&n&&(t.j41(0,"mat-card",46)(1,"mat-card-content")(2,"div",47)(3,"h4"),t.EFF(4,"Usage Progress"),t.k0s(),t.j41(5,"span",48),t.EFF(6),t.k0s()(),t.nrm(7,"mat-progress-bar",49),t.j41(8,"div",50)(9,"span"),t.EFF(10),t.k0s(),t.j41(11,"span"),t.EFF(12),t.k0s()()()()),2&n){const e=t.XpG(2);t.R7$(6),t.SpI(" ",e.getRemainingUses()," uses remaining "),t.R7$(1),t.Y8G("value",e.getUsagePercentage())("color",e.getUsagePercentage()>80?"warn":"primary"),t.R7$(3),t.Lme("",e.stats.totalUsage," / ",e.data.promoCode.usageLimit,""),t.R7$(2),t.SpI("",e.getUsagePercentage().toFixed(1),"%")}}function Hn(n,a){1&n&&(t.j41(0,"th",51),t.EFF(1,"Customer"),t.k0s())}function Kn(n,a){if(1&n&&(t.j41(0,"td",52)(1,"div",53)(2,"mat-icon"),t.EFF(3,"person"),t.k0s(),t.j41(4,"div")(5,"div",54),t.EFF(6),t.k0s(),t.j41(7,"div",55),t.EFF(8),t.k0s()()()()),2&n){const e=a.$implicit;t.R7$(6),t.JRh(e.customer.name),t.R7$(2),t.JRh(e.customer.email)}}function Qn(n,a){1&n&&(t.j41(0,"th",51),t.EFF(1,"Order"),t.k0s())}function Wn(n,a){if(1&n&&(t.j41(0,"td",52)(1,"div",56),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.order.orderNumber)}}function Zn(n,a){1&n&&(t.j41(0,"th",51),t.EFF(1,"Discount"),t.k0s())}function to(n,a){if(1&n&&(t.j41(0,"td",52)(1,"span",57),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatCurrency(e.discountApplied))}}function eo(n,a){1&n&&(t.j41(0,"th",51),t.EFF(1,"Order Amount"),t.k0s())}function no(n,a){if(1&n&&(t.j41(0,"td",52),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.SpI(" ",o.formatCurrency(e.orderAmount)," ")}}function oo(n,a){1&n&&(t.j41(0,"th",51),t.EFF(1,"Used At"),t.k0s())}function ao(n,a){if(1&n&&(t.j41(0,"td",52)(1,"div",58),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatDate(e.usedAt))}}function io(n,a){1&n&&t.nrm(0,"tr",59)}function ro(n,a){1&n&&t.nrm(0,"tr",60)}function so(n,a){1&n&&(t.j41(0,"tr",61)(1,"td",62)(2,"mat-icon"),t.EFF(3,"inbox"),t.k0s(),t.j41(4,"p"),t.EFF(5,"No usage history yet"),t.k0s()()())}const co=function(){return[10,25,50]};function lo(n,a){if(1&n&&(t.j41(0,"div",11)(1,"mat-card",12)(2,"mat-card-content")(3,"div",13)(4,"div",14),t.EFF(5),t.k0s(),t.j41(6,"mat-chip",15),t.EFF(7),t.k0s()(),t.j41(8,"h3"),t.EFF(9),t.k0s(),t.DNE(10,zn,2,1,"p",16),t.j41(11,"div",17)(12,"div",18)(13,"mat-icon"),t.EFF(14,"discount"),t.k0s(),t.j41(15,"span"),t.EFF(16),t.k0s()(),t.j41(17,"div",18)(18,"mat-icon"),t.EFF(19,"calendar_today"),t.k0s(),t.j41(20,"span"),t.EFF(21),t.k0s()()()()(),t.j41(22,"div",19)(23,"mat-card",20)(24,"mat-card-content")(25,"div",21)(26,"mat-icon"),t.EFF(27,"receipt"),t.k0s()(),t.j41(28,"div",22)(29,"div",23),t.EFF(30),t.k0s(),t.j41(31,"div",24),t.EFF(32,"Total Usage"),t.k0s(),t.DNE(33,Jn,2,1,"div",25),t.k0s()()(),t.j41(34,"mat-card",20)(35,"mat-card-content")(36,"div",26)(37,"mat-icon"),t.EFF(38,"people"),t.k0s()(),t.j41(39,"div",22)(40,"div",23),t.EFF(41),t.k0s(),t.j41(42,"div",24),t.EFF(43,"Unique Customers"),t.k0s(),t.j41(44,"div",27),t.EFF(45,"customers used this code"),t.k0s()()()(),t.j41(46,"mat-card",20)(47,"mat-card-content")(48,"div",28)(49,"mat-icon"),t.EFF(50,"money_off"),t.k0s()(),t.j41(51,"div",22)(52,"div",23),t.EFF(53),t.k0s(),t.j41(54,"div",24),t.EFF(55,"Total Discount"),t.k0s(),t.j41(56,"div",27),t.EFF(57,"discount amount given"),t.k0s()()()(),t.j41(58,"mat-card",20)(59,"mat-card-content")(60,"div",29)(61,"mat-icon"),t.EFF(62,"shopping_cart"),t.k0s()(),t.j41(63,"div",22)(64,"div",23),t.EFF(65),t.k0s(),t.j41(66,"div",24),t.EFF(67,"Avg Order Value"),t.k0s(),t.j41(68,"div",27),t.EFF(69,"average per order"),t.k0s()()()()(),t.DNE(70,qn,13,6,"mat-card",30),t.j41(71,"mat-card",31)(72,"mat-card-header")(73,"mat-card-title")(74,"mat-icon"),t.EFF(75,"history"),t.k0s(),t.EFF(76," Usage History "),t.k0s()(),t.j41(77,"mat-card-content")(78,"div",32)(79,"table",33),t.qex(80,34),t.DNE(81,Hn,2,0,"th",35),t.DNE(82,Kn,9,2,"td",36),t.bVm(),t.qex(83,37),t.DNE(84,Qn,2,0,"th",35),t.DNE(85,Wn,3,1,"td",36),t.bVm(),t.qex(86,38),t.DNE(87,Zn,2,0,"th",35),t.DNE(88,to,3,1,"td",36),t.bVm(),t.qex(89,39),t.DNE(90,eo,2,0,"th",35),t.DNE(91,no,2,1,"td",36),t.bVm(),t.qex(92,40),t.DNE(93,oo,2,0,"th",35),t.DNE(94,ao,3,1,"td",36),t.bVm(),t.DNE(95,io,1,0,"tr",41),t.DNE(96,ro,1,0,"tr",42),t.DNE(97,so,6,0,"tr",43),t.k0s()(),t.nrm(98,"mat-paginator",44),t.k0s()()()),2&n){const e=t.XpG();t.R7$(5),t.JRh(e.data.promoCode.code),t.R7$(1),t.Y8G("color",e.promoCodeService.getStatusBadgeColor(e.data.promoCode.status)),t.R7$(1),t.SpI(" ",e.data.promoCode.status," "),t.R7$(2),t.JRh(e.data.promoCode.title),t.R7$(1),t.Y8G("ngIf",e.data.promoCode.description),t.R7$(6),t.JRh(e.getFormattedDiscount()),t.R7$(5),t.Lme("",e.formatDate(e.data.promoCode.startDate)," - ",e.formatDate(e.data.promoCode.endDate),""),t.R7$(9),t.JRh(e.stats.totalUsage),t.R7$(3),t.Y8G("ngIf",e.data.promoCode.usageLimit),t.R7$(8),t.JRh(e.stats.uniqueCustomers),t.R7$(12),t.JRh(e.formatCurrency(e.stats.totalDiscountGiven)),t.R7$(12),t.JRh(e.formatCurrency(e.stats.averageOrderValue)),t.R7$(5),t.Y8G("ngIf",e.data.promoCode.usageLimit),t.R7$(9),t.Y8G("dataSource",e.dataSource),t.R7$(16),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(2),t.Y8G("pageSizeOptions",t.lJ4(18,co))}}let po=(()=>{class n{constructor(e,o){this.promoCodeService=e,this.data=o,this.stats=null,this.isLoading=!0,this.displayedColumns=["customer","order","discount","orderAmount","usedAt"],this.dataSource=new s.I6([])}ngOnInit(){this.loadStats(),this.loadUsageHistory()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}loadStats(){this.promoCodeService.getPromoCodeStats(this.data.promoCode.id).subscribe({next:e=>{this.stats=e,this.isLoading=!1},error:e=>{console.error("Error loading stats:",e),this.isLoading=!1}})}loadUsageHistory(){this.promoCodeService.getPromoCodeUsageHistory(this.data.promoCode.id,0,100).subscribe({next:e=>{this.dataSource.data=e.content},error:e=>{console.error("Error loading usage history:",e)}})}formatDate(e){return new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}formatCurrency(e){return`\u20b9${e.toFixed(2)}`}getFormattedDiscount(){return this.promoCodeService.getFormattedDiscount(this.data.promoCode)}getRemainingUses(){return this.data.promoCode.usageLimit&&this.stats?this.data.promoCode.usageLimit-this.stats.totalUsage:null}getUsagePercentage(){return this.data.promoCode.usageLimit&&this.stats?this.stats.totalUsage/this.data.promoCode.usageLimit*100:0}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(W),t.rXU(M.Vh))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-promo-code-stats"]],viewQuery:function(o,i){if(1&o&&t.GBs($.iy,5),2&o){let r;t.mGM(r=t.lsd())&&(i.paginator=r.first)}},decls:15,vars:3,consts:[[1,"stats-dialog"],[1,"dialog-header"],["mat-dialog-title",""],[1,"header-icon"],["mat-icon-button","","mat-dialog-close",""],[1,"dialog-content"],["class","loading-container",4,"ngIf"],["class","stats-container",4,"ngIf"],["align","end"],["mat-raised-button","","mat-dialog-close","","color","primary"],[1,"loading-container"],[1,"stats-container"],[1,"promo-info-card"],[1,"promo-header"],[1,"promo-code-badge"],[3,"color"],["class","promo-description",4,"ngIf"],[1,"promo-details"],[1,"detail-item"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon","total-usage"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],["class","stat-sublabel",4,"ngIf"],[1,"stat-icon","unique-customers"],[1,"stat-sublabel"],[1,"stat-icon","total-discount"],[1,"stat-icon","avg-order"],["class","progress-card",4,"ngIf"],[1,"history-card"],[1,"table-container"],["mat-table","",1,"usage-table",3,"dataSource"],["matColumnDef","customer"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","order"],["matColumnDef","discount"],["matColumnDef","orderAmount"],["matColumnDef","usedAt"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"promo-description"],[1,"progress-card"],[1,"progress-header"],[1,"remaining-uses"],["mode","determinate",3,"value","color"],[1,"progress-footer"],["mat-header-cell",""],["mat-cell",""],[1,"customer-info"],[1,"customer-name"],[1,"customer-email"],[1,"order-number"],[1,"discount-amount"],[1,"date-time"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","5",1,"mat-cell","no-data"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2",2)(3,"mat-icon",3),t.EFF(4,"bar_chart"),t.k0s(),t.EFF(5),t.k0s(),t.j41(6,"button",4)(7,"mat-icon"),t.EFF(8,"close"),t.k0s()()(),t.j41(9,"mat-dialog-content",5),t.DNE(10,Xn,2,0,"div",6),t.DNE(11,lo,99,19,"div",7),t.k0s(),t.j41(12,"mat-dialog-actions",8)(13,"button",9),t.EFF(14," Close "),t.k0s()()()),2&o&&(t.R7$(5),t.SpI(" Promo Code Statistics: ",i.data.promoCode.code," "),t.R7$(5),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading&&i.stats))},dependencies:[p.bT,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,s.ky,$.iy,g.$z,g.iY,C.An,u.RN,u.m2,u.MM,u.dh,M.tx,M.BI,M.Yi,M.E7,L.Jl,h.LG,Q.HM],styles:[".stats-dialog[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:90vh}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #e0e0e0}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0;font-size:24px;font-weight:600;color:#333}.header-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:28px;width:28px;height:28px}.dialog-content[_ngcontent-%COMP%]{padding:24px;overflow-y:auto}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:48px}.stats-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.promo-info-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4CAF50,#45a049);color:#fff}.promo-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.promo-code-badge[_ngcontent-%COMP%]{display:inline-block;padding:8px 16px;background:rgba(255,255,255,.2);border-radius:8px;font-weight:700;font-size:18px;letter-spacing:1px}.promo-info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:20px;font-weight:600}.promo-description[_ngcontent-%COMP%]{margin:0 0 16px;opacity:.9}.promo-details[_ngcontent-%COMP%]{display:flex;gap:24px;flex-wrap:wrap}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px}.detail-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.stat-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a;transition:transform .2s,box-shadow .2s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 12px #00000026}.stat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;padding:20px}.stat-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:60px;height:60px;border-radius:12px}.stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#fff}.stat-icon.total-usage[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2196F3,#1976D2)}.stat-icon.unique-customers[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9C27B0,#7B1FA2)}.stat-icon.total-discount[_ngcontent-%COMP%]{background:linear-gradient(135deg,#F44336,#D32F2F)}.stat-icon.avg-order[_ngcontent-%COMP%]{background:linear-gradient(135deg,#FF9800,#F57C00)}.stat-content[_ngcontent-%COMP%]{flex:1}.stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#333;line-height:1;margin-bottom:8px}.stat-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#666;margin-bottom:4px}.stat-sublabel[_ngcontent-%COMP%]{font-size:12px;color:#999}.progress-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a}.progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.progress-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#333}.remaining-uses[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#4caf50}mat-progress-bar[_ngcontent-%COMP%]{height:12px;border-radius:6px}.progress-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:8px;font-size:12px;color:#666}.history-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a}.history-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:16px 0}.history-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:18px;font-weight:600;color:#333}.table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-top:16px}.usage-table[_ngcontent-%COMP%]{width:100%;background:white}.customer-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.customer-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:24px;width:24px;height:24px}.customer-name[_ngcontent-%COMP%]{font-weight:600;color:#333}.customer-email[_ngcontent-%COMP%]{font-size:12px;color:#999}.order-number[_ngcontent-%COMP%]{font-family:monospace;font-weight:600;color:#2196f3}.discount-amount[_ngcontent-%COMP%]{color:#4caf50;font-weight:700}.date-time[_ngcontent-%COMP%]{font-size:13px;color:#666}.no-data[_ngcontent-%COMP%]{text-align:center;padding:48px;color:#999}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}@media (max-width: 768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.promo-details[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.progress-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}}"]})}}return n})();function mo(n,a){1&n&&(t.j41(0,"th",35),t.EFF(1,"Code"),t.k0s())}function go(n,a){if(1&n&&(t.j41(0,"td",36)(1,"div",37),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.SpI(" ",e.code," ")}}function _o(n,a){1&n&&(t.j41(0,"th",35),t.EFF(1,"Title"),t.k0s())}function uo(n,a){if(1&n&&(t.j41(0,"span",40),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.SpI(" ",e.description," ")}}function fo(n,a){if(1&n&&(t.j41(0,"td",36)(1,"div",38),t.EFF(2),t.DNE(3,uo,2,1,"span",39),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.SpI(" ",e.title," "),t.R7$(1),t.Y8G("ngIf",e.description)}}function Co(n,a){1&n&&(t.j41(0,"th",35),t.EFF(1,"Type"),t.k0s())}function ho(n,a){if(1&n&&(t.j41(0,"td",36)(1,"mat-chip"),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit;t.R7$(1),t.HbH("type-chip type-"+e.type.toLowerCase()),t.R7$(1),t.SpI(" ",e.type.replace("_"," ")," ")}}function Po(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"Discount"),t.k0s())}function bo(n,a){if(1&n&&(t.j41(0,"span",44),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.SpI(" (Max: \u20b9",e.maximumDiscountAmount,") ")}}function Mo(n,a){if(1&n&&(t.j41(0,"td",36)(1,"div",42)(2,"strong"),t.EFF(3),t.k0s(),t.DNE(4,bo,2,1,"span",43),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG();t.R7$(3),t.JRh(o.getFormattedDiscount(e)),t.R7$(1),t.Y8G("ngIf",e.maximumDiscountAmount)}}function vo(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"Min Order"),t.k0s())}function xo(n,a){if(1&n&&(t.j41(0,"td",36),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,o=t.XpG();t.R7$(1),t.SpI(" ",o.getFormattedMinOrder(e)," ")}}function Fo(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"Usage"),t.k0s())}function Oo(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",36)(1,"div",45),t.EFF(2),t.j41(3,"mat-icon",46),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.openStatsDialog(r))}),t.EFF(4," bar_chart "),t.k0s()()()}if(2&n){const e=a.$implicit,o=t.XpG();t.R7$(2),t.SpI(" ",o.getUsageText(e)," ")}}function ko(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"Valid Period"),t.k0s())}function Eo(n,a){if(1&n&&(t.j41(0,"td",36)(1,"div",47)(2,"div"),t.EFF(3),t.k0s(),t.j41(4,"div",48),t.EFF(5,"to"),t.k0s(),t.j41(6,"div"),t.EFF(7),t.k0s()()()),2&n){const e=a.$implicit,o=t.XpG();t.R7$(3),t.JRh(o.formatDate(e.startDate)),t.R7$(3),t.AVh("expired-date",o.isExpired(e)),t.R7$(1),t.JRh(o.formatDate(e.endDate))}}function Ro(n,a){1&n&&(t.j41(0,"th",35),t.EFF(1,"Status"),t.k0s())}function To(n,a){if(1&n&&(t.j41(0,"td",36)(1,"mat-chip",49),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG();t.R7$(1),t.Y8G("color",o.getStatusBadgeColor(e.status)),t.R7$(1),t.SpI(" ",e.status," ")}}function yo(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"Actions"),t.k0s())}function jo(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",36)(1,"button",50)(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",null,51)(6,"button",52),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.openEditDialog(r))}),t.j41(7,"mat-icon"),t.EFF(8,"edit"),t.k0s(),t.j41(9,"span"),t.EFF(10,"Edit"),t.k0s()(),t.j41(11,"button",52),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.openStatsDialog(r))}),t.j41(12,"mat-icon"),t.EFF(13,"bar_chart"),t.k0s(),t.j41(14,"span"),t.EFF(15,"View Stats"),t.k0s()(),t.j41(16,"button",52),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.toggleStatus(r))}),t.j41(17,"mat-icon"),t.EFF(18),t.k0s(),t.j41(19,"span"),t.EFF(20),t.k0s()(),t.nrm(21,"mat-divider"),t.j41(22,"button",53),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.deletePromoCode(r))}),t.j41(23,"mat-icon"),t.EFF(24,"delete"),t.k0s(),t.j41(25,"span"),t.EFF(26,"Delete"),t.k0s()()()()}if(2&n){const e=a.$implicit,o=t.sdS(5);t.R7$(1),t.Y8G("matMenuTriggerFor",o),t.R7$(17),t.JRh("ACTIVE"===e.status?"toggle_off":"toggle_on"),t.R7$(2),t.JRh("ACTIVE"===e.status?"Deactivate":"Activate")}}function Do(n,a){1&n&&t.nrm(0,"tr",54)}function $o(n,a){1&n&&t.nrm(0,"tr",55)}function Io(n,a){1&n&&(t.j41(0,"tr",56)(1,"td",57)(2,"div",58)(3,"mat-icon"),t.EFF(4,"inbox"),t.k0s(),t.j41(5,"p"),t.EFF(6,"No promo codes found"),t.k0s()()()())}function No(n,a){1&n&&(t.j41(0,"div",59),t.nrm(1,"mat-spinner"),t.k0s())}const Go=function(){return[10,25,50,100]};let wo=(()=>{class n{constructor(e,o,i){this.promoCodeService=e,this.dialog=o,this.snackBar=i,this.displayedColumns=["code","title","type","discount","minOrder","usage","dates","status","actions"],this.isLoading=!1,this.filterStatus="ALL",this.dataSource=new s.I6([])}ngOnInit(){this.loadPromoCodes()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}loadPromoCodes(){this.isLoading=!0,this.promoCodeService.getAllPromoCodes("ALL"!==this.filterStatus?{status:this.filterStatus}:void 0).subscribe({next:o=>{this.dataSource.data=o,this.isLoading=!1},error:o=>{console.error("Error loading promo codes:",o),this.showSnackBar("Failed to load promo codes","error"),this.isLoading=!1}})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}filterByStatus(e){this.filterStatus=e,this.loadPromoCodes()}openCreateDialog(){this.dialog.open(lt,{width:"800px",maxHeight:"90vh",data:{mode:"create"}}).afterClosed().subscribe(o=>{o&&(this.loadPromoCodes(),this.showSnackBar("Promo code created successfully","success"))})}openEditDialog(e){this.dialog.open(lt,{width:"800px",maxHeight:"90vh",data:{mode:"edit",promoCode:e}}).afterClosed().subscribe(i=>{i&&(this.loadPromoCodes(),this.showSnackBar("Promo code updated successfully","success"))})}openStatsDialog(e){this.dialog.open(po,{width:"900px",maxHeight:"90vh",data:{promoCode:e}})}toggleStatus(e){const o="ACTIVE"===e.status?"deactivate":"activate",i="activate"===o?"activated":"deactivated";("activate"===o?this.promoCodeService.activatePromoCode(e.id):this.promoCodeService.deactivatePromoCode(e.id)).subscribe({next:()=>{this.loadPromoCodes(),this.showSnackBar(`Promo code ${i} successfully`,"success")},error:c=>{console.error(`Error ${o}ing promo code:`,c),this.showSnackBar(`Failed to ${o} promo code`,"error")}})}deletePromoCode(e){confirm(`Are you sure you want to delete promo code "${e.code}"?`)&&this.promoCodeService.deletePromoCode(e.id).subscribe({next:()=>{this.loadPromoCodes(),this.showSnackBar("Promo code deleted successfully","success")},error:o=>{console.error("Error deleting promo code:",o),this.showSnackBar("Failed to delete promo code","error")}})}getFormattedDiscount(e){return this.promoCodeService.getFormattedDiscount(e)}getFormattedMinOrder(e){return this.promoCodeService.getFormattedMinOrder(e)}getStatusBadgeColor(e){return this.promoCodeService.getStatusBadgeColor(e)}isExpired(e){return this.promoCodeService.isExpired(e)}formatDate(e){return new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}getUsageText(e){return e.usageLimit?`${e.currentUsageCount||0}/${e.usageLimit} (${e.usageLimit-(e.currentUsageCount||0)} left)`:`${e.currentUsageCount||0} uses`}showSnackBar(e,o){this.snackBar.open(e,"Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:"success"===o?"snackbar-success":"snackbar-error"})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(W),t.rXU(M.bZ),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-promo-code-list"]],viewQuery:function(o,i){if(1&o&&(t.GBs($.iy,5),t.GBs(G.B4,5)),2&o){let r;t.mGM(r=t.lsd())&&(i.paginator=r.first),t.mGM(r=t.lsd())&&(i.sort=r.first)}},decls:64,vars:7,consts:[[1,"promo-code-container"],[1,"header-section"],[1,"page-title"],[1,"title-icon"],["mat-raised-button","","color","primary",3,"click"],[1,"filter-card"],[1,"filter-row"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by code or title",3,"keyup"],["matPrefix",""],[1,"status-toggle",3,"value","valueChange","change"],["value","ALL"],["value","ACTIVE"],["value","INACTIVE"],["value","EXPIRED"],[1,"table-card"],[1,"table-container"],["mat-table","","matSort","",1,"promo-table",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","type"],["matColumnDef","discount"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","minOrder"],["matColumnDef","usage"],["matColumnDef","dates"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],["class","loading-overlay",4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"promo-code-badge"],[1,"promo-title"],["class","promo-description",4,"ngIf"],[1,"promo-description"],["mat-header-cell",""],[1,"discount-info"],["class","max-discount",4,"ngIf"],[1,"max-discount"],[1,"usage-info"],["matTooltip","View detailed stats",1,"stats-icon",3,"click"],[1,"date-range"],[1,"date-separator"],[3,"color"],["mat-icon-button","","aria-label","Actions menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"delete-action",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","9",1,"mat-cell"],[1,"no-data"],[1,"loading-overlay"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2",2)(3,"mat-icon",3),t.EFF(4,"local_offer"),t.k0s(),t.EFF(5," Promo Code Management "),t.k0s(),t.j41(6,"button",4),t.bIt("click",function(){return i.openCreateDialog()}),t.j41(7,"mat-icon"),t.EFF(8,"add"),t.k0s(),t.EFF(9," Create Promo Code "),t.k0s()(),t.j41(10,"mat-card",5)(11,"mat-card-content")(12,"div",6)(13,"mat-form-field",7)(14,"mat-label"),t.EFF(15,"Search"),t.k0s(),t.j41(16,"input",8),t.bIt("keyup",function(c){return i.applyFilter(c)}),t.k0s(),t.j41(17,"mat-icon",9),t.EFF(18,"search"),t.k0s()(),t.j41(19,"mat-button-toggle-group",10),t.bIt("valueChange",function(c){return i.filterStatus=c})("change",function(){return i.filterByStatus(i.filterStatus)}),t.j41(20,"mat-button-toggle",11),t.EFF(21,"All"),t.k0s(),t.j41(22,"mat-button-toggle",12),t.EFF(23,"Active"),t.k0s(),t.j41(24,"mat-button-toggle",13),t.EFF(25,"Inactive"),t.k0s(),t.j41(26,"mat-button-toggle",14),t.EFF(27,"Expired"),t.k0s()()()()(),t.j41(28,"mat-card",15)(29,"mat-card-content")(30,"div",16)(31,"table",17),t.qex(32,18),t.DNE(33,mo,2,0,"th",19),t.DNE(34,go,3,1,"td",20),t.bVm(),t.qex(35,21),t.DNE(36,_o,2,0,"th",19),t.DNE(37,fo,4,2,"td",20),t.bVm(),t.qex(38,22),t.DNE(39,Co,2,0,"th",19),t.DNE(40,ho,3,3,"td",20),t.bVm(),t.qex(41,23),t.DNE(42,Po,2,0,"th",24),t.DNE(43,Mo,5,2,"td",20),t.bVm(),t.qex(44,25),t.DNE(45,vo,2,0,"th",24),t.DNE(46,xo,2,1,"td",20),t.bVm(),t.qex(47,26),t.DNE(48,Fo,2,0,"th",24),t.DNE(49,Oo,5,1,"td",20),t.bVm(),t.qex(50,27),t.DNE(51,ko,2,0,"th",24),t.DNE(52,Eo,8,4,"td",20),t.bVm(),t.qex(53,28),t.DNE(54,Ro,2,0,"th",19),t.DNE(55,To,3,2,"td",20),t.bVm(),t.qex(56,29),t.DNE(57,yo,2,0,"th",24),t.DNE(58,jo,27,3,"td",20),t.bVm(),t.DNE(59,Do,1,0,"tr",30),t.DNE(60,$o,1,0,"tr",31),t.DNE(61,Io,7,0,"tr",32),t.k0s()(),t.nrm(62,"mat-paginator",33),t.k0s()(),t.DNE(63,No,2,0,"div",34),t.k0s()),2&o&&(t.R7$(19),t.Y8G("value",i.filterStatus),t.R7$(12),t.Y8G("dataSource",i.dataSource),t.R7$(28),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(2),t.Y8G("pageSizeOptions",t.lJ4(6,Go)),t.R7$(1),t.Y8G("ngIf",i.isLoading))},dependencies:[p.bT,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,s.ky,$.iy,G.B4,G.aE,g.$z,g.iY,C.An,k.fg,m.rl,m.nJ,m.JW,u.RN,u.m2,L.Jl,R.oV,h.LG,X.ec,X.pc,f.kk,f.fb,f.Cp,z.q],styles:[".promo-code-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:28px;font-weight:600;color:#333;margin:0}.title-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#4caf50}.filter-card[_ngcontent-%COMP%]{margin-bottom:24px}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;flex-wrap:wrap}.search-field[_ngcontent-%COMP%]{flex:1;min-width:300px}.status-toggle[_ngcontent-%COMP%]{flex-shrink:0}.table-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.promo-table[_ngcontent-%COMP%]{width:100%;background:white}.promo-code-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;background:linear-gradient(135deg,#4CAF50,#45a049);color:#fff;font-weight:700;font-size:14px;border-radius:6px;letter-spacing:.5px;box-shadow:0 2px 4px #4caf504d}.promo-title[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.promo-description[_ngcontent-%COMP%]{font-size:12px;color:#666}.type-chip[_ngcontent-%COMP%]{font-size:11px;font-weight:600;text-transform:uppercase}.type-chip.type-percentage[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.type-chip.type-fixed_amount[_ngcontent-%COMP%]{background-color:#f3e5f5;color:#7b1fa2}.type-chip.type-free_shipping[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#388e3c}.discount-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.max-discount[_ngcontent-%COMP%]{font-size:11px;color:#999}.usage-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.stats-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#4caf50;cursor:pointer;transition:color .2s}.stats-icon[_ngcontent-%COMP%]:hover{color:#45a049}.date-range[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;font-size:12px}.date-separator[_ngcontent-%COMP%]{font-size:10px;color:#999}.expired-date[_ngcontent-%COMP%]{color:#f44336;font-weight:600}.delete-action[_ngcontent-%COMP%]{color:#f44336}.delete-action[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336}.no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;color:#999}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(255,255,255,.8);display:flex;align-items:center;justify-content:center;z-index:1000}@media (max-width: 768px){.promo-code-container[_ngcontent-%COMP%]{padding:16px}.header-section[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:stretch}.filter-row[_ngcontent-%COMP%]{flex-direction:column}.search-field[_ngcontent-%COMP%], .status-toggle[_ngcontent-%COMP%]{width:100%}}  .snackbar-success{background-color:#4caf50;color:#fff}  .snackbar-error{background-color:#f44336;color:#fff}"]})}}return n})(),So=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/marketing`}sendBulkMarketingMessage(e){return this.http.post(`${this.apiUrl}/send-bulk`,e)}getAvailableTemplates(){return this.http.get(`${this.apiUrl}/templates`)}getMarketingStats(){return this.http.get(`${this.apiUrl}/stats`)}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ao(n,a){if(1&n&&(t.j41(0,"mat-card",22)(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3,"Customer Statistics"),t.k0s()(),t.j41(4,"mat-card-content")(5,"div",23)(6,"div",24)(7,"div",25),t.EFF(8),t.k0s(),t.j41(9,"div",26),t.EFF(10,"Total Customers"),t.k0s()(),t.j41(11,"div",24)(12,"div",25),t.EFF(13),t.k0s(),t.j41(14,"div",26),t.EFF(15,"Active Customers"),t.k0s()(),t.j41(16,"div",24)(17,"div",25),t.EFF(18),t.k0s(),t.j41(19,"div",26),t.EFF(20,"With Mobile Number"),t.k0s()(),t.j41(21,"div",27)(22,"div",25),t.EFF(23),t.k0s(),t.j41(24,"div",26),t.EFF(25,"Eligible for Marketing"),t.k0s()()()()()),2&n){const e=t.XpG();t.R7$(8),t.JRh(e.stats.totalCustomers),t.R7$(5),t.JRh(e.stats.activeCustomers),t.R7$(5),t.JRh(e.stats.customersWithMobile),t.R7$(5),t.JRh(e.stats.eligibleForMarketing)}}function Vo(n,a){if(1&n&&(t.j41(0,"mat-option",28),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.templateName),t.R7$(1),t.SpI(" ",e.displayName," ")}}function Lo(n,a){if(1&n&&(t.j41(0,"mat-hint"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();let o;t.R7$(1),t.SpI(" ",null==(o=e.getSelectedTemplate())?null:o.description," ")}}function Bo(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Please select a template "),t.k0s())}function Yo(n,a){if(1&n&&(t.j41(0,"div",29)(1,"mat-icon"),t.EFF(2,"info"),t.k0s(),t.j41(3,"div",30)(4,"strong"),t.EFF(5,"Parameter Description:"),t.k0s(),t.EFF(6),t.k0s()()),2&n){const e=t.XpG();let o;t.R7$(6),t.SpI(" ",null==(o=e.getSelectedTemplate())?null:o.parameterDescription," ")}}function Uo(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Image URL is required for marketing messages "),t.k0s())}function Xo(n,a){if(1&n&&(t.j41(0,"mat-form-field",5)(1,"mat-label"),t.EFF(2,"Marketing Image URL"),t.k0s(),t.nrm(3,"input",31),t.j41(4,"mat-hint",12),t.EFF(5," The image that will appear in the WhatsApp message header "),t.k0s(),t.DNE(6,Uo,2,0,"mat-error",8),t.k0s()),2&n){const e=t.XpG();let o;t.R7$(6),t.Y8G("ngIf",null==(o=e.marketingForm.get("imageUrl"))?null:o.hasError("required"))}}function zo(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Message content is required "),t.k0s())}function Jo(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Message must not exceed 500 characters "),t.k0s())}function qo(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Second message content is required "),t.k0s())}function Ho(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Message must not exceed 500 characters "),t.k0s())}function Ko(n,a){if(1&n&&(t.j41(0,"mat-form-field",5)(1,"mat-label"),t.EFF(2,"Message Content (Parameter 2)"),t.k0s(),t.j41(3,"textarea",32),t.EFF(4,"          "),t.k0s(),t.j41(5,"mat-hint",12),t.EFF(6),t.k0s(),t.j41(7,"mat-hint",13),t.EFF(8),t.k0s(),t.DNE(9,qo,2,0,"mat-error",8),t.DNE(10,Ho,2,0,"mat-error",8),t.k0s()),2&n){const e=t.XpG();let o,i,r;t.R7$(3),t.Mz_("placeholder","Enter the second message content that will replace ",2," in the template"),t.R7$(3),t.SpI(" This text will be inserted into the template at the ",2," placeholder "),t.R7$(2),t.SpI(" ",(null==(o=e.marketingForm.get("messageParam2"))||null==o.value?null:o.value.length)||0,"/500 "),t.R7$(1),t.Y8G("ngIf",null==(i=e.marketingForm.get("messageParam2"))?null:i.hasError("required")),t.R7$(1),t.Y8G("ngIf",null==(r=e.marketingForm.get("messageParam2"))?null:r.hasError("maxlength"))}}function Qo(n,a){if(1&n&&(t.j41(0,"mat-option",28),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.SpI(" ",e.label," ")}}function Wo(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Please select target audience "),t.k0s())}function Zo(n,a){1&n&&(t.j41(0,"mat-icon"),t.EFF(1,"send"),t.k0s())}function ta(n,a){1&n&&t.nrm(0,"mat-spinner",33)}function ea(n,a){1&n&&(t.j41(0,"span"),t.EFF(1,"Send Messages"),t.k0s())}function na(n,a){1&n&&(t.j41(0,"span"),t.EFF(1,"Sending..."),t.k0s())}function oa(n,a){if(1&n&&(t.j41(0,"mat-card",34)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),t.EFF(4),t.k0s(),t.EFF(5," Send Results "),t.k0s()(),t.j41(6,"mat-card-content")(7,"div",35)(8,"p",36),t.EFF(9),t.k0s(),t.j41(10,"div",37)(11,"div",38)(12,"mat-icon"),t.EFF(13,"done"),t.k0s(),t.j41(14,"div")(15,"div",25),t.EFF(16),t.k0s(),t.j41(17,"div",26),t.EFF(18,"Successful"),t.k0s()()(),t.j41(19,"div",39)(20,"mat-icon"),t.EFF(21,"close"),t.k0s(),t.j41(22,"div")(23,"div",25),t.EFF(24),t.k0s(),t.j41(25,"div",26),t.EFF(26,"Failed"),t.k0s()()(),t.j41(27,"div",40)(28,"mat-icon"),t.EFF(29,"people"),t.k0s(),t.j41(30,"div")(31,"div",25),t.EFF(32),t.k0s(),t.j41(33,"div",26),t.EFF(34,"Total"),t.k0s()()()(),t.nrm(35,"mat-progress-bar",41),t.j41(36,"div",42),t.EFF(37),t.k0s(),t.j41(38,"div",43)(39,"p")(40,"strong"),t.EFF(41,"Template Used:"),t.k0s(),t.EFF(42),t.k0s(),t.j41(43,"p")(44,"strong"),t.EFF(45,"Message Content:"),t.k0s(),t.EFF(46),t.k0s()()()()()),2&n){const e=t.XpG();t.R7$(3),t.AVh("success",e.lastResult.success)("error",!e.lastResult.success),t.R7$(1),t.SpI(" ",e.lastResult.success?"check_circle":"error"," "),t.R7$(5),t.JRh(e.lastResult.message),t.R7$(7),t.JRh(e.lastResult.successCount),t.R7$(8),t.JRh(e.lastResult.failureCount),t.R7$(8),t.JRh(e.lastResult.totalCustomers),t.R7$(3),t.Y8G("value",e.getSuccessRate())("color",e.getSuccessRate()>80?"primary":"warn"),t.R7$(2),t.SpI(" Success Rate: ",e.getSuccessRate().toFixed(1),"% "),t.R7$(5),t.SpI(" ",e.lastResult.templateUsed,""),t.R7$(4),t.SpI(" ",e.lastResult.messageParam,"")}}let aa=(()=>{class n{constructor(e,o,i){this.fb=e,this.marketingService=o,this.snackBar=i,this.templates=[],this.stats=null,this.isLoading=!1,this.isSending=!1,this.lastResult=null,this.targetAudienceOptions=[{value:"ALL_CUSTOMERS",label:"All Active Customers"}],this.initializeForm()}ngOnInit(){this.loadTemplates(),this.loadStats()}initializeForm(){this.marketingForm=this.fb.group({templateName:["",l.k0.required],messageParam:["",[l.k0.required,l.k0.maxLength(500)]],messageParam2:[""],imageUrl:[""],targetAudience:["ALL_CUSTOMERS",l.k0.required]}),this.marketingForm.get("templateName")?.valueChanges.subscribe(e=>{this.updateFormValidators(e)})}updateFormValidators(e){const o=this.marketingForm.get("messageParam2"),i=this.marketingForm.get("imageUrl");o?.clearValidators(),i?.clearValidators(),"marketingmsg"===e&&(i?.setValidators([l.k0.required]),o?.setValidators([l.k0.required,l.k0.maxLength(500)])),o?.updateValueAndValidity(),i?.updateValueAndValidity()}isMarketingMsgTemplate(){return"marketingmsg"===this.marketingForm.get("templateName")?.value}loadTemplates(){this.isLoading=!0,this.marketingService.getAvailableTemplates().subscribe({next:e=>{this.templates=e,this.isLoading=!1,e.length>0&&this.marketingForm.patchValue({templateName:e[0].templateName})},error:e=>{console.error("Error loading templates:",e),this.snackBar.open("Failed to load templates","Close",{duration:3e3,panelClass:["error-snackbar"]}),this.isLoading=!1}})}loadStats(){this.marketingService.getMarketingStats().subscribe({next:e=>{this.stats=e},error:e=>{console.error("Error loading stats:",e)}})}getSelectedTemplate(){const e=this.marketingForm.get("templateName")?.value;return this.templates.find(o=>o.templateName===e)}onSendMessages(){if(this.marketingForm.invalid)return void this.snackBar.open("Please fill in all required fields","Close",{duration:3e3,panelClass:["error-snackbar"]});const e=this.marketingForm.value;confirm(`Are you sure you want to send marketing messages to ${this.stats?.eligibleForMarketing||0} customers?\n\nTemplate: ${this.getSelectedTemplate()?.displayName}\nMessage: ${e.messageParam}\n\nThis action cannot be undone.`)&&(this.isSending=!0,this.lastResult=null,this.marketingService.sendBulkMarketingMessage(e).subscribe({next:r=>{this.isSending=!1,this.lastResult=r,r.success?(this.snackBar.open(`Successfully sent ${r.successCount} messages!`,"Close",{duration:5e3,panelClass:["success-snackbar"]}),this.marketingForm.patchValue({messageParam:""}),this.loadStats()):this.snackBar.open(`Failed to send messages: ${r.message}`,"Close",{duration:5e3,panelClass:["error-snackbar"]})},error:r=>{console.error("Error sending marketing messages:",r),this.isSending=!1,this.snackBar.open("Failed to send marketing messages. Please try again.","Close",{duration:5e3,panelClass:["error-snackbar"]})}}))}getSuccessRate(){return this.lastResult&&0!==this.lastResult.totalCustomers?this.lastResult.successCount/this.lastResult.totalCustomers*100:0}onReset(){this.marketingForm.reset({templateName:this.templates.length>0?this.templates[0].templateName:"",targetAudience:"ALL_CUSTOMERS"}),this.lastResult=null}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(l.ok),t.rXU(So),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-marketing-messages"]],decls:75,vars:23,consts:[[1,"marketing-messages-container"],[1,"header-card"],["class","stats-card",4,"ngIf"],[1,"form-card"],[1,"marketing-form",3,"formGroup"],["appearance","outline",1,"full-width"],["formControlName","templateName","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","template-info",4,"ngIf"],["appearance","outline","class","full-width",4,"ngIf"],["matInput","","formControlName","messageParam","rows","4","required","","maxlength","500",3,"placeholder"],["align","start"],["align","end"],["formControlName","targetAudience","required",""],[1,"form-actions"],["mat-raised-button","","color","primary",3,"disabled","click"],["diameter","20",4,"ngIf"],["mat-stroked-button","",3,"disabled","click"],["class","results-card",4,"ngIf"],[1,"notice-card"],[1,"notice-content"],[1,"stats-card"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],[1,"stat-item","highlight"],[3,"value"],[1,"template-info"],[1,"info-text"],["matInput","","formControlName","imageUrl","placeholder","Enter image URL (e.g., https://example.com/image.jpg)","required",""],["matInput","","formControlName","messageParam2","rows","4","required","","maxlength","500",3,"placeholder"],["diameter","20"],[1,"results-card"],[1,"result-summary"],[1,"result-message"],[1,"result-stats"],[1,"result-stat","success"],[1,"result-stat","failure"],[1,"result-stat","total"],["mode","determinate",3,"value","color"],[1,"success-rate"],[1,"result-details"]],template:function(o,i){if(1&o&&(t.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),t.EFF(5,"campaign"),t.k0s(),t.EFF(6," WhatsApp Marketing Messages "),t.k0s(),t.j41(7,"mat-card-subtitle"),t.EFF(8," Send bulk marketing messages to customers via WhatsApp using MSG91 "),t.k0s()()(),t.DNE(9,Ao,26,4,"mat-card",2),t.j41(10,"mat-card",3)(11,"mat-card-header")(12,"mat-card-title"),t.EFF(13,"Send Marketing Message"),t.k0s()(),t.j41(14,"mat-card-content")(15,"form",4)(16,"mat-form-field",5)(17,"mat-label"),t.EFF(18,"Select Template"),t.k0s(),t.j41(19,"mat-select",6),t.DNE(20,Vo,2,2,"mat-option",7),t.k0s(),t.DNE(21,Lo,2,1,"mat-hint",8),t.DNE(22,Bo,2,0,"mat-error",8),t.k0s(),t.DNE(23,Yo,7,1,"div",9),t.DNE(24,Xo,7,1,"mat-form-field",10),t.j41(25,"mat-form-field",5)(26,"mat-label"),t.EFF(27),t.k0s(),t.j41(28,"textarea",11),t.EFF(29,"          "),t.k0s(),t.j41(30,"mat-hint",12),t.EFF(31),t.k0s(),t.j41(32,"mat-hint",13),t.EFF(33),t.k0s(),t.DNE(34,zo,2,0,"mat-error",8),t.DNE(35,Jo,2,0,"mat-error",8),t.k0s(),t.DNE(36,Ko,11,5,"mat-form-field",10),t.j41(37,"mat-form-field",5)(38,"mat-label"),t.EFF(39,"Target Audience"),t.k0s(),t.j41(40,"mat-select",14),t.DNE(41,Qo,2,2,"mat-option",7),t.k0s(),t.j41(42,"mat-hint"),t.EFF(43," Messages will be sent to active customers who have SMS notifications enabled "),t.k0s(),t.DNE(44,Wo,2,0,"mat-error",8),t.k0s(),t.j41(45,"div",15)(46,"button",16),t.bIt("click",function(){return i.onSendMessages()}),t.DNE(47,Zo,2,0,"mat-icon",8),t.DNE(48,ta,1,0,"mat-spinner",17),t.DNE(49,ea,2,0,"span",8),t.DNE(50,na,2,0,"span",8),t.k0s(),t.j41(51,"button",18),t.bIt("click",function(){return i.onReset()}),t.j41(52,"mat-icon"),t.EFF(53,"refresh"),t.k0s(),t.EFF(54," Reset "),t.k0s()()()()(),t.DNE(55,oa,47,14,"mat-card",19),t.j41(56,"mat-card",20)(57,"mat-card-content")(58,"div",21)(59,"mat-icon"),t.EFF(60,"warning"),t.k0s(),t.j41(61,"div")(62,"h4"),t.EFF(63,"Important Information"),t.k0s(),t.j41(64,"ul")(65,"li"),t.EFF(66,"Messages will only be sent to active customers with SMS notifications enabled"),t.k0s(),t.j41(67,"li"),t.EFF(68,"Customers must have a valid mobile number"),t.k0s(),t.j41(69,"li"),t.EFF(70,"Templates must be pre-approved in MSG91"),t.k0s(),t.j41(71,"li"),t.EFF(72,"There is a small delay between messages to avoid rate limiting"),t.k0s(),t.j41(73,"li"),t.EFF(74,"Please review the message content carefully before sending"),t.k0s()()()()()()()),2&o){let r,c,d,T,P;t.R7$(9),t.Y8G("ngIf",i.stats),t.R7$(6),t.Y8G("formGroup",i.marketingForm),t.R7$(5),t.Y8G("ngForOf",i.templates),t.R7$(1),t.Y8G("ngIf",i.getSelectedTemplate()),t.R7$(1),t.Y8G("ngIf",null==(r=i.marketingForm.get("templateName"))?null:r.hasError("required")),t.R7$(1),t.Y8G("ngIf",i.getSelectedTemplate()),t.R7$(1),t.Y8G("ngIf",i.isMarketingMsgTemplate()),t.R7$(3),t.JRh(i.isMarketingMsgTemplate()?"Message Content (Parameter 1)":"Message Content"),t.R7$(1),t.Mz_("placeholder","Enter the message content that will replace ",1," in the template"),t.R7$(3),t.SpI(" This text will be inserted into the template at the ",1," placeholder "),t.R7$(2),t.SpI(" ",(null==(c=i.marketingForm.get("messageParam"))||null==c.value?null:c.value.length)||0,"/500 "),t.R7$(1),t.Y8G("ngIf",null==(d=i.marketingForm.get("messageParam"))?null:d.hasError("required")),t.R7$(1),t.Y8G("ngIf",null==(T=i.marketingForm.get("messageParam"))?null:T.hasError("maxlength")),t.R7$(1),t.Y8G("ngIf",i.isMarketingMsgTemplate()),t.R7$(5),t.Y8G("ngForOf",i.targetAudienceOptions),t.R7$(3),t.Y8G("ngIf",null==(P=i.marketingForm.get("targetAudience"))?null:P.hasError("required")),t.R7$(2),t.Y8G("disabled",i.marketingForm.invalid||i.isSending||i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isSending),t.R7$(1),t.Y8G("ngIf",i.isSending),t.R7$(1),t.Y8G("ngIf",!i.isSending),t.R7$(1),t.Y8G("ngIf",i.isSending),t.R7$(1),t.Y8G("disabled",i.isSending||i.isLoading),t.R7$(4),t.Y8G("ngIf",i.lastResult)}},dependencies:[p.Sq,p.bT,l.qT,l.me,l.BC,l.cb,l.YS,l.tU,l.j4,l.JD,g.$z,C.An,k.fg,m.rl,m.nJ,m.MV,m.TL,I.VO,N.wT,u.RN,u.m2,u.MM,u.Lc,u.dh,h.LG,Q.HM],styles:[".marketing-messages-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.marketing-messages-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-bottom:24px;box-shadow:0 2px 8px #0000001a}.marketing-messages-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:16px}.marketing-messages-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:24px;font-weight:500}.marketing-messages-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.marketing-messages-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{margin-left:44px;font-size:14px;color:#0009}.marketing-messages-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}.marketing-messages-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{color:#fff}.marketing-messages-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:20px;margin-top:16px}.marketing-messages-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{text-align:center;padding:16px;background:rgba(255,255,255,.1);border-radius:8px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.marketing-messages-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item.highlight[_ngcontent-%COMP%]{background:rgba(255,255,255,.2);border:2px solid rgba(255,255,255,.3)}.marketing-messages-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin-bottom:8px}.marketing-messages-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:14px;opacity:.9}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]   .template-info[_ngcontent-%COMP%]{display:flex;gap:12px;padding:12px;background-color:#e3f2fd;border-radius:8px;border-left:4px solid #2196f3;margin-bottom:8px}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]   .template-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2196f3;font-size:20px;width:20px;height:20px}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]   .template-info[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{flex:1;font-size:14px;line-height:1.5}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]   .template-info[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:4px}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:8px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon.success[_ngcontent-%COMP%]{color:#4caf50;font-size:28px;width:28px;height:28px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon.error[_ngcontent-%COMP%]{color:#f44336;font-size:28px;width:28px;height:28px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-message[_ngcontent-%COMP%]{font-size:16px;margin-bottom:20px;padding:12px;background-color:#f5f5f5;border-radius:4px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px;margin-bottom:20px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;border-radius:8px;background-color:#f5f5f5}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat.success[_ngcontent-%COMP%]{background-color:#e8f5e9;border-left:4px solid #4caf50}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat.success[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat.failure[_ngcontent-%COMP%]{background-color:#ffebee;border-left:4px solid #f44336}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat.failure[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat.total[_ngcontent-%COMP%]{background-color:#e3f2fd;border-left:4px solid #2196f3}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat.total[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2196f3}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;color:#0009}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{margin-bottom:8px;height:8px;border-radius:4px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .success-rate[_ngcontent-%COMP%]{text-align:center;font-size:14px;font-weight:500;margin-bottom:20px;color:#000000b3}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]{padding:16px;background-color:#f5f5f5;border-radius:4px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:14px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#000000b3}.marketing-messages-container[_ngcontent-%COMP%]   .notice-card[_ngcontent-%COMP%]{background-color:#fff3e0;border-left:4px solid #ff9800}.marketing-messages-container[_ngcontent-%COMP%]   .notice-card[_ngcontent-%COMP%]   .notice-content[_ngcontent-%COMP%]{display:flex;gap:16px}.marketing-messages-container[_ngcontent-%COMP%]   .notice-card[_ngcontent-%COMP%]   .notice-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9800;font-size:32px;width:32px;height:32px}.marketing-messages-container[_ngcontent-%COMP%]   .notice-card[_ngcontent-%COMP%]   .notice-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:#e65100}.marketing-messages-container[_ngcontent-%COMP%]   .notice-card[_ngcontent-%COMP%]   .notice-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.marketing-messages-container[_ngcontent-%COMP%]   .notice-card[_ngcontent-%COMP%]   .notice-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;color:#000000b3;line-height:1.5}@media (max-width: 768px){.marketing-messages-container[_ngcontent-%COMP%]{padding:16px}.marketing-messages-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)!important}.marketing-messages-container[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]{grid-template-columns:1fr!important}}"]})}}return n})();var Z=_(8810);let ia=(()=>{class n{constructor(e){this.http=e,this.API_URL=`${F.c.apiUrl}/notifications`}sendBroadcastNotification(e){const o={title:e.title,message:e.message,priority:e.priority,type:e.type,recipientType:"ALL_CUSTOMERS",sendPush:!0};return e.latitude&&e.longitude&&e.radiusKm&&(o.latitude=e.latitude,o.longitude=e.longitude,o.radiusKm=e.radiusKm),this.http.post(`${this.API_URL}/broadcast`,o).pipe((0,x.T)(i=>i),(0,j.W)(i=>(console.error("Error sending broadcast notification:",i),(0,Z.$)(()=>i))))}sendNotificationToUser(e){return this.http.post(this.API_URL,{title:e.title,message:e.message,priority:e.priority,type:e.type,recipientType:"SPECIFIC_USER",recipientId:e.recipientId,sendPush:!0}).pipe((0,x.T)(i=>i),(0,j.W)(i=>(console.error("Error sending notification:",i),(0,Z.$)(()=>i))))}getNotificationEnums(){return this.http.get(`${this.API_URL}/enums`).pipe((0,j.W)(e=>(console.error("Error fetching notification enums:",e),(0,Z.$)(()=>e))))}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ra(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Title is required "),t.k0s())}function sa(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Message is required "),t.k0s())}function ca(n,a){if(1&n&&(t.j41(0,"mat-option",21),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e),t.R7$(1),t.SpI(" ",e," ")}}function la(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Type is required "),t.k0s())}function pa(n,a){if(1&n&&(t.j41(0,"mat-option",21),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e),t.R7$(1),t.SpI(" ",e," ")}}function ma(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Priority is required "),t.k0s())}function da(n,a){if(1&n&&(t.j41(0,"mat-option",21),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e),t.R7$(1),t.SpI(" ","ALL_CUSTOMERS"===e?"All Customers":"Specific User"," ")}}function ga(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Recipient type is required "),t.k0s())}function _a(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Customer ID is required for specific user "),t.k0s())}function ua(n,a){if(1&n&&(t.j41(0,"mat-form-field",9)(1,"mat-label"),t.EFF(2,"Customer ID"),t.k0s(),t.nrm(3,"input",22),t.DNE(4,_a,2,0,"mat-error",6),t.k0s()),2&n){const e=t.XpG();let o;t.R7$(4),t.Y8G("ngIf",null==(o=e.notificationForm.get("recipientId"))?null:o.hasError("required"))}}function fa(n,a){if(1&n&&(t.j41(0,"mat-option",21),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e),t.R7$(1),t.SpI("",e," km")}}function Ca(n,a){if(1&n&&(t.j41(0,"div",27)(1,"mat-form-field",9)(2,"mat-label"),t.EFF(3,"Latitude"),t.k0s(),t.nrm(4,"input",28),t.k0s(),t.j41(5,"mat-form-field",9)(6,"mat-label"),t.EFF(7,"Longitude"),t.k0s(),t.nrm(8,"input",29),t.k0s(),t.j41(9,"mat-form-field",9)(10,"mat-label"),t.EFF(11,"Radius (km)"),t.k0s(),t.j41(12,"mat-select",30),t.DNE(13,fa,2,2,"mat-option",11),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(13),t.Y8G("ngForOf",e.radiusOptions)}}function ha(n,a){1&n&&(t.j41(0,"p",31)(1,"mat-icon"),t.EFF(2,"info_outline"),t.k0s(),t.EFF(3," Only customers whose last known location is within the specified radius will receive this notification. Tirupattur: 12.1457, 78.7377 "),t.k0s())}const Pa=function(){return{standalone:!0}};function ba(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",23)(1,"mat-checkbox",24),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.useLocationFilter=i)})("change",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleLocationFilter())}),t.j41(2,"mat-icon"),t.EFF(3,"my_location"),t.k0s(),t.EFF(4," Target by Location (send only to customers near a specific area) "),t.k0s(),t.DNE(5,Ca,14,1,"div",25),t.DNE(6,ha,4,0,"p",26),t.k0s()}if(2&n){const e=t.XpG();t.R7$(1),t.Y8G("ngModel",e.useLocationFilter)("ngModelOptions",t.lJ4(4,Pa)),t.R7$(4),t.Y8G("ngIf",e.useLocationFilter),t.R7$(1),t.Y8G("ngIf",e.useLocationFilter)}}function Ma(n,a){1&n&&(t.j41(0,"mat-icon"),t.EFF(1,"send"),t.k0s())}function va(n,a){1&n&&t.nrm(0,"mat-spinner",32)}let xa=(()=>{class n{constructor(e,o,i){this.fb=e,this.pushNotificationService=o,this.snackBar=i,this.loading=!1,this.useLocationFilter=!1,this.recipientTypes=["ALL_CUSTOMERS","SPECIFIC_USER"],this.notificationTypes=[],this.priorities=[],this.radiusOptions=[5,10,25,50,100]}ngOnInit(){this.initializeForm(),this.loadEnums()}initializeForm(){this.notificationForm=this.fb.group({title:["",[l.k0.required,l.k0.maxLength(100)]],message:["",[l.k0.required,l.k0.maxLength(500)]],priority:["HIGH",l.k0.required],type:["INFO",l.k0.required],recipientType:["ALL_CUSTOMERS",l.k0.required],recipientId:[null],latitude:[null],longitude:[null],radiusKm:[25]}),this.notificationForm.get("recipientType")?.valueChanges.subscribe(e=>{const o=this.notificationForm.get("recipientId");"SPECIFIC_USER"===e?(o?.setValidators([l.k0.required]),this.useLocationFilter=!1):(o?.clearValidators(),o?.setValue(null)),o?.updateValueAndValidity()})}toggleLocationFilter(){this.useLocationFilter=!this.useLocationFilter,this.useLocationFilter||this.notificationForm.patchValue({latitude:null,longitude:null})}loadEnums(){this.pushNotificationService.getNotificationEnums().subscribe({next:e=>{this.notificationTypes=e.notificationTypes||["REMINDER","SUCCESS","PAYMENT","ANNOUNCEMENT","ERROR","ORDER_UPDATE","WARNING","ORDER","SYSTEM","PROMOTION","INFO"],this.priorities=e.notificationPriorities||["HIGH","MEDIUM","LOW"]},error:e=>{console.error("Error loading enums:",e),this.notificationTypes=["REMINDER","SUCCESS","PAYMENT","ANNOUNCEMENT","ERROR","ORDER_UPDATE","WARNING","ORDER","SYSTEM","PROMOTION","INFO"],this.priorities=["HIGH","MEDIUM","LOW"]}})}onSubmit(){if(this.notificationForm.invalid)return void this.markFormGroupTouched(this.notificationForm);this.loading=!0;const e=this.notificationForm.value,o={title:e.title,message:e.message,priority:e.priority,type:e.type,recipientType:e.recipientType,recipientId:e.recipientId,sendPush:!0};this.useLocationFilter&&e.latitude&&e.longitude&&e.radiusKm&&(o.latitude=e.latitude,o.longitude=e.longitude,o.radiusKm=e.radiusKm),("ALL_CUSTOMERS"===o.recipientType?this.pushNotificationService.sendBroadcastNotification(o):this.pushNotificationService.sendNotificationToUser(o)).subscribe({next:r=>{this.loading=!1,this.snackBar.open("Push notification sent successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.notificationForm.reset({priority:"HIGH",type:"INFO",recipientType:"ALL_CUSTOMERS"})},error:r=>{this.loading=!1,console.error("Error sending notification:",r),this.snackBar.open(r.error?.message||"Failed to send push notification","Close",{duration:5e3,panelClass:["error-snackbar"]})}})}markFormGroupTouched(e){Object.keys(e.controls).forEach(o=>{const i=e.get(o);i?.markAsTouched(),i instanceof l.gE&&this.markFormGroupTouched(i)})}get isSpecificUser(){return"SPECIFIC_USER"===this.notificationForm.get("recipientType")?.value}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(l.ok),t.rXU(ia),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-push-notification-sender"]],decls:90,vars:18,consts:[[1,"push-notification-container"],[3,"formGroup","ngSubmit"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","title","placeholder","Enter notification title","maxlength","100"],["align","end"],[4,"ngIf"],["matInput","","formControlName","message","rows","4","placeholder","Enter notification message","maxlength","500"],[1,"form-row","two-columns"],["appearance","outline"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["formControlName","priority"],["formControlName","recipientType"],["appearance","outline",4,"ngIf"],["class","location-filter",4,"ngIf"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20",4,"ngIf"],["mat-button","","type","button",3,"disabled","click"],[1,"info-card"],[3,"value"],["matInput","","type","number","formControlName","recipientId","placeholder","Enter customer ID"],[1,"location-filter"],[3,"ngModel","ngModelOptions","ngModelChange","change"],["class","form-row three-columns",4,"ngIf"],["class","location-hint",4,"ngIf"],[1,"form-row","three-columns"],["matInput","","type","number","formControlName","latitude","placeholder","e.g. 12.1457","step","0.0001"],["matInput","","type","number","formControlName","longitude","placeholder","e.g. 78.7377","step","0.0001"],["formControlName","radiusKm"],[1,"location-hint"],["diameter","20"]],template:function(o,i){if(1&o&&(t.j41(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),t.EFF(5,"notifications_active"),t.k0s(),t.EFF(6," Send Push Notification "),t.k0s(),t.j41(7,"mat-card-subtitle"),t.EFF(8,"Send notifications to customers via Firebase Cloud Messaging"),t.k0s()(),t.j41(9,"mat-card-content")(10,"form",1),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(11,"div",2)(12,"mat-form-field",3)(13,"mat-label"),t.EFF(14,"Notification Title"),t.k0s(),t.nrm(15,"input",4),t.j41(16,"mat-hint",5),t.EFF(17),t.k0s(),t.DNE(18,ra,2,0,"mat-error",6),t.k0s()(),t.j41(19,"div",2)(20,"mat-form-field",3)(21,"mat-label"),t.EFF(22,"Message"),t.k0s(),t.nrm(23,"textarea",7),t.j41(24,"mat-hint",5),t.EFF(25),t.k0s(),t.DNE(26,sa,2,0,"mat-error",6),t.k0s()(),t.j41(27,"div",8)(28,"mat-form-field",9)(29,"mat-label"),t.EFF(30,"Notification Type"),t.k0s(),t.j41(31,"mat-select",10),t.DNE(32,ca,2,2,"mat-option",11),t.k0s(),t.DNE(33,la,2,0,"mat-error",6),t.k0s(),t.j41(34,"mat-form-field",9)(35,"mat-label"),t.EFF(36,"Priority"),t.k0s(),t.j41(37,"mat-select",12),t.DNE(38,pa,2,2,"mat-option",11),t.k0s(),t.DNE(39,ma,2,0,"mat-error",6),t.k0s()(),t.j41(40,"div",8)(41,"mat-form-field",9)(42,"mat-label"),t.EFF(43,"Recipient Type"),t.k0s(),t.j41(44,"mat-select",13),t.DNE(45,da,2,2,"mat-option",11),t.k0s(),t.DNE(46,ga,2,0,"mat-error",6),t.k0s(),t.DNE(47,ua,5,1,"mat-form-field",14),t.k0s(),t.DNE(48,ba,7,5,"div",15),t.j41(49,"div",16)(50,"button",17),t.DNE(51,Ma,2,0,"mat-icon",6),t.DNE(52,va,1,0,"mat-spinner",18),t.EFF(53),t.k0s(),t.j41(54,"button",19),t.bIt("click",function(){return i.notificationForm.reset({priority:"HIGH",type:"INFO",recipientType:"ALL_CUSTOMERS"})}),t.EFF(55," Reset "),t.k0s()()()()(),t.j41(56,"mat-card",20)(57,"mat-card-header")(58,"mat-card-title")(59,"mat-icon"),t.EFF(60,"info"),t.k0s(),t.EFF(61," Information "),t.k0s()(),t.j41(62,"mat-card-content")(63,"ul")(64,"li")(65,"strong"),t.EFF(66,"All Customers:"),t.k0s(),t.EFF(67," Sends notification to all customers who have the mobile app installed"),t.k0s(),t.j41(68,"li")(69,"strong"),t.EFF(70,"Specific User:"),t.k0s(),t.EFF(71," Sends notification to a specific customer by their ID"),t.k0s(),t.j41(72,"li")(73,"strong"),t.EFF(74,"Priority Levels:"),t.k0s(),t.j41(75,"ul")(76,"li"),t.EFF(77,"HIGH: Shows immediately with sound"),t.k0s(),t.j41(78,"li"),t.EFF(79,"MEDIUM: Shows with default notification"),t.k0s(),t.j41(80,"li"),t.EFF(81,"LOW: Silent notification"),t.k0s()()(),t.j41(82,"li")(83,"strong"),t.EFF(84,"Notification Types:"),t.k0s(),t.EFF(85," Used for categorizing and filtering notifications in the app"),t.k0s(),t.j41(86,"li")(87,"strong"),t.EFF(88,"Location Targeting:"),t.k0s(),t.EFF(89,' Enable "Target by Location" to send notifications only to customers within a specific radius of a location'),t.k0s()()()()()),2&o){let r,c,d,T,P,w,q;t.R7$(10),t.Y8G("formGroup",i.notificationForm),t.R7$(7),t.SpI("",(null==(r=i.notificationForm.get("title"))||null==r.value?null:r.value.length)||0,"/100"),t.R7$(1),t.Y8G("ngIf",null==(c=i.notificationForm.get("title"))?null:c.hasError("required")),t.R7$(7),t.SpI("",(null==(d=i.notificationForm.get("message"))||null==d.value?null:d.value.length)||0,"/500"),t.R7$(1),t.Y8G("ngIf",null==(T=i.notificationForm.get("message"))?null:T.hasError("required")),t.R7$(6),t.Y8G("ngForOf",i.notificationTypes),t.R7$(1),t.Y8G("ngIf",null==(P=i.notificationForm.get("type"))?null:P.hasError("required")),t.R7$(5),t.Y8G("ngForOf",i.priorities),t.R7$(1),t.Y8G("ngIf",null==(w=i.notificationForm.get("priority"))?null:w.hasError("required")),t.R7$(6),t.Y8G("ngForOf",i.recipientTypes),t.R7$(1),t.Y8G("ngIf",null==(q=i.notificationForm.get("recipientType"))?null:q.hasError("required")),t.R7$(1),t.Y8G("ngIf",i.isSpecificUser),t.R7$(1),t.Y8G("ngIf",!i.isSpecificUser),t.R7$(2),t.Y8G("disabled",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading),t.R7$(1),t.Y8G("ngIf",i.loading),t.R7$(1),t.SpI(" ",i.loading?"Sending...":"Send Notification"," "),t.R7$(1),t.Y8G("disabled",i.loading)}},dependencies:[p.Sq,p.bT,l.qT,l.me,l.Q0,l.BC,l.cb,l.tU,l.j4,l.JD,l.vS,g.$z,C.An,k.fg,m.rl,m.nJ,m.MV,m.TL,I.VO,N.wT,u.RN,u.m2,u.MM,u.Lc,u.dh,U.So,h.LG],styles:[".push-notification-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.push-notification-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-bottom:20px}.push-notification-container[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:20px}.push-notification-container[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:24px;font-weight:500}.push-notification-container[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.push-notification-container[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:16px}.push-notification-container[_ngcontent-%COMP%]   .form-row.two-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}@media (max-width: 768px){.push-notification-container[_ngcontent-%COMP%]   .form-row.two-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}}.push-notification-container[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.push-notification-container[_ngcontent-%COMP%]   .location-filter[_ngcontent-%COMP%]{margin-bottom:16px;padding:16px;background-color:#f5f9ff;border-radius:8px;border:1px solid #e0e8f5}.push-notification-container[_ngcontent-%COMP%]   .location-filter[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:8px}.push-notification-container[_ngcontent-%COMP%]   .location-filter[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px;font-size:18px;vertical-align:middle}.push-notification-container[_ngcontent-%COMP%]   .location-filter[_ngcontent-%COMP%]   .location-hint[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:12px;color:#666;margin:4px 0 0}.push-notification-container[_ngcontent-%COMP%]   .location-filter[_ngcontent-%COMP%]   .location-hint[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.push-notification-container[_ngcontent-%COMP%]   .form-row.three-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;margin-top:12px}@media (max-width: 768px){.push-notification-container[_ngcontent-%COMP%]   .form-row.three-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}}.push-notification-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:24px;align-items:center}.push-notification-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .push-notification-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:8px}.push-notification-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block}.push-notification-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{background-color:#f5f5f5}.push-notification-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#1976d2}.push-notification-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.push-notification-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;line-height:1.6}.push-notification-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1976d2}.push-notification-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:4px}  .success-snackbar{background-color:#4caf50!important;color:#fff!important}  .error-snackbar{background-color:#f44336!important;color:#fff!important}"]})}}return n})();var Fa=_(1413),Y=_(6977),Oa=_(6781);function ka(n,a){1&n&&(t.j41(0,"div",5),t.nrm(1,"mat-spinner",6),t.j41(2,"p"),t.EFF(3,"Loading shop owners..."),t.k0s()())}function Ea(n,a){1&n&&(t.j41(0,"div",10)(1,"mat-icon"),t.EFF(2,"store"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No shop owners found"),t.k0s()())}function Ra(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",23)(1,"mat-slide-toggle",24),t.bIt("change",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,d=t.XpG(3);return t.Njj(d.togglePermission(c,r))}),t.EFF(2),t.k0s()()}if(2&n){const e=a.$implicit,o=t.XpG().$implicit,i=t.XpG(3);t.AVh("active",i.hasPermission(o,e)),t.R7$(1),t.Y8G("checked",i.hasPermission(o,e))("disabled",i.saving[o.userId]),t.R7$(1),t.SpI(" ",i.getPermissionLabel(e)," ")}}function Ta(n,a){1&n&&(t.j41(0,"div",25),t.nrm(1,"mat-spinner",26),t.j41(2,"span"),t.EFF(3,"Saving..."),t.k0s()())}function ya(n,a){if(1&n){const e=t.RV6();t.j41(0,"mat-card",13)(1,"mat-card-header")(2,"div",14),t.EFF(3),t.k0s(),t.j41(4,"mat-card-title"),t.EFF(5),t.k0s(),t.j41(6,"mat-card-subtitle"),t.EFF(7),t.k0s()(),t.j41(8,"mat-card-content")(9,"div",15)(10,"span",16)(11,"mat-icon"),t.EFF(12,"lock_open"),t.k0s(),t.EFF(13),t.k0s(),t.j41(14,"div",17)(15,"button",18),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(3);return t.Njj(c.grantAllPermissions(r))}),t.j41(16,"mat-icon"),t.EFF(17,"done_all"),t.k0s()(),t.j41(18,"button",19),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(3);return t.Njj(c.revokeAllPermissions(r))}),t.j41(19,"mat-icon"),t.EFF(20,"clear_all"),t.k0s()()()(),t.nrm(21,"mat-divider"),t.j41(22,"div",20),t.DNE(23,Ra,3,5,"div",21),t.k0s(),t.DNE(24,Ta,4,0,"div",22),t.k0s()()}if(2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(3),t.SpI(" ",(e.fullName||"S").charAt(0)," "),t.R7$(2),t.JRh(e.fullName||e.username),t.R7$(2),t.JRh(e.email),t.R7$(6),t.SpI(" ",o.getPermissionCount(e)," permissions "),t.R7$(2),t.Y8G("disabled",o.saving[e.userId]),t.R7$(3),t.Y8G("disabled",o.saving[e.userId]),t.R7$(5),t.Y8G("ngForOf",e.allAvailablePermissions),t.R7$(1),t.Y8G("ngIf",o.saving[e.userId])}}function ja(n,a){if(1&n&&(t.j41(0,"div",11),t.DNE(1,ya,25,8,"mat-card",12),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.shopOwners)}}function Da(n,a){if(1&n&&(t.j41(0,"div",7),t.DNE(1,Ea,5,0,"div",8),t.DNE(2,ja,2,1,"div",9),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("ngIf",0===e.shopOwners.length),t.R7$(1),t.Y8G("ngIf",e.shopOwners.length>0)}}let $a=(()=>{class n{constructor(e,o){this.menuPermissionService=e,this.snackBar=o,this.destroy$=new Fa.B,this.shopOwners=[],this.allPermissions=[],this.loading=!0,this.saving={},this.permissionLabels={MENU_DASHBOARD:"Dashboard",MENU_SHOP_PROFILE:"Shop Profile",MENU_MY_PRODUCTS:"My Products",MENU_BROWSE_PRODUCTS:"Browse Products",MENU_COMBOS:"Combos",MENU_BULK_IMPORT:"Bulk Import",MENU_ORDER_MANAGEMENT:"Order Management",MENU_NOTIFICATIONS:"Notifications",MENU_PROMO_CODES:"Promo Codes"}}ngOnInit(){this.loadData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadData(){this.loading=!0,this.menuPermissionService.getAllMenuPermissions().pipe((0,Y.Q)(this.destroy$)).subscribe({next:e=>{this.allPermissions=e,this.loadShopOwners()},error:e=>{console.error("Error loading permissions:",e),this.snackBar.open("Error loading permissions","Close",{duration:3e3}),this.loading=!1}})}loadShopOwners(){this.menuPermissionService.getAllShopOwnersWithPermissions().pipe((0,Y.Q)(this.destroy$)).subscribe({next:e=>{this.shopOwners=e,this.loading=!1},error:e=>{console.error("Error loading shop owners:",e),this.snackBar.open("Error loading shop owners","Close",{duration:3e3}),this.loading=!1}})}hasPermission(e,o){return e.menuPermissions.includes(o)}togglePermission(e,o){this.saving[e.userId]||(this.saving[e.userId]=!0,this.hasPermission(e,o)?this.menuPermissionService.removeMenuPermission(e.userId,o).pipe((0,Y.Q)(this.destroy$)).subscribe({next:()=>{e.menuPermissions=e.menuPermissions.filter(r=>r!==o),this.snackBar.open(`Permission removed for ${e.fullName}`,"Close",{duration:2e3}),this.saving[e.userId]=!1},error:r=>{console.error("Error removing permission:",r),this.snackBar.open("Error removing permission","Close",{duration:3e3}),this.saving[e.userId]=!1}}):this.menuPermissionService.addMenuPermission(e.userId,o).pipe((0,Y.Q)(this.destroy$)).subscribe({next:()=>{e.menuPermissions.push(o),this.snackBar.open(`Permission granted for ${e.fullName}`,"Close",{duration:2e3}),this.saving[e.userId]=!1},error:r=>{console.error("Error adding permission:",r),this.snackBar.open("Error adding permission","Close",{duration:3e3}),this.saving[e.userId]=!1}}))}grantAllPermissions(e){this.saving[e.userId]||(this.saving[e.userId]=!0,this.menuPermissionService.grantAllMenuPermissions(e.userId).pipe((0,Y.Q)(this.destroy$)).subscribe({next:()=>{e.menuPermissions=[...e.allAvailablePermissions],this.snackBar.open(`All permissions granted for ${e.fullName}`,"Close",{duration:2e3}),this.saving[e.userId]=!1},error:o=>{console.error("Error granting all permissions:",o),this.snackBar.open("Error granting permissions","Close",{duration:3e3}),this.saving[e.userId]=!1}}))}revokeAllPermissions(e){this.saving[e.userId]||(this.saving[e.userId]=!0,this.menuPermissionService.revokeAllMenuPermissions(e.userId).pipe((0,Y.Q)(this.destroy$)).subscribe({next:()=>{e.menuPermissions=[],this.snackBar.open(`All permissions revoked for ${e.fullName}`,"Close",{duration:2e3}),this.saving[e.userId]=!1},error:o=>{console.error("Error revoking all permissions:",o),this.snackBar.open("Error revoking permissions","Close",{duration:3e3}),this.saving[e.userId]=!1}}))}getPermissionLabel(e){return this.permissionLabels[e]||e}getPermissionCount(e){return`${e.menuPermissions.length}/${e.allAvailablePermissions.length}`}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(Oa.O),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-menu-permissions"]],decls:8,vars:2,consts:[[1,"menu-permissions-container"],[1,"page-header"],[1,"subtitle"],["class","loading-container",4,"ngIf"],["class","content",4,"ngIf"],[1,"loading-container"],["diameter","50"],[1,"content"],["class","no-data",4,"ngIf"],["class","shop-owners-grid",4,"ngIf"],[1,"no-data"],[1,"shop-owners-grid"],["class","shop-owner-card",4,"ngFor","ngForOf"],[1,"shop-owner-card"],["mat-card-avatar","",1,"avatar"],[1,"permissions-header"],[1,"permissions-count"],[1,"quick-actions"],["mat-icon-button","","matTooltip","Grant All Permissions",3,"disabled","click"],["mat-icon-button","","matTooltip","Revoke All Permissions",3,"disabled","click"],[1,"permissions-list"],["class","permission-item",3,"active",4,"ngFor","ngForOf"],["class","saving-overlay",4,"ngIf"],[1,"permission-item"],["color","primary",3,"checked","disabled","change"],[1,"saving-overlay"],["diameter","24"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3,"Shop Owner Menu Permissions"),t.k0s(),t.j41(4,"p",2),t.EFF(5,"Control which menu items shop owners can access"),t.k0s()(),t.DNE(6,ka,4,0,"div",3),t.DNE(7,Da,3,2,"div",4),t.k0s()),2&o&&(t.R7$(6),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading))},dependencies:[p.Sq,p.bT,g.iY,C.An,u.RN,u.QG,u.m2,u.MM,u.Lc,u.dh,R.oV,h.LG,S.sG,z.q],styles:[".menu-permissions-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:500;color:#333}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:8px 0 0;color:#666;font-size:14px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;color:#666}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px}.no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;color:#999}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px}.shop-owners-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:24px}.shop-owner-card[_ngcontent-%COMP%]{position:relative}.shop-owner-card[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:500;border-radius:50%;width:40px;height:40px}.shop-owner-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:16px}.shop-owner-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.shop-owner-card[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:13px}.permissions-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0}.permissions-header[_ngcontent-%COMP%]   .permissions-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#666;font-size:14px}.permissions-header[_ngcontent-%COMP%]   .permissions-count[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#4caf50}.permissions-header[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{display:flex;gap:4px}.permissions-header[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}mat-divider[_ngcontent-%COMP%]{margin:8px 0 16px}.permissions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.permission-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px 12px;border-radius:8px;background-color:#f5f5f5;transition:background-color .2s ease}.permission-item.active[_ngcontent-%COMP%]{background-color:#e8f5e9}.permission-item[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{width:100%}.permission-item[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mdc-form-field{width:100%}.permission-item[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mdc-label{flex:1;font-size:14px}.saving-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(255,255,255,.85);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;border-radius:4px;z-index:10}.saving-overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#666}@media (max-width: 768px){.menu-permissions-container[_ngcontent-%COMP%]{padding:16px}.shop-owners-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}"]})}}return n})();function Ia(n,a){if(1&n&&(t.j41(0,"mat-form-field",7)(1,"mat-label"),t.EFF(2),t.k0s(),t.nrm(3,"input",8),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(2),t.JRh(e.label),t.R7$(1),t.Y8G("formControlName",e.key)}}function Na(n,a){if(1&n&&(t.j41(0,"mat-form-field",7)(1,"mat-label"),t.EFF(2),t.k0s(),t.nrm(3,"input",9),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(2),t.JRh(e.label),t.R7$(1),t.Y8G("formControlName",e.key)}}function Ga(n,a){if(1&n&&(t.j41(0,"mat-form-field",7)(1,"mat-label"),t.EFF(2),t.k0s(),t.nrm(3,"textarea",10),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(2),t.JRh(e.label),t.R7$(1),t.Y8G("formControlName",e.key)}}function wa(n,a){if(1&n&&(t.j41(0,"mat-option",13),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.SpI(" ",e.label," ")}}function Sa(n,a){if(1&n&&(t.j41(0,"mat-form-field",7)(1,"mat-label"),t.EFF(2),t.k0s(),t.j41(3,"mat-select",11),t.DNE(4,wa,2,2,"mat-option",12),t.k0s()()),2&n){const e=t.XpG().$implicit;t.R7$(2),t.JRh(e.label),t.R7$(1),t.Y8G("formControlName",e.key),t.R7$(1),t.Y8G("ngForOf",e.options)}}function Aa(n,a){if(1&n&&(t.qex(0),t.DNE(1,Ia,4,2,"mat-form-field",6),t.DNE(2,Na,4,2,"mat-form-field",6),t.DNE(3,Ga,4,2,"mat-form-field",6),t.DNE(4,Sa,5,3,"mat-form-field",6),t.bVm()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf","text"===e.type),t.R7$(1),t.Y8G("ngIf","number"===e.type),t.R7$(1),t.Y8G("ngIf","textarea"===e.type),t.R7$(1),t.Y8G("ngIf","select"===e.type)}}let B=(()=>{class n{constructor(e,o,i){this.fb=e,this.dialogRef=o,this.data=i,this.fields=[],this.title="Edit Post",this.fieldConfigs={labour:[{key:"name",label:"Name",type:"text"},{key:"phone",label:"Phone",type:"text"},{key:"category",label:"Category",type:"select",options:[{value:"PAINTER",label:"Painter"},{value:"CARPENTER",label:"Carpenter"},{value:"ELECTRICIAN",label:"Electrician"},{value:"PLUMBER",label:"Plumber"},{value:"CONTRACTOR",label:"Contractor"},{value:"MASON",label:"Mason"},{value:"DRIVER",label:"Driver"},{value:"WELDER",label:"Welder"},{value:"MECHANIC",label:"Mechanic"},{value:"TAILOR",label:"Tailor"},{value:"AC_TECHNICIAN",label:"AC Technician"},{value:"HELPER",label:"Helper"},{value:"BIKE_REPAIR",label:"Bike Repair"},{value:"CAR_REPAIR",label:"Car Repair"},{value:"TYRE_PUNCTURE",label:"Tyre Puncture"},{value:"GENERAL_LABOUR",label:"General Labour"},{value:"OTHER",label:"Other"}]},{key:"experience",label:"Experience",type:"text"},{key:"location",label:"Location",type:"text"},{key:"description",label:"Description",type:"textarea"}],travel:[{key:"title",label:"Title",type:"text"},{key:"phone",label:"Phone",type:"text"},{key:"vehicleType",label:"Vehicle Type",type:"select",options:[{value:"BUS",label:"Bus"},{value:"LORRY",label:"Lorry"},{value:"SMALL_BUS",label:"Mini Bus"},{value:"RENT",label:"Rent"},{value:"CAR",label:"Car"},{value:"PARCEL_SERVICE",label:"Packers & Movers"}]},{key:"fromLocation",label:"From Location",type:"text"},{key:"toLocation",label:"To Location",type:"text"},{key:"price",label:"Price",type:"text"},{key:"seatsAvailable",label:"Seats Available",type:"number"},{key:"description",label:"Description",type:"textarea"}],parcel:[{key:"serviceName",label:"Service Name",type:"text"},{key:"phone",label:"Phone",type:"text"},{key:"serviceType",label:"Service Type",type:"select",options:[{value:"DOOR_TO_DOOR",label:"Door to Door"},{value:"PICKUP_POINT",label:"Pickup Point"},{value:"BOTH",label:"Both"}]},{key:"fromLocation",label:"From Location",type:"text"},{key:"toLocation",label:"To Location",type:"text"},{key:"priceInfo",label:"Price Info",type:"text"},{key:"address",label:"Address",type:"text"},{key:"timings",label:"Timings",type:"text"},{key:"description",label:"Description",type:"textarea"}],marketplace:[{key:"title",label:"Title",type:"text"},{key:"price",label:"Price",type:"number"},{key:"category",label:"Category",type:"select",options:[{value:"Electronics",label:"Electronics"},{value:"Furniture",label:"Furniture"},{value:"Vehicles",label:"Vehicles"},{value:"Agriculture",label:"Agriculture"},{value:"Clothing",label:"Clothing"},{value:"Food",label:"Food"},{value:"Finance",label:"Finance"},{value:"Other",label:"Other"}]},{key:"location",label:"Location",type:"text"},{key:"description",label:"Description",type:"textarea"}],farmer:[{key:"title",label:"Title",type:"text"},{key:"price",label:"Price",type:"number"},{key:"unit",label:"Unit",type:"text"},{key:"category",label:"Category",type:"select",options:[{value:"Vegetables",label:"Vegetables"},{value:"Fruits",label:"Fruits"},{value:"Grains & Pulses",label:"Grains & Pulses"},{value:"Dairy",label:"Dairy"},{value:"Spices",label:"Spices"},{value:"Flowers",label:"Flowers"},{value:"Organic",label:"Organic"},{value:"Seeds & Plants",label:"Seeds & Plants"},{value:"Honey & Jaggery",label:"Honey & Jaggery"},{value:"Other",label:"Other"}]},{key:"location",label:"Location",type:"text"},{key:"description",label:"Description",type:"textarea"}],realEstate:[{key:"title",label:"Title",type:"text"},{key:"propertyType",label:"Property Type",type:"select",options:[{value:"LAND",label:"Land"},{value:"HOUSE",label:"House"},{value:"APARTMENT",label:"Apartment"},{value:"VILLA",label:"Villa"},{value:"COMMERCIAL",label:"Commercial"},{value:"PLOT",label:"Plot"},{value:"FARM_LAND",label:"Farm Land"},{value:"PG_HOSTEL",label:"PG/Hostel"}]},{key:"listingType",label:"Listing Type",type:"select",options:[{value:"FOR_SALE",label:"For Sale"},{value:"FOR_RENT",label:"For Rent"}]},{key:"price",label:"Price",type:"number"},{key:"areaSqft",label:"Area (sqft)",type:"number"},{key:"bedrooms",label:"Bedrooms",type:"number"},{key:"bathrooms",label:"Bathrooms",type:"number"},{key:"location",label:"Location",type:"text"},{key:"description",label:"Description",type:"textarea"}]},this.titleMap={labour:"Edit Labour Post",travel:"Edit Travel Post",parcel:"Edit Packers & Movers Post",marketplace:"Edit Marketplace Post",farmer:"Edit Farmer Product",realEstate:"Edit Real Estate Post"}}ngOnInit(){this.fields=this.fieldConfigs[this.data.postType]||[],this.title=this.titleMap[this.data.postType]||"Edit Post";const e={};this.fields.forEach(o=>{e[o.key]=[this.data.post[o.key]??""]}),this.form=this.fb.group(e)}onSave(){if(this.form.valid){const e={};this.fields.forEach(o=>{const i=this.form.get(o.key)?.value;i!==this.data.post[o.key]&&(e[o.key]=i)}),Object.keys(e).length>0?this.dialogRef.close(e):this.dialogRef.close()}}onCancel(){this.dialogRef.close()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(l.ok),t.rXU(M.CP),t.rXU(M.Vh))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-post-edit-dialog"]],decls:10,vars:3,consts:[["mat-dialog-title",""],[1,"edit-form",3,"formGroup"],[4,"ngFor","ngForOf"],["align","end"],["mat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"],["appearance","outline","class","full-width",4,"ngIf"],["appearance","outline",1,"full-width"],["matInput","",3,"formControlName"],["matInput","","type","number",3,"formControlName"],["matInput","","rows","3",3,"formControlName"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,i){1&o&&(t.j41(0,"h2",0),t.EFF(1),t.k0s(),t.j41(2,"mat-dialog-content")(3,"form",1),t.DNE(4,Aa,5,4,"ng-container",2),t.k0s()(),t.j41(5,"mat-dialog-actions",3)(6,"button",4),t.bIt("click",function(){return i.onCancel()}),t.EFF(7,"Cancel"),t.k0s(),t.j41(8,"button",5),t.bIt("click",function(){return i.onSave()}),t.EFF(9,"Save"),t.k0s()()),2&o&&(t.R7$(1),t.JRh(i.title),t.R7$(2),t.Y8G("formGroup",i.form),t.R7$(1),t.Y8G("ngForOf",i.fields))},dependencies:[p.Sq,p.bT,l.qT,l.me,l.Q0,l.BC,l.cb,l.j4,l.JD,g.$z,k.fg,m.rl,m.nJ,I.VO,N.wT,M.BI,M.Yi,M.E7],styles:[".edit-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:400px;max-width:100%;padding-top:8px}.edit-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}"]})}}return n})();var E=_(7505);let tt=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/marketplace`}getPendingPosts(e=0,o=20){return this.http.get(`${this.apiUrl}/pending`,{params:{page:e.toString(),size:o.toString()}})}getAllPosts(e=0,o=20,i=""){let r={page:e.toString(),size:o.toString()};return i&&(r.search=i),this.http.get(`${this.apiUrl}/admin/all`,{params:r})}getReportedPosts(e=0,o=20){return this.http.get(`${this.apiUrl}/admin/reported`,{params:{page:e.toString(),size:o.toString()}})}approvePost(e){return this.http.put(`${this.apiUrl}/${e}/approve`,{})}rejectPost(e){return this.http.put(`${this.apiUrl}/${e}/reject`,{})}deletePost(e){return this.http.delete(`${this.apiUrl}/${e}`)}changePostStatus(e,o){return this.http.put(`${this.apiUrl}/${e}/status`,{status:o})}adminUpdatePost(e,o){return this.http.put(`${this.apiUrl}/${e}/admin-update`,o)}toggleFeatured(e){return this.http.put(`${this.apiUrl}/${e}/featured`,{})}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Va(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",14),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return i.searchText="",t.Njj(i.onSearchChange())}),t.j41(1,"mat-icon"),t.EFF(2,"clear"),t.k0s()()}}function La(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",9)(1,"mat-form-field",10)(2,"mat-label"),t.EFF(3,"Search by location"),t.k0s(),t.j41(4,"input",11),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.searchText=i)})("keyup.enter",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onSearchChange())}),t.k0s(),t.DNE(5,Va,3,0,"button",12),t.j41(6,"mat-icon",13),t.EFF(7,"search"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngModel",e.searchText),t.R7$(1),t.Y8G("ngIf",e.searchText)}}function Ba(n,a){1&n&&(t.j41(0,"div",15),t.nrm(1,"mat-spinner",16),t.j41(2,"p"),t.EFF(3,"Loading posts..."),t.k0s()())}function Ya(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"No posts are waiting for approval."),t.k0s())}function Ua(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"No marketplace posts yet."),t.k0s())}function Xa(n,a){if(1&n&&(t.j41(0,"div",17)(1,"mat-icon",18),t.EFF(2,"storefront"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No posts found"),t.k0s(),t.DNE(5,Ya,2,0,"p",19),t.DNE(6,Ua,2,0,"p",19),t.k0s()),2&n){const e=t.XpG();t.R7$(5),t.Y8G("ngIf","pending"===e.activeTab),t.R7$(1),t.Y8G("ngIf","all"===e.activeTab)}}function za(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Image"),t.k0s())}function Ja(n,a){if(1&n&&t.nrm(0,"img",43),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.Y8G("src",o.getImageUrl(e.imageUrl),t.B4B)}}function qa(n,a){1&n&&(t.j41(0,"mat-icon",44),t.EFF(1,"image"),t.k0s())}function Ha(n,a){if(1&n&&(t.j41(0,"td",39)(1,"div",40),t.DNE(2,Ja,1,1,"img",41),t.DNE(3,qa,2,0,"mat-icon",42),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.imageUrl),t.R7$(1),t.Y8G("ngIf",!e.imageUrl)}}function Ka(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Title"),t.k0s())}function Qa(n,a){if(1&n&&(t.j41(0,"div",47),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function Wa(n,a){if(1&n&&(t.j41(0,"td",39)(1,"div",45),t.EFF(2),t.k0s(),t.DNE(3,Qa,2,1,"div",46),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(1),t.Y8G("ngIf",e.description)}}function Za(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Price"),t.k0s())}function ti(n,a){if(1&n&&(t.j41(0,"td",39)(1,"span",48),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatPrice(e.price))}}function ei(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Seller"),t.k0s())}function ni(n,a){if(1&n&&(t.j41(0,"span",53),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.location)}}function oi(n,a){if(1&n&&(t.j41(0,"td",39)(1,"div",49)(2,"span",50),t.EFF(3),t.k0s(),t.j41(4,"span",51),t.EFF(5),t.k0s(),t.DNE(6,ni,2,1,"span",52),t.k0s()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.sellerPhone),t.R7$(1),t.Y8G("ngIf",e.location)}}function ai(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Category"),t.k0s())}function ii(n,a){if(1&n&&(t.j41(0,"span",55),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.category)}}function ri(n,a){if(1&n&&(t.j41(0,"td",39),t.DNE(1,ii,2,1,"span",54),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.category)}}function si(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Voice"),t.k0s())}function ci(n,a){if(1&n&&(t.j41(0,"audio",58),t.nrm(1,"source",59),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("src",o.getVoiceUrl(e.voiceUrl),t.B4B)}}function li(n,a){1&n&&(t.j41(0,"span",60),t.EFF(1,"-"),t.k0s())}function pi(n,a){if(1&n&&(t.j41(0,"td",39),t.DNE(1,ci,2,1,"audio",56),t.DNE(2,li,2,0,"span",57),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.voiceUrl),t.R7$(1),t.Y8G("ngIf",!e.voiceUrl)}}function mi(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Status"),t.k0s())}function di(n,a){if(1&n&&(t.j41(0,"td",39)(1,"span",61),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.SpI(" ",o.getStatusLabel(e.status)," ")}}function gi(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Type"),t.k0s())}function _i(n,a){1&n&&(t.j41(0,"span",64)(1,"mat-icon",65),t.EFF(2,"payments"),t.k0s(),t.EFF(3," PAID "),t.k0s())}function ui(n,a){1&n&&(t.j41(0,"span",66),t.EFF(1,"FREE"),t.k0s())}function fi(n,a){if(1&n&&(t.j41(0,"td",39),t.DNE(1,_i,4,0,"span",62),t.DNE(2,ui,2,0,"span",63),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.isPaid),t.R7$(1),t.Y8G("ngIf",!e.isPaid)}}function Ci(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Featured"),t.k0s())}function hi(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",39)(1,"button",67),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.toggleFeatured(r))}),t.j41(2,"mat-icon"),t.EFF(3),t.k0s()()()}if(2&n){const e=a.$implicit;t.R7$(1),t.AVh("is-featured",e.featured),t.Y8G("matTooltip",e.featured?"Remove from featured":"Mark as featured"),t.R7$(2),t.JRh(e.featured?"star":"star_border")}}function Pi(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Date"),t.k0s())}function bi(n,a){if(1&n&&(t.j41(0,"td",39)(1,"span",68),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function Mi(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Action"),t.k0s())}function vi(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",73),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,d=t.XpG(2);return t.Njj(d.onStatusChange(c,r.value))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.xc7("color",e.color),t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function xi(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",39)(1,"button",69),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.editPost(r))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()(),t.j41(4,"button",70),t.EFF(5," Change Status "),t.j41(6,"mat-icon"),t.EFF(7,"arrow_drop_down"),t.k0s()(),t.j41(8,"mat-menu",null,71),t.DNE(10,vi,5,4,"button",72),t.k0s()()}if(2&n){const e=a.$implicit,o=t.sdS(9),i=t.XpG(2);t.R7$(4),t.Y8G("matMenuTriggerFor",o),t.R7$(6),t.Y8G("ngForOf",i.getAvailableStatuses(e))}}function Fi(n,a){1&n&&t.nrm(0,"tr",74)}function Oi(n,a){1&n&&t.nrm(0,"tr",75)}function ki(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",76)(1,"button",77),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage-1))}),t.j41(2,"mat-icon"),t.EFF(3,"chevron_left"),t.k0s(),t.EFF(4," Previous "),t.k0s(),t.j41(5,"span",78),t.EFF(6),t.k0s(),t.j41(7,"button",77),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage+1))}),t.EFF(8," Next "),t.j41(9,"mat-icon"),t.EFF(10,"chevron_right"),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("disabled",0===e.currentPage),t.R7$(5),t.E5c("Page ",e.currentPage+1," of ",e.totalPages," (",e.totalItems," posts)"),t.R7$(1),t.Y8G("disabled",e.currentPage>=e.totalPages-1)}}const pt=function(){return["image","title","price","seller","category","voice","status","type","featured","date","actions"]};function Ei(n,a){if(1&n&&(t.j41(0,"div",20)(1,"table",21),t.qex(2,22),t.DNE(3,za,2,0,"th",23),t.DNE(4,Ha,4,2,"td",24),t.bVm(),t.qex(5,25),t.DNE(6,Ka,2,0,"th",23),t.DNE(7,Wa,4,2,"td",24),t.bVm(),t.qex(8,26),t.DNE(9,Za,2,0,"th",23),t.DNE(10,ti,3,1,"td",24),t.bVm(),t.qex(11,27),t.DNE(12,ei,2,0,"th",23),t.DNE(13,oi,7,3,"td",24),t.bVm(),t.qex(14,28),t.DNE(15,ai,2,0,"th",23),t.DNE(16,ri,2,1,"td",24),t.bVm(),t.qex(17,29),t.DNE(18,si,2,0,"th",23),t.DNE(19,pi,3,2,"td",24),t.bVm(),t.qex(20,30),t.DNE(21,mi,2,0,"th",23),t.DNE(22,di,3,2,"td",24),t.bVm(),t.qex(23,31),t.DNE(24,gi,2,0,"th",23),t.DNE(25,fi,3,2,"td",24),t.bVm(),t.qex(26,32),t.DNE(27,Ci,2,0,"th",23),t.DNE(28,hi,4,4,"td",24),t.bVm(),t.qex(29,33),t.DNE(30,Pi,2,0,"th",23),t.DNE(31,bi,3,1,"td",24),t.bVm(),t.qex(32,34),t.DNE(33,Mi,2,0,"th",23),t.DNE(34,xi,11,2,"td",24),t.bVm(),t.DNE(35,Fi,1,0,"tr",35),t.DNE(36,Oi,1,0,"tr",36),t.k0s(),t.DNE(37,ki,11,5,"div",37),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.posts),t.R7$(34),t.Y8G("matHeaderRowDef",t.lJ4(4,pt)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(5,pt)),t.R7$(1),t.Y8G("ngIf",e.totalPages>1)}}let Ri=(()=>{class n{constructor(e,o,i){this.marketplaceService=e,this.snackBar=o,this.dialog=i,this.posts=[],this.loading=!0,this.activeTab="pending",this.currentPage=0,this.totalPages=0,this.totalItems=0,this.pageSize=20,this.searchText="",this.statusOptions=[{value:"APPROVED",label:"Approve",icon:"check_circle",color:"#4caf50"},{value:"REJECTED",label:"Reject",icon:"cancel",color:"#f44336"},{value:"HOLD",label:"Hold",icon:"pause_circle",color:"#ff9800"},{value:"HIDDEN",label:"Hide",icon:"visibility_off",color:"#9e9e9e"},{value:"CORRECTION_REQUIRED",label:"Correction Required",icon:"edit_note",color:"#2196f3"},{value:"REMOVED",label:"Remove",icon:"delete_forever",color:"#b71c1c"}]}ngOnInit(){this.loadPosts()}loadPosts(){this.loading=!0,("pending"===this.activeTab?this.marketplaceService.getPendingPosts(this.currentPage,this.pageSize):this.marketplaceService.getAllPosts(this.currentPage,this.pageSize,this.searchText)).subscribe({next:o=>{const i=o.data;this.posts=i?.content||[],this.totalPages=i?.totalPages||0,this.totalItems=i?.totalItems||0,this.loading=!1},error:o=>{console.error("Error loading marketplace posts:",o),this.loading=!1,this.snackBar.open("Failed to load posts","Close",{duration:3e3})}})}onSearchChange(){this.currentPage=0,this.loadPosts()}switchTab(e){this.activeTab=e,this.currentPage=0,this.loadPosts()}approvePost(e){this.marketplaceService.approvePost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" approved`,"OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to approve post","Close",{duration:3e3})}})}rejectPost(e){confirm(`Reject "${e.title}"?`)&&this.marketplaceService.rejectPost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" rejected`,"OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to reject post","Close",{duration:3e3})}})}deletePost(e){confirm(`Delete "${e.title}" permanently?`)&&this.marketplaceService.deletePost(e.id).subscribe({next:()=>{this.snackBar.open("Post deleted","OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to delete post","Close",{duration:3e3})}})}editPost(e){this.dialog.open(B,{width:"600px",maxHeight:"90vh",data:{postType:"marketplace",post:{...e}}}).afterClosed().subscribe(i=>{i&&this.marketplaceService.adminUpdatePost(e.id,i).subscribe({next:()=>{this.snackBar.open("Post updated","OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to update post","Close",{duration:3e3})}})})}getImageUrl(e){return(0,E.V)(e)}getVoiceUrl(e){return e?(0,E.V)(e):""}toggleFeatured(e){this.marketplaceService.toggleFeatured(e.id).subscribe({next:o=>{const r=o.data?.featured;e.featured=r,this.snackBar.open(r?`"${e.title}" marked as featured`:`"${e.title}" removed from featured`,"OK",{duration:3e3})},error:()=>{this.snackBar.open("Failed to toggle featured","Close",{duration:3e3})}})}onStatusChange(e,o){if("REMOVED"===o){if(!confirm(`Remove "${e.title}" permanently?`))return;return void this.marketplaceService.deletePost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" removed`,"OK",{duration:3e3}),this.loadPosts()},error:()=>this.snackBar.open("Failed to remove post","Close",{duration:3e3})})}const i=this.statusOptions.find(r=>r.value===o)?.label||o;this.marketplaceService.changePostStatus(e.id,o).subscribe({next:()=>{this.snackBar.open(`"${e.title}" \u2192 ${i}`,"OK",{duration:3e3}),this.loadPosts()},error:()=>this.snackBar.open("Failed to change status","Close",{duration:3e3})})}getAvailableStatuses(e){return this.statusOptions.filter(o=>o.value!==e.status)}getStatusColor(e){switch(e){case"PENDING_APPROVAL":case"HOLD":case"FLAGGED":return"warn";case"APPROVED":case"CORRECTION_REQUIRED":return"primary";case"REJECTED":return"accent";default:return""}}getStatusLabel(e){switch(e){case"PENDING_APPROVAL":return"Pending";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";case"SOLD":return"Sold";case"HOLD":return"On Hold";case"HIDDEN":return"Hidden";case"CORRECTION_REQUIRED":return"Correction Required";case"FLAGGED":return"Flagged";case"REMOVED":return"Removed";default:return e}}formatPrice(e){return null==e?"Negotiable":"\u20b9"+e.toLocaleString("en-IN")}formatDate(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}onPageChange(e){this.currentPage=e,this.loadPosts()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(tt),t.rXU(b.UG),t.rXU(M.bZ))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-marketplace-management"]],decls:15,vars:6,consts:[[1,"marketplace-management"],[1,"header"],[1,"subtitle"],[1,"tabs"],["mat-flat-button","",3,"color","click"],["class","search-filter",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","posts-container",4,"ngIf"],[1,"search-filter"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Type location and press Enter...",3,"ngModel","ngModelChange","keyup.enter"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],["matPrefix",""],["mat-icon-button","","matSuffix","",3,"click"],[1,"loading-container"],["diameter","40"],[1,"empty-state"],[1,"empty-icon"],[4,"ngIf"],[1,"posts-container"],["mat-table","",1,"posts-table",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","price"],["matColumnDef","seller"],["matColumnDef","category"],["matColumnDef","voice"],["matColumnDef","status"],["matColumnDef","type"],["matColumnDef","featured"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","pagination",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"post-image"],["alt","Product","loading","lazy",3,"src",4,"ngIf"],["class","no-image",4,"ngIf"],["alt","Product","loading","lazy",3,"src"],[1,"no-image"],[1,"post-title"],["class","post-description",4,"ngIf"],[1,"post-description"],[1,"price"],[1,"seller-info"],[1,"seller-name"],[1,"seller-phone"],["class","seller-location",4,"ngIf"],[1,"seller-location"],["class","category-chip",4,"ngIf"],[1,"category-chip"],["controls","","preload","none","class","voice-player",4,"ngIf"],["class","no-voice",4,"ngIf"],["controls","","preload","none",1,"voice-player"],[3,"src"],[1,"no-voice"],[1,"status-badge",3,"ngClass"],["class","type-badge type-paid",4,"ngIf"],["class","type-badge type-free",4,"ngIf"],[1,"type-badge","type-paid"],[1,"badge-icon"],[1,"type-badge","type-free"],["mat-icon-button","",1,"featured-toggle",3,"matTooltip","click"],[1,"date"],["mat-icon-button","","color","primary","matTooltip","Edit",3,"click"],["mat-stroked-button","",1,"action-dropdown",3,"matMenuTriggerFor"],["statusMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"pagination"],["mat-button","",3,"disabled","click"],[1,"page-info"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Marketplace Management"),t.k0s(),t.j41(4,"p",2),t.EFF(5,"Review and manage customer buy & sell posts"),t.k0s()(),t.j41(6,"div",3)(7,"button",4),t.bIt("click",function(){return i.switchTab("pending")}),t.EFF(8," Pending Approval "),t.k0s(),t.j41(9,"button",4),t.bIt("click",function(){return i.switchTab("all")}),t.EFF(10," All Posts "),t.k0s()(),t.DNE(11,La,8,2,"div",5),t.DNE(12,Ba,4,0,"div",6),t.DNE(13,Xa,7,2,"div",7),t.DNE(14,Ei,38,6,"div",8),t.k0s()),2&o&&(t.R7$(7),t.Y8G("color","pending"===i.activeTab?"primary":void 0),t.R7$(2),t.Y8G("color","all"===i.activeTab?"primary":void 0),t.R7$(2),t.Y8G("ngIf","all"===i.activeTab),t.R7$(1),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.posts.length),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.posts.length>0))},dependencies:[p.YU,p.Sq,p.bT,l.me,l.BC,l.vS,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,g.iY,C.An,k.fg,m.rl,m.nJ,m.JW,m.yw,R.oV,h.LG,f.kk,f.fb,f.Cp],styles:[".marketplace-management[_ngcontent-%COMP%]{padding:24px}.marketplace-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:24px}.marketplace-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600}.marketplace-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.marketplace-management[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:24px}.marketplace-management[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:140px}.marketplace-management[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]{margin-bottom:16px}.marketplace-management[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%;max-width:400px}.marketplace-management[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:48px}.marketplace-management[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.marketplace-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:64px 24px}.marketplace-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc}.marketplace-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.marketplace-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.marketplace-management[_ngcontent-%COMP%]   .posts-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #00000014}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]{width:100%}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;background:#f5f5f5;display:flex;align-items:center;justify-content:center}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{color:#ccc;font-size:28px}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#333}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-description[_ngcontent-%COMP%]{font-size:12px;color:#888;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:600;color:#4caf50;font-size:14px}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-name[_ngcontent-%COMP%]{font-weight:500;font-size:13px}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-phone[_ngcontent-%COMP%]{font-size:12px;color:#666}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-location[_ngcontent-%COMP%]{font-size:11px;color:#999}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;padding:2px 10px;border-radius:12px;font-size:12px;font-weight:500}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .voice-player[_ngcontent-%COMP%]{width:180px;height:32px}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .no-voice[_ngcontent-%COMP%]{color:#ccc}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;font-size:12px;font-weight:500;white-space:nowrap}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-pending_approval[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-approved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-sold[_ngcontent-%COMP%]{background:#f3e5f5;color:#6a1b9a}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-flagged[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hold[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hidden[_ngcontent-%COMP%]{background:#eceff1;color:#546e7a}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-correction_required[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-removed[_ngcontent-%COMP%]{background:#fce4ec;color:#b71c1c}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#888;white-space:nowrap}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .action-dropdown[_ngcontent-%COMP%]{font-size:13px;white-space:nowrap}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:3px;padding:3px 10px;border-radius:12px;font-size:11px;font-weight:600;letter-spacing:.5px}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]   .badge-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-paid[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32;border:1px solid #a5d6a7}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-free[_ngcontent-%COMP%]{background:#f5f5f5;color:#9e9e9e;border:1px solid #e0e0e0}.marketplace-management[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:16px;border-top:1px solid #eee}.marketplace-management[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:13px;color:#666}"]})}}return n})(),mt=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/real-estate`}getPendingPosts(e=0,o=20){return this.http.get(`${this.apiUrl}/pending`,{params:{page:e.toString(),size:o.toString()}})}getAllPosts(e=0,o=20,i=""){let r={page:e.toString(),size:o.toString()};return i&&(r.search=i),this.http.get(`${this.apiUrl}/admin/all`,{params:r})}getReportedPosts(e=0,o=20){return this.http.get(`${this.apiUrl}/admin/reported`,{params:{page:e.toString(),size:o.toString()}})}approvePost(e){return this.http.put(`${this.apiUrl}/${e}/approve`,{})}rejectPost(e){return this.http.put(`${this.apiUrl}/${e}/reject`,{})}deletePost(e){return this.http.delete(`${this.apiUrl}/${e}`)}changePostStatus(e,o){return this.http.put(`${this.apiUrl}/${e}/status`,{status:o})}adminUpdatePost(e,o){return this.http.put(`${this.apiUrl}/${e}/admin-update`,o)}toggleFeatured(e){return this.http.put(`${this.apiUrl}/${e}/featured`,{})}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ti(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",15),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return i.searchText="",t.Njj(i.onSearchChange())}),t.j41(1,"mat-icon"),t.EFF(2,"clear"),t.k0s()()}}function yi(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",10)(1,"mat-form-field",11)(2,"mat-label"),t.EFF(3,"Search by location"),t.k0s(),t.j41(4,"input",12),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.searchText=i)})("keyup.enter",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onSearchChange())}),t.k0s(),t.DNE(5,Ti,3,0,"button",13),t.j41(6,"mat-icon",14),t.EFF(7,"search"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngModel",e.searchText),t.R7$(1),t.Y8G("ngIf",e.searchText)}}function ji(n,a){1&n&&(t.j41(0,"div",16),t.nrm(1,"mat-spinner",17),t.j41(2,"p"),t.EFF(3,"Loading posts..."),t.k0s()())}function Di(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"No property listings are waiting for approval."),t.k0s())}function $i(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"No real estate posts yet."),t.k0s())}function Ii(n,a){if(1&n&&(t.j41(0,"div",18)(1,"mat-icon",19),t.EFF(2,"home_work"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No posts found"),t.k0s(),t.DNE(5,Di,2,0,"p",20),t.DNE(6,$i,2,0,"p",20),t.k0s()),2&n){const e=t.XpG();t.R7$(5),t.Y8G("ngIf","pending"===e.activeTab),t.R7$(1),t.Y8G("ngIf","all"===e.activeTab)}}function Ni(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Image"),t.k0s())}function Gi(n,a){if(1&n&&t.nrm(0,"img",44),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.Y8G("src",o.getFirstImageUrl(e.imageUrls),t.B4B)}}function wi(n,a){1&n&&(t.j41(0,"mat-icon",45),t.EFF(1,"home"),t.k0s())}function Si(n,a){if(1&n&&(t.j41(0,"span",46),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(1),t.SpI(" ",o.getImageCount(e.imageUrls)," ")}}function Ai(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",39)(1,"div",40),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(r.imageUrls&&c.openGallery(r))}),t.DNE(2,Gi,1,1,"img",41),t.DNE(3,wi,2,0,"mat-icon",42),t.DNE(4,Si,2,1,"span",43),t.k0s()()}if(2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.AVh("clickable",e.imageUrls),t.R7$(1),t.Y8G("ngIf",e.imageUrls),t.R7$(1),t.Y8G("ngIf",!e.imageUrls),t.R7$(1),t.Y8G("ngIf",o.getImageCount(e.imageUrls)>1)}}function Vi(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Title"),t.k0s())}function Li(n,a){if(1&n&&(t.j41(0,"div",49),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function Bi(n,a){if(1&n&&(t.j41(0,"td",39)(1,"div",47),t.EFF(2),t.k0s(),t.DNE(3,Li,2,1,"div",48),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(1),t.Y8G("ngIf",e.description)}}function Yi(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Type"),t.k0s())}function Ui(n,a){if(1&n&&(t.j41(0,"td",39)(1,"span",50),t.EFF(2),t.k0s(),t.j41(3,"span",51),t.EFF(4),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.getPropertyTypeLabel(e.propertyType)),t.R7$(1),t.Y8G("ngClass","FOR_RENT"===e.listingType?"rent":"sale"),t.R7$(1),t.SpI(" ",o.getListingTypeLabel(e.listingType)," ")}}function Xi(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Price"),t.k0s())}function zi(n,a){if(1&n&&(t.j41(0,"span",54),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.SpI("",e.areaSqft," sq.ft")}}function Ji(n,a){if(1&n&&(t.j41(0,"td",39)(1,"span",52),t.EFF(2),t.k0s(),t.DNE(3,zi,2,1,"span",53),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatPrice(e.price)),t.R7$(1),t.Y8G("ngIf",e.areaSqft)}}function qi(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Owner"),t.k0s())}function Hi(n,a){if(1&n&&(t.j41(0,"span",59),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.location)}}function Ki(n,a){if(1&n&&(t.j41(0,"td",39)(1,"div",55)(2,"span",56),t.EFF(3),t.k0s(),t.j41(4,"span",57),t.EFF(5),t.k0s(),t.DNE(6,Hi,2,1,"span",58),t.k0s()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.ownerName),t.R7$(2),t.JRh(e.ownerPhone),t.R7$(1),t.Y8G("ngIf",e.location)}}function Qi(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Status"),t.k0s())}function Wi(n,a){if(1&n&&(t.j41(0,"td",39)(1,"span",60),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.SpI(" ",o.getStatusLabel(e.status)," ")}}function Zi(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Type"),t.k0s())}function tr(n,a){1&n&&(t.j41(0,"span",63)(1,"mat-icon",64),t.EFF(2,"payments"),t.k0s(),t.EFF(3," PAID "),t.k0s())}function er(n,a){1&n&&(t.j41(0,"span",65),t.EFF(1,"FREE"),t.k0s())}function nr(n,a){if(1&n&&(t.j41(0,"td",39),t.DNE(1,tr,4,0,"span",61),t.DNE(2,er,2,0,"span",62),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.isPaid),t.R7$(1),t.Y8G("ngIf",!e.isPaid)}}function or(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Featured"),t.k0s())}function ar(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",39)(1,"button",66),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.toggleFeatured(r))}),t.j41(2,"mat-icon"),t.EFF(3),t.k0s()()()}if(2&n){const e=a.$implicit;t.R7$(1),t.AVh("is-featured",e.isFeatured),t.Y8G("matTooltip",e.isFeatured?"Remove from featured":"Mark as featured"),t.R7$(2),t.JRh(e.isFeatured?"star":"star_border")}}function ir(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Date"),t.k0s())}function rr(n,a){if(1&n&&(t.j41(0,"td",39)(1,"span",67),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function sr(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Actions"),t.k0s())}function cr(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",73),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.approvePost(i))}),t.j41(1,"mat-icon"),t.EFF(2,"check_circle"),t.k0s()()}}function lr(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",74),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.rejectPost(i))}),t.j41(1,"mat-icon"),t.EFF(2,"cancel"),t.k0s()()}}function pr(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",39)(1,"div",68)(2,"button",69),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.editPost(r))}),t.j41(3,"mat-icon"),t.EFF(4,"edit"),t.k0s()(),t.DNE(5,cr,3,0,"button",70),t.DNE(6,lr,3,0,"button",71),t.j41(7,"button",72),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.deletePost(r))}),t.j41(8,"mat-icon"),t.EFF(9,"delete"),t.k0s()()()()}if(2&n){const e=a.$implicit;t.R7$(5),t.Y8G("ngIf","PENDING_APPROVAL"===e.status),t.R7$(1),t.Y8G("ngIf","PENDING_APPROVAL"===e.status)}}function mr(n,a){1&n&&t.nrm(0,"tr",75)}function dr(n,a){1&n&&t.nrm(0,"tr",76)}function gr(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",77)(1,"button",78),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage-1))}),t.j41(2,"mat-icon"),t.EFF(3,"chevron_left"),t.k0s(),t.EFF(4," Previous "),t.k0s(),t.j41(5,"span",79),t.EFF(6),t.k0s(),t.j41(7,"button",78),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage+1))}),t.EFF(8," Next "),t.j41(9,"mat-icon"),t.EFF(10,"chevron_right"),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("disabled",0===e.currentPage),t.R7$(5),t.E5c("Page ",e.currentPage+1," of ",e.totalPages," (",e.totalItems," posts)"),t.R7$(1),t.Y8G("disabled",e.currentPage>=e.totalPages-1)}}const dt=function(){return["image","title","propertyType","price","owner","status","type","featured","date","actions"]};function _r(n,a){if(1&n&&(t.j41(0,"div",21)(1,"table",22),t.qex(2,23),t.DNE(3,Ni,2,0,"th",24),t.DNE(4,Ai,5,5,"td",25),t.bVm(),t.qex(5,26),t.DNE(6,Vi,2,0,"th",24),t.DNE(7,Bi,4,2,"td",25),t.bVm(),t.qex(8,27),t.DNE(9,Yi,2,0,"th",24),t.DNE(10,Ui,5,3,"td",25),t.bVm(),t.qex(11,28),t.DNE(12,Xi,2,0,"th",24),t.DNE(13,Ji,4,2,"td",25),t.bVm(),t.qex(14,29),t.DNE(15,qi,2,0,"th",24),t.DNE(16,Ki,7,3,"td",25),t.bVm(),t.qex(17,30),t.DNE(18,Qi,2,0,"th",24),t.DNE(19,Wi,3,2,"td",25),t.bVm(),t.qex(20,31),t.DNE(21,Zi,2,0,"th",24),t.DNE(22,nr,3,2,"td",25),t.bVm(),t.qex(23,32),t.DNE(24,or,2,0,"th",24),t.DNE(25,ar,4,4,"td",25),t.bVm(),t.qex(26,33),t.DNE(27,ir,2,0,"th",24),t.DNE(28,rr,3,1,"td",25),t.bVm(),t.qex(29,34),t.DNE(30,sr,2,0,"th",24),t.DNE(31,pr,10,2,"td",25),t.bVm(),t.DNE(32,mr,1,0,"tr",35),t.DNE(33,dr,1,0,"tr",36),t.k0s(),t.DNE(34,gr,11,5,"div",37),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.posts),t.R7$(31),t.Y8G("matHeaderRowDef",t.lJ4(4,dt)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(5,dt)),t.R7$(1),t.Y8G("ngIf",e.totalPages>1)}}function ur(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",90),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.prevImage())}),t.j41(1,"mat-icon"),t.EFF(2,"chevron_left"),t.k0s()()}}function fr(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",91),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.nextImage())}),t.j41(1,"mat-icon"),t.EFF(2,"chevron_right"),t.k0s()()}}function Cr(n,a){if(1&n){const e=t.RV6();t.j41(0,"img",94),t.bIt("click",function(){const r=t.eBV(e).index,c=t.XpG(3);return t.Njj(c.galleryIndex=r)}),t.k0s()}if(2&n){const e=a.$implicit,o=a.index,i=t.XpG(3);t.AVh("active",o===i.galleryIndex),t.Y8G("src",e,t.B4B)}}function hr(n,a){if(1&n&&(t.j41(0,"div",92),t.DNE(1,Cr,1,3,"img",93),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.galleryImages)}}function Pr(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",80),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.closeGallery())}),t.j41(1,"div",81),t.bIt("click",function(i){return i.stopPropagation()}),t.j41(2,"button",82),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.closeGallery())}),t.j41(3,"mat-icon"),t.EFF(4,"close"),t.k0s()(),t.j41(5,"div",83),t.EFF(6),t.k0s(),t.j41(7,"div",84),t.DNE(8,ur,3,0,"button",85),t.nrm(9,"img",86),t.DNE(10,fr,3,0,"button",87),t.k0s(),t.j41(11,"div",88),t.EFF(12),t.k0s(),t.DNE(13,hr,2,1,"div",89),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(6),t.JRh(e.galleryTitle),t.R7$(2),t.Y8G("ngIf",e.galleryImages.length>1),t.R7$(1),t.Y8G("src",e.galleryImages[e.galleryIndex],t.B4B),t.R7$(1),t.Y8G("ngIf",e.galleryImages.length>1),t.R7$(2),t.Lme("",e.galleryIndex+1," / ",e.galleryImages.length,""),t.R7$(1),t.Y8G("ngIf",e.galleryImages.length>1)}}let br=(()=>{class n{constructor(e,o,i){this.realEstateService=e,this.snackBar=o,this.dialog=i,this.posts=[],this.loading=!0,this.activeTab="pending",this.currentPage=0,this.totalPages=0,this.totalItems=0,this.pageSize=20,this.searchText="",this.galleryOpen=!1,this.galleryImages=[],this.galleryIndex=0,this.galleryTitle=""}ngOnInit(){this.loadPosts()}loadPosts(){this.loading=!0,("pending"===this.activeTab?this.realEstateService.getPendingPosts(this.currentPage,this.pageSize):this.realEstateService.getAllPosts(this.currentPage,this.pageSize,this.searchText)).subscribe({next:o=>{const i=o.data;this.posts=i?.content||[],this.totalPages=i?.totalPages||0,this.totalItems=i?.totalItems||0,this.loading=!1},error:o=>{console.error("Error loading real estate posts:",o),this.loading=!1,this.snackBar.open("Failed to load posts","Close",{duration:3e3})}})}onSearchChange(){this.currentPage=0,this.loadPosts()}switchTab(e){this.activeTab=e,this.currentPage=0,this.loadPosts()}approvePost(e){this.realEstateService.approvePost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" approved`,"OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to approve post","Close",{duration:3e3})}})}rejectPost(e){confirm(`Reject "${e.title}"?`)&&this.realEstateService.rejectPost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" rejected`,"OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to reject post","Close",{duration:3e3})}})}deletePost(e){confirm(`Delete "${e.title}" permanently?`)&&this.realEstateService.deletePost(e.id).subscribe({next:()=>{this.snackBar.open("Post deleted","OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to delete post","Close",{duration:3e3})}})}editPost(e){this.dialog.open(B,{width:"600px",maxHeight:"90vh",data:{postType:"realEstate",post:{...e}}}).afterClosed().subscribe(i=>{i&&this.realEstateService.adminUpdatePost(e.id,i).subscribe({next:()=>{this.snackBar.open("Post updated","OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to update post","Close",{duration:3e3})}})})}toggleFeatured(e){this.realEstateService.toggleFeatured(e.id).subscribe({next:o=>{const r=o.data?.isFeatured;e.isFeatured=r,this.snackBar.open(r?`"${e.title}" marked as featured`:`"${e.title}" removed from featured`,"OK",{duration:3e3})},error:()=>{this.snackBar.open("Failed to toggle featured","Close",{duration:3e3})}})}getFirstImageUrl(e){if(!e)return"";const o=e.split(",")[0]?.trim();return(0,E.V)(o||null)}getAllImageUrls(e){return e?e.split(",").map(o=>(0,E.V)(o.trim())).filter(o=>!!o):[]}getImageCount(e){return e?e.split(",").filter(o=>o.trim()).length:0}openGallery(e){this.galleryImages=this.getAllImageUrls(e.imageUrls),0!==this.galleryImages.length&&(this.galleryIndex=0,this.galleryTitle=e.title,this.galleryOpen=!0)}closeGallery(){this.galleryOpen=!1,this.galleryImages=[],this.galleryIndex=0}prevImage(){this.galleryIndex=this.galleryIndex>0?this.galleryIndex-1:this.galleryImages.length-1}nextImage(){this.galleryIndex=this.galleryIndex<this.galleryImages.length-1?this.galleryIndex+1:0}getPropertyTypeLabel(e){switch(e){case"LAND":return"Land";case"HOUSE":return"House";case"APARTMENT":return"Apartment";case"VILLA":return"Villa";case"COMMERCIAL":return"Commercial";case"PLOT":return"Plot";case"FARM_LAND":return"Farm Land";case"PG_HOSTEL":return"PG/Hostel";default:return e}}getListingTypeLabel(e){return"FOR_RENT"===e?"For Rent":"For Sale"}getStatusColor(e){switch(e){case"PENDING_APPROVAL":case"FLAGGED":return"warn";case"APPROVED":return"primary";case"REJECTED":return"accent";default:return""}}getStatusLabel(e){switch(e){case"PENDING_APPROVAL":return"Pending";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";case"SOLD":return"Sold";case"RENTED":return"Rented";case"FLAGGED":return"Flagged";default:return e}}formatPrice(e){return null==e?"Negotiable":e>=1e7?"\u20b9"+(e/1e7).toFixed(2)+" Cr":e>=1e5?"\u20b9"+(e/1e5).toFixed(2)+" L":"\u20b9"+e.toLocaleString("en-IN")}formatDate(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}onPageChange(e){this.currentPage=e,this.loadPosts()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(mt),t.rXU(b.UG),t.rXU(M.bZ))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-real-estate-management"]],decls:16,vars:7,consts:[[1,"real-estate-management"],[1,"header"],[1,"subtitle"],[1,"tabs"],["mat-flat-button","",3,"color","click"],["class","search-filter",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","posts-container",4,"ngIf"],["class","gallery-overlay",3,"click",4,"ngIf"],[1,"search-filter"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Type location and press Enter...",3,"ngModel","ngModelChange","keyup.enter"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],["matPrefix",""],["mat-icon-button","","matSuffix","",3,"click"],[1,"loading-container"],["diameter","40"],[1,"empty-state"],[1,"empty-icon"],[4,"ngIf"],[1,"posts-container"],["mat-table","",1,"posts-table",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","propertyType"],["matColumnDef","price"],["matColumnDef","owner"],["matColumnDef","status"],["matColumnDef","type"],["matColumnDef","featured"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","pagination",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"post-image",3,"click"],["alt","Property","loading","lazy",3,"src",4,"ngIf"],["class","no-image",4,"ngIf"],["class","image-count",4,"ngIf"],["alt","Property","loading","lazy",3,"src"],[1,"no-image"],[1,"image-count"],[1,"post-title"],["class","post-description",4,"ngIf"],[1,"post-description"],[1,"type-chip","property-type"],[1,"type-chip","listing-type",3,"ngClass"],[1,"price"],["class","area",4,"ngIf"],[1,"area"],[1,"owner-info"],[1,"owner-name"],[1,"owner-phone"],["class","owner-location",4,"ngIf"],[1,"owner-location"],[1,"status-badge",3,"ngClass"],["class","type-badge type-paid",4,"ngIf"],["class","type-badge type-free",4,"ngIf"],[1,"type-badge","type-paid"],[1,"badge-icon"],[1,"type-badge","type-free"],["mat-icon-button","",1,"featured-toggle",3,"matTooltip","click"],[1,"date"],[1,"action-buttons"],["mat-icon-button","","color","primary","matTooltip","Edit",3,"click"],["mat-icon-button","","color","primary","matTooltip","Approve",3,"click",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Reject",3,"click",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-icon-button","","color","primary","matTooltip","Approve",3,"click"],["mat-icon-button","","color","warn","matTooltip","Reject",3,"click"],["mat-header-row",""],["mat-row",""],[1,"pagination"],["mat-button","",3,"disabled","click"],[1,"page-info"],[1,"gallery-overlay",3,"click"],[1,"gallery-content",3,"click"],[1,"gallery-close",3,"click"],[1,"gallery-title"],[1,"gallery-image-container"],["class","gallery-nav prev",3,"click",4,"ngIf"],["alt","Property photo",1,"gallery-image",3,"src"],["class","gallery-nav next",3,"click",4,"ngIf"],[1,"gallery-counter"],["class","gallery-thumbnails",4,"ngIf"],[1,"gallery-nav","prev",3,"click"],[1,"gallery-nav","next",3,"click"],[1,"gallery-thumbnails"],["alt","Thumbnail",3,"src","active","click",4,"ngFor","ngForOf"],["alt","Thumbnail",3,"src","click"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Real Estate Management"),t.k0s(),t.j41(4,"p",2),t.EFF(5,"Review and manage property listing posts"),t.k0s()(),t.j41(6,"div",3)(7,"button",4),t.bIt("click",function(){return i.switchTab("pending")}),t.EFF(8," Pending Approval "),t.k0s(),t.j41(9,"button",4),t.bIt("click",function(){return i.switchTab("all")}),t.EFF(10," All Posts "),t.k0s()(),t.DNE(11,yi,8,2,"div",5),t.DNE(12,ji,4,0,"div",6),t.DNE(13,Ii,7,2,"div",7),t.DNE(14,_r,35,6,"div",8),t.DNE(15,Pr,14,7,"div",9),t.k0s()),2&o&&(t.R7$(7),t.Y8G("color","pending"===i.activeTab?"primary":void 0),t.R7$(2),t.Y8G("color","all"===i.activeTab?"primary":void 0),t.R7$(2),t.Y8G("ngIf","all"===i.activeTab),t.R7$(1),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.posts.length),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.posts.length>0),t.R7$(1),t.Y8G("ngIf",i.galleryOpen))},dependencies:[p.YU,p.Sq,p.bT,l.me,l.BC,l.vS,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,g.iY,C.An,k.fg,m.rl,m.nJ,m.JW,m.yw,R.oV,h.LG],styles:[".real-estate-management[_ngcontent-%COMP%]{padding:24px}.real-estate-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:24px}.real-estate-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600}.real-estate-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.real-estate-management[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:24px}.real-estate-management[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:140px}.real-estate-management[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]{margin-bottom:16px}.real-estate-management[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%;max-width:400px}.real-estate-management[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:48px}.real-estate-management[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.real-estate-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:64px 24px}.real-estate-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc}.real-estate-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.real-estate-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.real-estate-management[_ngcontent-%COMP%]   .posts-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #00000014}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]{width:100%}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;background:#f5f5f5;display:flex;align-items:center;justify-content:center;position:relative}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image.clickable[_ngcontent-%COMP%]{cursor:pointer}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image.clickable[_ngcontent-%COMP%]:hover{opacity:.85}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{color:#ccc;font-size:28px}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .image-count[_ngcontent-%COMP%]{position:absolute;bottom:2px;right:2px;background:rgba(0,0,0,.7);color:#fff;font-size:10px;font-weight:600;padding:1px 5px;border-radius:8px;line-height:1.4}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#333}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-description[_ngcontent-%COMP%]{font-size:12px;color:#888;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-chip[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:500;margin-right:4px;margin-bottom:4px}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-chip.property-type[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-chip.listing-type.sale[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-chip.listing-type.rent[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:600;color:#4caf50;font-size:14px;display:block}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]{font-size:11px;color:#888}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]   .owner-name[_ngcontent-%COMP%]{font-weight:500;font-size:13px}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]   .owner-phone[_ngcontent-%COMP%]{font-size:12px;color:#666}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]   .owner-location[_ngcontent-%COMP%]{font-size:11px;color:#999}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;font-size:12px;font-weight:500;white-space:nowrap}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-pending_approval[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-approved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-sold[_ngcontent-%COMP%]{background:#f3e5f5;color:#6a1b9a}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rented[_ngcontent-%COMP%]{background:#e0f2f1;color:#00695c}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-flagged[_ngcontent-%COMP%]{background:#fce4ec;color:#b71c1c}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#888;white-space:nowrap}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:2px}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:3px;padding:3px 10px;border-radius:12px;font-size:11px;font-weight:600;letter-spacing:.5px}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]   .badge-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-paid[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32;border:1px solid #a5d6a7}.real-estate-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-free[_ngcontent-%COMP%]{background:#f5f5f5;color:#9e9e9e;border:1px solid #e0e0e0}.real-estate-management[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:16px;border-top:1px solid #eee}.real-estate-management[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:13px;color:#666}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.9);z-index:9999;display:flex;align-items:center;justify-content:center}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-content[_ngcontent-%COMP%]{position:relative;max-width:90vw;max-height:90vh;display:flex;flex-direction:column;align-items:center}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-close[_ngcontent-%COMP%]{position:absolute;top:-40px;right:-10px;background:none;border:none;color:#fff;cursor:pointer;z-index:10}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-close[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-title[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:500;margin-bottom:12px;text-align:center}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-image[_ngcontent-%COMP%]{max-width:80vw;max-height:65vh;object-fit:contain;border-radius:8px}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,.15);border:none;color:#fff;cursor:pointer;border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;transition:background .2s}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.3)}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav.prev[_ngcontent-%COMP%]{left:-56px}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav.next[_ngcontent-%COMP%]{right:-56px}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-counter[_ngcontent-%COMP%]{color:#ffffffb3;font-size:13px;margin-top:10px}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px;overflow-x:auto;max-width:80vw;padding:4px 0}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:56px;height:56px;object-fit:cover;border-radius:6px;cursor:pointer;opacity:.5;border:2px solid transparent;transition:opacity .2s,border-color .2s}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   img.active[_ngcontent-%COMP%]{opacity:1;border-color:#fff}.real-estate-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{opacity:.8}"]})}}return n})(),Mr=(()=>{class n{constructor(e){this.http=e,this.publicUrl=`${F.c.apiUrl}/bus-timings`,this.adminUrl=`${F.c.apiUrl}/admin/bus-timings`}getAllBusTimings(){return this.http.get(`${this.adminUrl}`)}getActiveBusTimings(e,o){let i={};return e&&(i.location=e),o&&(i.search=o),this.http.get(`${this.publicUrl}`,{params:i})}getBusTimingById(e){return this.http.get(`${this.publicUrl}/${e}`)}createBusTiming(e){return this.http.post(`${this.adminUrl}`,e)}updateBusTiming(e,o){return this.http.put(`${this.adminUrl}/${e}`,o)}deleteBusTiming(e){return this.http.delete(`${this.adminUrl}/${e}`)}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function vr(n,a){if(1&n&&(t.j41(0,"mat-option",16),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e),t.R7$(1),t.JRh(e)}}function xr(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.clearFilters())}),t.j41(1,"mat-icon"),t.EFF(2,"clear"),t.k0s(),t.EFF(3," Clear "),t.k0s()}}function Fr(n,a){if(1&n&&(t.j41(0,"mat-option",16),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.JRh(e.label)}}function Or(n,a){if(1&n&&(t.j41(0,"mat-option",16),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.JRh(e.label)}}function kr(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",44),t.nrm(1,"div",45),t.j41(2,"div",29)(3,"mat-form-field",30)(4,"mat-label"),t.EFF(5),t.k0s(),t.j41(6,"input",46),t.bIt("ngModelChange",function(i){const c=t.eBV(e).$implicit;return t.Njj(c.name=i)}),t.k0s()(),t.j41(7,"mat-form-field",32)(8,"mat-label"),t.EFF(9,"Time"),t.k0s(),t.j41(10,"input",47),t.bIt("ngModelChange",function(i){const c=t.eBV(e).$implicit;return t.Njj(c.time=i)}),t.k0s()(),t.j41(11,"button",48),t.bIt("click",function(){const r=t.eBV(e).index,c=t.XpG(2);return t.Njj(c.removeStop(c.newStops,r))}),t.j41(12,"mat-icon"),t.EFF(13,"remove_circle"),t.k0s()()()()}if(2&n){const e=a.$implicit,o=a.index;t.R7$(5),t.SpI("Stop ",o+1,""),t.R7$(1),t.Y8G("ngModel",e.name),t.R7$(4),t.Y8G("ngModel",e.time)}}function Er(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",18)(1,"h3"),t.EFF(2,"Add New Bus Timing"),t.k0s(),t.j41(3,"div",19)(4,"mat-form-field",20)(5,"mat-label"),t.EFF(6,"Bus Number *"),t.k0s(),t.j41(7,"input",21),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newTiming.busNumber=i)}),t.k0s()(),t.j41(8,"mat-form-field",20)(9,"mat-label"),t.EFF(10,"Bus Name"),t.k0s(),t.j41(11,"input",22),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newTiming.busName=i)}),t.k0s()(),t.j41(12,"mat-form-field",20)(13,"mat-label"),t.EFF(14,"Bus Type"),t.k0s(),t.j41(15,"mat-select",23),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newTiming.busType=i)}),t.DNE(16,Fr,2,2,"mat-option",10),t.k0s()(),t.j41(17,"mat-form-field",20)(18,"mat-label"),t.EFF(19,"Operating Days"),t.k0s(),t.j41(20,"mat-select",23),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newTiming.operatingDays=i)}),t.DNE(21,Or,2,2,"mat-option",10),t.k0s()(),t.j41(22,"mat-form-field",20)(23,"mat-label"),t.EFF(24,"Fare (\u20b9)"),t.k0s(),t.j41(25,"input",24),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newTiming.fare=i)}),t.k0s()(),t.j41(26,"mat-form-field",20)(27,"mat-label"),t.EFF(28,"Location Area *"),t.k0s(),t.j41(29,"input",25),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newTiming.locationArea=i)}),t.k0s()()(),t.j41(30,"div",26)(31,"h4"),t.EFF(32,"Route & Stops"),t.k0s(),t.j41(33,"div",27),t.nrm(34,"div",28),t.j41(35,"div",29)(36,"mat-form-field",30)(37,"mat-label"),t.EFF(38,"Start Point *"),t.k0s(),t.j41(39,"input",31),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newTiming.routeFrom=i)}),t.k0s()(),t.j41(40,"mat-form-field",32)(41,"mat-label"),t.EFF(42,"Departure Time *"),t.k0s(),t.j41(43,"input",33),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newTiming.departureTime=i)}),t.k0s()()()(),t.DNE(44,kr,14,3,"div",34),t.j41(45,"div",35),t.nrm(46,"div",36),t.j41(47,"div",29)(48,"mat-form-field",30)(49,"mat-label"),t.EFF(50,"End Point *"),t.k0s(),t.j41(51,"input",37),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newTiming.routeTo=i)}),t.k0s()(),t.j41(52,"mat-form-field",32)(53,"mat-label"),t.EFF(54,"Arrival Time"),t.k0s(),t.j41(55,"input",38),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newTiming.arrivalTime=i)}),t.k0s()()()(),t.j41(56,"div",39)(57,"button",40),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.addStop(i.newStops))}),t.j41(58,"mat-icon"),t.EFF(59,"add_circle"),t.k0s(),t.EFF(60," Add Stop "),t.k0s(),t.j41(61,"button",41),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.autoCalculateTimes(i.newStops,i.newTiming.departureTime,i.newTiming.arrivalTime))}),t.j41(62,"mat-icon"),t.EFF(63,"calculate"),t.k0s(),t.EFF(64," Auto Calculate Times "),t.k0s()()(),t.nrm(65,"mat-divider"),t.j41(66,"div",42)(67,"button",43),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.addTiming())}),t.j41(68,"mat-icon"),t.EFF(69,"save"),t.k0s(),t.EFF(70," Save "),t.k0s(),t.j41(71,"button",17),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.cancelAdding())}),t.EFF(72,"Cancel"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(7),t.Y8G("ngModel",e.newTiming.busNumber),t.R7$(4),t.Y8G("ngModel",e.newTiming.busName),t.R7$(4),t.Y8G("ngModel",e.newTiming.busType),t.R7$(1),t.Y8G("ngForOf",e.busTypeOptions),t.R7$(4),t.Y8G("ngModel",e.newTiming.operatingDays),t.R7$(1),t.Y8G("ngForOf",e.operatingDaysOptions),t.R7$(4),t.Y8G("ngModel",e.newTiming.fare),t.R7$(4),t.Y8G("ngModel",e.newTiming.locationArea),t.R7$(10),t.Y8G("ngModel",e.newTiming.routeFrom),t.R7$(4),t.Y8G("ngModel",e.newTiming.departureTime),t.R7$(1),t.Y8G("ngForOf",e.newStops),t.R7$(7),t.Y8G("ngModel",e.newTiming.routeTo),t.R7$(4),t.Y8G("ngModel",e.newTiming.arrivalTime),t.R7$(6),t.Y8G("disabled",0===e.newStops.length)}}function Rr(n,a){1&n&&(t.j41(0,"div",49),t.nrm(1,"mat-spinner",50),t.j41(2,"p"),t.EFF(3,"Loading bus timings..."),t.k0s()())}function Tr(n,a){1&n&&(t.j41(0,"th",68),t.EFF(1,"Bus No."),t.k0s())}function yr(n,a){if(1&n&&(t.j41(0,"div",72),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.busName)}}function jr(n,a){if(1&n&&(t.j41(0,"td",69)(1,"span",70),t.EFF(2),t.k0s(),t.DNE(3,yr,2,1,"div",71),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.busNumber),t.R7$(1),t.Y8G("ngIf",e.busName)}}function Dr(n,a){1&n&&(t.j41(0,"th",68),t.EFF(1,"Route"),t.k0s())}function $r(n,a){if(1&n&&(t.j41(0,"span",77),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.arrivalTime)}}function Ir(n,a){if(1&n&&(t.j41(0,"td",69)(1,"div",73)(2,"span",74),t.EFF(3),t.k0s(),t.j41(4,"strong"),t.EFF(5),t.k0s(),t.j41(6,"mat-icon",75),t.EFF(7,"arrow_forward"),t.k0s(),t.j41(8,"strong"),t.EFF(9),t.k0s(),t.DNE(10,$r,2,1,"span",76),t.k0s()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.departureTime),t.R7$(2),t.JRh(e.routeFrom),t.R7$(4),t.JRh(e.routeTo),t.R7$(1),t.Y8G("ngIf",e.arrivalTime)}}function Nr(n,a){1&n&&(t.j41(0,"th",68),t.EFF(1,"Stops"),t.k0s())}function Gr(n,a){if(1&n&&(t.j41(0,"span",86),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.time)}}function wr(n,a){if(1&n&&(t.j41(0,"div",82),t.nrm(1,"span",83),t.j41(2,"span",84),t.EFF(3),t.k0s(),t.DNE(4,Gr,2,1,"span",85),t.k0s()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.name),t.R7$(1),t.Y8G("ngIf",e.time)}}function Sr(n,a){if(1&n&&(t.j41(0,"div",80),t.DNE(1,wr,5,2,"div",81),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",o.getStopsDisplay(e.viaStops))}}function Ar(n,a){1&n&&(t.j41(0,"span",87),t.EFF(1,"Direct"),t.k0s())}function Vr(n,a){if(1&n&&(t.j41(0,"td",69),t.DNE(1,Sr,2,1,"div",78),t.DNE(2,Ar,2,0,"span",79),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngIf",o.getStopsCount(e.viaStops)>0),t.R7$(1),t.Y8G("ngIf",0===o.getStopsCount(e.viaStops))}}function Lr(n,a){1&n&&(t.j41(0,"th",68),t.EFF(1,"Type"),t.k0s())}function Br(n,a){if(1&n&&(t.j41(0,"td",69)(1,"mat-chip"),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.HbH("bus-type-"+(null==e.busType?null:e.busType.toLowerCase())),t.R7$(1),t.SpI(" ",o.getBusTypeLabel(e.busType)," ")}}function Yr(n,a){1&n&&(t.j41(0,"th",68),t.EFF(1,"Days"),t.k0s())}function Ur(n,a){if(1&n&&(t.j41(0,"td",69),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.SpI(" ",o.getOperatingDaysLabel(e.operatingDays)," ")}}function Xr(n,a){1&n&&(t.j41(0,"th",68),t.EFF(1,"Fare"),t.k0s())}function zr(n,a){if(1&n&&(t.j41(0,"td",69)(1,"span",88),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.fare?"\u20b9"+e.fare:"-")}}function Jr(n,a){1&n&&(t.j41(0,"th",68),t.EFF(1,"Location"),t.k0s())}function qr(n,a){if(1&n&&(t.j41(0,"td",69),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.JRh(e.locationArea)}}function Hr(n,a){1&n&&(t.j41(0,"th",68),t.EFF(1,"Status"),t.k0s())}function Kr(n,a){if(1&n&&(t.j41(0,"td",69)(1,"span"),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit;t.R7$(1),t.HbH(e.isActive?"status-active":"status-inactive"),t.R7$(1),t.SpI(" ",e.isActive?"Active":"Inactive"," ")}}function Qr(n,a){1&n&&(t.j41(0,"th",68),t.EFF(1,"Actions"),t.k0s())}function Wr(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",69)(1,"div",89)(2,"button",90),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.startEditing(r))}),t.j41(3,"mat-icon"),t.EFF(4,"edit"),t.k0s()(),t.j41(5,"button",91),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.deleteTiming(r.id))}),t.j41(6,"mat-icon"),t.EFF(7,"delete"),t.k0s()()()()}}function Zr(n,a){1&n&&t.nrm(0,"tr",92)}function ts(n,a){1&n&&t.nrm(0,"tr",93)}function es(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"Try adjusting your search or filter"),t.k0s())}function ns(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"Add your first bus timing to get started"),t.k0s())}function os(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",43),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.startAdding())}),t.EFF(1," Add Bus Timing "),t.k0s()}}function as(n,a){if(1&n&&(t.j41(0,"div",94)(1,"mat-icon"),t.EFF(2,"directions_bus"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No bus timings found"),t.k0s(),t.DNE(5,es,2,0,"p",95),t.DNE(6,ns,2,0,"p",95),t.DNE(7,os,2,0,"button",96),t.k0s()),2&n){const e=t.XpG(2);t.R7$(5),t.Y8G("ngIf",e.searchTerm||e.filterLocation),t.R7$(1),t.Y8G("ngIf",!e.searchTerm&&!e.filterLocation),t.R7$(1),t.Y8G("ngIf",!e.searchTerm&&!e.filterLocation)}}function is(n,a){if(1&n&&(t.j41(0,"div",51)(1,"div",52)(2,"span"),t.EFF(3),t.k0s()(),t.j41(4,"table",53),t.qex(5,54),t.DNE(6,Tr,2,0,"th",55),t.DNE(7,jr,4,2,"td",56),t.bVm(),t.qex(8,57),t.DNE(9,Dr,2,0,"th",55),t.DNE(10,Ir,11,4,"td",56),t.bVm(),t.qex(11,58),t.DNE(12,Nr,2,0,"th",55),t.DNE(13,Vr,3,2,"td",56),t.bVm(),t.qex(14,59),t.DNE(15,Lr,2,0,"th",55),t.DNE(16,Br,3,3,"td",56),t.bVm(),t.qex(17,60),t.DNE(18,Yr,2,0,"th",55),t.DNE(19,Ur,2,1,"td",56),t.bVm(),t.qex(20,61),t.DNE(21,Xr,2,0,"th",55),t.DNE(22,zr,3,1,"td",56),t.bVm(),t.qex(23,62),t.DNE(24,Jr,2,0,"th",55),t.DNE(25,qr,2,1,"td",56),t.bVm(),t.qex(26,63),t.DNE(27,Hr,2,0,"th",55),t.DNE(28,Kr,3,3,"td",56),t.bVm(),t.qex(29,64),t.DNE(30,Qr,2,0,"th",55),t.DNE(31,Wr,8,0,"td",56),t.bVm(),t.DNE(32,Zr,1,0,"tr",65),t.DNE(33,ts,1,0,"tr",66),t.k0s(),t.DNE(34,as,8,3,"div",67),t.k0s()),2&n){const e=t.XpG();t.R7$(3),t.Lme("Showing ",e.filteredTimings.length," of ",e.timings.length," bus timings"),t.R7$(1),t.Y8G("dataSource",e.filteredTimings),t.R7$(28),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(1),t.Y8G("ngIf",0===e.filteredTimings.length)}}function rs(n,a){if(1&n&&(t.j41(0,"mat-option",16),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.JRh(e.label)}}function ss(n,a){if(1&n&&(t.j41(0,"mat-option",16),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.JRh(e.label)}}function cs(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",44),t.nrm(1,"div",45),t.j41(2,"div",29)(3,"mat-form-field",30)(4,"mat-label"),t.EFF(5),t.k0s(),t.j41(6,"input",98),t.bIt("ngModelChange",function(i){const c=t.eBV(e).$implicit;return t.Njj(c.name=i)}),t.k0s()(),t.j41(7,"mat-form-field",32)(8,"mat-label"),t.EFF(9,"Time"),t.k0s(),t.j41(10,"input",98),t.bIt("ngModelChange",function(i){const c=t.eBV(e).$implicit;return t.Njj(c.time=i)}),t.k0s()(),t.j41(11,"button",100),t.bIt("click",function(){const r=t.eBV(e).index,c=t.XpG(2);return t.Njj(c.removeStop(c.editingStops,r))}),t.j41(12,"mat-icon"),t.EFF(13,"remove_circle"),t.k0s()()()()}if(2&n){const e=a.$implicit,o=a.index;t.R7$(5),t.SpI("Stop ",o+1,""),t.R7$(1),t.Y8G("ngModel",e.name),t.R7$(4),t.Y8G("ngModel",e.time)}}function ls(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",97)(1,"h3"),t.EFF(2),t.k0s(),t.j41(3,"div",19)(4,"mat-form-field",20)(5,"mat-label"),t.EFF(6,"Bus Number *"),t.k0s(),t.j41(7,"input",98),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.editingTiming.busNumber=i)}),t.k0s()(),t.j41(8,"mat-form-field",20)(9,"mat-label"),t.EFF(10,"Bus Name"),t.k0s(),t.j41(11,"input",98),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.editingTiming.busName=i)}),t.k0s()(),t.j41(12,"mat-form-field",20)(13,"mat-label"),t.EFF(14,"Bus Type"),t.k0s(),t.j41(15,"mat-select",23),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.editingTiming.busType=i)}),t.DNE(16,rs,2,2,"mat-option",10),t.k0s()(),t.j41(17,"mat-form-field",20)(18,"mat-label"),t.EFF(19,"Operating Days"),t.k0s(),t.j41(20,"mat-select",23),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.editingTiming.operatingDays=i)}),t.DNE(21,ss,2,2,"mat-option",10),t.k0s()(),t.j41(22,"mat-form-field",20)(23,"mat-label"),t.EFF(24,"Fare (\u20b9)"),t.k0s(),t.j41(25,"input",24),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.editingTiming.fare=i)}),t.k0s()(),t.j41(26,"mat-form-field",20)(27,"mat-label"),t.EFF(28,"Location Area *"),t.k0s(),t.j41(29,"input",98),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.editingTiming.locationArea=i)}),t.k0s()(),t.j41(30,"div",99)(31,"mat-slide-toggle",23),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.editingTiming.isActive=i)}),t.EFF(32,"Active"),t.k0s()()(),t.j41(33,"div",26)(34,"h4"),t.EFF(35,"Route & Stops"),t.k0s(),t.j41(36,"div",27),t.nrm(37,"div",28),t.j41(38,"div",29)(39,"mat-form-field",30)(40,"mat-label"),t.EFF(41,"Start Point *"),t.k0s(),t.j41(42,"input",98),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.editingTiming.routeFrom=i)}),t.k0s()(),t.j41(43,"mat-form-field",32)(44,"mat-label"),t.EFF(45,"Departure Time *"),t.k0s(),t.j41(46,"input",98),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.editingTiming.departureTime=i)}),t.k0s()()()(),t.DNE(47,cs,14,3,"div",34),t.j41(48,"div",35),t.nrm(49,"div",36),t.j41(50,"div",29)(51,"mat-form-field",30)(52,"mat-label"),t.EFF(53,"End Point *"),t.k0s(),t.j41(54,"input",98),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.editingTiming.routeTo=i)}),t.k0s()(),t.j41(55,"mat-form-field",32)(56,"mat-label"),t.EFF(57,"Arrival Time"),t.k0s(),t.j41(58,"input",98),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.editingTiming.arrivalTime=i)}),t.k0s()()()(),t.j41(59,"div",39)(60,"button",40),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.addStop(i.editingStops))}),t.j41(61,"mat-icon"),t.EFF(62,"add_circle"),t.k0s(),t.EFF(63," Add Stop "),t.k0s(),t.j41(64,"button",41),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.autoCalculateTimes(i.editingStops,i.editingTiming.departureTime,i.editingTiming.arrivalTime))}),t.j41(65,"mat-icon"),t.EFF(66,"calculate"),t.k0s(),t.EFF(67," Auto Calculate Times "),t.k0s()()(),t.nrm(68,"mat-divider"),t.j41(69,"div",42)(70,"button",43),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.updateTiming(i.editingTiming))}),t.j41(71,"mat-icon"),t.EFF(72,"save"),t.k0s(),t.EFF(73," Update "),t.k0s(),t.j41(74,"button",17),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.cancelEditing())}),t.EFF(75,"Cancel"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(2),t.SpI("Edit Bus Timing: ",e.editingTiming.busNumber,""),t.R7$(5),t.Y8G("ngModel",e.editingTiming.busNumber),t.R7$(4),t.Y8G("ngModel",e.editingTiming.busName),t.R7$(4),t.Y8G("ngModel",e.editingTiming.busType),t.R7$(1),t.Y8G("ngForOf",e.busTypeOptions),t.R7$(4),t.Y8G("ngModel",e.editingTiming.operatingDays),t.R7$(1),t.Y8G("ngForOf",e.operatingDaysOptions),t.R7$(4),t.Y8G("ngModel",e.editingTiming.fare),t.R7$(4),t.Y8G("ngModel",e.editingTiming.locationArea),t.R7$(2),t.Y8G("ngModel",e.editingTiming.isActive),t.R7$(11),t.Y8G("ngModel",e.editingTiming.routeFrom),t.R7$(4),t.Y8G("ngModel",e.editingTiming.departureTime),t.R7$(1),t.Y8G("ngForOf",e.editingStops),t.R7$(7),t.Y8G("ngModel",e.editingTiming.routeTo),t.R7$(4),t.Y8G("ngModel",e.editingTiming.arrivalTime),t.R7$(6),t.Y8G("disabled",0===e.editingStops.length)}}let ps=(()=>{class n{constructor(e,o){this.busTimingService=e,this.snackBar=o,this.timings=[],this.filteredTimings=[],this.isLoading=!1,this.searchTerm="",this.filterLocation="",this.locationOptions=[],this.newTiming=this.getEmptyTiming(),this.newStops=[],this.editingTiming=null,this.editingStops=[],this.isAddingTiming=!1,this.displayedColumns=["busNumber","route","stops","busType","operatingDays","fare","locationArea","status","actions"],this.busTypeOptions=[{value:"GOVERNMENT",label:"Government"},{value:"PRIVATE",label:"Private"}],this.operatingDaysOptions=[{value:"DAILY",label:"Daily"},{value:"WEEKDAYS",label:"Weekdays (Mon-Fri)"},{value:"WEEKENDS",label:"Weekends (Sat-Sun)"},{value:"MON,WED,FRI",label:"Mon, Wed, Fri"},{value:"TUE,THU,SAT",label:"Tue, Thu, Sat"}]}ngOnInit(){this.loadTimings()}getEmptyTiming(){return{busNumber:"",busName:"",routeFrom:"",routeTo:"",viaStops:"",departureTime:"",arrivalTime:"",busType:"GOVERNMENT",operatingDays:"DAILY",fare:0,locationArea:"",isActive:!0}}addStop(e){e.push({name:"",time:""})}removeStop(e,o){e.splice(o,1)}autoCalculateTimes(e,o,i){if(!o||!i||0===e.length)return void this.snackBar.open("Enter departure time, arrival time, and at least one stop","Close",{duration:3e3});const r=this.timeToMinutes(o),c=this.timeToMinutes(i);if(null===r||null===c)return void this.snackBar.open("Invalid time format. Use HH:MM AM/PM (e.g., 06:30 AM)","Close",{duration:3e3});const T=(c>r?c-r:c+1440-r)/(e.length+1);for(let P=0;P<e.length;P++){const w=r+Math.round(T*(P+1));e[P].time=this.minutesToTime(w%1440)}}timeToMinutes(e){if(!e)return null;const o=e.trim().toUpperCase(),i=o.match(/^(\d{1,2}):(\d{2})\s*(AM|PM)$/);if(i){let d=parseInt(i[1],10);const T=parseInt(i[2],10),P=i[3];return"PM"===P&&12!==d&&(d+=12),"AM"===P&&12===d&&(d=0),60*d+T}const r=o.match(/^(\d{1,2}):(\d{2})(AM|PM)$/);if(r){let d=parseInt(r[1],10);const T=parseInt(r[2],10),P=r[3];return"PM"===P&&12!==d&&(d+=12),"AM"===P&&12===d&&(d=0),60*d+T}const c=o.match(/^(\d{1,2}):(\d{2})$/);return c?60*parseInt(c[1],10)+parseInt(c[2],10):null}minutesToTime(e){let o=Math.floor(e/60)%24;const r=o>=12?"PM":"AM";return 0===o?o=12:o>12&&(o-=12),`${o}:${(e%60).toString().padStart(2,"0")} ${r}`}stopsToJson(e){const o=e.filter(i=>i.name.trim());return 0===o.length?"":JSON.stringify(o)}jsonToStops(e){if(!e)return[];try{const o=JSON.parse(e);if(Array.isArray(o))return o.map(i=>({name:i.name||"",time:i.time||""}))}catch{if(e.includes(",")||e.trim().length>0)return e.split(",").map(o=>({name:o.trim(),time:""}))}return[]}getStopsDisplay(e){return this.jsonToStops(e)}getStopsCount(e){return this.getStopsDisplay(e).length}loadTimings(){this.isLoading=!0,this.busTimingService.getAllBusTimings().subscribe({next:e=>{e.success?(this.timings=e.data||[],this.extractLocationOptions(),this.applyFilters()):this.snackBar.open("Failed to load bus timings","Close",{duration:3e3}),this.isLoading=!1},error:e=>{console.error("Error loading bus timings:",e),this.snackBar.open("Error loading bus timings","Close",{duration:3e3}),this.isLoading=!1}})}extractLocationOptions(){const e=new Set(this.timings.map(o=>o.locationArea).filter(o=>o));this.locationOptions=Array.from(e).sort()}applyFilters(){let e=[...this.timings];if(this.filterLocation&&(e=e.filter(o=>o.locationArea===this.filterLocation)),this.searchTerm){const o=this.searchTerm.toLowerCase();e=e.filter(i=>i.busNumber?.toLowerCase().includes(o)||i.busName?.toLowerCase().includes(o)||i.routeFrom?.toLowerCase().includes(o)||i.routeTo?.toLowerCase().includes(o)||i.viaStops?.toLowerCase().includes(o))}this.filteredTimings=e}onSearchChange(){this.applyFilters()}onLocationFilterChange(){this.applyFilters()}clearFilters(){this.searchTerm="",this.filterLocation="",this.applyFilters()}startAdding(){this.isAddingTiming=!0,this.newTiming=this.getEmptyTiming(),this.newStops=[]}cancelAdding(){this.isAddingTiming=!1,this.newTiming=this.getEmptyTiming(),this.newStops=[]}addTiming(){this.validateTiming(this.newTiming)&&(this.newTiming.viaStops=this.stopsToJson(this.newStops),this.busTimingService.createBusTiming(this.newTiming).subscribe({next:e=>{e.success?(this.snackBar.open("Bus timing created successfully","Close",{duration:3e3}),this.loadTimings(),this.cancelAdding()):this.snackBar.open(e.message||"Failed to create bus timing","Close",{duration:3e3})},error:e=>{console.error("Error creating bus timing:",e),this.snackBar.open("Error creating bus timing","Close",{duration:3e3})}}))}startEditing(e){this.editingTiming={...e},this.editingStops=this.jsonToStops(e.viaStops)}cancelEditing(){this.editingTiming=null,this.editingStops=[]}updateTiming(e){!e.id||!this.validateTiming(e)||(e.viaStops=this.stopsToJson(this.editingStops),this.busTimingService.updateBusTiming(e.id,e).subscribe({next:o=>{o.success?(this.snackBar.open("Bus timing updated successfully","Close",{duration:3e3}),this.loadTimings(),this.editingTiming=null,this.editingStops=[]):this.snackBar.open(o.message||"Failed to update bus timing","Close",{duration:3e3})},error:o=>{console.error("Error updating bus timing:",o),this.snackBar.open("Error updating bus timing","Close",{duration:3e3})}}))}deleteTiming(e){confirm("Are you sure you want to delete this bus timing?")&&this.busTimingService.deleteBusTiming(e).subscribe({next:o=>{o.success?(this.snackBar.open("Bus timing deleted successfully","Close",{duration:3e3}),this.loadTimings()):this.snackBar.open(o.message||"Failed to delete bus timing","Close",{duration:3e3})},error:o=>{console.error("Error deleting bus timing:",o),this.snackBar.open("Error deleting bus timing","Close",{duration:3e3})}})}validateTiming(e){return e.busNumber?.trim()?e.routeFrom?.trim()?e.routeTo?.trim()?e.departureTime?.trim()?!!e.locationArea?.trim()||(this.snackBar.open("Location area is required","Close",{duration:3e3}),!1):(this.snackBar.open("Departure time is required","Close",{duration:3e3}),!1):(this.snackBar.open("Route To is required","Close",{duration:3e3}),!1):(this.snackBar.open("Route From is required","Close",{duration:3e3}),!1):(this.snackBar.open("Bus number is required","Close",{duration:3e3}),!1)}getBusTypeLabel(e){return"GOVERNMENT"===e?"Govt":"Private"}getOperatingDaysLabel(e){return{DAILY:"Daily",WEEKDAYS:"Mon-Fri",WEEKENDS:"Sat-Sun"}[e]||e}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(Mr),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-bus-timing-management"]],decls:27,vars:9,consts:[[1,"bus-timing-management"],[1,"page-header"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"filters-section"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search bus number, name, route...",3,"ngModel","ngModelChange","input"],["matSuffix",""],["appearance","outline",1,"filter-field"],[3,"ngModel","ngModelChange","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["mat-button","",3,"click",4,"ngIf"],["class","add-form",4,"ngIf"],["class","loading",4,"ngIf"],["class","timings-table",4,"ngIf"],["class","edit-form",4,"ngIf"],[3,"value"],["mat-button","",3,"click"],[1,"add-form"],[1,"form-grid"],["appearance","outline"],["matInput","","placeholder","e.g., TN-14",3,"ngModel","ngModelChange"],["matInput","","placeholder","e.g., Thirupattur - Alangayam",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["matInput","","type","number","min","0",3,"ngModel","ngModelChange"],["matInput","","placeholder","e.g., Thirupattur",3,"ngModel","ngModelChange"],[1,"route-section"],[1,"route-point","start-point"],[1,"point-indicator","start"],[1,"point-fields"],["appearance","outline",1,"stop-name-field"],["matInput","","placeholder","e.g., Tirupattur",3,"ngModel","ngModelChange"],["appearance","outline",1,"stop-time-field"],["matInput","","placeholder","e.g., 1:30 PM",3,"ngModel","ngModelChange"],["class","route-point stop-point",4,"ngFor","ngForOf"],[1,"route-point","end-point"],[1,"point-indicator","end"],["matInput","","placeholder","e.g., Alangayam",3,"ngModel","ngModelChange"],["matInput","","placeholder","e.g., 2:30 PM",3,"ngModel","ngModelChange"],[1,"stop-actions"],["mat-stroked-button","","color","primary",3,"click"],["mat-stroked-button","","color","accent",3,"disabled","click"],[1,"form-actions"],["mat-raised-button","","color","primary",3,"click"],[1,"route-point","stop-point"],[1,"point-indicator","stop"],["matInput","","placeholder","Stop name",3,"ngModel","ngModelChange"],["matInput","","placeholder","e.g., 1:45 PM",3,"ngModel","ngModelChange"],["mat-icon-button","","color","warn","matTooltip","Remove stop",3,"click"],[1,"loading"],["diameter","40"],[1,"timings-table"],[1,"table-info"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","busNumber"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","route"],["matColumnDef","stops"],["matColumnDef","busType"],["matColumnDef","operatingDays"],["matColumnDef","fare"],["matColumnDef","locationArea"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"bus-number"],["class","bus-name-sub",4,"ngIf"],[1,"bus-name-sub"],[1,"route-display"],[1,"dep-badge"],[1,"arrow-icon"],["class","arr-badge",4,"ngIf"],[1,"arr-badge"],["class","stops-mini",4,"ngIf"],["class","no-stops",4,"ngIf"],[1,"stops-mini"],["class","stop-mini-item",4,"ngFor","ngForOf"],[1,"stop-mini-item"],[1,"stop-dot"],[1,"stop-name-mini"],["class","stop-time-mini",4,"ngIf"],[1,"stop-time-mini"],[1,"no-stops"],[1,"fare-amount"],[1,"action-buttons"],["mat-icon-button","","color","primary","matTooltip","Edit",3,"click"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-state"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"edit-form"],["matInput","",3,"ngModel","ngModelChange"],[1,"active-toggle"],["mat-icon-button","","color","warn",3,"click"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3,"Bus Timing Master"),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return i.startAdding()}),t.j41(5,"mat-icon"),t.EFF(6,"add"),t.k0s(),t.EFF(7," Add Bus Timing "),t.k0s()(),t.j41(8,"div",3)(9,"mat-form-field",4)(10,"mat-label"),t.EFF(11,"Search"),t.k0s(),t.j41(12,"input",5),t.bIt("ngModelChange",function(c){return i.searchTerm=c})("input",function(){return i.onSearchChange()}),t.k0s(),t.j41(13,"mat-icon",6),t.EFF(14,"search"),t.k0s()(),t.j41(15,"mat-form-field",7)(16,"mat-label"),t.EFF(17,"Filter by Location"),t.k0s(),t.j41(18,"mat-select",8),t.bIt("ngModelChange",function(c){return i.filterLocation=c})("selectionChange",function(){return i.onLocationFilterChange()}),t.j41(19,"mat-option",9),t.EFF(20,"All Locations"),t.k0s(),t.DNE(21,vr,2,2,"mat-option",10),t.k0s()(),t.DNE(22,xr,4,0,"button",11),t.k0s(),t.DNE(23,Er,73,14,"div",12),t.DNE(24,Rr,4,0,"div",13),t.DNE(25,is,35,6,"div",14),t.DNE(26,ls,76,16,"div",15),t.k0s()),2&o&&(t.R7$(4),t.Y8G("disabled",i.isAddingTiming),t.R7$(8),t.Y8G("ngModel",i.searchTerm),t.R7$(6),t.Y8G("ngModel",i.filterLocation),t.R7$(3),t.Y8G("ngForOf",i.locationOptions),t.R7$(1),t.Y8G("ngIf",i.searchTerm||i.filterLocation),t.R7$(1),t.Y8G("ngIf",i.isAddingTiming),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading),t.R7$(1),t.Y8G("ngIf",i.editingTiming))},dependencies:[p.Sq,p.bT,l.me,l.Q0,l.BC,l.VZ,l.vS,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,g.iY,C.An,k.fg,m.rl,m.nJ,m.yw,I.VO,N.wT,L.Jl,R.oV,h.LG,S.sG,z.q],styles:['.bus-timing-management[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.bus-timing-management[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #e0e0e0}.bus-timing-management[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:600;color:#333}.bus-timing-management[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.bus-timing-management[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;margin-bottom:24px;flex-wrap:wrap}.bus-timing-management[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{flex:1;min-width:250px}.bus-timing-management[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-field[_ngcontent-%COMP%]{min-width:200px}.bus-timing-management[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%], .bus-timing-management[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]{background:white;padding:24px;border-radius:8px;box-shadow:0 2px 8px #0000001a;margin-bottom:24px}.bus-timing-management[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .bus-timing-management[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#333}.bus-timing-management[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%], .bus-timing-management[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-bottom:20px}.bus-timing-management[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], .bus-timing-management[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.bus-timing-management[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .active-toggle[_ngcontent-%COMP%], .bus-timing-management[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .active-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:12px}.bus-timing-management[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%], .bus-timing-management[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;padding-top:16px}.bus-timing-management[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .bus-timing-management[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.bus-timing-management[_ngcontent-%COMP%]   .route-section[_ngcontent-%COMP%]{margin-top:16px;padding:20px;background:#fafafa;border-radius:8px;border:1px solid #e8e8e8;margin-bottom:16px}.bus-timing-management[_ngcontent-%COMP%]   .route-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;color:#333}.bus-timing-management[_ngcontent-%COMP%]   .route-section[_ngcontent-%COMP%]   .route-point[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;position:relative;padding-left:8px}.bus-timing-management[_ngcontent-%COMP%]   .route-section[_ngcontent-%COMP%]   .route-point[_ngcontent-%COMP%]:not(:last-child):after{content:"";position:absolute;left:18px;top:28px;bottom:-8px;width:2px;background:#ccc}.bus-timing-management[_ngcontent-%COMP%]   .route-section[_ngcontent-%COMP%]   .route-point[_ngcontent-%COMP%]   .point-indicator[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;margin-top:16px;flex-shrink:0}.bus-timing-management[_ngcontent-%COMP%]   .route-section[_ngcontent-%COMP%]   .route-point[_ngcontent-%COMP%]   .point-indicator.start[_ngcontent-%COMP%]{background:#4caf50;box-shadow:0 0 0 3px #4caf5033}.bus-timing-management[_ngcontent-%COMP%]   .route-section[_ngcontent-%COMP%]   .route-point[_ngcontent-%COMP%]   .point-indicator.stop[_ngcontent-%COMP%]{background:#ff9800;width:14px;height:14px;margin-left:3px;margin-top:19px;box-shadow:0 0 0 3px #ff980033}.bus-timing-management[_ngcontent-%COMP%]   .route-section[_ngcontent-%COMP%]   .route-point[_ngcontent-%COMP%]   .point-indicator.end[_ngcontent-%COMP%]{background:#f44336;box-shadow:0 0 0 3px #f4433633}.bus-timing-management[_ngcontent-%COMP%]   .route-section[_ngcontent-%COMP%]   .route-point[_ngcontent-%COMP%]   .point-fields[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;flex:1}.bus-timing-management[_ngcontent-%COMP%]   .route-section[_ngcontent-%COMP%]   .route-point[_ngcontent-%COMP%]   .point-fields[_ngcontent-%COMP%]   .stop-name-field[_ngcontent-%COMP%]{flex:2}.bus-timing-management[_ngcontent-%COMP%]   .route-section[_ngcontent-%COMP%]   .route-point[_ngcontent-%COMP%]   .point-fields[_ngcontent-%COMP%]   .stop-time-field[_ngcontent-%COMP%]{flex:1;max-width:180px}.bus-timing-management[_ngcontent-%COMP%]   .route-section[_ngcontent-%COMP%]   .stop-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:16px;padding-left:40px}.bus-timing-management[_ngcontent-%COMP%]   .route-section[_ngcontent-%COMP%]   .stop-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.bus-timing-management[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px}.bus-timing-management[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]{background:white;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000001a}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   .table-info[_ngcontent-%COMP%]{padding:12px 16px;background:#f5f5f5;font-size:13px;color:#666;border-bottom:1px solid #e0e0e0}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:600;color:#333;font-size:13px}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;vertical-align:top}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .bus-number[_ngcontent-%COMP%]{font-weight:600;color:#1565c0}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .bus-name-sub[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:2px}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .route-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;flex-wrap:wrap}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .route-display[_ngcontent-%COMP%]   .dep-badge[_ngcontent-%COMP%], .bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .route-display[_ngcontent-%COMP%]   .arr-badge[_ngcontent-%COMP%]{font-size:11px;font-weight:600;padding:2px 6px;border-radius:4px}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .route-display[_ngcontent-%COMP%]   .dep-badge[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .route-display[_ngcontent-%COMP%]   .arr-badge[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .route-display[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;color:#999}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .stops-mini[_ngcontent-%COMP%]   .stop-mini-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:2px 0}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .stops-mini[_ngcontent-%COMP%]   .stop-mini-item[_ngcontent-%COMP%]   .stop-dot[_ngcontent-%COMP%]{width:6px;height:6px;background:#ff9800;border-radius:50%;flex-shrink:0}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .stops-mini[_ngcontent-%COMP%]   .stop-mini-item[_ngcontent-%COMP%]   .stop-name-mini[_ngcontent-%COMP%]{font-size:12px;color:#555}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .stops-mini[_ngcontent-%COMP%]   .stop-mini-item[_ngcontent-%COMP%]   .stop-time-mini[_ngcontent-%COMP%]{font-size:11px;color:#888;margin-left:auto;font-weight:500}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .no-stops[_ngcontent-%COMP%]{font-size:12px;color:#999;font-style:italic}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .fare-amount[_ngcontent-%COMP%]{font-weight:600;color:#e65100}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .bus-type-government[_ngcontent-%COMP%]{background-color:#e3f2fd!important;color:#1565c0!important}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .bus-type-private[_ngcontent-%COMP%]{background-color:#fff3e0!important;color:#e65100!important}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-active[_ngcontent-%COMP%]{color:#2e7d32;font-weight:500}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-inactive[_ngcontent-%COMP%]{color:#d32f2f;font-weight:500}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;text-align:center}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#ccc;margin-bottom:16px}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#666}.bus-timing-management[_ngcontent-%COMP%]   .timings-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;color:#999}@media (max-width: 768px){.bus-timing-management[_ngcontent-%COMP%]{padding:16px}.bus-timing-management[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:stretch}.bus-timing-management[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.bus-timing-management[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]{flex-direction:column}.bus-timing-management[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%], .bus-timing-management[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-field[_ngcontent-%COMP%]{width:100%;min-width:unset}.bus-timing-management[_ngcontent-%COMP%]   .add-form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%], .bus-timing-management[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.bus-timing-management[_ngcontent-%COMP%]   .route-section[_ngcontent-%COMP%]   .route-point[_ngcontent-%COMP%]   .point-fields[_ngcontent-%COMP%]{flex-direction:column}.bus-timing-management[_ngcontent-%COMP%]   .route-section[_ngcontent-%COMP%]   .route-point[_ngcontent-%COMP%]   .point-fields[_ngcontent-%COMP%]   .stop-time-field[_ngcontent-%COMP%]{max-width:100%}.bus-timing-management[_ngcontent-%COMP%]   .route-section[_ngcontent-%COMP%]   .stop-actions[_ngcontent-%COMP%]{padding-left:0;flex-direction:column}}']})}}return n})();function ms(n,a){1&n&&(t.j41(0,"div",7),t.nrm(1,"mat-spinner",8),t.j41(2,"p"),t.EFF(3,"Loading reported posts..."),t.k0s()())}function ds(n,a){1&n&&(t.j41(0,"div",9)(1,"mat-icon",10),t.EFF(2,"verified"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No reported posts"),t.k0s(),t.j41(5,"p"),t.EFF(6,"All clear! No posts have been reported by users."),t.k0s()())}function gs(n,a){1&n&&(t.j41(0,"th",28),t.EFF(1,"Image"),t.k0s())}function _s(n,a){if(1&n&&t.nrm(0,"img",33),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.Y8G("src",o.getImageUrl(e.imageUrl),t.B4B)}}function us(n,a){1&n&&(t.j41(0,"mat-icon",34),t.EFF(1,"image"),t.k0s())}function fs(n,a){if(1&n&&(t.j41(0,"td",29)(1,"div",30),t.DNE(2,_s,1,1,"img",31),t.DNE(3,us,2,0,"mat-icon",32),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.imageUrl),t.R7$(1),t.Y8G("ngIf",!e.imageUrl)}}function Cs(n,a){1&n&&(t.j41(0,"th",28),t.EFF(1,"Title"),t.k0s())}function hs(n,a){if(1&n&&(t.j41(0,"div",37),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function Ps(n,a){if(1&n&&(t.j41(0,"td",29)(1,"div",35),t.EFF(2),t.k0s(),t.DNE(3,hs,2,1,"div",36),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(1),t.Y8G("ngIf",e.description)}}function bs(n,a){1&n&&(t.j41(0,"th",28),t.EFF(1,"Reports"),t.k0s())}function Ms(n,a){if(1&n&&(t.j41(0,"td",29)(1,"span",38)(2,"mat-icon",39),t.EFF(3,"flag"),t.k0s(),t.EFF(4),t.k0s()()),2&n){const e=a.$implicit;t.R7$(1),t.AVh("high",e.reportCount>=3),t.R7$(3),t.SpI(" ",e.reportCount," ")}}function vs(n,a){1&n&&(t.j41(0,"th",28),t.EFF(1,"Price"),t.k0s())}function xs(n,a){if(1&n&&(t.j41(0,"td",29)(1,"span",40),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatPrice(e.price))}}function Fs(n,a){1&n&&(t.j41(0,"th",28),t.EFF(1,"Seller"),t.k0s())}function Os(n,a){if(1&n&&(t.j41(0,"td",29)(1,"div",41)(2,"span",42),t.EFF(3),t.k0s(),t.j41(4,"span",43),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.sellerPhone)}}function ks(n,a){1&n&&(t.j41(0,"th",28),t.EFF(1,"Category"),t.k0s())}function Es(n,a){if(1&n&&(t.j41(0,"span",45),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.category)}}function Rs(n,a){if(1&n&&(t.j41(0,"td",29),t.DNE(1,Es,2,1,"span",44),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.category)}}function Ts(n,a){1&n&&(t.j41(0,"th",28),t.EFF(1,"Status"),t.k0s())}function ys(n,a){if(1&n&&(t.j41(0,"td",29)(1,"span",46),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.SpI(" ",o.getStatusLabel(e.status)," ")}}function js(n,a){1&n&&(t.j41(0,"th",28),t.EFF(1,"Date"),t.k0s())}function Ds(n,a){if(1&n&&(t.j41(0,"td",29)(1,"span",47),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function $s(n,a){1&n&&(t.j41(0,"th",28),t.EFF(1,"Action"),t.k0s())}function Is(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",51),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,d=t.XpG(2);return t.Njj(d.onStatusChange(c,r.value))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.xc7("color",e.color),t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function Ns(n,a){if(1&n&&(t.j41(0,"td",29)(1,"button",48),t.EFF(2," Change Status "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",null,49),t.DNE(7,Is,5,4,"button",50),t.k0s()()),2&n){const e=a.$implicit,o=t.sdS(6),i=t.XpG(2);t.R7$(1),t.Y8G("matMenuTriggerFor",o),t.R7$(6),t.Y8G("ngForOf",i.getAvailableStatuses(e))}}function Gs(n,a){1&n&&t.nrm(0,"tr",52)}function ws(n,a){1&n&&t.nrm(0,"tr",53)}function Ss(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",54)(1,"button",55),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage-1))}),t.j41(2,"mat-icon"),t.EFF(3,"chevron_left"),t.k0s(),t.EFF(4," Previous "),t.k0s(),t.j41(5,"span",56),t.EFF(6),t.k0s(),t.j41(7,"button",55),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage+1))}),t.EFF(8," Next "),t.j41(9,"mat-icon"),t.EFF(10,"chevron_right"),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("disabled",0===e.currentPage),t.R7$(5),t.E5c("Page ",e.currentPage+1," of ",e.totalPages," (",e.totalItems," posts)"),t.R7$(1),t.Y8G("disabled",e.currentPage>=e.totalPages-1)}}const gt=function(){return["image","title","reports","price","seller","category","status","date","actions"]};function As(n,a){if(1&n&&(t.j41(0,"div",11)(1,"div",12)(2,"mat-icon"),t.EFF(3,"flag"),t.k0s(),t.j41(4,"span"),t.EFF(5),t.k0s()(),t.j41(6,"table",13),t.qex(7,14),t.DNE(8,gs,2,0,"th",15),t.DNE(9,fs,4,2,"td",16),t.bVm(),t.qex(10,17),t.DNE(11,Cs,2,0,"th",15),t.DNE(12,Ps,4,2,"td",16),t.bVm(),t.qex(13,18),t.DNE(14,bs,2,0,"th",15),t.DNE(15,Ms,5,3,"td",16),t.bVm(),t.qex(16,19),t.DNE(17,vs,2,0,"th",15),t.DNE(18,xs,3,1,"td",16),t.bVm(),t.qex(19,20),t.DNE(20,Fs,2,0,"th",15),t.DNE(21,Os,6,2,"td",16),t.bVm(),t.qex(22,21),t.DNE(23,ks,2,0,"th",15),t.DNE(24,Rs,2,1,"td",16),t.bVm(),t.qex(25,22),t.DNE(26,Ts,2,0,"th",15),t.DNE(27,ys,3,2,"td",16),t.bVm(),t.qex(28,23),t.DNE(29,js,2,0,"th",15),t.DNE(30,Ds,3,1,"td",16),t.bVm(),t.qex(31,24),t.DNE(32,$s,2,0,"th",15),t.DNE(33,Ns,8,2,"td",16),t.bVm(),t.DNE(34,Gs,1,0,"tr",25),t.DNE(35,ws,1,0,"tr",26),t.k0s(),t.DNE(36,Ss,11,5,"div",27),t.k0s()),2&n){const e=t.XpG();t.R7$(5),t.Lme("",e.totalItems," reported post",e.totalItems>1?"s":"",""),t.R7$(1),t.Y8G("dataSource",e.posts),t.R7$(28),t.Y8G("matHeaderRowDef",t.lJ4(6,gt)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(7,gt)),t.R7$(1),t.Y8G("ngIf",e.totalPages>1)}}let Vs=(()=>{class n{constructor(e,o){this.marketplaceService=e,this.snackBar=o,this.posts=[],this.loading=!0,this.currentPage=0,this.totalPages=0,this.totalItems=0,this.pageSize=20,this.statusOptions=[{value:"APPROVED",label:"Approve",icon:"check_circle",color:"#4caf50"},{value:"REJECTED",label:"Reject",icon:"cancel",color:"#f44336"},{value:"HOLD",label:"Hold",icon:"pause_circle",color:"#ff9800"},{value:"HIDDEN",label:"Hide",icon:"visibility_off",color:"#9e9e9e"},{value:"CORRECTION_REQUIRED",label:"Correction Required",icon:"edit_note",color:"#2196f3"},{value:"REMOVED",label:"Remove",icon:"delete_forever",color:"#b71c1c"}]}ngOnInit(){this.loadReportedPosts()}loadReportedPosts(){this.loading=!0,this.marketplaceService.getReportedPosts(this.currentPage,this.pageSize).subscribe({next:e=>{const o=e.data;this.posts=o?.content||[],this.totalPages=o?.totalPages||0,this.totalItems=o?.totalItems||0,this.loading=!1},error:e=>{console.error("Error loading reported posts:",e),this.loading=!1,this.snackBar.open("Failed to load reported posts","Close",{duration:3e3})}})}onStatusChange(e,o){if("REMOVED"===o){if(!confirm(`Remove "${e.title}" permanently? This will delete the post.`))return;return void this.marketplaceService.deletePost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" removed`,"OK",{duration:3e3}),this.loadReportedPosts()},error:()=>{this.snackBar.open("Failed to remove post","Close",{duration:3e3})}})}const r=this.statusOptions.find(c=>c.value===o)?.label||o;this.marketplaceService.changePostStatus(e.id,o).subscribe({next:()=>{this.snackBar.open(`"${e.title}" \u2192 ${r}`,"OK",{duration:3e3}),this.loadReportedPosts()},error:()=>{this.snackBar.open(`Failed to change status to ${r}`,"Close",{duration:3e3})}})}getImageUrl(e){return(0,E.V)(e)}getStatusLabel(e){switch(e){case"FLAGGED":return"Flagged";case"PENDING_APPROVAL":return"Pending";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";case"SOLD":return"Sold";case"HOLD":return"On Hold";case"HIDDEN":return"Hidden";case"CORRECTION_REQUIRED":return"Correction Required";case"REMOVED":return"Removed";default:return e}}getAvailableStatuses(e){return this.statusOptions.filter(o=>o.value!==e.status)}formatPrice(e){return null==e?"Negotiable":"\u20b9"+e.toLocaleString("en-IN")}formatDate(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}onPageChange(e){this.currentPage=e,this.loadReportedPosts()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(tt),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-reported-posts"]],decls:11,vars:3,consts:[[1,"reported-posts"],[1,"header"],[1,"header-icon"],[1,"subtitle"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","posts-container",4,"ngIf"],[1,"loading-container"],["diameter","40"],[1,"empty-state"],[1,"empty-icon"],[1,"posts-container"],[1,"total-info"],["mat-table","",1,"posts-table",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","reports"],["matColumnDef","price"],["matColumnDef","seller"],["matColumnDef","category"],["matColumnDef","status"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","pagination",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"post-image"],["alt","Product","loading","lazy",3,"src",4,"ngIf"],["class","no-image",4,"ngIf"],["alt","Product","loading","lazy",3,"src"],[1,"no-image"],[1,"post-title"],["class","post-description",4,"ngIf"],[1,"post-description"],[1,"report-count"],[1,"report-icon"],[1,"price"],[1,"seller-info"],[1,"seller-name"],[1,"seller-phone"],["class","category-chip",4,"ngIf"],[1,"category-chip"],[1,"status-badge",3,"ngClass"],[1,"date"],["mat-stroked-button","",1,"action-dropdown",3,"matMenuTriggerFor"],["statusMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"pagination"],["mat-button","",3,"disabled","click"],[1,"page-info"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2")(3,"mat-icon",2),t.EFF(4,"report"),t.k0s(),t.EFF(5," Reported Posts "),t.k0s(),t.j41(6,"p",3),t.EFF(7,"Posts reported by users - review and take action"),t.k0s()(),t.DNE(8,ms,4,0,"div",4),t.DNE(9,ds,7,0,"div",5),t.DNE(10,As,37,8,"div",6),t.k0s()),2&o&&(t.R7$(8),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.posts.length),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.posts.length>0))},dependencies:[p.YU,p.Sq,p.bT,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,C.An,h.LG,f.kk,f.fb,f.Cp],styles:[".reported-posts[_ngcontent-%COMP%]{padding:24px}.reported-posts[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:24px}.reported-posts[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;display:flex;align-items:center;gap:8px}.reported-posts[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{color:#e65100}.reported-posts[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.reported-posts[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:48px}.reported-posts[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.reported-posts[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:64px 24px}.reported-posts[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#4caf50}.reported-posts[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.reported-posts[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.reported-posts[_ngcontent-%COMP%]   .posts-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #00000014}.reported-posts[_ngcontent-%COMP%]   .total-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px 24px;background:#fff3e0;color:#e65100;font-weight:500;font-size:14px;border-bottom:1px solid #ffe0b2}.reported-posts[_ngcontent-%COMP%]   .total-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]{width:100%}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;background:#f5f5f5;display:flex;align-items:center;justify-content:center}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{color:#ccc;font-size:28px}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#333}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-description[_ngcontent-%COMP%]{font-size:12px;color:#888;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;background:#fff3e0;color:#e65100;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count[_ngcontent-%COMP%]   .report-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count.high[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:600;color:#4caf50;font-size:14px}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-name[_ngcontent-%COMP%]{font-weight:500;font-size:13px}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-phone[_ngcontent-%COMP%]{font-size:12px;color:#666}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;padding:2px 10px;border-radius:12px;font-size:12px;font-weight:500}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;font-size:12px;font-weight:500;white-space:nowrap}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-flagged[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-pending_approval[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-approved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-sold[_ngcontent-%COMP%]{background:#f3e5f5;color:#6a1b9a}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hold[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hidden[_ngcontent-%COMP%]{background:#eceff1;color:#546e7a}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-correction_required[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-removed[_ngcontent-%COMP%]{background:#fce4ec;color:#b71c1c}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#888;white-space:nowrap}.reported-posts[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .action-dropdown[_ngcontent-%COMP%]{font-size:13px;white-space:nowrap}.reported-posts[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:16px;border-top:1px solid #eee}.reported-posts[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:13px;color:#666}"]})}}return n})();var _t=_(7897);function Ls(n,a){1&n&&(t.j41(0,"div",6),t.nrm(1,"mat-spinner",7),t.j41(2,"p"),t.EFF(3,"Loading settings..."),t.k0s()())}function Bs(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",24)(1,"div",25)(2,"mat-icon"),t.EFF(3),t.k0s(),t.j41(4,"span"),t.EFF(5),t.k0s()(),t.j41(6,"div",26)(7,"span",27),t.EFF(8,"\u20b9"),t.k0s(),t.j41(9,"input",28),t.bIt("ngModelChange",function(i){const c=t.eBV(e).$implicit,d=t.XpG(3);return t.Njj(d.postTypePrices[c.key]=i)}),t.k0s()()()}if(2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.xc7("color",e.color),t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label),t.R7$(4),t.Y8G("ngModel",o.postTypePrices[e.key])}}function Ys(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",19)(1,"div",20)(2,"span"),t.EFF(3,"Post Type"),t.k0s(),t.j41(4,"span"),t.EFF(5,"Price per Post"),t.k0s()(),t.DNE(6,Bs,10,5,"div",21),t.j41(7,"div",22)(8,"button",23),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.saveAllPrices())}),t.j41(9,"mat-icon"),t.EFF(10,"save"),t.k0s(),t.EFF(11),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(6),t.Y8G("ngForOf",e.postTypes),t.R7$(2),t.Y8G("disabled",e.savingPrices),t.R7$(3),t.SpI(" ",e.savingPrices?"Saving...":"Save All Prices"," ")}}function Us(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",29),t.bIt("click",function(){const r=t.eBV(e).index,c=t.XpG(2);return t.Njj(c.selectedTabIndex=r)}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span",30),t.EFF(4),t.k0s()()}if(2&n){const e=a.$implicit,o=a.index,i=t.XpG(2);t.xc7("--tab-color",e.color),t.AVh("active",i.selectedTabIndex===o),t.R7$(2),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function Xs(n,a){if(1&n&&(t.j41(0,"mat-option",46),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.SpI(" ",e.label," ")}}function zs(n,a){if(1&n){const e=t.RV6();t.j41(0,"mat-checkbox",47),t.bIt("change",function(){const r=t.eBV(e).$implicit,c=t.XpG(2).$implicit,d=t.XpG(2);return t.Njj(d.toggleStatus(c,r))}),t.EFF(1),t.k0s()}if(2&n){const e=a.$implicit,o=t.XpG(2).$implicit,i=t.XpG(2);t.Y8G("checked",i.isStatusChecked(o,e)),t.R7$(1),t.SpI(" ",i.statusLabels[e]," ")}}function Js(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",32)(1,"div",33)(2,"div",34)(3,"div",35),t.EFF(4,"Post Visibility Duration"),t.k0s(),t.j41(5,"div",36),t.EFF(6,"How long posts remain visible to users"),t.k0s()(),t.j41(7,"mat-form-field",37)(8,"mat-select",38),t.bIt("valueChange",function(i){t.eBV(e);const r=t.XpG().$implicit;return t.Njj(r.durationDays=i)}),t.DNE(9,Xs,2,2,"mat-option",39),t.k0s()()(),t.j41(10,"div",33)(11,"div",34)(12,"div",35),t.EFF(13,"Auto Approve Posts"),t.k0s(),t.j41(14,"div",36),t.EFF(15,"New posts will be approved automatically without admin review"),t.k0s()(),t.j41(16,"mat-slide-toggle",12),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG().$implicit;return t.Njj(r.autoApprove=i)}),t.k0s()(),t.j41(17,"div",33)(18,"div",34)(19,"div",35),t.EFF(20,"Report Threshold"),t.k0s(),t.j41(21,"div",36),t.EFF(22,"Number of reports needed to auto-flag a post"),t.k0s()(),t.j41(23,"mat-form-field",40)(24,"input",41),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG().$implicit;return t.Njj(r.reportThreshold=i)}),t.k0s()()(),t.j41(25,"div",42)(26,"div",35),t.EFF(27,"Visible Statuses"),t.k0s(),t.j41(28,"div",36),t.EFF(29,"Select which post statuses are visible to the public"),t.k0s(),t.j41(30,"div",43),t.DNE(31,zs,2,2,"mat-checkbox",44),t.k0s()(),t.j41(32,"div",45)(33,"button",23),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.savePostTypeSettings(i))}),t.j41(34,"mat-icon"),t.EFF(35,"save"),t.k0s(),t.EFF(36),t.k0s()()()}if(2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.xc7("border-top-color",e.color),t.R7$(8),t.Y8G("value",e.durationDays),t.R7$(1),t.Y8G("ngForOf",o.durationOptions),t.R7$(7),t.Y8G("ngModel",e.autoApprove),t.R7$(8),t.Y8G("ngModel",e.reportThreshold),t.R7$(7),t.Y8G("ngForOf",o.allStatuses),t.R7$(2),t.Y8G("disabled",o.savingType===e.key),t.R7$(3),t.SpI(" ",o.savingType===e.key?"Saving...":"Save "+e.label+" Settings"," ")}}function qs(n,a){if(1&n&&(t.qex(0),t.DNE(1,Js,37,9,"div",31),t.bVm()),2&n){const e=a.index,o=t.XpG(2);t.R7$(1),t.Y8G("ngIf",o.selectedTabIndex===e)}}function Hs(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"mat-icon"),t.EFF(4,"payments"),t.k0s(),t.j41(5,"h3"),t.EFF(6,"Paid Post Pricing"),t.k0s()(),t.j41(7,"div",11)(8,"mat-slide-toggle",12),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.paidPostEnabled=i)}),t.EFF(9," Enable Paid Posts "),t.k0s(),t.j41(10,"span",13),t.EFF(11),t.k0s(),t.j41(12,"button",14),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.savePaidPostConfig())}),t.EFF(13),t.k0s()(),t.DNE(14,Ys,12,3,"div",15),t.k0s(),t.j41(15,"div",9)(16,"div",10)(17,"mat-icon"),t.EFF(18,"tune"),t.k0s(),t.j41(19,"h3"),t.EFF(20,"Post Type Settings"),t.k0s()(),t.j41(21,"div",16),t.DNE(22,Us,5,6,"button",17),t.k0s(),t.DNE(23,qs,2,1,"ng-container",18),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(8),t.Y8G("ngModel",e.paidPostEnabled),t.R7$(3),t.JRh(e.paidPostEnabled?"Users pay to post beyond free limit":"Users blocked at free limit"),t.R7$(1),t.Y8G("disabled",e.paidPostSaving),t.R7$(1),t.SpI(" ",e.paidPostSaving?"Saving...":"Save"," "),t.R7$(1),t.Y8G("ngIf",e.paidPostEnabled),t.R7$(8),t.Y8G("ngForOf",e.postTypes),t.R7$(1),t.Y8G("ngForOf",e.postTypes)}}let Ks=(()=>{class n{constructor(e,o){this.settingsService=e,this.snackBar=o,this.loading=!1,this.savingType=null,this.selectedTabIndex=0,this.paidPostEnabled=!1,this.paidPostSaving=!1,this.savingPrices=!1,this.postTypePrices={},this.postTypes=[{key:"MARKETPLACE",prefix:"marketplace",label:"Marketplace",icon:"storefront",color:"#4527A0",durationDays:30,autoApprove:!1,visibleStatuses:["APPROVED"],reportThreshold:3},{key:"FARM_PRODUCTS",prefix:"farmer",label:"Farmer Products",icon:"agriculture",color:"#33691E",durationDays:30,autoApprove:!1,visibleStatuses:["APPROVED"],reportThreshold:3},{key:"LABOURS",prefix:"labour",label:"Labours",icon:"engineering",color:"#1565C0",durationDays:30,autoApprove:!1,visibleStatuses:["APPROVED"],reportThreshold:3},{key:"TRAVELS",prefix:"travel",label:"Travels",icon:"directions_car",color:"#00897B",durationDays:30,autoApprove:!1,visibleStatuses:["APPROVED"],reportThreshold:3},{key:"PARCEL_SERVICE",prefix:"parcel",label:"Packers & Movers",icon:"local_shipping",color:"#E65100",durationDays:30,autoApprove:!1,visibleStatuses:["APPROVED"],reportThreshold:3},{key:"REAL_ESTATE",prefix:"realestate",label:"Real Estate",icon:"apartment",color:"#AD1457",durationDays:30,autoApprove:!1,visibleStatuses:["APPROVED"],reportThreshold:3},{key:"RENTAL",prefix:"rental",label:"Rentals",icon:"vpn_key",color:"#FF6F00",durationDays:30,autoApprove:!1,visibleStatuses:["APPROVED"],reportThreshold:3}],this.durationOptions=[{label:"1 Month",value:30},{label:"2 Months",value:60},{label:"3 Months",value:90},{label:"6 Months",value:180},{label:"1 Year",value:365},{label:"No Expiry",value:0}],this.allStatuses=["APPROVED","PENDING_APPROVAL","SOLD","FLAGGED","HOLD","HIDDEN","CORRECTION_REQUIRED"],this.statusLabels={APPROVED:"Approved",PENDING_APPROVAL:"Pending Approval",SOLD:"Sold",FLAGGED:"Flagged",HOLD:"Hold",HIDDEN:"Hidden",CORRECTION_REQUIRED:"Correction Required"}}ngOnInit(){this.loadAllSettings()}loadAllSettings(){this.loading=!0,this.settingsService.getAllSettings().subscribe({next:e=>{for(const o of e){"paid_post.enabled"===o.key&&(this.paidPostEnabled="true"===o.value);const i="paid_post.price.";if(o.key.startsWith(i)){const r=o.key.substring(i.length);this.postTypePrices[r]=parseInt(o.value,10)||10}if("paid_post.price"===o.key){const r=parseInt(o.value,10)||10;for(const c of this.postTypes)void 0===this.postTypePrices[c.key]&&(this.postTypePrices[c.key]=r)}for(const r of this.postTypes){if(o.key===`${r.prefix}.post.duration_days`&&(r.durationDays=parseInt(o.value,10)||30),o.key===`${r.prefix}.post.auto_approve`&&(r.autoApprove="true"===o.value),o.key===`${r.prefix}.post.visible_statuses`)try{r.visibleStatuses=JSON.parse(o.value)}catch{r.visibleStatuses=["APPROVED"]}o.key===`${r.prefix}.post.report_threshold`&&(r.reportThreshold=parseInt(o.value,10)||3)}}for(const o of this.postTypes)void 0===this.postTypePrices[o.key]&&(this.postTypePrices[o.key]=10);this.loading=!1},error:()=>{this.snackBar.open("Failed to load settings","OK",{duration:3e3}),this.loading=!1}})}isStatusChecked(e,o){return e.visibleStatuses.includes(o)}toggleStatus(e,o){const i=e.visibleStatuses.indexOf(o);i>=0?e.visibleStatuses.length>1?e.visibleStatuses.splice(i,1):this.snackBar.open("At least one status must be selected","OK",{duration:3e3}):e.visibleStatuses.push(o)}savePostTypeSettings(e){this.savingType=e.key;const o={[`${e.prefix}.post.duration_days`]:String(e.durationDays),[`${e.prefix}.post.auto_approve`]:String(e.autoApprove),[`${e.prefix}.post.visible_statuses`]:JSON.stringify(e.visibleStatuses),[`${e.prefix}.post.report_threshold`]:String(e.reportThreshold)};this.settingsService.updateMultipleSettings(o).subscribe({next:()=>{this.savingType=null,this.snackBar.open(`${e.label} settings saved`,"OK",{duration:3e3})},error:()=>{this.savingType=null,this.snackBar.open(`Failed to save ${e.label} settings`,"OK",{duration:3e3})}})}savePaidPostConfig(){this.paidPostSaving=!0;const e={"paid_post.enabled":String(this.paidPostEnabled)};this.settingsService.updateMultipleSettings(e).subscribe({next:()=>{this.paidPostSaving=!1,this.snackBar.open("Paid post config saved","OK",{duration:3e3})},error:()=>{this.paidPostSaving=!1,this.snackBar.open("Failed to save config","OK",{duration:3e3})}})}saveAllPrices(){this.savingPrices=!0;const e={};for(const o of this.postTypes)e[`paid_post.price.${o.key}`]=String(this.postTypePrices[o.key]||10);this.settingsService.updateMultipleSettings(e).subscribe({next:()=>{this.savingPrices=!1,this.snackBar.open("Prices saved successfully","OK",{duration:3e3})},error:()=>{this.savingPrices=!1,this.snackBar.open("Failed to save prices","OK",{duration:3e3})}})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(_t.h),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-marketplace-config"]],decls:12,vars:2,consts:[[1,"post-config-container"],[1,"page-header"],[1,"subtitle"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","loading-container",4,"ngIf"],["class","config-content",4,"ngIf"],[1,"loading-container"],["diameter","40"],[1,"config-content"],[1,"config-section"],[1,"section-title"],[1,"paid-toggle-row"],["color","primary",3,"ngModel","ngModelChange"],[1,"toggle-hint"],["mat-flat-button","","color","primary",1,"save-toggle-btn",3,"disabled","click"],["class","pricing-table",4,"ngIf"],[1,"type-tabs"],["class","type-tab",3,"active","--tab-color","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"pricing-table"],[1,"pricing-header-row"],["class","pricing-row",4,"ngFor","ngForOf"],[1,"pricing-actions"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"pricing-row"],[1,"type-label"],[1,"price-input-wrap"],[1,"rupee"],["type","number","min","1","max","1000",3,"ngModel","ngModelChange"],[1,"type-tab",3,"click"],[1,"tab-label"],["class","settings-card",3,"border-top-color",4,"ngIf"],[1,"settings-card"],[1,"setting-row"],[1,"setting-info"],[1,"setting-label"],[1,"setting-desc"],["appearance","outline",1,"setting-control"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"setting-control","small"],["matInput","","type","number","min","1","max","50",3,"ngModel","ngModelChange"],[1,"setting-block"],[1,"status-chips"],["color","primary",3,"checked","change",4,"ngFor","ngForOf"],[1,"card-actions"],[3,"value"],["color","primary",3,"checked","change"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div")(3,"h2"),t.EFF(4,"Post Configuration"),t.k0s(),t.j41(5,"p",2),t.EFF(6,"Configure settings and pricing for all post types"),t.k0s()(),t.j41(7,"button",3),t.bIt("click",function(){return i.loadAllSettings()}),t.j41(8,"mat-icon"),t.EFF(9,"refresh"),t.k0s()()(),t.DNE(10,Ls,4,0,"div",4),t.DNE(11,Hs,24,7,"div",5),t.k0s()),2&o&&(t.R7$(10),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading))},dependencies:[p.Sq,p.bT,l.me,l.Q0,l.BC,l.VZ,l.zX,l.vS,g.$z,g.iY,C.An,k.fg,m.rl,I.VO,N.wT,U.So,R.oV,h.LG,S.sG],styles:[".post-config-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:24px 16px}.page-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:28px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#1a1a2e}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;font-size:14px;color:#888}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:60px 0;color:#666}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px}.config-section[_ngcontent-%COMP%]{background:white;border-radius:12px;padding:24px;margin-bottom:24px;box-shadow:0 1px 4px #00000014}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.section-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#555;font-size:22px}.section-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.paid-toggle-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:20px}.paid-toggle-row[_ngcontent-%COMP%]   .toggle-hint[_ngcontent-%COMP%]{font-size:13px;color:#888}.paid-toggle-row[_ngcontent-%COMP%]   .save-toggle-btn[_ngcontent-%COMP%]{margin-left:auto;min-width:80px}.pricing-table[_ngcontent-%COMP%]{border:1px solid #e8e8e8;border-radius:8px;overflow:hidden}.pricing-header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 16px;background:#f5f5f5;font-weight:600;font-size:13px;color:#555;text-transform:uppercase;letter-spacing:.5px}.pricing-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-top:1px solid #f0f0f0}.pricing-row[_ngcontent-%COMP%]   .type-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-weight:500;font-size:14px;color:#333}.pricing-row[_ngcontent-%COMP%]   .type-label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.pricing-row[_ngcontent-%COMP%]   .price-input-wrap[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;background:#f9f9f9;border:1px solid #ddd;border-radius:6px;padding:4px 10px}.pricing-row[_ngcontent-%COMP%]   .price-input-wrap[_ngcontent-%COMP%]   .rupee[_ngcontent-%COMP%]{font-size:14px;color:#888;font-weight:500}.pricing-row[_ngcontent-%COMP%]   .price-input-wrap[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px;border:none;background:transparent;font-size:15px;font-weight:600;text-align:right;outline:none;color:#333}.pricing-actions[_ngcontent-%COMP%]{padding:16px;display:flex;justify-content:flex-end;border-top:1px solid #f0f0f0}.pricing-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.type-tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:20px;overflow-x:auto;padding-bottom:4px}.type-tabs[_ngcontent-%COMP%]   .type-tab[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 14px;border:1px solid #e0e0e0;border-radius:8px;background:white;cursor:pointer;font-size:13px;font-weight:500;color:#666;white-space:nowrap;transition:all .2s}.type-tabs[_ngcontent-%COMP%]   .type-tab[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.type-tabs[_ngcontent-%COMP%]   .type-tab[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-color:#ccc}.type-tabs[_ngcontent-%COMP%]   .type-tab.active[_ngcontent-%COMP%]{background:var(--tab-color);color:#fff;border-color:var(--tab-color)}.type-tabs[_ngcontent-%COMP%]   .type-tab.active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.settings-card[_ngcontent-%COMP%]{border:1px solid #e8e8e8;border-top:3px solid;border-radius:8px;padding:20px}.setting-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:14px 0;border-bottom:1px solid #f5f5f5}.setting-block[_ngcontent-%COMP%]{padding:14px 0;border-bottom:1px solid #f5f5f5}.setting-info[_ngcontent-%COMP%]{flex:1}.setting-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333}.setting-desc[_ngcontent-%COMP%]{font-size:12px;color:#999;margin-top:2px}.setting-control[_ngcontent-%COMP%]{width:180px;flex-shrink:0}.setting-control.small[_ngcontent-%COMP%]{width:100px}.setting-control[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.status-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px 20px;margin-top:12px}.status-chips[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{font-size:13px}.card-actions[_ngcontent-%COMP%]{padding-top:20px;display:flex;justify-content:flex-end}.card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}@media (max-width: 768px){.type-tabs[_ngcontent-%COMP%]   .type-tab[_ngcontent-%COMP%]   .tab-label[_ngcontent-%COMP%]{display:none}.type-tabs[_ngcontent-%COMP%]   .type-tab[_ngcontent-%COMP%]{padding:8px 10px}}@media (max-width: 600px){.post-config-container[_ngcontent-%COMP%]{padding:16px 12px}.setting-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.setting-control[_ngcontent-%COMP%], .setting-control.small[_ngcontent-%COMP%]{width:100%}.paid-toggle-row[_ngcontent-%COMP%]{flex-wrap:wrap}.pricing-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}}"]})}}return n})(),ut=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/farmer-products`}getPendingPosts(e=0,o=20){return this.http.get(`${this.apiUrl}/pending`,{params:{page:e.toString(),size:o.toString()}})}getAllPosts(e=0,o=20,i=""){let r={page:e.toString(),size:o.toString()};return i&&(r.search=i),this.http.get(`${this.apiUrl}/admin/all`,{params:r})}getReportedPosts(e=0,o=20){return this.http.get(`${this.apiUrl}/admin/reported`,{params:{page:e.toString(),size:o.toString()}})}approvePost(e){return this.http.put(`${this.apiUrl}/${e}/approve`,{})}rejectPost(e){return this.http.put(`${this.apiUrl}/${e}/reject`,{})}deletePost(e){return this.http.delete(`${this.apiUrl}/${e}`)}changePostStatus(e,o){return this.http.put(`${this.apiUrl}/${e}/status`,{status:o})}toggleFeatured(e){return this.http.put(`${this.apiUrl}/${e}/featured`,{})}adminUpdatePost(e,o){return this.http.put(`${this.apiUrl}/${e}/admin-update`,o)}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Qs(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",15),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return i.searchText="",t.Njj(i.onSearchChange())}),t.j41(1,"mat-icon"),t.EFF(2,"clear"),t.k0s()()}}function Ws(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",10)(1,"mat-form-field",11)(2,"mat-label"),t.EFF(3,"Search by location"),t.k0s(),t.j41(4,"input",12),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.searchText=i)})("keyup.enter",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onSearchChange())}),t.k0s(),t.DNE(5,Qs,3,0,"button",13),t.j41(6,"mat-icon",14),t.EFF(7,"search"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngModel",e.searchText),t.R7$(1),t.Y8G("ngIf",e.searchText)}}function Zs(n,a){1&n&&(t.j41(0,"div",16),t.nrm(1,"mat-spinner",17),t.j41(2,"p"),t.EFF(3,"Loading farmer products..."),t.k0s()())}function tc(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"No farmer products are waiting for approval."),t.k0s())}function ec(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"No farmer product posts yet."),t.k0s())}function nc(n,a){if(1&n&&(t.j41(0,"div",18)(1,"mat-icon",19),t.EFF(2,"eco"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No farmer products found"),t.k0s(),t.DNE(5,tc,2,0,"p",20),t.DNE(6,ec,2,0,"p",20),t.k0s()),2&n){const e=t.XpG();t.R7$(5),t.Y8G("ngIf","pending"===e.activeTab),t.R7$(1),t.Y8G("ngIf","all"===e.activeTab)}}function oc(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Image"),t.k0s())}function ac(n,a){if(1&n&&t.nrm(0,"img",44),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.Y8G("src",o.getFirstImageUrl(e.imageUrls),t.B4B)}}function ic(n,a){1&n&&(t.j41(0,"mat-icon",45),t.EFF(1,"eco"),t.k0s())}function rc(n,a){if(1&n&&(t.j41(0,"span",46),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(1),t.SpI(" ",o.getImageCount(e.imageUrls)," ")}}function sc(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",39)(1,"div",40),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.openGallery(r))}),t.DNE(2,ac,1,1,"img",41),t.DNE(3,ic,2,0,"mat-icon",42),t.DNE(4,rc,2,1,"span",43),t.k0s()()}if(2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.AVh("clickable",o.getImageCount(e.imageUrls)>0),t.R7$(1),t.Y8G("ngIf",o.getFirstImageUrl(e.imageUrls)),t.R7$(1),t.Y8G("ngIf",!o.getFirstImageUrl(e.imageUrls)),t.R7$(1),t.Y8G("ngIf",o.getImageCount(e.imageUrls)>1)}}function cc(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Product"),t.k0s())}function lc(n,a){if(1&n&&(t.j41(0,"div",49),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function pc(n,a){if(1&n&&(t.j41(0,"td",39)(1,"div",47),t.EFF(2),t.k0s(),t.DNE(3,lc,2,1,"div",48),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(1),t.Y8G("ngIf",e.description)}}function mc(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Price"),t.k0s())}function dc(n,a){if(1&n&&(t.j41(0,"td",39)(1,"span",50),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatPrice(e.price,e.unit))}}function gc(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Farmer"),t.k0s())}function _c(n,a){if(1&n&&(t.j41(0,"span",55),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.location)}}function uc(n,a){if(1&n&&(t.j41(0,"td",39)(1,"div",51)(2,"span",52),t.EFF(3),t.k0s(),t.j41(4,"span",53),t.EFF(5),t.k0s(),t.DNE(6,_c,2,1,"span",54),t.k0s()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.sellerPhone),t.R7$(1),t.Y8G("ngIf",e.location)}}function fc(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Category"),t.k0s())}function Cc(n,a){if(1&n&&(t.j41(0,"span",57),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.category)}}function hc(n,a){if(1&n&&(t.j41(0,"td",39),t.DNE(1,Cc,2,1,"span",56),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.category)}}function Pc(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Status"),t.k0s())}function bc(n,a){if(1&n&&(t.j41(0,"td",39)(1,"span",58),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.SpI(" ",o.getStatusLabel(e.status)," ")}}function Mc(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Type"),t.k0s())}function vc(n,a){1&n&&(t.j41(0,"span",61)(1,"mat-icon",62),t.EFF(2,"payments"),t.k0s(),t.EFF(3," PAID "),t.k0s())}function xc(n,a){1&n&&(t.j41(0,"span",63),t.EFF(1,"FREE"),t.k0s())}function Fc(n,a){if(1&n&&(t.j41(0,"td",39),t.DNE(1,vc,4,0,"span",59),t.DNE(2,xc,2,0,"span",60),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.isPaid),t.R7$(1),t.Y8G("ngIf",!e.isPaid)}}function Oc(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Featured"),t.k0s())}function kc(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",39)(1,"button",64),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.toggleFeatured(r))}),t.j41(2,"mat-icon"),t.EFF(3),t.k0s()()()}if(2&n){const e=a.$implicit;t.R7$(1),t.AVh("is-featured",e.featured),t.Y8G("matTooltip",e.featured?"Remove from featured":"Mark as featured"),t.R7$(2),t.JRh(e.featured?"star":"star_border")}}function Ec(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Date"),t.k0s())}function Rc(n,a){if(1&n&&(t.j41(0,"td",39)(1,"span",65),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function Tc(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Action"),t.k0s())}function yc(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",70),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,d=t.XpG(2);return t.Njj(d.onStatusChange(c,r.value))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.xc7("color",e.color),t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function jc(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",39)(1,"button",66),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.editPost(r))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()(),t.j41(4,"button",67),t.EFF(5," Change Status "),t.j41(6,"mat-icon"),t.EFF(7,"arrow_drop_down"),t.k0s()(),t.j41(8,"mat-menu",null,68),t.DNE(10,yc,5,4,"button",69),t.k0s()()}if(2&n){const e=a.$implicit,o=t.sdS(9),i=t.XpG(2);t.R7$(4),t.Y8G("matMenuTriggerFor",o),t.R7$(6),t.Y8G("ngForOf",i.getAvailableStatuses(e))}}function Dc(n,a){1&n&&t.nrm(0,"tr",71)}function $c(n,a){1&n&&t.nrm(0,"tr",72)}function Ic(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",73)(1,"button",74),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage-1))}),t.j41(2,"mat-icon"),t.EFF(3,"chevron_left"),t.k0s(),t.EFF(4," Previous "),t.k0s(),t.j41(5,"span",75),t.EFF(6),t.k0s(),t.j41(7,"button",74),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage+1))}),t.EFF(8," Next "),t.j41(9,"mat-icon"),t.EFF(10,"chevron_right"),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("disabled",0===e.currentPage),t.R7$(5),t.E5c("Page ",e.currentPage+1," of ",e.totalPages," (",e.totalItems," posts)"),t.R7$(1),t.Y8G("disabled",e.currentPage>=e.totalPages-1)}}const ft=function(){return["image","title","price","seller","category","status","type","featured","date","actions"]};function Nc(n,a){if(1&n&&(t.j41(0,"div",21)(1,"table",22),t.qex(2,23),t.DNE(3,oc,2,0,"th",24),t.DNE(4,sc,5,5,"td",25),t.bVm(),t.qex(5,26),t.DNE(6,cc,2,0,"th",24),t.DNE(7,pc,4,2,"td",25),t.bVm(),t.qex(8,27),t.DNE(9,mc,2,0,"th",24),t.DNE(10,dc,3,1,"td",25),t.bVm(),t.qex(11,28),t.DNE(12,gc,2,0,"th",24),t.DNE(13,uc,7,3,"td",25),t.bVm(),t.qex(14,29),t.DNE(15,fc,2,0,"th",24),t.DNE(16,hc,2,1,"td",25),t.bVm(),t.qex(17,30),t.DNE(18,Pc,2,0,"th",24),t.DNE(19,bc,3,2,"td",25),t.bVm(),t.qex(20,31),t.DNE(21,Mc,2,0,"th",24),t.DNE(22,Fc,3,2,"td",25),t.bVm(),t.qex(23,32),t.DNE(24,Oc,2,0,"th",24),t.DNE(25,kc,4,4,"td",25),t.bVm(),t.qex(26,33),t.DNE(27,Ec,2,0,"th",24),t.DNE(28,Rc,3,1,"td",25),t.bVm(),t.qex(29,34),t.DNE(30,Tc,2,0,"th",24),t.DNE(31,jc,11,2,"td",25),t.bVm(),t.DNE(32,Dc,1,0,"tr",35),t.DNE(33,$c,1,0,"tr",36),t.k0s(),t.DNE(34,Ic,11,5,"div",37),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.posts),t.R7$(31),t.Y8G("matHeaderRowDef",t.lJ4(4,ft)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(5,ft)),t.R7$(1),t.Y8G("ngIf",e.totalPages>1)}}function Gc(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",86),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.prevImage())}),t.j41(1,"mat-icon"),t.EFF(2,"chevron_left"),t.k0s()()}}function wc(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",87),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.nextImage())}),t.j41(1,"mat-icon"),t.EFF(2,"chevron_right"),t.k0s()()}}function Sc(n,a){if(1&n){const e=t.RV6();t.j41(0,"img",90),t.bIt("click",function(){const r=t.eBV(e).index,c=t.XpG(3);return t.Njj(c.galleryIndex=r)}),t.k0s()}if(2&n){const e=a.$implicit,o=a.index,i=t.XpG(3);t.AVh("active",o===i.galleryIndex),t.Y8G("src",e,t.B4B)}}function Ac(n,a){if(1&n&&(t.j41(0,"div",88),t.DNE(1,Sc,1,3,"img",89),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.galleryImages)}}function Vc(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",76),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.closeGallery())}),t.j41(1,"div",77),t.bIt("click",function(i){return i.stopPropagation()}),t.j41(2,"button",78),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.closeGallery())}),t.j41(3,"mat-icon"),t.EFF(4,"close"),t.k0s()(),t.j41(5,"div",79),t.EFF(6),t.k0s(),t.j41(7,"div",80),t.DNE(8,Gc,3,0,"button",81),t.nrm(9,"img",82),t.DNE(10,wc,3,0,"button",83),t.k0s(),t.j41(11,"div",84),t.EFF(12),t.k0s(),t.DNE(13,Ac,2,1,"div",85),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(6),t.JRh(e.galleryTitle),t.R7$(2),t.Y8G("ngIf",e.galleryImages.length>1),t.R7$(1),t.Y8G("src",e.galleryImages[e.galleryIndex],t.B4B),t.R7$(1),t.Y8G("ngIf",e.galleryImages.length>1),t.R7$(2),t.Lme("",e.galleryIndex+1," / ",e.galleryImages.length,""),t.R7$(1),t.Y8G("ngIf",e.galleryImages.length>1)}}let Lc=(()=>{class n{constructor(e,o,i){this.farmerProductsService=e,this.snackBar=o,this.dialog=i,this.posts=[],this.loading=!0,this.activeTab="pending",this.currentPage=0,this.totalPages=0,this.totalItems=0,this.pageSize=20,this.searchText="",this.galleryOpen=!1,this.galleryImages=[],this.galleryIndex=0,this.galleryTitle="",this.statusOptions=[{value:"APPROVED",label:"Approve",icon:"check_circle",color:"#4caf50"},{value:"REJECTED",label:"Reject",icon:"cancel",color:"#f44336"},{value:"HOLD",label:"Hold",icon:"pause_circle",color:"#ff9800"},{value:"HIDDEN",label:"Hide",icon:"visibility_off",color:"#9e9e9e"},{value:"CORRECTION_REQUIRED",label:"Correction Required",icon:"edit_note",color:"#2196f3"},{value:"REMOVED",label:"Remove",icon:"delete_forever",color:"#b71c1c"}]}ngOnInit(){this.loadPosts()}loadPosts(){this.loading=!0,("pending"===this.activeTab?this.farmerProductsService.getPendingPosts(this.currentPage,this.pageSize):this.farmerProductsService.getAllPosts(this.currentPage,this.pageSize,this.searchText)).subscribe({next:o=>{const i=o.data;this.posts=i?.content||[],this.totalPages=i?.totalPages||0,this.totalItems=i?.totalItems||0,this.loading=!1},error:o=>{console.error("Error loading farmer products:",o),this.loading=!1,this.snackBar.open("Failed to load farmer products","Close",{duration:3e3})}})}onSearchChange(){this.currentPage=0,this.loadPosts()}switchTab(e){this.activeTab=e,this.currentPage=0,this.loadPosts()}approvePost(e){this.farmerProductsService.approvePost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" approved`,"OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to approve post","Close",{duration:3e3})}})}rejectPost(e){confirm(`Reject "${e.title}"?`)&&this.farmerProductsService.rejectPost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" rejected`,"OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to reject post","Close",{duration:3e3})}})}deletePost(e){confirm(`Delete "${e.title}" permanently?`)&&this.farmerProductsService.deletePost(e.id).subscribe({next:()=>{this.snackBar.open("Post deleted","OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to delete post","Close",{duration:3e3})}})}editPost(e){this.dialog.open(B,{width:"600px",maxHeight:"90vh",data:{postType:"farmer",post:{...e}}}).afterClosed().subscribe(i=>{i&&this.farmerProductsService.adminUpdatePost(e.id,i).subscribe({next:()=>{this.snackBar.open("Post updated","OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to update post","Close",{duration:3e3})}})})}getImageUrl(e){return(0,E.V)(e)}getFirstImageUrl(e){if(!e)return"";const o=e.split(",")[0]?.trim();return(0,E.V)(o||null)}getAllImageUrls(e){return e?e.split(",").map(o=>(0,E.V)(o.trim())).filter(o=>!!o):[]}getImageCount(e){return e?e.split(",").filter(o=>o.trim()).length:0}openGallery(e){this.galleryImages=this.getAllImageUrls(e.imageUrls),0!==this.galleryImages.length&&(this.galleryIndex=0,this.galleryTitle=e.title,this.galleryOpen=!0)}closeGallery(){this.galleryOpen=!1,this.galleryImages=[],this.galleryIndex=0}prevImage(){this.galleryIndex=this.galleryIndex>0?this.galleryIndex-1:this.galleryImages.length-1}nextImage(){this.galleryIndex=this.galleryIndex<this.galleryImages.length-1?this.galleryIndex+1:0}toggleFeatured(e){this.farmerProductsService.toggleFeatured(e.id).subscribe({next:o=>{const r=o.data?.featured;e.featured=r,this.snackBar.open(r?`"${e.title}" marked as featured`:`"${e.title}" removed from featured`,"OK",{duration:3e3})},error:()=>{this.snackBar.open("Failed to toggle featured","Close",{duration:3e3})}})}onStatusChange(e,o){if("REMOVED"===o){if(!confirm(`Remove "${e.title}" permanently?`))return;return void this.farmerProductsService.deletePost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" removed`,"OK",{duration:3e3}),this.loadPosts()},error:()=>this.snackBar.open("Failed to remove post","Close",{duration:3e3})})}const i=this.statusOptions.find(r=>r.value===o)?.label||o;this.farmerProductsService.changePostStatus(e.id,o).subscribe({next:()=>{this.snackBar.open(`"${e.title}" \u2192 ${i}`,"OK",{duration:3e3}),this.loadPosts()},error:()=>this.snackBar.open("Failed to change status","Close",{duration:3e3})})}getAvailableStatuses(e){return this.statusOptions.filter(o=>o.value!==e.status)}getStatusColor(e){switch(e){case"PENDING_APPROVAL":case"HOLD":case"FLAGGED":return"warn";case"APPROVED":case"CORRECTION_REQUIRED":return"primary";case"REJECTED":return"accent";default:return""}}getStatusLabel(e){switch(e){case"PENDING_APPROVAL":return"Pending";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";case"SOLD":return"Sold";case"HOLD":return"On Hold";case"HIDDEN":return"Hidden";case"CORRECTION_REQUIRED":return"Correction Required";case"FLAGGED":return"Flagged";case"REMOVED":return"Removed";default:return e}}formatPrice(e,o){if(null==e)return"Negotiable";const i="\u20b9"+e.toLocaleString("en-IN");return o?`${i}/${o}`:i}formatDate(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}onPageChange(e){this.currentPage=e,this.loadPosts()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(ut),t.rXU(b.UG),t.rXU(M.bZ))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-farmer-products-management"]],decls:16,vars:7,consts:[[1,"farmer-products-management"],[1,"header"],[1,"subtitle"],[1,"tabs"],["mat-flat-button","",3,"color","click"],["class","search-filter",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","posts-container",4,"ngIf"],["class","gallery-overlay",3,"click",4,"ngIf"],[1,"search-filter"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Type location and press Enter...",3,"ngModel","ngModelChange","keyup.enter"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],["matPrefix",""],["mat-icon-button","","matSuffix","",3,"click"],[1,"loading-container"],["diameter","40"],[1,"empty-state"],[1,"empty-icon"],[4,"ngIf"],[1,"posts-container"],["mat-table","",1,"posts-table",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","price"],["matColumnDef","seller"],["matColumnDef","category"],["matColumnDef","status"],["matColumnDef","type"],["matColumnDef","featured"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","pagination",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"post-image",3,"click"],["alt","Product","loading","lazy",3,"src",4,"ngIf"],["class","no-image",4,"ngIf"],["class","image-count-badge",4,"ngIf"],["alt","Product","loading","lazy",3,"src"],[1,"no-image"],[1,"image-count-badge"],[1,"post-title"],["class","post-description",4,"ngIf"],[1,"post-description"],[1,"price"],[1,"seller-info"],[1,"seller-name"],[1,"seller-phone"],["class","seller-location",4,"ngIf"],[1,"seller-location"],["class","category-chip",4,"ngIf"],[1,"category-chip"],[1,"status-badge",3,"ngClass"],["class","type-badge type-paid",4,"ngIf"],["class","type-badge type-free",4,"ngIf"],[1,"type-badge","type-paid"],[1,"badge-icon"],[1,"type-badge","type-free"],["mat-icon-button","",1,"featured-toggle",3,"matTooltip","click"],[1,"date"],["mat-icon-button","","color","primary","matTooltip","Edit",3,"click"],["mat-stroked-button","",1,"action-dropdown",3,"matMenuTriggerFor"],["statusMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"pagination"],["mat-button","",3,"disabled","click"],[1,"page-info"],[1,"gallery-overlay",3,"click"],[1,"gallery-content",3,"click"],[1,"gallery-close",3,"click"],[1,"gallery-title"],[1,"gallery-image-container"],["class","gallery-nav prev",3,"click",4,"ngIf"],["alt","Product photo",1,"gallery-image",3,"src"],["class","gallery-nav next",3,"click",4,"ngIf"],[1,"gallery-counter"],["class","gallery-thumbnails",4,"ngIf"],[1,"gallery-nav","prev",3,"click"],[1,"gallery-nav","next",3,"click"],[1,"gallery-thumbnails"],["alt","Thumbnail",3,"src","active","click",4,"ngFor","ngForOf"],["alt","Thumbnail",3,"src","click"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Farmer Products Management"),t.k0s(),t.j41(4,"p",2),t.EFF(5,"Review and manage farmer product posts"),t.k0s()(),t.j41(6,"div",3)(7,"button",4),t.bIt("click",function(){return i.switchTab("pending")}),t.EFF(8," Pending Approval "),t.k0s(),t.j41(9,"button",4),t.bIt("click",function(){return i.switchTab("all")}),t.EFF(10," All Posts "),t.k0s()(),t.DNE(11,Ws,8,2,"div",5),t.DNE(12,Zs,4,0,"div",6),t.DNE(13,nc,7,2,"div",7),t.DNE(14,Nc,35,6,"div",8),t.DNE(15,Vc,14,7,"div",9),t.k0s()),2&o&&(t.R7$(7),t.Y8G("color","pending"===i.activeTab?"primary":void 0),t.R7$(2),t.Y8G("color","all"===i.activeTab?"primary":void 0),t.R7$(2),t.Y8G("ngIf","all"===i.activeTab),t.R7$(1),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.posts.length),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.posts.length>0),t.R7$(1),t.Y8G("ngIf",i.galleryOpen))},dependencies:[p.YU,p.Sq,p.bT,l.me,l.BC,l.vS,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,g.iY,C.An,k.fg,m.rl,m.nJ,m.JW,m.yw,R.oV,h.LG,f.kk,f.fb,f.Cp],styles:[".farmer-products-management[_ngcontent-%COMP%]{padding:24px}.farmer-products-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:24px}.farmer-products-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600}.farmer-products-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.farmer-products-management[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:24px}.farmer-products-management[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:140px}.farmer-products-management[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]{margin-bottom:16px}.farmer-products-management[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%;max-width:400px}.farmer-products-management[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:48px}.farmer-products-management[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.farmer-products-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:64px 24px}.farmer-products-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc}.farmer-products-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.farmer-products-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.farmer-products-management[_ngcontent-%COMP%]   .posts-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #00000014}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]{width:100%}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;background:#f5f5f5;display:flex;align-items:center;justify-content:center;position:relative}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image.clickable[_ngcontent-%COMP%]{cursor:pointer}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image.clickable[_ngcontent-%COMP%]:hover{opacity:.85}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{color:#ccc;font-size:28px}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .image-count-badge[_ngcontent-%COMP%]{position:absolute;bottom:2px;right:2px;background:rgba(0,0,0,.7);color:#fff;font-size:10px;font-weight:600;padding:1px 5px;border-radius:6px;line-height:1.4}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#333}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-description[_ngcontent-%COMP%]{font-size:12px;color:#888;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:600;color:#2e7d32;font-size:14px}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-name[_ngcontent-%COMP%]{font-weight:500;font-size:13px}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-phone[_ngcontent-%COMP%]{font-size:12px;color:#666}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-location[_ngcontent-%COMP%]{font-size:11px;color:#999}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32;padding:2px 10px;border-radius:12px;font-size:12px;font-weight:500}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;font-size:12px;font-weight:500;white-space:nowrap}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-pending_approval[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-approved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-sold[_ngcontent-%COMP%]{background:#f3e5f5;color:#6a1b9a}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-flagged[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hold[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hidden[_ngcontent-%COMP%]{background:#eceff1;color:#546e7a}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-correction_required[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-removed[_ngcontent-%COMP%]{background:#fce4ec;color:#b71c1c}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#888;white-space:nowrap}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .featured-toggle[_ngcontent-%COMP%]{color:#bdbdbd;transition:color .2s}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .featured-toggle[_ngcontent-%COMP%]:hover, .farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .featured-toggle.is-featured[_ngcontent-%COMP%]{color:#ffa000}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .action-dropdown[_ngcontent-%COMP%]{font-size:13px;white-space:nowrap}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:3px;padding:3px 10px;border-radius:12px;font-size:11px;font-weight:600;letter-spacing:.5px}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]   .badge-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-paid[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32;border:1px solid #a5d6a7}.farmer-products-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-free[_ngcontent-%COMP%]{background:#f5f5f5;color:#9e9e9e;border:1px solid #e0e0e0}.farmer-products-management[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:16px;border-top:1px solid #eee}.farmer-products-management[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:13px;color:#666}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.9);z-index:9999;display:flex;align-items:center;justify-content:center}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-content[_ngcontent-%COMP%]{position:relative;max-width:90vw;max-height:90vh;display:flex;flex-direction:column;align-items:center}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-close[_ngcontent-%COMP%]{position:absolute;top:-40px;right:-10px;background:none;border:none;color:#fff;cursor:pointer;z-index:10}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-close[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-title[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:500;margin-bottom:12px;text-align:center}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-image[_ngcontent-%COMP%]{max-width:80vw;max-height:65vh;object-fit:contain;border-radius:8px}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,.15);border:none;color:#fff;cursor:pointer;border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;transition:background .2s}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.3)}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav.prev[_ngcontent-%COMP%]{left:-56px}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav.next[_ngcontent-%COMP%]{right:-56px}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-counter[_ngcontent-%COMP%]{color:#ffffffb3;font-size:13px;margin-top:10px}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px;overflow-x:auto;max-width:80vw;padding:4px 0}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:56px;height:56px;object-fit:cover;border-radius:6px;cursor:pointer;opacity:.5;border:2px solid transparent;transition:opacity .2s,border-color .2s}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   img.active[_ngcontent-%COMP%]{opacity:1;border-color:#fff}.farmer-products-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{opacity:.8}"]})}}return n})(),et=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/labours`}getPendingPosts(e=0,o=20){return this.http.get(`${this.apiUrl}/pending`,{params:{page:e.toString(),size:o.toString()}})}getAllPosts(e=0,o=20,i=""){let r={page:e.toString(),size:o.toString()};return i&&(r.search=i),this.http.get(`${this.apiUrl}/admin/all`,{params:r})}getReportedPosts(e=0,o=20){return this.http.get(`${this.apiUrl}/admin/reported`,{params:{page:e.toString(),size:o.toString()}})}approvePost(e){return this.http.put(`${this.apiUrl}/${e}/approve`,{})}rejectPost(e){return this.http.put(`${this.apiUrl}/${e}/reject`,{})}deletePost(e){return this.http.delete(`${this.apiUrl}/${e}`)}changePostStatus(e,o){return this.http.put(`${this.apiUrl}/${e}/status`,{status:o})}adminUpdatePost(e,o){return this.http.put(`${this.apiUrl}/${e}/admin-update`,o)}toggleFeatured(e){return this.http.put(`${this.apiUrl}/${e}/featured`,{})}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Bc(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",15),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return i.searchText="",t.Njj(i.onSearchChange())}),t.j41(1,"mat-icon"),t.EFF(2,"clear"),t.k0s()()}}function Yc(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",10)(1,"mat-form-field",11)(2,"mat-label"),t.EFF(3,"Search by location"),t.k0s(),t.j41(4,"input",12),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.searchText=i)})("keyup.enter",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onSearchChange())}),t.k0s(),t.DNE(5,Bc,3,0,"button",13),t.j41(6,"mat-icon",14),t.EFF(7,"search"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngModel",e.searchText),t.R7$(1),t.Y8G("ngIf",e.searchText)}}function Uc(n,a){1&n&&(t.j41(0,"div",16),t.nrm(1,"mat-spinner",17),t.j41(2,"p"),t.EFF(3,"Loading posts..."),t.k0s()())}function Xc(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"No labour listings are waiting for approval."),t.k0s())}function zc(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"No labour posts yet."),t.k0s())}function Jc(n,a){if(1&n&&(t.j41(0,"div",18)(1,"mat-icon",19),t.EFF(2,"construction"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No posts found"),t.k0s(),t.DNE(5,Xc,2,0,"p",20),t.DNE(6,zc,2,0,"p",20),t.k0s()),2&n){const e=t.XpG();t.R7$(5),t.Y8G("ngIf","pending"===e.activeTab),t.R7$(1),t.Y8G("ngIf","all"===e.activeTab)}}function qc(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Image"),t.k0s())}function Hc(n,a){if(1&n&&t.nrm(0,"img",45),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.Y8G("src",o.getFirstImageUrl(e.imageUrls),t.B4B)}}function Kc(n,a){1&n&&(t.j41(0,"mat-icon",46),t.EFF(1,"person"),t.k0s())}function Qc(n,a){if(1&n&&(t.j41(0,"span",47),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(1),t.SpI(" ",o.getImageCount(e.imageUrls)," ")}}function Wc(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",40)(1,"div",41),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(r.imageUrls&&c.openGallery(r))}),t.DNE(2,Hc,1,1,"img",42),t.DNE(3,Kc,2,0,"mat-icon",43),t.DNE(4,Qc,2,1,"span",44),t.k0s()()}if(2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.AVh("clickable",e.imageUrls),t.R7$(1),t.Y8G("ngIf",e.imageUrls),t.R7$(1),t.Y8G("ngIf",!e.imageUrls),t.R7$(1),t.Y8G("ngIf",o.getImageCount(e.imageUrls)>1)}}function Zc(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Name"),t.k0s())}function tl(n,a){if(1&n&&(t.j41(0,"div",50),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function el(n,a){if(1&n&&(t.j41(0,"td",40)(1,"div",48),t.EFF(2),t.k0s(),t.DNE(3,tl,2,1,"div",49),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.name),t.R7$(1),t.Y8G("ngIf",e.description)}}function nl(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Category"),t.k0s())}function ol(n,a){if(1&n&&(t.j41(0,"td",40)(1,"span",51),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.getCategoryLabel(e.category))}}function al(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Experience"),t.k0s())}function il(n,a){if(1&n&&(t.j41(0,"span",54),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.experience)}}function rl(n,a){1&n&&(t.j41(0,"span",55),t.EFF(1,"-"),t.k0s())}function sl(n,a){if(1&n&&(t.j41(0,"td",40),t.DNE(1,il,2,1,"span",52),t.DNE(2,rl,2,0,"span",53),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.experience),t.R7$(1),t.Y8G("ngIf",!e.experience)}}function cl(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Phone"),t.k0s())}function ll(n,a){if(1&n&&(t.j41(0,"td",40)(1,"div",56)(2,"span",57),t.EFF(3),t.k0s(),t.j41(4,"span",58),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.phone)}}function pl(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Location"),t.k0s())}function ml(n,a){if(1&n&&(t.j41(0,"span",60),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.location)}}function dl(n,a){1&n&&(t.j41(0,"span",55),t.EFF(1,"-"),t.k0s())}function gl(n,a){if(1&n&&(t.j41(0,"td",40),t.DNE(1,ml,2,1,"span",59),t.DNE(2,dl,2,0,"span",53),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.location),t.R7$(1),t.Y8G("ngIf",!e.location)}}function _l(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Status"),t.k0s())}function ul(n,a){if(1&n&&(t.j41(0,"td",40)(1,"span",61),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.SpI(" ",o.getStatusLabel(e.status)," ")}}function fl(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Type"),t.k0s())}function Cl(n,a){1&n&&(t.j41(0,"span",64)(1,"mat-icon",65),t.EFF(2,"payments"),t.k0s(),t.EFF(3," PAID "),t.k0s())}function hl(n,a){1&n&&(t.j41(0,"span",66),t.EFF(1,"FREE"),t.k0s())}function Pl(n,a){if(1&n&&(t.j41(0,"td",40),t.DNE(1,Cl,4,0,"span",62),t.DNE(2,hl,2,0,"span",63),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.isPaid),t.R7$(1),t.Y8G("ngIf",!e.isPaid)}}function bl(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Featured"),t.k0s())}function Ml(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",40)(1,"button",67),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.toggleFeatured(r))}),t.j41(2,"mat-icon"),t.EFF(3),t.k0s()()()}if(2&n){const e=a.$implicit;t.R7$(1),t.AVh("is-featured",e.featured),t.Y8G("matTooltip",e.featured?"Remove from featured":"Mark as featured"),t.R7$(2),t.JRh(e.featured?"star":"star_border")}}function vl(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Date"),t.k0s())}function xl(n,a){if(1&n&&(t.j41(0,"td",40)(1,"span",68),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function Fl(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Actions"),t.k0s())}function Ol(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",74),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.approvePost(i))}),t.j41(1,"mat-icon"),t.EFF(2,"check_circle"),t.k0s()()}}function kl(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",75),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.rejectPost(i))}),t.j41(1,"mat-icon"),t.EFF(2,"cancel"),t.k0s()()}}function El(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",40)(1,"div",69)(2,"button",70),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.editPost(r))}),t.j41(3,"mat-icon"),t.EFF(4,"edit"),t.k0s()(),t.DNE(5,Ol,3,0,"button",71),t.DNE(6,kl,3,0,"button",72),t.j41(7,"button",73),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.deletePost(r))}),t.j41(8,"mat-icon"),t.EFF(9,"delete"),t.k0s()()()()}if(2&n){const e=a.$implicit;t.R7$(5),t.Y8G("ngIf","PENDING_APPROVAL"===e.status),t.R7$(1),t.Y8G("ngIf","PENDING_APPROVAL"===e.status)}}function Rl(n,a){1&n&&t.nrm(0,"tr",76)}function Tl(n,a){1&n&&t.nrm(0,"tr",77)}function yl(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",78)(1,"button",79),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage-1))}),t.j41(2,"mat-icon"),t.EFF(3,"chevron_left"),t.k0s(),t.EFF(4," Previous "),t.k0s(),t.j41(5,"span",80),t.EFF(6),t.k0s(),t.j41(7,"button",79),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage+1))}),t.EFF(8," Next "),t.j41(9,"mat-icon"),t.EFF(10,"chevron_right"),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("disabled",0===e.currentPage),t.R7$(5),t.E5c("Page ",e.currentPage+1," of ",e.totalPages," (",e.totalItems," posts)"),t.R7$(1),t.Y8G("disabled",e.currentPage>=e.totalPages-1)}}const Ct=function(){return["image","name","category","experience","phone","location","status","type","featured","date","actions"]};function jl(n,a){if(1&n&&(t.j41(0,"div",21)(1,"table",22),t.qex(2,23),t.DNE(3,qc,2,0,"th",24),t.DNE(4,Wc,5,5,"td",25),t.bVm(),t.qex(5,26),t.DNE(6,Zc,2,0,"th",24),t.DNE(7,el,4,2,"td",25),t.bVm(),t.qex(8,27),t.DNE(9,nl,2,0,"th",24),t.DNE(10,ol,3,1,"td",25),t.bVm(),t.qex(11,28),t.DNE(12,al,2,0,"th",24),t.DNE(13,sl,3,2,"td",25),t.bVm(),t.qex(14,29),t.DNE(15,cl,2,0,"th",24),t.DNE(16,ll,6,2,"td",25),t.bVm(),t.qex(17,30),t.DNE(18,pl,2,0,"th",24),t.DNE(19,gl,3,2,"td",25),t.bVm(),t.qex(20,31),t.DNE(21,_l,2,0,"th",24),t.DNE(22,ul,3,2,"td",25),t.bVm(),t.qex(23,32),t.DNE(24,fl,2,0,"th",24),t.DNE(25,Pl,3,2,"td",25),t.bVm(),t.qex(26,33),t.DNE(27,bl,2,0,"th",24),t.DNE(28,Ml,4,4,"td",25),t.bVm(),t.qex(29,34),t.DNE(30,vl,2,0,"th",24),t.DNE(31,xl,3,1,"td",25),t.bVm(),t.qex(32,35),t.DNE(33,Fl,2,0,"th",24),t.DNE(34,El,10,2,"td",25),t.bVm(),t.DNE(35,Rl,1,0,"tr",36),t.DNE(36,Tl,1,0,"tr",37),t.k0s(),t.DNE(37,yl,11,5,"div",38),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.posts),t.R7$(34),t.Y8G("matHeaderRowDef",t.lJ4(4,Ct)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(5,Ct)),t.R7$(1),t.Y8G("ngIf",e.totalPages>1)}}function Dl(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",91),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.prevImage())}),t.j41(1,"mat-icon"),t.EFF(2,"chevron_left"),t.k0s()()}}function $l(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",92),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.nextImage())}),t.j41(1,"mat-icon"),t.EFF(2,"chevron_right"),t.k0s()()}}function Il(n,a){if(1&n){const e=t.RV6();t.j41(0,"img",95),t.bIt("click",function(){const r=t.eBV(e).index,c=t.XpG(3);return t.Njj(c.galleryIndex=r)}),t.k0s()}if(2&n){const e=a.$implicit,o=a.index,i=t.XpG(3);t.AVh("active",o===i.galleryIndex),t.Y8G("src",e,t.B4B)}}function Nl(n,a){if(1&n&&(t.j41(0,"div",93),t.DNE(1,Il,1,3,"img",94),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.galleryImages)}}function Gl(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",81),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.closeGallery())}),t.j41(1,"div",82),t.bIt("click",function(i){return i.stopPropagation()}),t.j41(2,"button",83),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.closeGallery())}),t.j41(3,"mat-icon"),t.EFF(4,"close"),t.k0s()(),t.j41(5,"div",84),t.EFF(6),t.k0s(),t.j41(7,"div",85),t.DNE(8,Dl,3,0,"button",86),t.nrm(9,"img",87),t.DNE(10,$l,3,0,"button",88),t.k0s(),t.j41(11,"div",89),t.EFF(12),t.k0s(),t.DNE(13,Nl,2,1,"div",90),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(6),t.JRh(e.galleryTitle),t.R7$(2),t.Y8G("ngIf",e.galleryImages.length>1),t.R7$(1),t.Y8G("src",e.galleryImages[e.galleryIndex],t.B4B),t.R7$(1),t.Y8G("ngIf",e.galleryImages.length>1),t.R7$(2),t.Lme("",e.galleryIndex+1," / ",e.galleryImages.length,""),t.R7$(1),t.Y8G("ngIf",e.galleryImages.length>1)}}let wl=(()=>{class n{constructor(e,o,i){this.labourService=e,this.snackBar=o,this.dialog=i,this.posts=[],this.loading=!0,this.activeTab="pending",this.currentPage=0,this.totalPages=0,this.totalItems=0,this.pageSize=20,this.searchText="",this.galleryOpen=!1,this.galleryImages=[],this.galleryIndex=0,this.galleryTitle=""}ngOnInit(){this.loadPosts()}loadPosts(){this.loading=!0,("pending"===this.activeTab?this.labourService.getPendingPosts(this.currentPage,this.pageSize):this.labourService.getAllPosts(this.currentPage,this.pageSize,this.searchText)).subscribe({next:o=>{const i=o.data;this.posts=i?.content||[],this.totalPages=i?.totalPages||0,this.totalItems=i?.totalItems||0,this.loading=!1},error:o=>{console.error("Error loading labour posts:",o),this.loading=!1,this.snackBar.open("Failed to load posts","Close",{duration:3e3})}})}onSearchChange(){this.currentPage=0,this.loadPosts()}switchTab(e){this.activeTab=e,this.currentPage=0,this.loadPosts()}approvePost(e){this.labourService.approvePost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.name}" approved`,"OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to approve post","Close",{duration:3e3})}})}rejectPost(e){confirm(`Reject "${e.name}"?`)&&this.labourService.rejectPost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.name}" rejected`,"OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to reject post","Close",{duration:3e3})}})}deletePost(e){confirm(`Delete "${e.name}" permanently?`)&&this.labourService.deletePost(e.id).subscribe({next:()=>{this.snackBar.open("Post deleted","OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to delete post","Close",{duration:3e3})}})}editPost(e){this.dialog.open(B,{width:"600px",maxHeight:"90vh",data:{postType:"labour",post:{...e}}}).afterClosed().subscribe(i=>{i&&this.labourService.adminUpdatePost(e.id,i).subscribe({next:()=>{this.snackBar.open("Post updated","OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to update post","Close",{duration:3e3})}})})}toggleFeatured(e){this.labourService.toggleFeatured(e.id).subscribe({next:o=>{const r=o.data?.featured;e.featured=r,this.snackBar.open(r?`"${e.name}" marked as featured`:`"${e.name}" removed from featured`,"OK",{duration:3e3})},error:()=>{this.snackBar.open("Failed to toggle featured","Close",{duration:3e3})}})}getFirstImageUrl(e){if(!e)return"";const o=e.split(",")[0]?.trim();return(0,E.V)(o||null)}getAllImageUrls(e){return e?e.split(",").map(o=>(0,E.V)(o.trim())).filter(o=>!!o):[]}getImageCount(e){return e?e.split(",").filter(o=>o.trim()).length:0}openGallery(e){this.galleryImages=this.getAllImageUrls(e.imageUrls),0!==this.galleryImages.length&&(this.galleryIndex=0,this.galleryTitle=e.name,this.galleryOpen=!0)}closeGallery(){this.galleryOpen=!1,this.galleryImages=[],this.galleryIndex=0}prevImage(){this.galleryIndex=this.galleryIndex>0?this.galleryIndex-1:this.galleryImages.length-1}nextImage(){this.galleryIndex=this.galleryIndex<this.galleryImages.length-1?this.galleryIndex+1:0}getCategoryLabel(e){switch(e){case"PAINTER":return"Painter";case"ELECTRICIAN":return"Electrician";case"PLUMBER":return"Plumber";case"CARPENTER":return"Carpenter";case"CONTRACTOR":return"Contractor";case"MASON":return"Mason";case"WELDER":return"Welder";case"MECHANIC":return"Mechanic";case"DRIVER":return"Driver";case"CLEANER":return"Cleaner";case"GARDENER":return"Gardener";case"COOK":return"Cook";case"TAILOR":return"Tailor";case"AC_TECHNICIAN":return"AC Technician";case"CCTV_TECHNICIAN":return"CCTV Technician";case"COMPUTER_TECHNICIAN":return"Computer Technician";case"MOBILE_TECHNICIAN":return"Mobile Technician";case"HELPER":return"Helper";case"BIKE_REPAIR":return"Bike Repair";case"CAR_REPAIR":return"Car Repair";case"TYRE_PUNCTURE":return"Tyre Puncture";case"GENERAL_LABOUR":return"General Labour";case"OTHER":return"Other";default:return e}}getStatusColor(e){switch(e){case"PENDING_APPROVAL":case"FLAGGED":return"warn";case"APPROVED":return"primary";case"REJECTED":return"accent";default:return""}}getStatusLabel(e){switch(e){case"PENDING_APPROVAL":return"Pending";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";case"SOLD":return"Unavailable";case"FLAGGED":return"Flagged";default:return e}}formatDate(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}onPageChange(e){this.currentPage=e,this.loadPosts()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(et),t.rXU(b.UG),t.rXU(M.bZ))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-labour-management"]],decls:16,vars:7,consts:[[1,"labour-management"],[1,"header"],[1,"subtitle"],[1,"tabs"],["mat-flat-button","",3,"color","click"],["class","search-filter",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","posts-container",4,"ngIf"],["class","gallery-overlay",3,"click",4,"ngIf"],[1,"search-filter"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Type location and press Enter...",3,"ngModel","ngModelChange","keyup.enter"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],["matPrefix",""],["mat-icon-button","","matSuffix","",3,"click"],[1,"loading-container"],["diameter","40"],[1,"empty-state"],[1,"empty-icon"],[4,"ngIf"],[1,"posts-container"],["mat-table","",1,"posts-table",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","category"],["matColumnDef","experience"],["matColumnDef","phone"],["matColumnDef","location"],["matColumnDef","status"],["matColumnDef","type"],["matColumnDef","featured"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","pagination",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"post-image",3,"click"],["alt","Labour","loading","lazy",3,"src",4,"ngIf"],["class","no-image",4,"ngIf"],["class","image-count",4,"ngIf"],["alt","Labour","loading","lazy",3,"src"],[1,"no-image"],[1,"image-count"],[1,"post-title"],["class","post-description",4,"ngIf"],[1,"post-description"],[1,"category-chip"],["class","experience",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"experience"],[1,"no-data"],[1,"owner-info"],[1,"owner-name"],[1,"owner-phone"],["class","location",4,"ngIf"],[1,"location"],[1,"status-badge",3,"ngClass"],["class","type-badge type-paid",4,"ngIf"],["class","type-badge type-free",4,"ngIf"],[1,"type-badge","type-paid"],[1,"badge-icon"],[1,"type-badge","type-free"],["mat-icon-button","",1,"featured-toggle",3,"matTooltip","click"],[1,"date"],[1,"action-buttons"],["mat-icon-button","","color","primary","matTooltip","Edit",3,"click"],["mat-icon-button","","color","primary","matTooltip","Approve",3,"click",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Reject",3,"click",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-icon-button","","color","primary","matTooltip","Approve",3,"click"],["mat-icon-button","","color","warn","matTooltip","Reject",3,"click"],["mat-header-row",""],["mat-row",""],[1,"pagination"],["mat-button","",3,"disabled","click"],[1,"page-info"],[1,"gallery-overlay",3,"click"],[1,"gallery-content",3,"click"],[1,"gallery-close",3,"click"],[1,"gallery-title"],[1,"gallery-image-container"],["class","gallery-nav prev",3,"click",4,"ngIf"],["alt","Labour photo",1,"gallery-image",3,"src"],["class","gallery-nav next",3,"click",4,"ngIf"],[1,"gallery-counter"],["class","gallery-thumbnails",4,"ngIf"],[1,"gallery-nav","prev",3,"click"],[1,"gallery-nav","next",3,"click"],[1,"gallery-thumbnails"],["alt","Thumbnail",3,"src","active","click",4,"ngFor","ngForOf"],["alt","Thumbnail",3,"src","click"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Labour Management"),t.k0s(),t.j41(4,"p",2),t.EFF(5,"Review and manage labour listing posts"),t.k0s()(),t.j41(6,"div",3)(7,"button",4),t.bIt("click",function(){return i.switchTab("pending")}),t.EFF(8," Pending Approval "),t.k0s(),t.j41(9,"button",4),t.bIt("click",function(){return i.switchTab("all")}),t.EFF(10," All Posts "),t.k0s()(),t.DNE(11,Yc,8,2,"div",5),t.DNE(12,Uc,4,0,"div",6),t.DNE(13,Jc,7,2,"div",7),t.DNE(14,jl,38,6,"div",8),t.DNE(15,Gl,14,7,"div",9),t.k0s()),2&o&&(t.R7$(7),t.Y8G("color","pending"===i.activeTab?"primary":void 0),t.R7$(2),t.Y8G("color","all"===i.activeTab?"primary":void 0),t.R7$(2),t.Y8G("ngIf","all"===i.activeTab),t.R7$(1),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.posts.length),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.posts.length>0),t.R7$(1),t.Y8G("ngIf",i.galleryOpen))},dependencies:[p.YU,p.Sq,p.bT,l.me,l.BC,l.vS,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,g.iY,C.An,k.fg,m.rl,m.nJ,m.JW,m.yw,R.oV,h.LG],styles:[".labour-management[_ngcontent-%COMP%]{padding:24px}.labour-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:24px}.labour-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600}.labour-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.labour-management[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:24px}.labour-management[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:140px}.labour-management[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]{margin-bottom:16px}.labour-management[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%;max-width:400px}.labour-management[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:48px}.labour-management[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.labour-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:64px 24px}.labour-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc}.labour-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.labour-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.labour-management[_ngcontent-%COMP%]   .posts-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #00000014}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]{width:100%}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;background:#f5f5f5;display:flex;align-items:center;justify-content:center;position:relative}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image.clickable[_ngcontent-%COMP%]{cursor:pointer}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image.clickable[_ngcontent-%COMP%]:hover{opacity:.85}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{color:#ccc;font-size:28px}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .image-count[_ngcontent-%COMP%]{position:absolute;bottom:2px;right:2px;background:rgba(0,0,0,.7);color:#fff;font-size:10px;font-weight:600;padding:1px 5px;border-radius:8px;line-height:1.4}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#333}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-description[_ngcontent-%COMP%]{font-size:12px;color:#888;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:500;background:#e3f2fd;color:#1976d2}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .experience[_ngcontent-%COMP%]{font-size:13px;color:#555}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{color:#ccc}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{font-size:13px;color:#555}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]   .owner-name[_ngcontent-%COMP%]{font-weight:500;font-size:13px}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]   .owner-phone[_ngcontent-%COMP%]{font-size:12px;color:#666}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;font-size:12px;font-weight:500;white-space:nowrap}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-pending_approval[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-approved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-sold[_ngcontent-%COMP%]{background:#f3e5f5;color:#6a1b9a}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-flagged[_ngcontent-%COMP%]{background:#fce4ec;color:#b71c1c}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#888;white-space:nowrap}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:2px}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:3px;padding:3px 10px;border-radius:12px;font-size:11px;font-weight:600;letter-spacing:.5px}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]   .badge-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-paid[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32;border:1px solid #a5d6a7}.labour-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-free[_ngcontent-%COMP%]{background:#f5f5f5;color:#9e9e9e;border:1px solid #e0e0e0}.labour-management[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:16px;border-top:1px solid #eee}.labour-management[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:13px;color:#666}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.9);z-index:9999;display:flex;align-items:center;justify-content:center}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-content[_ngcontent-%COMP%]{position:relative;max-width:90vw;max-height:90vh;display:flex;flex-direction:column;align-items:center}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-close[_ngcontent-%COMP%]{position:absolute;top:-40px;right:-10px;background:none;border:none;color:#fff;cursor:pointer;z-index:10}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-close[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-title[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:500;margin-bottom:12px;text-align:center}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-image[_ngcontent-%COMP%]{max-width:80vw;max-height:65vh;object-fit:contain;border-radius:8px}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,.15);border:none;color:#fff;cursor:pointer;border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;transition:background .2s}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.3)}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav.prev[_ngcontent-%COMP%]{left:-56px}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav.next[_ngcontent-%COMP%]{right:-56px}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-counter[_ngcontent-%COMP%]{color:#ffffffb3;font-size:13px;margin-top:10px}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px;overflow-x:auto;max-width:80vw;padding:4px 0}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:56px;height:56px;object-fit:cover;border-radius:6px;cursor:pointer;opacity:.5;border:2px solid transparent;transition:opacity .2s,border-color .2s}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   img.active[_ngcontent-%COMP%]{opacity:1;border-color:#fff}.labour-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{opacity:.8}"]})}}return n})();function Sl(n,a){1&n&&(t.j41(0,"div",7),t.nrm(1,"mat-spinner",8),t.j41(2,"p"),t.EFF(3,"Loading reported posts..."),t.k0s()())}function Al(n,a){1&n&&(t.j41(0,"div",9)(1,"mat-icon",10),t.EFF(2,"verified"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No reported posts"),t.k0s(),t.j41(5,"p"),t.EFF(6,"All clear! No labour posts have been reported by users."),t.k0s()())}function Vl(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Image"),t.k0s())}function Ll(n,a){if(1&n&&t.nrm(0,"img",32),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.Y8G("src",o.getImageUrl(e.imageUrls),t.B4B)}}function Bl(n,a){1&n&&(t.j41(0,"mat-icon",33),t.EFF(1,"person"),t.k0s())}function Yl(n,a){if(1&n&&(t.j41(0,"td",28)(1,"div",29),t.DNE(2,Ll,1,1,"img",30),t.DNE(3,Bl,2,0,"mat-icon",31),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.imageUrls),t.R7$(1),t.Y8G("ngIf",!e.imageUrls)}}function Ul(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Name"),t.k0s())}function Xl(n,a){if(1&n&&(t.j41(0,"div",36),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function zl(n,a){if(1&n&&(t.j41(0,"td",28)(1,"div",34),t.EFF(2),t.k0s(),t.DNE(3,Xl,2,1,"div",35),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.name),t.R7$(1),t.Y8G("ngIf",e.description)}}function Jl(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Reports"),t.k0s())}function ql(n,a){if(1&n&&(t.j41(0,"td",28)(1,"span",37)(2,"mat-icon",38),t.EFF(3,"flag"),t.k0s(),t.EFF(4),t.k0s()()),2&n){const e=a.$implicit;t.R7$(1),t.AVh("high",e.reportCount>=3),t.R7$(3),t.SpI(" ",e.reportCount," ")}}function Hl(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Category"),t.k0s())}function Kl(n,a){if(1&n&&(t.j41(0,"td",28)(1,"span",39),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.getCategoryLabel(e.category))}}function Ql(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Phone"),t.k0s())}function Wl(n,a){if(1&n&&(t.j41(0,"td",28)(1,"div",40)(2,"span",41),t.EFF(3),t.k0s(),t.j41(4,"span",42),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.phone)}}function Zl(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Status"),t.k0s())}function tp(n,a){if(1&n&&(t.j41(0,"td",28)(1,"span",43),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.SpI(" ",o.getStatusLabel(e.status)," ")}}function ep(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Date"),t.k0s())}function np(n,a){if(1&n&&(t.j41(0,"td",28)(1,"span",44),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function op(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Action"),t.k0s())}function ap(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",48),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,d=t.XpG(2);return t.Njj(d.onStatusChange(c,r.value))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.xc7("color",e.color),t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function ip(n,a){if(1&n&&(t.j41(0,"td",28)(1,"button",45),t.EFF(2," Change Status "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",null,46),t.DNE(7,ap,5,4,"button",47),t.k0s()()),2&n){const e=a.$implicit,o=t.sdS(6),i=t.XpG(2);t.R7$(1),t.Y8G("matMenuTriggerFor",o),t.R7$(6),t.Y8G("ngForOf",i.getAvailableStatuses(e))}}function rp(n,a){1&n&&t.nrm(0,"tr",49)}function sp(n,a){1&n&&t.nrm(0,"tr",50)}function cp(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",51)(1,"button",52),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage-1))}),t.j41(2,"mat-icon"),t.EFF(3,"chevron_left"),t.k0s(),t.EFF(4," Previous "),t.k0s(),t.j41(5,"span",53),t.EFF(6),t.k0s(),t.j41(7,"button",52),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage+1))}),t.EFF(8," Next "),t.j41(9,"mat-icon"),t.EFF(10,"chevron_right"),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("disabled",0===e.currentPage),t.R7$(5),t.E5c("Page ",e.currentPage+1," of ",e.totalPages," (",e.totalItems," posts)"),t.R7$(1),t.Y8G("disabled",e.currentPage>=e.totalPages-1)}}const ht=function(){return["image","name","reports","category","phone","status","date","actions"]};function lp(n,a){if(1&n&&(t.j41(0,"div",11)(1,"div",12)(2,"mat-icon"),t.EFF(3,"flag"),t.k0s(),t.j41(4,"span"),t.EFF(5),t.k0s()(),t.j41(6,"table",13),t.qex(7,14),t.DNE(8,Vl,2,0,"th",15),t.DNE(9,Yl,4,2,"td",16),t.bVm(),t.qex(10,17),t.DNE(11,Ul,2,0,"th",15),t.DNE(12,zl,4,2,"td",16),t.bVm(),t.qex(13,18),t.DNE(14,Jl,2,0,"th",15),t.DNE(15,ql,5,3,"td",16),t.bVm(),t.qex(16,19),t.DNE(17,Hl,2,0,"th",15),t.DNE(18,Kl,3,1,"td",16),t.bVm(),t.qex(19,20),t.DNE(20,Ql,2,0,"th",15),t.DNE(21,Wl,6,2,"td",16),t.bVm(),t.qex(22,21),t.DNE(23,Zl,2,0,"th",15),t.DNE(24,tp,3,2,"td",16),t.bVm(),t.qex(25,22),t.DNE(26,ep,2,0,"th",15),t.DNE(27,np,3,1,"td",16),t.bVm(),t.qex(28,23),t.DNE(29,op,2,0,"th",15),t.DNE(30,ip,8,2,"td",16),t.bVm(),t.DNE(31,rp,1,0,"tr",24),t.DNE(32,sp,1,0,"tr",25),t.k0s(),t.DNE(33,cp,11,5,"div",26),t.k0s()),2&n){const e=t.XpG();t.R7$(5),t.Lme("",e.totalItems," reported post",e.totalItems>1?"s":"",""),t.R7$(1),t.Y8G("dataSource",e.posts),t.R7$(25),t.Y8G("matHeaderRowDef",t.lJ4(6,ht)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(7,ht)),t.R7$(1),t.Y8G("ngIf",e.totalPages>1)}}let pp=(()=>{class n{constructor(e,o){this.labourService=e,this.snackBar=o,this.posts=[],this.loading=!0,this.currentPage=0,this.totalPages=0,this.totalItems=0,this.pageSize=20,this.statusOptions=[{value:"APPROVED",label:"Approve",icon:"check_circle",color:"#4caf50"},{value:"REJECTED",label:"Reject",icon:"cancel",color:"#f44336"},{value:"HOLD",label:"Hold",icon:"pause_circle",color:"#ff9800"},{value:"HIDDEN",label:"Hide",icon:"visibility_off",color:"#9e9e9e"},{value:"CORRECTION_REQUIRED",label:"Correction Required",icon:"edit_note",color:"#2196f3"},{value:"REMOVED",label:"Remove",icon:"delete_forever",color:"#b71c1c"}]}ngOnInit(){this.loadReportedPosts()}loadReportedPosts(){this.loading=!0,this.labourService.getReportedPosts(this.currentPage,this.pageSize).subscribe({next:e=>{const o=e.data;this.posts=o?.content||[],this.totalPages=o?.totalPages||0,this.totalItems=o?.totalItems||0,this.loading=!1},error:e=>{console.error("Error loading reported labour posts:",e),this.loading=!1,this.snackBar.open("Failed to load reported posts","Close",{duration:3e3})}})}onStatusChange(e,o){if("REMOVED"===o){if(!confirm(`Remove "${e.name}" permanently? This will delete the post.`))return;return void this.labourService.deletePost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.name}" removed`,"OK",{duration:3e3}),this.loadReportedPosts()},error:()=>{this.snackBar.open("Failed to remove post","Close",{duration:3e3})}})}const r=this.statusOptions.find(c=>c.value===o)?.label||o;this.labourService.changePostStatus(e.id,o).subscribe({next:()=>{this.snackBar.open(`"${e.name}" \u2192 ${r}`,"OK",{duration:3e3}),this.loadReportedPosts()},error:()=>{this.snackBar.open(`Failed to change status to ${r}`,"Close",{duration:3e3})}})}getImageUrl(e){if(!e)return"";const o=e.split(",")[0]?.trim();return(0,E.V)(o||null)}getCategoryLabel(e){switch(e){case"PAINTER":return"Painter";case"ELECTRICIAN":return"Electrician";case"PLUMBER":return"Plumber";case"CARPENTER":return"Carpenter";case"MASON":return"Mason";case"WELDER":return"Welder";case"MECHANIC":return"Mechanic";case"DRIVER":return"Driver";case"CLEANER":return"Cleaner";case"GARDENER":return"Gardener";case"COOK":return"Cook";case"TAILOR":return"Tailor";case"AC_TECHNICIAN":return"AC Technician";case"CCTV_TECHNICIAN":return"CCTV Technician";case"COMPUTER_TECHNICIAN":return"Computer Technician";case"MOBILE_TECHNICIAN":return"Mobile Technician";case"OTHER":return"Other";default:return e}}getStatusLabel(e){switch(e){case"FLAGGED":return"Flagged";case"PENDING_APPROVAL":return"Pending";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";case"SOLD":return"Unavailable";case"HOLD":return"On Hold";case"HIDDEN":return"Hidden";case"CORRECTION_REQUIRED":return"Correction Required";case"REMOVED":return"Removed";default:return e}}getAvailableStatuses(e){return this.statusOptions.filter(o=>o.value!==e.status)}formatDate(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}onPageChange(e){this.currentPage=e,this.loadReportedPosts()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(et),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-labour-reported"]],decls:11,vars:3,consts:[[1,"labour-reported"],[1,"header"],[1,"header-icon"],[1,"subtitle"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","posts-container",4,"ngIf"],[1,"loading-container"],["diameter","40"],[1,"empty-state"],[1,"empty-icon"],[1,"posts-container"],[1,"total-info"],["mat-table","",1,"posts-table",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","reports"],["matColumnDef","category"],["matColumnDef","phone"],["matColumnDef","status"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","pagination",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"post-image"],["alt","Labour","loading","lazy",3,"src",4,"ngIf"],["class","no-image",4,"ngIf"],["alt","Labour","loading","lazy",3,"src"],[1,"no-image"],[1,"post-title"],["class","post-description",4,"ngIf"],[1,"post-description"],[1,"report-count"],[1,"report-icon"],[1,"category-chip"],[1,"seller-info"],[1,"seller-name"],[1,"seller-phone"],[1,"status-badge",3,"ngClass"],[1,"date"],["mat-stroked-button","",1,"action-dropdown",3,"matMenuTriggerFor"],["statusMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"pagination"],["mat-button","",3,"disabled","click"],[1,"page-info"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2")(3,"mat-icon",2),t.EFF(4,"report"),t.k0s(),t.EFF(5," Reported Labour Posts "),t.k0s(),t.j41(6,"p",3),t.EFF(7,"Labour posts reported by users - review and take action"),t.k0s()(),t.DNE(8,Sl,4,0,"div",4),t.DNE(9,Al,7,0,"div",5),t.DNE(10,lp,34,8,"div",6),t.k0s()),2&o&&(t.R7$(8),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.posts.length),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.posts.length>0))},dependencies:[p.YU,p.Sq,p.bT,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,C.An,h.LG,f.kk,f.fb,f.Cp],styles:[".labour-reported[_ngcontent-%COMP%]{padding:24px}.labour-reported[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:24px}.labour-reported[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;display:flex;align-items:center;gap:8px}.labour-reported[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{color:#e65100}.labour-reported[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.labour-reported[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:48px}.labour-reported[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.labour-reported[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:64px 24px}.labour-reported[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#4caf50}.labour-reported[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.labour-reported[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.labour-reported[_ngcontent-%COMP%]   .posts-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #00000014}.labour-reported[_ngcontent-%COMP%]   .total-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px 24px;background:#fff3e0;color:#e65100;font-weight:500;font-size:14px;border-bottom:1px solid #ffe0b2}.labour-reported[_ngcontent-%COMP%]   .total-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]{width:100%}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;background:#f5f5f5;display:flex;align-items:center;justify-content:center}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{color:#ccc;font-size:28px}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#333}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-description[_ngcontent-%COMP%]{font-size:12px;color:#888;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;background:#fff3e0;color:#e65100;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count[_ngcontent-%COMP%]   .report-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count.high[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;padding:2px 10px;border-radius:12px;font-size:12px;font-weight:500}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-name[_ngcontent-%COMP%]{font-weight:500;font-size:13px}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-phone[_ngcontent-%COMP%]{font-size:12px;color:#666}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;font-size:12px;font-weight:500;white-space:nowrap}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-flagged[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-pending_approval[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-approved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-sold[_ngcontent-%COMP%]{background:#f3e5f5;color:#6a1b9a}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hold[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hidden[_ngcontent-%COMP%]{background:#eceff1;color:#546e7a}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-correction_required[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-removed[_ngcontent-%COMP%]{background:#fce4ec;color:#b71c1c}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#888;white-space:nowrap}.labour-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .action-dropdown[_ngcontent-%COMP%]{font-size:13px;white-space:nowrap}.labour-reported[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:16px;border-top:1px solid #eee}.labour-reported[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:13px;color:#666}"]})}}return n})(),nt=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/travels`}getPendingPosts(e=0,o=20){return this.http.get(`${this.apiUrl}/pending`,{params:{page:e.toString(),size:o.toString()}})}getAllPosts(e=0,o=20,i=""){let r={page:e.toString(),size:o.toString()};return i&&(r.search=i),this.http.get(`${this.apiUrl}/admin/all`,{params:r})}getReportedPosts(e=0,o=20){return this.http.get(`${this.apiUrl}/admin/reported`,{params:{page:e.toString(),size:o.toString()}})}approvePost(e){return this.http.put(`${this.apiUrl}/${e}/approve`,{})}rejectPost(e){return this.http.put(`${this.apiUrl}/${e}/reject`,{})}deletePost(e){return this.http.delete(`${this.apiUrl}/${e}`)}changePostStatus(e,o){return this.http.put(`${this.apiUrl}/${e}/status`,{status:o})}adminUpdatePost(e,o){return this.http.put(`${this.apiUrl}/${e}/admin-update`,o)}toggleFeatured(e){return this.http.put(`${this.apiUrl}/${e}/featured`,{})}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function mp(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",15),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return i.searchText="",t.Njj(i.onSearchChange())}),t.j41(1,"mat-icon"),t.EFF(2,"clear"),t.k0s()()}}function dp(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",10)(1,"mat-form-field",11)(2,"mat-label"),t.EFF(3,"Search by location"),t.k0s(),t.j41(4,"input",12),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.searchText=i)})("keyup.enter",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onSearchChange())}),t.k0s(),t.DNE(5,mp,3,0,"button",13),t.j41(6,"mat-icon",14),t.EFF(7,"search"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngModel",e.searchText),t.R7$(1),t.Y8G("ngIf",e.searchText)}}function gp(n,a){1&n&&(t.j41(0,"div",16),t.nrm(1,"mat-spinner",17),t.j41(2,"p"),t.EFF(3,"Loading posts..."),t.k0s()())}function _p(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"No travel listings are waiting for approval."),t.k0s())}function up(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"No travel posts yet."),t.k0s())}function fp(n,a){if(1&n&&(t.j41(0,"div",18)(1,"mat-icon",19),t.EFF(2,"directions_car"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No posts found"),t.k0s(),t.DNE(5,_p,2,0,"p",20),t.DNE(6,up,2,0,"p",20),t.k0s()),2&n){const e=t.XpG();t.R7$(5),t.Y8G("ngIf","pending"===e.activeTab),t.R7$(1),t.Y8G("ngIf","all"===e.activeTab)}}function Cp(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Image"),t.k0s())}function hp(n,a){if(1&n&&t.nrm(0,"img",45),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.Y8G("src",o.getFirstImageUrl(e.imageUrls),t.B4B)}}function Pp(n,a){1&n&&(t.j41(0,"mat-icon",46),t.EFF(1,"directions_car"),t.k0s())}function bp(n,a){if(1&n&&(t.j41(0,"span",47),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(1),t.SpI(" ",o.getImageCount(e.imageUrls)," ")}}function Mp(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",40)(1,"div",41),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(r.imageUrls&&c.openGallery(r))}),t.DNE(2,hp,1,1,"img",42),t.DNE(3,Pp,2,0,"mat-icon",43),t.DNE(4,bp,2,1,"span",44),t.k0s()()}if(2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.AVh("clickable",e.imageUrls),t.R7$(1),t.Y8G("ngIf",e.imageUrls),t.R7$(1),t.Y8G("ngIf",!e.imageUrls),t.R7$(1),t.Y8G("ngIf",o.getImageCount(e.imageUrls)>1)}}function vp(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Title"),t.k0s())}function xp(n,a){if(1&n&&(t.j41(0,"div",50),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function Fp(n,a){if(1&n&&(t.j41(0,"td",40)(1,"div",48),t.EFF(2),t.k0s(),t.DNE(3,xp,2,1,"div",49),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(1),t.Y8G("ngIf",e.description)}}function Op(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Vehicle Type"),t.k0s())}function kp(n,a){if(1&n&&(t.j41(0,"td",40)(1,"span",51),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.getVehicleTypeLabel(e.vehicleType))}}function Ep(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Route"),t.k0s())}function Rp(n,a){if(1&n&&(t.j41(0,"span",54),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.Lme(" ",e.fromLocation||"-"," \u2192 ",e.toLocation||"-"," ")}}function Tp(n,a){1&n&&(t.j41(0,"span",55),t.EFF(1,"-"),t.k0s())}function yp(n,a){if(1&n&&(t.j41(0,"td",40),t.DNE(1,Rp,2,2,"span",52),t.DNE(2,Tp,2,0,"span",53),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.fromLocation||e.toLocation),t.R7$(1),t.Y8G("ngIf",!e.fromLocation&&!e.toLocation)}}function jp(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Price"),t.k0s())}function Dp(n,a){if(1&n&&(t.j41(0,"span",57),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.price)}}function $p(n,a){1&n&&(t.j41(0,"span",55),t.EFF(1,"-"),t.k0s())}function Ip(n,a){if(1&n&&(t.j41(0,"td",40),t.DNE(1,Dp,2,1,"span",56),t.DNE(2,$p,2,0,"span",53),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.price),t.R7$(1),t.Y8G("ngIf",!e.price)}}function Np(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Phone"),t.k0s())}function Gp(n,a){if(1&n&&(t.j41(0,"td",40)(1,"div",58)(2,"span",59),t.EFF(3),t.k0s(),t.j41(4,"span",60),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.phone)}}function wp(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Status"),t.k0s())}function Sp(n,a){if(1&n&&(t.j41(0,"td",40)(1,"span",61),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.SpI(" ",o.getStatusLabel(e.status)," ")}}function Ap(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Type"),t.k0s())}function Vp(n,a){1&n&&(t.j41(0,"span",64)(1,"mat-icon",65),t.EFF(2,"payments"),t.k0s(),t.EFF(3," PAID "),t.k0s())}function Lp(n,a){1&n&&(t.j41(0,"span",66),t.EFF(1,"FREE"),t.k0s())}function Bp(n,a){if(1&n&&(t.j41(0,"td",40),t.DNE(1,Vp,4,0,"span",62),t.DNE(2,Lp,2,0,"span",63),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.isPaid),t.R7$(1),t.Y8G("ngIf",!e.isPaid)}}function Yp(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Featured"),t.k0s())}function Up(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",40)(1,"button",67),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.toggleFeatured(r))}),t.j41(2,"mat-icon"),t.EFF(3),t.k0s()()()}if(2&n){const e=a.$implicit;t.R7$(1),t.AVh("is-featured",e.featured),t.Y8G("matTooltip",e.featured?"Remove from featured":"Mark as featured"),t.R7$(2),t.JRh(e.featured?"star":"star_border")}}function Xp(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Date"),t.k0s())}function zp(n,a){if(1&n&&(t.j41(0,"td",40)(1,"span",68),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function Jp(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Actions"),t.k0s())}function qp(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",74),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.approvePost(i))}),t.j41(1,"mat-icon"),t.EFF(2,"check_circle"),t.k0s()()}}function Hp(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",75),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.rejectPost(i))}),t.j41(1,"mat-icon"),t.EFF(2,"cancel"),t.k0s()()}}function Kp(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",40)(1,"div",69)(2,"button",70),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.editPost(r))}),t.j41(3,"mat-icon"),t.EFF(4,"edit"),t.k0s()(),t.DNE(5,qp,3,0,"button",71),t.DNE(6,Hp,3,0,"button",72),t.j41(7,"button",73),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.deletePost(r))}),t.j41(8,"mat-icon"),t.EFF(9,"delete"),t.k0s()()()()}if(2&n){const e=a.$implicit;t.R7$(5),t.Y8G("ngIf","PENDING_APPROVAL"===e.status),t.R7$(1),t.Y8G("ngIf","PENDING_APPROVAL"===e.status)}}function Qp(n,a){1&n&&t.nrm(0,"tr",76)}function Wp(n,a){1&n&&t.nrm(0,"tr",77)}function Zp(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",78)(1,"button",79),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage-1))}),t.j41(2,"mat-icon"),t.EFF(3,"chevron_left"),t.k0s(),t.EFF(4," Previous "),t.k0s(),t.j41(5,"span",80),t.EFF(6),t.k0s(),t.j41(7,"button",79),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage+1))}),t.EFF(8," Next "),t.j41(9,"mat-icon"),t.EFF(10,"chevron_right"),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("disabled",0===e.currentPage),t.R7$(5),t.E5c("Page ",e.currentPage+1," of ",e.totalPages," (",e.totalItems," posts)"),t.R7$(1),t.Y8G("disabled",e.currentPage>=e.totalPages-1)}}const Pt=function(){return["image","title","vehicleType","route","price","phone","status","type","featured","date","actions"]};function tm(n,a){if(1&n&&(t.j41(0,"div",21)(1,"table",22),t.qex(2,23),t.DNE(3,Cp,2,0,"th",24),t.DNE(4,Mp,5,5,"td",25),t.bVm(),t.qex(5,26),t.DNE(6,vp,2,0,"th",24),t.DNE(7,Fp,4,2,"td",25),t.bVm(),t.qex(8,27),t.DNE(9,Op,2,0,"th",24),t.DNE(10,kp,3,1,"td",25),t.bVm(),t.qex(11,28),t.DNE(12,Ep,2,0,"th",24),t.DNE(13,yp,3,2,"td",25),t.bVm(),t.qex(14,29),t.DNE(15,jp,2,0,"th",24),t.DNE(16,Ip,3,2,"td",25),t.bVm(),t.qex(17,30),t.DNE(18,Np,2,0,"th",24),t.DNE(19,Gp,6,2,"td",25),t.bVm(),t.qex(20,31),t.DNE(21,wp,2,0,"th",24),t.DNE(22,Sp,3,2,"td",25),t.bVm(),t.qex(23,32),t.DNE(24,Ap,2,0,"th",24),t.DNE(25,Bp,3,2,"td",25),t.bVm(),t.qex(26,33),t.DNE(27,Yp,2,0,"th",24),t.DNE(28,Up,4,4,"td",25),t.bVm(),t.qex(29,34),t.DNE(30,Xp,2,0,"th",24),t.DNE(31,zp,3,1,"td",25),t.bVm(),t.qex(32,35),t.DNE(33,Jp,2,0,"th",24),t.DNE(34,Kp,10,2,"td",25),t.bVm(),t.DNE(35,Qp,1,0,"tr",36),t.DNE(36,Wp,1,0,"tr",37),t.k0s(),t.DNE(37,Zp,11,5,"div",38),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.posts),t.R7$(34),t.Y8G("matHeaderRowDef",t.lJ4(4,Pt)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(5,Pt)),t.R7$(1),t.Y8G("ngIf",e.totalPages>1)}}function em(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",91),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.prevImage())}),t.j41(1,"mat-icon"),t.EFF(2,"chevron_left"),t.k0s()()}}function nm(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",92),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.nextImage())}),t.j41(1,"mat-icon"),t.EFF(2,"chevron_right"),t.k0s()()}}function om(n,a){if(1&n){const e=t.RV6();t.j41(0,"img",95),t.bIt("click",function(){const r=t.eBV(e).index,c=t.XpG(3);return t.Njj(c.galleryIndex=r)}),t.k0s()}if(2&n){const e=a.$implicit,o=a.index,i=t.XpG(3);t.AVh("active",o===i.galleryIndex),t.Y8G("src",e,t.B4B)}}function am(n,a){if(1&n&&(t.j41(0,"div",93),t.DNE(1,om,1,3,"img",94),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.galleryImages)}}function im(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",81),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.closeGallery())}),t.j41(1,"div",82),t.bIt("click",function(i){return i.stopPropagation()}),t.j41(2,"button",83),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.closeGallery())}),t.j41(3,"mat-icon"),t.EFF(4,"close"),t.k0s()(),t.j41(5,"div",84),t.EFF(6),t.k0s(),t.j41(7,"div",85),t.DNE(8,em,3,0,"button",86),t.nrm(9,"img",87),t.DNE(10,nm,3,0,"button",88),t.k0s(),t.j41(11,"div",89),t.EFF(12),t.k0s(),t.DNE(13,am,2,1,"div",90),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(6),t.JRh(e.galleryTitle),t.R7$(2),t.Y8G("ngIf",e.galleryImages.length>1),t.R7$(1),t.Y8G("src",e.galleryImages[e.galleryIndex],t.B4B),t.R7$(1),t.Y8G("ngIf",e.galleryImages.length>1),t.R7$(2),t.Lme("",e.galleryIndex+1," / ",e.galleryImages.length,""),t.R7$(1),t.Y8G("ngIf",e.galleryImages.length>1)}}let rm=(()=>{class n{constructor(e,o,i){this.travelService=e,this.snackBar=o,this.dialog=i,this.posts=[],this.loading=!0,this.activeTab="pending",this.currentPage=0,this.totalPages=0,this.totalItems=0,this.pageSize=20,this.searchText="",this.galleryOpen=!1,this.galleryImages=[],this.galleryIndex=0,this.galleryTitle=""}ngOnInit(){this.loadPosts()}loadPosts(){this.loading=!0,("pending"===this.activeTab?this.travelService.getPendingPosts(this.currentPage,this.pageSize):this.travelService.getAllPosts(this.currentPage,this.pageSize,this.searchText)).subscribe({next:o=>{const i=o.data;this.posts=i?.content||[],this.totalPages=i?.totalPages||0,this.totalItems=i?.totalItems||0,this.loading=!1},error:o=>{console.error("Error loading travel posts:",o),this.loading=!1,this.snackBar.open("Failed to load posts","Close",{duration:3e3})}})}onSearchChange(){this.currentPage=0,this.loadPosts()}switchTab(e){this.activeTab=e,this.currentPage=0,this.loadPosts()}approvePost(e){this.travelService.approvePost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" approved`,"OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to approve post","Close",{duration:3e3})}})}rejectPost(e){confirm(`Reject "${e.title}"?`)&&this.travelService.rejectPost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" rejected`,"OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to reject post","Close",{duration:3e3})}})}deletePost(e){confirm(`Delete "${e.title}" permanently?`)&&this.travelService.deletePost(e.id).subscribe({next:()=>{this.snackBar.open("Post deleted","OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to delete post","Close",{duration:3e3})}})}editPost(e){this.dialog.open(B,{width:"600px",maxHeight:"90vh",data:{postType:"travel",post:{...e}}}).afterClosed().subscribe(i=>{i&&this.travelService.adminUpdatePost(e.id,i).subscribe({next:()=>{this.snackBar.open("Post updated","OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to update post","Close",{duration:3e3})}})})}toggleFeatured(e){this.travelService.toggleFeatured(e.id).subscribe({next:o=>{const r=o.data?.featured;e.featured=r,this.snackBar.open(r?`"${e.title}" marked as featured`:`"${e.title}" removed from featured`,"OK",{duration:3e3})},error:()=>{this.snackBar.open("Failed to toggle featured","Close",{duration:3e3})}})}getFirstImageUrl(e){if(!e)return"";const o=e.split(",")[0]?.trim();return(0,E.V)(o||null)}getAllImageUrls(e){return e?e.split(",").map(o=>(0,E.V)(o.trim())).filter(o=>!!o):[]}getImageCount(e){return e?e.split(",").filter(o=>o.trim()).length:0}openGallery(e){this.galleryImages=this.getAllImageUrls(e.imageUrls),0!==this.galleryImages.length&&(this.galleryIndex=0,this.galleryTitle=e.title,this.galleryOpen=!0)}closeGallery(){this.galleryOpen=!1,this.galleryImages=[],this.galleryIndex=0}prevImage(){this.galleryIndex=this.galleryIndex>0?this.galleryIndex-1:this.galleryImages.length-1}nextImage(){this.galleryIndex=this.galleryIndex<this.galleryImages.length-1?this.galleryIndex+1:0}getVehicleTypeLabel(e){switch(e){case"BUS":return"Bus";case"LORRY":return"Lorry";case"SMALL_BUS":return"Mini Bus";case"RENT":return"Rent";case"CAR":return"Car";case"PARCEL_SERVICE":return"Packers & Movers";case"BIKE":return"Bike";case"AUTO":return"Auto";default:return e}}getStatusColor(e){switch(e){case"PENDING_APPROVAL":case"FLAGGED":return"warn";case"APPROVED":return"primary";case"REJECTED":return"accent";default:return""}}getStatusLabel(e){switch(e){case"PENDING_APPROVAL":return"Pending";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";case"SOLD":return"Unavailable";case"FLAGGED":return"Flagged";default:return e}}formatDate(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}onPageChange(e){this.currentPage=e,this.loadPosts()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(nt),t.rXU(b.UG),t.rXU(M.bZ))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-travel-management"]],decls:16,vars:7,consts:[[1,"travel-management"],[1,"header"],[1,"subtitle"],[1,"tabs"],["mat-flat-button","",3,"color","click"],["class","search-filter",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","posts-container",4,"ngIf"],["class","gallery-overlay",3,"click",4,"ngIf"],[1,"search-filter"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Type location and press Enter...",3,"ngModel","ngModelChange","keyup.enter"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],["matPrefix",""],["mat-icon-button","","matSuffix","",3,"click"],[1,"loading-container"],["diameter","40"],[1,"empty-state"],[1,"empty-icon"],[4,"ngIf"],[1,"posts-container"],["mat-table","",1,"posts-table",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","vehicleType"],["matColumnDef","route"],["matColumnDef","price"],["matColumnDef","phone"],["matColumnDef","status"],["matColumnDef","type"],["matColumnDef","featured"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","pagination",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"post-image",3,"click"],["alt","Travel","loading","lazy",3,"src",4,"ngIf"],["class","no-image",4,"ngIf"],["class","image-count",4,"ngIf"],["alt","Travel","loading","lazy",3,"src"],[1,"no-image"],[1,"image-count"],[1,"post-title"],["class","post-description",4,"ngIf"],[1,"post-description"],[1,"category-chip"],["class","route",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"route"],[1,"no-data"],["class","price",4,"ngIf"],[1,"price"],[1,"owner-info"],[1,"owner-name"],[1,"owner-phone"],[1,"status-badge",3,"ngClass"],["class","type-badge type-paid",4,"ngIf"],["class","type-badge type-free",4,"ngIf"],[1,"type-badge","type-paid"],[1,"badge-icon"],[1,"type-badge","type-free"],["mat-icon-button","",1,"featured-toggle",3,"matTooltip","click"],[1,"date"],[1,"action-buttons"],["mat-icon-button","","color","primary","matTooltip","Edit",3,"click"],["mat-icon-button","","color","primary","matTooltip","Approve",3,"click",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Reject",3,"click",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-icon-button","","color","primary","matTooltip","Approve",3,"click"],["mat-icon-button","","color","warn","matTooltip","Reject",3,"click"],["mat-header-row",""],["mat-row",""],[1,"pagination"],["mat-button","",3,"disabled","click"],[1,"page-info"],[1,"gallery-overlay",3,"click"],[1,"gallery-content",3,"click"],[1,"gallery-close",3,"click"],[1,"gallery-title"],[1,"gallery-image-container"],["class","gallery-nav prev",3,"click",4,"ngIf"],["alt","Travel photo",1,"gallery-image",3,"src"],["class","gallery-nav next",3,"click",4,"ngIf"],[1,"gallery-counter"],["class","gallery-thumbnails",4,"ngIf"],[1,"gallery-nav","prev",3,"click"],[1,"gallery-nav","next",3,"click"],[1,"gallery-thumbnails"],["alt","Thumbnail",3,"src","active","click",4,"ngFor","ngForOf"],["alt","Thumbnail",3,"src","click"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Travel Management"),t.k0s(),t.j41(4,"p",2),t.EFF(5,"Review and manage travel listing posts"),t.k0s()(),t.j41(6,"div",3)(7,"button",4),t.bIt("click",function(){return i.switchTab("pending")}),t.EFF(8," Pending Approval "),t.k0s(),t.j41(9,"button",4),t.bIt("click",function(){return i.switchTab("all")}),t.EFF(10," All Posts "),t.k0s()(),t.DNE(11,dp,8,2,"div",5),t.DNE(12,gp,4,0,"div",6),t.DNE(13,fp,7,2,"div",7),t.DNE(14,tm,38,6,"div",8),t.DNE(15,im,14,7,"div",9),t.k0s()),2&o&&(t.R7$(7),t.Y8G("color","pending"===i.activeTab?"primary":void 0),t.R7$(2),t.Y8G("color","all"===i.activeTab?"primary":void 0),t.R7$(2),t.Y8G("ngIf","all"===i.activeTab),t.R7$(1),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.posts.length),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.posts.length>0),t.R7$(1),t.Y8G("ngIf",i.galleryOpen))},dependencies:[p.YU,p.Sq,p.bT,l.me,l.BC,l.vS,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,g.iY,C.An,k.fg,m.rl,m.nJ,m.JW,m.yw,R.oV,h.LG],styles:[".travel-management[_ngcontent-%COMP%]{padding:24px}.travel-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:24px}.travel-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600}.travel-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.travel-management[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:24px}.travel-management[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:140px}.travel-management[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]{margin-bottom:16px}.travel-management[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%;max-width:400px}.travel-management[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:48px}.travel-management[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.travel-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:64px 24px}.travel-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc}.travel-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.travel-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.travel-management[_ngcontent-%COMP%]   .posts-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #00000014}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]{width:100%}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;background:#f5f5f5;display:flex;align-items:center;justify-content:center;position:relative}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image.clickable[_ngcontent-%COMP%]{cursor:pointer}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image.clickable[_ngcontent-%COMP%]:hover{opacity:.85}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{color:#ccc;font-size:28px}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .image-count[_ngcontent-%COMP%]{position:absolute;bottom:2px;right:2px;background:rgba(0,0,0,.7);color:#fff;font-size:10px;font-weight:600;padding:1px 5px;border-radius:8px;line-height:1.4}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#333}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-description[_ngcontent-%COMP%]{font-size:12px;color:#888;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:500;background:#e0f2f1;color:#00897b}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .route[_ngcontent-%COMP%]{font-size:13px;color:#555}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:13px;color:#555;font-weight:500}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{color:#ccc}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]   .owner-name[_ngcontent-%COMP%]{font-weight:500;font-size:13px}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]   .owner-phone[_ngcontent-%COMP%]{font-size:12px;color:#666}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;font-size:12px;font-weight:500;white-space:nowrap}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-pending_approval[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-approved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-sold[_ngcontent-%COMP%]{background:#f3e5f5;color:#6a1b9a}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-flagged[_ngcontent-%COMP%]{background:#fce4ec;color:#b71c1c}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#888;white-space:nowrap}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:2px}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:3px;padding:3px 10px;border-radius:12px;font-size:11px;font-weight:600;letter-spacing:.5px}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]   .badge-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-paid[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32;border:1px solid #a5d6a7}.travel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-free[_ngcontent-%COMP%]{background:#f5f5f5;color:#9e9e9e;border:1px solid #e0e0e0}.travel-management[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:16px;border-top:1px solid #eee}.travel-management[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:13px;color:#666}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.9);z-index:9999;display:flex;align-items:center;justify-content:center}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-content[_ngcontent-%COMP%]{position:relative;max-width:90vw;max-height:90vh;display:flex;flex-direction:column;align-items:center}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-close[_ngcontent-%COMP%]{position:absolute;top:-40px;right:-10px;background:none;border:none;color:#fff;cursor:pointer;z-index:10}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-close[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-title[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:500;margin-bottom:12px;text-align:center}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-image[_ngcontent-%COMP%]{max-width:80vw;max-height:65vh;object-fit:contain;border-radius:8px}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,.15);border:none;color:#fff;cursor:pointer;border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;transition:background .2s}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.3)}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav.prev[_ngcontent-%COMP%]{left:-56px}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav.next[_ngcontent-%COMP%]{right:-56px}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-counter[_ngcontent-%COMP%]{color:#ffffffb3;font-size:13px;margin-top:10px}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px;overflow-x:auto;max-width:80vw;padding:4px 0}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:56px;height:56px;object-fit:cover;border-radius:6px;cursor:pointer;opacity:.5;border:2px solid transparent;transition:opacity .2s,border-color .2s}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   img.active[_ngcontent-%COMP%]{opacity:1;border-color:#fff}.travel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{opacity:.8}"]})}}return n})();function sm(n,a){1&n&&(t.j41(0,"div",7),t.nrm(1,"mat-spinner",8),t.j41(2,"p"),t.EFF(3,"Loading reported posts..."),t.k0s()())}function cm(n,a){1&n&&(t.j41(0,"div",9)(1,"mat-icon",10),t.EFF(2,"verified"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No reported posts"),t.k0s(),t.j41(5,"p"),t.EFF(6,"All clear! No travel posts have been reported by users."),t.k0s()())}function lm(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Image"),t.k0s())}function pm(n,a){if(1&n&&t.nrm(0,"img",32),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.Y8G("src",o.getImageUrl(e.imageUrls),t.B4B)}}function mm(n,a){1&n&&(t.j41(0,"mat-icon",33),t.EFF(1,"directions_car"),t.k0s())}function dm(n,a){if(1&n&&(t.j41(0,"td",28)(1,"div",29),t.DNE(2,pm,1,1,"img",30),t.DNE(3,mm,2,0,"mat-icon",31),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.imageUrls),t.R7$(1),t.Y8G("ngIf",!e.imageUrls)}}function gm(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Title"),t.k0s())}function _m(n,a){if(1&n&&(t.j41(0,"div",36),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function um(n,a){if(1&n&&(t.j41(0,"td",28)(1,"div",34),t.EFF(2),t.k0s(),t.DNE(3,_m,2,1,"div",35),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(1),t.Y8G("ngIf",e.description)}}function fm(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Reports"),t.k0s())}function Cm(n,a){if(1&n&&(t.j41(0,"td",28)(1,"span",37)(2,"mat-icon",38),t.EFF(3,"flag"),t.k0s(),t.EFF(4),t.k0s()()),2&n){const e=a.$implicit;t.R7$(1),t.AVh("high",e.reportCount>=3),t.R7$(3),t.SpI(" ",e.reportCount," ")}}function hm(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Vehicle Type"),t.k0s())}function Pm(n,a){if(1&n&&(t.j41(0,"td",28)(1,"span",39),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.getVehicleTypeLabel(e.vehicleType))}}function bm(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Phone"),t.k0s())}function Mm(n,a){if(1&n&&(t.j41(0,"td",28)(1,"div",40)(2,"span",41),t.EFF(3),t.k0s(),t.j41(4,"span",42),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.phone)}}function vm(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Status"),t.k0s())}function xm(n,a){if(1&n&&(t.j41(0,"td",28)(1,"span",43),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.SpI(" ",o.getStatusLabel(e.status)," ")}}function Fm(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Date"),t.k0s())}function Om(n,a){if(1&n&&(t.j41(0,"td",28)(1,"span",44),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function km(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Action"),t.k0s())}function Em(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",48),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,d=t.XpG(2);return t.Njj(d.onStatusChange(c,r.value))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.xc7("color",e.color),t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function Rm(n,a){if(1&n&&(t.j41(0,"td",28)(1,"button",45),t.EFF(2," Change Status "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",null,46),t.DNE(7,Em,5,4,"button",47),t.k0s()()),2&n){const e=a.$implicit,o=t.sdS(6),i=t.XpG(2);t.R7$(1),t.Y8G("matMenuTriggerFor",o),t.R7$(6),t.Y8G("ngForOf",i.getAvailableStatuses(e))}}function Tm(n,a){1&n&&t.nrm(0,"tr",49)}function ym(n,a){1&n&&t.nrm(0,"tr",50)}function jm(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",51)(1,"button",52),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage-1))}),t.j41(2,"mat-icon"),t.EFF(3,"chevron_left"),t.k0s(),t.EFF(4," Previous "),t.k0s(),t.j41(5,"span",53),t.EFF(6),t.k0s(),t.j41(7,"button",52),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage+1))}),t.EFF(8," Next "),t.j41(9,"mat-icon"),t.EFF(10,"chevron_right"),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("disabled",0===e.currentPage),t.R7$(5),t.E5c("Page ",e.currentPage+1," of ",e.totalPages," (",e.totalItems," posts)"),t.R7$(1),t.Y8G("disabled",e.currentPage>=e.totalPages-1)}}const bt=function(){return["image","title","reports","vehicleType","phone","status","date","actions"]};function Dm(n,a){if(1&n&&(t.j41(0,"div",11)(1,"div",12)(2,"mat-icon"),t.EFF(3,"flag"),t.k0s(),t.j41(4,"span"),t.EFF(5),t.k0s()(),t.j41(6,"table",13),t.qex(7,14),t.DNE(8,lm,2,0,"th",15),t.DNE(9,dm,4,2,"td",16),t.bVm(),t.qex(10,17),t.DNE(11,gm,2,0,"th",15),t.DNE(12,um,4,2,"td",16),t.bVm(),t.qex(13,18),t.DNE(14,fm,2,0,"th",15),t.DNE(15,Cm,5,3,"td",16),t.bVm(),t.qex(16,19),t.DNE(17,hm,2,0,"th",15),t.DNE(18,Pm,3,1,"td",16),t.bVm(),t.qex(19,20),t.DNE(20,bm,2,0,"th",15),t.DNE(21,Mm,6,2,"td",16),t.bVm(),t.qex(22,21),t.DNE(23,vm,2,0,"th",15),t.DNE(24,xm,3,2,"td",16),t.bVm(),t.qex(25,22),t.DNE(26,Fm,2,0,"th",15),t.DNE(27,Om,3,1,"td",16),t.bVm(),t.qex(28,23),t.DNE(29,km,2,0,"th",15),t.DNE(30,Rm,8,2,"td",16),t.bVm(),t.DNE(31,Tm,1,0,"tr",24),t.DNE(32,ym,1,0,"tr",25),t.k0s(),t.DNE(33,jm,11,5,"div",26),t.k0s()),2&n){const e=t.XpG();t.R7$(5),t.Lme("",e.totalItems," reported post",e.totalItems>1?"s":"",""),t.R7$(1),t.Y8G("dataSource",e.posts),t.R7$(25),t.Y8G("matHeaderRowDef",t.lJ4(6,bt)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(7,bt)),t.R7$(1),t.Y8G("ngIf",e.totalPages>1)}}let $m=(()=>{class n{constructor(e,o){this.travelService=e,this.snackBar=o,this.posts=[],this.loading=!0,this.currentPage=0,this.totalPages=0,this.totalItems=0,this.pageSize=20,this.statusOptions=[{value:"APPROVED",label:"Approve",icon:"check_circle",color:"#4caf50"},{value:"REJECTED",label:"Reject",icon:"cancel",color:"#f44336"},{value:"HOLD",label:"Hold",icon:"pause_circle",color:"#ff9800"},{value:"HIDDEN",label:"Hide",icon:"visibility_off",color:"#9e9e9e"},{value:"CORRECTION_REQUIRED",label:"Correction Required",icon:"edit_note",color:"#2196f3"},{value:"REMOVED",label:"Remove",icon:"delete_forever",color:"#b71c1c"}]}ngOnInit(){this.loadReportedPosts()}loadReportedPosts(){this.loading=!0,this.travelService.getReportedPosts(this.currentPage,this.pageSize).subscribe({next:e=>{const o=e.data;this.posts=o?.content||[],this.totalPages=o?.totalPages||0,this.totalItems=o?.totalItems||0,this.loading=!1},error:e=>{console.error("Error loading reported travel posts:",e),this.loading=!1,this.snackBar.open("Failed to load reported posts","Close",{duration:3e3})}})}onStatusChange(e,o){if("REMOVED"===o){if(!confirm(`Remove "${e.title}" permanently? This will delete the post.`))return;return void this.travelService.deletePost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" removed`,"OK",{duration:3e3}),this.loadReportedPosts()},error:()=>{this.snackBar.open("Failed to remove post","Close",{duration:3e3})}})}const r=this.statusOptions.find(c=>c.value===o)?.label||o;this.travelService.changePostStatus(e.id,o).subscribe({next:()=>{this.snackBar.open(`"${e.title}" \u2192 ${r}`,"OK",{duration:3e3}),this.loadReportedPosts()},error:()=>{this.snackBar.open(`Failed to change status to ${r}`,"Close",{duration:3e3})}})}getImageUrl(e){if(!e)return"";const o=e.split(",")[0]?.trim();return(0,E.V)(o||null)}getVehicleTypeLabel(e){switch(e){case"CAR":return"Car";case"SMALL_BUS":return"Small Bus";case"BUS":return"Bus";default:return e}}getStatusLabel(e){switch(e){case"FLAGGED":return"Flagged";case"PENDING_APPROVAL":return"Pending";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";case"SOLD":return"Unavailable";case"HOLD":return"On Hold";case"HIDDEN":return"Hidden";case"CORRECTION_REQUIRED":return"Correction Required";case"REMOVED":return"Removed";default:return e}}getAvailableStatuses(e){return this.statusOptions.filter(o=>o.value!==e.status)}formatDate(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}onPageChange(e){this.currentPage=e,this.loadReportedPosts()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(nt),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-travel-reported"]],decls:11,vars:3,consts:[[1,"travel-reported"],[1,"header"],[1,"header-icon"],[1,"subtitle"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","posts-container",4,"ngIf"],[1,"loading-container"],["diameter","40"],[1,"empty-state"],[1,"empty-icon"],[1,"posts-container"],[1,"total-info"],["mat-table","",1,"posts-table",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","reports"],["matColumnDef","vehicleType"],["matColumnDef","phone"],["matColumnDef","status"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","pagination",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"post-image"],["alt","Travel","loading","lazy",3,"src",4,"ngIf"],["class","no-image",4,"ngIf"],["alt","Travel","loading","lazy",3,"src"],[1,"no-image"],[1,"post-title"],["class","post-description",4,"ngIf"],[1,"post-description"],[1,"report-count"],[1,"report-icon"],[1,"category-chip"],[1,"seller-info"],[1,"seller-name"],[1,"seller-phone"],[1,"status-badge",3,"ngClass"],[1,"date"],["mat-stroked-button","",1,"action-dropdown",3,"matMenuTriggerFor"],["statusMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"pagination"],["mat-button","",3,"disabled","click"],[1,"page-info"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2")(3,"mat-icon",2),t.EFF(4,"report"),t.k0s(),t.EFF(5," Reported Travel Posts "),t.k0s(),t.j41(6,"p",3),t.EFF(7,"Travel posts reported by users - review and take action"),t.k0s()(),t.DNE(8,sm,4,0,"div",4),t.DNE(9,cm,7,0,"div",5),t.DNE(10,Dm,34,8,"div",6),t.k0s()),2&o&&(t.R7$(8),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.posts.length),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.posts.length>0))},dependencies:[p.YU,p.Sq,p.bT,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,C.An,h.LG,f.kk,f.fb,f.Cp],styles:[".travel-reported[_ngcontent-%COMP%]{padding:24px}.travel-reported[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:24px}.travel-reported[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;display:flex;align-items:center;gap:8px}.travel-reported[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{color:#e65100}.travel-reported[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.travel-reported[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:48px}.travel-reported[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.travel-reported[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:64px 24px}.travel-reported[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#4caf50}.travel-reported[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.travel-reported[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.travel-reported[_ngcontent-%COMP%]   .posts-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #00000014}.travel-reported[_ngcontent-%COMP%]   .total-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px 24px;background:#fff3e0;color:#e65100;font-weight:500;font-size:14px;border-bottom:1px solid #ffe0b2}.travel-reported[_ngcontent-%COMP%]   .total-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]{width:100%}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;background:#f5f5f5;display:flex;align-items:center;justify-content:center}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{color:#ccc;font-size:28px}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#333}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-description[_ngcontent-%COMP%]{font-size:12px;color:#888;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;background:#fff3e0;color:#e65100;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count[_ngcontent-%COMP%]   .report-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count.high[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]{background:#e0f2f1;color:#00897b;padding:2px 10px;border-radius:12px;font-size:12px;font-weight:500}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-name[_ngcontent-%COMP%]{font-weight:500;font-size:13px}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-phone[_ngcontent-%COMP%]{font-size:12px;color:#666}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;font-size:12px;font-weight:500;white-space:nowrap}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-flagged[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-pending_approval[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-approved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-sold[_ngcontent-%COMP%]{background:#f3e5f5;color:#6a1b9a}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hold[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hidden[_ngcontent-%COMP%]{background:#eceff1;color:#546e7a}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-correction_required[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-removed[_ngcontent-%COMP%]{background:#fce4ec;color:#b71c1c}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#888;white-space:nowrap}.travel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .action-dropdown[_ngcontent-%COMP%]{font-size:13px;white-space:nowrap}.travel-reported[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:16px;border-top:1px solid #eee}.travel-reported[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:13px;color:#666}"]})}}return n})(),ot=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/parcels`}getPendingPosts(e=0,o=20){return this.http.get(`${this.apiUrl}/pending`,{params:{page:e.toString(),size:o.toString()}})}getAllPosts(e=0,o=20,i=""){let r={page:e.toString(),size:o.toString()};return i&&(r.search=i),this.http.get(`${this.apiUrl}/admin/all`,{params:r})}getReportedPosts(e=0,o=20){return this.http.get(`${this.apiUrl}/admin/reported`,{params:{page:e.toString(),size:o.toString()}})}approvePost(e){return this.http.put(`${this.apiUrl}/${e}/approve`,{})}rejectPost(e){return this.http.put(`${this.apiUrl}/${e}/reject`,{})}deletePost(e){return this.http.delete(`${this.apiUrl}/${e}`)}changePostStatus(e,o){return this.http.put(`${this.apiUrl}/${e}/status`,{status:o})}adminUpdatePost(e,o){return this.http.put(`${this.apiUrl}/${e}/admin-update`,o)}toggleFeatured(e){return this.http.put(`${this.apiUrl}/${e}/featured`,{})}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Im(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",15),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return i.searchText="",t.Njj(i.onSearchChange())}),t.j41(1,"mat-icon"),t.EFF(2,"clear"),t.k0s()()}}function Nm(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",10)(1,"mat-form-field",11)(2,"mat-label"),t.EFF(3,"Search by location"),t.k0s(),t.j41(4,"input",12),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.searchText=i)})("keyup.enter",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onSearchChange())}),t.k0s(),t.DNE(5,Im,3,0,"button",13),t.j41(6,"mat-icon",14),t.EFF(7,"search"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngModel",e.searchText),t.R7$(1),t.Y8G("ngIf",e.searchText)}}function Gm(n,a){1&n&&(t.j41(0,"div",16),t.nrm(1,"mat-spinner",17),t.j41(2,"p"),t.EFF(3,"Loading posts..."),t.k0s()())}function wm(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"No packers & movers listings are waiting for approval."),t.k0s())}function Sm(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"No packers & movers posts yet."),t.k0s())}function Am(n,a){if(1&n&&(t.j41(0,"div",18)(1,"mat-icon",19),t.EFF(2,"local_shipping"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No posts found"),t.k0s(),t.DNE(5,wm,2,0,"p",20),t.DNE(6,Sm,2,0,"p",20),t.k0s()),2&n){const e=t.XpG();t.R7$(5),t.Y8G("ngIf","pending"===e.activeTab),t.R7$(1),t.Y8G("ngIf","all"===e.activeTab)}}function Vm(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Image"),t.k0s())}function Lm(n,a){if(1&n&&t.nrm(0,"img",45),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.Y8G("src",o.getFirstImageUrl(e.imageUrls),t.B4B)}}function Bm(n,a){1&n&&(t.j41(0,"mat-icon",46),t.EFF(1,"local_shipping"),t.k0s())}function Ym(n,a){if(1&n&&(t.j41(0,"span",47),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(1),t.SpI(" ",o.getImageCount(e.imageUrls)," ")}}function Um(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",40)(1,"div",41),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(r.imageUrls&&c.openGallery(r))}),t.DNE(2,Lm,1,1,"img",42),t.DNE(3,Bm,2,0,"mat-icon",43),t.DNE(4,Ym,2,1,"span",44),t.k0s()()}if(2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.AVh("clickable",e.imageUrls),t.R7$(1),t.Y8G("ngIf",e.imageUrls),t.R7$(1),t.Y8G("ngIf",!e.imageUrls),t.R7$(1),t.Y8G("ngIf",o.getImageCount(e.imageUrls)>1)}}function Xm(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Service Name"),t.k0s())}function zm(n,a){if(1&n&&(t.j41(0,"div",50),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function Jm(n,a){if(1&n&&(t.j41(0,"td",40)(1,"div",48),t.EFF(2),t.k0s(),t.DNE(3,zm,2,1,"div",49),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.serviceName),t.R7$(1),t.Y8G("ngIf",e.description)}}function qm(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Service Type"),t.k0s())}function Hm(n,a){if(1&n&&(t.j41(0,"td",40)(1,"span",51),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.getServiceTypeLabel(e.serviceType))}}function Km(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Route"),t.k0s())}function Qm(n,a){if(1&n&&(t.j41(0,"span",54),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.Lme(" ",e.fromLocation||"-"," \u2192 ",e.toLocation||"-"," ")}}function Wm(n,a){1&n&&(t.j41(0,"span",55),t.EFF(1,"-"),t.k0s())}function Zm(n,a){if(1&n&&(t.j41(0,"td",40),t.DNE(1,Qm,2,2,"span",52),t.DNE(2,Wm,2,0,"span",53),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.fromLocation||e.toLocation),t.R7$(1),t.Y8G("ngIf",!e.fromLocation&&!e.toLocation)}}function td(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Price Info"),t.k0s())}function ed(n,a){if(1&n&&(t.j41(0,"span",57),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.priceInfo)}}function nd(n,a){1&n&&(t.j41(0,"span",55),t.EFF(1,"-"),t.k0s())}function od(n,a){if(1&n&&(t.j41(0,"td",40),t.DNE(1,ed,2,1,"span",56),t.DNE(2,nd,2,0,"span",53),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.priceInfo),t.R7$(1),t.Y8G("ngIf",!e.priceInfo)}}function ad(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Phone"),t.k0s())}function id(n,a){if(1&n&&(t.j41(0,"td",40)(1,"div",58)(2,"span",59),t.EFF(3),t.k0s(),t.j41(4,"span",60),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.phone)}}function rd(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Status"),t.k0s())}function sd(n,a){if(1&n&&(t.j41(0,"td",40)(1,"span",61),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.SpI(" ",o.getStatusLabel(e.status)," ")}}function cd(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Type"),t.k0s())}function ld(n,a){1&n&&(t.j41(0,"span",64)(1,"mat-icon",65),t.EFF(2,"payments"),t.k0s(),t.EFF(3," PAID "),t.k0s())}function pd(n,a){1&n&&(t.j41(0,"span",66),t.EFF(1,"FREE"),t.k0s())}function md(n,a){if(1&n&&(t.j41(0,"td",40),t.DNE(1,ld,4,0,"span",62),t.DNE(2,pd,2,0,"span",63),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.isPaid),t.R7$(1),t.Y8G("ngIf",!e.isPaid)}}function dd(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Featured"),t.k0s())}function gd(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",40)(1,"button",67),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.toggleFeatured(r))}),t.j41(2,"mat-icon"),t.EFF(3),t.k0s()()()}if(2&n){const e=a.$implicit;t.R7$(1),t.AVh("is-featured",e.featured),t.Y8G("matTooltip",e.featured?"Remove from featured":"Mark as featured"),t.R7$(2),t.JRh(e.featured?"star":"star_border")}}function _d(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Date"),t.k0s())}function ud(n,a){if(1&n&&(t.j41(0,"td",40)(1,"span",68),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function fd(n,a){1&n&&(t.j41(0,"th",39),t.EFF(1,"Actions"),t.k0s())}function Cd(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",74),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.approvePost(i))}),t.j41(1,"mat-icon"),t.EFF(2,"check_circle"),t.k0s()()}}function hd(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",75),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.rejectPost(i))}),t.j41(1,"mat-icon"),t.EFF(2,"cancel"),t.k0s()()}}function Pd(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",40)(1,"div",69)(2,"button",70),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.editPost(r))}),t.j41(3,"mat-icon"),t.EFF(4,"edit"),t.k0s()(),t.DNE(5,Cd,3,0,"button",71),t.DNE(6,hd,3,0,"button",72),t.j41(7,"button",73),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.deletePost(r))}),t.j41(8,"mat-icon"),t.EFF(9,"delete"),t.k0s()()()()}if(2&n){const e=a.$implicit;t.R7$(5),t.Y8G("ngIf","PENDING_APPROVAL"===e.status),t.R7$(1),t.Y8G("ngIf","PENDING_APPROVAL"===e.status)}}function bd(n,a){1&n&&t.nrm(0,"tr",76)}function Md(n,a){1&n&&t.nrm(0,"tr",77)}function vd(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",78)(1,"button",79),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage-1))}),t.j41(2,"mat-icon"),t.EFF(3,"chevron_left"),t.k0s(),t.EFF(4," Previous "),t.k0s(),t.j41(5,"span",80),t.EFF(6),t.k0s(),t.j41(7,"button",79),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage+1))}),t.EFF(8," Next "),t.j41(9,"mat-icon"),t.EFF(10,"chevron_right"),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("disabled",0===e.currentPage),t.R7$(5),t.E5c("Page ",e.currentPage+1," of ",e.totalPages," (",e.totalItems," posts)"),t.R7$(1),t.Y8G("disabled",e.currentPage>=e.totalPages-1)}}const Mt=function(){return["image","serviceName","serviceType","route","priceInfo","phone","status","type","featured","date","actions"]};function xd(n,a){if(1&n&&(t.j41(0,"div",21)(1,"table",22),t.qex(2,23),t.DNE(3,Vm,2,0,"th",24),t.DNE(4,Um,5,5,"td",25),t.bVm(),t.qex(5,26),t.DNE(6,Xm,2,0,"th",24),t.DNE(7,Jm,4,2,"td",25),t.bVm(),t.qex(8,27),t.DNE(9,qm,2,0,"th",24),t.DNE(10,Hm,3,1,"td",25),t.bVm(),t.qex(11,28),t.DNE(12,Km,2,0,"th",24),t.DNE(13,Zm,3,2,"td",25),t.bVm(),t.qex(14,29),t.DNE(15,td,2,0,"th",24),t.DNE(16,od,3,2,"td",25),t.bVm(),t.qex(17,30),t.DNE(18,ad,2,0,"th",24),t.DNE(19,id,6,2,"td",25),t.bVm(),t.qex(20,31),t.DNE(21,rd,2,0,"th",24),t.DNE(22,sd,3,2,"td",25),t.bVm(),t.qex(23,32),t.DNE(24,cd,2,0,"th",24),t.DNE(25,md,3,2,"td",25),t.bVm(),t.qex(26,33),t.DNE(27,dd,2,0,"th",24),t.DNE(28,gd,4,4,"td",25),t.bVm(),t.qex(29,34),t.DNE(30,_d,2,0,"th",24),t.DNE(31,ud,3,1,"td",25),t.bVm(),t.qex(32,35),t.DNE(33,fd,2,0,"th",24),t.DNE(34,Pd,10,2,"td",25),t.bVm(),t.DNE(35,bd,1,0,"tr",36),t.DNE(36,Md,1,0,"tr",37),t.k0s(),t.DNE(37,vd,11,5,"div",38),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.posts),t.R7$(34),t.Y8G("matHeaderRowDef",t.lJ4(4,Mt)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(5,Mt)),t.R7$(1),t.Y8G("ngIf",e.totalPages>1)}}function Fd(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",91),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.prevImage())}),t.j41(1,"mat-icon"),t.EFF(2,"chevron_left"),t.k0s()()}}function Od(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",92),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.nextImage())}),t.j41(1,"mat-icon"),t.EFF(2,"chevron_right"),t.k0s()()}}function kd(n,a){if(1&n){const e=t.RV6();t.j41(0,"img",95),t.bIt("click",function(){const r=t.eBV(e).index,c=t.XpG(3);return t.Njj(c.galleryIndex=r)}),t.k0s()}if(2&n){const e=a.$implicit,o=a.index,i=t.XpG(3);t.AVh("active",o===i.galleryIndex),t.Y8G("src",e,t.B4B)}}function Ed(n,a){if(1&n&&(t.j41(0,"div",93),t.DNE(1,kd,1,3,"img",94),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.galleryImages)}}function Rd(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",81),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.closeGallery())}),t.j41(1,"div",82),t.bIt("click",function(i){return i.stopPropagation()}),t.j41(2,"button",83),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.closeGallery())}),t.j41(3,"mat-icon"),t.EFF(4,"close"),t.k0s()(),t.j41(5,"div",84),t.EFF(6),t.k0s(),t.j41(7,"div",85),t.DNE(8,Fd,3,0,"button",86),t.nrm(9,"img",87),t.DNE(10,Od,3,0,"button",88),t.k0s(),t.j41(11,"div",89),t.EFF(12),t.k0s(),t.DNE(13,Ed,2,1,"div",90),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(6),t.JRh(e.galleryTitle),t.R7$(2),t.Y8G("ngIf",e.galleryImages.length>1),t.R7$(1),t.Y8G("src",e.galleryImages[e.galleryIndex],t.B4B),t.R7$(1),t.Y8G("ngIf",e.galleryImages.length>1),t.R7$(2),t.Lme("",e.galleryIndex+1," / ",e.galleryImages.length,""),t.R7$(1),t.Y8G("ngIf",e.galleryImages.length>1)}}let Td=(()=>{class n{constructor(e,o,i){this.parcelService=e,this.snackBar=o,this.dialog=i,this.posts=[],this.loading=!0,this.activeTab="pending",this.currentPage=0,this.totalPages=0,this.totalItems=0,this.pageSize=20,this.searchText="",this.galleryOpen=!1,this.galleryImages=[],this.galleryIndex=0,this.galleryTitle=""}ngOnInit(){this.loadPosts()}loadPosts(){this.loading=!0,("pending"===this.activeTab?this.parcelService.getPendingPosts(this.currentPage,this.pageSize):this.parcelService.getAllPosts(this.currentPage,this.pageSize,this.searchText)).subscribe({next:o=>{const i=o.data;this.posts=i?.content||[],this.totalPages=i?.totalPages||0,this.totalItems=i?.totalItems||0,this.loading=!1},error:o=>{console.error("Error loading parcel posts:",o),this.loading=!1,this.snackBar.open("Failed to load posts","Close",{duration:3e3})}})}onSearchChange(){this.currentPage=0,this.loadPosts()}switchTab(e){this.activeTab=e,this.currentPage=0,this.loadPosts()}approvePost(e){this.parcelService.approvePost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.serviceName}" approved`,"OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to approve post","Close",{duration:3e3})}})}rejectPost(e){confirm(`Reject "${e.serviceName}"?`)&&this.parcelService.rejectPost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.serviceName}" rejected`,"OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to reject post","Close",{duration:3e3})}})}deletePost(e){confirm(`Delete "${e.serviceName}" permanently?`)&&this.parcelService.deletePost(e.id).subscribe({next:()=>{this.snackBar.open("Post deleted","OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to delete post","Close",{duration:3e3})}})}editPost(e){this.dialog.open(B,{width:"600px",maxHeight:"90vh",data:{postType:"parcel",post:{...e}}}).afterClosed().subscribe(i=>{i&&this.parcelService.adminUpdatePost(e.id,i).subscribe({next:()=>{this.snackBar.open("Post updated","OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to update post","Close",{duration:3e3})}})})}toggleFeatured(e){this.parcelService.toggleFeatured(e.id).subscribe({next:o=>{const r=o.data?.featured;e.featured=r,this.snackBar.open(r?`"${e.serviceName}" marked as featured`:`"${e.serviceName}" removed from featured`,"OK",{duration:3e3})},error:()=>{this.snackBar.open("Failed to toggle featured","Close",{duration:3e3})}})}getFirstImageUrl(e){if(!e)return"";const o=e.split(",")[0]?.trim();return(0,E.V)(o||null)}getAllImageUrls(e){return e?e.split(",").map(o=>(0,E.V)(o.trim())).filter(o=>!!o):[]}getImageCount(e){return e?e.split(",").filter(o=>o.trim()).length:0}openGallery(e){this.galleryImages=this.getAllImageUrls(e.imageUrls),0!==this.galleryImages.length&&(this.galleryIndex=0,this.galleryTitle=e.serviceName,this.galleryOpen=!0)}closeGallery(){this.galleryOpen=!1,this.galleryImages=[],this.galleryIndex=0}prevImage(){this.galleryIndex=this.galleryIndex>0?this.galleryIndex-1:this.galleryImages.length-1}nextImage(){this.galleryIndex=this.galleryIndex<this.galleryImages.length-1?this.galleryIndex+1:0}getServiceTypeLabel(e){switch(e){case"DOOR_TO_DOOR":return"Door to Door";case"PICKUP_POINT":return"Pickup Point";case"BOTH":return"Both";default:return e}}getStatusColor(e){switch(e){case"PENDING_APPROVAL":case"FLAGGED":return"warn";case"APPROVED":return"primary";case"REJECTED":return"accent";default:return""}}getStatusLabel(e){switch(e){case"PENDING_APPROVAL":return"Pending";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";case"SOLD":return"Unavailable";case"FLAGGED":return"Flagged";default:return e}}formatDate(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}onPageChange(e){this.currentPage=e,this.loadPosts()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(ot),t.rXU(b.UG),t.rXU(M.bZ))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-parcel-management"]],decls:16,vars:7,consts:[[1,"parcel-management"],[1,"header"],[1,"subtitle"],[1,"tabs"],["mat-flat-button","",3,"color","click"],["class","search-filter",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","posts-container",4,"ngIf"],["class","gallery-overlay",3,"click",4,"ngIf"],[1,"search-filter"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Type location and press Enter...",3,"ngModel","ngModelChange","keyup.enter"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],["matPrefix",""],["mat-icon-button","","matSuffix","",3,"click"],[1,"loading-container"],["diameter","40"],[1,"empty-state"],[1,"empty-icon"],[4,"ngIf"],[1,"posts-container"],["mat-table","",1,"posts-table",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","serviceName"],["matColumnDef","serviceType"],["matColumnDef","route"],["matColumnDef","priceInfo"],["matColumnDef","phone"],["matColumnDef","status"],["matColumnDef","type"],["matColumnDef","featured"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","pagination",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"post-image",3,"click"],["alt","Parcel Service","loading","lazy",3,"src",4,"ngIf"],["class","no-image",4,"ngIf"],["class","image-count",4,"ngIf"],["alt","Parcel Service","loading","lazy",3,"src"],[1,"no-image"],[1,"image-count"],[1,"post-title"],["class","post-description",4,"ngIf"],[1,"post-description"],[1,"category-chip"],["class","route",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"route"],[1,"no-data"],["class","price",4,"ngIf"],[1,"price"],[1,"owner-info"],[1,"owner-name"],[1,"owner-phone"],[1,"status-badge",3,"ngClass"],["class","type-badge type-paid",4,"ngIf"],["class","type-badge type-free",4,"ngIf"],[1,"type-badge","type-paid"],[1,"badge-icon"],[1,"type-badge","type-free"],["mat-icon-button","",1,"featured-toggle",3,"matTooltip","click"],[1,"date"],[1,"action-buttons"],["mat-icon-button","","color","primary","matTooltip","Edit",3,"click"],["mat-icon-button","","color","primary","matTooltip","Approve",3,"click",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Reject",3,"click",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-icon-button","","color","primary","matTooltip","Approve",3,"click"],["mat-icon-button","","color","warn","matTooltip","Reject",3,"click"],["mat-header-row",""],["mat-row",""],[1,"pagination"],["mat-button","",3,"disabled","click"],[1,"page-info"],[1,"gallery-overlay",3,"click"],[1,"gallery-content",3,"click"],[1,"gallery-close",3,"click"],[1,"gallery-title"],[1,"gallery-image-container"],["class","gallery-nav prev",3,"click",4,"ngIf"],["alt","Parcel service photo",1,"gallery-image",3,"src"],["class","gallery-nav next",3,"click",4,"ngIf"],[1,"gallery-counter"],["class","gallery-thumbnails",4,"ngIf"],[1,"gallery-nav","prev",3,"click"],[1,"gallery-nav","next",3,"click"],[1,"gallery-thumbnails"],["alt","Thumbnail",3,"src","active","click",4,"ngFor","ngForOf"],["alt","Thumbnail",3,"src","click"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Packers & Movers Management"),t.k0s(),t.j41(4,"p",2),t.EFF(5,"Review and manage packers & movers listing posts"),t.k0s()(),t.j41(6,"div",3)(7,"button",4),t.bIt("click",function(){return i.switchTab("pending")}),t.EFF(8," Pending Approval "),t.k0s(),t.j41(9,"button",4),t.bIt("click",function(){return i.switchTab("all")}),t.EFF(10," All Posts "),t.k0s()(),t.DNE(11,Nm,8,2,"div",5),t.DNE(12,Gm,4,0,"div",6),t.DNE(13,Am,7,2,"div",7),t.DNE(14,xd,38,6,"div",8),t.DNE(15,Rd,14,7,"div",9),t.k0s()),2&o&&(t.R7$(7),t.Y8G("color","pending"===i.activeTab?"primary":void 0),t.R7$(2),t.Y8G("color","all"===i.activeTab?"primary":void 0),t.R7$(2),t.Y8G("ngIf","all"===i.activeTab),t.R7$(1),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.posts.length),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.posts.length>0),t.R7$(1),t.Y8G("ngIf",i.galleryOpen))},dependencies:[p.YU,p.Sq,p.bT,l.me,l.BC,l.vS,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,g.iY,C.An,k.fg,m.rl,m.nJ,m.JW,m.yw,R.oV,h.LG],styles:[".parcel-management[_ngcontent-%COMP%]{padding:24px}.parcel-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:24px}.parcel-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600}.parcel-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.parcel-management[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:24px}.parcel-management[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:140px}.parcel-management[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]{margin-bottom:16px}.parcel-management[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%;max-width:400px}.parcel-management[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:48px}.parcel-management[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.parcel-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:64px 24px}.parcel-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc}.parcel-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.parcel-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.parcel-management[_ngcontent-%COMP%]   .posts-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #00000014}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]{width:100%}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;background:#f5f5f5;display:flex;align-items:center;justify-content:center;position:relative}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image.clickable[_ngcontent-%COMP%]{cursor:pointer}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image.clickable[_ngcontent-%COMP%]:hover{opacity:.85}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{color:#ccc;font-size:28px}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .image-count[_ngcontent-%COMP%]{position:absolute;bottom:2px;right:2px;background:rgba(0,0,0,.7);color:#fff;font-size:10px;font-weight:600;padding:1px 5px;border-radius:8px;line-height:1.4}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#333}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-description[_ngcontent-%COMP%]{font-size:12px;color:#888;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:500;background:#fff3e0;color:#e65100}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .route[_ngcontent-%COMP%]{font-size:13px;color:#555}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:13px;color:#555;font-weight:500}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{color:#ccc}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]   .owner-name[_ngcontent-%COMP%]{font-weight:500;font-size:13px}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .owner-info[_ngcontent-%COMP%]   .owner-phone[_ngcontent-%COMP%]{font-size:12px;color:#666}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;font-size:12px;font-weight:500;white-space:nowrap}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-pending_approval[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-approved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-sold[_ngcontent-%COMP%]{background:#f3e5f5;color:#6a1b9a}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-flagged[_ngcontent-%COMP%]{background:#fce4ec;color:#b71c1c}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#888;white-space:nowrap}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:2px}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:3px;padding:3px 10px;border-radius:12px;font-size:11px;font-weight:600;letter-spacing:.5px}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]   .badge-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-paid[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32;border:1px solid #a5d6a7}.parcel-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-free[_ngcontent-%COMP%]{background:#f5f5f5;color:#9e9e9e;border:1px solid #e0e0e0}.parcel-management[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:16px;border-top:1px solid #eee}.parcel-management[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:13px;color:#666}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.9);z-index:9999;display:flex;align-items:center;justify-content:center}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-content[_ngcontent-%COMP%]{position:relative;max-width:90vw;max-height:90vh;display:flex;flex-direction:column;align-items:center}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-close[_ngcontent-%COMP%]{position:absolute;top:-40px;right:-10px;background:none;border:none;color:#fff;cursor:pointer;z-index:10}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-close[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-title[_ngcontent-%COMP%]{color:#fff;font-size:16px;font-weight:500;margin-bottom:12px;text-align:center}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-image[_ngcontent-%COMP%]{max-width:80vw;max-height:65vh;object-fit:contain;border-radius:8px}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,.15);border:none;color:#fff;cursor:pointer;border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;transition:background .2s}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.3)}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav.prev[_ngcontent-%COMP%]{left:-56px}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav.next[_ngcontent-%COMP%]{right:-56px}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-nav[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-counter[_ngcontent-%COMP%]{color:#ffffffb3;font-size:13px;margin-top:10px}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px;overflow-x:auto;max-width:80vw;padding:4px 0}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:56px;height:56px;object-fit:cover;border-radius:6px;cursor:pointer;opacity:.5;border:2px solid transparent;transition:opacity .2s,border-color .2s}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   img.active[_ngcontent-%COMP%]{opacity:1;border-color:#fff}.parcel-management[_ngcontent-%COMP%]   .gallery-overlay[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{opacity:.8}"]})}}return n})();function yd(n,a){1&n&&(t.j41(0,"div",7),t.nrm(1,"mat-spinner",8),t.j41(2,"p"),t.EFF(3,"Loading reported posts..."),t.k0s()())}function jd(n,a){1&n&&(t.j41(0,"div",9)(1,"mat-icon",10),t.EFF(2,"verified"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No reported posts"),t.k0s(),t.j41(5,"p"),t.EFF(6,"All clear! No packers & movers posts have been reported by users."),t.k0s()())}function Dd(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Image"),t.k0s())}function $d(n,a){if(1&n&&t.nrm(0,"img",32),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.Y8G("src",o.getImageUrl(e.imageUrls),t.B4B)}}function Id(n,a){1&n&&(t.j41(0,"mat-icon",33),t.EFF(1,"local_shipping"),t.k0s())}function Nd(n,a){if(1&n&&(t.j41(0,"td",28)(1,"div",29),t.DNE(2,$d,1,1,"img",30),t.DNE(3,Id,2,0,"mat-icon",31),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.imageUrls),t.R7$(1),t.Y8G("ngIf",!e.imageUrls)}}function Gd(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Service Name"),t.k0s())}function wd(n,a){if(1&n&&(t.j41(0,"div",36),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function Sd(n,a){if(1&n&&(t.j41(0,"td",28)(1,"div",34),t.EFF(2),t.k0s(),t.DNE(3,wd,2,1,"div",35),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.serviceName),t.R7$(1),t.Y8G("ngIf",e.description)}}function Ad(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Reports"),t.k0s())}function Vd(n,a){if(1&n&&(t.j41(0,"td",28)(1,"span",37)(2,"mat-icon",38),t.EFF(3,"flag"),t.k0s(),t.EFF(4),t.k0s()()),2&n){const e=a.$implicit;t.R7$(1),t.AVh("high",e.reportCount>=3),t.R7$(3),t.SpI(" ",e.reportCount," ")}}function Ld(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Service Type"),t.k0s())}function Bd(n,a){if(1&n&&(t.j41(0,"td",28)(1,"span",39),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.getServiceTypeLabel(e.serviceType))}}function Yd(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Phone"),t.k0s())}function Ud(n,a){if(1&n&&(t.j41(0,"td",28)(1,"div",40)(2,"span",41),t.EFF(3),t.k0s(),t.j41(4,"span",42),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.phone)}}function Xd(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Status"),t.k0s())}function zd(n,a){if(1&n&&(t.j41(0,"td",28)(1,"span",43),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.SpI(" ",o.getStatusLabel(e.status)," ")}}function Jd(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Date"),t.k0s())}function qd(n,a){if(1&n&&(t.j41(0,"td",28)(1,"span",44),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function Hd(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Action"),t.k0s())}function Kd(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",48),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,d=t.XpG(2);return t.Njj(d.onStatusChange(c,r.value))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.xc7("color",e.color),t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function Qd(n,a){if(1&n&&(t.j41(0,"td",28)(1,"button",45),t.EFF(2," Change Status "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",null,46),t.DNE(7,Kd,5,4,"button",47),t.k0s()()),2&n){const e=a.$implicit,o=t.sdS(6),i=t.XpG(2);t.R7$(1),t.Y8G("matMenuTriggerFor",o),t.R7$(6),t.Y8G("ngForOf",i.getAvailableStatuses(e))}}function Wd(n,a){1&n&&t.nrm(0,"tr",49)}function Zd(n,a){1&n&&t.nrm(0,"tr",50)}function tg(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",51)(1,"button",52),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage-1))}),t.j41(2,"mat-icon"),t.EFF(3,"chevron_left"),t.k0s(),t.EFF(4," Previous "),t.k0s(),t.j41(5,"span",53),t.EFF(6),t.k0s(),t.j41(7,"button",52),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage+1))}),t.EFF(8," Next "),t.j41(9,"mat-icon"),t.EFF(10,"chevron_right"),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("disabled",0===e.currentPage),t.R7$(5),t.E5c("Page ",e.currentPage+1," of ",e.totalPages," (",e.totalItems," posts)"),t.R7$(1),t.Y8G("disabled",e.currentPage>=e.totalPages-1)}}const vt=function(){return["image","serviceName","reports","serviceType","phone","status","date","actions"]};function eg(n,a){if(1&n&&(t.j41(0,"div",11)(1,"div",12)(2,"mat-icon"),t.EFF(3,"flag"),t.k0s(),t.j41(4,"span"),t.EFF(5),t.k0s()(),t.j41(6,"table",13),t.qex(7,14),t.DNE(8,Dd,2,0,"th",15),t.DNE(9,Nd,4,2,"td",16),t.bVm(),t.qex(10,17),t.DNE(11,Gd,2,0,"th",15),t.DNE(12,Sd,4,2,"td",16),t.bVm(),t.qex(13,18),t.DNE(14,Ad,2,0,"th",15),t.DNE(15,Vd,5,3,"td",16),t.bVm(),t.qex(16,19),t.DNE(17,Ld,2,0,"th",15),t.DNE(18,Bd,3,1,"td",16),t.bVm(),t.qex(19,20),t.DNE(20,Yd,2,0,"th",15),t.DNE(21,Ud,6,2,"td",16),t.bVm(),t.qex(22,21),t.DNE(23,Xd,2,0,"th",15),t.DNE(24,zd,3,2,"td",16),t.bVm(),t.qex(25,22),t.DNE(26,Jd,2,0,"th",15),t.DNE(27,qd,3,1,"td",16),t.bVm(),t.qex(28,23),t.DNE(29,Hd,2,0,"th",15),t.DNE(30,Qd,8,2,"td",16),t.bVm(),t.DNE(31,Wd,1,0,"tr",24),t.DNE(32,Zd,1,0,"tr",25),t.k0s(),t.DNE(33,tg,11,5,"div",26),t.k0s()),2&n){const e=t.XpG();t.R7$(5),t.Lme("",e.totalItems," reported post",e.totalItems>1?"s":"",""),t.R7$(1),t.Y8G("dataSource",e.posts),t.R7$(25),t.Y8G("matHeaderRowDef",t.lJ4(6,vt)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(7,vt)),t.R7$(1),t.Y8G("ngIf",e.totalPages>1)}}let ng=(()=>{class n{constructor(e,o){this.parcelService=e,this.snackBar=o,this.posts=[],this.loading=!0,this.currentPage=0,this.totalPages=0,this.totalItems=0,this.pageSize=20,this.statusOptions=[{value:"APPROVED",label:"Approve",icon:"check_circle",color:"#4caf50"},{value:"REJECTED",label:"Reject",icon:"cancel",color:"#f44336"},{value:"HOLD",label:"Hold",icon:"pause_circle",color:"#ff9800"},{value:"HIDDEN",label:"Hide",icon:"visibility_off",color:"#9e9e9e"},{value:"CORRECTION_REQUIRED",label:"Correction Required",icon:"edit_note",color:"#2196f3"},{value:"REMOVED",label:"Remove",icon:"delete_forever",color:"#b71c1c"}]}ngOnInit(){this.loadReportedPosts()}loadReportedPosts(){this.loading=!0,this.parcelService.getReportedPosts(this.currentPage,this.pageSize).subscribe({next:e=>{const o=e.data;this.posts=o?.content||[],this.totalPages=o?.totalPages||0,this.totalItems=o?.totalItems||0,this.loading=!1},error:e=>{console.error("Error loading reported parcel posts:",e),this.loading=!1,this.snackBar.open("Failed to load reported posts","Close",{duration:3e3})}})}onStatusChange(e,o){if("REMOVED"===o){if(!confirm(`Remove "${e.serviceName}" permanently? This will delete the post.`))return;return void this.parcelService.deletePost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.serviceName}" removed`,"OK",{duration:3e3}),this.loadReportedPosts()},error:()=>{this.snackBar.open("Failed to remove post","Close",{duration:3e3})}})}const r=this.statusOptions.find(c=>c.value===o)?.label||o;this.parcelService.changePostStatus(e.id,o).subscribe({next:()=>{this.snackBar.open(`"${e.serviceName}" \u2192 ${r}`,"OK",{duration:3e3}),this.loadReportedPosts()},error:()=>{this.snackBar.open(`Failed to change status to ${r}`,"Close",{duration:3e3})}})}getImageUrl(e){if(!e)return"";const o=e.split(",")[0]?.trim();return(0,E.V)(o||null)}getServiceTypeLabel(e){switch(e){case"DOOR_TO_DOOR":return"Door to Door";case"PICKUP_POINT":return"Pickup Point";case"BOTH":return"Both";default:return e}}getStatusLabel(e){switch(e){case"FLAGGED":return"Flagged";case"PENDING_APPROVAL":return"Pending";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";case"SOLD":return"Unavailable";case"HOLD":return"On Hold";case"HIDDEN":return"Hidden";case"CORRECTION_REQUIRED":return"Correction Required";case"REMOVED":return"Removed";default:return e}}getAvailableStatuses(e){return this.statusOptions.filter(o=>o.value!==e.status)}formatDate(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}onPageChange(e){this.currentPage=e,this.loadReportedPosts()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(ot),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-parcel-reported"]],decls:11,vars:3,consts:[[1,"parcel-reported"],[1,"header"],[1,"header-icon"],[1,"subtitle"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","posts-container",4,"ngIf"],[1,"loading-container"],["diameter","40"],[1,"empty-state"],[1,"empty-icon"],[1,"posts-container"],[1,"total-info"],["mat-table","",1,"posts-table",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","serviceName"],["matColumnDef","reports"],["matColumnDef","serviceType"],["matColumnDef","phone"],["matColumnDef","status"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","pagination",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"post-image"],["alt","Parcel Service","loading","lazy",3,"src",4,"ngIf"],["class","no-image",4,"ngIf"],["alt","Parcel Service","loading","lazy",3,"src"],[1,"no-image"],[1,"post-title"],["class","post-description",4,"ngIf"],[1,"post-description"],[1,"report-count"],[1,"report-icon"],[1,"category-chip"],[1,"seller-info"],[1,"seller-name"],[1,"seller-phone"],[1,"status-badge",3,"ngClass"],[1,"date"],["mat-stroked-button","",1,"action-dropdown",3,"matMenuTriggerFor"],["statusMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"pagination"],["mat-button","",3,"disabled","click"],[1,"page-info"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2")(3,"mat-icon",2),t.EFF(4,"report"),t.k0s(),t.EFF(5," Reported Packers & Movers Posts "),t.k0s(),t.j41(6,"p",3),t.EFF(7,"Packers & movers posts reported by users - review and take action"),t.k0s()(),t.DNE(8,yd,4,0,"div",4),t.DNE(9,jd,7,0,"div",5),t.DNE(10,eg,34,8,"div",6),t.k0s()),2&o&&(t.R7$(8),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.posts.length),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.posts.length>0))},dependencies:[p.YU,p.Sq,p.bT,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,C.An,h.LG,f.kk,f.fb,f.Cp],styles:[".parcel-reported[_ngcontent-%COMP%]{padding:24px}.parcel-reported[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:24px}.parcel-reported[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;display:flex;align-items:center;gap:8px}.parcel-reported[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{color:#e65100}.parcel-reported[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.parcel-reported[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:48px}.parcel-reported[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.parcel-reported[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:64px 24px}.parcel-reported[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#4caf50}.parcel-reported[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.parcel-reported[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.parcel-reported[_ngcontent-%COMP%]   .posts-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #00000014}.parcel-reported[_ngcontent-%COMP%]   .total-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px 24px;background:#fff3e0;color:#e65100;font-weight:500;font-size:14px;border-bottom:1px solid #ffe0b2}.parcel-reported[_ngcontent-%COMP%]   .total-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]{width:100%}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;background:#f5f5f5;display:flex;align-items:center;justify-content:center}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{color:#ccc;font-size:28px}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#333}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-description[_ngcontent-%COMP%]{font-size:12px;color:#888;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;background:#fff3e0;color:#e65100;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count[_ngcontent-%COMP%]   .report-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count.high[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100;padding:2px 10px;border-radius:12px;font-size:12px;font-weight:500}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-name[_ngcontent-%COMP%]{font-weight:500;font-size:13px}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-phone[_ngcontent-%COMP%]{font-size:12px;color:#666}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;font-size:12px;font-weight:500;white-space:nowrap}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-flagged[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-pending_approval[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-approved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-sold[_ngcontent-%COMP%]{background:#f3e5f5;color:#6a1b9a}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hold[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hidden[_ngcontent-%COMP%]{background:#eceff1;color:#546e7a}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-correction_required[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-removed[_ngcontent-%COMP%]{background:#fce4ec;color:#b71c1c}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#888;white-space:nowrap}.parcel-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .action-dropdown[_ngcontent-%COMP%]{font-size:13px;white-space:nowrap}.parcel-reported[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:16px;border-top:1px solid #eee}.parcel-reported[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:13px;color:#666}"]})}}return n})(),og=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/admin/post-dashboard`}getStats(){return this.http.get(`${this.apiUrl}/stats`)}getFeaturedPosts(){return this.http.get(`${F.c.apiUrl}/featured-posts`)}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ag(n,a){if(1&n&&(t.j41(0,"span",12),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI("",e.getFeaturedCount()," items")}}function ig(n,a){1&n&&(t.j41(0,"div",13),t.nrm(1,"mat-spinner",14),t.k0s())}function rg(n,a){if(1&n&&(t.j41(0,"div",15)(1,"mat-icon"),t.EFF(2,"error_outline"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG();t.R7$(4),t.JRh(e.featuredError)}}function sg(n,a){1&n&&(t.j41(0,"span",32),t.EFF(1,"PAID"),t.k0s())}function cg(n,a){if(1&n&&(t.j41(0,"div",33),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.SpI(" ",e.comboPrice?"\u20b9"+e.comboPrice:e.price?"\u20b9"+e.price:e.priceInfo," ")}}function lg(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",26),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2).$implicit,r=t.XpG(2);return t.Njj(r.navigateTo(r.getCategoryRoute(i)))}),t.j41(1,"div",27)(2,"div",28),t.EFF(3),t.k0s(),t.DNE(4,sg,2,0,"span",29),t.k0s(),t.j41(5,"div",30),t.EFF(6),t.k0s(),t.DNE(7,cg,2,1,"div",31),t.k0s()}if(2&n){const e=a.$implicit,o=t.XpG(2).$implicit,i=t.XpG(2);t.R7$(3),t.JRh(i.getPostTitle(e,o)),t.R7$(1),t.Y8G("ngIf",e.isPaid),t.R7$(2),t.JRh(i.getPostSubtitle(e,o)),t.R7$(1),t.Y8G("ngIf",e.price||e.comboPrice||e.priceInfo)}}function pg(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",20)(1,"div",21),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.navigateTo(r.getCategoryRoute(i)))}),t.j41(2,"mat-icon"),t.EFF(3),t.k0s(),t.j41(4,"span",22),t.EFF(5),t.k0s(),t.j41(6,"span",23),t.EFF(7),t.k0s()(),t.j41(8,"div",24),t.DNE(9,lg,8,4,"div",25),t.k0s()()}if(2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(3),t.JRh(o.getCategoryIcon(e)),t.R7$(2),t.JRh(o.getCategoryLabel(e)),t.R7$(2),t.JRh(o.featuredPosts[e].length),t.R7$(2),t.Y8G("ngForOf",o.featuredPosts[e])}}function mg(n,a){if(1&n&&(t.qex(0),t.DNE(1,pg,10,4,"div",19),t.bVm()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngIf",(null==o.featuredPosts[e]?null:o.featuredPosts[e].length)>0)}}function dg(n,a){1&n&&(t.j41(0,"div",34)(1,"mat-icon"),t.EFF(2,"star_border"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No featured posts available"),t.k0s()())}const gg=function(){return["combos","marketplace","farmer","labour","travel","parcel","realEstate","rental"]};function _g(n,a){if(1&n&&(t.j41(0,"div",16),t.DNE(1,mg,2,1,"ng-container",17),t.DNE(2,dg,5,0,"div",18),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",t.lJ4(2,gg)),t.R7$(1),t.Y8G("ngIf",0===e.getFeaturedCount())}}function ug(n,a){1&n&&(t.j41(0,"div",35),t.nrm(1,"mat-spinner",36),t.j41(2,"p"),t.EFF(3,"Loading dashboard stats..."),t.k0s()())}function fg(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",37)(1,"mat-icon"),t.EFF(2,"error_outline"),t.k0s(),t.j41(3,"p"),t.EFF(4),t.k0s(),t.j41(5,"button",38),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.loadStats())}),t.EFF(6,"Retry"),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(4),t.JRh(e.errorMessage)}}function Cg(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",39)(1,"div",40)(2,"h3")(3,"mat-icon"),t.EFF(4,"construction"),t.k0s(),t.EFF(5," Labour Posts"),t.k0s(),t.j41(6,"div",41)(7,"div",42),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/labours"))}),t.j41(8,"div",43),t.EFF(9),t.k0s(),t.j41(10,"div",44),t.EFF(11,"Total"),t.k0s(),t.j41(12,"mat-icon",45),t.EFF(13,"assessment"),t.k0s()(),t.j41(14,"div",46),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/labours"))}),t.j41(15,"div",43),t.EFF(16),t.k0s(),t.j41(17,"div",44),t.EFF(18,"Pending"),t.k0s(),t.j41(19,"mat-icon",45),t.EFF(20,"hourglass_empty"),t.k0s()(),t.j41(21,"div",47),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/labours"))}),t.j41(22,"div",43),t.EFF(23),t.k0s(),t.j41(24,"div",44),t.EFF(25,"Approved"),t.k0s(),t.j41(26,"mat-icon",45),t.EFF(27,"check_circle"),t.k0s()(),t.j41(28,"div",48),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/labours"))}),t.j41(29,"div",43),t.EFF(30),t.k0s(),t.j41(31,"div",44),t.EFF(32,"Rejected"),t.k0s(),t.j41(33,"mat-icon",45),t.EFF(34,"cancel"),t.k0s()(),t.j41(35,"div",49),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/labours/reported"))}),t.j41(36,"div",43),t.EFF(37),t.k0s(),t.j41(38,"div",44),t.EFF(39,"Reported"),t.k0s(),t.j41(40,"mat-icon",45),t.EFF(41,"report"),t.k0s()()()(),t.j41(42,"div",50)(43,"h3")(44,"mat-icon"),t.EFF(45,"directions_car"),t.k0s(),t.EFF(46," Travel Posts"),t.k0s(),t.j41(47,"div",41)(48,"div",42),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/travels"))}),t.j41(49,"div",43),t.EFF(50),t.k0s(),t.j41(51,"div",44),t.EFF(52,"Total"),t.k0s(),t.j41(53,"mat-icon",45),t.EFF(54,"assessment"),t.k0s()(),t.j41(55,"div",46),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/travels"))}),t.j41(56,"div",43),t.EFF(57),t.k0s(),t.j41(58,"div",44),t.EFF(59,"Pending"),t.k0s(),t.j41(60,"mat-icon",45),t.EFF(61,"hourglass_empty"),t.k0s()(),t.j41(62,"div",47),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/travels"))}),t.j41(63,"div",43),t.EFF(64),t.k0s(),t.j41(65,"div",44),t.EFF(66,"Approved"),t.k0s(),t.j41(67,"mat-icon",45),t.EFF(68,"check_circle"),t.k0s()(),t.j41(69,"div",48),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/travels"))}),t.j41(70,"div",43),t.EFF(71),t.k0s(),t.j41(72,"div",44),t.EFF(73,"Rejected"),t.k0s(),t.j41(74,"mat-icon",45),t.EFF(75,"cancel"),t.k0s()(),t.j41(76,"div",49),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/travels/reported"))}),t.j41(77,"div",43),t.EFF(78),t.k0s(),t.j41(79,"div",44),t.EFF(80,"Reported"),t.k0s(),t.j41(81,"mat-icon",45),t.EFF(82,"report"),t.k0s()()()(),t.j41(83,"div",51)(84,"h3")(85,"mat-icon"),t.EFF(86,"local_shipping"),t.k0s(),t.EFF(87," Packers & Movers Posts"),t.k0s(),t.j41(88,"div",41)(89,"div",42),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/parcels"))}),t.j41(90,"div",43),t.EFF(91),t.k0s(),t.j41(92,"div",44),t.EFF(93,"Total"),t.k0s(),t.j41(94,"mat-icon",45),t.EFF(95,"assessment"),t.k0s()(),t.j41(96,"div",46),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/parcels"))}),t.j41(97,"div",43),t.EFF(98),t.k0s(),t.j41(99,"div",44),t.EFF(100,"Pending"),t.k0s(),t.j41(101,"mat-icon",45),t.EFF(102,"hourglass_empty"),t.k0s()(),t.j41(103,"div",47),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/parcels"))}),t.j41(104,"div",43),t.EFF(105),t.k0s(),t.j41(106,"div",44),t.EFF(107,"Approved"),t.k0s(),t.j41(108,"mat-icon",45),t.EFF(109,"check_circle"),t.k0s()(),t.j41(110,"div",48),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/parcels"))}),t.j41(111,"div",43),t.EFF(112),t.k0s(),t.j41(113,"div",44),t.EFF(114,"Rejected"),t.k0s(),t.j41(115,"mat-icon",45),t.EFF(116,"cancel"),t.k0s()(),t.j41(117,"div",49),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/parcels/reported"))}),t.j41(118,"div",43),t.EFF(119),t.k0s(),t.j41(120,"div",44),t.EFF(121,"Reported"),t.k0s(),t.j41(122,"mat-icon",45),t.EFF(123,"report"),t.k0s()()()(),t.j41(124,"div",52)(125,"h3")(126,"mat-icon"),t.EFF(127,"store"),t.k0s(),t.EFF(128," Marketplace Posts"),t.k0s(),t.j41(129,"div",41)(130,"div",42),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/marketplace"))}),t.j41(131,"div",43),t.EFF(132),t.k0s(),t.j41(133,"div",44),t.EFF(134,"Total"),t.k0s(),t.j41(135,"mat-icon",45),t.EFF(136,"assessment"),t.k0s()(),t.j41(137,"div",46),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/marketplace"))}),t.j41(138,"div",43),t.EFF(139),t.k0s(),t.j41(140,"div",44),t.EFF(141,"Pending"),t.k0s(),t.j41(142,"mat-icon",45),t.EFF(143,"hourglass_empty"),t.k0s()(),t.j41(144,"div",47),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/marketplace"))}),t.j41(145,"div",43),t.EFF(146),t.k0s(),t.j41(147,"div",44),t.EFF(148,"Approved"),t.k0s(),t.j41(149,"mat-icon",45),t.EFF(150,"check_circle"),t.k0s()(),t.j41(151,"div",48),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/marketplace"))}),t.j41(152,"div",43),t.EFF(153),t.k0s(),t.j41(154,"div",44),t.EFF(155,"Rejected"),t.k0s(),t.j41(156,"mat-icon",45),t.EFF(157,"cancel"),t.k0s()(),t.j41(158,"div",49),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/marketplace/reported"))}),t.j41(159,"div",43),t.EFF(160),t.k0s(),t.j41(161,"div",44),t.EFF(162,"Reported"),t.k0s(),t.j41(163,"mat-icon",45),t.EFF(164,"report"),t.k0s()()()(),t.j41(165,"div",53)(166,"h3")(167,"mat-icon"),t.EFF(168,"agriculture"),t.k0s(),t.EFF(169," Farmer Product Posts"),t.k0s(),t.j41(170,"div",41)(171,"div",42),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/farmer-products"))}),t.j41(172,"div",43),t.EFF(173),t.k0s(),t.j41(174,"div",44),t.EFF(175,"Total"),t.k0s(),t.j41(176,"mat-icon",45),t.EFF(177,"assessment"),t.k0s()(),t.j41(178,"div",46),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/farmer-products"))}),t.j41(179,"div",43),t.EFF(180),t.k0s(),t.j41(181,"div",44),t.EFF(182,"Pending"),t.k0s(),t.j41(183,"mat-icon",45),t.EFF(184,"hourglass_empty"),t.k0s()(),t.j41(185,"div",47),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/farmer-products"))}),t.j41(186,"div",43),t.EFF(187),t.k0s(),t.j41(188,"div",44),t.EFF(189,"Approved"),t.k0s(),t.j41(190,"mat-icon",45),t.EFF(191,"check_circle"),t.k0s()(),t.j41(192,"div",48),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/farmer-products"))}),t.j41(193,"div",43),t.EFF(194),t.k0s(),t.j41(195,"div",44),t.EFF(196,"Rejected"),t.k0s(),t.j41(197,"mat-icon",45),t.EFF(198,"cancel"),t.k0s()(),t.j41(199,"div",49),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/farmer-products/reported"))}),t.j41(200,"div",43),t.EFF(201),t.k0s(),t.j41(202,"div",44),t.EFF(203,"Reported"),t.k0s(),t.j41(204,"mat-icon",45),t.EFF(205,"report"),t.k0s()()()(),t.j41(206,"div",54)(207,"h3")(208,"mat-icon"),t.EFF(209,"home"),t.k0s(),t.EFF(210," Real Estate Posts"),t.k0s(),t.j41(211,"div",41)(212,"div",42),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/real-estate"))}),t.j41(213,"div",43),t.EFF(214),t.k0s(),t.j41(215,"div",44),t.EFF(216,"Total"),t.k0s(),t.j41(217,"mat-icon",45),t.EFF(218,"assessment"),t.k0s()(),t.j41(219,"div",46),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/real-estate"))}),t.j41(220,"div",43),t.EFF(221),t.k0s(),t.j41(222,"div",44),t.EFF(223,"Pending"),t.k0s(),t.j41(224,"mat-icon",45),t.EFF(225,"hourglass_empty"),t.k0s()(),t.j41(226,"div",47),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/real-estate"))}),t.j41(227,"div",43),t.EFF(228),t.k0s(),t.j41(229,"div",44),t.EFF(230,"Approved"),t.k0s(),t.j41(231,"mat-icon",45),t.EFF(232,"check_circle"),t.k0s()(),t.j41(233,"div",48),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/real-estate"))}),t.j41(234,"div",43),t.EFF(235),t.k0s(),t.j41(236,"div",44),t.EFF(237,"Rejected"),t.k0s(),t.j41(238,"mat-icon",45),t.EFF(239,"cancel"),t.k0s()(),t.j41(240,"div",49),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/real-estate/reported"))}),t.j41(241,"div",43),t.EFF(242),t.k0s(),t.j41(243,"div",44),t.EFF(244,"Reported"),t.k0s(),t.j41(245,"mat-icon",45),t.EFF(246,"report"),t.k0s()()()(),t.j41(247,"div",55)(248,"h3")(249,"mat-icon"),t.EFF(250,"vpn_key"),t.k0s(),t.EFF(251," Rental Posts"),t.k0s(),t.j41(252,"div",41)(253,"div",42),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/rentals"))}),t.j41(254,"div",43),t.EFF(255),t.k0s(),t.j41(256,"div",44),t.EFF(257,"Total"),t.k0s(),t.j41(258,"mat-icon",45),t.EFF(259,"assessment"),t.k0s()(),t.j41(260,"div",46),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/rentals"))}),t.j41(261,"div",43),t.EFF(262),t.k0s(),t.j41(263,"div",44),t.EFF(264,"Pending"),t.k0s(),t.j41(265,"mat-icon",45),t.EFF(266,"hourglass_empty"),t.k0s()(),t.j41(267,"div",47),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/rentals"))}),t.j41(268,"div",43),t.EFF(269),t.k0s(),t.j41(270,"div",44),t.EFF(271,"Approved"),t.k0s(),t.j41(272,"mat-icon",45),t.EFF(273,"check_circle"),t.k0s()(),t.j41(274,"div",48),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/rentals"))}),t.j41(275,"div",43),t.EFF(276),t.k0s(),t.j41(277,"div",44),t.EFF(278,"Rejected"),t.k0s(),t.j41(279,"mat-icon",45),t.EFF(280,"cancel"),t.k0s()(),t.j41(281,"div",49),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.navigateTo("/admin/rentals/reported"))}),t.j41(282,"div",43),t.EFF(283),t.k0s(),t.j41(284,"div",44),t.EFF(285,"Reported"),t.k0s(),t.j41(286,"mat-icon",45),t.EFF(287,"report"),t.k0s()()()()()}if(2&n){const e=t.XpG();t.R7$(9),t.JRh(e.labourStats.total),t.R7$(7),t.JRh(e.labourStats.pending),t.R7$(7),t.JRh(e.labourStats.approved),t.R7$(7),t.JRh(e.labourStats.rejected),t.R7$(7),t.JRh(e.labourStats.reported),t.R7$(13),t.JRh(e.travelStats.total),t.R7$(7),t.JRh(e.travelStats.pending),t.R7$(7),t.JRh(e.travelStats.approved),t.R7$(7),t.JRh(e.travelStats.rejected),t.R7$(7),t.JRh(e.travelStats.reported),t.R7$(13),t.JRh(e.parcelStats.total),t.R7$(7),t.JRh(e.parcelStats.pending),t.R7$(7),t.JRh(e.parcelStats.approved),t.R7$(7),t.JRh(e.parcelStats.rejected),t.R7$(7),t.JRh(e.parcelStats.reported),t.R7$(13),t.JRh(e.marketplaceStats.total),t.R7$(7),t.JRh(e.marketplaceStats.pending),t.R7$(7),t.JRh(e.marketplaceStats.approved),t.R7$(7),t.JRh(e.marketplaceStats.rejected),t.R7$(7),t.JRh(e.marketplaceStats.reported),t.R7$(13),t.JRh(e.farmerStats.total),t.R7$(7),t.JRh(e.farmerStats.pending),t.R7$(7),t.JRh(e.farmerStats.approved),t.R7$(7),t.JRh(e.farmerStats.rejected),t.R7$(7),t.JRh(e.farmerStats.reported),t.R7$(13),t.JRh(e.realEstateStats.total),t.R7$(7),t.JRh(e.realEstateStats.pending),t.R7$(7),t.JRh(e.realEstateStats.approved),t.R7$(7),t.JRh(e.realEstateStats.rejected),t.R7$(7),t.JRh(e.realEstateStats.reported),t.R7$(13),t.JRh(e.rentalStats.total),t.R7$(7),t.JRh(e.rentalStats.pending),t.R7$(7),t.JRh(e.rentalStats.approved),t.R7$(7),t.JRh(e.rentalStats.rejected),t.R7$(7),t.JRh(e.rentalStats.reported)}}let hg=(()=>{class n{constructor(e,o){this.dashboardService=e,this.router=o,this.labourStats={total:0,pending:0,approved:0,rejected:0,reported:0},this.travelStats={total:0,pending:0,approved:0,rejected:0,reported:0},this.parcelStats={total:0,pending:0,approved:0,rejected:0,reported:0},this.marketplaceStats={total:0,pending:0,approved:0,rejected:0,reported:0},this.farmerStats={total:0,pending:0,approved:0,rejected:0,reported:0},this.realEstateStats={total:0,pending:0,approved:0,rejected:0,reported:0},this.rentalStats={total:0,pending:0,approved:0,rejected:0,reported:0},this.isLoading=!0,this.errorMessage="",this.featuredPosts={},this.featuredLoading=!1,this.featuredError=""}ngOnInit(){this.loadStats(),this.loadFeaturedPosts()}loadStats(){this.isLoading=!0,this.errorMessage="",this.dashboardService.getStats().subscribe({next:e=>{const o=e.data||e;this.labourStats=o.labour||this.labourStats,this.travelStats=o.travel||this.travelStats,this.parcelStats=o.parcel||this.parcelStats,this.marketplaceStats=o.marketplace||this.marketplaceStats,this.farmerStats=o.farmer||this.farmerStats,this.realEstateStats=o.realEstate||this.realEstateStats,this.rentalStats=o.rental||this.rentalStats,this.isLoading=!1},error:e=>{this.errorMessage="Failed to load dashboard stats",this.isLoading=!1,console.error("Dashboard stats error:",e)}})}loadFeaturedPosts(){this.featuredLoading=!0,this.featuredError="",this.dashboardService.getFeaturedPosts().subscribe({next:e=>{this.featuredPosts=e.data||e||{},this.featuredLoading=!1},error:e=>{this.featuredError="Failed to load featured posts",this.featuredLoading=!1,console.error("Featured posts error:",e)}})}getFeaturedCount(){let e=0;for(const o of Object.keys(this.featuredPosts)){const i=this.featuredPosts[o];Array.isArray(i)&&(e+=i.length)}return e}getCategoryLabel(e){return{combos:"Combos",marketplace:"Marketplace",farmer:"Farmer Products",labour:"Labour",travel:"Travel",parcel:"Packers & Movers",realEstate:"Real Estate",rental:"Rentals"}[e]||e}getCategoryIcon(e){return{combos:"local_offer",marketplace:"store",farmer:"agriculture",labour:"construction",travel:"directions_car",parcel:"local_shipping",realEstate:"home",rental:"vpn_key"}[e]||"article"}getCategoryRoute(e){return{marketplace:"/admin/marketplace",farmer:"/admin/farmer-products",labour:"/admin/labours",travel:"/admin/travels",parcel:"/admin/parcels",realEstate:"/admin/real-estate",rental:"/admin/rentals"}[e]||""}getPostTitle(e,o){return"combos"===o?e.name||"Combo":"labour"===o?e.name||"Labour Post":"parcel"===o?e.serviceName||"Packers & Movers":e.title||"Post"}getPostSubtitle(e,o){return"combos"===o?e.shopName?`by ${e.shopName}`:"":"labour"===o?this.formatEnumValue(e.category||""):"travel"===o||"parcel"===o?[e.fromLocation,e.toLocation].filter(Boolean).join(" \u2192 "):"realEstate"===o?this.formatEnumValue(e.propertyType||""):e.category?this.formatEnumValue(e.category):e.location||""}formatEnumValue(e){return e?e.replaceAll("_"," ").split(" ").map(o=>o.length>0?o[0].toUpperCase()+o.substring(1).toLowerCase():o).join(" "):""}navigateTo(e){e&&this.router.navigate([e])}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(og),t.rXU(A.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-post-dashboard"]],decls:20,vars:7,consts:[[1,"post-dashboard"],[1,"dashboard-header"],["mat-icon-button","","matTooltip","Refresh",3,"click"],[1,"featured-section"],[1,"featured-header"],["class","featured-count",4,"ngIf"],["class","featured-loading",4,"ngIf"],["class","featured-error",4,"ngIf"],["class","featured-grid",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","stats-grid",4,"ngIf"],[1,"featured-count"],[1,"featured-loading"],["diameter","28"],[1,"featured-error"],[1,"featured-grid"],[4,"ngFor","ngForOf"],["class","no-featured",4,"ngIf"],["class","featured-category",4,"ngIf"],[1,"featured-category"],[1,"category-header",3,"click"],[1,"category-name"],[1,"category-count"],[1,"featured-items"],["class","featured-item",3,"click",4,"ngFor","ngForOf"],[1,"featured-item",3,"click"],[1,"item-row"],[1,"item-title"],["class","paid-badge",4,"ngIf"],[1,"item-subtitle"],["class","item-price",4,"ngIf"],[1,"paid-badge"],[1,"item-price"],[1,"no-featured"],[1,"loading-container"],["diameter","40"],[1,"error-container"],["mat-raised-button","","color","primary",3,"click"],[1,"stats-grid"],[1,"section","labour-section"],[1,"cards-row"],[1,"stat-card","total",3,"click"],[1,"stat-value"],[1,"stat-label"],[1,"card-icon"],[1,"stat-card","pending",3,"click"],[1,"stat-card","approved",3,"click"],[1,"stat-card","rejected",3,"click"],[1,"stat-card","reported",3,"click"],[1,"section","travel-section"],[1,"section","parcel-section"],[1,"section","marketplace-section"],[1,"section","farmer-section"],[1,"section","realestate-section"],[1,"section","rental-section"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Post Dashboard"),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return i.loadStats(),i.loadFeaturedPosts()}),t.j41(5,"mat-icon"),t.EFF(6,"refresh"),t.k0s()()(),t.j41(7,"div",3)(8,"div",4)(9,"h3")(10,"mat-icon"),t.EFF(11,"star"),t.k0s(),t.EFF(12," Featured Posts"),t.k0s(),t.DNE(13,ag,2,1,"span",5),t.k0s(),t.DNE(14,ig,2,0,"div",6),t.DNE(15,rg,5,1,"div",7),t.DNE(16,_g,3,3,"div",8),t.k0s(),t.DNE(17,ug,4,0,"div",9),t.DNE(18,fg,7,1,"div",10),t.DNE(19,Cg,288,35,"div",11),t.k0s()),2&o&&(t.R7$(13),t.Y8G("ngIf",!i.featuredLoading),t.R7$(1),t.Y8G("ngIf",i.featuredLoading),t.R7$(1),t.Y8G("ngIf",i.featuredError),t.R7$(1),t.Y8G("ngIf",!i.featuredLoading&&!i.featuredError),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",i.errorMessage),t.R7$(1),t.Y8G("ngIf",!i.isLoading&&!i.errorMessage))},dependencies:[p.Sq,p.bT,g.$z,g.iY,C.An,R.oV,h.LG],styles:[".post-dashboard[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.dashboard-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px}.dashboard-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#1a1a2e}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#666}.loading-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#f44336;margin-bottom:12px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:12px 0}.stats-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:28px}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:0 0 16px;font-size:18px;font-weight:600;color:#333}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px;width:22px;height:22px}.labour-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1565c0}.travel-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#00897b}.parcel-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#e65100}.marketplace-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#4527a0}.farmer-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#33691e}.realestate-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#ad1457}.cards-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:16px}.stat-card[_ngcontent-%COMP%]{position:relative;padding:20px;border-radius:12px;color:#fff;cursor:pointer;transition:transform .2s,box-shadow .2s;overflow:hidden}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00000026}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;line-height:1;margin-bottom:6px}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:13px;font-weight:500;opacity:.9}.stat-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{position:absolute;right:12px;bottom:12px;font-size:36px;width:36px;height:36px;opacity:.2}.labour-section[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1565C0,#1976D2)}.labour-section[_ngcontent-%COMP%]   .pending[_ngcontent-%COMP%]{background:linear-gradient(135deg,#F57C00,#FF9800)}.labour-section[_ngcontent-%COMP%]   .approved[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2E7D32,#43A047)}.labour-section[_ngcontent-%COMP%]   .rejected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#C62828,#E53935)}.labour-section[_ngcontent-%COMP%]   .reported[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6A1B9A,#8E24AA)}.travel-section[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00695C,#00897B)}.travel-section[_ngcontent-%COMP%]   .pending[_ngcontent-%COMP%]{background:linear-gradient(135deg,#F57C00,#FF9800)}.travel-section[_ngcontent-%COMP%]   .approved[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2E7D32,#43A047)}.travel-section[_ngcontent-%COMP%]   .rejected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#C62828,#E53935)}.travel-section[_ngcontent-%COMP%]   .reported[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6A1B9A,#8E24AA)}.parcel-section[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{background:linear-gradient(135deg,#E65100,#EF6C00)}.parcel-section[_ngcontent-%COMP%]   .pending[_ngcontent-%COMP%]{background:linear-gradient(135deg,#F57C00,#FF9800)}.parcel-section[_ngcontent-%COMP%]   .approved[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2E7D32,#43A047)}.parcel-section[_ngcontent-%COMP%]   .rejected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#C62828,#E53935)}.parcel-section[_ngcontent-%COMP%]   .reported[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6A1B9A,#8E24AA)}.marketplace-section[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4527A0,#5E35B1)}.marketplace-section[_ngcontent-%COMP%]   .pending[_ngcontent-%COMP%]{background:linear-gradient(135deg,#F57C00,#FF9800)}.marketplace-section[_ngcontent-%COMP%]   .approved[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2E7D32,#43A047)}.marketplace-section[_ngcontent-%COMP%]   .rejected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#C62828,#E53935)}.marketplace-section[_ngcontent-%COMP%]   .reported[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6A1B9A,#8E24AA)}.farmer-section[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{background:linear-gradient(135deg,#33691E,#558B2F)}.farmer-section[_ngcontent-%COMP%]   .pending[_ngcontent-%COMP%]{background:linear-gradient(135deg,#F57C00,#FF9800)}.farmer-section[_ngcontent-%COMP%]   .approved[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2E7D32,#43A047)}.farmer-section[_ngcontent-%COMP%]   .rejected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#C62828,#E53935)}.farmer-section[_ngcontent-%COMP%]   .reported[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6A1B9A,#8E24AA)}.realestate-section[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{background:linear-gradient(135deg,#AD1457,#C2185B)}.realestate-section[_ngcontent-%COMP%]   .pending[_ngcontent-%COMP%]{background:linear-gradient(135deg,#F57C00,#FF9800)}.realestate-section[_ngcontent-%COMP%]   .approved[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2E7D32,#43A047)}.realestate-section[_ngcontent-%COMP%]   .rejected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#C62828,#E53935)}.realestate-section[_ngcontent-%COMP%]   .reported[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6A1B9A,#8E24AA)}.featured-section[_ngcontent-%COMP%]{margin-bottom:32px;background:white;border-radius:12px;padding:20px;box-shadow:0 2px 8px #00000014}.featured-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}.featured-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:0;font-size:18px;font-weight:600;color:#1a1a2e}.featured-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffa000;font-size:22px}.featured-header[_ngcontent-%COMP%]   .featured-count[_ngcontent-%COMP%]{font-size:13px;color:#888;background:#f5f5f5;padding:4px 12px;border-radius:12px}.featured-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px}.featured-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#f44336;padding:12px}.featured-error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.featured-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}.featured-category[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;overflow:hidden}.featured-category[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 14px;background:#f5f5f5;cursor:pointer;transition:background .2s}.featured-category[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]:hover{background:#eeeeee}.featured-category[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#666}.featured-category[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#333}.featured-category[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]   .category-count[_ngcontent-%COMP%]{margin-left:auto;background:#4caf50;color:#fff;font-size:11px;font-weight:600;padding:2px 8px;border-radius:10px}.featured-category[_ngcontent-%COMP%]   .featured-items[_ngcontent-%COMP%]{padding:8px}.featured-category[_ngcontent-%COMP%]   .featured-item[_ngcontent-%COMP%]{padding:8px 10px;border-radius:6px;cursor:pointer;transition:background .2s}.featured-category[_ngcontent-%COMP%]   .featured-item[_ngcontent-%COMP%]:hover{background:#f9f9f9}.featured-category[_ngcontent-%COMP%]   .featured-item[_ngcontent-%COMP%] + .featured-item[_ngcontent-%COMP%]{border-top:1px solid #f0f0f0}.featured-category[_ngcontent-%COMP%]   .featured-item[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.featured-category[_ngcontent-%COMP%]   .featured-item[_ngcontent-%COMP%]   .paid-badge[_ngcontent-%COMP%]{flex-shrink:0;font-size:10px;font-weight:700;padding:1px 6px;border-radius:4px;background:#e8f5e9;color:#2e7d32;border:1px solid #a5d6a7;letter-spacing:.5px}.featured-category[_ngcontent-%COMP%]   .featured-item[_ngcontent-%COMP%]   .item-title[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:0}.featured-category[_ngcontent-%COMP%]   .featured-item[_ngcontent-%COMP%]   .item-subtitle[_ngcontent-%COMP%]{font-size:12px;color:#888;margin-top:2px}.featured-category[_ngcontent-%COMP%]   .featured-item[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#2e7d32;margin-top:2px}.no-featured[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;flex-direction:column;align-items:center;padding:30px;color:#999}.no-featured[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:36px;width:36px;height:36px;margin-bottom:8px}.no-featured[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}@media (max-width: 900px){.cards-row[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 600px){.post-dashboard[_ngcontent-%COMP%]{padding:16px}.cards-row[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:22px}}"]})}}return n})(),xt=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/feature-config`}getAllFeatures(){return this.http.get(`${this.apiUrl}/admin/all`)}getVisibleFeatures(e,o){return this.http.get(`${this.apiUrl}/visible`,{params:{lat:e.toString(),lng:o.toString()}})}createFeature(e){return this.http.post(`${this.apiUrl}/admin`,e)}updateFeature(e,o){return this.http.put(`${this.apiUrl}/admin/${e}`,o)}deleteFeature(e){return this.http.delete(`${this.apiUrl}/admin/${e}`)}toggleActive(e){return this.http.put(`${this.apiUrl}/admin/${e}/toggle`,{})}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Pg(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",8),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.openAddForm())}),t.j41(1,"mat-icon"),t.EFF(2,"add"),t.k0s(),t.EFF(3," Add Feature "),t.k0s()}}function bg(n,a){if(1&n){const e=t.RV6();t.j41(0,"mat-card",9)(1,"mat-card-content")(2,"h3"),t.EFF(3),t.k0s(),t.j41(4,"form",10),t.bIt("ngSubmit",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.saveFeature())}),t.j41(5,"div",11)(6,"mat-form-field")(7,"mat-label"),t.EFF(8,"Feature Name (key)"),t.k0s(),t.nrm(9,"input",12),t.k0s(),t.j41(10,"mat-form-field")(11,"mat-label"),t.EFF(12,"Display Name"),t.k0s(),t.nrm(13,"input",13),t.k0s(),t.j41(14,"mat-form-field")(15,"mat-label"),t.EFF(16,"Display Name (Tamil)"),t.k0s(),t.nrm(17,"input",14),t.k0s()(),t.j41(18,"div",11)(19,"mat-form-field")(20,"mat-label"),t.EFF(21,"Icon"),t.k0s(),t.nrm(22,"input",15),t.k0s(),t.j41(23,"mat-form-field")(24,"mat-label"),t.EFF(25,"Color"),t.k0s(),t.nrm(26,"input",16),t.k0s(),t.j41(27,"mat-form-field")(28,"mat-label"),t.EFF(29,"Route"),t.k0s(),t.nrm(30,"input",17),t.k0s()(),t.j41(31,"div",11)(32,"mat-form-field")(33,"mat-label"),t.EFF(34,"Latitude"),t.k0s(),t.nrm(35,"input",18),t.k0s(),t.j41(36,"mat-form-field")(37,"mat-label"),t.EFF(38,"Longitude"),t.k0s(),t.nrm(39,"input",19),t.k0s(),t.j41(40,"mat-form-field")(41,"mat-label"),t.EFF(42,"Radius (km)"),t.k0s(),t.nrm(43,"input",20),t.k0s(),t.j41(44,"mat-form-field")(45,"mat-label"),t.EFF(46,"Display Order"),t.k0s(),t.nrm(47,"input",21),t.k0s(),t.j41(48,"mat-form-field")(49,"mat-label"),t.EFF(50,"Max Posts Per User"),t.k0s(),t.nrm(51,"input",22),t.j41(52,"mat-hint"),t.EFF(53,"0 = unlimited"),t.k0s()()(),t.j41(54,"div",23)(55,"button",24),t.EFF(56),t.k0s(),t.j41(57,"button",25),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.cancelForm())}),t.EFF(58,"Cancel"),t.k0s()()()()()}if(2&n){const e=t.XpG();t.R7$(3),t.JRh(e.editingId?"Edit Feature":"Add New Feature"),t.R7$(1),t.Y8G("formGroup",e.featureForm),t.R7$(51),t.Y8G("disabled",e.featureForm.invalid),t.R7$(1),t.SpI(" ",e.editingId?"Update":"Create"," ")}}function Mg(n,a){1&n&&(t.j41(0,"div",26),t.nrm(1,"mat-spinner",27),t.j41(2,"p"),t.EFF(3,"Loading features..."),t.k0s()())}function vg(n,a){1&n&&(t.j41(0,"th",45),t.EFF(1,"Order"),t.k0s())}function xg(n,a){if(1&n&&(t.j41(0,"td",46),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.JRh(e.displayOrder)}}function Fg(n,a){1&n&&(t.j41(0,"th",45),t.EFF(1,"Feature Key"),t.k0s())}function Og(n,a){if(1&n&&(t.j41(0,"td",46)(1,"code"),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.featureName)}}function kg(n,a){1&n&&(t.j41(0,"th",45),t.EFF(1,"Display Name"),t.k0s())}function Eg(n,a){if(1&n&&(t.j41(0,"td",46),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.JRh(e.displayName)}}function Rg(n,a){1&n&&(t.j41(0,"th",45),t.EFF(1,"Tamil"),t.k0s())}function Tg(n,a){if(1&n&&(t.j41(0,"td",46),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.JRh(e.displayNameTamil)}}function yg(n,a){1&n&&(t.j41(0,"th",45),t.EFF(1,"Icon"),t.k0s())}function jg(n,a){if(1&n&&(t.j41(0,"mat-icon"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.icon)}}function Dg(n,a){if(1&n&&(t.j41(0,"td",46),t.DNE(1,jg,2,1,"mat-icon",47),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.icon)}}function $g(n,a){1&n&&(t.j41(0,"th",45),t.EFF(1,"Color"),t.k0s())}function Ig(n,a){if(1&n&&(t.j41(0,"td",46),t.nrm(1,"span",48),t.j41(2,"span",49),t.EFF(3),t.k0s()()),2&n){const e=a.$implicit;t.R7$(1),t.xc7("background",e.color),t.R7$(2),t.JRh(e.color)}}function Ng(n,a){1&n&&(t.j41(0,"th",45),t.EFF(1,"Radius (km)"),t.k0s())}function Gg(n,a){if(1&n&&(t.j41(0,"td",46)(1,"span",50),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.SpI("",e.radiusKm||50," km")}}function wg(n,a){1&n&&(t.j41(0,"th",45),t.EFF(1,"Post Limit"),t.k0s())}function Sg(n,a){1&n&&(t.j41(0,"span",52),t.EFF(1,"Unlimited"),t.k0s())}function Ag(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.maxPostsPerUser)}}function Vg(n,a){if(1&n&&(t.j41(0,"td",46),t.DNE(1,Sg,2,0,"span",51),t.DNE(2,Ag,2,1,"span",47),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",0===e.maxPostsPerUser||!e.maxPostsPerUser),t.R7$(1),t.Y8G("ngIf",e.maxPostsPerUser>0)}}function Lg(n,a){1&n&&(t.j41(0,"th",45),t.EFF(1,"Active"),t.k0s())}function Bg(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",46)(1,"mat-slide-toggle",53),t.bIt("change",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.toggleActive(r))}),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.Y8G("checked",e.isActive)}}function Yg(n,a){1&n&&(t.j41(0,"th",45),t.EFF(1,"Actions"),t.k0s())}function Ug(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",46)(1,"button",54),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.openEditForm(r))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()(),t.j41(4,"button",55),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.deleteFeature(r))}),t.j41(5,"mat-icon"),t.EFF(6,"delete"),t.k0s()()()}}function Xg(n,a){1&n&&t.nrm(0,"tr",56)}function zg(n,a){1&n&&t.nrm(0,"tr",57)}function Jg(n,a){1&n&&(t.j41(0,"div",58)(1,"mat-icon"),t.EFF(2,"settings_suggest"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No feature configurations found."),t.k0s()())}function qg(n,a){if(1&n&&(t.j41(0,"div",28)(1,"table",29),t.qex(2,30),t.DNE(3,vg,2,0,"th",31),t.DNE(4,xg,2,1,"td",32),t.bVm(),t.qex(5,33),t.DNE(6,Fg,2,0,"th",31),t.DNE(7,Og,3,1,"td",32),t.bVm(),t.qex(8,34),t.DNE(9,kg,2,0,"th",31),t.DNE(10,Eg,2,1,"td",32),t.bVm(),t.qex(11,35),t.DNE(12,Rg,2,0,"th",31),t.DNE(13,Tg,2,1,"td",32),t.bVm(),t.qex(14,36),t.DNE(15,yg,2,0,"th",31),t.DNE(16,Dg,2,1,"td",32),t.bVm(),t.qex(17,37),t.DNE(18,$g,2,0,"th",31),t.DNE(19,Ig,4,3,"td",32),t.bVm(),t.qex(20,38),t.DNE(21,Ng,2,0,"th",31),t.DNE(22,Gg,3,1,"td",32),t.bVm(),t.qex(23,39),t.DNE(24,wg,2,0,"th",31),t.DNE(25,Vg,3,2,"td",32),t.bVm(),t.qex(26,40),t.DNE(27,Lg,2,0,"th",31),t.DNE(28,Bg,2,1,"td",32),t.bVm(),t.qex(29,41),t.DNE(30,Yg,2,0,"th",31),t.DNE(31,Ug,7,0,"td",32),t.bVm(),t.DNE(32,Xg,1,0,"tr",42),t.DNE(33,zg,1,0,"tr",43),t.k0s(),t.DNE(34,Jg,5,0,"div",44),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.features),t.R7$(31),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(1),t.Y8G("ngIf",0===e.features.length)}}let Hg=(()=>{class n{constructor(e,o,i){this.featureConfigService=e,this.fb=o,this.snackBar=i,this.features=[],this.isLoading=!0,this.showForm=!1,this.editingId=null,this.displayedColumns=["displayOrder","featureName","displayName","displayNameTamil","icon","color","radiusKm","maxPostsPerUser","active","actions"]}ngOnInit(){this.initForm(),this.loadFeatures()}initForm(){this.featureForm=this.fb.group({featureName:["",l.k0.required],displayName:["",l.k0.required],displayNameTamil:[""],icon:[""],color:[""],route:[""],latitude:[null],longitude:[null],radiusKm:[50],displayOrder:[0],isActive:[!0],maxPostsPerUser:[0]})}loadFeatures(){this.isLoading=!0,this.featureConfigService.getAllFeatures().subscribe({next:e=>{this.features=e.data||[],this.isLoading=!1},error:e=>{this.snackBar.open("Failed to load feature configs","Close",{duration:3e3}),this.isLoading=!1}})}openAddForm(){this.editingId=null,this.featureForm.reset({radiusKm:50,displayOrder:0,isActive:!0,maxPostsPerUser:0}),this.showForm=!0}openEditForm(e){this.editingId=e.id,this.featureForm.patchValue({featureName:e.featureName,displayName:e.displayName,displayNameTamil:e.displayNameTamil,icon:e.icon,color:e.color,route:e.route,latitude:e.latitude,longitude:e.longitude,radiusKm:e.radiusKm,displayOrder:e.displayOrder,isActive:e.isActive,maxPostsPerUser:e.maxPostsPerUser||0}),this.showForm=!0}cancelForm(){this.showForm=!1,this.editingId=null}saveFeature(){if(this.featureForm.invalid)return;const e=this.featureForm.value;this.editingId?this.featureConfigService.updateFeature(this.editingId,e).subscribe({next:()=>{this.snackBar.open("Feature updated successfully","Close",{duration:3e3}),this.showForm=!1,this.loadFeatures()},error:()=>this.snackBar.open("Failed to update feature","Close",{duration:3e3})}):this.featureConfigService.createFeature(e).subscribe({next:()=>{this.snackBar.open("Feature created successfully","Close",{duration:3e3}),this.showForm=!1,this.loadFeatures()},error:()=>this.snackBar.open("Failed to create feature","Close",{duration:3e3})})}toggleActive(e){this.featureConfigService.toggleActive(e.id).subscribe({next:o=>{const i=o.data,r=this.features.findIndex(c=>c.id===e.id);r>=0&&i&&(this.features[r]=i),this.snackBar.open("Feature toggled","Close",{duration:2e3})},error:()=>this.snackBar.open("Failed to toggle feature","Close",{duration:3e3})})}deleteFeature(e){confirm(`Delete feature "${e.displayName}"?`)&&this.featureConfigService.deleteFeature(e.id).subscribe({next:()=>{this.snackBar.open("Feature deleted","Close",{duration:3e3}),this.loadFeatures()},error:()=>this.snackBar.open("Failed to delete feature","Close",{duration:3e3})})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(xt),t.rXU(l.ok),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-feature-config-management"]],decls:12,vars:4,consts:[[1,"feature-config-management"],[1,"page-header"],[1,"header-actions"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","form-card",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","table-container",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"form-card"],[1,"feature-form",3,"formGroup","ngSubmit"],[1,"form-row"],["matInput","","formControlName","featureName","placeholder","e.g. GROCERY"],["matInput","","formControlName","displayName","placeholder","e.g. Grocery"],["matInput","","formControlName","displayNameTamil","placeholder","e.g. \u0bae\u0bb3\u0bbf\u0b95\u0bc8"],["matInput","","formControlName","icon","placeholder","e.g. shopping_basket_rounded"],["matInput","","formControlName","color","placeholder","e.g. #4CAF50"],["matInput","","formControlName","route","placeholder","e.g. /customer/shops?category=grocery"],["matInput","","type","number","formControlName","latitude","placeholder","12.4966"],["matInput","","type","number","formControlName","longitude","placeholder","78.5729"],["matInput","","type","number","formControlName","radiusKm","placeholder","50"],["matInput","","type","number","formControlName","displayOrder"],["matInput","","type","number","formControlName","maxPostsPerUser","placeholder","0 = unlimited"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"click"],[1,"loading-container"],["diameter","40"],[1,"table-container"],["mat-table","",1,"features-table",3,"dataSource"],["matColumnDef","displayOrder"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","featureName"],["matColumnDef","displayName"],["matColumnDef","displayNameTamil"],["matColumnDef","icon"],["matColumnDef","color"],["matColumnDef","radiusKm"],["matColumnDef","maxPostsPerUser"],["matColumnDef","active"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],[1,"color-chip"],[1,"color-text"],[1,"radius-badge"],["class","text-muted",4,"ngIf"],[1,"text-muted"],["color","primary",3,"checked","change"],["mat-icon-button","","matTooltip","Edit",3,"click"],["mat-icon-button","","matTooltip","Delete","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-state"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Feature Configuration"),t.k0s(),t.j41(4,"div",2),t.DNE(5,Pg,4,0,"button",3),t.j41(6,"button",4),t.bIt("click",function(){return i.loadFeatures()}),t.j41(7,"mat-icon"),t.EFF(8,"refresh"),t.k0s()()()(),t.DNE(9,bg,59,4,"mat-card",5),t.DNE(10,Mg,4,0,"div",6),t.DNE(11,qg,35,4,"div",7),t.k0s()),2&o&&(t.R7$(5),t.Y8G("ngIf",!i.showForm),t.R7$(4),t.Y8G("ngIf",i.showForm),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading))},dependencies:[p.bT,l.qT,l.me,l.Q0,l.BC,l.cb,l.j4,l.JD,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,g.iY,C.An,k.fg,m.rl,m.nJ,m.MV,u.RN,u.m2,R.oV,h.LG,S.sG],styles:[".feature-config-management[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#1a1a2e}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.form-card[_ngcontent-%COMP%]{margin-bottom:20px}.form-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:18px;font-weight:600}.feature-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.feature-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:180px}.feature-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:16px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:60px 20px;color:#666}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:12px 0}.table-container[_ngcontent-%COMP%]{overflow-x:auto;background:white;border-radius:8px;box-shadow:0 2px 8px #00000014}.features-table[_ngcontent-%COMP%]{width:100%}.features-table[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-size:12px;background:#f5f5f5;padding:2px 6px;border-radius:4px}.color-chip[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border-radius:4px;vertical-align:middle;margin-right:6px;border:1px solid rgba(0,0,0,.1)}.color-text[_ngcontent-%COMP%]{font-size:12px;color:#666}.radius-badge[_ngcontent-%COMP%]{display:inline-block;background:#e3f2fd;color:#1565c0;padding:2px 8px;border-radius:12px;font-size:12px;font-weight:500}.text-muted[_ngcontent-%COMP%]{color:#999;font-style:italic}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:40px 20px;color:#999}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:12px}@media (max-width: 768px){.feature-config-management[_ngcontent-%COMP%]{padding:16px}.feature-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column}}"]})}}return n})(),Kg=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/admin/post-limits`}getAllLimits(){return this.http.get(this.apiUrl)}getLimitsByUser(e){return this.http.get(`${this.apiUrl}/user/${e}`)}createOrUpdate(e){return this.http.post(this.apiUrl,e)}lookupUser(e){return this.http.get(`${this.apiUrl}/lookup-user`,{params:{query:e}})}deleteLimit(e){return this.http.delete(`${this.apiUrl}/${e}`)}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Qg(n,a){1&n&&(t.j41(0,"div",17),t.nrm(1,"mat-spinner",18),t.j41(2,"p"),t.EFF(3,"Loading global limits..."),t.k0s()())}function Wg(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"Feature"),t.k0s())}function Zg(n,a){if(1&n&&(t.j41(0,"td",30)(1,"strong"),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.getGlobalFeatureLabel(e.featureName))}}function t_(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"Max Posts Per User"),t.k0s())}function e_(n,a){1&n&&(t.j41(0,"span",35),t.EFF(1,"Unlimited"),t.k0s())}function n_(n,a){if(1&n&&(t.j41(0,"span",36),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2).$implicit;t.R7$(1),t.JRh(e.maxPostsPerUser)}}function o_(n,a){if(1&n&&(t.qex(0),t.DNE(1,e_,2,0,"span",33),t.DNE(2,n_,2,1,"span",34),t.bVm()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.Y8G("ngIf",!e.maxPostsPerUser||0===e.maxPostsPerUser),t.R7$(1),t.Y8G("ngIf",e.maxPostsPerUser>0)}}function a_(n,a){if(1&n){const e=t.RV6();t.j41(0,"mat-form-field",37)(1,"input",38),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(3);return t.Njj(r.editGlobalValue=i)}),t.k0s()()}if(2&n){const e=t.XpG(3);t.R7$(1),t.Y8G("ngModel",e.editGlobalValue)}}function i_(n,a){if(1&n&&(t.j41(0,"td",30),t.DNE(1,o_,3,2,"ng-container",31),t.DNE(2,a_,2,1,"mat-form-field",32),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngIf",o.editingGlobalId!==e.id),t.R7$(1),t.Y8G("ngIf",o.editingGlobalId===e.id)}}function r_(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"Actions"),t.k0s())}function s_(n,a){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"button",39),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.startEditGlobal(i))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()(),t.bVm()}}function c_(n,a){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"button",40),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.saveGlobalLimit(i))}),t.j41(2,"mat-icon"),t.EFF(3,"check"),t.k0s()(),t.j41(4,"button",41),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.cancelEditGlobal())}),t.j41(5,"mat-icon"),t.EFF(6,"close"),t.k0s()(),t.bVm()}}function l_(n,a){if(1&n&&(t.j41(0,"td",30),t.DNE(1,s_,4,0,"ng-container",31),t.DNE(2,c_,7,0,"ng-container",31),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngIf",o.editingGlobalId!==e.id),t.R7$(1),t.Y8G("ngIf",o.editingGlobalId===e.id)}}function p_(n,a){1&n&&t.nrm(0,"tr",42)}function m_(n,a){1&n&&t.nrm(0,"tr",43)}function d_(n,a){1&n&&(t.j41(0,"div",44)(1,"mat-icon"),t.EFF(2,"settings"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No post features configured."),t.k0s()())}function g_(n,a){if(1&n&&(t.j41(0,"div",19)(1,"table",20),t.qex(2,21),t.DNE(3,Wg,2,0,"th",22),t.DNE(4,Zg,3,1,"td",23),t.bVm(),t.qex(5,24),t.DNE(6,t_,2,0,"th",22),t.DNE(7,i_,3,2,"td",23),t.bVm(),t.qex(8,25),t.DNE(9,r_,2,0,"th",22),t.DNE(10,l_,3,2,"td",23),t.bVm(),t.DNE(11,p_,1,0,"tr",26),t.DNE(12,m_,1,0,"tr",27),t.k0s(),t.DNE(13,d_,5,0,"div",28),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.globalLimits),t.R7$(10),t.Y8G("matHeaderRowDef",e.globalDisplayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",e.globalDisplayedColumns),t.R7$(1),t.Y8G("ngIf",0===e.globalLimits.length)}}function __(n,a){1&n&&(t.j41(0,"div",17),t.nrm(1,"mat-spinner",18),t.j41(2,"p"),t.EFF(3,"Loading paid post config..."),t.k0s()())}function u_(n,a){1&n&&(t.j41(0,"span",53),t.EFF(1,"Users can pay to post beyond their free limit"),t.k0s())}function f_(n,a){1&n&&(t.j41(0,"span",53),t.EFF(1,"Users will be blocked when they reach their free limit"),t.k0s())}function C_(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",54)(1,"mat-form-field")(2,"mat-label"),t.EFF(3,"Currency"),t.k0s(),t.j41(4,"mat-select",55),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.paidPostCurrency=i)}),t.j41(5,"mat-option",56),t.EFF(6,"INR (Indian Rupee)"),t.k0s()()()()}if(2&n){const e=t.XpG(2);t.R7$(4),t.Y8G("ngModel",e.paidPostCurrency)}}function h_(n,a){if(1&n){const e=t.RV6();t.j41(0,"mat-card",45)(1,"mat-card-content")(2,"div",46)(3,"div",47)(4,"mat-slide-toggle",48),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.paidPostEnabled=i)}),t.EFF(5," Enable Paid Posts "),t.k0s(),t.DNE(6,u_,2,0,"span",49),t.DNE(7,f_,2,0,"span",49),t.k0s(),t.DNE(8,C_,7,1,"div",50),t.j41(9,"div",51)(10,"button",52),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.savePaidPostConfig())}),t.j41(11,"mat-icon"),t.EFF(12,"save"),t.k0s(),t.EFF(13),t.k0s()()()()()}if(2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngModel",e.paidPostEnabled),t.R7$(2),t.Y8G("ngIf",e.paidPostEnabled),t.R7$(1),t.Y8G("ngIf",!e.paidPostEnabled),t.R7$(1),t.Y8G("ngIf",e.paidPostEnabled),t.R7$(2),t.Y8G("disabled",e.paidPostSaving),t.R7$(3),t.SpI(" ",e.paidPostSaving?"Saving...":"Save Config"," ")}}function P_(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",64)(1,"span",60),t.EFF(2),t.k0s(),t.j41(3,"div",65)(4,"span",66),t.EFF(5,"\u20b9"),t.k0s(),t.j41(6,"input",67),t.bIt("ngModelChange",function(i){const c=t.eBV(e).$implicit,d=t.XpG(2);return t.Njj(d.postTypePrices[c.key]=i)}),t.k0s()()()}if(2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(e.label),t.R7$(4),t.Y8G("ngModel",o.postTypePrices[e.key])}}function b_(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",57)(1,"h3"),t.EFF(2,"Paid Post Pricing"),t.k0s(),t.j41(3,"p",6),t.EFF(4,"Set different prices for each post type"),t.k0s(),t.j41(5,"div",58)(6,"div",59)(7,"span",60),t.EFF(8,"Post Type"),t.k0s(),t.j41(9,"span",61),t.EFF(10,"Price (\u20b9)"),t.k0s()(),t.DNE(11,P_,7,2,"div",62),t.k0s(),t.j41(12,"div",63)(13,"button",52),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.savePostTypePrices())}),t.EFF(14),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(11),t.Y8G("ngForOf",e.postTypes),t.R7$(2),t.Y8G("disabled",e.savingPrices),t.R7$(1),t.SpI(" ",e.savingPrices?"Saving...":"Save Prices"," ")}}function M_(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",68),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.openAddForm())}),t.j41(1,"mat-icon"),t.EFF(2,"add"),t.k0s(),t.EFF(3," Add Override "),t.k0s()}}function v_(n,a){if(1&n&&(t.j41(0,"mat-option",84),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.SpI(" ",e.label," ")}}function x_(n,a){1&n&&(t.j41(0,"div",85),t.nrm(1,"mat-spinner",86),t.j41(2,"span"),t.EFF(3,"Looking up user..."),t.k0s()())}function F_(n,a){if(1&n&&(t.j41(0,"div",87)(1,"mat-icon"),t.EFF(2,"check_circle"),t.k0s(),t.j41(3,"span")(4,"strong"),t.EFF(5),t.k0s(),t.EFF(6),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(5),t.Lme("",e.lookupResult.firstName," ",e.lookupResult.lastName,""),t.R7$(1),t.Lme(" \xa0|\xa0 ",e.lookupResult.mobileNumber," \xa0|\xa0 ",e.lookupResult.email," ")}}function O_(n,a){if(1&n&&(t.j41(0,"div",88)(1,"mat-icon"),t.EFF(2,"error"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.lookupError)}}function k_(n,a){if(1&n){const e=t.RV6();t.j41(0,"mat-card",69)(1,"mat-card-content")(2,"h4"),t.EFF(3,"Add / Update User Override"),t.k0s(),t.j41(4,"form",70),t.bIt("ngSubmit",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.saveLimit())}),t.j41(5,"div",71)(6,"mat-form-field",72)(7,"mat-label"),t.EFF(8,"Mobile Number or Email"),t.k0s(),t.nrm(9,"input",73),t.j41(10,"button",74),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.lookupUser())}),t.j41(11,"mat-icon"),t.EFF(12,"search"),t.k0s()(),t.j41(13,"mat-hint"),t.EFF(14,"Enter the user's mobile number or email address"),t.k0s()(),t.j41(15,"mat-form-field")(16,"mat-label"),t.EFF(17,"Feature"),t.k0s(),t.j41(18,"mat-select",75),t.DNE(19,v_,2,2,"mat-option",76),t.k0s()(),t.j41(20,"mat-form-field")(21,"mat-label"),t.EFF(22,"Max Posts"),t.k0s(),t.nrm(23,"input",77),t.j41(24,"mat-hint"),t.EFF(25,"0 = unlimited, overrides the global limit"),t.k0s()()(),t.DNE(26,x_,4,0,"div",78),t.DNE(27,F_,7,4,"div",79),t.DNE(28,O_,5,1,"div",80),t.j41(29,"div",81)(30,"button",82),t.EFF(31," Save "),t.k0s(),t.j41(32,"button",83),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.cancelForm())}),t.EFF(33,"Cancel"),t.k0s()()()()()}if(2&n){const e=t.XpG();t.R7$(4),t.Y8G("formGroup",e.limitForm),t.R7$(15),t.Y8G("ngForOf",e.featureNames),t.R7$(7),t.Y8G("ngIf",e.lookupLoading),t.R7$(1),t.Y8G("ngIf",e.lookupResult),t.R7$(1),t.Y8G("ngIf",e.lookupError),t.R7$(2),t.Y8G("disabled",e.limitForm.invalid)}}function E_(n,a){1&n&&(t.j41(0,"div",17),t.nrm(1,"mat-spinner",18),t.j41(2,"p"),t.EFF(3,"Loading user overrides..."),t.k0s()())}function R_(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"User"),t.k0s())}function T_(n,a){if(1&n&&(t.j41(0,"small"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.mobileNumber)}}function y_(n,a){if(1&n&&(t.j41(0,"small",35),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.email)}}function j_(n,a){if(1&n&&(t.j41(0,"td",30)(1,"div",92)(2,"strong"),t.EFF(3),t.k0s(),t.DNE(4,T_,2,1,"small",31),t.DNE(5,y_,2,1,"small",33),t.k0s()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.userName||"User #"+e.userId),t.R7$(1),t.Y8G("ngIf",e.mobileNumber),t.R7$(1),t.Y8G("ngIf",e.email)}}function D_(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"Feature"),t.k0s())}function $_(n,a){if(1&n&&(t.j41(0,"td",30),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.JRh(o.getFeatureLabel(e.featureName))}}function I_(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"Max Posts"),t.k0s())}function N_(n,a){1&n&&(t.j41(0,"span",35),t.EFF(1,"Unlimited"),t.k0s())}function G_(n,a){if(1&n&&(t.j41(0,"span")(1,"strong"),t.EFF(2),t.k0s()()),2&n){const e=t.XpG().$implicit;t.R7$(2),t.JRh(e.maxPosts)}}function w_(n,a){if(1&n&&(t.j41(0,"td",30),t.DNE(1,N_,2,0,"span",33),t.DNE(2,G_,3,1,"span",31),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",0===e.maxPosts),t.R7$(1),t.Y8G("ngIf",e.maxPosts>0)}}function S_(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"Created"),t.k0s())}function A_(n,a){if(1&n&&(t.j41(0,"td",30),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.JRh(t.i5U(2,1,e.createdAt,"short"))}}function V_(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"Actions"),t.k0s())}function L_(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",30)(1,"button",93),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.deleteLimit(r))}),t.j41(2,"mat-icon"),t.EFF(3,"delete"),t.k0s()()()}}function B_(n,a){1&n&&t.nrm(0,"tr",42)}function Y_(n,a){1&n&&t.nrm(0,"tr",43)}function U_(n,a){1&n&&(t.j41(0,"div",44)(1,"mat-icon"),t.EFF(2,"rule"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No user-specific overrides found."),t.k0s(),t.j41(5,"p",94),t.EFF(6,"All users are using the global limits."),t.k0s()())}function X_(n,a){if(1&n&&(t.j41(0,"div",89)(1,"table",20),t.qex(2,90),t.DNE(3,R_,2,0,"th",22),t.DNE(4,j_,6,3,"td",23),t.bVm(),t.qex(5,21),t.DNE(6,D_,2,0,"th",22),t.DNE(7,$_,2,1,"td",23),t.bVm(),t.qex(8,24),t.DNE(9,I_,2,0,"th",22),t.DNE(10,w_,3,2,"td",23),t.bVm(),t.qex(11,91),t.DNE(12,S_,2,0,"th",22),t.DNE(13,A_,3,4,"td",23),t.bVm(),t.qex(14,25),t.DNE(15,V_,2,0,"th",22),t.DNE(16,L_,4,0,"td",23),t.bVm(),t.DNE(17,B_,1,0,"tr",26),t.DNE(18,Y_,1,0,"tr",27),t.k0s(),t.DNE(19,U_,7,0,"div",28),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.limits),t.R7$(16),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(1),t.Y8G("ngIf",0===e.limits.length)}}let z_=(()=>{class n{constructor(e,o,i,r,c){this.postLimitsService=e,this.featureConfigService=o,this.settingsService=i,this.fb=r,this.snackBar=c,this.globalLimits=[],this.globalLoading=!0,this.editingGlobalId=null,this.editGlobalValue=0,this.limits=[],this.isLoading=!0,this.showForm=!1,this.lookupResult=null,this.lookupError="",this.lookupLoading=!1,this.featureNames=[{value:"PARCEL_SERVICE",label:"Packers & Movers"},{value:"MARKETPLACE",label:"Marketplace"},{value:"LABOURS",label:"Labours"},{value:"FARM_PRODUCTS",label:"Farm Products"},{value:"TRAVELS",label:"Travels"},{value:"RENTAL",label:"Rentals"},{value:"REAL_ESTATE",label:"Real Estate"}],this.paidPostEnabled=!1,this.paidPostCurrency="INR",this.paidPostLoading=!0,this.paidPostSaving=!1,this.postTypePrices={},this.savingPrices=!1,this.postTypes=[{key:"MARKETPLACE",label:"Marketplace (Buy & Sell)"},{key:"FARM_PRODUCTS",label:"Farmer Products"},{key:"LABOURS",label:"Labours"},{key:"TRAVELS",label:"Travels"},{key:"PARCEL_SERVICE",label:"Packers & Movers"},{key:"REAL_ESTATE",label:"Real Estate"},{key:"RENTAL",label:"Rentals"}],this.displayedColumns=["userInfo","featureName","maxPosts","createdAt","actions"],this.globalDisplayedColumns=["featureName","maxPosts","actions"]}ngOnInit(){this.initForm(),this.loadGlobalLimits(),this.loadLimits(),this.loadPaidPostConfig()}initForm(){this.limitForm=this.fb.group({userIdentifier:["",[l.k0.required]],featureName:["",l.k0.required],maxPosts:[5,[l.k0.required,l.k0.min(0)]]})}loadGlobalLimits(){this.globalLoading=!0,this.featureConfigService.getAllFeatures().subscribe({next:e=>{const i=["PARCEL_SERVICE","MARKETPLACE","LABOURS","FARM_PRODUCTS","TRAVELS","RENTAL","REAL_ESTATE"];this.globalLimits=(e.data||e||[]).filter(r=>i.includes(r.featureName)),this.globalLoading=!1},error:()=>{this.snackBar.open("Failed to load global limits","Close",{duration:3e3}),this.globalLoading=!1}})}getGlobalFeatureLabel(e){const o=this.featureNames.find(i=>i.value===e);return o?o.label:e}startEditGlobal(e){this.editingGlobalId=e.id,this.editGlobalValue=e.maxPostsPerUser||0}cancelEditGlobal(){this.editingGlobalId=null}saveGlobalLimit(e){const o={...e,maxPostsPerUser:this.editGlobalValue};this.featureConfigService.updateFeature(e.id,o).subscribe({next:()=>{this.snackBar.open(`Global limit for ${this.getGlobalFeatureLabel(e.featureName)} updated`,"Close",{duration:3e3}),this.editingGlobalId=null,this.loadGlobalLimits()},error:()=>this.snackBar.open("Failed to update global limit","Close",{duration:3e3})})}loadLimits(){this.isLoading=!0,this.postLimitsService.getAllLimits().subscribe({next:e=>{this.limits=e.data||[],this.isLoading=!1},error:()=>{this.snackBar.open("Failed to load user overrides","Close",{duration:3e3}),this.isLoading=!1}})}openAddForm(){this.limitForm.reset({maxPosts:5}),this.lookupResult=null,this.lookupError="",this.showForm=!0}cancelForm(){this.showForm=!1,this.lookupResult=null,this.lookupError=""}lookupUser(){const e=this.limitForm.get("userIdentifier")?.value?.trim();e&&(this.lookupLoading=!0,this.lookupResult=null,this.lookupError="",this.postLimitsService.lookupUser(e).subscribe({next:o=>{this.lookupResult=o.data,this.lookupLoading=!1},error:()=>{this.lookupError="No user found with this mobile number or email",this.lookupLoading=!1}}))}saveLimit(){if(this.limitForm.invalid)return;const e=this.limitForm.value;this.postLimitsService.createOrUpdate({userIdentifier:e.userIdentifier.trim(),featureName:e.featureName,maxPosts:e.maxPosts}).subscribe({next:()=>{this.snackBar.open("User override saved successfully","Close",{duration:3e3}),this.showForm=!1,this.lookupResult=null,this.lookupError="",this.loadLimits()},error:o=>{this.snackBar.open(o?.error?.message||"Failed to save user override","Close",{duration:4e3})}})}deleteLimit(e){confirm(`Delete post limit override for user ${e.userId} on ${this.getFeatureLabel(e.featureName)}?`)&&this.postLimitsService.deleteLimit(e.id).subscribe({next:()=>{this.snackBar.open("User override deleted","Close",{duration:3e3}),this.loadLimits()},error:()=>this.snackBar.open("Failed to delete override","Close",{duration:3e3})})}getFeatureLabel(e){const o=this.featureNames.find(i=>i.value===e);return o?o.label:e}loadPaidPostConfig(){this.paidPostLoading=!0,this.settingsService.getAllSettings().subscribe({next:e=>{for(const o of e){"paid_post.enabled"===o.key&&(this.paidPostEnabled="true"===o.value),"paid_post.currency"===o.key&&(this.paidPostCurrency=o.value||"INR");const i="paid_post.price.";if(o.key.startsWith(i)){const r=o.key.substring(i.length);this.postTypePrices[r]=parseInt(o.value,10)||10}if("paid_post.price"===o.key){const r=parseInt(o.value,10)||10;for(const c of this.postTypes)void 0===this.postTypePrices[c.key]&&(this.postTypePrices[c.key]=r)}}for(const o of this.postTypes)void 0===this.postTypePrices[o.key]&&(this.postTypePrices[o.key]=10);this.paidPostLoading=!1},error:()=>{this.snackBar.open("Failed to load paid post config","Close",{duration:3e3}),this.paidPostLoading=!1}})}savePaidPostConfig(){this.paidPostSaving=!0;const e={"paid_post.enabled":String(this.paidPostEnabled),"paid_post.currency":this.paidPostCurrency};this.settingsService.updateMultipleSettings(e).subscribe({next:()=>{this.snackBar.open("Paid post config saved successfully","Close",{duration:3e3}),this.paidPostSaving=!1},error:()=>{this.snackBar.open("Failed to save paid post config","Close",{duration:3e3}),this.paidPostSaving=!1}})}savePostTypePrices(){this.savingPrices=!0;const e={};for(const o of this.postTypes)e[`paid_post.price.${o.key}`]=String(this.postTypePrices[o.key]||10);this.settingsService.updateMultipleSettings(e).subscribe({next:()=>{this.snackBar.open("Post type prices saved successfully","Close",{duration:3e3}),this.savingPrices=!1},error:()=>{this.snackBar.open("Failed to save post type prices","Close",{duration:3e3}),this.savingPrices=!1}})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(Kg),t.rXU(xt),t.rXU(_t.h),t.rXU(l.ok),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-post-limits"]],decls:41,vars:9,consts:[[1,"post-limits-management"],[1,"page-header"],[1,"subtitle"],[1,"header-actions"],["mat-icon-button","","matTooltip","Refresh",3,"click"],[1,"section-header"],[1,"section-subtitle"],["class","loading-container",4,"ngIf"],["class","table-container global-table",4,"ngIf"],[1,"section-header","paid-section"],["class","paid-post-card",4,"ngIf"],["class","config-section",4,"ngIf"],[1,"section-header","user-section"],[1,"section-actions"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","form-card",4,"ngIf"],["class","table-container",4,"ngIf"],[1,"loading-container"],["diameter","32"],[1,"table-container","global-table"],["mat-table","",1,"limits-table",3,"dataSource"],["matColumnDef","featureName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","maxPosts"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["class","inline-edit",4,"ngIf"],["class","text-muted",4,"ngIf"],["class","limit-badge",4,"ngIf"],[1,"text-muted"],[1,"limit-badge"],[1,"inline-edit"],["matInput","","type","number","min","0","placeholder","0 = unlimited",3,"ngModel","ngModelChange"],["mat-icon-button","","matTooltip","Edit limit","color","primary",3,"click"],["mat-icon-button","","matTooltip","Save","color","primary",3,"click"],["mat-icon-button","","matTooltip","Cancel",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-state"],[1,"paid-post-card"],[1,"paid-post-form"],[1,"paid-post-toggle"],["color","primary",3,"ngModel","ngModelChange"],["class","toggle-hint",4,"ngIf"],["class","paid-post-fields",4,"ngIf"],[1,"paid-post-actions"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"toggle-hint"],[1,"paid-post-fields"],[3,"ngModel","ngModelChange"],["value","INR"],[1,"config-section"],[1,"pricing-grid"],[1,"pricing-row","pricing-header"],[1,"pricing-label"],[1,"pricing-value"],["class","pricing-row",4,"ngFor","ngForOf"],[1,"config-actions"],[1,"pricing-row"],[1,"pricing-input"],[1,"currency-prefix"],["type","number","min","1","max","1000",1,"price-input",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],[1,"form-card"],[1,"limit-form",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"user-lookup-field"],["matInput","","formControlName","userIdentifier","placeholder","Enter mobile number or email"],["mat-icon-button","","matSuffix","","type","button","matTooltip","Verify user",3,"click"],["formControlName","featureName"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","maxPosts","placeholder","0 = unlimited"],["class","lookup-status",4,"ngIf"],["class","lookup-result success",4,"ngIf"],["class","lookup-result error",4,"ngIf"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"click"],[3,"value"],[1,"lookup-status"],["diameter","20"],[1,"lookup-result","success"],[1,"lookup-result","error"],[1,"table-container"],["matColumnDef","userInfo"],["matColumnDef","createdAt"],[1,"user-cell"],["mat-icon-button","","matTooltip","Delete","color","warn",3,"click"],[1,"hint"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Post Limits"),t.k0s(),t.j41(4,"p",2),t.EFF(5,"Manage global post limits for all users and set user-specific overrides."),t.k0s(),t.j41(6,"div",3)(7,"button",4),t.bIt("click",function(){return i.loadGlobalLimits(),i.loadLimits()}),t.j41(8,"mat-icon"),t.EFF(9,"refresh"),t.k0s()()()(),t.j41(10,"div",5)(11,"h3")(12,"mat-icon"),t.EFF(13,"public"),t.k0s(),t.EFF(14," Global Limits"),t.k0s(),t.j41(15,"p",6),t.EFF(16,"Default post limits applied to all users. Set 0 for unlimited."),t.k0s()(),t.DNE(17,Qg,4,0,"div",7),t.DNE(18,g_,14,4,"div",8),t.j41(19,"div",9)(20,"h3")(21,"mat-icon"),t.EFF(22,"payment"),t.k0s(),t.EFF(23," Paid Posts Config"),t.k0s(),t.j41(24,"p",6),t.EFF(25,"When users exceed their free post limit, they can pay to create additional posts."),t.k0s()(),t.DNE(26,__,4,0,"div",7),t.DNE(27,h_,14,6,"mat-card",10),t.DNE(28,b_,15,3,"div",11),t.j41(29,"div",12)(30,"h3")(31,"mat-icon"),t.EFF(32,"person"),t.k0s(),t.EFF(33," User-Specific Overrides"),t.k0s(),t.j41(34,"p",6),t.EFF(35,"Override the global limit for specific users. These take priority over global limits."),t.k0s(),t.j41(36,"div",13),t.DNE(37,M_,4,0,"button",14),t.k0s()(),t.DNE(38,k_,34,6,"mat-card",15),t.DNE(39,E_,4,0,"div",7),t.DNE(40,X_,20,4,"div",16),t.k0s()),2&o&&(t.R7$(17),t.Y8G("ngIf",i.globalLoading),t.R7$(1),t.Y8G("ngIf",!i.globalLoading),t.R7$(8),t.Y8G("ngIf",i.paidPostLoading),t.R7$(1),t.Y8G("ngIf",!i.paidPostLoading),t.R7$(1),t.Y8G("ngIf",i.paidPostEnabled),t.R7$(9),t.Y8G("ngIf",!i.showForm),t.R7$(1),t.Y8G("ngIf",i.showForm),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading))},dependencies:[p.Sq,p.bT,l.qT,l.me,l.Q0,l.BC,l.cb,l.VZ,l.zX,l.j4,l.JD,l.vS,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,g.iY,C.An,k.fg,m.rl,m.nJ,m.MV,m.yw,I.VO,N.wT,u.RN,u.m2,R.oV,h.LG,S.sG,p.vh],styles:[".post-limits-management[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#1a1a2e}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{width:100%;margin:4px 0 0;font-size:14px;color:#666}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;margin-bottom:12px;padding-bottom:8px;border-bottom:2px solid #e0e0e0}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#1a1a2e;display:flex;align-items:center;gap:8px}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px;color:#4caf50}.section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{width:100%;margin:4px 0 0;font-size:13px;color:#888}.section-header[_ngcontent-%COMP%]   .section-actions[_ngcontent-%COMP%]{margin-left:auto}.section-header.user-section[_ngcontent-%COMP%]{margin-top:32px}.section-header.user-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2196f3}.section-header.paid-section[_ngcontent-%COMP%]{margin-top:32px}.section-header.paid-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9800}.global-table[_ngcontent-%COMP%]{margin-bottom:8px}.inline-edit[_ngcontent-%COMP%]{max-width:120px}.inline-edit[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.limit-badge[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0;padding:4px 12px;border-radius:12px;font-weight:600;font-size:14px}.form-card[_ngcontent-%COMP%]{margin-bottom:20px}.form-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:600}.limit-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.limit-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:180px}.limit-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:16px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:40px 20px;color:#666}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:12px 0}.table-container[_ngcontent-%COMP%]{overflow-x:auto;background:white;border-radius:8px;box-shadow:0 2px 8px #00000014}.limits-table[_ngcontent-%COMP%]{width:100%}.text-muted[_ngcontent-%COMP%]{color:#999;font-style:italic}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:40px 20px;color:#999}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:12px}.empty-state[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:13px;margin-top:4px}.user-lookup-field[_ngcontent-%COMP%]     .mat-mdc-form-field-icon-suffix{padding:0}.lookup-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:8px 0;color:#666;font-size:13px}.lookup-result[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;border-radius:6px;margin:8px 0;font-size:13px}.lookup-result.success[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.lookup-result.success[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50}.lookup-result.error[_ngcontent-%COMP%]{background:#fbe9e7;color:#c62828}.lookup-result.error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#e53935}.user-cell[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;padding:4px 0}.user-cell[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px;color:#666}.paid-post-card[_ngcontent-%COMP%]{margin-bottom:20px}.paid-post-form[_ngcontent-%COMP%]   .paid-post-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:20px}.paid-post-form[_ngcontent-%COMP%]   .paid-post-toggle[_ngcontent-%COMP%]   .toggle-hint[_ngcontent-%COMP%]{font-size:13px;color:#888}.paid-post-form[_ngcontent-%COMP%]   .paid-post-fields[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap;margin-bottom:16px}.paid-post-form[_ngcontent-%COMP%]   .paid-post-fields[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:180px;max-width:280px}.paid-post-form[_ngcontent-%COMP%]   .currency-prefix[_ngcontent-%COMP%]{font-weight:600;color:#333}.paid-post-form[_ngcontent-%COMP%]   .paid-post-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.paid-post-form[_ngcontent-%COMP%]   .paid-post-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}.config-section[_ngcontent-%COMP%]{margin-top:24px}.config-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;font-weight:600;color:#1a1a2e}.config-section[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{margin:0 0 12px;font-size:13px;color:#888}.pricing-grid[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;overflow:hidden;max-width:500px;margin:16px 0}.pricing-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid #f0f0f0}.pricing-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.pricing-row.pricing-header[_ngcontent-%COMP%]{background:#f5f5f5;font-weight:600;font-size:13px;color:#666;text-transform:uppercase;letter-spacing:.5px}.pricing-label[_ngcontent-%COMP%]{font-size:14px;color:#333}.pricing-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.pricing-input[_ngcontent-%COMP%]   .currency-prefix[_ngcontent-%COMP%]{font-size:14px;color:#666;font-weight:500}.price-input[_ngcontent-%COMP%]{width:80px;padding:6px 10px;border:1px solid #ddd;border-radius:6px;font-size:14px;text-align:right}.price-input[_ngcontent-%COMP%]:focus{border-color:#4caf50;outline:none;box-shadow:0 0 0 2px #4caf501a}.config-actions[_ngcontent-%COMP%]{margin-top:16px}@media (max-width: 768px){.post-limits-management[_ngcontent-%COMP%]{padding:16px}.limit-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column}}"]})}}return n})(),J_=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/post-payments`}getStats(){return this.http.get(`${this.apiUrl}/admin/stats`)}getAllPayments(e=0,o=20){return this.http.get(`${this.apiUrl}/admin/all`,{params:{page:e.toString(),size:o.toString()}})}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function q_(n,a){1&n&&(t.j41(0,"div",9),t.nrm(1,"mat-spinner",10),t.j41(2,"p"),t.EFF(3,"Loading payment stats..."),t.k0s()())}function H_(n,a){if(1&n&&(t.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"mat-icon"),t.EFF(4,"payment"),t.k0s()(),t.j41(5,"div",14)(6,"h3"),t.EFF(7),t.nI1(8,"number"),t.k0s(),t.j41(9,"p"),t.EFF(10,"Total Collected"),t.k0s()()(),t.j41(11,"div",15)(12,"div",13)(13,"mat-icon"),t.EFF(14,"account_balance"),t.k0s()(),t.j41(15,"div",14)(16,"h3"),t.EFF(17),t.nI1(18,"number"),t.k0s(),t.j41(19,"p"),t.EFF(20,"Net Amount (after fees)"),t.k0s()()(),t.j41(21,"div",16)(22,"div",13)(23,"mat-icon"),t.EFF(24,"receipt"),t.k0s()(),t.j41(25,"div",14)(26,"h3"),t.EFF(27),t.nI1(28,"number"),t.k0s(),t.j41(29,"p"),t.EFF(30,"Processing Fee Collected"),t.k0s(),t.j41(31,"small"),t.EFF(32,"Charged to customers (2% + 18% GST)"),t.k0s()()(),t.j41(33,"div",17)(34,"div",13)(35,"mat-icon"),t.EFF(36,"bar_chart"),t.k0s()(),t.j41(37,"div",14)(38,"h3"),t.EFF(39),t.k0s(),t.j41(40,"p"),t.EFF(41,"Successful / Failed / Pending"),t.k0s()()()()),2&n){const e=t.XpG();t.R7$(7),t.SpI("\u20b9",t.i5U(8,6,e.totalCollected,"1.2-2"),""),t.R7$(10),t.SpI("\u20b9",t.i5U(18,9,e.netAmount,"1.2-2"),""),t.R7$(10),t.SpI("\u20b9",t.i5U(28,12,e.processingFeeCollected,"1.2-2"),""),t.R7$(12),t.E5c("",e.successfulPayments," / ",e.failedPayments," / ",e.pendingPayments,"")}}function K_(n,a){if(1&n&&(t.j41(0,"div",20),t.EFF(1),t.j41(2,"span",21),t.EFF(3),t.nI1(4,"number"),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.SpI(" ",o.getPostTypeLabel(e.type),": "),t.R7$(2),t.SpI("\u20b9",t.i5U(4,2,e.amount,"1.2-2"),"")}}function Q_(n,a){if(1&n&&(t.j41(0,"div",18),t.DNE(1,K_,5,5,"div",19),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",e.postTypeEntries)}}function W_(n,a){1&n&&(t.j41(0,"div",9),t.nrm(1,"mat-spinner",10),t.j41(2,"p"),t.EFF(3,"Loading payments..."),t.k0s()())}function Z_(n,a){1&n&&(t.j41(0,"th",40),t.EFF(1,"ID"),t.k0s())}function t1(n,a){if(1&n&&(t.j41(0,"td",41),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.JRh(e.id)}}function e1(n,a){1&n&&(t.j41(0,"th",40),t.EFF(1,"User"),t.k0s())}function n1(n,a){if(1&n&&(t.j41(0,"td",41),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.JRh(e.userId)}}function o1(n,a){1&n&&(t.j41(0,"th",40),t.EFF(1,"Post Type"),t.k0s())}function a1(n,a){if(1&n&&(t.j41(0,"td",41),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.JRh(o.getPostTypeLabel(e.postType))}}function i1(n,a){1&n&&(t.j41(0,"th",40),t.EFF(1,"Base Price"),t.k0s())}function r1(n,a){if(1&n&&(t.j41(0,"td",41),t.EFF(1),t.nI1(2,"number"),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.SpI(" \u20b9",t.i5U(2,1,e.amount,"1.2-2")," ")}}function s1(n,a){1&n&&(t.j41(0,"th",40),t.EFF(1,"Fee"),t.k0s())}function c1(n,a){if(1&n&&(t.j41(0,"td",41)(1,"span",42),t.EFF(2),t.nI1(3,"number"),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.SpI("\u20b9",t.i5U(3,1,(e.processingFee||0)/100,"1.2-2"),"")}}function l1(n,a){1&n&&(t.j41(0,"th",40),t.EFF(1,"Total"),t.k0s())}function p1(n,a){if(1&n&&(t.j41(0,"td",41)(1,"span",43),t.EFF(2),t.nI1(3,"number"),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.SpI("\u20b9",t.i5U(3,1,(e.totalAmount||100*e.amount)/100,"1.2-2"),"")}}function m1(n,a){1&n&&(t.j41(0,"th",40),t.EFF(1,"Status"),t.k0s())}function d1(n,a){if(1&n&&(t.j41(0,"td",41)(1,"span",44),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngClass",o.getStatusChipClass(e.status)),t.R7$(1),t.JRh(e.status)}}function g1(n,a){1&n&&(t.j41(0,"th",40),t.EFF(1,"Razorpay ID"),t.k0s())}function _1(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.razorpayPaymentId)}}function u1(n,a){1&n&&(t.j41(0,"span",47),t.EFF(1,"-"),t.k0s())}function f1(n,a){if(1&n&&(t.j41(0,"td",41),t.DNE(1,_1,2,1,"span",45),t.DNE(2,u1,2,0,"span",46),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.razorpayPaymentId),t.R7$(1),t.Y8G("ngIf",!e.razorpayPaymentId)}}function C1(n,a){1&n&&(t.j41(0,"th",40),t.EFF(1,"Created"),t.k0s())}function h1(n,a){if(1&n&&(t.j41(0,"td",41),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.JRh(t.i5U(2,1,e.createdAt,"medium"))}}function P1(n,a){1&n&&(t.j41(0,"th",40),t.EFF(1,"Paid At"),t.k0s())}function b1(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(t.i5U(2,1,e.paidAt,"medium"))}}function M1(n,a){1&n&&(t.j41(0,"span",47),t.EFF(1,"-"),t.k0s())}function v1(n,a){if(1&n&&(t.j41(0,"td",41),t.DNE(1,b1,3,4,"span",45),t.DNE(2,M1,2,0,"span",46),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.paidAt),t.R7$(1),t.Y8G("ngIf",!e.paidAt)}}function x1(n,a){1&n&&t.nrm(0,"tr",48)}function F1(n,a){1&n&&t.nrm(0,"tr",49)}function O1(n,a){1&n&&(t.j41(0,"div",50)(1,"mat-icon"),t.EFF(2,"receipt_long"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No payment records found."),t.k0s()())}const k1=function(){return[10,20,50]};function E1(n,a){if(1&n){const e=t.RV6();t.j41(0,"mat-paginator",51),t.bIt("page",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.onPageChange(i))}),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("length",e.totalElements)("pageSize",e.pageSize)("pageIndex",e.pageIndex)("pageSizeOptions",t.lJ4(4,k1))}}function R1(n,a){if(1&n&&(t.j41(0,"div",22)(1,"table",23),t.qex(2,24),t.DNE(3,Z_,2,0,"th",25),t.DNE(4,t1,2,1,"td",26),t.bVm(),t.qex(5,27),t.DNE(6,e1,2,0,"th",25),t.DNE(7,n1,2,1,"td",26),t.bVm(),t.qex(8,28),t.DNE(9,o1,2,0,"th",25),t.DNE(10,a1,2,1,"td",26),t.bVm(),t.qex(11,29),t.DNE(12,i1,2,0,"th",25),t.DNE(13,r1,3,4,"td",26),t.bVm(),t.qex(14,30),t.DNE(15,s1,2,0,"th",25),t.DNE(16,c1,4,4,"td",26),t.bVm(),t.qex(17,31),t.DNE(18,l1,2,0,"th",25),t.DNE(19,p1,4,4,"td",26),t.bVm(),t.qex(20,32),t.DNE(21,m1,2,0,"th",25),t.DNE(22,d1,3,2,"td",26),t.bVm(),t.qex(23,33),t.DNE(24,g1,2,0,"th",25),t.DNE(25,f1,3,2,"td",26),t.bVm(),t.qex(26,34),t.DNE(27,C1,2,0,"th",25),t.DNE(28,h1,3,4,"td",26),t.bVm(),t.qex(29,35),t.DNE(30,P1,2,0,"th",25),t.DNE(31,v1,3,2,"td",26),t.bVm(),t.DNE(32,x1,1,0,"tr",36),t.DNE(33,F1,1,0,"tr",37),t.k0s(),t.DNE(34,O1,5,0,"div",38),t.DNE(35,E1,1,5,"mat-paginator",39),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.payments),t.R7$(31),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(1),t.Y8G("ngIf",0===e.payments.length),t.R7$(1),t.Y8G("ngIf",e.payments.length>0)}}let T1=(()=>{class n{constructor(e){this.paymentService=e,this.totalCollected=0,this.baseAmountCollected=0,this.processingFeeCollected=0,this.successfulPayments=0,this.failedPayments=0,this.pendingPayments=0,this.razorpayFee=0,this.gstOnFee=0,this.netAmount=0,this.byPostType={},this.payments=[],this.totalElements=0,this.pageSize=20,this.pageIndex=0,this.displayedColumns=["id","user","postType","amount","processingFee","totalAmount","status","createdAt","paidAt"],this.statsLoading=!0,this.paymentsLoading=!0}ngOnInit(){this.loadStats(),this.loadPayments()}loadStats(){this.statsLoading=!0,this.paymentService.getStats().subscribe({next:e=>{const o=e.data||e;this.totalCollected=o.totalCollected||0,this.baseAmountCollected=o.baseAmountCollected||0,this.processingFeeCollected=o.processingFeeCollected||0,this.successfulPayments=o.successfulPayments||0,this.failedPayments=o.failedPayments||0,this.pendingPayments=o.pendingPayments||0,this.razorpayFee=o.razorpayFee||0,this.gstOnFee=o.gstOnFee||0,this.netAmount=o.netAmount||0,this.byPostType=o.byPostType||{},this.statsLoading=!1},error:()=>{this.statsLoading=!1}})}loadPayments(){this.paymentsLoading=!0,this.paymentService.getAllPayments(this.pageIndex,this.pageSize).subscribe({next:e=>{const o=e.data||e;this.payments=o.content||o||[],this.totalElements=o.totalElements||this.payments.length,this.paymentsLoading=!1},error:()=>{this.paymentsLoading=!1}})}onPageChange(e){this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.loadPayments()}refresh(){this.loadStats(),this.loadPayments()}getPostTypeLabel(e){return{MARKETPLACE:"Marketplace",FARM_PRODUCTS:"Farm Products",LABOURS:"Labours",TRAVELS:"Travels",PARCEL_SERVICE:"Packers & Movers",REAL_ESTATE:"Real Estate"}[e]||e}getStatusChipClass(e){switch(e){case"PAID":return"paid";case"FAILED":return"failed";default:return"created"}}get postTypeEntries(){return Object.entries(this.byPostType).map(([e,o])=>({type:e,amount:o}))}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(J_))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-payment-history"]],viewQuery:function(o,i){if(1&o&&t.GBs($.iy,5),2&o){let r;t.mGM(r=t.lsd())&&(i.paginator=r.first)}},decls:15,vars:5,consts:[[1,"payment-history"],[1,"page-header"],[1,"subtitle"],[1,"header-actions"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","loading-container",4,"ngIf"],["class","stats-grid",4,"ngIf"],["class","post-type-breakdown",4,"ngIf"],["class","table-container",4,"ngIf"],[1,"loading-container"],["diameter","32"],[1,"stats-grid"],[1,"stat-card","collected"],[1,"stat-icon"],[1,"stat-info"],[1,"stat-card","net"],[1,"stat-card","fees"],[1,"stat-card","counts"],[1,"post-type-breakdown"],["class","type-chip",4,"ngFor","ngForOf"],[1,"type-chip"],[1,"amount"],[1,"table-container"],["mat-table","",1,"payments-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user"],["matColumnDef","postType"],["matColumnDef","amount"],["matColumnDef","processingFee"],["matColumnDef","totalAmount"],["matColumnDef","status"],["matColumnDef","razorpayPaymentId"],["matColumnDef","createdAt"],["matColumnDef","paidAt"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageIndex","pageSizeOptions","page",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"fee-cell"],[1,"amount-cell"],[1,"status-chip",3,"ngClass"],[4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"text-muted"],["mat-header-row",""],["mat-row",""],[1,"empty-state"],["showFirstLastButtons","",3,"length","pageSize","pageIndex","pageSizeOptions","page"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Payment History"),t.k0s(),t.j41(4,"p",2),t.EFF(5,"View all paid post payments, fees, and transaction details."),t.k0s(),t.j41(6,"div",3)(7,"button",4),t.bIt("click",function(){return i.refresh()}),t.j41(8,"mat-icon"),t.EFF(9,"refresh"),t.k0s()()()(),t.DNE(10,q_,4,0,"div",5),t.DNE(11,H_,42,15,"div",6),t.DNE(12,Q_,2,1,"div",7),t.DNE(13,W_,4,0,"div",5),t.DNE(14,R1,36,5,"div",8),t.k0s()),2&o&&(t.R7$(10),t.Y8G("ngIf",i.statsLoading),t.R7$(1),t.Y8G("ngIf",!i.statsLoading),t.R7$(1),t.Y8G("ngIf",!i.statsLoading&&i.postTypeEntries.length>0),t.R7$(1),t.Y8G("ngIf",i.paymentsLoading),t.R7$(1),t.Y8G("ngIf",!i.paymentsLoading))},dependencies:[p.YU,p.Sq,p.bT,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,$.iy,g.iY,C.An,R.oV,h.LG,p.QX,p.vh],styles:[".payment-history[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#1a1a2e}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{width:100%;margin:4px 0 0;font-size:14px;color:#666}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{padding:20px;border-radius:12px;display:flex;align-items:center;gap:16px}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:24px}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0 0;font-size:13px;color:#666}.stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:11px;color:#999}.stat-card.collected[_ngcontent-%COMP%]{background:#e8f5e9}.stat-card.collected[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#4caf50}.stat-card.collected[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2e7d32}.stat-card.net[_ngcontent-%COMP%]{background:#e3f2fd}.stat-card.net[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#1976d2}.stat-card.net[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1565c0}.stat-card.fees[_ngcontent-%COMP%]{background:#fff3e0}.stat-card.fees[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#ff9800}.stat-card.fees[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#e65100}.stat-card.counts[_ngcontent-%COMP%]{background:#f3e5f5}.stat-card.counts[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#9c27b0}.stat-card.counts[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#6a1b9a}.post-type-breakdown[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:24px}.type-chip[_ngcontent-%COMP%]{padding:6px 14px;border-radius:20px;font-size:13px;font-weight:500;background:#f5f5f5;color:#333;display:flex;align-items:center;gap:6px}.type-chip[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#4caf50;font-weight:600}.table-container[_ngcontent-%COMP%]{overflow-x:auto;background:white;border-radius:8px;box-shadow:0 2px 8px #00000014}.payments-table[_ngcontent-%COMP%]{width:100%}.status-chip[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:12px;font-weight:600}.status-chip.paid[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.status-chip.failed[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.status-chip.created[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.amount-cell[_ngcontent-%COMP%]{font-weight:600;color:#2e7d32}.fee-cell[_ngcontent-%COMP%]{font-weight:500;color:#e65100;font-size:13px}.text-muted[_ngcontent-%COMP%]{color:#999;font-style:italic}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:40px 20px;color:#666}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:12px 0}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:40px 20px;color:#999}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:12px}@media (max-width: 768px){.payment-history[_ngcontent-%COMP%]{padding:16px}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}"]})}}return n})(),y1=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/notifications/health-tip`}generateWeeklyTips(){return this.http.post(`${this.apiUrl}/generate-week`,{}).pipe((0,x.T)(e=>e.data||[]))}getQueue(){return this.http.get(`${this.apiUrl}/queue`).pipe((0,x.T)(e=>({data:e.data||[],stats:e.stats||{PENDING:0,APPROVED:0,SENT:0,REJECTED:0}})))}editTip(e,o){return this.http.put(`${this.apiUrl}/queue/${e}/edit`,{message:o}).pipe((0,x.T)(i=>i.data||i))}approveTip(e){return this.http.put(`${this.apiUrl}/queue/${e}/approve`,{}).pipe((0,x.T)(o=>o.data||o))}rejectTip(e){return this.http.put(`${this.apiUrl}/queue/${e}/reject`,{}).pipe((0,x.T)(o=>o.data||o))}sendNow(e){return this.http.post(`${this.apiUrl}/queue/${e}/send-now`,{})}getHistory(e=0,o=20){const i=(new O.Nl).set("page",e.toString()).set("size",o.toString());return this.http.get(`${this.apiUrl}/history`,{params:i}).pipe((0,x.T)(r=>({data:r.data||[],totalPages:r.totalPages||0,totalElements:r.totalElements||0,currentPage:r.currentPage||0})))}getStatusColor(e){switch(e){case"PENDING":return"accent";case"APPROVED":case"SENT":return"primary";case"REJECTED":return"warn";default:return""}}getStatusIcon(e){switch(e){case"PENDING":return"hourglass_empty";case"APPROVED":return"check_circle";case"SENT":return"send";case"REJECTED":return"cancel";default:return"help"}}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const j1=["queuePaginator"],D1=["queueSort"],$1=["historyPaginator"];function I1(n,a){1&n&&(t.j41(0,"th",48),t.EFF(1,"ID"),t.k0s())}function N1(n,a){if(1&n&&(t.j41(0,"td",49),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.JRh(e.id)}}function G1(n,a){1&n&&(t.j41(0,"th",50),t.EFF(1,"Message"),t.k0s())}function w1(n,a){if(1&n&&(t.j41(0,"div",52),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.SpI(" ",e.message," ")}}function S1(n,a){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"mat-form-field",53)(2,"textarea",54),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(3);return t.Njj(r.editMessage=i)}),t.k0s()(),t.j41(3,"div",55)(4,"button",5),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.saveEdit(i))}),t.j41(5,"mat-icon"),t.EFF(6,"save"),t.k0s(),t.EFF(7," Save "),t.k0s(),t.j41(8,"button",56),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.cancelEdit())}),t.EFF(9,"Cancel"),t.k0s()()()}if(2&n){const e=t.XpG(3);t.R7$(2),t.Y8G("ngModel",e.editMessage),t.R7$(2),t.Y8G("disabled",!e.editMessage.trim())}}function A1(n,a){if(1&n&&(t.j41(0,"td",49),t.DNE(1,w1,2,1,"div",51),t.DNE(2,S1,10,2,"div",17),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngIf",o.editingTipId!==e.id),t.R7$(1),t.Y8G("ngIf",o.editingTipId===e.id)}}function V1(n,a){1&n&&(t.j41(0,"th",48),t.EFF(1,"Scheduled"),t.k0s())}function L1(n,a){if(1&n&&(t.j41(0,"td",57),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.SpI(" ",o.formatDate(e.scheduledDate)," ")}}function B1(n,a){1&n&&(t.j41(0,"th",48),t.EFF(1,"Status"),t.k0s())}function Y1(n,a){if(1&n&&(t.j41(0,"td",49)(1,"mat-chip",58)(2,"mat-icon",59),t.EFF(3),t.k0s(),t.EFF(4),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("color",o.getStatusColor(e.status)),t.R7$(2),t.SpI(" ",o.getStatusIcon(e.status)," "),t.R7$(1),t.SpI(" ",e.status," ")}}function U1(n,a){1&n&&(t.j41(0,"th",50),t.EFF(1,"Approved By"),t.k0s())}function X1(n,a){if(1&n&&(t.j41(0,"td",57),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.SpI(" ",e.approvedBy||"-"," ")}}function z1(n,a){1&n&&(t.j41(0,"th",50),t.EFF(1,"Actions"),t.k0s())}function J1(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",65),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.startEdit(i))}),t.j41(1,"mat-icon"),t.EFF(2,"edit"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Edit"),t.k0s()()}}function q1(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",66),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.approveTip(i))}),t.j41(1,"mat-icon"),t.EFF(2,"check_circle"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Approve"),t.k0s()()}}function H1(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",67),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.rejectTip(i))}),t.j41(1,"mat-icon"),t.EFF(2,"cancel"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Reject"),t.k0s()()}}function K1(n,a){1&n&&t.nrm(0,"mat-divider")}function Q1(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",65),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.sendNow(i))}),t.j41(1,"mat-icon"),t.EFF(2,"send"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Send Now"),t.k0s()()}}function W1(n,a){if(1&n&&(t.j41(0,"td",49)(1,"button",60)(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",null,61),t.DNE(6,J1,5,0,"button",62),t.DNE(7,q1,5,0,"button",63),t.DNE(8,H1,5,0,"button",64),t.DNE(9,K1,1,0,"mat-divider",17),t.DNE(10,Q1,5,0,"button",62),t.k0s()()),2&n){const e=a.$implicit,o=t.sdS(5);t.R7$(1),t.Y8G("matMenuTriggerFor",o),t.R7$(5),t.Y8G("ngIf","PENDING"===e.status),t.R7$(1),t.Y8G("ngIf","PENDING"===e.status),t.R7$(1),t.Y8G("ngIf","PENDING"===e.status),t.R7$(1),t.Y8G("ngIf","APPROVED"===e.status),t.R7$(1),t.Y8G("ngIf","APPROVED"===e.status)}}function Z1(n,a){1&n&&t.nrm(0,"tr",68)}function tu(n,a){1&n&&t.nrm(0,"tr",69)}function eu(n,a){1&n&&(t.j41(0,"tr",70)(1,"td",71)(2,"div",72)(3,"mat-icon"),t.EFF(4,"inbox"),t.k0s(),t.j41(5,"p"),t.EFF(6,'No health tips in queue. Click "Generate Week Tips" to create some.'),t.k0s()()()())}const nu=function(){return[10,25,50]};function ou(n,a){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"mat-card",19)(2,"mat-card-content")(3,"div",20)(4,"mat-form-field",21)(5,"mat-label"),t.EFF(6,"Search"),t.k0s(),t.j41(7,"input",22),t.bIt("keyup",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.applyFilter(i))}),t.k0s(),t.j41(8,"mat-icon",23),t.EFF(9,"search"),t.k0s()(),t.j41(10,"mat-button-toggle-group",24),t.bIt("valueChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.filterStatus=i)})("change",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.filterByStatus(i.filterStatus))}),t.j41(11,"mat-button-toggle",25),t.EFF(12,"All"),t.k0s(),t.j41(13,"mat-button-toggle",26),t.EFF(14,"Pending"),t.k0s(),t.j41(15,"mat-button-toggle",27),t.EFF(16,"Approved"),t.k0s(),t.j41(17,"mat-button-toggle",28),t.EFF(18,"Rejected"),t.k0s()()()()(),t.j41(19,"mat-card",29)(20,"mat-card-content")(21,"div",30)(22,"table",31,32),t.qex(24,33),t.DNE(25,I1,2,0,"th",34),t.DNE(26,N1,2,1,"td",35),t.bVm(),t.qex(27,36),t.DNE(28,G1,2,0,"th",37),t.DNE(29,A1,3,2,"td",35),t.bVm(),t.qex(30,38),t.DNE(31,V1,2,0,"th",34),t.DNE(32,L1,2,1,"td",39),t.bVm(),t.qex(33,40),t.DNE(34,B1,2,0,"th",34),t.DNE(35,Y1,5,3,"td",35),t.bVm(),t.qex(36,41),t.DNE(37,U1,2,0,"th",37),t.DNE(38,X1,2,1,"td",39),t.bVm(),t.qex(39,42),t.DNE(40,z1,2,0,"th",37),t.DNE(41,W1,11,6,"td",35),t.bVm(),t.DNE(42,Z1,1,0,"tr",43),t.DNE(43,tu,1,0,"tr",44),t.DNE(44,eu,7,0,"tr",45),t.k0s()(),t.nrm(45,"mat-paginator",46,47),t.k0s()(),t.bVm()}if(2&n){const e=t.XpG();t.R7$(10),t.Y8G("value",e.filterStatus),t.R7$(12),t.Y8G("dataSource",e.queueDataSource),t.R7$(20),t.Y8G("matHeaderRowDef",e.queueColumns),t.R7$(1),t.Y8G("matRowDefColumns",e.queueColumns),t.R7$(2),t.Y8G("pageSizeOptions",t.lJ4(5,nu))}}function au(n,a){1&n&&(t.j41(0,"th",50),t.EFF(1,"ID"),t.k0s())}function iu(n,a){if(1&n&&(t.j41(0,"td",49),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.JRh(e.id)}}function ru(n,a){1&n&&(t.j41(0,"th",50),t.EFF(1,"Message"),t.k0s())}function su(n,a){if(1&n&&(t.j41(0,"td",49)(1,"div",77),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.message)}}function cu(n,a){1&n&&(t.j41(0,"th",50),t.EFF(1,"Scheduled"),t.k0s())}function lu(n,a){if(1&n&&(t.j41(0,"td",57),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.SpI(" ",o.formatDate(e.scheduledDate)," ")}}function pu(n,a){1&n&&(t.j41(0,"th",50),t.EFF(1,"Sent At"),t.k0s())}function mu(n,a){if(1&n&&(t.j41(0,"td",57),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.SpI(" ",o.formatDateTime(e.sentAt)," ")}}function du(n,a){1&n&&(t.j41(0,"th",50),t.EFF(1,"Approved By"),t.k0s())}function gu(n,a){if(1&n&&(t.j41(0,"td",57),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.SpI(" ",e.approvedBy||"-"," ")}}function _u(n,a){1&n&&t.nrm(0,"tr",68)}function uu(n,a){1&n&&t.nrm(0,"tr",69)}function fu(n,a){1&n&&(t.j41(0,"tr",70)(1,"td",78)(2,"div",72)(3,"mat-icon"),t.EFF(4,"history"),t.k0s(),t.j41(5,"p"),t.EFF(6,"No sent health tips yet."),t.k0s()()()())}const Cu=function(){return[10,20,50]};function hu(n,a){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"mat-card",29)(2,"mat-card-content")(3,"div",30)(4,"table",73),t.qex(5,33),t.DNE(6,au,2,0,"th",37),t.DNE(7,iu,2,1,"td",35),t.bVm(),t.qex(8,36),t.DNE(9,ru,2,0,"th",37),t.DNE(10,su,3,1,"td",35),t.bVm(),t.qex(11,38),t.DNE(12,cu,2,0,"th",37),t.DNE(13,lu,2,1,"td",39),t.bVm(),t.qex(14,74),t.DNE(15,pu,2,0,"th",37),t.DNE(16,mu,2,1,"td",39),t.bVm(),t.qex(17,41),t.DNE(18,du,2,0,"th",37),t.DNE(19,gu,2,1,"td",39),t.bVm(),t.DNE(20,_u,1,0,"tr",43),t.DNE(21,uu,1,0,"tr",44),t.DNE(22,fu,7,0,"tr",45),t.k0s()(),t.j41(23,"mat-paginator",75,76),t.bIt("page",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onHistoryPageChange(i))}),t.k0s()()(),t.bVm()}if(2&n){const e=t.XpG();t.R7$(4),t.Y8G("dataSource",e.historyDataSource),t.R7$(16),t.Y8G("matHeaderRowDef",e.historyColumns),t.R7$(1),t.Y8G("matRowDefColumns",e.historyColumns),t.R7$(2),t.Y8G("length",e.historyTotalElements)("pageSize",e.historyPageSize)("pageSizeOptions",t.lJ4(6,Cu))}}function Pu(n,a){1&n&&(t.j41(0,"div",79),t.nrm(1,"mat-spinner"),t.k0s())}let bu=(()=>{class n{constructor(e,o){this.healthTipsService=e,this.snackBar=o,this.queueColumns=["id","message","scheduledDate","status","approvedBy","actions"],this.stats={PENDING:0,APPROVED:0,SENT:0,REJECTED:0},this.historyColumns=["id","message","scheduledDate","sentAt","approvedBy"],this.historyTotalElements=0,this.historyPage=0,this.historyPageSize=20,this.isLoading=!1,this.isGenerating=!1,this.activeTab="queue",this.filterStatus="ALL",this.editingTipId=null,this.editMessage="",this.queueDataSource=new s.I6([]),this.historyDataSource=new s.I6([])}ngOnInit(){this.loadQueue()}ngAfterViewInit(){this.queueDataSource.paginator=this.queuePaginator,this.queueDataSource.sort=this.queueSort}switchTab(e){this.activeTab=e,"history"===e&&0===this.historyDataSource.data.length&&this.loadHistory()}loadQueue(){this.isLoading=!0,this.healthTipsService.getQueue().subscribe({next:e=>{let o=e.data;"ALL"!==this.filterStatus&&(o=o.filter(i=>i.status===this.filterStatus)),this.queueDataSource.data=o,this.stats=e.stats,this.isLoading=!1},error:e=>{console.error("Error loading health tip queue:",e),this.showSnackBar("Failed to load health tip queue","error"),this.isLoading=!1}})}loadHistory(){this.isLoading=!0,this.healthTipsService.getHistory(this.historyPage,this.historyPageSize).subscribe({next:e=>{this.historyDataSource.data=e.data,this.historyTotalElements=e.totalElements,this.isLoading=!1},error:e=>{console.error("Error loading health tip history:",e),this.showSnackBar("Failed to load history","error"),this.isLoading=!1}})}onHistoryPageChange(e){this.historyPage=e.pageIndex,this.historyPageSize=e.pageSize,this.loadHistory()}filterByStatus(e){this.filterStatus=e,this.loadQueue()}applyFilter(e){this.queueDataSource.filter=e.target.value.trim().toLowerCase(),this.queueDataSource.paginator&&this.queueDataSource.paginator.firstPage()}generateWeeklyTips(){this.isGenerating||(this.isGenerating=!0,this.healthTipsService.generateWeeklyTips().subscribe({next:e=>{this.showSnackBar(`Generated ${e.length} health tips for the week`,"success"),this.loadQueue(),this.isGenerating=!1},error:e=>{console.error("Error generating tips:",e),this.showSnackBar("Failed to generate tips. Try again.","error"),this.isGenerating=!1}}))}startEdit(e){this.editingTipId=e.id,this.editMessage=e.message}cancelEdit(){this.editingTipId=null,this.editMessage=""}saveEdit(e){this.editMessage.trim()&&this.healthTipsService.editTip(e.id,this.editMessage.trim()).subscribe({next:()=>{this.showSnackBar("Tip updated successfully","success"),this.editingTipId=null,this.editMessage="",this.loadQueue()},error:o=>{console.error("Error editing tip:",o),this.showSnackBar("Failed to update tip","error")}})}approveTip(e){this.healthTipsService.approveTip(e.id).subscribe({next:()=>{this.showSnackBar("Tip approved","success"),this.loadQueue()},error:o=>{console.error("Error approving tip:",o),this.showSnackBar("Failed to approve tip","error")}})}rejectTip(e){confirm("Reject this health tip?")&&this.healthTipsService.rejectTip(e.id).subscribe({next:()=>{this.showSnackBar("Tip rejected","success"),this.loadQueue()},error:o=>{console.error("Error rejecting tip:",o),this.showSnackBar("Failed to reject tip","error")}})}sendNow(e){confirm("Send this health tip to all subscribed users NOW?")&&this.healthTipsService.sendNow(e.id).subscribe({next:o=>{this.showSnackBar(`Tip sent to ${o?.notifiedCount||0} users`,"success"),this.loadQueue()},error:o=>{console.error("Error sending tip:",o),this.showSnackBar(o?.error?.message||"Failed to send tip","error")}})}getStatusColor(e){return this.healthTipsService.getStatusColor(e)}getStatusIcon(e){return this.healthTipsService.getStatusIcon(e)}formatDate(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"-"}formatDateTime(e){return e?new Date(e).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}showSnackBar(e,o){this.snackBar.open(e,"Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:"success"===o?"snackbar-success":"snackbar-error"})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(y1),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-health-tips-management"]],viewQuery:function(o,i){if(1&o&&(t.GBs(j1,5),t.GBs(D1,5),t.GBs($1,5)),2&o){let r;t.mGM(r=t.lsd())&&(i.queuePaginator=r.first),t.mGM(r=t.lsd())&&(i.queueSort=r.first),t.mGM(r=t.lsd())&&(i.historyPaginator=r.first)}},decls:45,vars:10,consts:[[1,"health-tips-container"],[1,"header-section"],[1,"page-title"],[1,"title-icon"],[1,"header-actions"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"stats-row"],[1,"stat-card","stat-pending"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","stat-approved"],[1,"stat-card","stat-sent"],[1,"stat-card","stat-rejected"],[1,"tab-section"],[3,"value","change"],["value","queue"],["value","history"],[4,"ngIf"],["class","loading-overlay",4,"ngIf"],[1,"filter-card"],[1,"filter-row"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search tips...",3,"keyup"],["matPrefix",""],[3,"value","valueChange","change"],["value","ALL"],["value","PENDING"],["value","APPROVED"],["value","REJECTED"],[1,"table-card"],[1,"table-container"],["mat-table","","matSort","",1,"health-tip-table",3,"dataSource"],["queueSort","matSort"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","message"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","scheduledDate"],["mat-cell","","class","date-cell",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","approvedBy"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],["queuePaginator",""],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["class","tip-message tip-message-truncated",4,"ngIf"],[1,"tip-message","tip-message-truncated"],["appearance","outline",1,"edit-field"],["matInput","","rows","3",3,"ngModel","ngModelChange"],[1,"edit-actions"],["mat-button","",3,"click"],["mat-cell","",1,"date-cell"],["selected","",1,"status-chip",3,"color"],[1,"status-chip-icon",2,"font-size","16px","width","16px","height","16px","margin-right","4px"],["mat-icon-button","","aria-label","Actions menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","","class","approve-action",3,"click",4,"ngIf"],["mat-menu-item","","class","delete-action",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"approve-action",3,"click"],["mat-menu-item","",1,"delete-action",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","6",1,"mat-cell"],[1,"no-data"],["mat-table","",1,"health-tip-table",3,"dataSource"],["matColumnDef","sentAt"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],["historyPaginator",""],[1,"tip-message"],["colspan","5",1,"mat-cell"],[1,"loading-overlay"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2",2)(3,"mat-icon",3),t.EFF(4,"health_and_safety"),t.k0s(),t.EFF(5," Health Tips Management "),t.k0s(),t.j41(6,"div",4)(7,"button",5),t.bIt("click",function(){return i.generateWeeklyTips()}),t.j41(8,"mat-icon"),t.EFF(9,"auto_awesome"),t.k0s(),t.EFF(10),t.k0s()()(),t.j41(11,"div",6)(12,"div",7)(13,"mat-card")(14,"div",8),t.EFF(15),t.k0s(),t.j41(16,"div",9),t.EFF(17,"Pending"),t.k0s()()(),t.j41(18,"div",10)(19,"mat-card")(20,"div",8),t.EFF(21),t.k0s(),t.j41(22,"div",9),t.EFF(23,"Approved"),t.k0s()()(),t.j41(24,"div",11)(25,"mat-card")(26,"div",8),t.EFF(27),t.k0s(),t.j41(28,"div",9),t.EFF(29,"Sent"),t.k0s()()(),t.j41(30,"div",12)(31,"mat-card")(32,"div",8),t.EFF(33),t.k0s(),t.j41(34,"div",9),t.EFF(35,"Rejected"),t.k0s()()()(),t.j41(36,"div",13)(37,"mat-button-toggle-group",14),t.bIt("change",function(c){return i.switchTab(c.value)}),t.j41(38,"mat-button-toggle",15),t.EFF(39,"Queue"),t.k0s(),t.j41(40,"mat-button-toggle",16),t.EFF(41,"Sent History"),t.k0s()()(),t.DNE(42,ou,47,6,"ng-container",17),t.DNE(43,hu,25,7,"ng-container",17),t.DNE(44,Pu,2,0,"div",18),t.k0s()),2&o&&(t.R7$(7),t.Y8G("disabled",i.isGenerating),t.R7$(3),t.SpI(" ",i.isGenerating?"Generating...":"Generate Week Tips"," "),t.R7$(5),t.JRh(i.stats.PENDING),t.R7$(6),t.JRh(i.stats.APPROVED),t.R7$(6),t.JRh(i.stats.SENT),t.R7$(6),t.JRh(i.stats.REJECTED),t.R7$(4),t.Y8G("value",i.activeTab),t.R7$(5),t.Y8G("ngIf","queue"===i.activeTab),t.R7$(1),t.Y8G("ngIf","history"===i.activeTab),t.R7$(1),t.Y8G("ngIf",i.isLoading))},dependencies:[p.bT,l.me,l.BC,l.vS,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,s.ky,$.iy,G.B4,G.aE,g.$z,g.iY,C.An,k.fg,m.rl,m.nJ,m.JW,u.RN,u.m2,L.Jl,h.LG,X.ec,X.pc,f.kk,f.fb,f.Cp,z.q],styles:[".health-tips-container[_ngcontent-%COMP%]{padding:24px}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:0;font-size:24px;font-weight:500}.title-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px;color:#4caf50}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}.stats-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:24px;flex-wrap:wrap}.stat-card[_ngcontent-%COMP%]{flex:1;min-width:140px}.stat-card[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{text-align:center;padding:16px}.stat-value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;line-height:1.2}.stat-label[_ngcontent-%COMP%]{font-size:13px;color:#666;margin-top:4px}.stat-pending[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#ff9800}.stat-approved[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#2196f3}.stat-sent[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#4caf50}.stat-rejected[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#f44336}.filter-card[_ngcontent-%COMP%]{margin-bottom:24px}.filter-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex-wrap:wrap}.search-field[_ngcontent-%COMP%]{flex:1;min-width:200px}.tab-section[_ngcontent-%COMP%], .table-card[_ngcontent-%COMP%]{margin-bottom:24px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.health-tip-table[_ngcontent-%COMP%]{width:100%}.tip-message[_ngcontent-%COMP%]{max-width:400px;white-space:pre-wrap;word-break:break-word;font-size:13px;line-height:1.5}.tip-message-truncated[_ngcontent-%COMP%]{max-height:60px;overflow:hidden;text-overflow:ellipsis;cursor:pointer}.tip-message-truncated[_ngcontent-%COMP%]:hover{max-height:none}.status-chip[_ngcontent-%COMP%]{font-size:11px;font-weight:600}.date-cell[_ngcontent-%COMP%]{font-size:13px;color:#555;white-space:nowrap}.no-data[_ngcontent-%COMP%]{text-align:center;padding:48px 16px;color:#999}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:8px}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(255,255,255,.7);display:flex;align-items:center;justify-content:center;z-index:1000}.edit-field[_ngcontent-%COMP%]{width:100%}.edit-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:8px}.delete-action[_ngcontent-%COMP%]{color:#f44336}.approve-action[_ngcontent-%COMP%]{color:#4caf50}@media (max-width: 768px){.health-tips-container[_ngcontent-%COMP%]{padding:16px}.header-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.stats-row[_ngcontent-%COMP%]{flex-direction:column}.stat-card[_ngcontent-%COMP%]{min-width:unset}}"]})}}return n})(),at=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/rentals`}getPendingPosts(e=0,o=20){return this.http.get(`${this.apiUrl}/pending`,{params:{page:e.toString(),size:o.toString()}})}getAllPosts(e=0,o=20,i=""){let r={page:e.toString(),size:o.toString()};return i&&(r.search=i),this.http.get(`${this.apiUrl}/admin/all`,{params:r})}getReportedPosts(e=0,o=20){return this.http.get(`${this.apiUrl}/admin/reported`,{params:{page:e.toString(),size:o.toString()}})}approvePost(e){return this.http.put(`${this.apiUrl}/${e}/approve`,{})}rejectPost(e){return this.http.put(`${this.apiUrl}/${e}/reject`,{})}deletePost(e){return this.http.delete(`${this.apiUrl}/${e}`)}changePostStatus(e,o){return this.http.put(`${this.apiUrl}/${e}/status`,{status:o})}adminUpdatePost(e,o){return this.http.put(`${this.apiUrl}/${e}/admin-update`,o)}toggleFeatured(e){return this.http.put(`${this.apiUrl}/${e}/featured`,{})}markAsRented(e){return this.http.put(`${this.apiUrl}/${e}/rented`,{})}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Mu(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",14),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return i.searchText="",t.Njj(i.onSearchChange())}),t.j41(1,"mat-icon"),t.EFF(2,"clear"),t.k0s()()}}function vu(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",9)(1,"mat-form-field",10)(2,"mat-label"),t.EFF(3,"Search by location"),t.k0s(),t.j41(4,"input",11),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.searchText=i)})("keyup.enter",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onSearchChange())}),t.k0s(),t.DNE(5,Mu,3,0,"button",12),t.j41(6,"mat-icon",13),t.EFF(7,"search"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngModel",e.searchText),t.R7$(1),t.Y8G("ngIf",e.searchText)}}function xu(n,a){1&n&&(t.j41(0,"div",15),t.nrm(1,"mat-spinner",16),t.j41(2,"p"),t.EFF(3,"Loading posts..."),t.k0s()())}function Fu(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"No rental posts are waiting for approval."),t.k0s())}function Ou(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"No rental posts yet."),t.k0s())}function ku(n,a){if(1&n&&(t.j41(0,"div",17)(1,"mat-icon",18),t.EFF(2,"vpn_key"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No posts found"),t.k0s(),t.DNE(5,Fu,2,0,"p",19),t.DNE(6,Ou,2,0,"p",19),t.k0s()),2&n){const e=t.XpG();t.R7$(5),t.Y8G("ngIf","pending"===e.activeTab),t.R7$(1),t.Y8G("ngIf","all"===e.activeTab)}}function Eu(n,a){1&n&&(t.j41(0,"th",37),t.EFF(1,"Image"),t.k0s())}function Ru(n,a){if(1&n&&t.nrm(0,"img",42),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.Y8G("src",o.getImageUrl(e.imageUrls),t.B4B)}}function Tu(n,a){1&n&&(t.j41(0,"mat-icon",43),t.EFF(1,"vpn_key"),t.k0s())}function yu(n,a){if(1&n&&(t.j41(0,"td",38)(1,"div",39),t.DNE(2,Ru,1,1,"img",40),t.DNE(3,Tu,2,0,"mat-icon",41),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.imageUrls),t.R7$(1),t.Y8G("ngIf",!e.imageUrls)}}function ju(n,a){1&n&&(t.j41(0,"th",37),t.EFF(1,"Title"),t.k0s())}function Du(n,a){if(1&n&&(t.j41(0,"div",46),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function $u(n,a){if(1&n&&(t.j41(0,"td",38)(1,"div",44),t.EFF(2),t.k0s(),t.DNE(3,Du,2,1,"div",45),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(1),t.Y8G("ngIf",e.description)}}function Iu(n,a){1&n&&(t.j41(0,"th",37),t.EFF(1,"Price"),t.k0s())}function Nu(n,a){if(1&n&&(t.j41(0,"td",38)(1,"span",47),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatPrice(e.price,e.priceUnit))}}function Gu(n,a){1&n&&(t.j41(0,"th",37),t.EFF(1,"Owner"),t.k0s())}function wu(n,a){if(1&n&&(t.j41(0,"span",52),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.location)}}function Su(n,a){if(1&n&&(t.j41(0,"td",38)(1,"div",48)(2,"span",49),t.EFF(3),t.k0s(),t.j41(4,"span",50),t.EFF(5),t.k0s(),t.DNE(6,wu,2,1,"span",51),t.k0s()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.sellerPhone),t.R7$(1),t.Y8G("ngIf",e.location)}}function Au(n,a){1&n&&(t.j41(0,"th",37),t.EFF(1,"Category"),t.k0s())}function Vu(n,a){if(1&n&&(t.j41(0,"span",54),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(1),t.JRh(o.getCategoryLabel(e.category))}}function Lu(n,a){if(1&n&&(t.j41(0,"td",38),t.DNE(1,Vu,2,1,"span",53),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.category)}}function Bu(n,a){1&n&&(t.j41(0,"th",37),t.EFF(1,"Status"),t.k0s())}function Yu(n,a){if(1&n&&(t.j41(0,"td",38)(1,"span",55),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.SpI(" ",o.getStatusLabel(e.status)," ")}}function Uu(n,a){1&n&&(t.j41(0,"th",37),t.EFF(1,"Type"),t.k0s())}function Xu(n,a){1&n&&(t.j41(0,"span",58)(1,"mat-icon",59),t.EFF(2,"payments"),t.k0s(),t.EFF(3," PAID "),t.k0s())}function zu(n,a){1&n&&(t.j41(0,"span",60),t.EFF(1,"FREE"),t.k0s())}function Ju(n,a){if(1&n&&(t.j41(0,"td",38),t.DNE(1,Xu,4,0,"span",56),t.DNE(2,zu,2,0,"span",57),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.isPaid),t.R7$(1),t.Y8G("ngIf",!e.isPaid)}}function qu(n,a){1&n&&(t.j41(0,"th",37),t.EFF(1,"Featured"),t.k0s())}function Hu(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",38)(1,"button",61),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.toggleFeatured(r))}),t.j41(2,"mat-icon"),t.EFF(3),t.k0s()()()}if(2&n){const e=a.$implicit;t.R7$(1),t.AVh("is-featured",e.featured),t.Y8G("matTooltip",e.featured?"Remove from featured":"Mark as featured"),t.R7$(2),t.JRh(e.featured?"star":"star_border")}}function Ku(n,a){1&n&&(t.j41(0,"th",37),t.EFF(1,"Date"),t.k0s())}function Qu(n,a){if(1&n&&(t.j41(0,"td",38)(1,"span",62),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function Wu(n,a){1&n&&(t.j41(0,"th",37),t.EFF(1,"Action"),t.k0s())}function Zu(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",67),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,d=t.XpG(2);return t.Njj(d.onStatusChange(c,r.value))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.xc7("color",e.color),t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function tf(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",38)(1,"button",63),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.editPost(r))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()(),t.j41(4,"button",64),t.EFF(5," Change Status "),t.j41(6,"mat-icon"),t.EFF(7,"arrow_drop_down"),t.k0s()(),t.j41(8,"mat-menu",null,65),t.DNE(10,Zu,5,4,"button",66),t.k0s()()}if(2&n){const e=a.$implicit,o=t.sdS(9),i=t.XpG(2);t.R7$(4),t.Y8G("matMenuTriggerFor",o),t.R7$(6),t.Y8G("ngForOf",i.getAvailableStatuses(e))}}function ef(n,a){1&n&&t.nrm(0,"tr",68)}function nf(n,a){1&n&&t.nrm(0,"tr",69)}function of(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",70)(1,"button",71),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage-1))}),t.j41(2,"mat-icon"),t.EFF(3,"chevron_left"),t.k0s(),t.EFF(4," Previous "),t.k0s(),t.j41(5,"span",72),t.EFF(6),t.k0s(),t.j41(7,"button",71),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage+1))}),t.EFF(8," Next "),t.j41(9,"mat-icon"),t.EFF(10,"chevron_right"),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("disabled",0===e.currentPage),t.R7$(5),t.E5c("Page ",e.currentPage+1," of ",e.totalPages," (",e.totalItems," posts)"),t.R7$(1),t.Y8G("disabled",e.currentPage>=e.totalPages-1)}}const Ft=function(){return["image","title","price","seller","category","status","type","featured","date","actions"]};function af(n,a){if(1&n&&(t.j41(0,"div",20)(1,"table",21),t.qex(2,22),t.DNE(3,Eu,2,0,"th",23),t.DNE(4,yu,4,2,"td",24),t.bVm(),t.qex(5,25),t.DNE(6,ju,2,0,"th",23),t.DNE(7,$u,4,2,"td",24),t.bVm(),t.qex(8,26),t.DNE(9,Iu,2,0,"th",23),t.DNE(10,Nu,3,1,"td",24),t.bVm(),t.qex(11,27),t.DNE(12,Gu,2,0,"th",23),t.DNE(13,Su,7,3,"td",24),t.bVm(),t.qex(14,28),t.DNE(15,Au,2,0,"th",23),t.DNE(16,Lu,2,1,"td",24),t.bVm(),t.qex(17,29),t.DNE(18,Bu,2,0,"th",23),t.DNE(19,Yu,3,2,"td",24),t.bVm(),t.qex(20,30),t.DNE(21,Uu,2,0,"th",23),t.DNE(22,Ju,3,2,"td",24),t.bVm(),t.qex(23,31),t.DNE(24,qu,2,0,"th",23),t.DNE(25,Hu,4,4,"td",24),t.bVm(),t.qex(26,32),t.DNE(27,Ku,2,0,"th",23),t.DNE(28,Qu,3,1,"td",24),t.bVm(),t.qex(29,33),t.DNE(30,Wu,2,0,"th",23),t.DNE(31,tf,11,2,"td",24),t.bVm(),t.DNE(32,ef,1,0,"tr",34),t.DNE(33,nf,1,0,"tr",35),t.k0s(),t.DNE(34,of,11,5,"div",36),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.posts),t.R7$(31),t.Y8G("matHeaderRowDef",t.lJ4(4,Ft)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(5,Ft)),t.R7$(1),t.Y8G("ngIf",e.totalPages>1)}}let rf=(()=>{class n{constructor(e,o,i){this.rentalService=e,this.snackBar=o,this.dialog=i,this.posts=[],this.loading=!0,this.activeTab="pending",this.currentPage=0,this.totalPages=0,this.totalItems=0,this.pageSize=20,this.searchText="",this.statusOptions=[{value:"APPROVED",label:"Approve",icon:"check_circle",color:"#4caf50"},{value:"REJECTED",label:"Reject",icon:"cancel",color:"#f44336"},{value:"RENTED",label:"Mark Rented",icon:"vpn_key",color:"#9c27b0"},{value:"HOLD",label:"Hold",icon:"pause_circle",color:"#ff9800"},{value:"HIDDEN",label:"Hide",icon:"visibility_off",color:"#9e9e9e"},{value:"CORRECTION_REQUIRED",label:"Correction Required",icon:"edit_note",color:"#2196f3"},{value:"REMOVED",label:"Remove",icon:"delete_forever",color:"#b71c1c"}]}ngOnInit(){this.loadPosts()}loadPosts(){this.loading=!0,("pending"===this.activeTab?this.rentalService.getPendingPosts(this.currentPage,this.pageSize):this.rentalService.getAllPosts(this.currentPage,this.pageSize,this.searchText)).subscribe({next:o=>{const i=o.data;this.posts=i?.content||[],this.totalPages=i?.totalPages||0,this.totalItems=i?.totalItems||0,this.loading=!1},error:o=>{console.error("Error loading rental posts:",o),this.loading=!1,this.snackBar.open("Failed to load posts","Close",{duration:3e3})}})}onSearchChange(){this.currentPage=0,this.loadPosts()}switchTab(e){this.activeTab=e,this.currentPage=0,this.loadPosts()}approvePost(e){this.rentalService.approvePost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" approved`,"OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to approve post","Close",{duration:3e3})}})}rejectPost(e){confirm(`Reject "${e.title}"?`)&&this.rentalService.rejectPost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" rejected`,"OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to reject post","Close",{duration:3e3})}})}deletePost(e){confirm(`Delete "${e.title}" permanently?`)&&this.rentalService.deletePost(e.id).subscribe({next:()=>{this.snackBar.open("Post deleted","OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to delete post","Close",{duration:3e3})}})}editPost(e){this.dialog.open(B,{width:"600px",maxHeight:"90vh",data:{postType:"rental",post:{...e}}}).afterClosed().subscribe(i=>{i&&this.rentalService.adminUpdatePost(e.id,i).subscribe({next:()=>{this.snackBar.open("Post updated","OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to update post","Close",{duration:3e3})}})})}getImageUrl(e){if(!e)return"";const o=e.split(",")[0]?.trim();return(0,E.V)(o||null)}toggleFeatured(e){this.rentalService.toggleFeatured(e.id).subscribe({next:o=>{const r=o.data?.featured;e.featured=r,this.snackBar.open(r?`"${e.title}" marked as featured`:`"${e.title}" removed from featured`,"OK",{duration:3e3})},error:()=>{this.snackBar.open("Failed to toggle featured","Close",{duration:3e3})}})}onStatusChange(e,o){if("REMOVED"===o){if(!confirm(`Remove "${e.title}" permanently?`))return;return void this.rentalService.deletePost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" removed`,"OK",{duration:3e3}),this.loadPosts()},error:()=>this.snackBar.open("Failed to remove post","Close",{duration:3e3})})}if("RENTED"===o)return void this.rentalService.markAsRented(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" marked as rented`,"OK",{duration:3e3}),this.loadPosts()},error:()=>this.snackBar.open("Failed to mark as rented","Close",{duration:3e3})});const i=this.statusOptions.find(r=>r.value===o)?.label||o;this.rentalService.changePostStatus(e.id,o).subscribe({next:()=>{this.snackBar.open(`"${e.title}" \u2192 ${i}`,"OK",{duration:3e3}),this.loadPosts()},error:()=>this.snackBar.open("Failed to change status","Close",{duration:3e3})})}getAvailableStatuses(e){return this.statusOptions.filter(o=>o.value!==e.status)}getStatusColor(e){switch(e){case"PENDING_APPROVAL":case"HOLD":case"FLAGGED":return"warn";case"APPROVED":case"CORRECTION_REQUIRED":return"primary";case"REJECTED":return"accent";default:return""}}getStatusLabel(e){switch(e){case"PENDING_APPROVAL":return"Pending";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";case"RENTED":return"Rented";case"HOLD":return"On Hold";case"HIDDEN":return"Hidden";case"CORRECTION_REQUIRED":return"Correction Required";case"FLAGGED":return"Flagged";case"REMOVED":return"Removed";default:return e}}getCategoryLabel(e){switch(e){case"SHOP":return"Shop";case"AUTO":return"Auto";case"BIKE":return"Bike";case"HOUSE":return"House";case"LAND":return"Land";case"EQUIPMENT":return"Equipment";case"FURNITURE":return"Furniture";default:return e}}getPriceUnitLabel(e){switch(e){case"per_hour":return"/hr";case"per_day":return"/day";case"per_month":return"/mo";default:return""}}formatPrice(e,o){return null==e?"Negotiable":"\u20b9"+e.toLocaleString("en-IN")+this.getPriceUnitLabel(o)}formatDate(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}onPageChange(e){this.currentPage=e,this.loadPosts()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(at),t.rXU(b.UG),t.rXU(M.bZ))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-rental-management"]],decls:15,vars:6,consts:[[1,"rental-management"],[1,"header"],[1,"subtitle"],[1,"tabs"],["mat-flat-button","",3,"color","click"],["class","search-filter",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","posts-container",4,"ngIf"],[1,"search-filter"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Type location and press Enter...",3,"ngModel","ngModelChange","keyup.enter"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],["matPrefix",""],["mat-icon-button","","matSuffix","",3,"click"],[1,"loading-container"],["diameter","40"],[1,"empty-state"],[1,"empty-icon"],[4,"ngIf"],[1,"posts-container"],["mat-table","",1,"posts-table",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","price"],["matColumnDef","seller"],["matColumnDef","category"],["matColumnDef","status"],["matColumnDef","type"],["matColumnDef","featured"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","pagination",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"post-image"],["alt","Rental","loading","lazy",3,"src",4,"ngIf"],["class","no-image",4,"ngIf"],["alt","Rental","loading","lazy",3,"src"],[1,"no-image"],[1,"post-title"],["class","post-description",4,"ngIf"],[1,"post-description"],[1,"price"],[1,"seller-info"],[1,"seller-name"],[1,"seller-phone"],["class","seller-location",4,"ngIf"],[1,"seller-location"],["class","category-chip",4,"ngIf"],[1,"category-chip"],[1,"status-badge",3,"ngClass"],["class","type-badge type-paid",4,"ngIf"],["class","type-badge type-free",4,"ngIf"],[1,"type-badge","type-paid"],[1,"badge-icon"],[1,"type-badge","type-free"],["mat-icon-button","",1,"featured-toggle",3,"matTooltip","click"],[1,"date"],["mat-icon-button","","color","primary","matTooltip","Edit",3,"click"],["mat-stroked-button","",1,"action-dropdown",3,"matMenuTriggerFor"],["statusMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"pagination"],["mat-button","",3,"disabled","click"],[1,"page-info"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Rental Management"),t.k0s(),t.j41(4,"p",2),t.EFF(5,"Review and manage rental posts - shops, houses, autos, bikes & more"),t.k0s()(),t.j41(6,"div",3)(7,"button",4),t.bIt("click",function(){return i.switchTab("pending")}),t.EFF(8," Pending Approval "),t.k0s(),t.j41(9,"button",4),t.bIt("click",function(){return i.switchTab("all")}),t.EFF(10," All Posts "),t.k0s()(),t.DNE(11,vu,8,2,"div",5),t.DNE(12,xu,4,0,"div",6),t.DNE(13,ku,7,2,"div",7),t.DNE(14,af,35,6,"div",8),t.k0s()),2&o&&(t.R7$(7),t.Y8G("color","pending"===i.activeTab?"primary":void 0),t.R7$(2),t.Y8G("color","all"===i.activeTab?"primary":void 0),t.R7$(2),t.Y8G("ngIf","all"===i.activeTab),t.R7$(1),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.posts.length),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.posts.length>0))},dependencies:[p.YU,p.Sq,p.bT,l.me,l.BC,l.vS,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,g.iY,C.An,k.fg,m.rl,m.nJ,m.JW,m.yw,R.oV,h.LG,f.kk,f.fb,f.Cp],styles:[".rental-management[_ngcontent-%COMP%]{padding:24px}.rental-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:24px}.rental-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600}.rental-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.rental-management[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:24px}.rental-management[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:140px}.rental-management[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]{margin-bottom:16px}.rental-management[_ngcontent-%COMP%]   .search-filter[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%;max-width:400px}.rental-management[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:48px}.rental-management[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.rental-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:64px 24px}.rental-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc}.rental-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.rental-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.rental-management[_ngcontent-%COMP%]   .posts-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #00000014}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]{width:100%}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;background:#f5f5f5;display:flex;align-items:center;justify-content:center}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{color:#ccc;font-size:28px}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#333}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-description[_ngcontent-%COMP%]{font-size:12px;color:#888;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:600;color:#ff6f00;font-size:14px}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-name[_ngcontent-%COMP%]{font-weight:500;font-size:13px}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-phone[_ngcontent-%COMP%]{font-size:12px;color:#666}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-location[_ngcontent-%COMP%]{font-size:11px;color:#999}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100;padding:2px 10px;border-radius:12px;font-size:12px;font-weight:500}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;font-size:12px;font-weight:500;white-space:nowrap}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-pending_approval[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-approved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rented[_ngcontent-%COMP%]{background:#f3e5f5;color:#6a1b9a}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-flagged[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hold[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hidden[_ngcontent-%COMP%]{background:#eceff1;color:#546e7a}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-correction_required[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-removed[_ngcontent-%COMP%]{background:#fce4ec;color:#b71c1c}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#888;white-space:nowrap}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .action-dropdown[_ngcontent-%COMP%]{font-size:13px;white-space:nowrap}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:3px;padding:3px 10px;border-radius:12px;font-size:11px;font-weight:600;letter-spacing:.5px}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]   .badge-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-paid[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32;border:1px solid #a5d6a7}.rental-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .type-free[_ngcontent-%COMP%]{background:#f5f5f5;color:#9e9e9e;border:1px solid #e0e0e0}.rental-management[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:16px;border-top:1px solid #eee}.rental-management[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:13px;color:#666}"]})}}return n})();function sf(n,a){1&n&&(t.j41(0,"div",7),t.nrm(1,"mat-spinner",8),t.j41(2,"p"),t.EFF(3,"Loading reported posts..."),t.k0s()())}function cf(n,a){1&n&&(t.j41(0,"div",9)(1,"mat-icon",10),t.EFF(2,"verified"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No reported posts"),t.k0s(),t.j41(5,"p"),t.EFF(6,"All clear! No rental posts have been reported by users."),t.k0s()())}function lf(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Image"),t.k0s())}function pf(n,a){if(1&n&&t.nrm(0,"img",32),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.Y8G("src",o.getImageUrl(e.imageUrls),t.B4B)}}function mf(n,a){1&n&&(t.j41(0,"mat-icon",33),t.EFF(1,"vpn_key"),t.k0s())}function df(n,a){if(1&n&&(t.j41(0,"td",28)(1,"div",29),t.DNE(2,pf,1,1,"img",30),t.DNE(3,mf,2,0,"mat-icon",31),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.imageUrls),t.R7$(1),t.Y8G("ngIf",!e.imageUrls)}}function gf(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Title"),t.k0s())}function _f(n,a){if(1&n&&(t.j41(0,"div",36),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function uf(n,a){if(1&n&&(t.j41(0,"td",28)(1,"div",34),t.EFF(2),t.k0s(),t.DNE(3,_f,2,1,"div",35),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(1),t.Y8G("ngIf",e.description)}}function ff(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Reports"),t.k0s())}function Cf(n,a){if(1&n&&(t.j41(0,"td",28)(1,"span",37)(2,"mat-icon",38),t.EFF(3,"flag"),t.k0s(),t.EFF(4),t.k0s()()),2&n){const e=a.$implicit;t.R7$(1),t.AVh("high",e.reportCount>=3),t.R7$(3),t.SpI(" ",e.reportCount," ")}}function hf(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Category"),t.k0s())}function Pf(n,a){if(1&n&&(t.j41(0,"td",28)(1,"span",39),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.getCategoryLabel(e.category))}}function bf(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Owner"),t.k0s())}function Mf(n,a){if(1&n&&(t.j41(0,"td",28)(1,"div",40)(2,"span",41),t.EFF(3),t.k0s(),t.j41(4,"span",42),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.sellerPhone)}}function vf(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Status"),t.k0s())}function xf(n,a){if(1&n&&(t.j41(0,"td",28)(1,"span",43),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.SpI(" ",o.getStatusLabel(e.status)," ")}}function Ff(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Date"),t.k0s())}function Of(n,a){if(1&n&&(t.j41(0,"td",28)(1,"span",44),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function kf(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Action"),t.k0s())}function Ef(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",48),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,d=t.XpG(2);return t.Njj(d.onStatusChange(c,r.value))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.xc7("color",e.color),t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function Rf(n,a){if(1&n&&(t.j41(0,"td",28)(1,"button",45),t.EFF(2," Change Status "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",null,46),t.DNE(7,Ef,5,4,"button",47),t.k0s()()),2&n){const e=a.$implicit,o=t.sdS(6),i=t.XpG(2);t.R7$(1),t.Y8G("matMenuTriggerFor",o),t.R7$(6),t.Y8G("ngForOf",i.getAvailableStatuses(e))}}function Tf(n,a){1&n&&t.nrm(0,"tr",49)}function yf(n,a){1&n&&t.nrm(0,"tr",50)}function jf(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",51)(1,"button",52),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage-1))}),t.j41(2,"mat-icon"),t.EFF(3,"chevron_left"),t.k0s(),t.EFF(4," Previous "),t.k0s(),t.j41(5,"span",53),t.EFF(6),t.k0s(),t.j41(7,"button",52),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage+1))}),t.EFF(8," Next "),t.j41(9,"mat-icon"),t.EFF(10,"chevron_right"),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("disabled",0===e.currentPage),t.R7$(5),t.E5c("Page ",e.currentPage+1," of ",e.totalPages," (",e.totalItems," posts)"),t.R7$(1),t.Y8G("disabled",e.currentPage>=e.totalPages-1)}}const Ot=function(){return["image","title","reports","category","phone","status","date","actions"]};function Df(n,a){if(1&n&&(t.j41(0,"div",11)(1,"div",12)(2,"mat-icon"),t.EFF(3,"flag"),t.k0s(),t.j41(4,"span"),t.EFF(5),t.k0s()(),t.j41(6,"table",13),t.qex(7,14),t.DNE(8,lf,2,0,"th",15),t.DNE(9,df,4,2,"td",16),t.bVm(),t.qex(10,17),t.DNE(11,gf,2,0,"th",15),t.DNE(12,uf,4,2,"td",16),t.bVm(),t.qex(13,18),t.DNE(14,ff,2,0,"th",15),t.DNE(15,Cf,5,3,"td",16),t.bVm(),t.qex(16,19),t.DNE(17,hf,2,0,"th",15),t.DNE(18,Pf,3,1,"td",16),t.bVm(),t.qex(19,20),t.DNE(20,bf,2,0,"th",15),t.DNE(21,Mf,6,2,"td",16),t.bVm(),t.qex(22,21),t.DNE(23,vf,2,0,"th",15),t.DNE(24,xf,3,2,"td",16),t.bVm(),t.qex(25,22),t.DNE(26,Ff,2,0,"th",15),t.DNE(27,Of,3,1,"td",16),t.bVm(),t.qex(28,23),t.DNE(29,kf,2,0,"th",15),t.DNE(30,Rf,8,2,"td",16),t.bVm(),t.DNE(31,Tf,1,0,"tr",24),t.DNE(32,yf,1,0,"tr",25),t.k0s(),t.DNE(33,jf,11,5,"div",26),t.k0s()),2&n){const e=t.XpG();t.R7$(5),t.Lme("",e.totalItems," reported post",e.totalItems>1?"s":"",""),t.R7$(1),t.Y8G("dataSource",e.posts),t.R7$(25),t.Y8G("matHeaderRowDef",t.lJ4(6,Ot)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(7,Ot)),t.R7$(1),t.Y8G("ngIf",e.totalPages>1)}}let $f=(()=>{class n{constructor(e,o){this.rentalService=e,this.snackBar=o,this.posts=[],this.loading=!0,this.currentPage=0,this.totalPages=0,this.totalItems=0,this.pageSize=20,this.statusOptions=[{value:"APPROVED",label:"Approve",icon:"check_circle",color:"#4caf50"},{value:"REJECTED",label:"Reject",icon:"cancel",color:"#f44336"},{value:"HOLD",label:"Hold",icon:"pause_circle",color:"#ff9800"},{value:"HIDDEN",label:"Hide",icon:"visibility_off",color:"#9e9e9e"},{value:"CORRECTION_REQUIRED",label:"Correction Required",icon:"edit_note",color:"#2196f3"},{value:"REMOVED",label:"Remove",icon:"delete_forever",color:"#b71c1c"}]}ngOnInit(){this.loadReportedPosts()}loadReportedPosts(){this.loading=!0,this.rentalService.getReportedPosts(this.currentPage,this.pageSize).subscribe({next:e=>{const o=e.data;this.posts=o?.content||[],this.totalPages=o?.totalPages||0,this.totalItems=o?.totalItems||0,this.loading=!1},error:e=>{console.error("Error loading reported rental posts:",e),this.loading=!1,this.snackBar.open("Failed to load reported posts","Close",{duration:3e3})}})}onStatusChange(e,o){if("REMOVED"===o){if(!confirm(`Remove "${e.title}" permanently? This will delete the post.`))return;return void this.rentalService.deletePost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" removed`,"OK",{duration:3e3}),this.loadReportedPosts()},error:()=>{this.snackBar.open("Failed to remove post","Close",{duration:3e3})}})}const r=this.statusOptions.find(c=>c.value===o)?.label||o;this.rentalService.changePostStatus(e.id,o).subscribe({next:()=>{this.snackBar.open(`"${e.title}" \u2192 ${r}`,"OK",{duration:3e3}),this.loadReportedPosts()},error:()=>{this.snackBar.open(`Failed to change status to ${r}`,"Close",{duration:3e3})}})}getImageUrl(e){if(!e)return"";const o=e.split(",")[0]?.trim();return(0,E.V)(o||null)}getCategoryLabel(e){switch(e){case"SHOP":return"Shop";case"AUTO":return"Auto";case"BIKE":return"Bike";case"HOUSE":return"House";case"LAND":return"Land";case"EQUIPMENT":return"Equipment";case"FURNITURE":return"Furniture";default:return e}}getStatusLabel(e){switch(e){case"FLAGGED":return"Flagged";case"PENDING_APPROVAL":return"Pending";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";case"RENTED":return"Rented";case"HOLD":return"On Hold";case"HIDDEN":return"Hidden";case"CORRECTION_REQUIRED":return"Correction Required";case"REMOVED":return"Removed";default:return e}}getAvailableStatuses(e){return this.statusOptions.filter(o=>o.value!==e.status)}formatDate(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}onPageChange(e){this.currentPage=e,this.loadReportedPosts()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(at),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-rental-reported"]],decls:11,vars:3,consts:[[1,"rental-reported"],[1,"header"],[1,"header-icon"],[1,"subtitle"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","posts-container",4,"ngIf"],[1,"loading-container"],["diameter","40"],[1,"empty-state"],[1,"empty-icon"],[1,"posts-container"],[1,"total-info"],["mat-table","",1,"posts-table",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","reports"],["matColumnDef","category"],["matColumnDef","phone"],["matColumnDef","status"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","pagination",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"post-image"],["alt","Rental","loading","lazy",3,"src",4,"ngIf"],["class","no-image",4,"ngIf"],["alt","Rental","loading","lazy",3,"src"],[1,"no-image"],[1,"post-title"],["class","post-description",4,"ngIf"],[1,"post-description"],[1,"report-count"],[1,"report-icon"],[1,"category-chip"],[1,"seller-info"],[1,"seller-name"],[1,"seller-phone"],[1,"status-badge",3,"ngClass"],[1,"date"],["mat-stroked-button","",1,"action-dropdown",3,"matMenuTriggerFor"],["statusMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"pagination"],["mat-button","",3,"disabled","click"],[1,"page-info"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2")(3,"mat-icon",2),t.EFF(4,"report"),t.k0s(),t.EFF(5," Reported Rental Posts "),t.k0s(),t.j41(6,"p",3),t.EFF(7,"Rental posts reported by users - review and take action"),t.k0s()(),t.DNE(8,sf,4,0,"div",4),t.DNE(9,cf,7,0,"div",5),t.DNE(10,Df,34,8,"div",6),t.k0s()),2&o&&(t.R7$(8),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.posts.length),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.posts.length>0))},dependencies:[p.YU,p.Sq,p.bT,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,C.An,h.LG,f.kk,f.fb,f.Cp],styles:[".rental-reported[_ngcontent-%COMP%]{padding:24px}.rental-reported[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:24px}.rental-reported[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;display:flex;align-items:center;gap:8px}.rental-reported[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{color:#e65100}.rental-reported[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.rental-reported[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:48px}.rental-reported[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.rental-reported[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:64px 24px}.rental-reported[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#4caf50}.rental-reported[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.rental-reported[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.rental-reported[_ngcontent-%COMP%]   .posts-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #00000014}.rental-reported[_ngcontent-%COMP%]   .total-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px 24px;background:#fff3e0;color:#e65100;font-weight:500;font-size:14px;border-bottom:1px solid #ffe0b2}.rental-reported[_ngcontent-%COMP%]   .total-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]{width:100%}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;background:#f5f5f5;display:flex;align-items:center;justify-content:center}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{color:#ccc;font-size:28px}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#333}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-description[_ngcontent-%COMP%]{font-size:12px;color:#888;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;background:#fff3e0;color:#e65100;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count[_ngcontent-%COMP%]   .report-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count.high[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100;padding:2px 10px;border-radius:12px;font-size:12px;font-weight:500}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-name[_ngcontent-%COMP%]{font-weight:500;font-size:13px}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-phone[_ngcontent-%COMP%]{font-size:12px;color:#666}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;font-size:12px;font-weight:500;white-space:nowrap}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-flagged[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-pending_approval[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-approved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rented[_ngcontent-%COMP%]{background:#f3e5f5;color:#6a1b9a}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hold[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hidden[_ngcontent-%COMP%]{background:#eceff1;color:#546e7a}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-correction_required[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-removed[_ngcontent-%COMP%]{background:#fce4ec;color:#b71c1c}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#888;white-space:nowrap}.rental-reported[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .action-dropdown[_ngcontent-%COMP%]{font-size:13px;white-space:nowrap}.rental-reported[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:16px;border-top:1px solid #eee}.rental-reported[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:13px;color:#666}"]})}}return n})();var J=_(6850);function If(n,a){if(1&n&&(t.j41(0,"span",12),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.JRh(e.tabStates.marketplace.totalItems)}}function Nf(n,a){if(1&n&&(t.j41(0,"mat-icon",10),t.EFF(1,"storefront"),t.k0s(),t.j41(2,"span"),t.EFF(3,"Marketplace"),t.k0s(),t.DNE(4,If,2,1,"span",11)),2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngIf",e.tabStates.marketplace.totalItems>0)}}function Gf(n,a){1&n&&t.eu8(0)}function wf(n,a){1&n&&t.eu8(0)}function Sf(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Image"),t.k0s())}function Af(n,a){if(1&n&&t.nrm(0,"img",36),2&n){const e=t.XpG().$implicit,o=t.XpG(3);t.Y8G("src",o.getImageUrl(e.imageUrl),t.B4B)}}function Vf(n,a){1&n&&(t.j41(0,"mat-icon",37),t.EFF(1,"image"),t.k0s())}function Lf(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",33),t.DNE(2,Af,1,1,"img",34),t.DNE(3,Vf,2,0,"mat-icon",35),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.imageUrl),t.R7$(1),t.Y8G("ngIf",!e.imageUrl)}}function Bf(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Title"),t.k0s())}function Yf(n,a){if(1&n&&(t.j41(0,"div",40),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function Uf(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",38),t.EFF(2),t.k0s(),t.DNE(3,Yf,2,1,"div",39),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(1),t.Y8G("ngIf",e.description)}}function Xf(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Reports"),t.k0s())}function zf(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",41)(2,"mat-icon",42),t.EFF(3,"flag"),t.k0s(),t.EFF(4),t.k0s()()),2&n){const e=a.$implicit;t.R7$(1),t.AVh("high",e.reportCount>=3),t.R7$(3),t.SpI(" ",e.reportCount," ")}}function Jf(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Price"),t.k0s())}function qf(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",43),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.formatPrice(e.price))}}function Hf(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Seller"),t.k0s())}function Kf(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",44)(2,"span",45),t.EFF(3),t.k0s(),t.j41(4,"span",46),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.sellerPhone)}}function Qf(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Category"),t.k0s())}function Wf(n,a){if(1&n&&(t.j41(0,"span",48),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.category)}}function Zf(n,a){if(1&n&&(t.j41(0,"td",32),t.DNE(1,Wf,2,1,"span",47),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.category)}}function t0(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Status"),t.k0s())}function e0(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",49),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.JRh(o.getStatusLabel(e.status))}}function n0(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Date"),t.k0s())}function o0(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",50),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function a0(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Action"),t.k0s())}function i0(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",54),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,d=t.XpG(3);return t.Njj(d.onStatusChange("marketplace",c,r.value))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.xc7("color",e.color),t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function r0(n,a){if(1&n&&(t.j41(0,"td",32)(1,"button",51),t.EFF(2,"Change Status "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",null,52),t.DNE(7,i0,5,4,"button",53),t.k0s()()),2&n){const e=a.$implicit,o=t.sdS(6),i=t.XpG(3);t.R7$(1),t.Y8G("matMenuTriggerFor",o),t.R7$(6),t.Y8G("ngForOf",i.getAvailableStatuses(e))}}function s0(n,a){1&n&&t.nrm(0,"tr",55)}function c0(n,a){1&n&&t.nrm(0,"tr",56)}function l0(n,a){1&n&&t.eu8(0)}const H=function(){return["image","title","reports","price","seller","category","status","date","actions"]},kt=function(){return{key:"marketplace"}};function p0(n,a){if(1&n&&(t.j41(0,"div",15)(1,"div",16)(2,"mat-icon"),t.EFF(3,"flag"),t.k0s(),t.j41(4,"span"),t.EFF(5),t.k0s()(),t.j41(6,"table",17),t.qex(7,18),t.DNE(8,Sf,2,0,"th",19),t.DNE(9,Lf,4,2,"td",20),t.bVm(),t.qex(10,21),t.DNE(11,Bf,2,0,"th",19),t.DNE(12,Uf,4,2,"td",20),t.bVm(),t.qex(13,22),t.DNE(14,Xf,2,0,"th",19),t.DNE(15,zf,5,3,"td",20),t.bVm(),t.qex(16,23),t.DNE(17,Jf,2,0,"th",19),t.DNE(18,qf,3,1,"td",20),t.bVm(),t.qex(19,24),t.DNE(20,Hf,2,0,"th",19),t.DNE(21,Kf,6,2,"td",20),t.bVm(),t.qex(22,25),t.DNE(23,Qf,2,0,"th",19),t.DNE(24,Zf,2,1,"td",20),t.bVm(),t.qex(25,26),t.DNE(26,t0,2,0,"th",19),t.DNE(27,e0,3,2,"td",20),t.bVm(),t.qex(28,27),t.DNE(29,n0,2,0,"th",19),t.DNE(30,o0,3,1,"td",20),t.bVm(),t.qex(31,28),t.DNE(32,a0,2,0,"th",19),t.DNE(33,r0,8,2,"td",20),t.bVm(),t.DNE(34,s0,1,0,"tr",29),t.DNE(35,c0,1,0,"tr",30),t.k0s(),t.DNE(36,l0,1,0,"ng-container",13),t.k0s()),2&n){const e=t.XpG(2),o=t.sdS(35);t.R7$(5),t.Lme("",e.tabStates.marketplace.totalItems," reported post",e.tabStates.marketplace.totalItems>1?"s":"",""),t.R7$(1),t.Y8G("dataSource",e.tabStates.marketplace.posts),t.R7$(28),t.Y8G("matHeaderRowDef",t.lJ4(7,H)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(8,H)),t.R7$(1),t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.lJ4(9,kt))}}const m0=function(){return{key:"marketplace",label:"marketplace"}};function d0(n,a){if(1&n&&(t.DNE(0,Gf,1,0,"ng-container",13),t.DNE(1,wf,1,0,"ng-container",13),t.DNE(2,p0,37,10,"div",14)),2&n){const e=t.XpG(),o=t.sdS(31),i=t.sdS(33);t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.lJ4(5,kt)),t.R7$(1),t.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",t.lJ4(6,m0)),t.R7$(1),t.Y8G("ngIf",!e.tabStates.marketplace.loading&&e.tabStates.marketplace.posts.length>0)}}function g0(n,a){if(1&n&&(t.j41(0,"span",12),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.JRh(e.tabStates.farmer.totalItems)}}function _0(n,a){if(1&n&&(t.j41(0,"mat-icon",10),t.EFF(1,"eco"),t.k0s(),t.j41(2,"span"),t.EFF(3,"Farmer Products"),t.k0s(),t.DNE(4,g0,2,1,"span",11)),2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngIf",e.tabStates.farmer.totalItems>0)}}function u0(n,a){1&n&&t.eu8(0)}function f0(n,a){1&n&&t.eu8(0)}function C0(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Image"),t.k0s())}function h0(n,a){if(1&n&&t.nrm(0,"img",36),2&n){const e=t.XpG().$implicit,o=t.XpG(3);t.Y8G("src",o.getImageUrl(e.imageUrl),t.B4B)}}function P0(n,a){1&n&&(t.j41(0,"mat-icon",37),t.EFF(1,"image"),t.k0s())}function b0(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",33),t.DNE(2,h0,1,1,"img",34),t.DNE(3,P0,2,0,"mat-icon",35),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.imageUrl),t.R7$(1),t.Y8G("ngIf",!e.imageUrl)}}function M0(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Title"),t.k0s())}function v0(n,a){if(1&n&&(t.j41(0,"div",40),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function x0(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",38),t.EFF(2),t.k0s(),t.DNE(3,v0,2,1,"div",39),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(1),t.Y8G("ngIf",e.description)}}function F0(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Reports"),t.k0s())}function O0(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",41)(2,"mat-icon",42),t.EFF(3,"flag"),t.k0s(),t.EFF(4),t.k0s()()),2&n){const e=a.$implicit;t.R7$(1),t.AVh("high",e.reportCount>=3),t.R7$(3),t.SpI(" ",e.reportCount," ")}}function k0(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Price"),t.k0s())}function E0(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",43),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.formatPrice(e.price))}}function R0(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Seller"),t.k0s())}function T0(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",44)(2,"span",45),t.EFF(3),t.k0s(),t.j41(4,"span",46),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.sellerPhone)}}function y0(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Category"),t.k0s())}function j0(n,a){if(1&n&&(t.j41(0,"span",48),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.category)}}function D0(n,a){if(1&n&&(t.j41(0,"td",32),t.DNE(1,j0,2,1,"span",47),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.category)}}function $0(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Status"),t.k0s())}function I0(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",49),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.JRh(o.getStatusLabel(e.status))}}function N0(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Date"),t.k0s())}function G0(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",50),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function w0(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Action"),t.k0s())}function S0(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",54),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,d=t.XpG(3);return t.Njj(d.onStatusChange("farmer",c,r.value))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.xc7("color",e.color),t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function A0(n,a){if(1&n&&(t.j41(0,"td",32)(1,"button",51),t.EFF(2,"Change Status "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",null,57),t.DNE(7,S0,5,4,"button",53),t.k0s()()),2&n){const e=a.$implicit,o=t.sdS(6),i=t.XpG(3);t.R7$(1),t.Y8G("matMenuTriggerFor",o),t.R7$(6),t.Y8G("ngForOf",i.getAvailableStatuses(e))}}function V0(n,a){1&n&&t.nrm(0,"tr",55)}function L0(n,a){1&n&&t.nrm(0,"tr",56)}function B0(n,a){1&n&&t.eu8(0)}const Et=function(){return{key:"farmer"}};function Y0(n,a){if(1&n&&(t.j41(0,"div",15)(1,"div",16)(2,"mat-icon"),t.EFF(3,"flag"),t.k0s(),t.j41(4,"span"),t.EFF(5),t.k0s()(),t.j41(6,"table",17),t.qex(7,18),t.DNE(8,C0,2,0,"th",19),t.DNE(9,b0,4,2,"td",20),t.bVm(),t.qex(10,21),t.DNE(11,M0,2,0,"th",19),t.DNE(12,x0,4,2,"td",20),t.bVm(),t.qex(13,22),t.DNE(14,F0,2,0,"th",19),t.DNE(15,O0,5,3,"td",20),t.bVm(),t.qex(16,23),t.DNE(17,k0,2,0,"th",19),t.DNE(18,E0,3,1,"td",20),t.bVm(),t.qex(19,24),t.DNE(20,R0,2,0,"th",19),t.DNE(21,T0,6,2,"td",20),t.bVm(),t.qex(22,25),t.DNE(23,y0,2,0,"th",19),t.DNE(24,D0,2,1,"td",20),t.bVm(),t.qex(25,26),t.DNE(26,$0,2,0,"th",19),t.DNE(27,I0,3,2,"td",20),t.bVm(),t.qex(28,27),t.DNE(29,N0,2,0,"th",19),t.DNE(30,G0,3,1,"td",20),t.bVm(),t.qex(31,28),t.DNE(32,w0,2,0,"th",19),t.DNE(33,A0,8,2,"td",20),t.bVm(),t.DNE(34,V0,1,0,"tr",29),t.DNE(35,L0,1,0,"tr",30),t.k0s(),t.DNE(36,B0,1,0,"ng-container",13),t.k0s()),2&n){const e=t.XpG(2),o=t.sdS(35);t.R7$(5),t.Lme("",e.tabStates.farmer.totalItems," reported post",e.tabStates.farmer.totalItems>1?"s":"",""),t.R7$(1),t.Y8G("dataSource",e.tabStates.farmer.posts),t.R7$(28),t.Y8G("matHeaderRowDef",t.lJ4(7,H)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(8,H)),t.R7$(1),t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.lJ4(9,Et))}}const U0=function(){return{key:"farmer",label:"farmer product"}};function X0(n,a){if(1&n&&(t.DNE(0,u0,1,0,"ng-container",13),t.DNE(1,f0,1,0,"ng-container",13),t.DNE(2,Y0,37,10,"div",14)),2&n){const e=t.XpG(),o=t.sdS(31),i=t.sdS(33);t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.lJ4(5,Et)),t.R7$(1),t.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",t.lJ4(6,U0)),t.R7$(1),t.Y8G("ngIf",!e.tabStates.farmer.loading&&e.tabStates.farmer.posts.length>0)}}function z0(n,a){if(1&n&&(t.j41(0,"span",12),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.JRh(e.tabStates.labour.totalItems)}}function J0(n,a){if(1&n&&(t.j41(0,"mat-icon",10),t.EFF(1,"construction"),t.k0s(),t.j41(2,"span"),t.EFF(3,"Labours"),t.k0s(),t.DNE(4,z0,2,1,"span",11)),2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngIf",e.tabStates.labour.totalItems>0)}}function q0(n,a){1&n&&t.eu8(0)}function H0(n,a){1&n&&t.eu8(0)}function K0(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Image"),t.k0s())}function Q0(n,a){if(1&n&&t.nrm(0,"img",61),2&n){const e=t.XpG().$implicit,o=t.XpG(3);t.Y8G("src",o.getFirstImage(e.imageUrls),t.B4B)}}function W0(n,a){1&n&&(t.j41(0,"mat-icon",37),t.EFF(1,"person"),t.k0s())}function Z0(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",33),t.DNE(2,Q0,1,1,"img",60),t.DNE(3,W0,2,0,"mat-icon",35),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.imageUrls),t.R7$(1),t.Y8G("ngIf",!e.imageUrls)}}function tC(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Name"),t.k0s())}function eC(n,a){if(1&n&&(t.j41(0,"div",40),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function nC(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",38),t.EFF(2),t.k0s(),t.DNE(3,eC,2,1,"div",39),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.name),t.R7$(1),t.Y8G("ngIf",e.description)}}function oC(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Reports"),t.k0s())}function aC(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",41)(2,"mat-icon",42),t.EFF(3,"flag"),t.k0s(),t.EFF(4),t.k0s()()),2&n){const e=a.$implicit;t.R7$(1),t.AVh("high",e.reportCount>=3),t.R7$(3),t.SpI(" ",e.reportCount," ")}}function iC(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Category"),t.k0s())}function rC(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",48),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.getLabourCategoryLabel(e.category))}}function sC(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Phone"),t.k0s())}function cC(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",44)(2,"span",45),t.EFF(3),t.k0s(),t.j41(4,"span",46),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.phone)}}function lC(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Status"),t.k0s())}function pC(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",49),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.JRh(o.getStatusLabel(e.status))}}function mC(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Date"),t.k0s())}function dC(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",50),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function gC(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Action"),t.k0s())}function _C(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",54),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,d=t.XpG(3);return t.Njj(d.onStatusChange("labour",c,r.value))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.xc7("color",e.color),t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function uC(n,a){if(1&n&&(t.j41(0,"td",32)(1,"button",51),t.EFF(2,"Change Status "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",null,62),t.DNE(7,_C,5,4,"button",53),t.k0s()()),2&n){const e=a.$implicit,o=t.sdS(6),i=t.XpG(3);t.R7$(1),t.Y8G("matMenuTriggerFor",o),t.R7$(6),t.Y8G("ngForOf",i.getAvailableStatuses(e))}}function fC(n,a){1&n&&t.nrm(0,"tr",55)}function CC(n,a){1&n&&t.nrm(0,"tr",56)}function hC(n,a){1&n&&t.eu8(0)}const Rt=function(){return["image","name","reports","category","phone","status","date","actions"]},Tt=function(){return{key:"labour"}};function PC(n,a){if(1&n&&(t.j41(0,"div",15)(1,"div",16)(2,"mat-icon"),t.EFF(3,"flag"),t.k0s(),t.j41(4,"span"),t.EFF(5),t.k0s()(),t.j41(6,"table",17),t.qex(7,18),t.DNE(8,K0,2,0,"th",19),t.DNE(9,Z0,4,2,"td",20),t.bVm(),t.qex(10,58),t.DNE(11,tC,2,0,"th",19),t.DNE(12,nC,4,2,"td",20),t.bVm(),t.qex(13,22),t.DNE(14,oC,2,0,"th",19),t.DNE(15,aC,5,3,"td",20),t.bVm(),t.qex(16,25),t.DNE(17,iC,2,0,"th",19),t.DNE(18,rC,3,1,"td",20),t.bVm(),t.qex(19,59),t.DNE(20,sC,2,0,"th",19),t.DNE(21,cC,6,2,"td",20),t.bVm(),t.qex(22,26),t.DNE(23,lC,2,0,"th",19),t.DNE(24,pC,3,2,"td",20),t.bVm(),t.qex(25,27),t.DNE(26,mC,2,0,"th",19),t.DNE(27,dC,3,1,"td",20),t.bVm(),t.qex(28,28),t.DNE(29,gC,2,0,"th",19),t.DNE(30,uC,8,2,"td",20),t.bVm(),t.DNE(31,fC,1,0,"tr",29),t.DNE(32,CC,1,0,"tr",30),t.k0s(),t.DNE(33,hC,1,0,"ng-container",13),t.k0s()),2&n){const e=t.XpG(2),o=t.sdS(35);t.R7$(5),t.Lme("",e.tabStates.labour.totalItems," reported post",e.tabStates.labour.totalItems>1?"s":"",""),t.R7$(1),t.Y8G("dataSource",e.tabStates.labour.posts),t.R7$(25),t.Y8G("matHeaderRowDef",t.lJ4(7,Rt)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(8,Rt)),t.R7$(1),t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.lJ4(9,Tt))}}const bC=function(){return{key:"labour",label:"labour"}};function MC(n,a){if(1&n&&(t.DNE(0,q0,1,0,"ng-container",13),t.DNE(1,H0,1,0,"ng-container",13),t.DNE(2,PC,34,10,"div",14)),2&n){const e=t.XpG(),o=t.sdS(31),i=t.sdS(33);t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.lJ4(5,Tt)),t.R7$(1),t.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",t.lJ4(6,bC)),t.R7$(1),t.Y8G("ngIf",!e.tabStates.labour.loading&&e.tabStates.labour.posts.length>0)}}function vC(n,a){if(1&n&&(t.j41(0,"span",12),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.JRh(e.tabStates.travel.totalItems)}}function xC(n,a){if(1&n&&(t.j41(0,"mat-icon",10),t.EFF(1,"directions_car"),t.k0s(),t.j41(2,"span"),t.EFF(3,"Travels"),t.k0s(),t.DNE(4,vC,2,1,"span",11)),2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngIf",e.tabStates.travel.totalItems>0)}}function FC(n,a){1&n&&t.eu8(0)}function OC(n,a){1&n&&t.eu8(0)}function kC(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Image"),t.k0s())}function EC(n,a){if(1&n&&t.nrm(0,"img",65),2&n){const e=t.XpG().$implicit,o=t.XpG(3);t.Y8G("src",o.getFirstImage(e.imageUrls),t.B4B)}}function RC(n,a){1&n&&(t.j41(0,"mat-icon",37),t.EFF(1,"directions_car"),t.k0s())}function TC(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",33),t.DNE(2,EC,1,1,"img",64),t.DNE(3,RC,2,0,"mat-icon",35),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.imageUrls),t.R7$(1),t.Y8G("ngIf",!e.imageUrls)}}function yC(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Title"),t.k0s())}function jC(n,a){if(1&n&&(t.j41(0,"div",40),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.Lme("",e.fromLocation," \u2192 ",e.toLocation,"")}}function DC(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",38),t.EFF(2),t.k0s(),t.DNE(3,jC,2,2,"div",39),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(1),t.Y8G("ngIf",e.fromLocation&&e.toLocation)}}function $C(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Reports"),t.k0s())}function IC(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",41)(2,"mat-icon",42),t.EFF(3,"flag"),t.k0s(),t.EFF(4),t.k0s()()),2&n){const e=a.$implicit;t.R7$(1),t.AVh("high",e.reportCount>=3),t.R7$(3),t.SpI(" ",e.reportCount," ")}}function NC(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Vehicle"),t.k0s())}function GC(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",48),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.getVehicleTypeLabel(e.vehicleType))}}function wC(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Phone"),t.k0s())}function SC(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",44)(2,"span",45),t.EFF(3),t.k0s(),t.j41(4,"span",46),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.phone)}}function AC(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Status"),t.k0s())}function VC(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",49),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.JRh(o.getStatusLabel(e.status))}}function LC(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Date"),t.k0s())}function BC(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",50),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function YC(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Action"),t.k0s())}function UC(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",54),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,d=t.XpG(3);return t.Njj(d.onStatusChange("travel",c,r.value))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.xc7("color",e.color),t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function XC(n,a){if(1&n&&(t.j41(0,"td",32)(1,"button",51),t.EFF(2,"Change Status "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",null,66),t.DNE(7,UC,5,4,"button",53),t.k0s()()),2&n){const e=a.$implicit,o=t.sdS(6),i=t.XpG(3);t.R7$(1),t.Y8G("matMenuTriggerFor",o),t.R7$(6),t.Y8G("ngForOf",i.getAvailableStatuses(e))}}function zC(n,a){1&n&&t.nrm(0,"tr",55)}function JC(n,a){1&n&&t.nrm(0,"tr",56)}function qC(n,a){1&n&&t.eu8(0)}const yt=function(){return["image","title","reports","vehicleType","phone","status","date","actions"]},jt=function(){return{key:"travel"}};function HC(n,a){if(1&n&&(t.j41(0,"div",15)(1,"div",16)(2,"mat-icon"),t.EFF(3,"flag"),t.k0s(),t.j41(4,"span"),t.EFF(5),t.k0s()(),t.j41(6,"table",17),t.qex(7,18),t.DNE(8,kC,2,0,"th",19),t.DNE(9,TC,4,2,"td",20),t.bVm(),t.qex(10,21),t.DNE(11,yC,2,0,"th",19),t.DNE(12,DC,4,2,"td",20),t.bVm(),t.qex(13,22),t.DNE(14,$C,2,0,"th",19),t.DNE(15,IC,5,3,"td",20),t.bVm(),t.qex(16,63),t.DNE(17,NC,2,0,"th",19),t.DNE(18,GC,3,1,"td",20),t.bVm(),t.qex(19,59),t.DNE(20,wC,2,0,"th",19),t.DNE(21,SC,6,2,"td",20),t.bVm(),t.qex(22,26),t.DNE(23,AC,2,0,"th",19),t.DNE(24,VC,3,2,"td",20),t.bVm(),t.qex(25,27),t.DNE(26,LC,2,0,"th",19),t.DNE(27,BC,3,1,"td",20),t.bVm(),t.qex(28,28),t.DNE(29,YC,2,0,"th",19),t.DNE(30,XC,8,2,"td",20),t.bVm(),t.DNE(31,zC,1,0,"tr",29),t.DNE(32,JC,1,0,"tr",30),t.k0s(),t.DNE(33,qC,1,0,"ng-container",13),t.k0s()),2&n){const e=t.XpG(2),o=t.sdS(35);t.R7$(5),t.Lme("",e.tabStates.travel.totalItems," reported post",e.tabStates.travel.totalItems>1?"s":"",""),t.R7$(1),t.Y8G("dataSource",e.tabStates.travel.posts),t.R7$(25),t.Y8G("matHeaderRowDef",t.lJ4(7,yt)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(8,yt)),t.R7$(1),t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.lJ4(9,jt))}}const KC=function(){return{key:"travel",label:"travel"}};function QC(n,a){if(1&n&&(t.DNE(0,FC,1,0,"ng-container",13),t.DNE(1,OC,1,0,"ng-container",13),t.DNE(2,HC,34,10,"div",14)),2&n){const e=t.XpG(),o=t.sdS(31),i=t.sdS(33);t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.lJ4(5,jt)),t.R7$(1),t.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",t.lJ4(6,KC)),t.R7$(1),t.Y8G("ngIf",!e.tabStates.travel.loading&&e.tabStates.travel.posts.length>0)}}function WC(n,a){if(1&n&&(t.j41(0,"span",12),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.JRh(e.tabStates.parcel.totalItems)}}function ZC(n,a){if(1&n&&(t.j41(0,"mat-icon",10),t.EFF(1,"local_shipping"),t.k0s(),t.j41(2,"span"),t.EFF(3,"Packers & Movers"),t.k0s(),t.DNE(4,WC,2,1,"span",11)),2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngIf",e.tabStates.parcel.totalItems>0)}}function th(n,a){1&n&&t.eu8(0)}function eh(n,a){1&n&&t.eu8(0)}function nh(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Image"),t.k0s())}function oh(n,a){if(1&n&&t.nrm(0,"img",70),2&n){const e=t.XpG().$implicit,o=t.XpG(3);t.Y8G("src",o.getFirstImage(e.imageUrls),t.B4B)}}function ah(n,a){1&n&&(t.j41(0,"mat-icon",37),t.EFF(1,"local_shipping"),t.k0s())}function ih(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",33),t.DNE(2,oh,1,1,"img",69),t.DNE(3,ah,2,0,"mat-icon",35),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.imageUrls),t.R7$(1),t.Y8G("ngIf",!e.imageUrls)}}function rh(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Service Name"),t.k0s())}function sh(n,a){if(1&n&&(t.j41(0,"div",40),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.Lme("",e.fromLocation," \u2192 ",e.toLocation,"")}}function ch(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",38),t.EFF(2),t.k0s(),t.DNE(3,sh,2,2,"div",39),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.serviceName),t.R7$(1),t.Y8G("ngIf",e.fromLocation&&e.toLocation)}}function lh(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Reports"),t.k0s())}function ph(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",41)(2,"mat-icon",42),t.EFF(3,"flag"),t.k0s(),t.EFF(4),t.k0s()()),2&n){const e=a.$implicit;t.R7$(1),t.AVh("high",e.reportCount>=3),t.R7$(3),t.SpI(" ",e.reportCount," ")}}function mh(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Service Type"),t.k0s())}function dh(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",48),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.getServiceTypeLabel(e.serviceType))}}function gh(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Phone"),t.k0s())}function _h(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",44)(2,"span",45),t.EFF(3),t.k0s(),t.j41(4,"span",46),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.phone)}}function uh(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Status"),t.k0s())}function fh(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",49),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.JRh(o.getStatusLabel(e.status))}}function Ch(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Date"),t.k0s())}function hh(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",50),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function Ph(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Action"),t.k0s())}function bh(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",54),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,d=t.XpG(3);return t.Njj(d.onStatusChange("parcel",c,r.value))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.xc7("color",e.color),t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function Mh(n,a){if(1&n&&(t.j41(0,"td",32)(1,"button",51),t.EFF(2,"Change Status "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",null,71),t.DNE(7,bh,5,4,"button",53),t.k0s()()),2&n){const e=a.$implicit,o=t.sdS(6),i=t.XpG(3);t.R7$(1),t.Y8G("matMenuTriggerFor",o),t.R7$(6),t.Y8G("ngForOf",i.getAvailableStatuses(e))}}function vh(n,a){1&n&&t.nrm(0,"tr",55)}function xh(n,a){1&n&&t.nrm(0,"tr",56)}function Fh(n,a){1&n&&t.eu8(0)}const Dt=function(){return["image","serviceName","reports","serviceType","phone","status","date","actions"]},$t=function(){return{key:"parcel"}};function Oh(n,a){if(1&n&&(t.j41(0,"div",15)(1,"div",16)(2,"mat-icon"),t.EFF(3,"flag"),t.k0s(),t.j41(4,"span"),t.EFF(5),t.k0s()(),t.j41(6,"table",17),t.qex(7,18),t.DNE(8,nh,2,0,"th",19),t.DNE(9,ih,4,2,"td",20),t.bVm(),t.qex(10,67),t.DNE(11,rh,2,0,"th",19),t.DNE(12,ch,4,2,"td",20),t.bVm(),t.qex(13,22),t.DNE(14,lh,2,0,"th",19),t.DNE(15,ph,5,3,"td",20),t.bVm(),t.qex(16,68),t.DNE(17,mh,2,0,"th",19),t.DNE(18,dh,3,1,"td",20),t.bVm(),t.qex(19,59),t.DNE(20,gh,2,0,"th",19),t.DNE(21,_h,6,2,"td",20),t.bVm(),t.qex(22,26),t.DNE(23,uh,2,0,"th",19),t.DNE(24,fh,3,2,"td",20),t.bVm(),t.qex(25,27),t.DNE(26,Ch,2,0,"th",19),t.DNE(27,hh,3,1,"td",20),t.bVm(),t.qex(28,28),t.DNE(29,Ph,2,0,"th",19),t.DNE(30,Mh,8,2,"td",20),t.bVm(),t.DNE(31,vh,1,0,"tr",29),t.DNE(32,xh,1,0,"tr",30),t.k0s(),t.DNE(33,Fh,1,0,"ng-container",13),t.k0s()),2&n){const e=t.XpG(2),o=t.sdS(35);t.R7$(5),t.Lme("",e.tabStates.parcel.totalItems," reported post",e.tabStates.parcel.totalItems>1?"s":"",""),t.R7$(1),t.Y8G("dataSource",e.tabStates.parcel.posts),t.R7$(25),t.Y8G("matHeaderRowDef",t.lJ4(7,Dt)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(8,Dt)),t.R7$(1),t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.lJ4(9,$t))}}const kh=function(){return{key:"parcel",label:"parcel"}};function Eh(n,a){if(1&n&&(t.DNE(0,th,1,0,"ng-container",13),t.DNE(1,eh,1,0,"ng-container",13),t.DNE(2,Oh,34,10,"div",14)),2&n){const e=t.XpG(),o=t.sdS(31),i=t.sdS(33);t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.lJ4(5,$t)),t.R7$(1),t.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",t.lJ4(6,kh)),t.R7$(1),t.Y8G("ngIf",!e.tabStates.parcel.loading&&e.tabStates.parcel.posts.length>0)}}function Rh(n,a){if(1&n&&(t.j41(0,"span",12),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.JRh(e.tabStates.rental.totalItems)}}function Th(n,a){if(1&n&&(t.j41(0,"mat-icon",10),t.EFF(1,"vpn_key"),t.k0s(),t.j41(2,"span"),t.EFF(3,"Rentals"),t.k0s(),t.DNE(4,Rh,2,1,"span",11)),2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngIf",e.tabStates.rental.totalItems>0)}}function yh(n,a){1&n&&t.eu8(0)}function jh(n,a){1&n&&t.eu8(0)}function Dh(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Image"),t.k0s())}function $h(n,a){if(1&n&&t.nrm(0,"img",73),2&n){const e=t.XpG().$implicit,o=t.XpG(3);t.Y8G("src",o.getFirstImage(e.imageUrls),t.B4B)}}function Ih(n,a){1&n&&(t.j41(0,"mat-icon",37),t.EFF(1,"vpn_key"),t.k0s())}function Nh(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",33),t.DNE(2,$h,1,1,"img",72),t.DNE(3,Ih,2,0,"mat-icon",35),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.imageUrls),t.R7$(1),t.Y8G("ngIf",!e.imageUrls)}}function Gh(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Title"),t.k0s())}function wh(n,a){if(1&n&&(t.j41(0,"div",40),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function Sh(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",38),t.EFF(2),t.k0s(),t.DNE(3,wh,2,1,"div",39),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(1),t.Y8G("ngIf",e.description)}}function Ah(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Reports"),t.k0s())}function Vh(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",41)(2,"mat-icon",42),t.EFF(3,"flag"),t.k0s(),t.EFF(4),t.k0s()()),2&n){const e=a.$implicit;t.R7$(1),t.AVh("high",e.reportCount>=3),t.R7$(3),t.SpI(" ",e.reportCount," ")}}function Lh(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Price"),t.k0s())}function Bh(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.SpI(" / ",e.priceUnit,"")}}function Yh(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",43),t.EFF(2),t.DNE(3,Bh,2,1,"span",74),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.formatPrice(e.price)),t.R7$(1),t.Y8G("ngIf",e.priceUnit)}}function Uh(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Category"),t.k0s())}function Xh(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",48),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.getRentalCategoryLabel(e.category))}}function zh(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Contact"),t.k0s())}function Jh(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",44)(2,"span",45),t.EFF(3),t.k0s(),t.j41(4,"span",46),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.sellerPhone)}}function qh(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Status"),t.k0s())}function Hh(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",49),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.JRh(o.getStatusLabel(e.status))}}function Kh(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Date"),t.k0s())}function Qh(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",50),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function Wh(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Action"),t.k0s())}function Zh(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",54),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,d=t.XpG(3);return t.Njj(d.onStatusChange("rental",c,r.value))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.xc7("color",e.color),t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function t2(n,a){if(1&n&&(t.j41(0,"td",32)(1,"button",51),t.EFF(2,"Change Status "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",null,75),t.DNE(7,Zh,5,4,"button",53),t.k0s()()),2&n){const e=a.$implicit,o=t.sdS(6),i=t.XpG(3);t.R7$(1),t.Y8G("matMenuTriggerFor",o),t.R7$(6),t.Y8G("ngForOf",i.getAvailableStatuses(e))}}function e2(n,a){1&n&&t.nrm(0,"tr",55)}function n2(n,a){1&n&&t.nrm(0,"tr",56)}function o2(n,a){1&n&&t.eu8(0)}const It=function(){return["image","title","reports","price","category","phone","status","date","actions"]},Nt=function(){return{key:"rental"}};function a2(n,a){if(1&n&&(t.j41(0,"div",15)(1,"div",16)(2,"mat-icon"),t.EFF(3,"flag"),t.k0s(),t.j41(4,"span"),t.EFF(5),t.k0s()(),t.j41(6,"table",17),t.qex(7,18),t.DNE(8,Dh,2,0,"th",19),t.DNE(9,Nh,4,2,"td",20),t.bVm(),t.qex(10,21),t.DNE(11,Gh,2,0,"th",19),t.DNE(12,Sh,4,2,"td",20),t.bVm(),t.qex(13,22),t.DNE(14,Ah,2,0,"th",19),t.DNE(15,Vh,5,3,"td",20),t.bVm(),t.qex(16,23),t.DNE(17,Lh,2,0,"th",19),t.DNE(18,Yh,4,2,"td",20),t.bVm(),t.qex(19,25),t.DNE(20,Uh,2,0,"th",19),t.DNE(21,Xh,3,1,"td",20),t.bVm(),t.qex(22,59),t.DNE(23,zh,2,0,"th",19),t.DNE(24,Jh,6,2,"td",20),t.bVm(),t.qex(25,26),t.DNE(26,qh,2,0,"th",19),t.DNE(27,Hh,3,2,"td",20),t.bVm(),t.qex(28,27),t.DNE(29,Kh,2,0,"th",19),t.DNE(30,Qh,3,1,"td",20),t.bVm(),t.qex(31,28),t.DNE(32,Wh,2,0,"th",19),t.DNE(33,t2,8,2,"td",20),t.bVm(),t.DNE(34,e2,1,0,"tr",29),t.DNE(35,n2,1,0,"tr",30),t.k0s(),t.DNE(36,o2,1,0,"ng-container",13),t.k0s()),2&n){const e=t.XpG(2),o=t.sdS(35);t.R7$(5),t.Lme("",e.tabStates.rental.totalItems," reported post",e.tabStates.rental.totalItems>1?"s":"",""),t.R7$(1),t.Y8G("dataSource",e.tabStates.rental.posts),t.R7$(28),t.Y8G("matHeaderRowDef",t.lJ4(7,It)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(8,It)),t.R7$(1),t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.lJ4(9,Nt))}}const i2=function(){return{key:"rental",label:"rental"}};function r2(n,a){if(1&n&&(t.DNE(0,yh,1,0,"ng-container",13),t.DNE(1,jh,1,0,"ng-container",13),t.DNE(2,a2,37,10,"div",14)),2&n){const e=t.XpG(),o=t.sdS(31),i=t.sdS(33);t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.lJ4(5,Nt)),t.R7$(1),t.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",t.lJ4(6,i2)),t.R7$(1),t.Y8G("ngIf",!e.tabStates.rental.loading&&e.tabStates.rental.posts.length>0)}}function s2(n,a){if(1&n&&(t.j41(0,"span",12),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.JRh(e.tabStates.realestate.totalItems)}}function c2(n,a){if(1&n&&(t.j41(0,"mat-icon",10),t.EFF(1,"home_work"),t.k0s(),t.j41(2,"span"),t.EFF(3,"Real Estate"),t.k0s(),t.DNE(4,s2,2,1,"span",11)),2&n){const e=t.XpG();t.R7$(4),t.Y8G("ngIf",e.tabStates.realestate.totalItems>0)}}function l2(n,a){1&n&&t.eu8(0)}function p2(n,a){1&n&&t.eu8(0)}function m2(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Image"),t.k0s())}function d2(n,a){if(1&n&&t.nrm(0,"img",78),2&n){const e=t.XpG().$implicit,o=t.XpG(3);t.Y8G("src",o.getImageUrl(e.imageUrl),t.B4B)}}function g2(n,a){1&n&&(t.j41(0,"mat-icon",37),t.EFF(1,"home_work"),t.k0s())}function _2(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",33),t.DNE(2,d2,1,1,"img",77),t.DNE(3,g2,2,0,"mat-icon",35),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.imageUrl),t.R7$(1),t.Y8G("ngIf",!e.imageUrl)}}function u2(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Title"),t.k0s())}function f2(n,a){if(1&n&&(t.j41(0,"div",40),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function C2(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",38),t.EFF(2),t.k0s(),t.DNE(3,f2,2,1,"div",39),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(1),t.Y8G("ngIf",e.description)}}function h2(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Reports"),t.k0s())}function P2(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",41)(2,"mat-icon",42),t.EFF(3,"flag"),t.k0s(),t.EFF(4),t.k0s()()),2&n){const e=a.$implicit;t.R7$(1),t.AVh("high",e.reportCount>=3),t.R7$(3),t.SpI(" ",e.reportCount," ")}}function b2(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Price"),t.k0s())}function M2(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",43),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.formatPrice(e.price))}}function v2(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Property Type"),t.k0s())}function x2(n,a){if(1&n&&(t.j41(0,"span",48),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.propertyType)}}function F2(n,a){if(1&n&&(t.j41(0,"td",32),t.DNE(1,x2,2,1,"span",47),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.propertyType)}}function O2(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Seller"),t.k0s())}function k2(n,a){if(1&n&&(t.j41(0,"td",32)(1,"div",44)(2,"span",45),t.EFF(3),t.k0s(),t.j41(4,"span",46),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.sellerPhone)}}function E2(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Status"),t.k0s())}function R2(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",49),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.JRh(o.getStatusLabel(e.status))}}function T2(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Date"),t.k0s())}function y2(n,a){if(1&n&&(t.j41(0,"td",32)(1,"span",50),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function j2(n,a){1&n&&(t.j41(0,"th",31),t.EFF(1,"Action"),t.k0s())}function D2(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",54),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,d=t.XpG(3);return t.Njj(d.onStatusChange("realestate",c,r.value))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.xc7("color",e.color),t.R7$(1),t.JRh(e.icon),t.R7$(2),t.JRh(e.label)}}function $2(n,a){if(1&n&&(t.j41(0,"td",32)(1,"button",51),t.EFF(2,"Change Status "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",null,79),t.DNE(7,D2,5,4,"button",53),t.k0s()()),2&n){const e=a.$implicit,o=t.sdS(6),i=t.XpG(3);t.R7$(1),t.Y8G("matMenuTriggerFor",o),t.R7$(6),t.Y8G("ngForOf",i.getAvailableStatuses(e))}}function I2(n,a){1&n&&t.nrm(0,"tr",55)}function N2(n,a){1&n&&t.nrm(0,"tr",56)}function G2(n,a){1&n&&t.eu8(0)}const Gt=function(){return["image","title","reports","price","propertyType","seller","status","date","actions"]},wt=function(){return{key:"realestate"}};function w2(n,a){if(1&n&&(t.j41(0,"div",15)(1,"div",16)(2,"mat-icon"),t.EFF(3,"flag"),t.k0s(),t.j41(4,"span"),t.EFF(5),t.k0s()(),t.j41(6,"table",17),t.qex(7,18),t.DNE(8,m2,2,0,"th",19),t.DNE(9,_2,4,2,"td",20),t.bVm(),t.qex(10,21),t.DNE(11,u2,2,0,"th",19),t.DNE(12,C2,4,2,"td",20),t.bVm(),t.qex(13,22),t.DNE(14,h2,2,0,"th",19),t.DNE(15,P2,5,3,"td",20),t.bVm(),t.qex(16,23),t.DNE(17,b2,2,0,"th",19),t.DNE(18,M2,3,1,"td",20),t.bVm(),t.qex(19,76),t.DNE(20,v2,2,0,"th",19),t.DNE(21,F2,2,1,"td",20),t.bVm(),t.qex(22,24),t.DNE(23,O2,2,0,"th",19),t.DNE(24,k2,6,2,"td",20),t.bVm(),t.qex(25,26),t.DNE(26,E2,2,0,"th",19),t.DNE(27,R2,3,2,"td",20),t.bVm(),t.qex(28,27),t.DNE(29,T2,2,0,"th",19),t.DNE(30,y2,3,1,"td",20),t.bVm(),t.qex(31,28),t.DNE(32,j2,2,0,"th",19),t.DNE(33,$2,8,2,"td",20),t.bVm(),t.DNE(34,I2,1,0,"tr",29),t.DNE(35,N2,1,0,"tr",30),t.k0s(),t.DNE(36,G2,1,0,"ng-container",13),t.k0s()),2&n){const e=t.XpG(2),o=t.sdS(35);t.R7$(5),t.Lme("",e.tabStates.realestate.totalItems," reported post",e.tabStates.realestate.totalItems>1?"s":"",""),t.R7$(1),t.Y8G("dataSource",e.tabStates.realestate.posts),t.R7$(28),t.Y8G("matHeaderRowDef",t.lJ4(7,Gt)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(8,Gt)),t.R7$(1),t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.lJ4(9,wt))}}const S2=function(){return{key:"realestate",label:"real estate"}};function A2(n,a){if(1&n&&(t.DNE(0,l2,1,0,"ng-container",13),t.DNE(1,p2,1,0,"ng-container",13),t.DNE(2,w2,37,10,"div",14)),2&n){const e=t.XpG(),o=t.sdS(31),i=t.sdS(33);t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.lJ4(5,wt)),t.R7$(1),t.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",t.lJ4(6,S2)),t.R7$(1),t.Y8G("ngIf",!e.tabStates.realestate.loading&&e.tabStates.realestate.posts.length>0)}}function V2(n,a){1&n&&(t.j41(0,"div",81),t.nrm(1,"mat-spinner",82),t.j41(2,"p"),t.EFF(3,"Loading reported posts..."),t.k0s()())}function L2(n,a){if(1&n&&t.DNE(0,V2,4,0,"div",80),2&n){const e=a.key,o=t.XpG();t.Y8G("ngIf",o.tabStates[e].loading)}}function B2(n,a){if(1&n&&(t.j41(0,"div",84)(1,"mat-icon",85),t.EFF(2,"verified"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No reported posts"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s()()),2&n){const e=t.XpG().label;t.R7$(6),t.SpI("All clear! No ",e," posts have been reported by users.")}}function Y2(n,a){if(1&n&&t.DNE(0,B2,7,1,"div",83),2&n){const e=a.key,o=t.XpG();t.Y8G("ngIf",!o.tabStates[e].loading&&0===o.tabStates[e].posts.length&&o.tabStates[e].loaded)}}function U2(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",87)(1,"button",88),t.bIt("click",function(){t.eBV(e);const i=t.XpG().key,r=t.XpG();return t.Njj(r.onPageChange(i,r.tabStates[i].currentPage-1))}),t.j41(2,"mat-icon"),t.EFF(3,"chevron_left"),t.k0s(),t.EFF(4," Previous "),t.k0s(),t.j41(5,"span",89),t.EFF(6),t.k0s(),t.j41(7,"button",88),t.bIt("click",function(){t.eBV(e);const i=t.XpG().key,r=t.XpG();return t.Njj(r.onPageChange(i,r.tabStates[i].currentPage+1))}),t.EFF(8," Next "),t.j41(9,"mat-icon"),t.EFF(10,"chevron_right"),t.k0s()()()}if(2&n){const e=t.XpG().key,o=t.XpG();t.R7$(1),t.Y8G("disabled",0===o.tabStates[e].currentPage),t.R7$(5),t.E5c("Page ",o.tabStates[e].currentPage+1," of ",o.tabStates[e].totalPages," (",o.tabStates[e].totalItems," posts)"),t.R7$(1),t.Y8G("disabled",o.tabStates[e].currentPage>=o.tabStates[e].totalPages-1)}}function X2(n,a){if(1&n&&t.DNE(0,U2,11,5,"div",86),2&n){const e=a.key,o=t.XpG();t.Y8G("ngIf",o.tabStates[e].totalPages>1)}}let z2=(()=>{class n{constructor(e,o,i,r,c,d,T,P){this.marketplaceService=e,this.farmerService=o,this.labourService=i,this.travelService=r,this.parcelService=c,this.rentalService=d,this.realEstateService=T,this.snackBar=P,this.selectedTabIndex=0,this.pageSize=20,this.statusOptions=[{value:"APPROVED",label:"Approve",icon:"check_circle",color:"#4caf50"},{value:"REJECTED",label:"Reject",icon:"cancel",color:"#f44336"},{value:"HOLD",label:"Hold",icon:"pause_circle",color:"#ff9800"},{value:"HIDDEN",label:"Hide",icon:"visibility_off",color:"#9e9e9e"},{value:"CORRECTION_REQUIRED",label:"Correction Required",icon:"edit_note",color:"#2196f3"},{value:"REMOVED",label:"Remove",icon:"delete_forever",color:"#b71c1c"}],this.tabs=[{key:"marketplace",label:"Marketplace",icon:"storefront"},{key:"farmer",label:"Farmer Products",icon:"eco"},{key:"labour",label:"Labours",icon:"construction"},{key:"travel",label:"Travels",icon:"directions_car"},{key:"parcel",label:"Packers & Movers",icon:"local_shipping"},{key:"rental",label:"Rentals",icon:"vpn_key"},{key:"realestate",label:"Real Estate",icon:"home_work"}],this.tabStates={};for(const w of this.tabs)this.tabStates[w.key]={posts:[],loading:!1,loaded:!1,currentPage:0,totalPages:0,totalItems:0}}ngOnInit(){this.loadTab("marketplace")}onTabChange(e){this.selectedTabIndex=e;const o=this.tabs[e];this.tabStates[o.key].loaded||this.loadTab(o.key)}loadTab(e){const o=this.tabStates[e];o.loading=!0;const i=this.getService(e);i&&i.getReportedPosts(o.currentPage,this.pageSize).subscribe({next:r=>{const c=r.data;o.posts=c?.content||[],o.totalPages=c?.totalPages||0,o.totalItems=c?.totalItems||0,o.loading=!1,o.loaded=!0},error:r=>{console.error(`Error loading ${e} reported posts:`,r),o.loading=!1,o.loaded=!0,this.snackBar.open(`Failed to load ${e} reported posts`,"Close",{duration:3e3})}})}onPageChange(e,o){this.tabStates[e].currentPage=o,this.loadTab(e)}onStatusChange(e,o,i){const r=o.title||o.name||o.serviceName||"Post";if("REMOVED"===i){if(!confirm(`Remove "${r}" permanently? This will delete the post.`))return;const P=this.getService(e);if(!P)return;return void P.deletePost(o.id).subscribe({next:()=>{this.snackBar.open(`"${r}" removed`,"OK",{duration:3e3}),this.loadTab(e)},error:()=>{this.snackBar.open("Failed to remove post","Close",{duration:3e3})}})}const d=this.statusOptions.find(P=>P.value===i)?.label||i,T=this.getService(e);T&&T.changePostStatus(o.id,i).subscribe({next:()=>{this.snackBar.open(`"${r}" \u2192 ${d}`,"OK",{duration:3e3}),this.loadTab(e)},error:()=>{this.snackBar.open(`Failed to change status to ${d}`,"Close",{duration:3e3})}})}getService(e){switch(e){case"marketplace":return this.marketplaceService;case"farmer":return this.farmerService;case"labour":return this.labourService;case"travel":return this.travelService;case"parcel":return this.parcelService;case"rental":return this.rentalService;case"realestate":return this.realEstateService;default:return null}}getImageUrl(e){return(0,E.V)(e)}getFirstImage(e){if(!e)return"";const o=e.split(",")[0]?.trim();return(0,E.V)(o||null)}getStatusLabel(e){switch(e){case"FLAGGED":return"Flagged";case"PENDING_APPROVAL":return"Pending";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";case"SOLD":return"Sold";case"RENTED":return"Rented";case"HOLD":return"On Hold";case"HIDDEN":return"Hidden";case"CORRECTION_REQUIRED":return"Correction Required";case"REMOVED":return"Removed";default:return e}}getAvailableStatuses(e){return this.statusOptions.filter(o=>o.value!==e.status)}formatPrice(e){return null==e?"Negotiable":"\u20b9"+e.toLocaleString("en-IN")}formatDate(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}getLabourCategoryLabel(e){switch(e){case"PAINTER":return"Painter";case"ELECTRICIAN":return"Electrician";case"PLUMBER":return"Plumber";case"CARPENTER":return"Carpenter";case"MASON":return"Mason";case"WELDER":return"Welder";case"MECHANIC":return"Mechanic";case"DRIVER":return"Driver";case"CLEANER":return"Cleaner";case"GARDENER":return"Gardener";case"COOK":return"Cook";case"TAILOR":return"Tailor";case"AC_TECHNICIAN":return"AC Technician";case"CCTV_TECHNICIAN":return"CCTV Technician";case"COMPUTER_TECHNICIAN":return"Computer Technician";case"MOBILE_TECHNICIAN":return"Mobile Technician";case"OTHER":return"Other";default:return e}}getVehicleTypeLabel(e){switch(e){case"CAR":return"Car";case"SMALL_BUS":return"Small Bus";case"BUS":return"Bus";default:return e}}getServiceTypeLabel(e){switch(e){case"DOOR_TO_DOOR":return"Door to Door";case"PICKUP_POINT":return"Pickup Point";case"BOTH":return"Both";default:return e}}getRentalCategoryLabel(e){switch(e){case"SHOP":return"Shop";case"AUTO":return"Auto";case"BIKE":return"Bike";case"HOUSE":return"House";case"LAND":return"Land";case"EQUIPMENT":return"Equipment";case"FURNITURE":return"Furniture";default:return e}}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(tt),t.rXU(ut),t.rXU(et),t.rXU(nt),t.rXU(ot),t.rXU(at),t.rXU(mt),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-all-reports"]],decls:36,vars:1,consts:[[1,"all-reports"],[1,"header"],[1,"header-icon"],[1,"subtitle"],["animationDuration","200ms",1,"reports-tabs",3,"selectedIndex","selectedIndexChange"],["mat-tab-label",""],["matTabContent",""],["loadingTpl",""],["emptyTpl",""],["paginationTpl",""],[1,"tab-icon"],["class","tab-badge",4,"ngIf"],[1,"tab-badge"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","posts-container",4,"ngIf"],[1,"posts-container"],[1,"total-info"],["mat-table","",1,"posts-table",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","reports"],["matColumnDef","price"],["matColumnDef","seller"],["matColumnDef","category"],["matColumnDef","status"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"post-image"],["alt","Product","loading","lazy",3,"src",4,"ngIf"],["class","no-image",4,"ngIf"],["alt","Product","loading","lazy",3,"src"],[1,"no-image"],[1,"post-title"],["class","post-description",4,"ngIf"],[1,"post-description"],[1,"report-count"],[1,"report-icon"],[1,"price"],[1,"seller-info"],[1,"seller-name"],[1,"seller-phone"],["class","category-chip",4,"ngIf"],[1,"category-chip"],[1,"status-badge",3,"ngClass"],[1,"date"],["mat-stroked-button","",1,"action-dropdown",3,"matMenuTriggerFor"],["mkMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""],["fpMenu","matMenu"],["matColumnDef","name"],["matColumnDef","phone"],["alt","Labour","loading","lazy",3,"src",4,"ngIf"],["alt","Labour","loading","lazy",3,"src"],["lbMenu","matMenu"],["matColumnDef","vehicleType"],["alt","Travel","loading","lazy",3,"src",4,"ngIf"],["alt","Travel","loading","lazy",3,"src"],["tvMenu","matMenu"],["matColumnDef","serviceName"],["matColumnDef","serviceType"],["alt","Parcel","loading","lazy",3,"src",4,"ngIf"],["alt","Parcel","loading","lazy",3,"src"],["pcMenu","matMenu"],["alt","Rental","loading","lazy",3,"src",4,"ngIf"],["alt","Rental","loading","lazy",3,"src"],[4,"ngIf"],["rnMenu","matMenu"],["matColumnDef","propertyType"],["alt","Property","loading","lazy",3,"src",4,"ngIf"],["alt","Property","loading","lazy",3,"src"],["reMenu","matMenu"],["class","loading-container",4,"ngIf"],[1,"loading-container"],["diameter","40"],["class","empty-state",4,"ngIf"],[1,"empty-state"],[1,"empty-icon"],["class","pagination",4,"ngIf"],[1,"pagination"],["mat-button","",3,"disabled","click"],[1,"page-info"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2")(3,"mat-icon",2),t.EFF(4,"report"),t.k0s(),t.EFF(5," All Reports "),t.k0s(),t.j41(6,"p",3),t.EFF(7,"All reported posts across modules - review and take action"),t.k0s()(),t.j41(8,"mat-tab-group",4),t.bIt("selectedIndexChange",function(c){return i.selectedTabIndex=c})("selectedIndexChange",function(c){return i.onTabChange(c)}),t.j41(9,"mat-tab"),t.DNE(10,Nf,5,1,"ng-template",5),t.DNE(11,d0,3,7,"ng-template",6),t.k0s(),t.j41(12,"mat-tab"),t.DNE(13,_0,5,1,"ng-template",5),t.DNE(14,X0,3,7,"ng-template",6),t.k0s(),t.j41(15,"mat-tab"),t.DNE(16,J0,5,1,"ng-template",5),t.DNE(17,MC,3,7,"ng-template",6),t.k0s(),t.j41(18,"mat-tab"),t.DNE(19,xC,5,1,"ng-template",5),t.DNE(20,QC,3,7,"ng-template",6),t.k0s(),t.j41(21,"mat-tab"),t.DNE(22,ZC,5,1,"ng-template",5),t.DNE(23,Eh,3,7,"ng-template",6),t.k0s(),t.j41(24,"mat-tab"),t.DNE(25,Th,5,1,"ng-template",5),t.DNE(26,r2,3,7,"ng-template",6),t.k0s(),t.j41(27,"mat-tab"),t.DNE(28,c2,5,1,"ng-template",5),t.DNE(29,A2,3,7,"ng-template",6),t.k0s()()(),t.DNE(30,L2,1,1,"ng-template",null,7,t.C5r),t.DNE(32,Y2,1,1,"ng-template",null,8,t.C5r),t.DNE(34,X2,1,1,"ng-template",null,9,t.C5r)),2&o&&(t.R7$(8),t.Y8G("selectedIndex",i.selectedTabIndex))},dependencies:[p.YU,p.Sq,p.bT,p.T3,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,C.An,h.LG,f.kk,f.fb,f.Cp,J.$L,J.ES,J.mq,J.T8],styles:[".all-reports[_ngcontent-%COMP%]{padding:24px}.all-reports[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:24px}.all-reports[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;display:flex;align-items:center;gap:8px}.all-reports[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{color:#e65100}.all-reports[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.all-reports[_ngcontent-%COMP%]   .reports-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-labels{gap:4px}.all-reports[_ngcontent-%COMP%]   .reports-tabs[_ngcontent-%COMP%]     .mat-mdc-tab{min-width:120px}.all-reports[_ngcontent-%COMP%]   .reports-tabs[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{margin-right:6px;font-size:20px;width:20px;height:20px}.all-reports[_ngcontent-%COMP%]   .reports-tabs[_ngcontent-%COMP%]   .tab-badge[_ngcontent-%COMP%]{background:#e65100;color:#fff;font-size:11px;font-weight:600;padding:1px 7px;border-radius:10px;margin-left:8px;min-width:18px;text-align:center}.all-reports[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:48px}.all-reports[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.all-reports[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:64px 24px}.all-reports[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#4caf50}.all-reports[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.all-reports[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.all-reports[_ngcontent-%COMP%]   .posts-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #00000014;margin-top:16px}.all-reports[_ngcontent-%COMP%]   .total-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:16px 24px;background:#fff3e0;color:#e65100;font-weight:500;font-size:14px;border-bottom:1px solid #ffe0b2}.all-reports[_ngcontent-%COMP%]   .total-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]{width:100%}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;background:#f5f5f5;display:flex;align-items:center;justify-content:center}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{color:#ccc;font-size:28px}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#333}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-description[_ngcontent-%COMP%]{font-size:12px;color:#888;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;background:#fff3e0;color:#e65100;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count[_ngcontent-%COMP%]   .report-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .report-count.high[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:600;color:#4caf50;font-size:14px}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-name[_ngcontent-%COMP%]{font-weight:500;font-size:13px}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-phone[_ngcontent-%COMP%]{font-size:12px;color:#666}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;padding:2px 10px;border-radius:12px;font-size:12px;font-weight:500}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;font-size:12px;font-weight:500;white-space:nowrap}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-flagged[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-pending_approval[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-approved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-sold[_ngcontent-%COMP%], .all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rented[_ngcontent-%COMP%]{background:#f3e5f5;color:#6a1b9a}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hold[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-hidden[_ngcontent-%COMP%]{background:#eceff1;color:#546e7a}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-correction_required[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-removed[_ngcontent-%COMP%]{background:#fce4ec;color:#b71c1c}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#888;white-space:nowrap}.all-reports[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .action-dropdown[_ngcontent-%COMP%]{font-size:13px;white-space:nowrap}.all-reports[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:16px;border-top:1px solid #eee}.all-reports[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:13px;color:#666}"]})}}return n})(),J2=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${F.c.apiUrl}/villages`}getActiveVillages(){return this.http.get(this.apiUrl)}getAllVillages(){return this.http.get(`${this.apiUrl}/admin/all`)}createVillage(e){return this.http.post(`${this.apiUrl}/admin`,e)}updateVillage(e,o){return this.http.put(`${this.apiUrl}/admin/${e}`,o)}deleteVillage(e){return this.http.delete(`${this.apiUrl}/admin/${e}`)}toggleActive(e){return this.http.put(`${this.apiUrl}/admin/${e}/toggle`,{})}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(O.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function q2(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",8),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.openAddForm())}),t.j41(1,"mat-icon"),t.EFF(2,"add"),t.k0s(),t.EFF(3," Add Village "),t.k0s()}}function H2(n,a){if(1&n){const e=t.RV6();t.j41(0,"mat-card",9)(1,"mat-card-content")(2,"h3"),t.EFF(3),t.k0s(),t.j41(4,"form",10),t.bIt("ngSubmit",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.saveVillage())}),t.j41(5,"div",11)(6,"mat-form-field")(7,"mat-label"),t.EFF(8,"Village Name"),t.k0s(),t.nrm(9,"input",12),t.k0s(),t.j41(10,"mat-form-field")(11,"mat-label"),t.EFF(12,"Name (Tamil)"),t.k0s(),t.nrm(13,"input",13),t.k0s(),t.j41(14,"mat-form-field")(15,"mat-label"),t.EFF(16,"District"),t.k0s(),t.nrm(17,"input",14),t.k0s()(),t.j41(18,"div",11)(19,"mat-form-field")(20,"mat-label"),t.EFF(21,"Panchayat Name"),t.k0s(),t.nrm(22,"input",15),t.k0s(),t.j41(23,"mat-form-field",16)(24,"mat-label"),t.EFF(25,"Panchayat URL"),t.k0s(),t.nrm(26,"input",17),t.k0s()(),t.j41(27,"div",11)(28,"mat-form-field",18)(29,"mat-label"),t.EFF(30,"Description"),t.k0s(),t.nrm(31,"textarea",19),t.k0s(),t.j41(32,"mat-form-field")(33,"mat-label"),t.EFF(34,"Display Order"),t.k0s(),t.nrm(35,"input",20),t.k0s()(),t.j41(36,"div",21)(37,"button",22),t.EFF(38),t.k0s(),t.j41(39,"button",23),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.cancelForm())}),t.EFF(40,"Cancel"),t.k0s()()()()()}if(2&n){const e=t.XpG();t.R7$(3),t.JRh(e.editingId?"Edit Village":"Add New Village"),t.R7$(1),t.Y8G("formGroup",e.villageForm),t.R7$(33),t.Y8G("disabled",e.villageForm.invalid),t.R7$(1),t.SpI(" ",e.editingId?"Update":"Create"," ")}}function K2(n,a){1&n&&(t.j41(0,"div",24),t.nrm(1,"mat-spinner",25),t.j41(2,"p"),t.EFF(3,"Loading villages..."),t.k0s()())}function Q2(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"Order"),t.k0s())}function W2(n,a){if(1&n&&(t.j41(0,"td",42),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.JRh(e.displayOrder)}}function Z2(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"Name"),t.k0s())}function t4(n,a){if(1&n&&(t.j41(0,"td",42),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.JRh(e.name)}}function e4(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"Tamil"),t.k0s())}function n4(n,a){if(1&n&&(t.j41(0,"td",42),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.JRh(e.nameTamil)}}function o4(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"District"),t.k0s())}function a4(n,a){if(1&n&&(t.j41(0,"td",42),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.JRh(e.district)}}function i4(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"Panchayat"),t.k0s())}function r4(n,a){if(1&n&&(t.j41(0,"td",42),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.JRh(e.panchayatName)}}function s4(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"URL"),t.k0s())}function c4(n,a){if(1&n&&(t.j41(0,"a",45),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.FS9("matTooltip",e.panchayatUrl),t.Y8G("href",e.panchayatUrl,t.B4B),t.R7$(1),t.SpI(" ",o.truncateUrl(e.panchayatUrl)," ")}}function l4(n,a){1&n&&(t.j41(0,"span",46),t.EFF(1,"No URL"),t.k0s())}function p4(n,a){if(1&n&&(t.j41(0,"td",42),t.DNE(1,c4,2,3,"a",43),t.DNE(2,l4,2,0,"span",44),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.panchayatUrl),t.R7$(1),t.Y8G("ngIf",!e.panchayatUrl)}}function m4(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"Active"),t.k0s())}function d4(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",42)(1,"mat-slide-toggle",47),t.bIt("change",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.toggleActive(r))}),t.k0s()()}if(2&n){const e=a.$implicit;t.R7$(1),t.Y8G("checked",e.isActive)}}function g4(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"Actions"),t.k0s())}function _4(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",42)(1,"button",48),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.openEditForm(r))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()(),t.j41(4,"button",49),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.deleteVillage(r))}),t.j41(5,"mat-icon"),t.EFF(6,"delete"),t.k0s()()()}}function u4(n,a){1&n&&t.nrm(0,"tr",50)}function f4(n,a){1&n&&t.nrm(0,"tr",51)}function C4(n,a){1&n&&(t.j41(0,"div",52)(1,"mat-icon"),t.EFF(2,"domain"),t.k0s(),t.j41(3,"p"),t.EFF(4,'No villages found. Click "Add Village" to get started.'),t.k0s()())}function h4(n,a){if(1&n&&(t.j41(0,"div",26)(1,"table",27),t.qex(2,28),t.DNE(3,Q2,2,0,"th",29),t.DNE(4,W2,2,1,"td",30),t.bVm(),t.qex(5,31),t.DNE(6,Z2,2,0,"th",29),t.DNE(7,t4,2,1,"td",30),t.bVm(),t.qex(8,32),t.DNE(9,e4,2,0,"th",29),t.DNE(10,n4,2,1,"td",30),t.bVm(),t.qex(11,33),t.DNE(12,o4,2,0,"th",29),t.DNE(13,a4,2,1,"td",30),t.bVm(),t.qex(14,34),t.DNE(15,i4,2,0,"th",29),t.DNE(16,r4,2,1,"td",30),t.bVm(),t.qex(17,35),t.DNE(18,s4,2,0,"th",29),t.DNE(19,p4,3,2,"td",30),t.bVm(),t.qex(20,36),t.DNE(21,m4,2,0,"th",29),t.DNE(22,d4,2,1,"td",30),t.bVm(),t.qex(23,37),t.DNE(24,g4,2,0,"th",29),t.DNE(25,_4,7,0,"td",30),t.bVm(),t.DNE(26,u4,1,0,"tr",38),t.DNE(27,f4,1,0,"tr",39),t.k0s(),t.DNE(28,C4,5,0,"div",40),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.villages),t.R7$(25),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(1),t.Y8G("ngIf",0===e.villages.length)}}let P4=(()=>{class n{constructor(e,o,i){this.villageService=e,this.fb=o,this.snackBar=i,this.villages=[],this.isLoading=!0,this.showForm=!1,this.editingId=null,this.displayedColumns=["displayOrder","name","nameTamil","district","panchayatName","panchayatUrl","active","actions"]}ngOnInit(){this.initForm(),this.loadVillages()}initForm(){this.villageForm=this.fb.group({name:["",l.k0.required],nameTamil:[""],district:[""],panchayatName:[""],panchayatUrl:[""],description:[""],displayOrder:[0],isActive:[!0]})}loadVillages(){this.isLoading=!0,this.villageService.getAllVillages().subscribe({next:e=>{this.villages=e.data||[],this.isLoading=!1},error:()=>{this.snackBar.open("Failed to load villages","Close",{duration:3e3}),this.isLoading=!1}})}openAddForm(){this.editingId=null,this.villageForm.reset({displayOrder:0,isActive:!0}),this.showForm=!0}openEditForm(e){this.editingId=e.id,this.villageForm.patchValue({name:e.name,nameTamil:e.nameTamil,district:e.district,panchayatName:e.panchayatName,panchayatUrl:e.panchayatUrl,description:e.description,displayOrder:e.displayOrder,isActive:e.isActive}),this.showForm=!0}cancelForm(){this.showForm=!1,this.editingId=null}saveVillage(){if(this.villageForm.invalid)return;const e=this.villageForm.value;this.editingId?this.villageService.updateVillage(this.editingId,e).subscribe({next:()=>{this.snackBar.open("Village updated successfully","Close",{duration:3e3}),this.showForm=!1,this.loadVillages()},error:()=>this.snackBar.open("Failed to update village","Close",{duration:3e3})}):this.villageService.createVillage(e).subscribe({next:()=>{this.snackBar.open("Village created successfully","Close",{duration:3e3}),this.showForm=!1,this.loadVillages()},error:()=>this.snackBar.open("Failed to create village","Close",{duration:3e3})})}toggleActive(e){this.villageService.toggleActive(e.id).subscribe({next:o=>{const i=o.data,r=this.villages.findIndex(c=>c.id===e.id);r>=0&&i&&(this.villages[r]=i),this.snackBar.open("Village toggled","Close",{duration:2e3})},error:()=>this.snackBar.open("Failed to toggle village","Close",{duration:3e3})})}deleteVillage(e){confirm(`Delete village "${e.name}"?`)&&this.villageService.deleteVillage(e.id).subscribe({next:()=>{this.snackBar.open("Village deleted","Close",{duration:3e3}),this.loadVillages()},error:()=>this.snackBar.open("Failed to delete village","Close",{duration:3e3})})}truncateUrl(e){return e?e.length>40?e.substring(0,40)+"...":e:""}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(J2),t.rXU(l.ok),t.rXU(b.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-village-management"]],decls:12,vars:4,consts:[[1,"village-management"],[1,"page-header"],[1,"header-actions"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Refresh",3,"click"],["class","form-card",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","table-container",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"form-card"],[1,"village-form",3,"formGroup","ngSubmit"],[1,"form-row"],["matInput","","formControlName","name","placeholder","e.g. Tirupattur"],["matInput","","formControlName","nameTamil","placeholder","e.g. \u0ba4\u0bbf\u0bb0\u0bc1\u0baa\u0bcd\u0baa\u0ba4\u0bcd\u0ba4\u0bc2\u0bb0\u0bcd"],["matInput","","formControlName","district","placeholder","e.g. Tirupattur"],["matInput","","formControlName","panchayatName","placeholder","e.g. Tirupattur Town Panchayat"],[1,"url-field"],["matInput","","formControlName","panchayatUrl","placeholder","https://..."],[1,"description-field"],["matInput","","formControlName","description","rows","2","placeholder","Optional details"],["matInput","","type","number","formControlName","displayOrder"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"click"],[1,"loading-container"],["diameter","40"],[1,"table-container"],["mat-table","",1,"villages-table",3,"dataSource"],["matColumnDef","displayOrder"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","nameTamil"],["matColumnDef","district"],["matColumnDef","panchayatName"],["matColumnDef","panchayatUrl"],["matColumnDef","active"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["target","_blank","class","url-link",3,"href","matTooltip",4,"ngIf"],["class","text-muted",4,"ngIf"],["target","_blank",1,"url-link",3,"href","matTooltip"],[1,"text-muted"],["color","primary",3,"checked","change"],["mat-icon-button","","matTooltip","Edit",3,"click"],["mat-icon-button","","matTooltip","Delete","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-state"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Village / Panchayat Management"),t.k0s(),t.j41(4,"div",2),t.DNE(5,q2,4,0,"button",3),t.j41(6,"button",4),t.bIt("click",function(){return i.loadVillages()}),t.j41(7,"mat-icon"),t.EFF(8,"refresh"),t.k0s()()()(),t.DNE(9,H2,41,4,"mat-card",5),t.DNE(10,K2,4,0,"div",6),t.DNE(11,h4,29,4,"div",7),t.k0s()),2&o&&(t.R7$(5),t.Y8G("ngIf",!i.showForm),t.R7$(4),t.Y8G("ngIf",i.showForm),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading))},dependencies:[p.bT,l.qT,l.me,l.Q0,l.BC,l.cb,l.j4,l.JD,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,g.$z,g.iY,C.An,k.fg,m.rl,m.nJ,u.RN,u.m2,R.oV,h.LG,S.sG],styles:[".village-management[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#1a1a2e}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.form-card[_ngcontent-%COMP%]{margin-bottom:20px}.form-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:18px;font-weight:600}.village-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.village-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:180px}.village-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .url-field[_ngcontent-%COMP%]{flex:2}.village-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .description-field[_ngcontent-%COMP%]{flex:3}.village-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:16px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:60px 20px;color:#666}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:12px 0}.table-container[_ngcontent-%COMP%]{overflow-x:auto;background:white;border-radius:8px;box-shadow:0 2px 8px #00000014}.villages-table[_ngcontent-%COMP%]{width:100%}.url-link[_ngcontent-%COMP%]{font-size:12px;color:#1565c0;text-decoration:none;word-break:break-all}.url-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.text-muted[_ngcontent-%COMP%]{color:#999;font-style:italic}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:40px 20px;color:#999}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:12px}@media (max-width: 768px){.village-management[_ngcontent-%COMP%]{padding:16px}.village-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column}}"]})}}return n})(),b4=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[p.MD,l.X1,l.YN,s.tP,$.Ou,G.NQ,g.Hl,C.m_,k.fS,m.RG,I.Ve,u.Hu,M.hM,V.X6,N.WX,U.g7,L.YN,R.uc,h.D6,b._T,S.mV,X.Vg,f.Cn,K.Wk,Q.PO,z.w,J.RI,A.iI.forChild([{path:"",redirectTo:"customers",pathMatch:"full"},{path:"customers",component:Me},{path:"customers/create",component:st},{path:"customers/:id",component:Qe},{path:"customers/:id/edit",component:st},{path:"delivery-fees",component:kn},{path:"promo-codes",component:wo},{path:"push-notifications",component:xa},{path:"marketing",component:aa},{path:"menu-permissions",component:$a},{path:"marketplace",component:Ri},{path:"real-estate",component:br},{path:"bus-timing",component:ps},{path:"reported-posts",component:Vs},{path:"marketplace-config",component:Ks},{path:"farmer-products",component:Lc},{path:"labours",component:wl},{path:"labours/reported",component:pp},{path:"travels",component:rm},{path:"travels/reported",component:$m},{path:"parcels",component:Td},{path:"parcels/reported",component:ng},{path:"post-dashboard",component:hg},{path:"feature-config",component:Hg},{path:"post-limits",component:z_},{path:"payment-history",component:T1},{path:"health-tips",component:bu},{path:"rentals",component:rf},{path:"rentals/reported",component:$f},{path:"all-reports",component:z2},{path:"villages",component:P4},{path:"shops",loadChildren:()=>Promise.resolve().then(_.bind(_,267)).then(e=>e.ShopModule)}])]})}}return n})()}}]);