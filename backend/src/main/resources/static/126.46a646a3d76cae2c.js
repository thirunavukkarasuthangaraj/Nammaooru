"use strict";(self.webpackChunkshop_management_frontend=self.webpackChunkshop_management_frontend||[]).push([[126],{1034:(Dt,mt,g)=>{g.d(mt,{u:()=>R});var a=g(7705),h=g(2150),ot=g(8032),_=g.n(ot),x=g(8773),D=g(1188),B=g(177),V=g(9417),Q=g(8834),J=g(2102),C=g(9631),q=g(9213),z=g(9183),w=g(7575);function T(p,f){if(1&p){const l=a.RV6();a.j41(0,"div",34)(1,"button",35),a.bIt("click",function(){a.eBV(l);const d=a.XpG();return a.Njj(d.goBack())}),a.j41(2,"mat-icon"),a.EFF(3,"arrow_back"),a.k0s()(),a.j41(4,"div",36)(5,"h2"),a.EFF(6,"Document Management"),a.k0s(),a.j41(7,"p",37),a.EFF(8,"Manage delivery partner documents"),a.k0s()()()}}function N(p,f){1&p&&(a.j41(0,"h3"),a.EFF(1,"\u{1f69a} Delivery Partner Documents"),a.k0s())}function $(p,f){1&p&&(a.j41(0,"p",37),a.EFF(1,"Upload required documents for driver verification"),a.k0s())}function y(p,f){1&p&&(a.j41(0,"div",38)(1,"mat-icon"),a.EFF(2,"cloud_upload"),a.k0s(),a.j41(3,"span"),a.EFF(4,"Click to upload driver photo"),a.k0s(),a.j41(5,"small"),a.EFF(6,"JPG, PNG (Max 5MB)"),a.k0s()())}function et(p,f){if(1&p&&(a.j41(0,"div",39)(1,"mat-icon",40),a.EFF(2,"check_circle"),a.k0s(),a.j41(3,"span"),a.EFF(4),a.k0s(),a.j41(5,"small"),a.EFF(6),a.k0s()()),2&p){const l=a.XpG();a.R7$(4),a.JRh(l.driverPhoto.name),a.R7$(2),a.JRh(l.formatFileSize(l.driverPhoto.size))}}function nt(p,f){1&p&&(a.j41(0,"mat-icon"),a.EFF(1,"upload"),a.k0s())}function st(p,f){1&p&&a.nrm(0,"mat-progress-spinner",41)}function _t(p,f){if(1&p&&(a.j41(0,"div",42)(1,"mat-icon"),a.EFF(2),a.k0s(),a.j41(3,"span"),a.EFF(4),a.k0s()()),2&p){const l=a.XpG();a.R7$(1),a.HbH(l.getStatusClass(l.uploadStatus.DRIVER_PHOTO)),a.R7$(1),a.SpI(" ",l.getStatusIcon(l.uploadStatus.DRIVER_PHOTO)," "),a.R7$(2),a.JRh(l.getStatusText(l.uploadStatus.DRIVER_PHOTO))}}function ht(p,f){1&p&&(a.j41(0,"div",38)(1,"mat-icon"),a.EFF(2,"cloud_upload"),a.k0s(),a.j41(3,"span"),a.EFF(4,"Front side"),a.k0s()())}function X(p,f){if(1&p&&(a.j41(0,"div",39)(1,"mat-icon",40),a.EFF(2,"check_circle"),a.k0s(),a.j41(3,"span"),a.EFF(4),a.k0s()()),2&p){const l=a.XpG();a.R7$(4),a.JRh(l.licenseFront.name)}}function ct(p,f){1&p&&(a.j41(0,"div",38)(1,"mat-icon"),a.EFF(2,"cloud_upload"),a.k0s(),a.j41(3,"span"),a.EFF(4,"Back side"),a.k0s()())}function it(p,f){if(1&p&&(a.j41(0,"div",39)(1,"mat-icon",40),a.EFF(2,"check_circle"),a.k0s(),a.j41(3,"span"),a.EFF(4),a.k0s()()),2&p){const l=a.XpG();a.R7$(4),a.JRh(l.licenseBack.name)}}function lt(p,f){1&p&&(a.j41(0,"mat-icon"),a.EFF(1,"upload"),a.k0s())}function H(p,f){1&p&&a.nrm(0,"mat-progress-spinner",41)}function G(p,f){if(1&p&&(a.j41(0,"div",42)(1,"mat-icon"),a.EFF(2),a.k0s(),a.j41(3,"span"),a.EFF(4),a.k0s()()),2&p){const l=a.XpG();a.R7$(1),a.HbH(l.getStatusClass(l.uploadStatus.DRIVING_LICENSE)),a.R7$(1),a.SpI(" ",l.getStatusIcon(l.uploadStatus.DRIVING_LICENSE)," "),a.R7$(2),a.JRh(l.getStatusText(l.uploadStatus.DRIVING_LICENSE))}}function I(p,f){1&p&&(a.j41(0,"div",38)(1,"mat-icon"),a.EFF(2,"cloud_upload"),a.k0s(),a.j41(3,"span"),a.EFF(4,"Click to upload vehicle photo"),a.k0s(),a.j41(5,"small"),a.EFF(6,"JPG, PNG (Max 5MB)"),a.k0s()())}function S(p,f){if(1&p&&(a.j41(0,"div",39)(1,"mat-icon",40),a.EFF(2,"check_circle"),a.k0s(),a.j41(3,"span"),a.EFF(4),a.k0s(),a.j41(5,"small"),a.EFF(6),a.k0s()()),2&p){const l=a.XpG();a.R7$(4),a.JRh(l.vehiclePhoto.name),a.R7$(2),a.JRh(l.formatFileSize(l.vehiclePhoto.size))}}function U(p,f){1&p&&(a.j41(0,"mat-icon"),a.EFF(1,"upload"),a.k0s())}function Y(p,f){1&p&&a.nrm(0,"mat-progress-spinner",41)}function u(p,f){if(1&p&&(a.j41(0,"div",42)(1,"mat-icon"),a.EFF(2),a.k0s(),a.j41(3,"span"),a.EFF(4),a.k0s()()),2&p){const l=a.XpG();a.R7$(1),a.HbH(l.getStatusClass(l.uploadStatus.VEHICLE_PHOTO)),a.R7$(1),a.SpI(" ",l.getStatusIcon(l.uploadStatus.VEHICLE_PHOTO)," "),a.R7$(2),a.JRh(l.getStatusText(l.uploadStatus.VEHICLE_PHOTO))}}function ft(p,f){1&p&&(a.j41(0,"div",38)(1,"mat-icon"),a.EFF(2,"cloud_upload"),a.k0s(),a.j41(3,"span"),a.EFF(4,"Click to upload RC book"),a.k0s(),a.j41(5,"small"),a.EFF(6,"JPG, PNG, PDF (Max 5MB)"),a.k0s()())}function v(p,f){if(1&p&&(a.j41(0,"div",39)(1,"mat-icon",40),a.EFF(2,"check_circle"),a.k0s(),a.j41(3,"span"),a.EFF(4),a.k0s(),a.j41(5,"small"),a.EFF(6),a.k0s()()),2&p){const l=a.XpG();a.R7$(4),a.JRh(l.rcBook.name),a.R7$(2),a.JRh(l.formatFileSize(l.rcBook.size))}}function t(p,f){1&p&&(a.j41(0,"mat-icon"),a.EFF(1,"upload"),a.k0s())}function M(p,f){1&p&&a.nrm(0,"mat-progress-spinner",41)}function dt(p,f){if(1&p&&(a.j41(0,"div",42)(1,"mat-icon"),a.EFF(2),a.k0s(),a.j41(3,"span"),a.EFF(4),a.k0s()()),2&p){const l=a.XpG();a.R7$(1),a.HbH(l.getStatusClass(l.uploadStatus.RC_BOOK)),a.R7$(1),a.SpI(" ",l.getStatusIcon(l.uploadStatus.RC_BOOK)," "),a.R7$(2),a.JRh(l.getStatusText(l.uploadStatus.RC_BOOK))}}function K(p,f){1&p&&(a.j41(0,"div",43)(1,"mat-icon",44),a.EFF(2,"verified"),a.k0s(),a.j41(3,"h5"),a.EFF(4,"All Documents Uploaded!"),a.k0s(),a.j41(5,"p"),a.EFF(6,"Your documents are under review. You'll be notified once verification is complete."),a.k0s()())}let R=(()=>{class p{constructor(l,E,d,A){this.documentService=l,this.deliveryPartnerService=E,this.route=d,this.router=A,this.partnerId=null,this.readonly=!1,this.isAdmin=!1,this.documentsChanged=new a.bkB,this.routePartnerId=null,this.driverPhoto=null,this.licenseFront=null,this.licenseBack=null,this.vehiclePhoto=null,this.rcBook=null,this.licenseNumber="",this.vehicleNumber="",this.uploading={DRIVER_PHOTO:!1,DRIVING_LICENSE:!1,VEHICLE_PHOTO:!1,RC_BOOK:!1},this.uploadStatus={DRIVER_PHOTO:"",DRIVING_LICENSE:"",VEHICLE_PHOTO:"",RC_BOOK:""},this.documents=[]}ngOnInit(){const l=this.route.snapshot.paramMap.get("id");l&&(this.routePartnerId=parseInt(l,10),this.isAdmin=!0),this.loadExistingDocuments()}loadExistingDocuments(){const l=this.partnerId||this.routePartnerId;l&&this.deliveryPartnerService.getPartnerDocuments(l).subscribe({next:E=>{this.documents=E.data||[],this.updateUploadStatus()},error:E=>{console.error("Error loading documents for partner:",l,E)}})}updateUploadStatus(){this.documents.forEach(l=>{"DRIVER_PHOTO"===l.documentType?this.uploadStatus.DRIVER_PHOTO="success":"DRIVING_LICENSE"===l.documentType?(this.uploadStatus.DRIVING_LICENSE="success",this.licenseNumber=l.licenseNumber||""):"VEHICLE_PHOTO"===l.documentType?(this.uploadStatus.VEHICLE_PHOTO="success",this.vehicleNumber=l.vehicleNumber||""):"RC_BOOK"===l.documentType&&(this.uploadStatus.RC_BOOK="success")})}onFileSelected(l,E){const d=l.target.files[0];if(d&&this.validateFile(d,E))switch(E){case"DRIVER_PHOTO":this.driverPhoto=d,this.uploadStatus.DRIVER_PHOTO="";break;case"LICENSE_FRONT":this.licenseFront=d;break;case"LICENSE_BACK":this.licenseBack=d;break;case"VEHICLE_PHOTO":this.vehiclePhoto=d,this.uploadStatus.VEHICLE_PHOTO="";break;case"RC_BOOK":this.rcBook=d,this.uploadStatus.RC_BOOK=""}}validateFile(l,E){return!(l.size>5242880&&(_().fire({title:"File Too Large",text:"File size must be less than 5MB",icon:"error"}),1))}canUploadLicense(){return!!(this.licenseFront&&this.licenseBack&&this.licenseNumber.trim())}canUploadVehicle(){return!(!this.vehiclePhoto||!this.vehicleNumber.trim())}uploadDocument(l,E){const d=this.partnerId||this.routePartnerId;if(!E||!d)return;const j=h.uM[l],b=this.getDisplayName(l);this.uploading[l]=!0,this.deliveryPartnerService.uploadPartnerDocument(d,j,b,E).subscribe({next:pt=>{"progress"===pt.type||"complete"===pt.type&&(this.uploading[l]=!1,this.uploadStatus[l]="success",_().fire({title:"Success!",text:`${b} uploaded successfully`,icon:"success",timer:2e3}),this.documentsChanged.emit())},error:pt=>{this.uploading[l]=!1,this.uploadStatus[l]="error",_().fire({title:"Upload Failed",text:`Failed to upload ${b}. Please try again.`,icon:"error"})}})}uploadLicenseDocuments(){if(!this.canUploadLicense())return;const l=this.partnerId||this.routePartnerId;l&&(this.uploading.DRIVING_LICENSE=!0,this.deliveryPartnerService.uploadPartnerDocument(l,h.uM.DRIVING_LICENSE,"Driving License",this.licenseFront,{licenseNumber:this.licenseNumber}).subscribe({next:d=>{"complete"===d.type&&(this.uploading.DRIVING_LICENSE=!1,this.uploadStatus.DRIVING_LICENSE="success",_().fire({title:"Success!",text:"Driving license documents uploaded successfully",icon:"success",timer:2e3}),this.documentsChanged.emit())},error:d=>{this.uploading.DRIVING_LICENSE=!1,this.uploadStatus.DRIVING_LICENSE="error",_().fire({title:"Upload Failed",text:"Failed to upload driving license documents. Please try again.",icon:"error"})}}))}uploadVehicleDocument(){if(!this.canUploadVehicle())return;const l=this.partnerId||this.routePartnerId;l&&(this.uploading.VEHICLE_PHOTO=!0,this.deliveryPartnerService.uploadPartnerDocument(l,h.uM.VEHICLE_PHOTO,"Vehicle Photo",this.vehiclePhoto,{vehicleNumber:this.vehicleNumber}).subscribe({next:d=>{"complete"===d.type&&(this.uploading.VEHICLE_PHOTO=!1,this.uploadStatus.VEHICLE_PHOTO="success",_().fire({title:"Success!",text:"Vehicle photo and details uploaded successfully",icon:"success",timer:2e3}),this.documentsChanged.emit())},error:d=>{this.uploading.VEHICLE_PHOTO=!1,this.uploadStatus.VEHICLE_PHOTO="error",_().fire({title:"Upload Failed",text:"Failed to upload vehicle document. Please try again.",icon:"error"})}}))}getDisplayName(l){switch(l){case"DRIVER_PHOTO":return"Driver Photo";case"DRIVING_LICENSE":return"Driving License";case"VEHICLE_PHOTO":return"Vehicle Photo";case"RC_BOOK":return"RC Book";default:return l}}hasDocument(l){return"success"===this.uploadStatus[l]}getUploadedCount(){let l=0;return"success"===this.uploadStatus.DRIVER_PHOTO&&l++,"success"===this.uploadStatus.DRIVING_LICENSE&&l++,"success"===this.uploadStatus.VEHICLE_PHOTO&&l++,"success"===this.uploadStatus.RC_BOOK&&l++,l}getProgressPercentage(){return this.getUploadedCount()/4*100}isAllDocumentsUploaded(){return 4===this.getUploadedCount()}getStatusClass(l){switch(l){case"success":return"success";case"error":return"error";default:return"pending"}}getStatusIcon(l){switch(l){case"success":return"check_circle";case"error":return"error";default:return"pending"}}getStatusText(l){switch(l){case"success":return"Uploaded Successfully";case"error":return"Upload Failed";default:return"Upload Pending"}}formatFileSize(l){if(0===l)return"0 Bytes";const A=Math.floor(Math.log(l)/Math.log(1024));return parseFloat((l/Math.pow(1024,A)).toFixed(2))+" "+["Bytes","KB","MB","GB"][A]}goBack(){this.router.navigate(["/users"])}static{this.\u0275fac=function(E){return new(E||p)(a.rXU(x.D),a.rXU(h.WS),a.rXU(D.nX),a.rXU(D.Ix))}}static{this.\u0275cmp=a.VBU({type:p,selectors:[["app-delivery-partner-documents"]],inputs:{partnerId:"partnerId",readonly:"readonly",isAdmin:"isAdmin"},outputs:{documentsChanged:"documentsChanged"},decls:124,vars:62,consts:[[1,"delivery-documents-container"],["class","route-header",4,"ngIf"],[1,"header"],[4,"ngIf"],["class","subtitle",4,"ngIf"],[1,"documents-grid"],[1,"document-upload-card"],[1,"document-header"],[1,"document-icon"],[1,"upload-zone",3,"click"],["type","file","accept",".jpg,.jpeg,.png",2,"display","none",3,"change"],["driverPhotoInput",""],["class","upload-placeholder",4,"ngIf"],["class","file-preview",4,"ngIf"],["mat-raised-button","","color","primary",3,"disabled","click"],["diameter","20",4,"ngIf"],["class","upload-status",4,"ngIf"],[1,"license-upload-section"],[1,"license-side"],[1,"upload-zone","small",3,"click"],["type","file","accept",".jpg,.jpeg,.png,.pdf",2,"display","none",3,"change"],["licenseFrontInput",""],["licenseBackInput",""],["appearance","outline",1,"license-number-field"],["matInput","","placeholder","Enter license number",3,"ngModel","ngModelChange"],["vehiclePhotoInput",""],["appearance","outline",1,"vehicle-number-field"],["matInput","","placeholder","Enter vehicle number (e.g., TN01AB1234)",3,"ngModel","ngModelChange"],["rcBookInput",""],[1,"upload-summary"],["mode","determinate",3,"value"],[1,"verification-checklist"],[1,"checklist-item"],["class","completion-status",4,"ngIf"],[1,"route-header"],["mat-icon-button","",1,"back-btn",3,"click"],[1,"header-title"],[1,"subtitle"],[1,"upload-placeholder"],[1,"file-preview"],[1,"success-icon"],["diameter","20"],[1,"upload-status"],[1,"completion-status"],[1,"success"]],template:function(E,d){if(1&E){const A=a.RV6();a.j41(0,"div",0),a.DNE(1,T,9,0,"div",1),a.j41(2,"div",2),a.DNE(3,N,2,0,"h3",3),a.DNE(4,$,2,0,"p",4),a.k0s(),a.j41(5,"div",5)(6,"div",6)(7,"div",7)(8,"mat-icon",8),a.EFF(9,"person"),a.k0s(),a.j41(10,"h4"),a.EFF(11,"\u{1f464} Driver Photo"),a.k0s(),a.j41(12,"p"),a.EFF(13,"Upload clear photo of delivery partner"),a.k0s()(),a.j41(14,"div",9),a.bIt("click",function(){a.eBV(A);const b=a.sdS(16);return a.Njj(b.click())}),a.j41(15,"input",10,11),a.bIt("change",function(b){return d.onFileSelected(b,"DRIVER_PHOTO")}),a.k0s(),a.DNE(17,y,7,0,"div",12),a.DNE(18,et,7,2,"div",13),a.k0s(),a.j41(19,"button",14),a.bIt("click",function(){return d.uploadDocument("DRIVER_PHOTO",d.driverPhoto)}),a.DNE(20,nt,2,0,"mat-icon",3),a.DNE(21,st,1,0,"mat-progress-spinner",15),a.EFF(22),a.k0s(),a.DNE(23,_t,5,4,"div",16),a.k0s(),a.j41(24,"div",6)(25,"div",7)(26,"mat-icon",8),a.EFF(27,"card_membership"),a.k0s(),a.j41(28,"h4"),a.EFF(29,"\u{1faaa} Driving License"),a.k0s(),a.j41(30,"p"),a.EFF(31,"Upload valid driving license (front & back)"),a.k0s()(),a.j41(32,"div",17)(33,"div",18)(34,"h5"),a.EFF(35,"License Front"),a.k0s(),a.j41(36,"div",19),a.bIt("click",function(){a.eBV(A);const b=a.sdS(38);return a.Njj(b.click())}),a.j41(37,"input",20,21),a.bIt("change",function(b){return d.onFileSelected(b,"LICENSE_FRONT")}),a.k0s(),a.DNE(39,ht,5,0,"div",12),a.DNE(40,X,5,1,"div",13),a.k0s()(),a.j41(41,"div",18)(42,"h5"),a.EFF(43,"License Back"),a.k0s(),a.j41(44,"div",19),a.bIt("click",function(){a.eBV(A);const b=a.sdS(46);return a.Njj(b.click())}),a.j41(45,"input",20,22),a.bIt("change",function(b){return d.onFileSelected(b,"LICENSE_BACK")}),a.k0s(),a.DNE(47,ct,5,0,"div",12),a.DNE(48,it,5,1,"div",13),a.k0s()()(),a.j41(49,"mat-form-field",23)(50,"mat-label"),a.EFF(51,"License Number"),a.k0s(),a.j41(52,"input",24),a.bIt("ngModelChange",function(b){return d.licenseNumber=b}),a.k0s()(),a.j41(53,"button",14),a.bIt("click",function(){return d.uploadLicenseDocuments()}),a.DNE(54,lt,2,0,"mat-icon",3),a.DNE(55,H,1,0,"mat-progress-spinner",15),a.EFF(56),a.k0s(),a.DNE(57,G,5,4,"div",16),a.k0s(),a.j41(58,"div",6)(59,"div",7)(60,"mat-icon",8),a.EFF(61,"motorcycle"),a.k0s(),a.j41(62,"h4"),a.EFF(63,"\u{1f3cd}\ufe0f Vehicle Photo"),a.k0s(),a.j41(64,"p"),a.EFF(65,"Upload clear photo of delivery vehicle"),a.k0s()(),a.j41(66,"div",9),a.bIt("click",function(){a.eBV(A);const b=a.sdS(68);return a.Njj(b.click())}),a.j41(67,"input",10,25),a.bIt("change",function(b){return d.onFileSelected(b,"VEHICLE_PHOTO")}),a.k0s(),a.DNE(69,I,7,0,"div",12),a.DNE(70,S,7,2,"div",13),a.k0s(),a.j41(71,"mat-form-field",26)(72,"mat-label"),a.EFF(73,"Vehicle Number"),a.k0s(),a.j41(74,"input",27),a.bIt("ngModelChange",function(b){return d.vehicleNumber=b}),a.k0s()(),a.j41(75,"button",14),a.bIt("click",function(){return d.uploadVehicleDocument()}),a.DNE(76,U,2,0,"mat-icon",3),a.DNE(77,Y,1,0,"mat-progress-spinner",15),a.EFF(78),a.k0s(),a.DNE(79,u,5,4,"div",16),a.k0s(),a.j41(80,"div",6)(81,"div",7)(82,"mat-icon",8),a.EFF(83,"description"),a.k0s(),a.j41(84,"h4"),a.EFF(85,"\u{1f4c4} RC Book"),a.k0s(),a.j41(86,"p"),a.EFF(87,"Upload vehicle registration certificate"),a.k0s()(),a.j41(88,"div",9),a.bIt("click",function(){a.eBV(A);const b=a.sdS(90);return a.Njj(b.click())}),a.j41(89,"input",20,28),a.bIt("change",function(b){return d.onFileSelected(b,"RC_BOOK")}),a.k0s(),a.DNE(91,ft,7,0,"div",12),a.DNE(92,v,7,2,"div",13),a.k0s(),a.j41(93,"button",14),a.bIt("click",function(){return d.uploadDocument("RC_BOOK",d.rcBook)}),a.DNE(94,t,2,0,"mat-icon",3),a.DNE(95,M,1,0,"mat-progress-spinner",15),a.EFF(96),a.k0s(),a.DNE(97,dt,5,4,"div",16),a.k0s()(),a.j41(98,"div",29)(99,"h4"),a.EFF(100),a.k0s(),a.nrm(101,"mat-progress-bar",30),a.j41(102,"div",31)(103,"div",32)(104,"mat-icon"),a.EFF(105),a.k0s(),a.j41(106,"span"),a.EFF(107,"Driver Photo"),a.k0s()(),a.j41(108,"div",32)(109,"mat-icon"),a.EFF(110),a.k0s(),a.j41(111,"span"),a.EFF(112,"Driving License"),a.k0s()(),a.j41(113,"div",32)(114,"mat-icon"),a.EFF(115),a.k0s(),a.j41(116,"span"),a.EFF(117,"Vehicle Photo & Number"),a.k0s()(),a.j41(118,"div",32)(119,"mat-icon"),a.EFF(120),a.k0s(),a.j41(121,"span"),a.EFF(122,"RC Book"),a.k0s()()(),a.DNE(123,K,7,0,"div",33),a.k0s()()}2&E&&(a.R7$(1),a.Y8G("ngIf",d.routePartnerId),a.R7$(1),a.AVh("embedded",d.routePartnerId),a.R7$(1),a.Y8G("ngIf",!d.routePartnerId),a.R7$(1),a.Y8G("ngIf",!d.routePartnerId),a.R7$(10),a.AVh("has-file",d.driverPhoto),a.R7$(3),a.Y8G("ngIf",!d.driverPhoto),a.R7$(1),a.Y8G("ngIf",d.driverPhoto),a.R7$(1),a.Y8G("disabled",!d.driverPhoto||d.uploading.DRIVER_PHOTO),a.R7$(1),a.Y8G("ngIf",!d.uploading.DRIVER_PHOTO),a.R7$(1),a.Y8G("ngIf",d.uploading.DRIVER_PHOTO),a.R7$(1),a.SpI(" ",d.uploading.DRIVER_PHOTO?"Uploading...":"Upload Driver Photo"," "),a.R7$(1),a.Y8G("ngIf",d.uploadStatus.DRIVER_PHOTO),a.R7$(13),a.AVh("has-file",d.licenseFront),a.R7$(3),a.Y8G("ngIf",!d.licenseFront),a.R7$(1),a.Y8G("ngIf",d.licenseFront),a.R7$(4),a.AVh("has-file",d.licenseBack),a.R7$(3),a.Y8G("ngIf",!d.licenseBack),a.R7$(1),a.Y8G("ngIf",d.licenseBack),a.R7$(4),a.Y8G("ngModel",d.licenseNumber),a.R7$(1),a.Y8G("disabled",!d.canUploadLicense()||d.uploading.DRIVING_LICENSE),a.R7$(1),a.Y8G("ngIf",!d.uploading.DRIVING_LICENSE),a.R7$(1),a.Y8G("ngIf",d.uploading.DRIVING_LICENSE),a.R7$(1),a.SpI(" ",d.uploading.DRIVING_LICENSE?"Uploading...":"Upload License Documents"," "),a.R7$(1),a.Y8G("ngIf",d.uploadStatus.DRIVING_LICENSE),a.R7$(9),a.AVh("has-file",d.vehiclePhoto),a.R7$(3),a.Y8G("ngIf",!d.vehiclePhoto),a.R7$(1),a.Y8G("ngIf",d.vehiclePhoto),a.R7$(4),a.Y8G("ngModel",d.vehicleNumber),a.R7$(1),a.Y8G("disabled",!d.canUploadVehicle()||d.uploading.VEHICLE_PHOTO),a.R7$(1),a.Y8G("ngIf",!d.uploading.VEHICLE_PHOTO),a.R7$(1),a.Y8G("ngIf",d.uploading.VEHICLE_PHOTO),a.R7$(1),a.SpI(" ",d.uploading.VEHICLE_PHOTO?"Uploading...":"Upload Vehicle Photo"," "),a.R7$(1),a.Y8G("ngIf",d.uploadStatus.VEHICLE_PHOTO),a.R7$(9),a.AVh("has-file",d.rcBook),a.R7$(3),a.Y8G("ngIf",!d.rcBook),a.R7$(1),a.Y8G("ngIf",d.rcBook),a.R7$(1),a.Y8G("disabled",!d.rcBook||d.uploading.RC_BOOK),a.R7$(1),a.Y8G("ngIf",!d.uploading.RC_BOOK),a.R7$(1),a.Y8G("ngIf",d.uploading.RC_BOOK),a.R7$(1),a.SpI(" ",d.uploading.RC_BOOK?"Uploading...":"Upload RC Book"," "),a.R7$(1),a.Y8G("ngIf",d.uploadStatus.RC_BOOK),a.R7$(3),a.SpI("Document Verification Progress: ",d.getUploadedCount(),"/4 Documents"),a.R7$(1),a.Y8G("value",d.getProgressPercentage()),a.R7$(2),a.HbH(d.hasDocument("DRIVER_PHOTO")?"completed":"pending"),a.R7$(2),a.JRh(d.hasDocument("DRIVER_PHOTO")?"check_circle":"radio_button_unchecked"),a.R7$(3),a.HbH(d.hasDocument("DRIVING_LICENSE")?"completed":"pending"),a.R7$(2),a.JRh(d.hasDocument("DRIVING_LICENSE")?"check_circle":"radio_button_unchecked"),a.R7$(3),a.HbH(d.hasDocument("VEHICLE_PHOTO")?"completed":"pending"),a.R7$(2),a.JRh(d.hasDocument("VEHICLE_PHOTO")?"check_circle":"radio_button_unchecked"),a.R7$(3),a.HbH(d.hasDocument("RC_BOOK")?"completed":"pending"),a.R7$(2),a.JRh(d.hasDocument("RC_BOOK")?"check_circle":"radio_button_unchecked"),a.R7$(3),a.Y8G("ngIf",d.isAllDocumentsUploaded()))},dependencies:[B.bT,V.me,V.BC,V.vS,Q.$z,Q.iY,J.rl,J.nJ,C.fg,q.An,z.LG,w.HM],styles:[".delivery-documents-container[_ngcontent-%COMP%]{padding:24px}.route-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:24px;padding:20px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:16px;color:#fff;box-shadow:0 4px 20px #0000001a}.back-btn[_ngcontent-%COMP%]{color:#fff;background:rgba(255,255,255,.1);border-radius:50%;transition:all .3s ease}.back-btn[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.2);transform:scale(1.1)}.header-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 4px;font-size:24px;font-weight:600}.header-title[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;font-size:14px;opacity:.9}.header.embedded[_ngcontent-%COMP%]{display:none}.header[_ngcontent-%COMP%]{margin-bottom:24px;text-align:center}.header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#1976d2;font-size:24px}.subtitle[_ngcontent-%COMP%]{margin:0;color:#666;font-size:16px}.documents-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:24px;margin-bottom:32px}.document-upload-card[_ngcontent-%COMP%]{background:white;border:2px solid #e0e0e0;border-radius:12px;padding:20px;text-align:center;transition:all .3s ease;box-shadow:0 2px 4px #0000001a}.document-upload-card[_ngcontent-%COMP%]:hover{border-color:#1976d2;box-shadow:0 4px 12px #1976d226}.document-header[_ngcontent-%COMP%]{margin-bottom:20px}.document-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#1976d2;margin-bottom:12px}.document-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;color:#333;font-size:18px;font-weight:600}.document-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.upload-zone[_ngcontent-%COMP%]{border:2px dashed #ccc;border-radius:8px;padding:30px 20px;margin-bottom:20px;cursor:pointer;transition:all .3s ease;min-height:120px;display:flex;align-items:center;justify-content:center}.upload-zone.small[_ngcontent-%COMP%]{padding:20px 15px;min-height:80px}.upload-zone[_ngcontent-%COMP%]:hover{border-color:#1976d2;background-color:#f5f5f5}.upload-zone.has-file[_ngcontent-%COMP%]{border-color:#4caf50;background-color:#f1f8e9}.upload-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px}.upload-placeholder[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#999}.upload-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333;font-weight:500}.upload-placeholder[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#999;font-size:12px}.file-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.success-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:32px;width:32px;height:32px}.file-preview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333;font-weight:500;word-break:break-all;max-width:100%;font-size:14px}.file-preview[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:12px}.license-upload-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.license-side[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 8px;color:#333;font-size:14px;font-weight:600}.license-number-field[_ngcontent-%COMP%], .vehicle-number-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.upload-status[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;margin-top:12px;padding:8px;border-radius:4px}.upload-status[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#4caf50}.upload-status[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#f44336}.upload-status[_ngcontent-%COMP%]   .pending[_ngcontent-%COMP%]{color:#ff9800}.upload-summary[_ngcontent-%COMP%]{text-align:center;padding:24px;background:#f8f9fa;border-radius:12px;border:1px solid #e9ecef}.upload-summary[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;color:#333;font-size:18px;font-weight:600}.verification-checklist[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin:24px 0}.checklist-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px;border-radius:8px;background:white;border:1px solid #e0e0e0}.checklist-item.completed[_ngcontent-%COMP%]{background:#f1f8e9;border-color:#4caf50}.checklist-item.completed[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50}.checklist-item.pending[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#9ca3af}.checklist-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333;font-weight:500}.completion-status[_ngcontent-%COMP%]{background:#e8f5e8;border:1px solid #4caf50;border-radius:8px;padding:20px;margin-top:20px}.completion-status[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#4caf50;font-size:48px;width:48px;height:48px;margin-bottom:12px}.completion-status[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 8px;color:#2e7d32;font-size:18px;font-weight:600}.completion-status[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#2e7d32;font-size:14px}button[_ngcontent-%COMP%]{width:100%;margin-bottom:12px}mat-progress-spinner[_ngcontent-%COMP%]{display:inline-block}mat-form-field[_ngcontent-%COMP%]{width:100%}"]})}}return p})()},5126:(Dt,mt,g)=>{g.r(mt),g.d(mt,{DeliveryModule:()=>hr});var a=g(177),h=g(9417),ot=g(5911),_=g(5596),x=g(8834),D=g(2102),B=g(9631),V=g(2798),Q=g(5084),J=g(6600),C=g(9159),q=g(6695),z=g(2042),w=g(9213),T=g(6471),N=g(9183),$=g(5416),y=g(5351),et=g(9454),nt=g(6850),st=g(450),_t=g(7575),ht=g(1975),X=g(9115),ct=g(4823),it=g(6233),lt=g(1997),H=g(3902),G=g(1188),I=g(4978),S=g(400),U=g(1413),Y=g(605),u=g(6977),ft=g(8032),v=g.n(ft),t=g(7705),M=g(1626),dt=g(4412),K=g(7673),R=g(9437),p=g(8141),f=g(2525),l=g(6932);let E=(()=>{class r{constructor(e,n){this.http=e,this.firebaseService=n,this.apiUrl=`${f.c.apiUrl}/delivery`,this.currentAssignmentSubject=new dt.t(null),this.currentAssignment$=this.currentAssignmentSubject.asObservable()}getAvailablePartners(e){return this.http.get(`${this.apiUrl}/partners/available`,{params:(new M.Nl).set("orderId",e.toString())}).pipe((0,R.W)(n=>(console.error("Error fetching available partners:",n),(0,K.of)([]))))}autoAssignDeliveryPartner(e){return this.http.post(`${this.apiUrl}/orders/${e}/auto-assign`,{}).pipe((0,p.M)(n=>{this.currentAssignmentSubject.next(n),this.firebaseService.sendDeliveryNotification(n.partnerPhone,"New Delivery Assignment",`You have a new delivery for order #${n.orderNumber}`),v().fire({title:"Partner Assigned!",text:`${n.partnerName} has been assigned to this order.`,icon:"success",timer:3e3})}),(0,R.W)(n=>{throw console.error("Error auto-assigning partner:",n),v().fire("Error","No delivery partners available. Please try manual assignment.","error"),n}))}assignDeliveryPartner(e,n){return this.http.post(`${this.apiUrl}/orders/${e}/assign`,{partnerId:n}).pipe((0,p.M)(i=>{this.currentAssignmentSubject.next(i),this.firebaseService.sendDeliveryNotification(i.partnerPhone,"New Delivery Assignment",`You have a new delivery for order #${i.orderNumber}`),v().fire({title:"Partner Assigned!",text:`Delivery partner has been assigned to order #${i.orderNumber}.`,icon:"success",timer:3e3})}),(0,R.W)(i=>{throw console.error("Error assigning partner:",i),v().fire("Error","Failed to assign delivery partner","error"),i}))}getAssignment(e){return this.http.get(`${this.apiUrl}/assignments/${e}`).pipe((0,p.M)(n=>this.currentAssignmentSubject.next(n)),(0,R.W)(n=>{throw console.error("Error fetching assignment:",n),n}))}getPartnerAssignments(e,n){let i=new M.Nl;return n&&(i=i.set("status",n)),this.http.get(`${this.apiUrl}/partners/${e}/assignments`,{params:i}).pipe((0,R.W)(o=>(console.error("Error fetching partner assignments:",o),(0,K.of)([]))))}acceptAssignment(e){return this.http.post(`${this.apiUrl}/assignments/${e}/accept`,{}).pipe((0,p.M)(n=>{this.currentAssignmentSubject.next(n),v().fire({title:"Assignment Accepted!",text:"You have accepted this delivery assignment.",icon:"success",timer:2e3})}),(0,R.W)(n=>{throw console.error("Error accepting assignment:",n),v().fire("Error","Failed to accept assignment","error"),n}))}rejectAssignment(e,n){return this.http.post(`${this.apiUrl}/assignments/${e}/reject`,{reason:n}).pipe((0,p.M)(()=>{this.currentAssignmentSubject.next(null),v().fire({title:"Assignment Rejected",text:"The assignment has been rejected.",icon:"info",timer:2e3})}),(0,R.W)(i=>{throw console.error("Error rejecting assignment:",i),v().fire("Error","Failed to reject assignment","error"),i}))}startPickup(e){return this.http.post(`${this.apiUrl}/assignments/${e}/start-pickup`,{}).pipe((0,p.M)(n=>{this.currentAssignmentSubject.next(n),v().fire({title:"Pickup Started",text:"Heading to pickup location...",icon:"info",timer:2e3})}),(0,R.W)(n=>{throw console.error("Error starting pickup:",n),v().fire("Error","Failed to start pickup","error"),n}))}verifyPickupOTP(e,n){return this.http.post(`${this.apiUrl}/assignments/${e}/verify-pickup`,{assignmentId:e,otp:n,type:"PICKUP"}).pipe((0,p.M)(o=>{this.currentAssignmentSubject.next(o),this.firebaseService.sendOrderNotification(o.orderNumber,"OUT_FOR_DELIVERY","Your order is out for delivery!"),v().fire({title:"Pickup Completed!",text:"Order picked up successfully. Heading to delivery location.",icon:"success",timer:3e3})}),(0,R.W)(o=>{throw console.error("Error verifying pickup OTP:",o),v().fire("Error","Invalid OTP. Please try again.","error"),o}))}startDelivery(e){return this.http.post(`${this.apiUrl}/assignments/${e}/start-delivery`,{}).pipe((0,p.M)(n=>{this.currentAssignmentSubject.next(n),v().fire({title:"Delivery Started",text:"Heading to delivery location...",icon:"info",timer:2e3})}),(0,R.W)(n=>{throw console.error("Error starting delivery:",n),v().fire("Error","Failed to start delivery","error"),n}))}verifyDeliveryOTP(e,n,i){const o=new FormData;return o.append("assignmentId",e.toString()),o.append("otp",n),o.append("type","DELIVERY"),i&&o.append("proofImage",i),this.http.post(`${this.apiUrl}/assignments/${e}/verify-delivery`,o).pipe((0,p.M)(c=>{this.currentAssignmentSubject.next(c),this.firebaseService.sendOrderNotification(c.orderNumber,"DELIVERED","Your order has been delivered successfully!"),v().fire({title:"Delivery Completed!",html:`\n            <div>\n              <p>Order delivered successfully!</p>\n              <p><strong>Earnings: \u20b9${c.earnings}</strong></p>\n            </div>\n          `,icon:"success",confirmButtonText:"Great!"})}),(0,R.W)(c=>{throw console.error("Error verifying delivery OTP:",c),v().fire("Error","Invalid OTP. Please try again.","error"),c}))}updateLocation(e,n,i){return this.http.post(`${this.apiUrl}/partners/${e}/location`,{latitude:n,longitude:i}).pipe((0,R.W)(o=>(console.error("Error updating location:",o),(0,K.of)(null))))}getTrackingInfo(e){return this.http.get(`${this.apiUrl}/assignments/${e}/tracking`).pipe((0,R.W)(n=>(console.error("Error fetching tracking info:",n),(0,K.of)({partnerLocation:null,estimatedTime:"Calculating...",status:"UNKNOWN"}))))}toggleOnlineStatus(e,n){return this.http.post(`${this.apiUrl}/partners/${e}/status`,{isOnline:n}).pipe((0,p.M)(()=>{v().fire({title:n?"You are Online!":"You are Offline",text:n?"You will receive delivery requests.":"You will not receive new requests.",icon:"info",timer:2e3})}),(0,R.W)(i=>{throw console.error("Error toggling online status:",i),v().fire("Error","Failed to update status","error"),i}))}getPartnerEarnings(e,n="today"){return this.http.get(`${this.apiUrl}/partners/${e}/earnings`,{params:(new M.Nl).set("period",n)}).pipe((0,R.W)(()=>(0,K.of)({totalEarnings:0,completedDeliveries:0,pendingEarnings:0,averageRating:0})))}reportIssue(e,n,i){return this.http.post(`${this.apiUrl}/assignments/${e}/report-issue`,{issue:n,description:i}).pipe((0,p.M)(()=>{v().fire({title:"Issue Reported",text:"Your issue has been reported to support.",icon:"info",timer:3e3})}),(0,R.W)(o=>{throw console.error("Error reporting issue:",o),v().fire("Error","Failed to report issue","error"),o}))}static{this.\u0275fac=function(n){return new(n||r)(t.KVO(M.Qq),t.KVO(l.f))}}static{this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function d(r,s){1&r&&(t.j41(0,"span",12)(1,"mat-icon"),t.EFF(2,"wifi"),t.k0s(),t.EFF(3," Online "),t.k0s())}function A(r,s){1&r&&(t.j41(0,"span",13)(1,"mat-icon"),t.EFF(2,"wifi_off"),t.k0s(),t.EFF(3," Offline "),t.k0s())}function j(r,s){1&r&&t.EFF(0,"Accepted")}function b(r,s){1&r&&t.EFF(0,"Pickup")}function pt(r,s){1&r&&t.EFF(0,"Delivery")}function It(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",30),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.startPickup())}),t.j41(1,"mat-icon"),t.EFF(2,"directions"),t.k0s(),t.EFF(3," Start Pickup "),t.k0s()}}function Rt(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",31)(1,"mat-form-field")(2,"mat-label"),t.EFF(3,"Enter Shop OTP"),t.k0s(),t.j41(4,"input",32),t.bIt("ngModelChange",function(i){t.eBV(e);const o=t.XpG(3);return t.Njj(o.otpInput=i)}),t.k0s()(),t.j41(5,"button",33),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.verifyPickupOTP())}),t.j41(6,"mat-icon"),t.EFF(7,"verified"),t.k0s(),t.EFF(8," Verify & Pickup "),t.k0s()()}if(2&r){const e=t.XpG(3);t.R7$(4),t.Y8G("ngModel",e.otpInput)}}function jt(r,s){if(1&r&&(t.j41(0,"div",26)(1,"h3")(2,"mat-icon"),t.EFF(3,"store"),t.k0s(),t.EFF(4," Pickup Location"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s(),t.j41(7,"div",27),t.DNE(8,It,4,0,"button",28),t.DNE(9,Rt,9,1,"div",29),t.k0s()()),2&r){const e=t.XpG(2);t.R7$(6),t.JRh(e.currentAssignment.pickupAddress),t.R7$(2),t.Y8G("ngIf","ACCEPTED"===e.currentAssignment.status),t.R7$(1),t.Y8G("ngIf","PICKUP_STARTED"===e.currentAssignment.status)}}function wt(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",30),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.startDelivery())}),t.j41(1,"mat-icon"),t.EFF(2,"directions"),t.k0s(),t.EFF(3," Start Delivery "),t.k0s()}}function St(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",31)(1,"mat-form-field")(2,"mat-label"),t.EFF(3,"Enter Customer OTP"),t.k0s(),t.j41(4,"input",32),t.bIt("ngModelChange",function(i){t.eBV(e);const o=t.XpG(3);return t.Njj(o.otpInput=i)}),t.k0s()(),t.j41(5,"button",33),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.verifyDeliveryOTP())}),t.j41(6,"mat-icon"),t.EFF(7,"verified"),t.k0s(),t.EFF(8," Complete Delivery "),t.k0s()()}if(2&r){const e=t.XpG(3);t.R7$(4),t.Y8G("ngModel",e.otpInput)}}function Tt(r,s){if(1&r&&(t.j41(0,"div",26)(1,"h3")(2,"mat-icon"),t.EFF(3,"home"),t.k0s(),t.EFF(4," Delivery Location"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s(),t.j41(7,"div",27),t.DNE(8,wt,4,0,"button",28),t.DNE(9,St,9,1,"div",29),t.k0s()()),2&r){const e=t.XpG(2);t.R7$(6),t.JRh(e.currentAssignment.deliveryAddress),t.R7$(2),t.Y8G("ngIf","PICKED_UP"===e.currentAssignment.status),t.R7$(1),t.Y8G("ngIf","DELIVERY_STARTED"===e.currentAssignment.status)}}const $t=function(){return["PICKED_UP","DELIVERY_STARTED","DELIVERED"]},At=function(){return["ACCEPTED","PICKUP_STARTED"]},Nt=function(){return["PICKED_UP","DELIVERY_STARTED"]};function Lt(r,s){if(1&r){const e=t.RV6();t.j41(0,"mat-card",14)(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3),t.j41(4,"mat-chip")(5,"mat-icon"),t.EFF(6),t.k0s(),t.EFF(7),t.k0s()()(),t.j41(8,"mat-card-content")(9,"div",15)(10,"mat-stepper",16,17)(12,"mat-step",18),t.DNE(13,j,1,0,"ng-template",19),t.k0s(),t.j41(14,"mat-step",18),t.DNE(15,b,1,0,"ng-template",19),t.k0s(),t.j41(16,"mat-step",18),t.DNE(17,pt,1,0,"ng-template",19),t.k0s()()(),t.DNE(18,jt,10,3,"div",20),t.DNE(19,Tt,10,3,"div",20),t.j41(20,"div",21)(21,"div",22)(22,"mat-icon"),t.EFF(23,"route"),t.k0s(),t.j41(24,"span"),t.EFF(25),t.k0s()(),t.j41(26,"div",22)(27,"mat-icon"),t.EFF(28,"schedule"),t.k0s(),t.j41(29,"span"),t.EFF(30),t.k0s()(),t.j41(31,"div",22)(32,"mat-icon"),t.EFF(33,"payments"),t.k0s(),t.j41(34,"span"),t.EFF(35),t.k0s()()(),t.j41(36,"div",23)(37,"button",24),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.callCustomer())}),t.j41(38,"mat-icon"),t.EFF(39,"phone"),t.k0s(),t.EFF(40," Call Customer "),t.k0s(),t.j41(41,"button",24),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.openNavigation(i.currentAssignment.status.includes("PICKUP")?i.currentAssignment.pickupAddress:i.currentAssignment.deliveryAddress))}),t.j41(42,"mat-icon"),t.EFF(43,"navigation"),t.k0s(),t.EFF(44," Navigate "),t.k0s(),t.j41(45,"button",25),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.reportIssue())}),t.j41(46,"mat-icon"),t.EFF(47,"warning"),t.k0s(),t.EFF(48," Report Issue "),t.k0s()()()()}if(2&r){const e=t.XpG();t.R7$(3),t.SpI(" Active Delivery - Order #",e.currentAssignment.orderNumber," "),t.R7$(1),t.xc7("background-color",e.getStatusColor(e.currentAssignment.status)),t.R7$(2),t.JRh(e.getStatusIcon(e.currentAssignment.status)),t.R7$(1),t.SpI(" ",e.currentAssignment.status," "),t.R7$(5),t.Y8G("completed","ASSIGNED"!==e.currentAssignment.status),t.R7$(2),t.Y8G("completed",t.lJ4(13,$t).includes(e.currentAssignment.status)),t.R7$(2),t.Y8G("completed","DELIVERED"===e.currentAssignment.status),t.R7$(2),t.Y8G("ngIf",t.lJ4(14,At).includes(e.currentAssignment.status)),t.R7$(1),t.Y8G("ngIf",t.lJ4(15,Nt).includes(e.currentAssignment.status)),t.R7$(6),t.SpI("Distance: ",e.currentAssignment.distance," km"),t.R7$(5),t.SpI("Est. Time: ",e.currentAssignment.estimatedTime,""),t.R7$(5),t.SpI("Earnings: \u20b9",e.currentAssignment.earnings,"")}}function Gt(r,s){if(1&r){const e=t.RV6();t.j41(0,"mat-card",37)(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3),t.j41(4,"mat-chip",38),t.EFF(5,"New"),t.k0s()()(),t.j41(6,"mat-card-content")(7,"div",39)(8,"div",40)(9,"mat-icon"),t.EFF(10,"store"),t.k0s(),t.j41(11,"span"),t.EFF(12),t.k0s()(),t.j41(13,"div",40)(14,"mat-icon"),t.EFF(15,"home"),t.k0s(),t.j41(16,"span"),t.EFF(17),t.k0s()(),t.j41(18,"div",40)(19,"mat-icon"),t.EFF(20,"route"),t.k0s(),t.j41(21,"span"),t.EFF(22),t.k0s(),t.j41(23,"mat-icon"),t.EFF(24,"schedule"),t.k0s(),t.j41(25,"span"),t.EFF(26),t.k0s()(),t.j41(27,"div",41)(28,"mat-icon"),t.EFF(29,"payments"),t.k0s(),t.j41(30,"strong"),t.EFF(31),t.k0s()()()(),t.j41(32,"mat-card-actions")(33,"button",30),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.acceptAssignment(o))}),t.j41(34,"mat-icon"),t.EFF(35,"check"),t.k0s(),t.EFF(36," Accept "),t.k0s(),t.j41(37,"button",25),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.rejectAssignment(o))}),t.j41(38,"mat-icon"),t.EFF(39,"close"),t.k0s(),t.EFF(40," Decline "),t.k0s()()()}if(2&r){const e=s.$implicit;t.R7$(3),t.SpI(" Order #",e.orderNumber," "),t.R7$(9),t.JRh(e.pickupAddress),t.R7$(5),t.JRh(e.deliveryAddress),t.R7$(5),t.SpI("",e.distance," km"),t.R7$(4),t.JRh(e.estimatedTime),t.R7$(5),t.SpI("\u20b9",e.earnings,"")}}function Bt(r,s){1&r&&(t.j41(0,"div",42)(1,"mat-icon"),t.EFF(2,"inbox"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No deliveries available"),t.k0s(),t.j41(5,"p",43),t.EFF(6,"New deliveries will appear here automatically"),t.k0s()())}function Vt(r,s){if(1&r&&(t.j41(0,"div")(1,"h2"),t.EFF(2,"Available Deliveries"),t.k0s(),t.j41(3,"div",34),t.DNE(4,Gt,41,6,"mat-card",35),t.DNE(5,Bt,7,0,"div",36),t.k0s()()),2&r){const e=t.XpG();t.R7$(4),t.Y8G("ngForOf",e.availableAssignments),t.R7$(1),t.Y8G("ngIf",0===e.availableAssignments.length)}}function Ut(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",44)(1,"mat-card")(2,"mat-card-content")(3,"mat-icon"),t.EFF(4,"wifi_off"),t.k0s(),t.j41(5,"h3"),t.EFF(6,"You are Offline"),t.k0s(),t.j41(7,"p"),t.EFF(8,"Go online to receive delivery requests"),t.k0s(),t.j41(9,"button",30),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleOnlineStatus())}),t.j41(10,"mat-icon"),t.EFF(11,"wifi"),t.k0s(),t.EFF(12," Go Online "),t.k0s()()()()}}function Yt(r,s){if(1&r&&(t.j41(0,"mat-list-item")(1,"mat-icon",47),t.EFF(2,"done_all"),t.k0s(),t.j41(3,"div",48),t.EFF(4),t.k0s(),t.j41(5,"div",49),t.EFF(6),t.nI1(7,"date"),t.k0s(),t.j41(8,"span",50),t.EFF(9),t.k0s()()),2&r){const e=s.$implicit;t.R7$(4),t.SpI("Order #",e.orderNumber,""),t.R7$(2),t.JRh(t.i5U(7,3,e.actualDeliveryTime,"short")),t.R7$(3),t.SpI("\u20b9",e.earnings,"")}}function zt(r,s){if(1&r&&(t.j41(0,"div",45)(1,"h3"),t.EFF(2,"Today's Completed Deliveries"),t.k0s(),t.j41(3,"mat-list"),t.DNE(4,Yt,10,6,"mat-list-item",46),t.k0s()()),2&r){const e=t.XpG();t.R7$(4),t.Y8G("ngForOf",e.completedAssignments)}}let Xt=(()=>{class r{constructor(e){this.deliveryService=e,this.destroy$=new U.B,this.partnerId=1,this.isOnline=!1,this.currentAssignment=null,this.availableAssignments=[],this.completedAssignments=[],this.todayEarnings={totalEarnings:0,completedDeliveries:0,pendingEarnings:0,averageRating:0},this.otpInput="",this.currentLocation={latitude:0,longitude:0},this.selectedTab=0,this.loading=!1}ngOnInit(){this.loadPartnerId(),this.loadCurrentAssignment(),this.loadAssignments(),this.loadEarnings(),this.startLocationTracking()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadPartnerId(){const e=localStorage.getItem("currentUser");if(e){const n=JSON.parse(e);this.partnerId=n.partnerId||n.id||1}}toggleOnlineStatus(){this.isOnline=!this.isOnline,this.deliveryService.toggleOnlineStatus(this.partnerId,this.isOnline).pipe((0,u.Q)(this.destroy$)).subscribe({next:()=>{this.isOnline&&this.loadAssignments()},error:e=>{console.error("Error toggling status:",e),this.isOnline=!this.isOnline}})}loadCurrentAssignment(){this.deliveryService.currentAssignment$.pipe((0,u.Q)(this.destroy$)).subscribe(e=>{this.currentAssignment=e})}loadAssignments(){this.isOnline&&(this.loading=!0,this.deliveryService.getPartnerAssignments(this.partnerId,"PENDING").pipe((0,u.Q)(this.destroy$)).subscribe(e=>{this.availableAssignments=e,this.loading=!1,e.length>0&&(this.playNotificationSound(),v().fire({title:"New Delivery Available!",text:`${e.length} new delivery request${e.length>1?"s":""}`,icon:"info",toast:!0,position:"top-end",timer:5e3,showConfirmButton:!1}))}),this.deliveryService.getPartnerAssignments(this.partnerId,"DELIVERED").pipe((0,u.Q)(this.destroy$)).subscribe(e=>{this.completedAssignments=e}))}loadEarnings(){this.deliveryService.getPartnerEarnings(this.partnerId,"today").pipe((0,u.Q)(this.destroy$)).subscribe(e=>{this.todayEarnings=e})}acceptAssignment(e){v().fire({title:"Accept Delivery?",html:`\n        <div>\n          <p><strong>Order:</strong> #${e.orderNumber}</p>\n          <p><strong>Distance:</strong> ${e.distance} km</p>\n          <p><strong>Earnings:</strong> \u20b9${e.earnings}</p>\n        </div>\n      `,icon:"question",showCancelButton:!0,confirmButtonText:"Accept",cancelButtonText:"Decline"}).then(n=>{n.isConfirmed&&this.deliveryService.acceptAssignment(e.id).pipe((0,u.Q)(this.destroy$)).subscribe({next:i=>{this.currentAssignment=i,this.loadAssignments()},error:i=>{console.error("Error accepting assignment:",i)}})})}rejectAssignment(e){v().fire({title:"Decline Delivery?",input:"select",inputOptions:{"Too far":"Too far","Vehicle issue":"Vehicle issue","Personal reason":"Personal reason",Other:"Other"},inputPlaceholder:"Select reason",showCancelButton:!0,confirmButtonText:"Decline",cancelButtonText:"Cancel"}).then(n=>{n.isConfirmed&&n.value&&this.deliveryService.rejectAssignment(e.id,n.value).pipe((0,u.Q)(this.destroy$)).subscribe({next:()=>{this.loadAssignments()},error:i=>{console.error("Error rejecting assignment:",i)}})})}startPickup(){this.currentAssignment&&this.deliveryService.startPickup(this.currentAssignment.id).pipe((0,u.Q)(this.destroy$)).subscribe({next:e=>{this.currentAssignment=e,this.openNavigation(this.currentAssignment.pickupAddress)},error:e=>{console.error("Error starting pickup:",e)}})}verifyPickupOTP(){this.currentAssignment&&this.otpInput?this.deliveryService.verifyPickupOTP(this.currentAssignment.id,this.otpInput).pipe((0,u.Q)(this.destroy$)).subscribe({next:e=>{this.currentAssignment=e,this.otpInput=""},error:e=>{console.error("Error verifying OTP:",e),v().fire("Invalid OTP","Please check the OTP and try again","error")}}):v().fire("Error","Please enter the OTP","error")}startDelivery(){this.currentAssignment&&this.deliveryService.startDelivery(this.currentAssignment.id).pipe((0,u.Q)(this.destroy$)).subscribe({next:e=>{this.currentAssignment=e,this.openNavigation(this.currentAssignment.deliveryAddress)},error:e=>{console.error("Error starting delivery:",e)}})}verifyDeliveryOTP(){this.currentAssignment&&this.otpInput?v().fire({title:"Delivery Confirmation",text:"Would you like to capture proof of delivery?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, capture",cancelButtonText:"No, proceed"}).then(e=>{e.isConfirmed?this.captureDeliveryProof():this.completeDelivery()}):v().fire("Error","Please enter the OTP","error")}completeDelivery(e){this.currentAssignment&&this.deliveryService.verifyDeliveryOTP(this.currentAssignment.id,this.otpInput,e).pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{this.currentAssignment=null,this.otpInput="",this.loadAssignments(),this.loadEarnings()},error:n=>{console.error("Error completing delivery:",n),v().fire("Invalid OTP","Please check the OTP and try again","error")}})}captureDeliveryProof(){const e=document.createElement("input");e.type="file",e.accept="image/*",e.capture="environment",e.onchange=n=>{const i=n.target.files[0];i&&this.completeDelivery(i)},e.click()}reportIssue(){this.currentAssignment&&v().fire({title:"Report Issue",input:"select",inputOptions:{"Cannot find address":"Cannot find address","Customer not available":"Customer not available","Wrong order":"Wrong order","Vehicle breakdown":"Vehicle breakdown",Accident:"Accident",Other:"Other"},inputPlaceholder:"Select issue type",showCancelButton:!0,confirmButtonText:"Report",preConfirm:e=>v().fire({title:"Issue Description",input:"textarea",inputPlaceholder:"Describe the issue...",showCancelButton:!0}).then(n=>n.isConfirmed?{issue:e,description:n.value}:null)}).then(e=>{e.isConfirmed&&e.value&&this.deliveryService.reportIssue(this.currentAssignment.id,e.value.issue,e.value.description).pipe((0,u.Q)(this.destroy$)).subscribe({next:()=>{console.log("Issue reported")},error:n=>{console.error("Error reporting issue:",n)}})})}callCustomer(){this.currentAssignment&&(window.location.href=`tel:${this.currentAssignment.partnerPhone}`)}openNavigation(e){const n=encodeURIComponent(e);window.open(`https://www.google.com/maps/search/?api=1&query=${n}`,"_blank")}startLocationTracking(){navigator.geolocation?(0,Y.Y)(3e4).pipe((0,u.Q)(this.destroy$)).subscribe(()=>{navigator.geolocation.getCurrentPosition(e=>{this.currentLocation={latitude:e.coords.latitude,longitude:e.coords.longitude},this.isOnline&&this.deliveryService.updateLocation(this.partnerId,this.currentLocation.latitude,this.currentLocation.longitude).subscribe()},e=>{console.error("Error getting location:",e)})}):console.error("Geolocation is not supported")}playNotificationSound(){new Audio("/assets/sounds/notification.mp3").play().catch(n=>console.error("Error playing sound:",n))}getStatusColor(e){switch(e){case"ASSIGNED":return"#ff9800";case"ACCEPTED":return"#2196f3";case"PICKUP_STARTED":return"#9c27b0";case"PICKED_UP":return"#4caf50";case"DELIVERY_STARTED":return"#ff5722";case"DELIVERED":return"#8bc34a";default:return"#757575"}}getStatusIcon(e){switch(e){case"ASSIGNED":return"assignment";case"ACCEPTED":return"check_circle";case"PICKUP_STARTED":return"directions_bike";case"PICKED_UP":return"inventory";case"DELIVERY_STARTED":return"delivery_dining";case"DELIVERED":return"done_all";default:return"help"}}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(E))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-delivery-dashboard"]],decls:23,vars:10,consts:[[1,"delivery-dashboard"],[1,"dashboard-header"],[1,"online-toggle"],["color","primary",3,"ngModel","ngModelChange","change"],["class","online-status",4,"ngIf"],["class","offline-status",4,"ngIf"],[1,"earnings-summary"],["color","primary"],["class","current-assignment",4,"ngIf"],[4,"ngIf"],["class","offline-message",4,"ngIf"],["class","completed-section",4,"ngIf"],[1,"online-status"],[1,"offline-status"],[1,"current-assignment"],[1,"progress-tracker"],["linear","","selectedIndex","0"],["stepper",""],[3,"completed"],["matStepLabel",""],["class","location-info",4,"ngIf"],[1,"assignment-details"],[1,"detail-item"],[1,"quick-actions"],["mat-button","",3,"click"],["mat-button","","color","warn",3,"click"],[1,"location-info"],[1,"action-buttons"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["class","otp-section",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"otp-section"],["matInput","","placeholder","6-digit OTP","maxlength","6",3,"ngModel","ngModelChange"],["mat-raised-button","","color","accent",3,"click"],[1,"assignments-list"],["class","assignment-card",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"assignment-card"],["color","accent"],[1,"assignment-info"],[1,"info-row"],[1,"info-row","earnings"],[1,"empty-state"],[1,"hint"],[1,"offline-message"],[1,"completed-section"],[4,"ngFor","ngForOf"],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine",""],["matListItemMeta",""]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-slide-toggle",3),t.bIt("ngModelChange",function(c){return i.isOnline=c})("change",function(){return i.toggleOnlineStatus()}),t.DNE(4,d,4,0,"span",4),t.DNE(5,A,4,0,"span",5),t.k0s()(),t.j41(6,"div",6)(7,"mat-chip",7)(8,"mat-icon"),t.EFF(9,"payments"),t.k0s(),t.EFF(10),t.k0s(),t.j41(11,"mat-chip")(12,"mat-icon"),t.EFF(13,"delivery_dining"),t.k0s(),t.EFF(14),t.k0s(),t.j41(15,"mat-chip")(16,"mat-icon"),t.EFF(17,"star"),t.k0s(),t.EFF(18),t.k0s()()(),t.DNE(19,Lt,49,16,"mat-card",8),t.DNE(20,Vt,6,2,"div",9),t.DNE(21,Ut,13,0,"div",10),t.DNE(22,zt,5,1,"div",11),t.k0s()),2&n&&(t.R7$(3),t.Y8G("ngModel",i.isOnline),t.R7$(1),t.Y8G("ngIf",i.isOnline),t.R7$(1),t.Y8G("ngIf",!i.isOnline),t.R7$(5),t.SpI(" Today: \u20b9",i.todayEarnings.totalEarnings," "),t.R7$(4),t.SpI(" ",i.todayEarnings.completedDeliveries," Deliveries "),t.R7$(4),t.SpI(" ",i.todayEarnings.averageRating,"/5 "),t.R7$(1),t.Y8G("ngIf",i.currentAssignment),t.R7$(1),t.Y8G("ngIf",!i.currentAssignment&&i.isOnline),t.R7$(1),t.Y8G("ngIf",!i.isOnline),t.R7$(1),t.Y8G("ngIf",i.completedAssignments.length>0))},dependencies:[a.Sq,a.bT,h.me,h.BC,h.tU,h.vS,_.RN,_.YY,_.m2,_.MM,_.dh,x.$z,D.rl,D.nJ,B.fg,w.An,T.Jl,st.sG,it.V5,it.Ti,it.M6,H.jt,H.YE,H.ZV,H.C_,H.yE,H.BJ,a.vh],styles:[".delivery-dashboard[_ngcontent-%COMP%]{padding:20px}.delivery-dashboard[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}.delivery-dashboard[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:12px}.delivery-dashboard[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.active[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.delivery-dashboard[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.completed[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.delivery-dashboard[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.pending[_ngcontent-%COMP%]{background:#ff9800;color:#fff}.delivery-dashboard[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.earnings[_ngcontent-%COMP%]{background:#10b981;color:#fff}.delivery-dashboard[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.delivery-dashboard[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:24px;font-weight:600}.delivery-dashboard[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{margin-right:8px}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]{margin-top:20px}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .assignment-card[_ngcontent-%COMP%]{margin-bottom:16px}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .assignment-card.active[_ngcontent-%COMP%]{border-left:4px solid #2196f3}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .assignment-card.completed[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .assignment-card[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]{margin-bottom:16px}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .assignment-card[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;display:flex;align-items:center;gap:8px}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .assignment-card[_ngcontent-%COMP%]   .assignment-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#666;font-size:18px;width:18px;height:18px}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .assignment-card[_ngcontent-%COMP%]   .assignment-status[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .assignment-card[_ngcontent-%COMP%]   .assignment-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:16px;font-size:12px;font-weight:500}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .assignment-card[_ngcontent-%COMP%]   .assignment-status[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .assignment-card[_ngcontent-%COMP%]   .assignment-status[_ngcontent-%COMP%]   .status-badge.completed[_ngcontent-%COMP%]{background:#e8f5e8;color:#2e7d32}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .assignment-card[_ngcontent-%COMP%]   .assignment-status[_ngcontent-%COMP%]   .status-badge.pending[_ngcontent-%COMP%]{background:#fff3e0;color:#f57c00}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .assignment-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .assignment-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:auto}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ddd;margin-bottom:16px}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#999}.delivery-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px}.delivery-dashboard[_ngcontent-%COMP%]   .recent-activities[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.delivery-dashboard[_ngcontent-%COMP%]   .recent-activities[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{border-bottom:1px solid #eee}.delivery-dashboard[_ngcontent-%COMP%]   .recent-activities[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.delivery-dashboard[_ngcontent-%COMP%]   .recent-activities[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;width:100%}.delivery-dashboard[_ngcontent-%COMP%]   .recent-activities[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   .activity-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.delivery-dashboard[_ngcontent-%COMP%]   .recent-activities[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   .activity-icon.pickup[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.delivery-dashboard[_ngcontent-%COMP%]   .recent-activities[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   .activity-icon.delivery[_ngcontent-%COMP%]{background:#e8f5e8;color:#2e7d32}.delivery-dashboard[_ngcontent-%COMP%]   .recent-activities[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   .activity-icon.issue[_ngcontent-%COMP%]{background:#ffebee;color:#d32f2f}.delivery-dashboard[_ngcontent-%COMP%]   .recent-activities[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   .activity-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.delivery-dashboard[_ngcontent-%COMP%]   .recent-activities[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   .activity-details[_ngcontent-%COMP%]{flex-grow:1}.delivery-dashboard[_ngcontent-%COMP%]   .recent-activities[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   .activity-details[_ngcontent-%COMP%]   .activity-title[_ngcontent-%COMP%]{font-weight:500;margin:0 0 2px}.delivery-dashboard[_ngcontent-%COMP%]   .recent-activities[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .activity-content[_ngcontent-%COMP%]   .activity-details[_ngcontent-%COMP%]   .activity-time[_ngcontent-%COMP%]{font-size:12px;color:#666;margin:0}.delivery-dashboard[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-top:20px}.delivery-dashboard[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]{text-align:center;padding:20px;cursor:pointer;transition:all .2s ease}.delivery-dashboard[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.delivery-dashboard[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 12px;background:#f5f5f5}.delivery-dashboard[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px;color:#666}.delivery-dashboard[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px}.delivery-dashboard[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   .action-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#666}@media (max-width: 768px){.delivery-dashboard[_ngcontent-%COMP%]{padding:16px}.delivery-dashboard[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.delivery-dashboard[_ngcontent-%COMP%]   .assignments-list[_ngcontent-%COMP%]   .assignment-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px;padding:8px 12px}.delivery-dashboard[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"]})}}return r})();var k=g(3904),rt=g(2150),Z=g(2275),ut=g(8010),at=g(467);let Ht=(()=>{class r{constructor(){}getCurrentPosition(e){return new Promise((n,i)=>{if(!navigator.geolocation)return void i(new Error("Geolocation is not supported by this browser"));const o={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5,...e};navigator.geolocation.getCurrentPosition(c=>{n({coords:{latitude:c.coords.latitude,longitude:c.coords.longitude,accuracy:c.coords.accuracy,altitude:c.coords.altitude||void 0,altitudeAccuracy:c.coords.altitudeAccuracy||void 0,heading:c.coords.heading||void 0,speed:c.coords.speed||void 0},timestamp:c.timestamp})},c=>{i(this.getGeolocationError(c))},o)})}watchPosition(e,n,i){if(!navigator.geolocation)throw new Error("Geolocation is not supported by this browser");const o={enableHighAccuracy:!0,timeout:1e4,maximumAge:3e4,...i};return navigator.geolocation.watchPosition(c=>{e({coords:{latitude:c.coords.latitude,longitude:c.coords.longitude,accuracy:c.coords.accuracy,altitude:c.coords.altitude||void 0,altitudeAccuracy:c.coords.altitudeAccuracy||void 0,heading:c.coords.heading||void 0,speed:c.coords.speed||void 0},timestamp:c.timestamp})},n?c=>n(c):void 0,o)}clearWatch(e){navigator.geolocation.clearWatch(e)}isSupported(){return!!navigator.geolocation}calculateDistance(e,n,i,o){const m=this.toRadians(i-e),P=this.toRadians(o-n),F=Math.sin(m/2)*Math.sin(m/2)+Math.cos(this.toRadians(e))*Math.cos(this.toRadians(i))*Math.sin(P/2)*Math.sin(P/2),tt=2*Math.atan2(Math.sqrt(F),Math.sqrt(1-F))*6371;return Math.round(100*tt)/100}toRadians(e){return e*(Math.PI/180)}getGeolocationError(e){switch(e.code){case e.PERMISSION_DENIED:return new Error("Location access denied by user");case e.POSITION_UNAVAILABLE:return new Error("Location information is unavailable");case e.TIMEOUT:return new Error("Location request timed out");default:return new Error("An unknown error occurred while retrieving location")}}getErrorMessage(e){switch(e.code){case e.PERMISSION_DENIED:return"Please allow location access to enable delivery tracking";case e.POSITION_UNAVAILABLE:return"Your location could not be determined. Please check your GPS settings";case e.TIMEOUT:return"Location request took too long. Please try again";default:return"Unable to get your location. Please try again"}}requestPermission(){return(0,at.A)(function*(){if(!navigator.permissions)throw new Error("Permissions API not supported");try{return(yield navigator.permissions.query({name:"geolocation"})).state}catch{throw new Error("Failed to query location permission")}})()}calculateBearing(e,n,i,o){const c=this.toRadians(o-n),m=this.toRadians(e),P=this.toRadians(i),F=Math.sin(c)*Math.cos(P),L=Math.cos(m)*Math.sin(P)-Math.sin(m)*Math.cos(P)*Math.cos(c);return(180*Math.atan2(F,L)/Math.PI+360)%360}formatDistance(e){return e<1?`${Math.round(1e3*e)}m`:`${e.toFixed(1)}km`}isPositionRecent(e,n=5){return Date.now()-e<=60*n*1e3}calculateETA(e,n=25){const o=e/n*60*60*1e3;return new Date(Date.now()+o)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Ot=(()=>{class r{constructor(e,n){this.http=e,this.authService=n,this.totalEarnings=0,this.todayEarnings=0,this.weeklyEarnings=0,this.monthlyEarnings=0,this.totalDeliveries=0,this.isLoading=!0}ngOnInit(){if(!this.partnerId){const e=this.authService.getCurrentUser();e&&(this.partnerId=e.id)}this.loadEarningsData()}loadEarningsData(){this.partnerId?this.http.get(`${f.c.apiUrl}/mobile/delivery-partner/earnings/${this.partnerId}`).subscribe({next:e=>{e.success&&(this.todayEarnings=e.todayEarnings||0,this.weeklyEarnings=e.weeklyEarnings||0,this.monthlyEarnings=e.monthlyEarnings||0,this.totalEarnings=e.totalEarnings||0,this.totalDeliveries=e.totalDeliveries||0),this.isLoading=!1},error:e=>{console.error("Error loading earnings:",e),this.isLoading=!1}}):this.isLoading=!1}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(M.Qq),t.rXU(ut.u))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-earnings-overview"]],inputs:{partnerId:"partnerId",totalEarnings:"totalEarnings"},decls:32,vars:4,consts:[[1,"earnings-overview"],[1,"earnings-cards"],[1,"earning-card"],[1,"amount"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"h3"),t.EFF(2,"Earnings Overview"),t.k0s(),t.j41(3,"div",1)(4,"mat-card",2)(5,"mat-card-header")(6,"mat-card-title"),t.EFF(7,"Today"),t.k0s()(),t.j41(8,"mat-card-content")(9,"div",3),t.EFF(10),t.k0s()()(),t.j41(11,"mat-card",2)(12,"mat-card-header")(13,"mat-card-title"),t.EFF(14,"This Week"),t.k0s()(),t.j41(15,"mat-card-content")(16,"div",3),t.EFF(17),t.k0s()()(),t.j41(18,"mat-card",2)(19,"mat-card-header")(20,"mat-card-title"),t.EFF(21,"This Month"),t.k0s()(),t.j41(22,"mat-card-content")(23,"div",3),t.EFF(24),t.k0s()()(),t.j41(25,"mat-card",2)(26,"mat-card-header")(27,"mat-card-title"),t.EFF(28,"Total"),t.k0s()(),t.j41(29,"mat-card-content")(30,"div",3),t.EFF(31),t.k0s()()()()()),2&n&&(t.R7$(10),t.SpI("\u20b9",i.todayEarnings,""),t.R7$(7),t.SpI("\u20b9",i.weeklyEarnings,""),t.R7$(7),t.SpI("\u20b9",i.monthlyEarnings,""),t.R7$(7),t.SpI("\u20b9",i.totalEarnings,""))},dependencies:[_.RN,_.m2,_.MM,_.dh],styles:[".earnings-overview[_ngcontent-%COMP%]{margin-bottom:2rem}.earnings-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-top:1rem}.earning-card[_ngcontent-%COMP%]{text-align:center}.earning-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#4caf50}"]})}}return r})();function Jt(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",10)(1,"mat-slide-toggle",11),t.bIt("ngModelChange",function(i){t.eBV(e);const o=t.XpG(2);return t.Njj(o.isAvailable=i)})("change",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.toggleAvailability())}),t.j41(2,"span"),t.EFF(3),t.k0s()()()}if(2&r){const e=t.XpG(2);t.R7$(1),t.Y8G("ngModel",e.isAvailable),t.R7$(1),t.AVh("available",e.isAvailable)("unavailable",!e.isAvailable),t.R7$(1),t.SpI(" ",e.isAvailable?"Available":"Busy"," ")}}function Kt(r,s){if(1&r&&(t.j41(0,"span",41),t.EFF(1),t.k0s()),2&r){const e=t.XpG(3);t.R7$(1),t.JRh(e.activeOrders.length)}}function Wt(r,s){if(1&r&&(t.j41(0,"mat-icon"),t.EFF(1,"assignment"),t.k0s(),t.EFF(2," Active Orders "),t.DNE(3,Kt,2,1,"span",40)),2&r){const e=t.XpG(2);t.R7$(3),t.Y8G("ngIf",e.activeOrders.length>0)}}function Qt(r,s){1&r&&(t.j41(0,"div",42)(1,"mat-icon",43),t.EFF(2,"assignment_late"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No Active Orders"),t.k0s(),t.j41(5,"p"),t.EFF(6,"You don't have any active deliveries at the moment."),t.k0s()())}function qt(r,s){if(1&r&&(t.j41(0,"div",49)(1,"mat-icon"),t.EFF(2,"navigation"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&r){const e=t.XpG().$implicit,n=t.XpG(3);t.R7$(4),t.JRh(n.formatDistance(e.distanceToDestination))}}function Zt(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",55),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,o=t.XpG(3);return t.Njj(o.markPickedUp(i.id))}),t.j41(1,"mat-icon"),t.EFF(2,"shopping_cart"),t.k0s(),t.EFF(3," Mark Picked Up "),t.k0s()}}function te(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",55),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,o=t.XpG(3);return t.Njj(o.startDelivery(i.id))}),t.j41(1,"mat-icon"),t.EFF(2,"local_shipping"),t.k0s(),t.EFF(3," Start Delivery "),t.k0s()}}function ee(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",56),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,o=t.XpG(3);return t.Njj(o.completeDelivery(i.id))}),t.j41(1,"mat-icon"),t.EFF(2,"check_circle"),t.k0s(),t.EFF(3," Complete "),t.k0s()}}const ne=function(r){return["/delivery/tracking",r]};function ie(r,s){if(1&r&&(t.j41(0,"mat-card",46)(1,"mat-card-header")(2,"div",47)(3,"mat-icon"),t.EFF(4,"shopping_bag"),t.k0s()(),t.j41(5,"mat-card-title"),t.EFF(6),t.k0s(),t.j41(7,"mat-card-subtitle")(8,"mat-chip",36),t.EFF(9),t.k0s()()(),t.j41(10,"mat-card-content")(11,"div",48)(12,"div",49)(13,"mat-icon"),t.EFF(14,"store"),t.k0s(),t.j41(15,"span"),t.EFF(16),t.k0s()(),t.j41(17,"div",49)(18,"mat-icon"),t.EFF(19,"location_on"),t.k0s(),t.j41(20,"span"),t.EFF(21),t.k0s()(),t.j41(22,"div",49)(23,"mat-icon"),t.EFF(24,"phone"),t.k0s(),t.j41(25,"span"),t.EFF(26),t.k0s()(),t.j41(27,"div",49)(28,"mat-icon"),t.EFF(29,"currency_rupee"),t.k0s(),t.j41(30,"span"),t.EFF(31),t.k0s()(),t.DNE(32,qt,5,1,"div",50),t.k0s()(),t.j41(33,"mat-card-actions",51),t.DNE(34,Zt,4,0,"button",52),t.DNE(35,te,4,0,"button",52),t.DNE(36,ee,4,0,"button",53),t.j41(37,"button",54)(38,"mat-icon"),t.EFF(39,"map"),t.k0s(),t.EFF(40," Track "),t.k0s()()()),2&r){const e=s.$implicit,n=t.XpG(3);t.R7$(6),t.SpI("Order #",e.orderNumber,""),t.R7$(2),t.Y8G("color",n.getStatusColor(e.status)),t.R7$(1),t.SpI(" ",e.status," "),t.R7$(7),t.JRh(e.shopName),t.R7$(5),t.JRh(e.deliveryAddress),t.R7$(5),t.JRh(e.customerPhone),t.R7$(5),t.JRh(n.formatEarnings(e.deliveryFee)),t.R7$(1),t.Y8G("ngIf",e.distanceToDestination),t.R7$(2),t.Y8G("ngIf","ACCEPTED"===e.status),t.R7$(1),t.Y8G("ngIf","PICKED_UP"===e.status),t.R7$(1),t.Y8G("ngIf","IN_TRANSIT"===e.status),t.R7$(1),t.Y8G("routerLink",t.eq3(12,ne,e.id))}}function re(r,s){if(1&r&&(t.j41(0,"div",44),t.DNE(1,ie,41,14,"mat-card",45),t.k0s()),2&r){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.activeOrders)}}function ae(r,s){if(1&r&&(t.j41(0,"span",41),t.EFF(1),t.k0s()),2&r){const e=t.XpG(4);t.R7$(1),t.JRh(e.availableOrders.length)}}function oe(r,s){if(1&r&&(t.j41(0,"mat-icon"),t.EFF(1,"notifications"),t.k0s(),t.EFF(2," Available "),t.DNE(3,ae,2,1,"span",40)),2&r){const e=t.XpG(3);t.R7$(3),t.Y8G("ngIf",e.availableOrders.length>0)}}function se(r,s){1&r&&(t.j41(0,"div",42)(1,"mat-icon",43),t.EFF(2,"search"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No Orders Available"),t.k0s(),t.j41(5,"p"),t.EFF(6,"No new orders are available for pickup at the moment."),t.k0s()())}function ce(r,s){if(1&r){const e=t.RV6();t.j41(0,"mat-card",59)(1,"mat-card-header")(2,"div",47)(3,"mat-icon"),t.EFF(4,"new_releases"),t.k0s()(),t.j41(5,"mat-card-title"),t.EFF(6),t.k0s(),t.j41(7,"mat-card-subtitle")(8,"span",60),t.EFF(9),t.k0s()()(),t.j41(10,"mat-card-content")(11,"div",48)(12,"div",49)(13,"mat-icon"),t.EFF(14,"store"),t.k0s(),t.j41(15,"span"),t.EFF(16),t.k0s()(),t.j41(17,"div",49)(18,"mat-icon"),t.EFF(19,"location_on"),t.k0s(),t.j41(20,"span"),t.EFF(21),t.k0s()(),t.j41(22,"div",49)(23,"mat-icon"),t.EFF(24,"currency_rupee"),t.k0s(),t.j41(25,"span"),t.EFF(26),t.k0s()(),t.j41(27,"div",49)(28,"mat-icon"),t.EFF(29,"navigation"),t.k0s(),t.j41(30,"span"),t.EFF(31),t.k0s()(),t.j41(32,"div",49)(33,"mat-icon"),t.EFF(34,"schedule"),t.k0s(),t.j41(35,"span"),t.EFF(36),t.k0s()()()(),t.j41(37,"mat-card-actions",51)(38,"button",61),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG(4);return t.Njj(c.rejectOrder(o.id))}),t.j41(39,"mat-icon"),t.EFF(40,"close"),t.k0s(),t.EFF(41," Reject "),t.k0s(),t.j41(42,"button",55),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG(4);return t.Njj(c.acceptOrder(o.id))}),t.j41(43,"mat-icon"),t.EFF(44,"check"),t.k0s(),t.EFF(45," Accept "),t.k0s()()()}if(2&r){const e=s.$implicit,n=t.XpG(4);t.R7$(6),t.SpI("New Order #",e.orderNumber,""),t.R7$(3),t.SpI("",e.timeRemaining," mins to accept"),t.R7$(7),t.JRh(e.shopName),t.R7$(5),t.JRh(e.deliveryAddress),t.R7$(5),t.JRh(n.formatEarnings(e.deliveryFee)),t.R7$(5),t.JRh(n.formatDistance(e.distance)),t.R7$(5),t.SpI("",e.estimatedTime," mins")}}function le(r,s){if(1&r&&(t.j41(0,"div",44),t.DNE(1,ce,46,7,"mat-card",58),t.k0s()),2&r){const e=t.XpG(3);t.R7$(1),t.Y8G("ngForOf",e.availableOrders)}}function de(r,s){if(1&r&&(t.j41(0,"mat-tab",57),t.DNE(1,oe,4,1,"ng-template",24),t.j41(2,"div",25),t.DNE(3,se,7,0,"div",26),t.DNE(4,le,2,1,"div",27),t.k0s()()),2&r){const e=t.XpG(2);t.R7$(3),t.Y8G("ngIf",0===e.availableOrders.length),t.R7$(1),t.Y8G("ngIf",e.availableOrders.length>0)}}function pe(r,s){1&r&&(t.j41(0,"mat-icon"),t.EFF(1,"account_balance_wallet"),t.k0s(),t.EFF(2," Earnings "))}function ge(r,s){1&r&&(t.j41(0,"mat-icon"),t.EFF(1,"person"),t.k0s(),t.EFF(2," Profile "))}function me(r,s){if(1&r&&(t.j41(0,"span",64),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&r){const e=t.XpG(3);t.R7$(1),t.SpI(" Last updated: ",t.i5U(2,1,e.lastLocationUpdate,"short")," ")}}function ue(r,s){if(1&r&&(t.j41(0,"div",62)(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s(),t.DNE(5,me,3,4,"span",63),t.k0s()),2&r){const e=t.XpG(2);t.R7$(1),t.AVh("enabled",e.isLocationEnabled)("disabled",!e.isLocationEnabled),t.R7$(1),t.SpI(" ",e.isLocationEnabled?"location_on":"location_off"," "),t.R7$(2),t.SpI(" ",e.isLocationEnabled?"Location tracking enabled":"Location tracking disabled"," "),t.R7$(1),t.Y8G("ngIf",e.lastLocationUpdate)}}function _e(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",2)(1,"mat-toolbar",3)(2,"div",4)(3,"div",5)(4,"mat-icon",6),t.EFF(5,"account_circle"),t.k0s(),t.j41(6,"div",7)(7,"h2"),t.EFF(8),t.k0s(),t.j41(9,"span",8),t.EFF(10),t.k0s()()(),t.j41(11,"div",9)(12,"div",10)(13,"mat-slide-toggle",11),t.bIt("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.Njj(o.isOnline=i)})("change",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleOnlineStatus())}),t.j41(14,"span"),t.EFF(15),t.k0s()()(),t.DNE(16,Jt,4,6,"div",12),t.k0s()()(),t.j41(17,"div",13)(18,"mat-card",14)(19,"mat-card-content")(20,"div",15)(21,"mat-icon"),t.EFF(22,"local_shipping"),t.k0s()(),t.j41(23,"div",16)(24,"div",17),t.EFF(25),t.k0s(),t.j41(26,"div",18),t.EFF(27,"Today's Deliveries"),t.k0s()()()(),t.j41(28,"mat-card",19)(29,"mat-card-content")(30,"div",15)(31,"mat-icon"),t.EFF(32,"currency_rupee"),t.k0s()(),t.j41(33,"div",16)(34,"div",17),t.EFF(35),t.k0s(),t.j41(36,"div",18),t.EFF(37,"Today's Earnings"),t.k0s()()()(),t.j41(38,"mat-card",20)(39,"mat-card-content")(40,"div",15)(41,"mat-icon"),t.EFF(42,"star"),t.k0s()(),t.j41(43,"div",16)(44,"div",17),t.EFF(45),t.k0s(),t.j41(46,"div",18),t.EFF(47,"Current Rating"),t.k0s()()()(),t.j41(48,"mat-card",21)(49,"mat-card-content")(50,"div",15)(51,"mat-icon"),t.EFF(52,"schedule"),t.k0s()(),t.j41(53,"div",16)(54,"div",17),t.EFF(55),t.k0s(),t.j41(56,"div",18),t.EFF(57,"Hours Worked"),t.k0s()()()()(),t.j41(58,"mat-tab-group",22),t.bIt("selectedIndexChange",function(i){t.eBV(e);const o=t.XpG();return t.Njj(o.currentTab=i)}),t.j41(59,"mat-tab",23),t.DNE(60,Wt,4,1,"ng-template",24),t.j41(61,"div",25),t.DNE(62,Qt,7,0,"div",26),t.DNE(63,re,2,1,"div",27),t.k0s()(),t.DNE(64,de,5,2,"mat-tab",28),t.j41(65,"mat-tab",29),t.DNE(66,pe,3,0,"ng-template",24),t.j41(67,"div",25),t.nrm(68,"app-earnings-overview",30),t.k0s()(),t.j41(69,"mat-tab",31),t.DNE(70,ge,3,0,"ng-template",24),t.j41(71,"div",25)(72,"div",32)(73,"mat-card",33)(74,"mat-card-header")(75,"mat-card-title"),t.EFF(76,"Personal Information"),t.k0s()(),t.j41(77,"mat-card-content")(78,"div",34)(79,"div",35)(80,"label"),t.EFF(81,"Name:"),t.k0s(),t.j41(82,"span"),t.EFF(83),t.k0s()(),t.j41(84,"div",35)(85,"label"),t.EFF(86,"Email:"),t.k0s(),t.j41(87,"span"),t.EFF(88),t.k0s()(),t.j41(89,"div",35)(90,"label"),t.EFF(91,"Phone:"),t.k0s(),t.j41(92,"span"),t.EFF(93),t.k0s()(),t.j41(94,"div",35)(95,"label"),t.EFF(96,"Vehicle:"),t.k0s(),t.j41(97,"span")(98,"mat-icon"),t.EFF(99),t.k0s(),t.EFF(100),t.k0s()(),t.j41(101,"div",35)(102,"label"),t.EFF(103,"Status:"),t.k0s(),t.j41(104,"mat-chip",36),t.EFF(105),t.k0s()(),t.j41(106,"div",35)(107,"label"),t.EFF(108,"Rating:"),t.k0s(),t.j41(109,"span"),t.EFF(110),t.k0s()()()()(),t.j41(111,"mat-card",33)(112,"mat-card-header")(113,"mat-card-title"),t.EFF(114,"Performance Stats"),t.k0s()(),t.j41(115,"mat-card-content")(116,"div",13)(117,"div",37)(118,"div",38),t.EFF(119),t.k0s(),t.j41(120,"div",18),t.EFF(121,"Total Deliveries"),t.k0s()(),t.j41(122,"div",37)(123,"div",38),t.EFF(124),t.k0s(),t.j41(125,"div",18),t.EFF(126,"Successful"),t.k0s()(),t.j41(127,"div",37)(128,"div",38),t.EFF(129),t.k0s(),t.j41(130,"div",18),t.EFF(131,"Success Rate"),t.k0s()(),t.j41(132,"div",37)(133,"div",38),t.EFF(134),t.k0s(),t.j41(135,"div",18),t.EFF(136,"Total Earnings"),t.k0s()()()()()()()()(),t.DNE(137,ue,6,7,"div",39),t.k0s()}if(2&r){const e=t.XpG();t.R7$(8),t.JRh(null==e.partner?null:e.partner.fullName),t.R7$(2),t.JRh(null==e.partner?null:e.partner.partnerId),t.R7$(3),t.Y8G("ngModel",e.isOnline),t.R7$(1),t.AVh("online",e.isOnline)("offline",!e.isOnline),t.R7$(1),t.SpI(" ",e.isOnline?"Online":"Offline"," "),t.R7$(1),t.Y8G("ngIf",e.isOnline),t.R7$(9),t.JRh(e.todayStats.deliveries),t.R7$(10),t.JRh(e.formatEarnings(e.todayStats.earnings)),t.R7$(10),t.JRh(e.formatRating(e.todayStats.rating)),t.R7$(10),t.SpI("",e.todayStats.hoursWorked,"h"),t.R7$(3),t.Y8G("selectedIndex",e.currentTab),t.R7$(4),t.Y8G("ngIf",0===e.activeOrders.length),t.R7$(1),t.Y8G("ngIf",e.activeOrders.length>0),t.R7$(1),t.Y8G("ngIf",e.isOnline&&e.isAvailable),t.R7$(4),t.Y8G("partnerId",null==e.partner?null:e.partner.id)("totalEarnings",(null==e.partner?null:e.partner.totalEarnings)||0),t.R7$(15),t.JRh(null==e.partner?null:e.partner.fullName),t.R7$(5),t.JRh(null==e.partner?null:e.partner.email),t.R7$(5),t.JRh(null==e.partner?null:e.partner.phoneNumber),t.R7$(6),t.JRh(e.getVehicleIcon((null==e.partner?null:e.partner.vehicleType)||"")),t.R7$(1),t.Lme(" ",null==e.partner?null:e.partner.vehicleType," - ",null==e.partner?null:e.partner.vehicleNumber," "),t.R7$(4),t.Y8G("color",e.getStatusColor((null==e.partner?null:e.partner.status)||"")),t.R7$(1),t.SpI(" ",null==e.partner?null:e.partner.status," "),t.R7$(5),t.SpI("",e.formatRating((null==e.partner?null:e.partner.rating)||0)," \u2b50"),t.R7$(9),t.JRh((null==e.partner?null:e.partner.totalDeliveries)||0),t.R7$(5),t.JRh((null==e.partner?null:e.partner.successfulDeliveries)||0),t.R7$(5),t.SpI("",e.formatRating((null==e.partner?null:e.partner.successRate)||0),"%"),t.R7$(5),t.JRh(e.formatEarnings((null==e.partner?null:e.partner.totalEarnings)||0)),t.R7$(3),t.Y8G("ngIf",e.isOnline)}}function he(r,s){1&r&&(t.j41(0,"div",65),t.nrm(1,"mat-spinner"),t.j41(2,"p"),t.EFF(3,"Loading dashboard..."),t.k0s()())}let fe=(()=>{class r{constructor(e,n,i,o,c){this.partnerService=e,this.assignmentService=n,this.authService=i,this.geolocationService=o,this.snackBar=c,this.destroy$=new U.B,this.partner=null,this.isLoading=!0,this.todayStats={deliveries:0,earnings:0,rating:0,hoursWorked:0},this.activeOrders=[],this.availableOrders=[],this.isOnline=!1,this.isAvailable=!1,this.isLocationEnabled=!1,this.lastLocationUpdate=null,this.currentTab=0,this.showEarningsDetails=!1}ngOnInit(){this.loadPartnerData(),this.loadActiveOrders(),this.loadAvailableOrders(),this.startLocationTracking(),this.setupPeriodicUpdates()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadPartnerData(){const e=this.authService.getCurrentUser();e?this.partnerService.getPartnerByUserId(e.id).pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&n.data?(this.partner=n.data,this.isOnline=n.data.isOnline,this.isAvailable=n.data.isAvailable,this.loadTodayStats()):this.snackBar.open("Failed to load partner data","Close",{duration:3e3}),this.isLoading=!1},error:n=>{console.error("Error loading partner data:",n),this.snackBar.open("Error loading partner data","Close",{duration:3e3}),this.isLoading=!1}}):this.snackBar.open("User not found","Close",{duration:3e3})}loadActiveOrders(){this.partner&&this.assignmentService.getActiveAssignmentsByPartner(this.partner.id).pipe((0,u.Q)(this.destroy$)).subscribe({next:e=>{k.c.isSuccess(e)&&e.data&&(this.activeOrders=e.data)},error:e=>{console.error("Error loading active orders:",e)}})}loadAvailableOrders(){const e=this.authService.getCurrentUser();e&&this.assignmentService.getAvailableOrdersForPartner(e.id).pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{n.success&&n.orders&&(this.availableOrders=n.orders)},error:n=>{console.error("Error loading available orders:",n)}})}loadTodayStats(){this.partner&&(this.todayStats={deliveries:5,earnings:450,rating:4.8,hoursWorked:6.5})}toggleOnlineStatus(){this.partner&&this.partnerService.updateOnlineStatus(this.partner.id,!this.isOnline).pipe((0,u.Q)(this.destroy$)).subscribe({next:e=>{k.c.isSuccess(e)&&e.data&&(this.isOnline=e.data.isOnline,this.isAvailable=e.data.isAvailable,this.snackBar.open(this.isOnline?"You are now online":"You are now offline","Close",{duration:3e3}),this.isOnline&&this.requestLocationPermission())},error:e=>{console.error("Error updating online status:",e),this.snackBar.open("Failed to update status","Close",{duration:3e3})}})}toggleAvailability(){!this.partner||!this.isOnline||this.partnerService.updateAvailability(this.partner.id,!this.isAvailable).pipe((0,u.Q)(this.destroy$)).subscribe({next:e=>{k.c.isSuccess(e)&&e.data&&(this.isAvailable=e.data.isAvailable,this.snackBar.open(this.isAvailable?"You are now available for orders":"You are now unavailable","Close",{duration:3e3}))},error:e=>{console.error("Error updating availability:",e),this.snackBar.open("Failed to update availability","Close",{duration:3e3})}})}requestLocationPermission(){this.geolocationService.getCurrentPosition().then(e=>{this.isLocationEnabled=!0,this.updateLocation(e.coords.latitude,e.coords.longitude)}).catch(e=>{console.error("Error getting location:",e),this.snackBar.open("Location access required for delivery tracking","Enable",{duration:5e3}).onAction().subscribe(()=>{this.requestLocationPermission()})})}updateLocation(e,n){this.partner&&this.partnerService.updateLocation(this.partner.id,e,n).pipe((0,u.Q)(this.destroy$)).subscribe({next:i=>{k.c.isSuccess(i)&&(this.lastLocationUpdate=new Date)},error:i=>{console.error("Error updating location:",i)}})}startLocationTracking(){(0,Y.Y)(3e4).pipe((0,u.Q)(this.destroy$)).subscribe(()=>{this.isOnline&&this.isLocationEnabled&&this.geolocationService.getCurrentPosition().then(e=>{this.updateLocation(e.coords.latitude,e.coords.longitude)}).catch(e=>{console.error("Error getting location for tracking:",e)})})}setupPeriodicUpdates(){(0,Y.Y)(12e4).pipe((0,u.Q)(this.destroy$)).subscribe(()=>{this.isOnline&&(this.loadActiveOrders(),this.loadAvailableOrders())})}acceptOrder(e){this.partner&&this.assignmentService.acceptAssignment(e,this.partner.id).pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&(this.snackBar.open("Order accepted successfully","Close",{duration:3e3}),this.loadActiveOrders(),this.loadAvailableOrders())},error:n=>{console.error("Error accepting order:",n),this.snackBar.open("Failed to accept order","Close",{duration:3e3})}})}rejectOrder(e){this.partner&&this.assignmentService.rejectAssignment(e,this.partner.id,"Unable to deliver at this time").pipe((0,u.Q)(this.destroy$)).subscribe({next:i=>{k.c.isSuccess(i)&&(this.snackBar.open("Order rejected","Close",{duration:3e3}),this.loadAvailableOrders())},error:i=>{console.error("Error rejecting order:",i),this.snackBar.open("Failed to reject order","Close",{duration:3e3})}})}markPickedUp(e){this.partner&&this.assignmentService.markPickedUp(e,this.partner.id).pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&(this.snackBar.open("Order marked as picked up","Close",{duration:3e3}),this.loadActiveOrders())},error:n=>{console.error("Error marking pickup:",n),this.snackBar.open("Failed to mark as picked up","Close",{duration:3e3})}})}startDelivery(e){this.partner&&this.assignmentService.startDelivery(e,this.partner.id).pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&(this.snackBar.open("Delivery started","Close",{duration:3e3}),this.loadActiveOrders())},error:n=>{console.error("Error starting delivery:",n),this.snackBar.open("Failed to start delivery","Close",{duration:3e3})}})}completeDelivery(e){this.partner&&this.assignmentService.completeDelivery(e,this.partner.id,"Delivered successfully").pipe((0,u.Q)(this.destroy$)).subscribe({next:i=>{k.c.isSuccess(i)&&(this.snackBar.open("Delivery completed successfully!","Close",{duration:3e3}),this.loadActiveOrders(),this.loadTodayStats())},error:i=>{console.error("Error completing delivery:",i),this.snackBar.open("Failed to complete delivery","Close",{duration:3e3})}})}getStatusColor(e){return this.partnerService.getStatusColor(e)}getVehicleIcon(e){return this.partnerService.getVehicleIcon(e)}formatDistance(e){return e?`${e.toFixed(1)} km`:"N/A"}formatEarnings(e){return`\u20b9${e.toFixed(2)}`}formatRating(e){return e.toFixed(1)}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(rt.WS),t.rXU(Z.N),t.rXU(ut.u),t.rXU(Ht),t.rXU($.UG))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-delivery-partner-dashboard"]],decls:2,vars:2,consts:[["class","delivery-dashboard",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"delivery-dashboard"],["color","primary",1,"dashboard-header"],[1,"header-content"],[1,"partner-info"],[1,"partner-avatar"],[1,"partner-details"],[1,"partner-id"],[1,"status-controls"],[1,"status-toggle"],["color","accent",3,"ngModel","ngModelChange","change"],["class","status-toggle",4,"ngIf"],[1,"stats-grid"],[1,"stat-card","deliveries"],[1,"stat-icon"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","earnings"],[1,"stat-card","rating"],[1,"stat-card","hours"],["animationDuration","0ms",3,"selectedIndex","selectedIndexChange"],["label","Active Orders"],["mat-tab-label",""],[1,"tab-content"],["class","empty-state",4,"ngIf"],["class","orders-list",4,"ngIf"],["label","Available Orders",4,"ngIf"],["label","Earnings"],[3,"partnerId","totalEarnings"],["label","Profile"],[1,"profile-section"],[1,"profile-card"],[1,"profile-grid"],[1,"profile-item"],["selected","",3,"color"],[1,"stat-item"],[1,"stat-number"],["class","location-status",4,"ngIf"],["class","tab-badge",4,"ngIf"],[1,"tab-badge"],[1,"empty-state"],[1,"empty-icon"],[1,"orders-list"],["class","order-card",4,"ngFor","ngForOf"],[1,"order-card"],["mat-card-avatar","",1,"order-avatar"],[1,"order-details"],[1,"detail-row"],["class","detail-row",4,"ngIf"],["align","end"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-button","",3,"routerLink"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["label","Available Orders"],["class","order-card available-order",4,"ngFor","ngForOf"],[1,"order-card","available-order"],[1,"time-remaining"],["mat-button","","color","warn",3,"click"],[1,"location-status"],["class","last-update",4,"ngIf"],[1,"last-update"],[1,"loading-container"]],template:function(n,i){1&n&&(t.DNE(0,_e,138,33,"div",0),t.DNE(1,he,4,0,"div",1)),2&n&&(t.Y8G("ngIf",!i.isLoading),t.R7$(1),t.Y8G("ngIf",i.isLoading))},dependencies:[a.Sq,a.bT,h.BC,h.vS,G.Wk,ot.KQ,_.RN,_.YY,_.QG,_.m2,_.MM,_.Lc,_.dh,x.$z,w.An,T.Jl,N.LG,nt.ES,nt.mq,nt.T8,st.sG,Ot,a.vh],styles:[".delivery-dashboard[_ngcontent-%COMP%]{min-height:100vh;background-color:#f5f5f5}.dashboard-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;box-shadow:0 4px 8px #0000001a}.dashboard-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;max-width:1200px;margin:0 auto}.dashboard-header[_ngcontent-%COMP%]   .partner-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.dashboard-header[_ngcontent-%COMP%]   .partner-info[_ngcontent-%COMP%]   .partner-avatar[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.dashboard-header[_ngcontent-%COMP%]   .partner-info[_ngcontent-%COMP%]   .partner-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:500}.dashboard-header[_ngcontent-%COMP%]   .partner-info[_ngcontent-%COMP%]   .partner-details[_ngcontent-%COMP%]   .partner-id[_ngcontent-%COMP%]{font-size:14px;opacity:.8}.dashboard-header[_ngcontent-%COMP%]   .status-controls[_ngcontent-%COMP%]{display:flex;gap:24px;align-items:center}.dashboard-header[_ngcontent-%COMP%]   .status-controls[_ngcontent-%COMP%]   .status-toggle[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.dashboard-header[_ngcontent-%COMP%]   .status-controls[_ngcontent-%COMP%]   .status-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:4px;font-size:12px;font-weight:500}.dashboard-header[_ngcontent-%COMP%]   .status-controls[_ngcontent-%COMP%]   .status-toggle[_ngcontent-%COMP%]   span.online[_ngcontent-%COMP%], .dashboard-header[_ngcontent-%COMP%]   .status-controls[_ngcontent-%COMP%]   .status-toggle[_ngcontent-%COMP%]   span.available[_ngcontent-%COMP%]{color:#4caf50}.dashboard-header[_ngcontent-%COMP%]   .status-controls[_ngcontent-%COMP%]   .status-toggle[_ngcontent-%COMP%]   span.offline[_ngcontent-%COMP%], .dashboard-header[_ngcontent-%COMP%]   .status-controls[_ngcontent-%COMP%]   .status-toggle[_ngcontent-%COMP%]   span.unavailable[_ngcontent-%COMP%]{color:#f44336}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;padding:20px;max-width:1200px;margin:0 auto}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:white;border-radius:12px;box-shadow:0 2px 8px #0000001a;transition:transform .2s ease,box-shadow .2s ease}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 16px #00000026}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:20px!important}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:50px;height:50px;border-radius:50%}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px;color:#fff}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{flex:1}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:28px;font-weight:600;line-height:1;margin-bottom:4px}.stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:14px;color:#666;font-weight:500}.stats-grid[_ngcontent-%COMP%]   .stat-card.deliveries[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}.stats-grid[_ngcontent-%COMP%]   .stat-card.earnings[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%)}.stats-grid[_ngcontent-%COMP%]   .stat-card.rating[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%)}.stats-grid[_ngcontent-%COMP%]   .stat-card.hours[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#43e97b 0%,#38f9d7 100%)}.tab-content[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.tab-badge[_ngcontent-%COMP%]{background:#ff4444;color:#fff;border-radius:10px;padding:2px 8px;font-size:12px;margin-left:8px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:8px;font-weight:500}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.orders-list[_ngcontent-%COMP%]{display:grid;gap:16px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]{background:white;border-radius:12px;box-shadow:0 2px 8px #0000001a;transition:transform .2s ease,box-shadow .2s ease}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #00000026}.orders-list[_ngcontent-%COMP%]   .order-card.available-order[_ngcontent-%COMP%]{border-left:4px solid #4CAF50}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-avatar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;display:flex;align-items:center;justify-content:center}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]{display:grid;gap:8px;margin:16px 0}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .order-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#666}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   .time-remaining[_ngcontent-%COMP%]{color:#ff9800;font-weight:500}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{padding:16px!important;gap:8px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}.profile-section[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]{margin-bottom:20px;background:white;border-radius:12px;box-shadow:0 2px 8px #0000001a}.profile-section[_ngcontent-%COMP%]   .profile-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.profile-section[_ngcontent-%COMP%]   .profile-grid[_ngcontent-%COMP%]   .profile-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.profile-section[_ngcontent-%COMP%]   .profile-grid[_ngcontent-%COMP%]   .profile-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#666;font-size:14px}.profile-section[_ngcontent-%COMP%]   .profile-grid[_ngcontent-%COMP%]   .profile-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;display:flex;align-items:center;gap:8px}.profile-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:20px;padding:0}.profile-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{text-align:center}.profile-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#333;margin-bottom:4px}.profile-section[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:14px;color:#666}.location-status[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;background:white;padding:12px 16px;border-radius:8px;box-shadow:0 2px 8px #0000001a;display:flex;align-items:center;gap:8px;font-size:14px;z-index:100}.location-status[_ngcontent-%COMP%]   mat-icon.enabled[_ngcontent-%COMP%]{color:#4caf50}.location-status[_ngcontent-%COMP%]   mat-icon.disabled[_ngcontent-%COMP%]{color:#f44336}.location-status[_ngcontent-%COMP%]   .last-update[_ngcontent-%COMP%]{color:#666;margin-left:8px;font-size:12px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;gap:20px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px}@media (max-width: 768px){.dashboard-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex-direction:column;gap:16px;text-align:center}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:16px}.tab-content[_ngcontent-%COMP%]{padding:16px}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{flex-direction:column}.orders-list[_ngcontent-%COMP%]   .order-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.location-status[_ngcontent-%COMP%]{position:relative;bottom:auto;right:auto;margin:20px;justify-content:center}}  .mat-mdc-tab-group .mat-mdc-tab-header{border-bottom:1px solid #e0e0e0}  .mat-mdc-tab-group .mat-mdc-tab-label{min-width:120px}  .mat-mdc-tab-group .mat-mdc-tab-label .mat-mdc-tab-label-content{display:flex;align-items:center;gap:8px}  .mat-mdc-slide-toggle{--mdc-switch-selected-track-color: #4CAF50;--mdc-switch-selected-handle-color: #4CAF50}  .mat-mdc-chip.mat-mdc-standard-chip.mat-primary{--mdc-chip-elevated-container-color: #2196F3;color:#fff}  .mat-mdc-chip.mat-mdc-standard-chip.mat-accent{--mdc-chip-elevated-container-color: #4CAF50;color:#fff}  .mat-mdc-chip.mat-mdc-standard-chip.mat-warn{--mdc-chip-elevated-container-color: #f44336;color:#fff}"]})}}return r})();function Ce(r,s){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Name is required"),t.k0s())}function Pe(r,s){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Enter valid email"),t.k0s())}function ve(r,s){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Enter valid 10-digit phone number"),t.k0s())}function Oe(r,s){if(1&r&&(t.j41(0,"mat-option",21),t.EFF(1),t.k0s()),2&r){const e=s.$implicit;t.Y8G("value",e),t.R7$(1),t.JRh(e)}}function Me(r,s){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Enter valid 12-digit Aadhar number"),t.k0s())}function be(r,s){1&r&&(t.j41(0,"mat-icon"),t.EFF(1,"hourglass_empty"),t.k0s())}let ke=(()=>{class r{constructor(e,n,i,o){this.fb=e,this.router=n,this.snackBar=i,this.deliveryPartnerService=o,this.isLoading=!1,this.vehicleTypes=["BIKE","SCOOTER","CAR","BICYCLE"],this.registrationForm=this.fb.group({name:["",[h.k0.required,h.k0.minLength(2)]],email:["",[h.k0.required,h.k0.email]],phone:["",[h.k0.required,h.k0.pattern(/^\d{10}$/)]],address:["",[h.k0.required]],vehicleType:["",[h.k0.required]],vehicleNumber:["",[h.k0.required]],licenseNumber:["",[h.k0.required]],aadharNumber:["",[h.k0.required,h.k0.pattern(/^\d{12}$/)]],bankAccountNumber:["",[h.k0.required]],ifscCode:["",[h.k0.required]]})}ngOnInit(){}onSubmit(){this.registrationForm.valid&&(this.isLoading=!0,this.deliveryPartnerService.registerPartner(this.registrationForm.value).subscribe({next:e=>{this.snackBar.open("Registration submitted successfully!","Close",{duration:3e3}),this.router.navigate(["/delivery/partner/dashboard"]),this.isLoading=!1},error:e=>{this.snackBar.open("Registration failed. Please try again.","Close",{duration:3e3}),this.isLoading=!1}}))}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(h.ok),t.rXU(G.Ix),t.rXU($.UG),t.rXU(rt.WS))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-partner-registration"]],decls:64,vars:9,consts:[[1,"partner-registration-container"],[1,"registration-card"],[3,"formGroup","ngSubmit"],[1,"form-row"],["appearance","outline"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["matInput","","type","email","formControlName","email","required",""],["matInput","","formControlName","phone","required",""],["formControlName","vehicleType","required",""],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"full-width"],["matInput","","formControlName","address","rows","3","required",""],["matInput","","formControlName","vehicleNumber","required",""],["matInput","","formControlName","licenseNumber","required",""],["matInput","","formControlName","aadharNumber","required",""],["matInput","","formControlName","bankAccountNumber","required",""],["matInput","","formControlName","ifscCode","required",""],[1,"form-actions"],["mat-raised-button","","type","button","color","secondary",3,"click"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],[3,"value"]],template:function(n,i){if(1&n&&(t.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),t.EFF(4,"Delivery Partner Registration"),t.k0s(),t.j41(5,"mat-card-subtitle"),t.EFF(6,"Join our delivery network"),t.k0s()(),t.j41(7,"mat-card-content")(8,"form",2),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(9,"div",3)(10,"mat-form-field",4)(11,"mat-label"),t.EFF(12,"Full Name"),t.k0s(),t.nrm(13,"input",5),t.DNE(14,Ce,2,0,"mat-error",6),t.k0s(),t.j41(15,"mat-form-field",4)(16,"mat-label"),t.EFF(17,"Email"),t.k0s(),t.nrm(18,"input",7),t.DNE(19,Pe,2,0,"mat-error",6),t.k0s()(),t.j41(20,"div",3)(21,"mat-form-field",4)(22,"mat-label"),t.EFF(23,"Phone Number"),t.k0s(),t.nrm(24,"input",8),t.DNE(25,ve,2,0,"mat-error",6),t.k0s(),t.j41(26,"mat-form-field",4)(27,"mat-label"),t.EFF(28,"Vehicle Type"),t.k0s(),t.j41(29,"mat-select",9),t.DNE(30,Oe,2,2,"mat-option",10),t.k0s()()(),t.j41(31,"mat-form-field",11)(32,"mat-label"),t.EFF(33,"Address"),t.k0s(),t.nrm(34,"textarea",12),t.k0s(),t.j41(35,"div",3)(36,"mat-form-field",4)(37,"mat-label"),t.EFF(38,"Vehicle Number"),t.k0s(),t.nrm(39,"input",13),t.k0s(),t.j41(40,"mat-form-field",4)(41,"mat-label"),t.EFF(42,"License Number"),t.k0s(),t.nrm(43,"input",14),t.k0s()(),t.j41(44,"div",3)(45,"mat-form-field",4)(46,"mat-label"),t.EFF(47,"Aadhar Number"),t.k0s(),t.nrm(48,"input",15),t.DNE(49,Me,2,0,"mat-error",6),t.k0s(),t.j41(50,"mat-form-field",4)(51,"mat-label"),t.EFF(52,"Bank Account Number"),t.k0s(),t.nrm(53,"input",16),t.k0s()(),t.j41(54,"mat-form-field",11)(55,"mat-label"),t.EFF(56,"IFSC Code"),t.k0s(),t.nrm(57,"input",17),t.k0s(),t.j41(58,"div",18)(59,"button",19),t.bIt("click",function(){return i.router.navigate(["/"])}),t.EFF(60,"Cancel"),t.k0s(),t.j41(61,"button",20),t.DNE(62,be,2,0,"mat-icon",6),t.EFF(63),t.k0s()()()()()()),2&n){let o,c,m,P;t.R7$(8),t.Y8G("formGroup",i.registrationForm),t.R7$(6),t.Y8G("ngIf",null==(o=i.registrationForm.get("name"))?null:o.hasError("required")),t.R7$(5),t.Y8G("ngIf",null==(c=i.registrationForm.get("email"))?null:c.hasError("email")),t.R7$(6),t.Y8G("ngIf",null==(m=i.registrationForm.get("phone"))?null:m.hasError("pattern")),t.R7$(5),t.Y8G("ngForOf",i.vehicleTypes),t.R7$(19),t.Y8G("ngIf",null==(P=i.registrationForm.get("aadharNumber"))?null:P.hasError("pattern")),t.R7$(12),t.Y8G("disabled",!i.registrationForm.valid||i.isLoading),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.SpI(" ",i.isLoading?"Registering...":"Register"," ")}},dependencies:[a.Sq,a.bT,h.qT,h.me,h.BC,h.cb,h.YS,h.j4,h.JD,_.RN,_.m2,_.MM,_.Lc,_.dh,x.$z,D.rl,D.nJ,D.TL,B.fg,V.VO,J.wT,w.An],styles:[".partner-registration-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:1rem}.registration-card[_ngcontent-%COMP%]{padding:2rem}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.form-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}}"]})}}return r})();function Fe(r,s){if(1&r&&(t.j41(0,"div",5)(1,"p")(2,"strong"),t.EFF(3,"Name:"),t.k0s(),t.EFF(4),t.k0s(),t.j41(5,"p")(6,"strong"),t.EFF(7,"Email:"),t.k0s(),t.EFF(8),t.k0s(),t.j41(9,"p")(10,"strong"),t.EFF(11,"Phone:"),t.k0s(),t.EFF(12),t.k0s(),t.j41(13,"p")(14,"strong"),t.EFF(15,"Vehicle Type:"),t.k0s(),t.EFF(16),t.k0s(),t.j41(17,"p")(18,"strong"),t.EFF(19,"Status:"),t.k0s(),t.EFF(20),t.k0s()()),2&r){const e=t.XpG();t.R7$(4),t.SpI(" ",e.data.partnerData.name,""),t.R7$(4),t.SpI(" ",e.data.partnerData.email,""),t.R7$(4),t.SpI(" ",e.data.partnerData.phone,""),t.R7$(4),t.SpI(" ",e.data.partnerData.vehicleType,""),t.R7$(4),t.SpI(" ",e.data.partnerData.status,"")}}let Ee=(()=>{class r{constructor(e,n){this.dialogRef=e,this.data=n}onClose(){this.dialogRef.close()}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(y.CP),t.rXU(y.Vh))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-partner-details-dialog"]],decls:7,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["class","partner-info",4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-button","",3,"click"],[1,"partner-info"]],template:function(n,i){1&n&&(t.j41(0,"h2",0),t.EFF(1,"Partner Details"),t.k0s(),t.j41(2,"div",1),t.DNE(3,Fe,21,5,"div",2),t.k0s(),t.j41(4,"div",3)(5,"button",4),t.bIt("click",function(){return i.onClose()}),t.EFF(6,"Close"),t.k0s()()),2&n&&(t.R7$(3),t.Y8G("ngIf",i.data.partnerData))},dependencies:[a.bT,x.$z,y.BI,y.Yi,y.E7],styles:[".partner-info[_ngcontent-%COMP%]{padding:1rem 0}.partner-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0}"]})}}return r})();function xe(r,s){if(1&r&&(t.j41(0,"div",10)(1,"p")(2,"strong"),t.EFF(3),t.k0s(),t.EFF(4),t.k0s()()),2&r){const e=s.$implicit;t.R7$(3),t.SpI("",e.type,":"),t.R7$(1),t.SpI(" ",e.status,"")}}function ye(r,s){if(1&r&&(t.j41(0,"div",8),t.DNE(1,xe,5,2,"div",9),t.k0s()),2&r){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",e.data.documents)}}function De(r,s){1&r&&(t.j41(0,"p"),t.EFF(1,"No documents available for verification."),t.k0s())}let Ie=(()=>{class r{constructor(e,n){this.dialogRef=e,this.data=n}onApprove(){this.dialogRef.close({action:"approve"})}onReject(){this.dialogRef.close({action:"reject"})}onClose(){this.dialogRef.close()}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(y.CP),t.rXU(y.Vh))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-document-verification-dialog"]],decls:13,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["class","documents-list",4,"ngIf","ngIfElse"],["noDocuments",""],["mat-dialog-actions","","align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"],[1,"documents-list"],["class","document-item",4,"ngFor","ngForOf"],[1,"document-item"]],template:function(n,i){if(1&n&&(t.j41(0,"h2",0),t.EFF(1,"Document Verification"),t.k0s(),t.j41(2,"div",1),t.DNE(3,ye,2,1,"div",2),t.DNE(4,De,2,0,"ng-template",null,3,t.C5r),t.k0s(),t.j41(6,"div",4)(7,"button",5),t.bIt("click",function(){return i.onClose()}),t.EFF(8,"Cancel"),t.k0s(),t.j41(9,"button",6),t.bIt("click",function(){return i.onReject()}),t.EFF(10,"Reject"),t.k0s(),t.j41(11,"button",7),t.bIt("click",function(){return i.onApprove()}),t.EFF(12,"Approve"),t.k0s()()),2&n){const o=t.sdS(5);t.R7$(3),t.Y8G("ngIf",null==i.data.documents?null:i.data.documents.length)("ngIfElse",o)}},dependencies:[a.Sq,a.bT,x.$z,y.BI,y.Yi,y.E7],styles:[".documents-list[_ngcontent-%COMP%]{padding:1rem 0}.document-item[_ngcontent-%COMP%]{padding:.5rem 0;border-bottom:1px solid #eee}.document-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.document-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]})}}return r})();var Mt=g(8370);function Re(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",52)(1,"mat-icon",49),t.EFF(2,"emergency"),t.k0s(),t.j41(3,"div",53)(4,"div",54),t.EFF(5),t.k0s(),t.j41(6,"div",55),t.EFF(7),t.nI1(8,"date"),t.k0s()(),t.j41(9,"button",56),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.viewEmergencyDetails(o))}),t.j41(10,"mat-icon"),t.EFF(11,"visibility"),t.k0s()()()}if(2&r){const e=s.$implicit;t.R7$(5),t.Lme("",e.partnerName," - ",e.type,""),t.R7$(2),t.JRh(t.i5U(8,3,e.timestamp,"short"))}}function je(r,s){if(1&r&&(t.j41(0,"mat-expansion-panel",48)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon",49),t.EFF(4,"warning"),t.k0s(),t.EFF(5),t.k0s()(),t.j41(6,"div",50),t.DNE(7,Re,12,6,"div",51),t.k0s()()),2&r){const e=t.XpG();t.R7$(5),t.SpI(" Emergency Alerts (",e.emergencyAlerts.length,") "),t.R7$(2),t.Y8G("ngForOf",e.emergencyAlerts)}}function we(r,s){1&r&&(t.j41(0,"th",57),t.EFF(1,"Partner ID"),t.k0s())}function Se(r,s){if(1&r&&(t.j41(0,"td",58)(1,"span",59),t.EFF(2),t.k0s()()),2&r){const e=s.$implicit;t.R7$(2),t.JRh(e.partnerId)}}function Te(r,s){1&r&&(t.j41(0,"th",57),t.EFF(1,"Name"),t.k0s())}function $e(r,s){if(1&r&&(t.j41(0,"td",58)(1,"div",60)(2,"mat-icon",61),t.EFF(3,"account_circle"),t.k0s(),t.EFF(4),t.k0s()()),2&r){const e=s.$implicit;t.R7$(4),t.SpI(" ",e.fullName," ")}}function Ae(r,s){1&r&&(t.j41(0,"th",62),t.EFF(1,"Phone"),t.k0s())}function Ne(r,s){if(1&r&&(t.j41(0,"td",58)(1,"a",63),t.EFF(2),t.k0s()()),2&r){const e=s.$implicit;t.R7$(1),t.Mz_("href","tel:",e.phoneNumber,"",t.B4B),t.R7$(1),t.JRh(e.phoneNumber)}}function Le(r,s){1&r&&(t.j41(0,"th",57),t.EFF(1,"Vehicle"),t.k0s())}function Ge(r,s){if(1&r&&(t.j41(0,"td",58)(1,"div",64)(2,"mat-icon"),t.EFF(3),t.k0s(),t.EFF(4),t.k0s()()),2&r){const e=s.$implicit,n=t.XpG();t.R7$(3),t.JRh(n.getVehicleIcon(e.vehicleType)),t.R7$(1),t.SpI(" ",e.vehicleType," ")}}function Be(r,s){1&r&&(t.j41(0,"th",57),t.EFF(1,"Status"),t.k0s())}function Ve(r,s){if(1&r&&(t.j41(0,"td",58)(1,"mat-chip",65),t.EFF(2),t.k0s()()),2&r){const e=s.$implicit,n=t.XpG();t.R7$(1),t.Y8G("color",n.getStatusColor(e.status)),t.R7$(1),t.SpI(" ",e.status," ")}}function Ue(r,s){1&r&&(t.j41(0,"th",57),t.EFF(1,"Verification"),t.k0s())}function Ye(r,s){if(1&r&&(t.j41(0,"td",58)(1,"div",66)(2,"mat-icon",67),t.EFF(3),t.k0s(),t.EFF(4),t.k0s()()),2&r){const e=s.$implicit,n=t.XpG();t.R7$(2),t.Y8G("color","VERIFIED"===e.verificationStatus?"primary":"warn"),t.R7$(1),t.SpI(" ",n.getVerificationIcon(e.verificationStatus)," "),t.R7$(1),t.SpI(" ",e.verificationStatus," ")}}function ze(r,s){1&r&&(t.j41(0,"th",57),t.EFF(1,"Rating"),t.k0s())}function Xe(r,s){if(1&r&&(t.j41(0,"td",58)(1,"div",68)(2,"mat-icon",69),t.EFF(3,"star"),t.k0s(),t.EFF(4),t.nI1(5,"number"),t.k0s()()),2&r){const e=s.$implicit;t.R7$(4),t.SpI(" ",t.i5U(5,1,e.rating,"1.1-1")," ")}}function He(r,s){1&r&&(t.j41(0,"th",57),t.EFF(1,"Deliveries"),t.k0s())}function Je(r,s){if(1&r&&(t.j41(0,"td",58),t.EFF(1),t.k0s()),2&r){const e=s.$implicit;t.R7$(1),t.JRh(e.totalDeliveries)}}function Ke(r,s){1&r&&(t.j41(0,"th",62),t.EFF(1,"Online"),t.k0s())}function We(r,s){if(1&r&&(t.j41(0,"td",58)(1,"mat-icon"),t.EFF(2),t.k0s()()),2&r){const e=s.$implicit;t.R7$(1),t.AVh("online",e.isOnline)("offline",!e.isOnline),t.R7$(1),t.SpI(" ",e.isOnline?"wifi":"wifi_off"," ")}}function Qe(r,s){1&r&&(t.j41(0,"th",62),t.EFF(1,"Actions"),t.k0s())}function qe(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",72),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,o=t.XpG();return t.Njj(o.verifyDocuments(i))}),t.j41(1,"mat-icon"),t.EFF(2,"verified_user"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Verify Documents"),t.k0s()()}}function Ze(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",72),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,o=t.XpG();return t.Njj(o.approvePartner(i))}),t.j41(1,"mat-icon",74),t.EFF(2,"check_circle"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Approve"),t.k0s()()}}function tn(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",72),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,o=t.XpG();return t.Njj(o.rejectPartner(i))}),t.j41(1,"mat-icon",49),t.EFF(2,"cancel"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Reject"),t.k0s()()}}function en(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",72),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,o=t.XpG();return t.Njj(o.activatePartner(i))}),t.j41(1,"mat-icon",74),t.EFF(2,"play_circle"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Activate"),t.k0s()()}}function nn(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",72),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,o=t.XpG();return t.Njj(o.suspendPartner(i))}),t.j41(1,"mat-icon",49),t.EFF(2,"pause_circle"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Suspend"),t.k0s()()}}function rn(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",72),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,o=t.XpG();return t.Njj(o.blockPartner(i))}),t.j41(1,"mat-icon",49),t.EFF(2,"block"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Block"),t.k0s()()}}function an(r,s){if(1&r){const e=t.RV6();t.j41(0,"td",58)(1,"button",70)(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",null,71)(6,"button",72),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.viewPartnerDetails(o))}),t.j41(7,"mat-icon"),t.EFF(8,"visibility"),t.k0s(),t.j41(9,"span"),t.EFF(10,"View Details"),t.k0s()(),t.DNE(11,qe,5,0,"button",73),t.nrm(12,"mat-divider"),t.DNE(13,Ze,5,0,"button",73),t.DNE(14,tn,5,0,"button",73),t.DNE(15,en,5,0,"button",73),t.DNE(16,nn,5,0,"button",73),t.DNE(17,rn,5,0,"button",73),t.k0s()()}if(2&r){const e=s.$implicit,n=t.sdS(5),i=t.XpG();t.R7$(1),t.Y8G("matMenuTriggerFor",n)("disabled",i.isProcessing),t.R7$(10),t.Y8G("ngIf","VERIFIED"!==e.verificationStatus),t.R7$(2),t.Y8G("ngIf","PENDING"===e.status),t.R7$(1),t.Y8G("ngIf","PENDING"===e.status),t.R7$(1),t.Y8G("ngIf","SUSPENDED"===e.status),t.R7$(1),t.Y8G("ngIf","ACTIVE"===e.status),t.R7$(1),t.Y8G("ngIf","BLOCKED"!==e.status)}}function on(r,s){1&r&&t.nrm(0,"tr",75)}function sn(r,s){if(1&r&&t.nrm(0,"tr",76),2&r){const e=s.$implicit;t.AVh("pending-row","PENDING"===e.status)("suspended-row","SUSPENDED"===e.status)}}function cn(r,s){1&r&&(t.j41(0,"div",77),t.nrm(1,"mat-spinner"),t.k0s())}const ln=function(){return[10,25,50,100]};let dn=(()=>{class r{constructor(e,n,i,o,c){this.partnerService=e,this.webSocketService=n,this.http=i,this.dialog=o,this.snackBar=c,this.destroy$=new U.B,this.displayedColumns=["partnerId","fullName","phoneNumber","vehicleType","status","verificationStatus","rating","totalDeliveries","isOnline","actions"],this.statusFilter="ALL",this.verificationFilter="ALL",this.searchTerm="",this.stats={total:0,active:0,pending:0,suspended:0,online:0,verified:0},this.isLoading=!0,this.isProcessing=!1,this.onlinePartners=new Set,this.emergencyAlerts=[],this.dataSource=new C.I6([])}ngOnInit(){this.loadPartners(),this.loadStatistics(),this.setupWebSocketSubscriptions(),this.setupFilters()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadPartners(){this.isLoading=!0,this.http.get(`${f.c.apiUrl}/mobile/delivery-partner/admin/partners`).pipe((0,u.Q)(this.destroy$)).subscribe({next:e=>{if(e.success&&e.partners){const n=e.partners.map(i=>({id:i.partnerId,partnerId:"DP"+i.partnerId,fullName:i.name||"Unknown",phoneNumber:i.phone||"-",email:i.email||"-",vehicleType:"BIKE",vehicleNumber:"-",status:i.isActive?"ACTIVE":"PENDING",verificationStatus:i.isActive?"VERIFIED":"PENDING",rating:i.rating||0,totalDeliveries:i.totalDeliveries||0,totalEarnings:i.totalEarnings||0,isOnline:i.isOnline||!1,isAvailable:i.isAvailable||!1,createdAt:new Date,updatedAt:new Date}));this.dataSource.data=n,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,e.statistics&&(this.stats={total:e.statistics.total||n.length,active:e.statistics.active||0,pending:n.length-(e.statistics.active||0),suspended:0,online:e.statistics.online||0,verified:e.statistics.active||0})}this.isLoading=!1},error:e=>{console.error("Error loading partners:",e),this.snackBar.open("Failed to load delivery partners","Close",{duration:3e3}),this.dataSource.data=[],this.isLoading=!1}})}loadStatistics(){this.partnerService.getPartnerCounts().pipe((0,u.Q)(this.destroy$)).subscribe({next:e=>{k.c.isSuccess(e)&&e.data&&(this.stats={total:Object.values(e.data).reduce((n,i)=>n+i,0),active:e.data.ACTIVE||0,pending:e.data.PENDING||0,suspended:e.data.SUSPENDED||0,online:this.onlinePartners.size,verified:this.dataSource.data.filter(n=>"VERIFIED"===n.verificationStatus).length})},error:e=>{console.error("Error loading statistics:",e)}})}setupWebSocketSubscriptions(){this.webSocketService.subscribe("/topic/delivery/admin/partner-status").pipe((0,u.Q)(this.destroy$)).subscribe(e=>{e.isOnline?this.onlinePartners.add(e.partnerId):this.onlinePartners.delete(e.partnerId),this.updateOnlineStatus(),this.stats.online=this.onlinePartners.size}),this.webSocketService.subscribeToEmergencyAlerts().pipe((0,u.Q)(this.destroy$)).subscribe(e=>{this.emergencyAlerts.unshift(e),this.showEmergencyAlert(e)})}setupFilters(){this.dataSource.filterPredicate=(e,n)=>{const i=n.toLowerCase();return!("ALL"!==this.statusFilter&&e.status!==this.statusFilter||"ALL"!==this.verificationFilter&&e.verificationStatus!==this.verificationFilter)&&(!i||e.fullName.toLowerCase().includes(i)||e.partnerId.toLowerCase().includes(i)||e.phoneNumber.includes(i)||e.email.toLowerCase().includes(i))}}applyFilter(){this.dataSource.filter=this.searchTerm.trim().toLowerCase()}onStatusFilterChange(){this.applyFilter()}onVerificationFilterChange(){this.applyFilter()}viewPartnerDetails(e){this.dialog.open(Ee,{width:"800px",data:e})}verifyDocuments(e){this.dialog.open(Ie,{width:"900px",data:e}).afterClosed().subscribe(i=>{i&&this.loadPartners()})}approvePartner(e){e.allDocumentsVerified?(this.isProcessing=!0,this.partnerService.updatePartnerStatus(e.id,"ACTIVE").pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&this.partnerService.updateVerificationStatus(e.id,"VERIFIED").subscribe(()=>{this.snackBar.open("Partner approved successfully","Close",{duration:3e3}),this.loadPartners(),this.loadStatistics()}),this.isProcessing=!1},error:n=>{console.error("Error approving partner:",n),this.snackBar.open("Failed to approve partner","Close",{duration:3e3}),this.isProcessing=!1}})):this.snackBar.open("Please verify all documents before approval","Close",{duration:3e3})}rejectPartner(e){this.isProcessing=!0,this.partnerService.updateVerificationStatus(e.id,"REJECTED").pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&(this.snackBar.open("Partner rejected","Close",{duration:3e3}),this.loadPartners(),this.loadStatistics()),this.isProcessing=!1},error:n=>{console.error("Error rejecting partner:",n),this.snackBar.open("Failed to reject partner","Close",{duration:3e3}),this.isProcessing=!1}})}suspendPartner(e){this.isProcessing=!0,this.partnerService.updatePartnerStatus(e.id,"SUSPENDED").pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&(this.snackBar.open("Partner suspended","Close",{duration:3e3}),this.loadPartners(),this.loadStatistics()),this.isProcessing=!1},error:n=>{console.error("Error suspending partner:",n),this.snackBar.open("Failed to suspend partner","Close",{duration:3e3}),this.isProcessing=!1}})}activatePartner(e){this.isProcessing=!0,this.partnerService.updatePartnerStatus(e.id,"ACTIVE").pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&(this.snackBar.open("Partner activated","Close",{duration:3e3}),this.loadPartners(),this.loadStatistics()),this.isProcessing=!1},error:n=>{console.error("Error activating partner:",n),this.snackBar.open("Failed to activate partner","Close",{duration:3e3}),this.isProcessing=!1}})}blockPartner(e){confirm("Are you sure you want to block this partner? This action cannot be easily reversed.")&&(this.isProcessing=!0,this.partnerService.updatePartnerStatus(e.id,"BLOCKED").pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&(this.snackBar.open("Partner blocked","Close",{duration:3e3}),this.loadPartners(),this.loadStatistics()),this.isProcessing=!1},error:n=>{console.error("Error blocking partner:",n),this.snackBar.open("Failed to block partner","Close",{duration:3e3}),this.isProcessing=!1}}))}updateOnlineStatus(){this.dataSource.data.forEach(e=>{e.isOnline=this.onlinePartners.has(e.id)}),this.dataSource._updateChangeSubscription()}showEmergencyAlert(e){this.snackBar.open(`EMERGENCY: Partner ${e.partnerName} - ${e.type}`,"View",{duration:1e4,panelClass:"emergency-snackbar"}).onAction().subscribe(()=>{this.viewEmergencyDetails(e)})}viewEmergencyDetails(e){console.log("Emergency details:",e)}exportPartnerData(){const e=this.convertToCSV(this.dataSource.data);this.downloadCSV(e,"partners.csv")}convertToCSV(e){return[["Partner ID","Name","Phone","Email","Vehicle","Status","Rating","Deliveries"],...e.map(o=>[o.partnerId,o.fullName,o.phoneNumber,o.email,o.vehicleType,o.status,o.rating,o.totalDeliveries])].map(o=>o.join(",")).join("\n")}downloadCSV(e,n){const i=new Blob([e],{type:"text/csv"}),o=window.URL.createObjectURL(i),c=document.createElement("a");c.href=o,c.download=n,c.click(),window.URL.revokeObjectURL(o)}refreshData(){this.loadPartners(),this.loadStatistics()}getStatusColor(e){return this.partnerService.getStatusColor(e)}getVerificationIcon(e){switch(e){case"VERIFIED":return"verified";case"PENDING":return"pending";case"REJECTED":return"cancel";default:return"help"}}getVehicleIcon(e){return this.partnerService.getVehicleIcon(e)}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(rt.WS),t.rXU(Mt.V),t.rXU(M.Qq),t.rXU(y.bZ),t.rXU($.UG))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-admin-partners"]],viewQuery:function(n,i){if(1&n&&(t.GBs(q.iy,5),t.GBs(z.B4,5)),2&n){let o;t.mGM(o=t.lsd())&&(i.paginator=o.first),t.mGM(o=t.lsd())&&(i.sort=o.first)}},decls:127,vars:16,consts:[[1,"admin-partners-container"],[1,"page-header"],[1,"spacer"],["mat-icon-button","",3,"disabled","click"],["mat-raised-button","","color","primary",3,"click"],[1,"stats-container"],[1,"stat-card"],[1,"stat-value"],[1,"stat-label"],[1,"stat-icon"],[1,"stat-card","active"],[1,"stat-card","pending"],[1,"stat-card","online"],[1,"stat-card","verified"],["class","emergency-panel",4,"ngIf"],[1,"filters-card"],[1,"filters-row"],["appearance","outline"],["matInput","","placeholder","Name, ID, Phone, or Email",3,"ngModel","ngModelChange","keyup"],["matPrefix",""],[3,"ngModel","ngModelChange","selectionChange"],["value","ALL"],["value","ACTIVE"],["value","PENDING"],["value","SUSPENDED"],["value","BLOCKED"],["value","VERIFIED"],["value","REJECTED"],[1,"table-card"],[1,"table-container"],["mat-table","","matSort","",1,"partners-table",3,"dataSource"],["matColumnDef","partnerId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fullName"],["matColumnDef","phoneNumber"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","vehicleType"],["matColumnDef","status"],["matColumnDef","verificationStatus"],["matColumnDef","rating"],["matColumnDef","totalDeliveries"],["matColumnDef","isOnline"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"pending-row","suspended-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["class","loading-overlay",4,"ngIf"],[1,"emergency-panel"],["color","warn"],[1,"emergency-list"],["class","emergency-item",4,"ngFor","ngForOf"],[1,"emergency-item"],[1,"alert-details"],[1,"alert-partner"],[1,"alert-time"],["mat-icon-button","",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"partner-id"],[1,"partner-name"],[1,"avatar-icon"],["mat-header-cell",""],[3,"href"],[1,"vehicle-info"],["selected","",3,"color"],[1,"verification-status"],[3,"color"],[1,"rating"],[1,"star-icon"],["mat-icon-button","",3,"matMenuTriggerFor","disabled"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],["color","primary"],["mat-header-row",""],["mat-row",""],[1,"loading-overlay"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"mat-toolbar",1)(2,"h1"),t.EFF(3,"Delivery Partner Management"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return i.refreshData()}),t.j41(6,"mat-icon"),t.EFF(7,"refresh"),t.k0s()(),t.j41(8,"button",4),t.bIt("click",function(){return i.exportPartnerData()}),t.j41(9,"mat-icon"),t.EFF(10,"download"),t.k0s(),t.EFF(11," Export Data "),t.k0s()(),t.j41(12,"div",5)(13,"mat-card",6)(14,"mat-card-content")(15,"div",7),t.EFF(16),t.k0s(),t.j41(17,"div",8),t.EFF(18,"Total Partners"),t.k0s(),t.j41(19,"mat-icon",9),t.EFF(20,"group"),t.k0s()()(),t.j41(21,"mat-card",10)(22,"mat-card-content")(23,"div",7),t.EFF(24),t.k0s(),t.j41(25,"div",8),t.EFF(26,"Active"),t.k0s(),t.j41(27,"mat-icon",9),t.EFF(28,"check_circle"),t.k0s()()(),t.j41(29,"mat-card",11)(30,"mat-card-content")(31,"div",7),t.EFF(32),t.k0s(),t.j41(33,"div",8),t.EFF(34,"Pending Approval"),t.k0s(),t.j41(35,"mat-icon",9),t.EFF(36,"pending"),t.k0s()()(),t.j41(37,"mat-card",12)(38,"mat-card-content")(39,"div",7),t.EFF(40),t.k0s(),t.j41(41,"div",8),t.EFF(42,"Currently Online"),t.k0s(),t.j41(43,"mat-icon",9),t.EFF(44,"wifi"),t.k0s()()(),t.j41(45,"mat-card",13)(46,"mat-card-content")(47,"div",7),t.EFF(48),t.k0s(),t.j41(49,"div",8),t.EFF(50,"Verified"),t.k0s(),t.j41(51,"mat-icon",9),t.EFF(52,"verified_user"),t.k0s()()()(),t.DNE(53,je,8,2,"mat-expansion-panel",14),t.j41(54,"mat-card",15)(55,"mat-card-content")(56,"div",16)(57,"mat-form-field",17)(58,"mat-label"),t.EFF(59,"Search Partners"),t.k0s(),t.j41(60,"input",18),t.bIt("ngModelChange",function(c){return i.searchTerm=c})("keyup",function(){return i.applyFilter()}),t.k0s(),t.j41(61,"mat-icon",19),t.EFF(62,"search"),t.k0s()(),t.j41(63,"mat-form-field",17)(64,"mat-label"),t.EFF(65,"Status Filter"),t.k0s(),t.j41(66,"mat-select",20),t.bIt("ngModelChange",function(c){return i.statusFilter=c})("selectionChange",function(){return i.onStatusFilterChange()}),t.j41(67,"mat-option",21),t.EFF(68,"All Status"),t.k0s(),t.j41(69,"mat-option",22),t.EFF(70,"Active"),t.k0s(),t.j41(71,"mat-option",23),t.EFF(72,"Pending"),t.k0s(),t.j41(73,"mat-option",24),t.EFF(74,"Suspended"),t.k0s(),t.j41(75,"mat-option",25),t.EFF(76,"Blocked"),t.k0s()()(),t.j41(77,"mat-form-field",17)(78,"mat-label"),t.EFF(79,"Verification Filter"),t.k0s(),t.j41(80,"mat-select",20),t.bIt("ngModelChange",function(c){return i.verificationFilter=c})("selectionChange",function(){return i.onVerificationFilterChange()}),t.j41(81,"mat-option",21),t.EFF(82,"All Verification"),t.k0s(),t.j41(83,"mat-option",26),t.EFF(84,"Verified"),t.k0s(),t.j41(85,"mat-option",23),t.EFF(86,"Pending"),t.k0s(),t.j41(87,"mat-option",27),t.EFF(88,"Rejected"),t.k0s()()()()()(),t.j41(89,"mat-card",28)(90,"mat-card-content")(91,"div",29)(92,"table",30),t.qex(93,31),t.DNE(94,we,2,0,"th",32),t.DNE(95,Se,3,1,"td",33),t.bVm(),t.qex(96,34),t.DNE(97,Te,2,0,"th",32),t.DNE(98,$e,5,1,"td",33),t.bVm(),t.qex(99,35),t.DNE(100,Ae,2,0,"th",36),t.DNE(101,Ne,3,2,"td",33),t.bVm(),t.qex(102,37),t.DNE(103,Le,2,0,"th",32),t.DNE(104,Ge,5,2,"td",33),t.bVm(),t.qex(105,38),t.DNE(106,Be,2,0,"th",32),t.DNE(107,Ve,3,2,"td",33),t.bVm(),t.qex(108,39),t.DNE(109,Ue,2,0,"th",32),t.DNE(110,Ye,5,3,"td",33),t.bVm(),t.qex(111,40),t.DNE(112,ze,2,0,"th",32),t.DNE(113,Xe,6,4,"td",33),t.bVm(),t.qex(114,41),t.DNE(115,He,2,0,"th",32),t.DNE(116,Je,2,1,"td",33),t.bVm(),t.qex(117,42),t.DNE(118,Ke,2,0,"th",36),t.DNE(119,We,3,5,"td",33),t.bVm(),t.qex(120,43),t.DNE(121,Qe,2,0,"th",36),t.DNE(122,an,18,8,"td",33),t.bVm(),t.DNE(123,on,1,0,"tr",44),t.DNE(124,sn,1,4,"tr",45),t.k0s()(),t.nrm(125,"mat-paginator",46),t.k0s()(),t.DNE(126,cn,2,0,"div",47),t.k0s()),2&n&&(t.R7$(5),t.Y8G("disabled",i.isLoading),t.R7$(11),t.JRh(i.stats.total),t.R7$(8),t.JRh(i.stats.active),t.R7$(8),t.JRh(i.stats.pending),t.R7$(8),t.JRh(i.stats.online),t.R7$(8),t.JRh(i.stats.verified),t.R7$(5),t.Y8G("ngIf",i.emergencyAlerts.length>0),t.R7$(7),t.Y8G("ngModel",i.searchTerm),t.R7$(6),t.Y8G("ngModel",i.statusFilter),t.R7$(14),t.Y8G("ngModel",i.verificationFilter),t.R7$(12),t.Y8G("dataSource",i.dataSource),t.R7$(31),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(1),t.Y8G("pageSizeOptions",t.lJ4(15,ln)),t.R7$(1),t.Y8G("ngIf",i.isLoading))},dependencies:[a.Sq,a.bT,h.me,h.BC,h.vS,ot.KQ,_.RN,_.m2,x.$z,x.iY,D.rl,D.nJ,D.JW,B.fg,V.VO,J.wT,C.Zl,C.tL,C.ji,C.cC,C.YV,C.iL,C.KS,C.$R,C.YZ,C.NB,q.iy,z.B4,z.aE,w.An,T.Jl,N.LG,et.GK,et.Z2,et.WN,X.kk,X.fb,X.Cp,lt.q,a.QX,a.vh],styles:[".admin-partners-container[_ngcontent-%COMP%]{padding:20px 24px;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{background:transparent;padding:0;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#333}.page-header[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}.partners-header[_ngcontent-%COMP%]{margin-bottom:24px}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1rem}.filter-section[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;flex-wrap:wrap}.stats-container[_ngcontent-%COMP%], .partners-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{text-align:center;border-radius:12px;box-shadow:0 2px 8px #00000014;border:none;padding:16px 8px;transition:transform .2s,box-shadow .2s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001f}.stat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%], .stat-card[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#333}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#666;font-size:13px;font-weight:500}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px;margin-top:4px}.stat-card.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f5e9,#c8e6c9)}.stat-card.active[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#2e7d32}.stat-card.active[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#388e3c}.stat-card.active[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{color:#4caf50}.stat-card.pending[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3e0,#ffe0b2)}.stat-card.pending[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#e65100}.stat-card.pending[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#f57c00}.stat-card.pending[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{color:#ff9800}.stat-card.online[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e3f2fd,#bbdefb)}.stat-card.online[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#1565c0}.stat-card.online[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#1976d2}.stat-card.online[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{color:#2196f3}.stat-card.verified[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f3e5f5,#e1bee7)}.stat-card.verified[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#6a1b9a}.stat-card.verified[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#7b1fa2}.stat-card.verified[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{color:#9c27b0}.emergency-panel[_ngcontent-%COMP%]{margin-bottom:16px}.emergency-list[_ngcontent-%COMP%]   .emergency-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px 0;border-bottom:1px solid #f0f0f0}.emergency-list[_ngcontent-%COMP%]   .emergency-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.emergency-list[_ngcontent-%COMP%]   .alert-details[_ngcontent-%COMP%]{flex:1}.emergency-list[_ngcontent-%COMP%]   .alert-details[_ngcontent-%COMP%]   .alert-partner[_ngcontent-%COMP%]{font-weight:500}.emergency-list[_ngcontent-%COMP%]   .alert-details[_ngcontent-%COMP%]   .alert-time[_ngcontent-%COMP%]{font-size:12px;color:#999}.partners-table-container[_ngcontent-%COMP%]{background:white;border-radius:8px;box-shadow:0 2px 8px #00000014;overflow:hidden;margin-top:16px}.partners-table[_ngcontent-%COMP%]{width:100%}.status-chip[_ngcontent-%COMP%]{text-transform:capitalize}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.no-data[_ngcontent-%COMP%]{text-align:center;padding:48px;color:#666}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:1rem;color:#ccc}@media (max-width: 1024px){.stats-container[_ngcontent-%COMP%], .partners-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.admin-partners-container[_ngcontent-%COMP%]{padding:12px 16px}.stats-container[_ngcontent-%COMP%], .partners-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.header-actions[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:stretch}.filter-section[_ngcontent-%COMP%]{justify-content:center}}"]})}}return r})();var W=g(1985);let Ct=(()=>{class r{constructor(e){this.http=e,this.apiUrl=`${f.c.apiUrl}/delivery/tracking`}updateLocation(e){return this.http.post(`${this.apiUrl}/update-location`,e)}getLatestTracking(e){const n={id:1,assignmentId:e,orderNumber:"ORD-2025-001",latitude:12.97,longitude:77.593,accuracy:5,speed:25,heading:45,trackedAt:new Date(Date.now()-12e4),batteryLevel:85,isMoving:!0,estimatedArrivalTime:new Date(Date.now()+9e5),distanceToDestination:2.5,partnerName:"Raj Kumar",partnerPhone:"+91 9876543210",vehicleType:"BIKE",vehicleNumber:"KA05AB1234",customerName:"Priya Sharma",customerPhone:"+91 9123456789",deliveryAddress:"123, MG Road, Bangalore, Karnataka 560001",orderStatus:"CONFIRMED",assignmentStatus:"IN_TRANSIT",totalDistance:5.2,estimatedTimeMinutes:15,isDelayed:!1};return new W.c(i=>{setTimeout(()=>{i.next({statusCode:"SUCCESS",message:"Tracking data retrieved successfully",data:n,timestamp:(new Date).toISOString()}),i.complete()},300)})}getTrackingHistory(e){const n=[{id:3,assignmentId:e,orderNumber:"ORD-2025-001",latitude:12.968,longitude:77.591,trackedAt:new Date(Date.now()-6e5),isMoving:!0,partnerName:"Raj Kumar",partnerPhone:"+91 9876543210",vehicleType:"BIKE",vehicleNumber:"KA05AB1234",customerName:"Priya Sharma",customerPhone:"+91 9123456789",deliveryAddress:"123, MG Road, Bangalore, Karnataka 560001",orderStatus:"CONFIRMED",assignmentStatus:"IN_TRANSIT",isDelayed:!1},{id:2,assignmentId:e,orderNumber:"ORD-2025-001",latitude:12.969,longitude:77.592,trackedAt:new Date(Date.now()-3e5),isMoving:!0,partnerName:"Raj Kumar",partnerPhone:"+91 9876543210",vehicleType:"BIKE",vehicleNumber:"KA05AB1234",customerName:"Priya Sharma",customerPhone:"+91 9123456789",deliveryAddress:"123, MG Road, Bangalore, Karnataka 560001",orderStatus:"CONFIRMED",assignmentStatus:"IN_TRANSIT",isDelayed:!1}];return new W.c(i=>{setTimeout(()=>{i.next({statusCode:"SUCCESS",message:"Tracking history retrieved successfully",data:n,timestamp:(new Date).toISOString()}),i.complete()},200)})}getTrackingWithHistory(e){return this.http.get(`${this.apiUrl}/assignment/${e}/full`)}getTrackingByTimeRange(e,n,i){const o=(new M.Nl).set("startTime",n.toISOString()).set("endTime",i.toISOString());return this.http.get(`${this.apiUrl}/assignment/${e}/range`,{params:o})}getRecentPartnerTracking(e,n=60){const i=(new M.Nl).set("minutes",n.toString());return this.http.get(`${this.apiUrl}/partner/${e}/recent`,{params:i})}getTrackingPointCount(e){return this.http.get(`${this.apiUrl}/assignment/${e}/count`)}getLowBatteryAlerts(){return this.http.get(`${this.apiUrl}/alerts/low-battery`)}updatePartnerOnlineStatus(e,n){return this.http.post(`${this.apiUrl}/partner/${e}/online-status`,{isOnline:n})}isPartnerMoving(e){return this.http.get(`${this.apiUrl}/assignment/${e}/is-moving`)}isTrackingRecent(e,n=5){const i=(new M.Nl).set("minutes",n.toString());return this.http.get(`${this.apiUrl}/assignment/${e}/is-recent`,{params:i})}cleanupOldTrackingData(e=30){const n=(new M.Nl).set("daysToKeep",e.toString());return this.http.post(`${this.apiUrl}/cleanup`,{},{params:n})}formatTrackingTime(e){const n=new Date(e),o=(new Date).getTime()-n.getTime(),c=Math.floor(o/6e4);if(c<1)return"Just now";if(c<60)return`${c} minutes ago`;if(c<1440){const m=Math.floor(c/60);return`${m} hour${m>1?"s":""} ago`}return n.toLocaleDateString()}isTrackingDataRecent(e,n=5){const i=new Date(e);return((new Date).getTime()-i.getTime())/6e4<=n}calculateDistance(e,n,i,o){const m=this.toRadians(i-e),P=this.toRadians(o-n),F=Math.sin(m/2)*Math.sin(m/2)+Math.cos(this.toRadians(e))*Math.cos(this.toRadians(i))*Math.sin(P/2)*Math.sin(P/2),tt=2*Math.atan2(Math.sqrt(F),Math.sqrt(1-F))*6371;return Math.round(100*tt)/100}toRadians(e){return e*(Math.PI/180)}formatDistance(e){return e<1?`${Math.round(1e3*e)}m`:`${e.toFixed(1)}km`}formatSpeed(e){return`${Math.round(e)}km/h`}formatBatteryLevel(e){return`${e}%`}getMovementStatus(e,n){return e?n?n<5?"Moving slowly":n<20?"Moving":"Moving fast":"Moving":"Stationary"}getAccuracyStatus(e){return e<=5?"High":e<=15?"Medium":"Low"}estimateArrivalTime(e,n,i,o,c=25){const F=this.calculateDistance(e,n,i,o)/c*60*60*1e3;return new Date(Date.now()+F)}isDelayed(e,n=15){if(!e)return!1;const i=new Date,o=new Date(e);return i.getTime()-o.getTime()-60*n*1e3>0}static{this.\u0275fac=function(n){return new(n||r)(t.KVO(M.Qq))}}static{this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Pt=g(5558),pn=g(7048);let bt=(()=>{class r{constructor(e){this.ngZone=e,this.mapLoadedSubject=new dt.t(!1),this.mapLoaded$=this.mapLoadedSubject.asObservable(),this.markers=new Map,this.infoWindows=new Map,this.loadGoogleMaps()}loadGoogleMaps(){if(typeof google<"u"&&google.maps)return void this.mapLoadedSubject.next(!0);const e=()=>{typeof google<"u"&&google.maps?this.ngZone.run(()=>{this.mapLoadedSubject.next(!0)}):setTimeout(e,100)};e()}initializeMap(e,n){return new W.c(i=>{this.mapLoaded$.subscribe(o=>{o&&(this.map=new google.maps.Map(e,{center:n.center,zoom:n.zoom,styles:n.styles||this.getDefaultMapStyles(),mapTypeId:n.mapTypeId||google.maps.MapTypeId.ROADMAP,zoomControl:!0,mapTypeControl:!1,scaleControl:!0,streetViewControl:!1,rotateControl:!1,fullscreenControl:!0}),this.directionsService=new google.maps.DirectionsService,this.directionsRenderer=new google.maps.DirectionsRenderer({suppressMarkers:!1,polylineOptions:{strokeColor:"#4285f4",strokeWeight:4,strokeOpacity:.8}}),this.directionsRenderer.setMap(this.map),i.next(this.map),i.complete())})})}addMarker(e){if(!this.map)return null;const n=new google.maps.Marker({position:e.position,map:this.map,title:e.title,icon:e.icon||this.getDefaultMarkerIcon("red"),animation:e.animation||null});if(e.info){const i=new google.maps.InfoWindow({content:e.info});n.addListener("click",()=>{this.infoWindows.forEach(o=>o.close()),i.open(this.map,n)}),this.infoWindows.set(e.id,i)}return this.markers.set(e.id,n),n}updateMarkerPosition(e,n){const i=this.markers.get(e);i&&i.setPosition(n)}removeMarker(e){const n=this.markers.get(e);n&&(n.setMap(null),this.markers.delete(e));const i=this.infoWindows.get(e);i&&(i.close(),this.infoWindows.delete(e))}clearMarkers(){this.markers.forEach(e=>e.setMap(null)),this.markers.clear(),this.infoWindows.forEach(e=>e.close()),this.infoWindows.clear()}calculateRoute(e){return new W.c(n=>{if(!this.directionsService)return void n.error("Directions service not initialized");const i={origin:e.origin,destination:e.destination,waypoints:e.waypoints?.map(o=>({location:o,stopover:!0}))||[],optimizeWaypoints:e.optimizeWaypoints||!1,travelMode:google.maps.TravelMode[e.travelMode||"DRIVING"]};this.directionsService.route(i,(o,c)=>{"OK"===c?(this.directionsRenderer.setDirections(o),n.next(o),n.complete()):n.error(`Directions request failed: ${c}`)})})}clearRoute(){this.directionsRenderer&&this.directionsRenderer.setDirections({routes:[]})}fitBounds(e){if(!this.map||0===e.length)return;const n=new google.maps.LatLngBounds;e.forEach(i=>{n.extend(new google.maps.LatLng(i.lat,i.lng))}),this.map.fitBounds(n)}setCenter(e,n){this.map&&(this.map.setCenter(e),n&&this.map.setZoom(n))}calculateDistance(e,n){if(typeof google<"u"&&google.maps?.geometry){const F=new google.maps.LatLng(e.lat,e.lng),L=new google.maps.LatLng(n.lat,n.lng);return google.maps.geometry.spherical.computeDistanceBetween(F,L)/1e3}const o=(n.lat-e.lat)*Math.PI/180,c=(n.lng-e.lng)*Math.PI/180,m=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e.lat*Math.PI/180)*Math.cos(n.lat*Math.PI/180)*Math.sin(c/2)*Math.sin(c/2);return 2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m))*6371}getCurrentLocation(){return new Promise((e,n)=>{navigator.geolocation?"permissions"in navigator?navigator.permissions.query({name:"geolocation"}).then(i=>{"denied"!==i.state?this.requestLocation(e,n):n("Geolocation permission denied. Please enable location access in your browser.")}).catch(()=>{this.requestLocation(e,n)}):this.requestLocation(e,n):n("Geolocation is not supported by this browser")})}requestLocation(e,n){navigator.geolocation.getCurrentPosition(i=>{e({lat:i.coords.latitude,lng:i.coords.longitude})},i=>{let o="Location access failed: ";switch(i.code){case i.PERMISSION_DENIED:o+="Permission denied. Please enable location access.";break;case i.POSITION_UNAVAILABLE:o+="Location information unavailable.";break;case i.TIMEOUT:o+="Location request timed out.";break;default:o+=i.message}n(o)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}watchPosition(e,n){return navigator.geolocation?navigator.geolocation.watchPosition(i=>{e({lat:i.coords.latitude,lng:i.coords.longitude})},i=>{n&&n(`Location tracking error: ${i.message}`)},{enableHighAccuracy:!0,timeout:15e3,maximumAge:3e4}):(n&&n("Geolocation is not supported"),-1)}stopWatchingPosition(e){e>=0&&navigator.geolocation.clearWatch(e)}geocodeAddress(e){return(0,at.A)(function*(){return google?.maps?.Geocoder?new Promise(n=>{(new google.maps.Geocoder).geocode({address:e},(o,c)=>{if("OK"===c&&o.length>0){const m=o[0].geometry.location;n({lat:m.lat(),lng:m.lng(),address:o[0].formatted_address})}else n(null)})}):(console.log("Geocoding not available:",e),null)})()}reverseGeocode(e,n){return(0,at.A)(function*(){return google?.maps?.Geocoder?new Promise(i=>{(new google.maps.Geocoder).geocode({location:{lat:e,lng:n}},(m,P)=>{i("OK"===P&&m.length>0?m[0].formatted_address:`${e}, ${n}`)})}):`${e}, ${n}`})()}getDefaultMarkerIcon(e){return google?.maps?{url:`https://maps.google.com/mapfiles/ms/icons/${e}-dot.png`,scaledSize:new google.maps.Size(32,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,32)}:null}getDeliveryPartnerIcon(){return{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('\n        <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n          <circle cx="16" cy="16" r="12" fill="#4285f4" stroke="#ffffff" stroke-width="2"/>\n          <path d="M12 16l4-4 4 4" stroke="#ffffff" stroke-width="2" fill="none"/>\n        </svg>\n      '),scaledSize:new google.maps.Size(32,32),anchor:new google.maps.Point(16,16)}}getCustomerIcon(){return{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('\n        <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n          <circle cx="16" cy="26" r="4" fill="#34a853"/>\n          <path d="M16 2 L22 14 L10 14 Z" fill="#ea4335" stroke="#ffffff" stroke-width="1"/>\n          <circle cx="16" cy="8" r="3" fill="#ffffff"/>\n        </svg>\n      '),scaledSize:new google.maps.Size(32,32),anchor:new google.maps.Point(16,30)}}getShopIcon(){return{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('\n        <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n          <rect x="8" y="12" width="16" height="16" fill="#ff9800" stroke="#ffffff" stroke-width="2"/>\n          <path d="M6 12 L16 4 L26 12" fill="#ff9800" stroke="#ffffff" stroke-width="2"/>\n          <rect x="14" y="20" width="4" height="8" fill="#ffffff"/>\n        </svg>\n      '),scaledSize:new google.maps.Size(32,32),anchor:new google.maps.Point(16,28)}}getDefaultMapStyles(){return[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.station",elementType:"labels",stylers:[{visibility:"off"}]}]}calculateDetailedRoute(e){return new W.c(n=>{if(!this.directionsService)return void n.error("Directions service not initialized");const i={origin:e.origin,destination:e.destination,waypoints:e.waypoints?.map(o=>({location:o,stopover:!0}))||[],optimizeWaypoints:e.optimizeWaypoints||!1,travelMode:google.maps.TravelMode[e.travelMode||"DRIVING"],avoidTolls:e.avoidTolls||!1,avoidHighways:e.avoidHighways||!1,provideRouteAlternatives:e.provideRouteAlternatives||!1,unitSystem:google.maps.UnitSystem.METRIC};this.directionsService.route(i,(o,c)=>{if("OK"===c){this.directionsRenderer.setDirections(o);const m=o.routes[0],P=m.legs[0];n.next({distance:P.distance,duration:P.duration,steps:P.steps,overview_path:m.overview_path,bounds:m.bounds,warnings:m.warnings,waypoint_order:m.waypoint_order}),n.complete()}else n.error(`Directions request failed: ${c}`)})})}getStepByStepDirections(e,n){return this.calculateDetailedRoute({origin:e,destination:n,travelMode:"DRIVING"}).pipe((0,Pt.n)(i=>[i.steps.map((c,m)=>({stepNumber:m+1,instruction:c.instructions.replace(/<[^>]*>/g,""),distance:c.distance.text,duration:c.duration.text,maneuver:c.maneuver||"",startLocation:{lat:c.start_location.lat(),lng:c.start_location.lng()},endLocation:{lat:c.end_location.lat(),lng:c.end_location.lng()}}))]))}searchNearbyPlaces(e,n,i){return new Promise((o,c)=>{if(!google?.maps?.places?.PlacesService)return void c("Places service not available");const m=new google.maps.places.PlacesService(this.map),P={location:new google.maps.LatLng(e.lat,e.lng),radius:n,type:i};m.nearbySearch(P,(F,L)=>{L===google.maps.places.PlacesServiceStatus.OK?o(F):c(`Places search failed: ${L}`)})})}searchPlacesByText(e,n){return new Promise((i,o)=>{if(!google?.maps?.places?.PlacesService)return void o("Places service not available");const c=new google.maps.places.PlacesService(this.map),m={query:e};n&&(m.location=new google.maps.LatLng(n.lat,n.lng),m.radius=5e4),c.textSearch(m,(P,F)=>{F===google.maps.places.PlacesServiceStatus.OK?i(P):o(`Places text search failed: ${F}`)})})}getPlaceDetails(e){return new Promise((n,i)=>{google?.maps?.places?.PlacesService?new google.maps.places.PlacesService(this.map).getDetails({placeId:e,fields:["name","formatted_address","geometry","place_id","photos","rating","reviews","formatted_phone_number","website"]},(m,P)=>{P===google.maps.places.PlacesServiceStatus.OK?n(m):i(`Place details request failed: ${P}`)}):i("Places service not available")})}requestLocationPermission(){var e=this;return(0,at.A)(function*(){if(!("geolocation"in navigator))throw new Error("Geolocation not supported");if("permissions"in navigator)try{const n=yield navigator.permissions.query({name:"geolocation"});if("granted"===n.state)return!0;if("prompt"!==n.state)return!1;try{return yield e.getCurrentLocation(),!0}catch{return!1}}catch{try{return yield e.getCurrentLocation(),!0}catch{return!1}}else try{return yield e.getCurrentLocation(),!0}catch{return!1}})()}createAdvancedAutocomplete(e,n){if(!google?.maps?.places?.Autocomplete)return console.log("Autocomplete not available"),null;const i={fields:["place_id","formatted_address","geometry","name"],...n},o=new google.maps.places.Autocomplete(e,i);return this.map&&o.bindTo("bounds",this.map),o}startNavigation(e,n,i){return new W.c(o=>{this.getStepByStepDirections(e,n).subscribe({next:c=>{let m=0;const P=this.watchPosition(F=>{m<c.length&&this.calculateDistance(F,c[m].endLocation)<.05&&(m++,m<c.length?i(c[m]):(this.stopWatchingPosition(P),o.complete())),o.next({currentLocation:F,currentStep:c[m],progress:m/c.length,remainingSteps:c.length-m})},F=>o.error(F));c.length>0&&i(c[0])},error:c=>o.error(c)})})}loadMaps(){return this.mapLoaded$}createMap(e,n){return this.initializeMap(e,{center:n.center||f.c.defaultMapCenter,zoom:n.zoom||f.c.defaultMapZoom,styles:n.styles}).subscribe(),this.map}createMarker(e){const n={id:e.id||"marker_"+Date.now(),position:e.position,title:e.title||"",icon:e.icon,info:e.info};return this.addMarker(n)}createInfoWindow(e){return new google.maps.InfoWindow(e)}createAutocomplete(e,n){return google?.maps?.places?.Autocomplete?new google.maps.places.Autocomplete(e,n):(console.log("Autocomplete not available"),null)}isLoaded$(){return this.mapLoaded$}static{this.\u0275fac=function(n){return new(n||r)(t.KVO(t.SKi))}}static{this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),gn=(()=>{class r{constructor(e,n,i,o){this.http=e,this.ngZone=n,this.mapsService=i,this.webSocketService=o,this.trackingSubject=new dt.t([]),this.partnerLocations$=this.trackingSubject.asObservable(),this.activeSessions=new Map,this.partnerMarkers=new Map,this.animationFrames=new Map,this.initializeWebSocketUpdates()}startTracking(e,n){const i={orderId:e,partnerId:n,isActive:!0};return this.activeSessions.set(e,i),this.trackingSubscription=(0,Y.Y)(f.c.trackingUpdateInterval).pipe((0,Pt.n)(()=>this.fetchPartnerLocation(n)),(0,pn.v)(()=>i.isActive),(0,R.W)(o=>(console.error("Tracking error:",o),[]))).subscribe(o=>{o&&(this.updatePartnerLocation(o),this.animateMarkerMovement(o))}),this.fetchPartnerLocation(n).subscribe(o=>{o&&(this.updatePartnerLocation(o),this.createOrUpdateMarker(o))}),this.partnerLocations$.pipe((0,Pt.n)(o=>o.filter(c=>c.partnerId===n)))}stopTracking(e){const n=this.activeSessions.get(e);if(n){n.isActive=!1,this.activeSessions.delete(e),this.partnerMarkers.get(n.partnerId)&&(this.mapsService.removeMarker(n.partnerId),this.partnerMarkers.delete(n.partnerId));const o=this.animationFrames.get(n.partnerId);o&&(cancelAnimationFrame(o),this.animationFrames.delete(n.partnerId))}this.trackingSubscription&&this.trackingSubscription.unsubscribe()}fetchPartnerLocation(e){const n={partnerId:e,partnerName:"Raj Kumar",lat:12.97+.001*(Math.random()-.5),lng:77.593+.001*(Math.random()-.5),heading:360*Math.random(),speed:20+10*Math.random(),accuracy:5,timestamp:new Date,orderId:"1",status:"BUSY"};return new W.c(i=>{setTimeout(()=>{i.next(n),i.complete()},200)})}updatePartnerLocation(e){const n=this.trackingSubject.value,i=n.findIndex(o=>o.partnerId===e.partnerId);i>=0?n[i]=e:n.push(e),this.trackingSubject.next([...n])}createOrUpdateMarker(e){const n=e.partnerId;if(this.partnerMarkers.get(n))this.animateMarkerMovement(e);else{const o={id:n,position:{lat:e.lat,lng:e.lng},title:`${e.partnerName} - ${e.status}`,icon:this.getPartnerIcon(e.status),info:this.createInfoWindowContent(e)},c=this.mapsService.addMarker(o);this.partnerMarkers.set(n,c)}}animateMarkerMovement(e){const n=e.partnerId,i=this.partnerMarkers.get(n);if(!i)return;const o=i.getPosition();if(!o)return;const c=o.lat(),m=o.lng(),P=e.lat,F=e.lng,L=this.animationFrames.get(n);L&&cancelAnimationFrame(L);const tt=this.calculateDistance(c,m,P,F),fr=Math.min(Math.max(1e3*tt,2e3),8e3);let vt;const Ft=Et=>{vt||(vt=Et);const xt=Math.min((Et-vt)/fr,1),yt=this.easeInOutCubic(xt),vr=c+(P-c)*yt,Or=m+(F-m)*yt;if(this.ngZone.runOutsideAngular(()=>{i.setPosition({lat:vr,lng:Or})}),xt<1){const Mr=requestAnimationFrame(Ft);this.animationFrames.set(n,Mr)}else this.animationFrames.delete(n),this.updateMarkerInfo(n,e)},Cr=requestAnimationFrame(Ft);this.animationFrames.set(n,Cr)}easeInOutCubic(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}updateMarkerInfo(e,n){const i=this.partnerMarkers.get(e);i&&i.setTitle(`${n.partnerName} - ${n.status}`)}calculateDistance(e,n,i,o){const m=(i-e)*Math.PI/180,P=(o-n)*Math.PI/180,F=Math.sin(m/2)*Math.sin(m/2)+Math.cos(e*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(P/2)*Math.sin(P/2);return 2*Math.atan2(Math.sqrt(F),Math.sqrt(1-F))*6371}getPartnerIcon(e){switch(e){case"ONLINE":default:return this.mapsService.getDeliveryPartnerIcon();case"BUSY":return{...this.mapsService.getDeliveryPartnerIcon(),url:this.mapsService.getDeliveryPartnerIcon().url.replace("#4285f4","#ff9800")};case"OFFLINE":return{...this.mapsService.getDeliveryPartnerIcon(),url:this.mapsService.getDeliveryPartnerIcon().url.replace("#4285f4","#9e9e9e")}}}createInfoWindowContent(e){const n=new Date(e.timestamp).toLocaleTimeString(),i=e.speed?`${Math.round(e.speed)} km/h`:"Unknown";return`\n      <div style="padding: 10px; min-width: 200px;">\n        <h3 style="margin: 0 0 10px 0; color: #333;">${e.partnerName}</h3>\n        <div style="margin: 5px 0;">\n          <strong>Status:</strong> \n          <span style="color: ${this.getStatusColor(e.status)};">${e.status}</span>\n        </div>\n        <div style="margin: 5px 0;"><strong>Speed:</strong> ${i}</div>\n        <div style="margin: 5px 0;"><strong>Last Update:</strong> ${n}</div>\n        ${e.orderId?`<div style="margin: 5px 0;"><strong>Order:</strong> #${e.orderId}</div>`:""}\n      </div>\n    `}getStatusColor(e){switch(e){case"ONLINE":return"#4caf50";case"BUSY":return"#ff9800";case"OFFLINE":return"#9e9e9e";default:return"#333"}}initializeWebSocketUpdates(){this.webSocketService.subscribe("/topic/delivery/location/updates").subscribe(e=>{const n=JSON.parse(e.body);this.updatePartnerLocation(n),this.animateMarkerMovement(n)})}getCurrentPartnerLocation(e){return this.trackingSubject.value.find(i=>i.partnerId===e)||null}getAllActivePartners(){return this.trackingSubject.value.filter(e=>"OFFLINE"!==e.status)}setTrackingSession(e,n){const i=this.activeSessions.get(e);i&&Object.assign(i,n)}getTrackingSession(e){return this.activeSessions.get(e)}destroy(){this.trackingSubscription&&this.trackingSubscription.unsubscribe(),this.animationFrames.forEach(e=>cancelAnimationFrame(e)),this.animationFrames.clear(),this.partnerMarkers.clear(),this.activeSessions.clear()}static{this.\u0275fac=function(n){return new(n||r)(t.KVO(M.Qq),t.KVO(t.SKi),t.KVO(bt),t.KVO(Mt.V))}}static{this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();const mn=["mapContainer"];function un(r,s){if(1&r&&(t.j41(0,"mat-card-subtitle"),t.EFF(1),t.k0s()),2&r){const e=t.XpG(2);t.R7$(1),t.Lme(" Order #",e.assignment.orderNumber," \u2022 ",e.assignment.partnerName," ")}}function _n(r,s){if(1&r&&(t.j41(0,"mat-chip",23)(1,"mat-icon",8),t.EFF(2,"speed"),t.k0s(),t.EFF(3),t.k0s()),2&r){const e=t.XpG(2);t.R7$(3),t.SpI(" ",e.currentSpeed," ")}}function hn(r,s){if(1&r&&(t.j41(0,"mat-chip",24)(1,"mat-icon",8),t.EFF(2,"schedule"),t.k0s(),t.EFF(3),t.k0s()),2&r){const e=t.XpG(2);t.R7$(3),t.SpI(" ETA: ",e.estimatedArrival," ")}}function fn(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",25),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.callPartner())}),t.j41(1,"mat-icon"),t.EFF(2,"phone"),t.k0s(),t.EFF(3," Call Partner "),t.k0s()}}function Cn(r,s){1&r&&(t.j41(0,"div",17),t.nrm(1,"div",26),t.j41(2,"span"),t.EFF(3,"Your Location"),t.k0s()())}function Pn(r,s){if(1&r&&(t.j41(0,"div",29)(1,"mat-icon"),t.EFF(2,"phone"),t.k0s(),t.j41(3,"span",30),t.EFF(4,"Phone:"),t.k0s(),t.j41(5,"span",31),t.EFF(6),t.k0s()()),2&r){const e=t.XpG(3);t.R7$(6),t.JRh(e.assignment.partnerPhone)}}function vn(r,s){if(1&r&&(t.j41(0,"mat-card",27)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),t.EFF(4,"person"),t.k0s(),t.EFF(5," Delivery Partner Details "),t.k0s()(),t.j41(6,"mat-card-content")(7,"div",28)(8,"div",29)(9,"mat-icon"),t.EFF(10,"person"),t.k0s(),t.j41(11,"span",30),t.EFF(12,"Partner:"),t.k0s(),t.j41(13,"span",31),t.EFF(14),t.k0s()(),t.DNE(15,Pn,7,1,"div",32),t.k0s()()()),2&r){const e=t.XpG(2);t.R7$(14),t.JRh(e.assignment.partnerName),t.R7$(1),t.Y8G("ngIf",null==e.assignment?null:e.assignment.partnerPhone)}}function On(r,s){if(1&r&&(t.j41(0,"mat-card",33)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),t.EFF(4,"shopping_bag"),t.k0s(),t.EFF(5," Order Information "),t.k0s()(),t.j41(6,"mat-card-content")(7,"div",34)(8,"div",29)(9,"mat-icon"),t.EFF(10,"confirmation_number"),t.k0s(),t.j41(11,"span",30),t.EFF(12,"Order Number:"),t.k0s(),t.j41(13,"span",31),t.EFF(14),t.k0s()(),t.j41(15,"div",29)(16,"mat-icon"),t.EFF(17,"location_on"),t.k0s(),t.j41(18,"span",30),t.EFF(19,"Delivery Address:"),t.k0s(),t.j41(20,"span",31),t.EFF(21),t.k0s()()()()()),2&r){const e=t.XpG(2);t.R7$(14),t.SpI("#",e.assignment.orderNumber,""),t.R7$(7),t.JRh(e.assignment.deliveryAddress)}}function Mn(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",3)(1,"mat-card",4)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),t.EFF(5,"local_shipping"),t.k0s(),t.EFF(6," Order Tracking "),t.k0s(),t.DNE(7,un,2,2,"mat-card-subtitle",5),t.k0s(),t.j41(8,"mat-card-content")(9,"div",6)(10,"mat-chip-set")(11,"mat-chip",7)(12,"mat-icon",8),t.EFF(13),t.k0s(),t.EFF(14),t.k0s(),t.DNE(15,_n,4,1,"mat-chip",9),t.DNE(16,hn,4,1,"mat-chip",10),t.j41(17,"mat-chip",7)(18,"mat-icon",8),t.EFF(19),t.k0s(),t.EFF(20),t.k0s()()()(),t.j41(21,"mat-card-actions"),t.DNE(22,fn,4,0,"button",11),t.j41(23,"button",12),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.refreshTracking())}),t.j41(24,"mat-icon"),t.EFF(25,"refresh"),t.k0s(),t.EFF(26," Refresh "),t.k0s(),t.j41(27,"button",12),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.shareLocation())}),t.j41(28,"mat-icon"),t.EFF(29,"share"),t.k0s(),t.EFF(30," Share "),t.k0s()()(),t.j41(31,"mat-card",13)(32,"mat-card-header")(33,"mat-card-title")(34,"mat-icon"),t.EFF(35,"map"),t.k0s(),t.EFF(36," Live Tracking Map "),t.k0s()(),t.j41(37,"mat-card-content"),t.nrm(38,"div",14,15),t.j41(40,"div",16)(41,"div",17),t.nrm(42,"div",18),t.j41(43,"span"),t.EFF(44,"Delivery Partner"),t.k0s()(),t.j41(45,"div",17),t.nrm(46,"div",19),t.j41(47,"span"),t.EFF(48,"Delivery Location"),t.k0s()(),t.DNE(49,Cn,4,0,"div",20),t.k0s()()(),t.DNE(50,vn,16,2,"mat-card",21),t.DNE(51,On,22,2,"mat-card",22),t.k0s()}if(2&r){const e=t.XpG();t.R7$(7),t.Y8G("ngIf",e.assignment),t.R7$(4),t.Y8G("color",e.trackingStatusColor),t.R7$(2),t.JRh(e.isTrackingActive?"gps_fixed":"gps_off"),t.R7$(1),t.SpI(" ",e.trackingStatusText," "),t.R7$(1),t.Y8G("ngIf",e.currentPartnerLocation),t.R7$(1),t.Y8G("ngIf",e.isTrackingActive),t.R7$(1),t.Y8G("color",e.locationStatusColor),t.R7$(2),t.JRh(e.isLocationPermissionGranted?"location_on":"location_off"),t.R7$(1),t.SpI(" ",e.locationStatusText," "),t.R7$(2),t.Y8G("ngIf",null==e.assignment?null:e.assignment.partnerPhone),t.R7$(16),t.xc7("height",400,"px")("width","100%"),t.R7$(11),t.Y8G("ngIf",e.userLocation),t.R7$(1),t.Y8G("ngIf",e.assignment),t.R7$(1),t.Y8G("ngIf",e.assignment)}}function bn(r,s){1&r&&(t.j41(0,"div",35)(1,"mat-card")(2,"mat-card-content")(3,"div",36),t.nrm(4,"mat-spinner",37),t.j41(5,"h3"),t.EFF(6,"Loading tracking information..."),t.k0s(),t.j41(7,"p"),t.EFF(8,"Please wait while we fetch the latest delivery details."),t.k0s()()()()())}function kn(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",38)(1,"mat-card")(2,"mat-card-content")(3,"div",39)(4,"mat-icon",40),t.EFF(5,"error_outline"),t.k0s(),t.j41(6,"h3"),t.EFF(7,"Order Not Found"),t.k0s(),t.j41(8,"p"),t.EFF(9,"We couldn't find the tracking information for this order."),t.k0s(),t.j41(10,"button",25),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.loadAssignmentData())}),t.j41(11,"mat-icon"),t.EFF(12,"refresh"),t.k0s(),t.EFF(13," Try Again "),t.k0s()()()()()}}let Fn=(()=>{class r{constructor(e,n,i,o,c,m){this.route=e,this.trackingService=n,this.assignmentService=i,this.liveTrackingService=o,this.googleMapsService=c,this.snackBar=m,this.destroy$=new U.B,this.assignmentId=0,this.assignment=null,this.tracking=null,this.trackingHistory=[],this.isLoading=!0,this.isTrackingActive=!1,this.lastUpdateTime=null,this.mapCenter={lat:12.9716,lng:77.5946},this.mapZoom=13,this.partnerLocation=null,this.deliveryLocation=null,this.currentPartnerLocation=null,this.map=null,this.isMapLoaded=!1,this.userLocation=null,this.isLocationPermissionGranted=!1,this.locationWatchId=-1,this.showDirections=!1,this.statusSteps=[{key:"ASSIGNED",label:"Order Assigned",icon:"assignment",completed:!1},{key:"ACCEPTED",label:"Accepted by Partner",icon:"check_circle",completed:!1},{key:"PICKED_UP",label:"Picked Up",icon:"shopping_cart",completed:!1},{key:"IN_TRANSIT",label:"On the Way",icon:"local_shipping",completed:!1},{key:"DELIVERED",label:"Delivered",icon:"check_circle_outline",completed:!1}]}ngOnInit(){this.route.params.pipe((0,u.Q)(this.destroy$)).subscribe(e=>{const n=parseInt(e.assignmentId,10);isNaN(n)?(console.log("No assignment ID provided, showing mock tracking dashboard"),this.showMockTrackingDashboard()):(this.assignmentId=n,this.loadAssignmentData())})}ngAfterViewInit(){this.initializeMap(),this.requestLocationPermission()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.stopRealTimeTracking(),this.assignment?.partnerId&&this.liveTrackingService.stopTracking(this.assignmentId.toString()),this.locationWatchId>=0&&this.googleMapsService.stopWatchingPosition(this.locationWatchId)}showMockTrackingDashboard(){this.isLoading=!1,this.assignmentId=1,this.assignment={id:1,orderId:101,partnerId:1,status:"IN_TRANSIT",assignmentType:"MANUAL",acceptedAt:new Date,pickedUpAt:new Date,deliveredAt:null,estimatedDeliveryTime:new Date(Date.now()+18e5),deliveryNotes:"Customer requested contactless delivery",customerOTP:"1234",deliveryOTP:"5678",deliveryLatitude:12.9716,deliveryLongitude:77.5946,pickupLatitude:12.9616,pickupLongitude:77.5846,createdAt:new Date,updatedAt:new Date},this.tracking={id:1,assignmentId:1,currentStatus:"IN_TRANSIT",currentLatitude:12.9666,currentLongitude:77.5896,lastUpdateTime:new Date,totalDistance:5.2,estimatedTimeRemaining:15,isActive:!0,deliveryProofUrl:null,customerSignatureUrl:null,createdAt:new Date,updatedAt:new Date},this.trackingHistory=[{status:"ASSIGNED",timestamp:new Date(Date.now()-36e5),location:"Order assigned to delivery partner"},{status:"ACCEPTED",timestamp:new Date(Date.now()-3e6),location:"Partner accepted the order"},{status:"PICKED_UP",timestamp:new Date(Date.now()-24e5),location:"Order picked up from shop"},{status:"IN_TRANSIT",timestamp:new Date(Date.now()-12e5),location:"On the way to delivery location"}],this.updateStatusSteps(),this.setupMapWithMockData()}setupMapWithMockData(){this.mapCenter={lat:12.9716,lng:77.5946},this.partnerLocation={lat:12.9666,lng:77.5896},this.deliveryLocation={lat:12.9716,lng:77.5946},this.isMapLoaded=!0,this.lastUpdateTime=new Date}loadAssignmentData(){this.assignmentService.getAssignmentById(this.assignmentId).pipe((0,u.Q)(this.destroy$)).subscribe({next:e=>{k.c.isSuccess(e)&&e.data?(this.assignment=e.data,this.updateStatusSteps(),this.loadTrackingData(),this.assignment?.deliveryLatitude&&this.assignment?.deliveryLongitude&&(this.deliveryLocation={lat:this.assignment.deliveryLatitude,lng:this.assignment.deliveryLongitude},this.mapCenter=this.deliveryLocation,this.addDeliveryLocationMarker()),this.assignment?.partnerId&&this.isDeliveryInProgress()&&this.startLiveTracking()):this.snackBar.open("Assignment not found","Close",{duration:3e3}),this.isLoading=!1},error:e=>{console.error("Error loading assignment:",e),this.snackBar.open("Error loading tracking information","Close",{duration:3e3}),this.isLoading=!1}})}loadTrackingData(){this.assignmentId&&(this.trackingService.getLatestTracking(this.assignmentId).pipe((0,u.Q)(this.destroy$)).subscribe({next:e=>{k.c.isSuccess(e)&&e.data&&(this.tracking=e.data,this.lastUpdateTime=new Date,this.tracking.latitude&&this.tracking.longitude&&(this.partnerLocation={lat:this.tracking.latitude,lng:this.tracking.longitude}),this.isTrackingActive=this.isTrackingRecent())},error:e=>{console.error("Error loading tracking data:",e)}}),this.trackingService.getTrackingHistory(this.assignmentId).pipe((0,u.Q)(this.destroy$)).subscribe({next:e=>{k.c.isSuccess(e)&&e.data&&(this.trackingHistory=e.data)},error:e=>{console.error("Error loading tracking history:",e)}}))}updateStatusSteps(){if(!this.assignment)return;const i=["ASSIGNED","ACCEPTED","PICKED_UP","IN_TRANSIT","DELIVERED"].indexOf(this.assignment.status);this.statusSteps.forEach((o,c)=>{o.completed=c<=i})}startRealTimeTracking(){this.trackingInterval=(0,Y.Y)(12e4).pipe((0,u.Q)(this.destroy$)).subscribe(()=>{this.assignment&&this.isDeliveryInProgress()&&this.loadTrackingData()})}stopRealTimeTracking(){this.trackingInterval&&clearInterval(this.trackingInterval)}isDeliveryInProgress(){return!!this.assignment&&["ACCEPTED","PICKED_UP","IN_TRANSIT"].includes(this.assignment.status)}isTrackingRecent(){if(!this.tracking||!this.tracking.trackedAt)return!1;const e=new Date,n=new Date(this.tracking.trackedAt);return(e.getTime()-n.getTime())/6e4<=5}refreshTracking(){this.loadTrackingData(),this.snackBar.open("Tracking data refreshed","Close",{duration:2e3})}getStatusColor(e){switch(e){case"ASSIGNED":case"PICKED_UP":case"DELIVERED":return"primary";case"ACCEPTED":case"IN_TRANSIT":return"accent";default:return"basic"}}getStatusIcon(e){switch(e){case"ASSIGNED":return"assignment";case"ACCEPTED":return"check_circle";case"PICKED_UP":return"shopping_cart";case"IN_TRANSIT":return"local_shipping";case"DELIVERED":return"check_circle_outline";default:return"help"}}formatTime(e){return e?new Date(e).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}):"N/A"}formatDistance(e){return e?e<1?`${Math.round(1e3*e)}m`:`${e.toFixed(1)}km`:"N/A"}formatSpeed(e){return e?`${Math.round(e)}km/h`:"N/A"}formatEarnings(e){return`\u20b9${e.toFixed(2)}`}getVehicleIcon(e){switch(e?.toUpperCase()){case"BIKE":return"motorcycle";case"SCOOTER":return"electric_scooter";case"BICYCLE":return"pedal_bike";case"CAR":return"directions_car";case"AUTO":return"local_taxi";default:return"directions"}}getBatteryIcon(e){return e?e>80?"battery_full":e>60?"battery_6_bar":e>40?"battery_4_bar":e>20?"battery_2_bar":"battery_alert":"battery_unknown"}getBatteryColor(e){return e?e>20?"green":"red":"gray"}callPartner(){this.assignment?.partnerPhone&&window.open(`tel:${this.assignment.partnerPhone}`)}shareLocation(){navigator.share&&this.assignmentId?navigator.share({title:"Order Tracking",text:`Track my order #${this.assignment?.orderNumber}`,url:window.location.href}).catch(console.error):navigator.clipboard.writeText(window.location.href).then(()=>{this.snackBar.open("Tracking link copied to clipboard","Close",{duration:3e3})})}initializeMap(){this.mapContainer&&this.googleMapsService.initializeMap(this.mapContainer.nativeElement,{center:this.mapCenter,zoom:this.mapZoom}).subscribe({next:n=>{this.map=n,this.isMapLoaded=!0,this.addInitialMarkers()},error:n=>{console.error("Error initializing map:",n),this.snackBar.open("Error loading map","Close",{duration:3e3})}})}addInitialMarkers(){this.isMapLoaded&&(this.addDeliveryLocationMarker(),this.partnerLocation&&this.addPartnerLocationMarker())}addDeliveryLocationMarker(){if(!this.isMapLoaded||!this.deliveryLocation)return;const e={id:"delivery-location",position:this.deliveryLocation,title:"Delivery Location",icon:this.googleMapsService.getCustomerIcon(),info:`\n        <div style="padding: 10px;">\n          <h3 style="margin: 0 0 10px 0;">Delivery Address</h3>\n          <p style="margin: 0;">${this.assignment?.deliveryAddress||"Delivery Location"}</p>\n        </div>\n      `};this.googleMapsService.addMarker(e)}addPartnerLocationMarker(){if(!this.isMapLoaded||!this.partnerLocation)return;const e={id:"partner-location",position:this.partnerLocation,title:"Delivery Partner",icon:this.googleMapsService.getDeliveryPartnerIcon(),info:`\n        <div style="padding: 10px;">\n          <h3 style="margin: 0 0 10px 0;">${this.assignment?.partnerName||"Delivery Partner"}</h3>\n          <p style="margin: 5px 0;"><strong>Phone:</strong> ${this.assignment?.partnerPhone||"N/A"}</p>\n          <p style="margin: 5px 0;"><strong>Vehicle:</strong> N/A</p>\n        </div>\n      `};this.googleMapsService.addMarker(e)}startLiveTracking(){this.assignment?.partnerId&&this.liveTrackingService.startTracking(this.assignmentId.toString(),this.assignment.partnerId.toString()).pipe((0,u.Q)(this.destroy$)).subscribe({next:e=>{this.currentPartnerLocation=e,this.updatePartnerLocationOnMap(e),this.updateTrackingInfo(e)},error:e=>{console.error("Live tracking error:",e),this.startRealTimeTracking()}})}updatePartnerLocationOnMap(e){this.isMapLoaded&&(this.partnerLocation={lat:e.lat,lng:e.lng},this.deliveryLocation?this.googleMapsService.fitBounds([this.partnerLocation,this.deliveryLocation]):this.googleMapsService.setCenter(this.partnerLocation,15),this.deliveryLocation&&this.googleMapsService.calculateRoute({origin:this.partnerLocation,destination:this.deliveryLocation,travelMode:"DRIVING"}).subscribe({next:n=>{},error:n=>{console.error("Error calculating route:",n)}}))}updateTrackingInfo(e){this.lastUpdateTime=new Date(e.timestamp),this.isTrackingActive=!0,this.tracking&&(this.tracking.latitude=e.lat,this.tracking.longitude=e.lng,this.tracking.trackedAt=e.timestamp,this.tracking.speed=e.speed)}getTrackingStatusText(){if(!this.isTrackingActive)return"Tracking Offline";if(!this.currentPartnerLocation)return"Waiting for Location";const e=Date.now()-new Date(this.currentPartnerLocation.timestamp).getTime(),n=Math.floor(e/6e4);return n<1?"Live Tracking":n<5?`Updated ${n}m ago`:"Location Outdated"}getTrackingStatusColor(){if(!this.isTrackingActive)return"warn";if(!this.currentPartnerLocation)return"basic";const e=Date.now()-new Date(this.currentPartnerLocation.timestamp).getTime(),n=Math.floor(e/6e4);return n<2?"primary":n<5?"accent":"warn"}getCurrentSpeed(){return this.currentPartnerLocation?.speed?`${Math.round(this.currentPartnerLocation.speed)} km/h`:this.formatSpeed(this.tracking?.speed)}getEstimatedArrival(){if(!this.currentPartnerLocation||!this.deliveryLocation)return"Calculating...";const e=this.googleMapsService.calculateDistance({lat:this.currentPartnerLocation.lat,lng:this.currentPartnerLocation.lng},this.deliveryLocation),o=Math.round(e/(this.currentPartnerLocation.speed||30)*60);return o<1?"Arriving now":o<60?`${o} minutes`:`${Math.floor(o/60)}h ${o%60}m`}requestLocationPermission(){var e=this;return(0,at.A)(function*(){try{e.isLocationPermissionGranted=yield e.googleMapsService.requestLocationPermission(),e.isLocationPermissionGranted&&e.startLocationTracking()}catch(n){console.warn("Location permission not granted:",n),e.snackBar.open("Location access not available","Close",{duration:3e3})}})()}startLocationTracking(){this.isLocationPermissionGranted&&(this.locationWatchId=this.googleMapsService.watchPosition(e=>{this.userLocation=e,this.updateUserLocationOnMap()},e=>{console.error("Location tracking error:",e)}))}updateUserLocationOnMap(){if(!this.isMapLoaded||!this.userLocation)return;const e={id:"user-location",position:this.userLocation,title:"Your Location",icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('\n          <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n            <circle cx="16" cy="16" r="8" fill="#4285f4" stroke="#ffffff" stroke-width="4"/>\n            <circle cx="16" cy="16" r="3" fill="#ffffff"/>\n          </svg>\n        '),scaledSize:{width:32,height:32},anchor:{x:16,y:16}},info:'\n        <div style="padding: 10px;">\n          <h3 style="margin: 0 0 10px 0;">Your Location</h3>\n          <p style="margin: 0;">Current position</p>\n        </div>\n      '};if(this.googleMapsService.addMarker(e),this.deliveryLocation||this.partnerLocation){const n=[this.userLocation];this.deliveryLocation&&n.push(this.deliveryLocation),this.partnerLocation&&n.push(this.partnerLocation),this.googleMapsService.fitBounds(n)}}toggleDirections(){this.showDirections=!this.showDirections,this.showDirections&&this.userLocation&&this.deliveryLocation?this.getDirectionsToDelivery():this.googleMapsService.clearRoute()}getDirectionsToDelivery(){!this.userLocation||!this.deliveryLocation||this.googleMapsService.calculateDetailedRoute({origin:this.userLocation,destination:this.deliveryLocation,travelMode:"DRIVING"}).subscribe({next:e=>{this.snackBar.open(`Route calculated: ${e.distance.text}, ${e.duration.text}`,"Close",{duration:5e3})},error:e=>{console.error("Failed to calculate route:",e),this.snackBar.open("Failed to calculate directions","Close",{duration:3e3})}})}getDirectionsToLocation(){this.userLocation&&this.deliveryLocation?window.open(`https://www.google.com/maps/dir/${this.userLocation.lat},${this.userLocation.lng}/${this.deliveryLocation.lat},${this.deliveryLocation.lng}`,"_blank"):this.snackBar.open("Location not available for directions","Close",{duration:3e3})}centerMapOnUser(){this.userLocation&&this.isMapLoaded?this.googleMapsService.setCenter(this.userLocation,16):this.snackBar.open("Your location is not available","Close",{duration:3e3})}searchNearbyPlaces(e){var n=this;return(0,at.A)(function*(){if(n.deliveryLocation)try{const i=yield n.googleMapsService.searchNearbyPlaces(n.deliveryLocation,1e3,e);i.slice(0,5).forEach((o,c)=>{const m={id:`nearby-${e}-${c}`,position:{lat:o.geometry.location.lat(),lng:o.geometry.location.lng()},title:o.name,icon:n.getPlaceTypeIcon(e),info:`\n            <div style="padding: 10px;">\n              <h3 style="margin: 0 0 10px 0;">${o.name}</h3>\n              <p style="margin: 0 0 5px 0;">${o.vicinity}</p>\n              <p style="margin: 0; font-size: 12px; color: #666;">\n                Rating: ${o.rating||"N/A"} \u2b50\n              </p>\n            </div>\n          `};n.googleMapsService.addMarker(m)}),n.snackBar.open(`Found ${i.length} nearby ${e}s`,"Close",{duration:3e3})}catch(i){console.error("Failed to search nearby places:",i),n.snackBar.open(`Failed to find nearby ${e}s`,"Close",{duration:3e3})}else n.snackBar.open("Delivery location not available","Close",{duration:3e3})})()}getPlaceTypeIcon(e){return{url:`https://maps.google.com/mapfiles/ms/icons/${"restaurant"===e?"restaurant":"blue"}-dot.png`,scaledSize:{width:32,height:32},origin:{x:0,y:0},anchor:{x:16,y:32}}}getDistanceToDelivery(){if(!this.userLocation||!this.deliveryLocation)return"N/A";const e=this.googleMapsService.calculateDistance(this.userLocation,this.deliveryLocation);return this.formatDistance(e)}getDistanceToPartner(){if(!this.userLocation||!this.partnerLocation)return"N/A";const e=this.googleMapsService.calculateDistance(this.userLocation,this.partnerLocation);return this.formatDistance(e)}getLocationStatusText(){return this.isLocationPermissionGranted?this.userLocation?"Location active":"Getting your location...":"Location access denied"}getLocationStatusColor(){return this.isLocationPermissionGranted?this.userLocation?"primary":"accent":"warn"}get remainingDistance(){if(!this.partnerLocation||!this.deliveryLocation)return"N/A";const e=this.googleMapsService.calculateDistance(this.partnerLocation,this.deliveryLocation);return this.formatDistance(e)}get distanceToDelivery(){return this.getDistanceToDelivery()}get distanceToPartner(){return this.getDistanceToPartner()}get currentSpeed(){return this.getCurrentSpeed()}get estimatedArrival(){return this.getEstimatedArrival()}get trackingStatusText(){return this.getTrackingStatusText()}get trackingStatusColor(){return this.getTrackingStatusColor()}get locationStatusText(){return this.getLocationStatusText()}get locationStatusColor(){return this.getLocationStatusColor()}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(G.nX),t.rXU(Ct),t.rXU(Z.N),t.rXU(gn),t.rXU(bt),t.rXU($.UG))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-order-tracking"]],viewQuery:function(n,i){if(1&n&&t.GBs(mn,5),2&n){let o;t.mGM(o=t.lsd())&&(i.mapContainer=o.first)}},decls:3,vars:3,consts:[["class","tracking-container",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"tracking-container"],[1,"tracking-header"],[4,"ngIf"],[1,"tracking-status"],["selected","",3,"color"],["matChipAvatar",""],["color","accent","selected","",4,"ngIf"],["color","primary","selected","",4,"ngIf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-button","",3,"click"],[1,"map-container"],[1,"google-map"],["mapContainer",""],[1,"map-legend"],[1,"legend-item"],[1,"legend-marker","partner"],[1,"legend-marker","customer"],["class","legend-item",4,"ngIf"],["class","partner-info",4,"ngIf"],["class","order-details",4,"ngIf"],["color","accent","selected",""],["color","primary","selected",""],["mat-raised-button","","color","primary",3,"click"],[1,"legend-marker","user"],[1,"partner-info"],[1,"partner-details"],[1,"detail-row"],[1,"label"],[1,"value"],["class","detail-row",4,"ngIf"],[1,"order-details"],[1,"order-info"],[1,"loading-container"],[1,"loading-content"],["diameter","50"],[1,"error-container"],[1,"error-content"],["color","warn"]],template:function(n,i){1&n&&(t.DNE(0,Mn,52,17,"div",0),t.DNE(1,bn,9,0,"div",1),t.DNE(2,kn,14,0,"div",2)),2&n&&(t.Y8G("ngIf",!i.isLoading),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading&&!i.assignment))},dependencies:[a.bT,_.RN,_.YY,_.m2,_.MM,_.Lc,_.dh,x.$z,w.An,T.Jl,T.yZ,T.Jo,N.LG],styles:[".tracking-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto;display:flex;flex-direction:column;gap:20px}@media (max-width: 768px){.tracking-container[_ngcontent-%COMP%]{padding:10px;gap:15px}}.tracking-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}.tracking-header[_ngcontent-%COMP%]     .mat-card-header-text{color:#fff}.tracking-header[_ngcontent-%COMP%]     .mat-card-title{display:flex;align-items:center;gap:10px;font-size:1.5rem;font-weight:600}.tracking-header[_ngcontent-%COMP%]     .mat-card-subtitle{opacity:.9;margin-top:8px}.tracking-header[_ngcontent-%COMP%]   .tracking-status[_ngcontent-%COMP%]{margin:15px 0}.tracking-header[_ngcontent-%COMP%]   .tracking-status[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.tracking-header[_ngcontent-%COMP%]   .tracking-status[_ngcontent-%COMP%]     .mat-mdc-chip{background-color:#ffffff26;color:#fff;border:1px solid rgba(255,255,255,.3)}.tracking-header[_ngcontent-%COMP%]   .tracking-status[_ngcontent-%COMP%]     .mat-mdc-chip .mat-icon{color:#fff}.tracking-header[_ngcontent-%COMP%]     .mat-card-actions{padding:16px;gap:10px;display:flex;flex-wrap:wrap}.tracking-header[_ngcontent-%COMP%]     .mat-card-actions .mat-raised-button{background-color:#ffffff26;color:#fff;border:1px solid rgba(255,255,255,.3)}.tracking-header[_ngcontent-%COMP%]     .mat-card-actions .mat-raised-button:hover{background-color:#ffffff40}.tracking-header[_ngcontent-%COMP%]     .mat-card-actions .mat-button{color:#fffc}.tracking-header[_ngcontent-%COMP%]     .mat-card-actions .mat-button:hover{background-color:#ffffff1a}.map-container[_ngcontent-%COMP%]{overflow:hidden}.map-container[_ngcontent-%COMP%]   .mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.map-container[_ngcontent-%COMP%]   .mat-card-header[_ngcontent-%COMP%]   .map-controls[_ngcontent-%COMP%]{display:flex;gap:8px}.map-container[_ngcontent-%COMP%]   .google-map[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000001a}.map-container[_ngcontent-%COMP%]   .map-legend[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin-top:15px;padding:10px;background-color:#f5f5f5;border-radius:8px;flex-wrap:wrap}.map-container[_ngcontent-%COMP%]   .map-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666}.map-container[_ngcontent-%COMP%]   .map-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-marker[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;border:2px solid white;box-shadow:0 1px 3px #0000004d}.map-container[_ngcontent-%COMP%]   .map-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-marker.partner[_ngcontent-%COMP%]{background-color:#4285f4}.map-container[_ngcontent-%COMP%]   .map-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-marker.customer[_ngcontent-%COMP%]{background-color:#ea4335}.map-container[_ngcontent-%COMP%]   .map-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-marker.user[_ngcontent-%COMP%]{background-color:#4285f4;border:2px solid white;box-shadow:0 0 0 2px #4285f4}.map-container[_ngcontent-%COMP%]   .map-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-line[_ngcontent-%COMP%]{width:20px;height:3px;background-color:#4285f4;border-radius:2px}.map-container[_ngcontent-%COMP%]   .map-legend[_ngcontent-%COMP%]   .legend-item[_ngcontent-%COMP%]   .legend-line.directions[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4285f4 0%,#34a853 50%,#fbbc04 100%);height:4px}.status-progress[_ngcontent-%COMP%]   .progress-stepper[_ngcontent-%COMP%]{position:relative;padding:20px 0}.status-progress[_ngcontent-%COMP%]   .progress-stepper[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:30px;position:relative}.status-progress[_ngcontent-%COMP%]   .progress-stepper[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]:last-child{margin-bottom:0}.status-progress[_ngcontent-%COMP%]   .progress-stepper[_ngcontent-%COMP%]   .step.completed[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50}.status-progress[_ngcontent-%COMP%]   .progress-stepper[_ngcontent-%COMP%]   .step.completed[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:#333;font-weight:500}.status-progress[_ngcontent-%COMP%]   .progress-stepper[_ngcontent-%COMP%]   .step.current[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2196f3;animation:_ngcontent-%COMP%_pulse 2s infinite}.status-progress[_ngcontent-%COMP%]   .progress-stepper[_ngcontent-%COMP%]   .step.current[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:#2196f3;font-weight:600}.status-progress[_ngcontent-%COMP%]   .progress-stepper[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]{width:48px;height:48px;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5;border-radius:50%;margin-right:16px;z-index:1}.status-progress[_ngcontent-%COMP%]   .progress-stepper[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.status-progress[_ngcontent-%COMP%]   .progress-stepper[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]{flex:1}.status-progress[_ngcontent-%COMP%]   .progress-stepper[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{font-size:16px;color:#666;margin-bottom:4px}.status-progress[_ngcontent-%COMP%]   .progress-stepper[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]   .step-time[_ngcontent-%COMP%]{font-size:12px;color:#999}.status-progress[_ngcontent-%COMP%]   .progress-stepper[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   .step-connector[_ngcontent-%COMP%]{position:absolute;left:23px;top:48px;width:2px;height:30px;background-color:#e0e0e0}.status-progress[_ngcontent-%COMP%]   .progress-stepper[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]   .step-connector.completed[_ngcontent-%COMP%]{background-color:#4caf50}.partner-info[_ngcontent-%COMP%]   .partner-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.partner-info[_ngcontent-%COMP%]   .partner-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.partner-info[_ngcontent-%COMP%]   .partner-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#666;width:20px;height:20px;font-size:20px}.partner-info[_ngcontent-%COMP%]   .partner-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#666;min-width:100px}.partner-info[_ngcontent-%COMP%]   .partner-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333;font-weight:400}.tracking-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}.tracking-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{text-align:center;padding:20px;background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);border-radius:12px;border:1px solid #e0e0e0}.tracking-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#2196f3;margin-bottom:10px}.tracking-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#333;margin-bottom:5px}.tracking-stats[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:14px;color:#666;font-weight:500}.order-details[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.order-details[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:10px 0;border-bottom:1px solid #f0f0f0}.order-details[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.order-details[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#666;width:20px;height:20px;font-size:20px;margin-top:2px}.order-details[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#666;min-width:140px}.order-details[_ngcontent-%COMP%]   .order-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333;font-weight:400;flex:1;word-break:break-word}.emergency-section[_ngcontent-%COMP%]{background-color:#fff3e0;border:2px solid #ffb74d}.emergency-section[_ngcontent-%COMP%]   .emergency-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}@media (max-width: 768px){.emergency-section[_ngcontent-%COMP%]   .emergency-actions[_ngcontent-%COMP%]{flex-direction:column}}.emergency-section[_ngcontent-%COMP%]   .emergency-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:150px;padding:12px 24px}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px;padding:40px}.loading-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{text-align:center;max-width:400px;width:100%}.loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%], .loading-container[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}.loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .loading-container[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .loading-container[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.loading-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .loading-container[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.7}to{transform:scale(1);opacity:1}}@media (max-width: 768px){.tracking-header[_ngcontent-%COMP%]     .mat-card-title{font-size:1.2rem}.tracking-header[_ngcontent-%COMP%]     .mat-card-actions{flex-direction:column}.tracking-header[_ngcontent-%COMP%]     .mat-card-actions button{width:100%}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{padding:15px}.stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.2rem}.partner-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%], .order-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.partner-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .order-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{min-width:auto;font-size:14px}.partner-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], .order-info[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{padding-left:32px}}@media (prefers-contrast: high){.tracking-header[_ngcontent-%COMP%]{background:#000;color:#fff}.map-legend[_ngcontent-%COMP%]{background-color:#f0f0f0;border:1px solid #000}.stat-item[_ngcontent-%COMP%]{border:2px solid #000}}@media (prefers-color-scheme: dark){.tracking-container[_ngcontent-%COMP%]{background-color:#121212}mat-card[_ngcontent-%COMP%]{background-color:#1e1e1e;color:#fff}.map-legend[_ngcontent-%COMP%]{background-color:#2e2e2e;color:#fff}.stat-item[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2e2e2e 0%,#1e1e1e 100%);color:#fff}.detail-row[_ngcontent-%COMP%]{border-bottom-color:#333}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#bbb}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#fff}}  .places-menu .mat-mdc-menu-item{min-height:48px}  .places-menu .mat-mdc-menu-item .mat-icon{margin-right:16px;color:#666}  .places-menu .mat-mdc-menu-item:hover .mat-icon{color:#2196f3}"]})}}return r})();var En=g(7468);function xn(r,s){if(1&r){const e=t.RV6();t.j41(0,"mat-chip-option",20),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.filterByStatus(o.value))}),t.j41(1,"mat-icon",21),t.EFF(2),t.k0s(),t.EFF(3),t.k0s()}if(2&r){const e=s.$implicit,n=t.XpG();t.Y8G("selected",n.selectedStatus===e.value),t.R7$(2),t.JRh(e.icon),t.R7$(1),t.SpI(" ",e.label," ")}}function yn(r,s){1&r&&(t.j41(0,"div",22),t.nrm(1,"mat-spinner",23),t.j41(2,"p"),t.EFF(3,"Loading active deliveries..."),t.k0s()())}function Dn(r,s){1&r&&(t.j41(0,"p"),t.EFF(1,"There are no active deliveries at the moment."),t.k0s())}function In(r,s){if(1&r&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&r){const e=t.XpG(3);t.R7$(1),t.SpI('No deliveries with status "',e.formatStatus(e.selectedStatus),'".')}}function Rn(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",30),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.filterByStatus("ALL"))}),t.EFF(1," Show All "),t.k0s()}}function jn(r,s){if(1&r&&(t.j41(0,"div",27)(1,"mat-icon"),t.EFF(2,"local_shipping"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No Active Deliveries"),t.k0s(),t.DNE(5,Dn,2,0,"p",28),t.DNE(6,In,2,1,"p",28),t.DNE(7,Rn,2,0,"button",29),t.k0s()),2&r){const e=t.XpG(2);t.R7$(5),t.Y8G("ngIf","ALL"===e.selectedStatus),t.R7$(1),t.Y8G("ngIf","ALL"!==e.selectedStatus),t.R7$(1),t.Y8G("ngIf","ALL"!==e.selectedStatus)}}function wn(r,s){if(1&r&&(t.j41(0,"div",38)(1,"mat-icon",39),t.EFF(2,"person"),t.k0s(),t.j41(3,"span",40),t.EFF(4,"Partner:"),t.k0s(),t.j41(5,"span",41),t.EFF(6),t.k0s()()),2&r){const e=t.XpG().$implicit;t.R7$(6),t.JRh(e.partnerName)}}function Sn(r,s){if(1&r&&(t.j41(0,"div",38)(1,"mat-icon",39),t.EFF(2,"person_outline"),t.k0s(),t.j41(3,"span",40),t.EFF(4,"Customer:"),t.k0s(),t.j41(5,"span",41),t.EFF(6),t.k0s()()),2&r){const e=t.XpG().$implicit;t.R7$(6),t.JRh(e.customerName)}}function Tn(r,s){if(1&r&&(t.j41(0,"div",38)(1,"mat-icon",39),t.EFF(2,"location_on"),t.k0s(),t.j41(3,"span",40),t.EFF(4,"Address:"),t.k0s(),t.j41(5,"span",46),t.EFF(6),t.k0s()()),2&r){const e=t.XpG().$implicit;t.R7$(6),t.JRh(e.deliveryAddress)}}function $n(r,s){if(1&r&&(t.j41(0,"div",38)(1,"mat-icon",39),t.EFF(2,"straighten"),t.k0s(),t.j41(3,"span",40),t.EFF(4,"Distance:"),t.k0s(),t.j41(5,"span",41),t.EFF(6),t.k0s()()),2&r){const e=t.XpG().$implicit;t.R7$(6),t.SpI("",e.distanceToDestination," km remaining")}}function An(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",47),t.bIt("click",function(i){t.eBV(e);const o=t.XpG().$implicit,c=t.XpG(2);return t.Njj(c.callPartner(o,i))}),t.j41(1,"mat-icon"),t.EFF(2,"phone"),t.k0s()()}}function Nn(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",31),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.trackDelivery(o))}),t.nrm(1,"div",32),t.j41(2,"div",33)(3,"div",34)(4,"div",35)(5,"mat-icon"),t.EFF(6),t.k0s(),t.j41(7,"span"),t.EFF(8),t.k0s()(),t.j41(9,"span",36),t.EFF(10),t.k0s()(),t.j41(11,"div",37)(12,"div",38)(13,"mat-icon",39),t.EFF(14,"confirmation_number"),t.k0s(),t.j41(15,"span",40),t.EFF(16,"Order:"),t.k0s(),t.j41(17,"span",41),t.EFF(18),t.k0s()(),t.DNE(19,wn,7,1,"div",42),t.DNE(20,Sn,7,1,"div",42),t.DNE(21,Tn,7,1,"div",42),t.DNE(22,$n,7,1,"div",42),t.k0s(),t.j41(23,"div",43)(24,"button",44),t.bIt("click",function(i){const c=t.eBV(e).$implicit;return t.XpG(2).trackDelivery(c),t.Njj(i.stopPropagation())}),t.j41(25,"mat-icon"),t.EFF(26,"map"),t.k0s()(),t.DNE(27,An,3,0,"button",45),t.k0s()()()}if(2&r){const e=s.$implicit,n=t.XpG(2);t.R7$(1),t.xc7("background-color",n.getStatusColor(e.status)),t.R7$(3),t.xc7("background-color",n.getStatusColor(e.status)),t.R7$(2),t.JRh(n.getStatusIcon(e.status)),t.R7$(2),t.JRh(n.formatStatus(e.status)),t.R7$(2),t.JRh(n.formatTimeAgo(e.updatedAt)),t.R7$(8),t.SpI("#",e.orderNumber||e.orderId,""),t.R7$(1),t.Y8G("ngIf",e.partnerName),t.R7$(1),t.Y8G("ngIf",e.customerName),t.R7$(1),t.Y8G("ngIf",e.deliveryAddress),t.R7$(1),t.Y8G("ngIf",e.distanceToDestination),t.R7$(5),t.Y8G("ngIf",e.partnerPhone)}}function Ln(r,s){if(1&r&&(t.j41(0,"div",24),t.DNE(1,jn,8,3,"div",25),t.DNE(2,Nn,28,13,"div",26),t.k0s()),2&r){const e=t.XpG();t.R7$(1),t.Y8G("ngIf",0===e.filteredAssignments.length),t.R7$(1),t.Y8G("ngForOf",e.filteredAssignments)}}let Gn=(()=>{class r{constructor(e,n,i,o){this.assignmentService=e,this.trackingService=n,this.router=i,this.snackBar=o,this.destroy$=new U.B,this.activeAssignments=[],this.filteredAssignments=[],this.isLoading=!0,this.lastRefresh=new Date,this.selectedStatus="ALL",this.stats={totalActive:0,inTransit:0,pickedUp:0,assigned:0,deliveredToday:0},this.statusFilters=[{value:"ALL",label:"All Active",icon:"list"},{value:"IN_TRANSIT",label:"In Transit",icon:"local_shipping"},{value:"PICKED_UP",label:"Picked Up",icon:"shopping_cart"},{value:"ACCEPTED",label:"Accepted",icon:"check_circle"},{value:"ASSIGNED",label:"Assigned",icon:"assignment"}],this.displayedColumns=["status","orderNumber","partnerName","customerName","deliveryAddress","time","actions"]}ngOnInit(){this.loadActiveDeliveries(),(0,Y.Y)(3e4).pipe((0,u.Q)(this.destroy$)).subscribe(()=>this.loadActiveDeliveries())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadActiveDeliveries(){(0,En.p)(["ASSIGNED","ACCEPTED","PICKED_UP","IN_TRANSIT"].map(n=>this.assignmentService.getAssignmentsByStatus(n).pipe((0,R.W)(()=>(0,K.of)({statusCode:"SUCCESS",message:"",data:[],timestamp:""}))))).pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{this.activeAssignments=[],n.forEach(i=>{const o=i?.data||i?.content||[];Array.isArray(o)&&this.activeAssignments.push(...o)}),this.activeAssignments.sort((i,o)=>new Date(o.updatedAt).getTime()-new Date(i.updatedAt).getTime()),this.calculateStats(),this.applyFilter(),this.lastRefresh=new Date,this.isLoading=!1},error:()=>{this.isLoading=!1,this.snackBar.open("Failed to load active deliveries","Close",{duration:3e3})}})}calculateStats(){this.stats.totalActive=this.activeAssignments.length,this.stats.inTransit=this.activeAssignments.filter(e=>"IN_TRANSIT"===e.status).length,this.stats.pickedUp=this.activeAssignments.filter(e=>"PICKED_UP"===e.status).length,this.stats.assigned=this.activeAssignments.filter(e=>"ASSIGNED"===e.status||"ACCEPTED"===e.status).length,this.stats.deliveredToday=0}applyFilter(){this.filteredAssignments="ALL"===this.selectedStatus?[...this.activeAssignments]:this.activeAssignments.filter(e=>e.status===this.selectedStatus)}filterByStatus(e){this.selectedStatus=e,this.applyFilter()}trackDelivery(e){this.router.navigate(["/delivery/tracking",e.id])}refreshData(){this.isLoading=!0,this.loadActiveDeliveries(),this.snackBar.open("Refreshing tracking data...","Close",{duration:1500})}getStatusColor(e){switch(e){case"ASSIGNED":return"#ff9800";case"ACCEPTED":return"#2196f3";case"PICKED_UP":return"#9c27b0";case"IN_TRANSIT":return"#4caf50";case"DELIVERED":return"#00bcd4";default:return"#757575"}}getStatusIcon(e){switch(e){case"ASSIGNED":return"assignment";case"ACCEPTED":return"check_circle";case"PICKED_UP":return"shopping_cart";case"IN_TRANSIT":return"local_shipping";case"DELIVERED":return"check_circle_outline";default:return"help"}}formatStatus(e){return e.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())}formatTimeAgo(e){if(!e)return"N/A";const n=new Date,i=new Date(e),o=n.getTime()-i.getTime(),c=Math.floor(o/6e4);if(c<1)return"Just now";if(c<60)return`${c}m ago`;const m=Math.floor(c/60);return m<24?`${m}h ago`:i.toLocaleDateString("en-IN",{day:"2-digit",month:"short"})}formatTime(e){return e?new Date(e).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}):"--:--"}callPartner(e,n){n.stopPropagation(),e.partnerPhone&&window.open(`tel:${e.partnerPhone}`)}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(Z.N),t.rXU(Ct),t.rXU(G.Ix),t.rXU($.UG))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-admin-tracking"]],decls:58,vars:9,consts:[[1,"admin-tracking-container"],[1,"page-header"],[1,"header-left"],[1,"header-icon"],[1,"subtitle"],[1,"header-right"],[1,"last-refresh"],["mat-raised-button","","color","primary",3,"click"],[1,"stats-grid"],[1,"stat-card","total",3,"click"],[1,"stat-value"],[1,"stat-label"],[1,"stat-card","in-transit",3,"click"],[1,"stat-card","picked-up",3,"click"],[1,"stat-card","assigned",3,"click"],[1,"stat-card","delivered",3,"click"],[1,"filter-bar"],[3,"selected","click",4,"ngFor","ngForOf"],["class","loading-state",4,"ngIf"],["class","deliveries-list",4,"ngIf"],[3,"selected","click"],["matChipAvatar",""],[1,"loading-state"],["diameter","40"],[1,"deliveries-list"],["class","empty-state",4,"ngIf"],["class","delivery-card",3,"click",4,"ngFor","ngForOf"],[1,"empty-state"],[4,"ngIf"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary",3,"click"],[1,"delivery-card",3,"click"],[1,"card-status-bar"],[1,"card-content"],[1,"card-top"],[1,"status-badge"],[1,"time-info"],[1,"card-body"],[1,"info-row"],[1,"row-icon"],[1,"info-label"],[1,"info-value"],["class","info-row",4,"ngIf"],[1,"card-actions"],["mat-icon-button","","color","primary","matTooltip","Track on Map",3,"click"],["mat-icon-button","","matTooltip","Call Partner",3,"click",4,"ngIf"],[1,"info-value","address"],["mat-icon-button","","matTooltip","Call Partner",3,"click"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon",3),t.EFF(4,"gps_fixed"),t.k0s(),t.j41(5,"div")(6,"h1"),t.EFF(7,"Live Tracking Dashboard"),t.k0s(),t.j41(8,"p",4),t.EFF(9,"Monitor active deliveries in real-time"),t.k0s()()(),t.j41(10,"div",5)(11,"span",6),t.EFF(12),t.k0s(),t.j41(13,"button",7),t.bIt("click",function(){return i.refreshData()}),t.j41(14,"mat-icon"),t.EFF(15,"refresh"),t.k0s(),t.EFF(16," Refresh "),t.k0s()()(),t.j41(17,"div",8)(18,"div",9),t.bIt("click",function(){return i.filterByStatus("ALL")}),t.j41(19,"mat-icon"),t.EFF(20,"delivery_dining"),t.k0s(),t.j41(21,"div",10),t.EFF(22),t.k0s(),t.j41(23,"div",11),t.EFF(24,"Active Deliveries"),t.k0s()(),t.j41(25,"div",12),t.bIt("click",function(){return i.filterByStatus("IN_TRANSIT")}),t.j41(26,"mat-icon"),t.EFF(27,"local_shipping"),t.k0s(),t.j41(28,"div",10),t.EFF(29),t.k0s(),t.j41(30,"div",11),t.EFF(31,"In Transit"),t.k0s()(),t.j41(32,"div",13),t.bIt("click",function(){return i.filterByStatus("PICKED_UP")}),t.j41(33,"mat-icon"),t.EFF(34,"shopping_cart"),t.k0s(),t.j41(35,"div",10),t.EFF(36),t.k0s(),t.j41(37,"div",11),t.EFF(38,"Picked Up"),t.k0s()(),t.j41(39,"div",14),t.bIt("click",function(){return i.filterByStatus("ASSIGNED")}),t.j41(40,"mat-icon"),t.EFF(41,"assignment"),t.k0s(),t.j41(42,"div",10),t.EFF(43),t.k0s(),t.j41(44,"div",11),t.EFF(45,"Assigned / Accepted"),t.k0s()(),t.j41(46,"div",15),t.bIt("click",function(){return i.filterByStatus("ALL")}),t.j41(47,"mat-icon"),t.EFF(48,"check_circle"),t.k0s(),t.j41(49,"div",10),t.EFF(50),t.k0s(),t.j41(51,"div",11),t.EFF(52,"Delivered Today"),t.k0s()()(),t.j41(53,"div",16)(54,"mat-chip-listbox"),t.DNE(55,xn,4,3,"mat-chip-option",17),t.k0s()(),t.DNE(56,yn,4,0,"div",18),t.DNE(57,Ln,3,2,"div",19),t.k0s()),2&n&&(t.R7$(12),t.SpI("Last updated: ",i.formatTime(i.lastRefresh),""),t.R7$(10),t.JRh(i.stats.totalActive),t.R7$(7),t.JRh(i.stats.inTransit),t.R7$(7),t.JRh(i.stats.pickedUp),t.R7$(7),t.JRh(i.stats.assigned),t.R7$(7),t.JRh(i.stats.deliveredToday),t.R7$(5),t.Y8G("ngForOf",i.statusFilters),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading))},dependencies:[a.Sq,a.bT,x.$z,x.iY,w.An,T.yZ,T.uI,T.gq,N.LG,ct.oV],styles:[".admin-tracking-container[_ngcontent-%COMP%]{padding:20px 24px;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#4caf50}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:22px;font-weight:600;color:#333;margin:0}.page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:13px;color:#888;margin:2px 0 0}.page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .last-refresh[_ngcontent-%COMP%]{font-size:12px;color:#999}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{text-align:center;border-radius:12px;padding:20px 12px;cursor:pointer;transition:transform .2s,box-shadow .2s;box-shadow:0 2px 8px #00000014}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 16px #0000001f}.stat-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px;margin-bottom:8px}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;line-height:1;margin-bottom:4px}.stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.stat-card.total[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e3f2fd,#bbdefb)}.stat-card.total[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1565c0}.stat-card.total[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#1565c0}.stat-card.total[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#1976d2}.stat-card.in-transit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f5e9,#c8e6c9)}.stat-card.in-transit[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2e7d32}.stat-card.in-transit[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#2e7d32}.stat-card.in-transit[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#388e3c}.stat-card.picked-up[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f3e5f5,#e1bee7)}.stat-card.picked-up[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#6a1b9a}.stat-card.picked-up[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#6a1b9a}.stat-card.picked-up[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#7b1fa2}.stat-card.assigned[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3e0,#ffe0b2)}.stat-card.assigned[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#e65100}.stat-card.assigned[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#e65100}.stat-card.assigned[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#f57c00}.stat-card.delivered[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e0f7fa,#b2ebf2)}.stat-card.delivered[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#00838f}.stat-card.delivered[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{color:#00838f}.stat-card.delivered[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#0097a7}.filter-bar[_ngcontent-%COMP%]{margin-bottom:20px}.filter-bar[_ngcontent-%COMP%]   mat-chip-listbox[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;gap:16px}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888;font-size:14px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;background:white;border-radius:12px;box-shadow:0 2px 8px #0000000f}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;color:#555;margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#999;font-size:14px;margin:0 0 16px}.deliveries-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.delivery-card[_ngcontent-%COMP%]{background:white;border-radius:10px;box-shadow:0 2px 8px #0000000f;overflow:hidden;cursor:pointer;transition:box-shadow .2s,transform .15s;display:flex}.delivery-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #0000001f;transform:translate(4px)}.delivery-card[_ngcontent-%COMP%]   .card-status-bar[_ngcontent-%COMP%]{width:5px;flex-shrink:0}.delivery-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{flex:1;padding:16px 20px;display:flex;flex-direction:column;gap:12px}.card-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card-top[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:4px 12px;border-radius:16px;color:#fff;font-size:12px;font-weight:600}.card-top[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.card-top[_ngcontent-%COMP%]   .time-info[_ngcontent-%COMP%]{font-size:12px;color:#999}.card-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.info-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px}.info-row[_ngcontent-%COMP%]   .row-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#aaa;flex-shrink:0}.info-row[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{color:#888;font-weight:500;min-width:70px;flex-shrink:0}.info-row[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{color:#333;font-weight:400}.info-row[_ngcontent-%COMP%]   .info-value.address[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:400px}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:4px;margin-top:4px;border-top:1px solid #f5f5f5;padding-top:8px}@media (max-width: 1024px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.admin-tracking-container[_ngcontent-%COMP%]{padding:12px 16px}.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.info-row[_ngcontent-%COMP%]   .info-value.address[_ngcontent-%COMP%]{max-width:200px}.delivery-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:12px 16px}}@media (max-width: 480px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.stat-card[_ngcontent-%COMP%]{padding:14px 8px}.stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px}}"]})}}return r})();function Bn(r,s){if(1&r&&(t.j41(0,"div",6),t.nrm(1,"mat-spinner",7),t.j41(2,"p"),t.EFF(3),t.k0s()()),2&r){const e=t.XpG();t.R7$(3),t.SpI("Loading your ",e.isHistoryMode?"deliveries":"orders","...")}}function Vn(r,s){if(1&r&&(t.j41(0,"div",8)(1,"mat-icon"),t.EFF(2),t.k0s(),t.j41(3,"h3"),t.EFF(4),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s()()),2&r){const e=t.XpG();t.R7$(2),t.JRh(e.isHistoryMode?"history":"assignment"),t.R7$(2),t.JRh(e.isHistoryMode?"No Delivery History":"No Active Orders"),t.R7$(2),t.JRh(e.isHistoryMode?"Your completed deliveries will appear here":'Check "Available Orders" for new deliveries')}}function Un(r,s){if(1&r&&(t.j41(0,"div",42)(1,"div",33)(2,"mat-icon"),t.EFF(3,"store"),t.k0s(),t.j41(4,"span"),t.EFF(5,"Shop"),t.k0s()(),t.j41(6,"div",43)(7,"strong"),t.EFF(8),t.k0s(),t.j41(9,"p",44),t.EFF(10),t.k0s()()()),2&r){const e=t.XpG(2).$implicit;t.R7$(8),t.JRh(e.shopName),t.R7$(2),t.JRh(e.shopAddress)}}function Yn(r,s){if(1&r&&(t.j41(0,"div",42)(1,"div",33)(2,"mat-icon"),t.EFF(3,"person"),t.k0s(),t.j41(4,"span"),t.EFF(5,"Customer"),t.k0s()(),t.j41(6,"div",43)(7,"strong"),t.EFF(8),t.k0s(),t.j41(9,"p",44),t.EFF(10),t.k0s()()()),2&r){const e=t.XpG(2).$implicit;t.R7$(8),t.JRh(e.customerName),t.R7$(2),t.JRh(e.deliveryAddress)}}function zn(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",42)(1,"div",33)(2,"mat-icon"),t.EFF(3,"store"),t.k0s(),t.j41(4,"span"),t.EFF(5,"Pickup from"),t.k0s()(),t.j41(6,"div",43)(7,"strong"),t.EFF(8),t.k0s(),t.j41(9,"p",44),t.EFF(10),t.k0s(),t.j41(11,"button",45),t.bIt("click",function(i){t.eBV(e);const o=t.XpG(2).$implicit;return t.XpG(2).navigateToShop(o),t.Njj(i.stopPropagation())}),t.j41(12,"mat-icon"),t.EFF(13,"navigation"),t.k0s(),t.EFF(14," Navigate to Shop "),t.k0s()()()}if(2&r){const e=t.XpG(2).$implicit;t.R7$(8),t.JRh(e.shopName),t.R7$(2),t.JRh(e.shopAddress)}}function Xn(r,s){if(1&r&&(t.j41(0,"div",46)(1,"div",47),t.EFF(2,"Pickup OTP"),t.k0s(),t.j41(3,"div",48),t.EFF(4),t.k0s(),t.j41(5,"div",49),t.EFF(6,"Show this to shop owner"),t.k0s()()),2&r){const e=t.XpG(2).$implicit;t.R7$(4),t.JRh(e.pickupOtp)}}function Hn(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",42)(1,"div",33)(2,"mat-icon"),t.EFF(3,"person_pin"),t.k0s(),t.j41(4,"span"),t.EFF(5,"Deliver to"),t.k0s()(),t.j41(6,"div",43)(7,"strong"),t.EFF(8),t.k0s(),t.j41(9,"p",44),t.EFF(10),t.k0s(),t.j41(11,"div",50)(12,"button",45),t.bIt("click",function(i){t.eBV(e);const o=t.XpG(2).$implicit;return t.XpG(2).navigateToCustomer(o),t.Njj(i.stopPropagation())}),t.j41(13,"mat-icon"),t.EFF(14,"navigation"),t.k0s(),t.EFF(15," Navigate "),t.k0s(),t.j41(16,"button",51),t.bIt("click",function(i){t.eBV(e);const o=t.XpG(2).$implicit;return t.XpG(2).callCustomer(o.customerPhone),t.Njj(i.stopPropagation())}),t.j41(17,"mat-icon"),t.EFF(18,"phone"),t.k0s(),t.EFF(19," Call "),t.k0s()()()()}if(2&r){const e=t.XpG(2).$implicit;t.R7$(8),t.JRh(e.customerName),t.R7$(2),t.JRh(e.deliveryAddress)}}function Jn(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",42)(1,"div",33)(2,"mat-icon"),t.EFF(3,"person"),t.k0s(),t.j41(4,"span"),t.EFF(5,"Customer"),t.k0s()(),t.j41(6,"div",43)(7,"strong"),t.EFF(8),t.k0s(),t.j41(9,"p",44),t.EFF(10),t.k0s(),t.j41(11,"button",52),t.bIt("click",function(i){t.eBV(e);const o=t.XpG(2).$implicit;return t.XpG(2).callCustomer(o.customerPhone),t.Njj(i.stopPropagation())}),t.j41(12,"mat-icon"),t.EFF(13,"phone"),t.k0s(),t.EFF(14," Call Customer "),t.k0s()()()}if(2&r){const e=t.XpG(2).$implicit;t.R7$(8),t.JRh(e.customerName),t.R7$(2),t.JRh(e.deliveryAddress)}}function Kn(r,s){if(1&r&&(t.j41(0,"div",59),t.nrm(1,"img",60),t.k0s()),2&r){const e=t.XpG().$implicit;t.R7$(1),t.Y8G("src",e.productImageUrl,t.B4B)("alt",e.productName)}}function Wn(r,s){if(1&r&&(t.j41(0,"div",53),t.DNE(1,Kn,2,2,"div",54),t.j41(2,"div",55)(3,"span",56),t.EFF(4),t.k0s(),t.j41(5,"span",57),t.EFF(6),t.k0s()(),t.j41(7,"div",58),t.EFF(8),t.k0s()()),2&r){const e=s.$implicit;t.R7$(1),t.Y8G("ngIf",e.productImageUrl),t.R7$(3),t.JRh(e.productName),t.R7$(2),t.SpI("x",e.quantity,""),t.R7$(2),t.SpI("\u20b9",e.totalPrice,"")}}function Qn(r,s){1&r&&(t.j41(0,"div",61)(1,"span"),t.EFF(2,"No item details available"),t.k0s()())}function qn(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",66),t.bIt("click",function(i){t.eBV(e);const o=t.XpG(3).$implicit;return t.XpG(2).markPickedUp(o),t.Njj(i.stopPropagation())}),t.j41(1,"mat-icon"),t.EFF(2,"shopping_bag"),t.k0s(),t.EFF(3),t.k0s()}if(2&r){const e=t.XpG(3).$implicit,n=t.XpG(2);t.Y8G("disabled",n.processingOrderId===e.id),t.R7$(3),t.SpI(" ",n.processingOrderId===e.id?"Processing...":"Mark Picked Up"," ")}}function Zn(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",67),t.bIt("click",function(i){t.eBV(e);const o=t.XpG(3).$implicit;return t.XpG(2).markDelivered(o),t.Njj(i.stopPropagation())}),t.j41(1,"mat-icon"),t.EFF(2,"check_circle"),t.k0s(),t.EFF(3),t.k0s()}if(2&r){const e=t.XpG(3).$implicit,n=t.XpG(2);t.Y8G("disabled",n.processingOrderId===e.id),t.R7$(3),t.SpI(" ",n.processingOrderId===e.id?"Processing...":"Mark Delivered"," ")}}function ti(r,s){if(1&r){const e=t.RV6();t.j41(0,"button",68),t.bIt("click",function(i){t.eBV(e);const o=t.XpG(3).$implicit;return t.XpG(2).navigateToShop(o),t.Njj(i.stopPropagation())}),t.j41(1,"mat-icon"),t.EFF(2,"undo"),t.k0s(),t.EFF(3," Return to Shop "),t.k0s()}}function ei(r,s){if(1&r&&(t.j41(0,"div",62),t.DNE(1,qn,4,2,"button",63),t.DNE(2,Zn,4,2,"button",64),t.DNE(3,ti,4,0,"button",65),t.k0s()),2&r){const e=t.XpG(2).$implicit;t.R7$(1),t.Y8G("ngIf","accepted"===e.status),t.R7$(1),t.Y8G("ngIf","picked_up"===e.status||"in_transit"===e.status),t.R7$(1),t.Y8G("ngIf","cancelled"===e.status)}}function ni(r,s){if(1&r&&(t.j41(0,"div",27)(1,"div",28)(2,"mat-icon"),t.EFF(3),t.k0s(),t.j41(4,"span",29),t.EFF(5),t.k0s()(),t.DNE(6,Un,11,2,"div",30),t.DNE(7,Yn,11,2,"div",30),t.DNE(8,zn,15,2,"div",30),t.DNE(9,Xn,7,1,"div",31),t.DNE(10,Hn,20,2,"div",30),t.DNE(11,Jn,15,2,"div",30),t.j41(12,"div",32)(13,"div",33)(14,"mat-icon"),t.EFF(15,"inventory_2"),t.k0s(),t.j41(16,"span"),t.EFF(17),t.k0s()(),t.j41(18,"div",34),t.DNE(19,Wn,9,4,"div",35),t.DNE(20,Qn,3,0,"div",36),t.k0s()(),t.j41(21,"div",37)(22,"div",38)(23,"span"),t.EFF(24,"Order Total"),t.k0s(),t.j41(25,"strong"),t.EFF(26),t.k0s()(),t.j41(27,"div",38)(28,"span"),t.EFF(29,"Delivery Fee"),t.k0s(),t.j41(30,"span"),t.EFF(31),t.k0s()(),t.j41(32,"div",39)(33,"mat-icon"),t.EFF(34,"payment"),t.k0s(),t.j41(35,"span"),t.EFF(36),t.k0s(),t.j41(37,"mat-chip",40),t.EFF(38),t.k0s()()(),t.DNE(39,ei,4,3,"div",41),t.k0s()),2&r){const e=t.XpG().$implicit,n=t.XpG(2);t.Y8G("@.disabled",!0),t.R7$(1),t.Y8G("ngClass",n.getStatusClass(e.status)),t.R7$(2),t.JRh(n.getStatusIcon(e.status)),t.R7$(2),t.JRh(n.getStatusLabel(e.status)),t.R7$(1),t.Y8G("ngIf",n.isHistoryMode),t.R7$(1),t.Y8G("ngIf",n.isHistoryMode),t.R7$(1),t.Y8G("ngIf",!n.isHistoryMode&&"accepted"===e.status),t.R7$(1),t.Y8G("ngIf",!n.isHistoryMode&&"accepted"===e.status&&e.pickupOtp),t.R7$(1),t.Y8G("ngIf",!n.isHistoryMode&&("picked_up"===e.status||"in_transit"===e.status)),t.R7$(1),t.Y8G("ngIf",!n.isHistoryMode&&"accepted"===e.status),t.R7$(6),t.SpI("Items (",(null==e.items?null:e.items.length)||0,")"),t.R7$(2),t.Y8G("ngForOf",e.items),t.R7$(1),t.Y8G("ngIf",!e.items||0===e.items.length),t.R7$(6),t.SpI("\u20b9",e.totalAmount,""),t.R7$(5),t.SpI("\u20b9",e.deliveryFee,""),t.R7$(5),t.JRh(n.getPaymentLabel(e.paymentMethod)),t.R7$(1),t.Y8G("ngClass","PAID"===e.paymentStatus?"paid":"pending"),t.R7$(1),t.SpI(" ",e.paymentStatus," "),t.R7$(1),t.Y8G("ngIf",!n.isHistoryMode)}}function ii(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",11)(1,"div",12),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.selectOrder(o.id))}),t.nrm(2,"div",13),t.j41(3,"div",14)(4,"div",15)(5,"span",16),t.EFF(6),t.k0s(),t.j41(7,"mat-chip",17),t.EFF(8),t.nI1(9,"titlecase"),t.k0s()(),t.j41(10,"div",18)(11,"span",19),t.EFF(12),t.k0s(),t.j41(13,"span",20),t.EFF(14,"\u2192"),t.k0s(),t.j41(15,"span",21),t.EFF(16),t.k0s()(),t.j41(17,"div",22)(18,"span",23),t.EFF(19),t.k0s(),t.j41(20,"span",24),t.EFF(21),t.k0s()()(),t.j41(22,"mat-icon",25),t.EFF(23),t.k0s()(),t.DNE(24,ni,40,19,"div",26),t.k0s()}if(2&r){const e=s.$implicit,n=t.XpG(2);t.R7$(1),t.Y8G("ngClass",n.getStatusClass(e.status)),t.R7$(1),t.Y8G("ngClass",n.getStatusClass(e.status)),t.R7$(4),t.JRh(e.orderNumber),t.R7$(1),t.Y8G("ngClass",n.getStatusClass(e.status)),t.R7$(1),t.SpI(" ",t.bMT(9,11,e.status)," "),t.R7$(4),t.JRh(e.shopName),t.R7$(4),t.JRh(e.customerName),t.R7$(3),t.SpI("",(null==e.items?null:e.items.length)||0," items"),t.R7$(2),t.SpI("\u20b9",e.totalAmount,""),t.R7$(2),t.JRh(n.isSelected(e.id)?"expand_less":"expand_more"),t.R7$(1),t.Y8G("ngIf",n.isSelected(e.id))}}function ri(r,s){if(1&r&&(t.j41(0,"div",9),t.DNE(1,ii,25,13,"div",10),t.k0s()),2&r){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",e.orders)}}let kt=(()=>{class r{constructor(e,n,i,o){this.orderAssignmentService=e,this.authService=n,this.snackBar=i,this.router=o,this.orders=[],this.isLoading=!0,this.partnerId=null,this.processingOrderId=null,this.selectedOrderId=null,this.isHistoryMode=!1,this.pageTitle="My Orders",this.destroy$=new U.B}ngOnInit(){this.isHistoryMode=this.router.url.includes("/deliveries"),this.pageTitle=this.isHistoryMode?"My Deliveries":"My Orders";const e=this.authService.getCurrentUser();e?(this.partnerId=e.id,this.loadOrders(),this.isHistoryMode||(0,Y.Y)(3e4).pipe((0,u.Q)(this.destroy$)).subscribe(()=>this.loadOrders())):this.isLoading=!1}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadOrders(){this.partnerId&&(this.isHistoryMode?this.orderAssignmentService.getDeliveryHistory(this.partnerId):this.orderAssignmentService.getActiveOrdersForPartner(this.partnerId)).subscribe({next:n=>{this.orders=n.success&&n.orders?n.orders.map(i=>({...i,items:i.items||i.orderItems||[]})):[],this.isLoading=!1},error:n=>{console.error("Error loading orders:",n),this.isLoading=!1}})}getStatusLabel(e){return{accepted:"Accepted - Go to Shop",picked_up:"Picked Up - Deliver Now",in_transit:"On the Way",delivered:"Delivered",cancelled:"Cancelled - Return Items",returning_to_shop:"Returning to Shop",returned_to_shop:"Returned"}[e?.toLowerCase()]||e}getStatusClass(e){return{accepted:"status-accepted",picked_up:"status-pickedup",in_transit:"status-transit",delivered:"status-delivered",cancelled:"status-cancelled",returning_to_shop:"status-returning",returned_to_shop:"status-returned"}[e?.toLowerCase()]||"status-default"}getStatusIcon(e){return{accepted:"store",picked_up:"local_shipping",in_transit:"delivery_dining",delivered:"check_circle",cancelled:"cancel",returning_to_shop:"undo",returned_to_shop:"assignment_return"}[e?.toLowerCase()]||"assignment"}navigateToShop(e){e.shopLatitude&&e.shopLongitude?window.open(`https://www.google.com/maps/dir/?api=1&destination=${e.shopLatitude},${e.shopLongitude}`,"_blank"):e.shopAddress&&window.open(`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(e.shopAddress)}`,"_blank")}navigateToCustomer(e){e.customerLatitude&&e.customerLongitude?window.open(`https://www.google.com/maps/dir/?api=1&destination=${e.customerLatitude},${e.customerLongitude}`,"_blank"):e.deliveryAddress&&window.open(`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(e.deliveryAddress)}`,"_blank")}callCustomer(e){window.open(`tel:${e}`,"_self")}markPickedUp(e){this.partnerId&&(this.processingOrderId=e.id,this.orderAssignmentService.markPickedUp(Number(e.id),this.partnerId).pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{n.success?(this.snackBar.open("Marked as picked up!","OK",{duration:3e3}),this.loadOrders()):this.snackBar.open(n.message||"Failed","Close",{duration:3e3}),this.processingOrderId=null},error:n=>{console.error("Error:",n),this.snackBar.open("Failed to update status","Close",{duration:3e3}),this.processingOrderId=null}}))}markDelivered(e){this.partnerId&&(this.processingOrderId=e.id,this.orderAssignmentService.markDelivered(Number(e.id),this.partnerId).pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{n.success?(this.snackBar.open("Delivery completed!","OK",{duration:3e3}),this.loadOrders()):this.snackBar.open(n.message||"Failed","Close",{duration:3e3}),this.processingOrderId=null},error:n=>{console.error("Error:",n),this.snackBar.open("Failed to update status","Close",{duration:3e3}),this.processingOrderId=null}}))}selectOrder(e){this.selectedOrderId=this.selectedOrderId===e?null:e}isSelected(e){return this.selectedOrderId===e}getPaymentLabel(e){return{COD:"Cash on Delivery",CASH_ON_DELIVERY:"Cash on Delivery",ONLINE:"Paid Online",UPI:"Paid via UPI",CARD:"Paid via Card"}[e]||e}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(Z.N),t.rXU(ut.u),t.rXU($.UG),t.rXU(G.Ix))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-partner-orders"]],decls:9,vars:7,consts:[[1,"partner-orders-container"],[1,"page-header"],[1,"subtitle"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","orders-list",4,"ngIf"],[1,"loading-container"],["diameter","40"],[1,"empty-state"],[1,"orders-list"],["class","order-wrapper",4,"ngFor","ngForOf"],[1,"order-wrapper"],[1,"order-list-item",3,"ngClass","click"],[1,"list-status-dot",3,"ngClass"],[1,"list-info"],[1,"list-top"],[1,"list-order-num"],[1,"list-status-chip",3,"ngClass"],[1,"list-middle"],[1,"list-shop"],[1,"list-arrow"],[1,"list-customer"],[1,"list-bottom"],[1,"list-items-count"],[1,"list-amount"],[1,"list-expand-icon"],["class","order-details",4,"ngIf"],[1,"order-details"],[1,"status-banner",3,"ngClass"],[1,"status-text"],["class","info-section",4,"ngIf"],["class","otp-section",4,"ngIf"],[1,"items-section"],[1,"section-header"],[1,"items-list"],["class","item-row",4,"ngFor","ngForOf"],["class","no-items",4,"ngIf"],[1,"summary-section"],[1,"summary-row"],[1,"summary-row","payment"],[1,"payment-status",3,"ngClass"],["class","actions-section",4,"ngIf"],[1,"info-section"],[1,"section-body"],[1,"address"],["mat-raised-button","","color","primary",1,"nav-btn",3,"click"],[1,"otp-section"],[1,"otp-label"],[1,"otp-code"],[1,"otp-hint"],[1,"action-row"],["mat-stroked-button","",1,"call-btn",3,"click"],["mat-stroked-button","",1,"call-btn",2,"margin-top","8px",3,"click"],[1,"item-row"],["class","item-img",4,"ngIf"],[1,"item-details"],[1,"item-name"],[1,"item-qty"],[1,"item-price"],[1,"item-img"],["onerror","this.style.display='none'",3,"src","alt"],[1,"no-items"],[1,"actions-section"],["mat-raised-button","","color","primary","class","action-btn",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","accent","class","action-btn",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","warn","class","action-btn",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",1,"action-btn",3,"disabled","click"],["mat-raised-button","","color","accent",1,"action-btn",3,"disabled","click"],["mat-raised-button","","color","warn",1,"action-btn",3,"click"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3),t.k0s(),t.j41(4,"p",2),t.EFF(5),t.k0s()(),t.DNE(6,Bn,4,1,"div",3),t.DNE(7,Vn,7,3,"div",4),t.DNE(8,ri,2,1,"div",5),t.k0s()),2&n&&(t.R7$(3),t.JRh(i.pageTitle),t.R7$(2),t.E5c("",i.orders.length," ",i.isHistoryMode?"delivery":"active order","",1!==i.orders.length?"s":"",""),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading&&0===i.orders.length),t.R7$(1),t.Y8G("ngIf",!i.isLoading))},dependencies:[a.YU,a.Sq,a.bT,x.$z,w.An,T.Jl,N.LG,a.PV],styles:[".partner-orders-container[_ngcontent-%COMP%]{padding:16px;max-width:800px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#333}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:60px 20px;color:#666}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#999}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#666}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.order-wrapper[_ngcontent-%COMP%]{margin-bottom:8px;border-radius:10px;overflow:hidden;box-shadow:0 1px 4px #00000014;background:#fff}.order-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 14px;cursor:pointer;gap:10px;transition:background .15s;border-left:4px solid #667eea}.order-list-item[_ngcontent-%COMP%]:hover{background:#f8f9ff}.order-list-item[_ngcontent-%COMP%]:active{background:#f0f1fa}.order-list-item.status-accepted[_ngcontent-%COMP%]{border-left-color:#2196f3}.order-list-item.status-pickedup[_ngcontent-%COMP%]{border-left-color:#ff9800}.order-list-item.status-transit[_ngcontent-%COMP%]{border-left-color:#9c27b0}.order-list-item.status-delivered[_ngcontent-%COMP%]{border-left-color:#4caf50}.order-list-item.status-cancelled[_ngcontent-%COMP%]{border-left-color:#f44336}.order-list-item.status-returning[_ngcontent-%COMP%]{border-left-color:#ff5722}.order-list-item.status-returned[_ngcontent-%COMP%]{border-left-color:#795548}.list-status-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;flex-shrink:0;background:#667eea}.list-status-dot.status-accepted[_ngcontent-%COMP%]{background:#2196F3}.list-status-dot.status-pickedup[_ngcontent-%COMP%]{background:#FF9800}.list-status-dot.status-transit[_ngcontent-%COMP%]{background:#9C27B0}.list-status-dot.status-delivered[_ngcontent-%COMP%]{background:#4CAF50}.list-status-dot.status-cancelled[_ngcontent-%COMP%]{background:#f44336}.list-status-dot.status-returning[_ngcontent-%COMP%]{background:#FF5722}.list-status-dot.status-returned[_ngcontent-%COMP%]{background:#795548}.list-info[_ngcontent-%COMP%]{flex:1;min-width:0}.list-top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:3px}.list-order-num[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333}.list-status-chip[_ngcontent-%COMP%]{font-size:11px!important;min-height:20px!important;padding:0 8px!important;line-height:20px!important}.list-status-chip.status-accepted[_ngcontent-%COMP%]{background:#E3F2FD!important;color:#1565c0!important}.list-status-chip.status-pickedup[_ngcontent-%COMP%]{background:#FFF3E0!important;color:#e65100!important}.list-status-chip.status-transit[_ngcontent-%COMP%]{background:#F3E5F5!important;color:#7b1fa2!important}.list-status-chip.status-delivered[_ngcontent-%COMP%]{background:#E8F5E9!important;color:#2e7d32!important}.list-status-chip.status-cancelled[_ngcontent-%COMP%]{background:#FFEBEE!important;color:#c62828!important}.list-status-chip.status-returning[_ngcontent-%COMP%]{background:#FBE9E7!important;color:#d84315!important}.list-status-chip.status-returned[_ngcontent-%COMP%]{background:#EFEBE9!important;color:#4e342e!important}.list-middle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:13px;color:#555;margin-bottom:2px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.list-shop[_ngcontent-%COMP%], .list-customer[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.list-arrow[_ngcontent-%COMP%]{color:#999;flex-shrink:0}.list-bottom[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;font-size:12px;color:#999}.list-items-count[_ngcontent-%COMP%]{color:#888}.list-amount[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:13px}.list-expand-icon[_ngcontent-%COMP%]{color:#bbb;flex-shrink:0}.order-details[_ngcontent-%COMP%]{border-top:1px solid #f0f0f0}.status-banner[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;color:#fff;font-weight:500;gap:8px}.status-banner.status-accepted[_ngcontent-%COMP%]{background:#2196F3}.status-banner.status-pickedup[_ngcontent-%COMP%]{background:#FF9800}.status-banner.status-transit[_ngcontent-%COMP%]{background:#9C27B0}.status-banner.status-delivered[_ngcontent-%COMP%]{background:#4CAF50}.status-banner.status-cancelled[_ngcontent-%COMP%]{background:#f44336}.status-banner.status-returning[_ngcontent-%COMP%]{background:#FF5722}.status-banner.status-returned[_ngcontent-%COMP%]{background:#795548}.status-banner.status-default[_ngcontent-%COMP%]{background:#667eea}.status-banner[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.status-banner[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{flex:1;font-size:15px}.info-section[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #f0f0f0}.info-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:12px;color:#999;text-transform:uppercase;letter-spacing:.5px;margin-bottom:8px}.info-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.info-section[_ngcontent-%COMP%]   .section-body[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:15px;color:#333}.info-section[_ngcontent-%COMP%]   .section-body[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{margin:4px 0 8px;font-size:13px;color:#666;line-height:1.4}.action-row[_ngcontent-%COMP%]{display:flex;gap:8px}.nav-btn[_ngcontent-%COMP%], .call-btn[_ngcontent-%COMP%]{font-size:13px!important;height:36px!important}.nav-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .call-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;margin-right:4px}.otp-section[_ngcontent-%COMP%]{padding:16px;text-align:center;background:#FFF3E0;border-bottom:1px solid #f0f0f0}.otp-section[_ngcontent-%COMP%]   .otp-label[_ngcontent-%COMP%]{font-size:12px;color:#e65100;text-transform:uppercase;letter-spacing:1px;margin-bottom:4px}.otp-section[_ngcontent-%COMP%]   .otp-code[_ngcontent-%COMP%]{font-size:32px;font-weight:700;letter-spacing:8px;color:#e65100;font-family:Courier New,monospace}.otp-section[_ngcontent-%COMP%]   .otp-hint[_ngcontent-%COMP%]{font-size:12px;color:#999;margin-top:4px}.items-section[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #f0f0f0}.items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:12px;color:#999;text-transform:uppercase;letter-spacing:.5px;margin-bottom:8px}.items-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:6px 0;gap:10px;border-bottom:1px solid #f8f8f8}.items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.items-list[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:6px;overflow:hidden;flex-shrink:0;background:#f5f5f5}.items-list[_ngcontent-%COMP%]   .item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.items-list[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:8px}.items-list[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-size:14px;color:#333}.items-list[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-qty[_ngcontent-%COMP%]{font-size:13px;color:#999;background:#f5f5f5;padding:1px 6px;border-radius:4px}.items-list[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333;white-space:nowrap}.items-list[_ngcontent-%COMP%]   .no-items[_ngcontent-%COMP%]{padding:8px 0;color:#999;font-size:13px}.summary-section[_ngcontent-%COMP%]{padding:12px 16px;background:#fafafa;border-bottom:1px solid #f0f0f0}.summary-section[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:4px 0;font-size:14px;color:#666}.summary-section[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333;font-size:16px}.summary-section[_ngcontent-%COMP%]   .summary-row.payment[_ngcontent-%COMP%]{gap:6px;margin-top:4px;padding-top:8px;border-top:1px solid #eee}.summary-section[_ngcontent-%COMP%]   .summary-row.payment[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#999}.summary-section[_ngcontent-%COMP%]   .summary-row.payment[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.summary-section[_ngcontent-%COMP%]   .payment-status[_ngcontent-%COMP%]{font-size:11px!important;min-height:22px!important;padding:0 8px!important}.summary-section[_ngcontent-%COMP%]   .payment-status.paid[_ngcontent-%COMP%]{background:#E8F5E9!important;color:#2e7d32!important}.summary-section[_ngcontent-%COMP%]   .payment-status.pending[_ngcontent-%COMP%]{background:#FFF3E0!important;color:#e65100!important}.actions-section[_ngcontent-%COMP%]{padding:16px;display:flex;gap:12px}.actions-section[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{flex:1;height:48px;font-size:15px;font-weight:500;border-radius:8px}.actions-section[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:6px}"]})}}return r})(),ai=(()=>{class r{constructor(e){this.http=e,this.apiUrl=`${f.c.apiUrl}/delivery/analytics`}getKeyMetrics(e,n){const i=(new M.Nl).set("startDate",e.toISOString()).set("endDate",n.toISOString());return this.http.get(`${this.apiUrl}/metrics`,{params:i})}getDeliveryTrends(e,n,i="day"){const o=(new M.Nl).set("startDate",e.toISOString()).set("endDate",n.toISOString()).set("groupBy",i);return this.http.get(`${this.apiUrl}/trends`,{params:o})}getTopPartners(e=10){const n=(new M.Nl).set("limit",e.toString());return this.http.get(`${this.apiUrl}/partners/top`,{params:n})}getPartnerPerformance(e,n,i){const o=(new M.Nl).set("startDate",n.toISOString()).set("endDate",i.toISOString());return this.http.get(`${this.apiUrl}/partners/${e}`,{params:o})}getZonePerformance(){return this.http.get(`${this.apiUrl}/zones`)}getZoneDetails(e,n,i){const o=(new M.Nl).set("startDate",n.toISOString()).set("endDate",i.toISOString());return this.http.get(`${this.apiUrl}/zones/${e}`,{params:o})}getStatusDistribution(e,n){const i=(new M.Nl).set("startDate",e.toISOString()).set("endDate",n.toISOString());return this.http.get(`${this.apiUrl}/status-distribution`,{params:i})}getPeakHours(){return this.http.get(`${this.apiUrl}/peak-hours`)}getRevenueAnalytics(e,n){const i=(new M.Nl).set("startDate",e.toISOString()).set("endDate",n.toISOString());return this.http.get(`${this.apiUrl}/revenue`,{params:i})}getCustomerSatisfaction(){return this.http.get(`${this.apiUrl}/customer-satisfaction`)}getVehicleTypePerformance(){return this.http.get(`${this.apiUrl}/vehicle-types`)}getDeliveryTimeAnalysis(e,n){const i=(new M.Nl).set("startDate",e.toISOString()).set("endDate",n.toISOString());return this.http.get(`${this.apiUrl}/delivery-times`,{params:i})}getFailedDeliveryAnalysis(e,n){const i=(new M.Nl).set("startDate",e.toISOString()).set("endDate",n.toISOString());return this.http.get(`${this.apiUrl}/failed-deliveries`,{params:i})}getZones(){return this.http.get(`${this.apiUrl}/filters/zones`)}getPartners(){return this.http.get(`${this.apiUrl}/filters/partners`)}exportReport(e,n,i){const o=(new M.Nl).set("format",e).set("startDate",n.toISOString()).set("endDate",i.toISOString());return this.http.get(`${this.apiUrl}/export`,{params:o,responseType:"blob"})}getDashboardStats(){return this.http.get(`${this.apiUrl}/dashboard`)}getDemandForecast(e=7){const n=(new M.Nl).set("days",e.toString());return this.http.get(`${this.apiUrl}/forecast`,{params:n})}getPartnerUtilization(){return this.http.get(`${this.apiUrl}/partner-utilization`)}getRouteEfficiency(e,n){const i=(new M.Nl).set("startDate",e.toISOString()).set("endDate",n.toISOString());return this.http.get(`${this.apiUrl}/route-efficiency`,{params:i})}mockResponse(e){return new W.c(n=>{setTimeout(()=>{n.next({statusCode:"SUCCESS",message:"Data retrieved successfully",data:e,timestamp:(new Date).toISOString()}),n.complete()},500)})}static{this.\u0275fac=function(n){return new(n||r)(t.KVO(M.Qq))}}static{this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),oi=(()=>{class r{constructor(e,n){this.analyticsService=e,this.snackBar=n,this.destroy$=new U.B,this.startDate=new Date((new Date).setDate((new Date).getDate()-30)),this.endDate=new Date,this.selectedPeriod="30days",this.isLoading=!0,this.metrics={totalDeliveries:0,successRate:0,avgDeliveryTime:0,totalRevenue:0,activePartners:0,avgRating:0,onTimeDeliveryRate:0,totalDistance:0},this.deliveryTrendChartData={labels:[],datasets:[{data:[],label:"Deliveries",borderColor:"#667eea",backgroundColor:"rgba(102, 126, 234, 0.1)",tension:.4}]},this.deliveryTrendChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},tooltip:{callbacks:{label:i=>`Deliveries: ${i.parsed.y}`}}},scales:{y:{beginAtZero:!0}}},this.partnerPerformanceData=[],this.partnerColumns=["rank","partnerName","deliveries","successRate","avgTime","rating","earnings"],this.zonePerformanceData=[],this.statusDistributionData={labels:["Delivered","In Transit","Failed","Cancelled"],datasets:[{data:[],backgroundColor:["#4CAF50","#2196F3","#f44336","#FF9800"]}]},this.peakHoursChartData={labels:[],datasets:[{data:[],label:"Orders",backgroundColor:"#667eea"}]},this.revenueChartData={labels:[],datasets:[{data:[],label:"Revenue",borderColor:"#4CAF50",backgroundColor:"rgba(76, 175, 80, 0.1)",tension:.4},{data:[],label:"Commission",borderColor:"#FF9800",backgroundColor:"rgba(255, 152, 0, 0.1)",tension:.4}]},this.satisfactionData={avgRating:0,totalReviews:0,distribution:{5:0,4:0,3:0,2:0,1:0}},this.selectedZone="all",this.selectedPartner="all",this.selectedVehicleType="all",this.zones=[],this.partners=[],this.vehicleTypes=["BIKE","SCOOTER","BICYCLE","CAR","AUTO"]}ngOnInit(){this.loadAnalytics(),this.loadFilters()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadAnalytics(){this.isLoading=!0,Promise.all([this.loadKeyMetrics(),this.loadDeliveryTrends(),this.loadPartnerPerformance(),this.loadZonePerformance(),this.loadStatusDistribution(),this.loadPeakHours(),this.loadRevenueData(),this.loadCustomerSatisfaction()]).then(()=>{this.isLoading=!1}).catch(e=>{console.error("Error loading analytics:",e),this.snackBar.open("Failed to load analytics","Close",{duration:3e3}),this.isLoading=!1})}loadKeyMetrics(){return new Promise(e=>{this.analyticsService.getKeyMetrics(this.startDate,this.endDate).pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&n.data&&(this.metrics=n.data),e()},error:()=>e()})})}loadDeliveryTrends(){return new Promise(e=>{this.analyticsService.getDeliveryTrends(this.startDate,this.endDate).pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&n.data&&(this.deliveryTrendChartData.labels=n.data.labels,this.deliveryTrendChartData.datasets[0].data=n.data.values),e()},error:()=>e()})})}loadPartnerPerformance(){return new Promise(e=>{this.analyticsService.getTopPartners(10).pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&n.data&&(this.partnerPerformanceData=n.data.map((i,o)=>({...i,rank:o+1}))),e()},error:()=>e()})})}loadZonePerformance(){return new Promise(e=>{this.analyticsService.getZonePerformance().pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&n.data&&(this.zonePerformanceData=n.data),e()},error:()=>e()})})}loadStatusDistribution(){return new Promise(e=>{this.analyticsService.getStatusDistribution(this.startDate,this.endDate).pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&n.data&&(this.statusDistributionData.datasets[0].data=[n.data.delivered,n.data.inTransit,n.data.failed,n.data.cancelled]),e()},error:()=>e()})})}loadPeakHours(){return new Promise(e=>{this.analyticsService.getPeakHours().pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&n.data&&(this.peakHoursChartData.labels=n.data.hours,this.peakHoursChartData.datasets[0].data=n.data.orders),e()},error:()=>e()})})}loadRevenueData(){return new Promise(e=>{this.analyticsService.getRevenueAnalytics(this.startDate,this.endDate).pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&n.data&&(this.revenueChartData.labels=n.data.labels,this.revenueChartData.datasets[0].data=n.data.revenue,this.revenueChartData.datasets[1].data=n.data.commission),e()},error:()=>e()})})}loadCustomerSatisfaction(){return new Promise(e=>{this.analyticsService.getCustomerSatisfaction().pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{k.c.isSuccess(n)&&n.data&&(this.satisfactionData=n.data),e()},error:()=>e()})})}loadFilters(){this.analyticsService.getZones().pipe((0,u.Q)(this.destroy$)).subscribe({next:e=>{k.c.isSuccess(e)&&(this.zones=e.data)}}),this.analyticsService.getPartners().pipe((0,u.Q)(this.destroy$)).subscribe({next:e=>{k.c.isSuccess(e)&&(this.partners=e.data)}})}onPeriodChange(){const e=new Date;switch(this.selectedPeriod){case"7days":this.startDate=new Date(e.setDate(e.getDate()-7));break;case"30days":this.startDate=new Date(e.setDate(e.getDate()-30));break;case"90days":this.startDate=new Date(e.setDate(e.getDate()-90))}this.loadAnalytics()}onDateRangeChange(){this.startDate&&this.endDate&&(this.selectedPeriod="custom",this.loadAnalytics())}onFilterChange(){this.loadAnalytics()}exportReport(e){this.analyticsService.exportReport(e,this.startDate,this.endDate).pipe((0,u.Q)(this.destroy$)).subscribe({next:n=>{const i=window.URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=`delivery-analytics-${(new Date).toISOString().split("T")[0]}.${e}`,o.click(),window.URL.revokeObjectURL(i),this.snackBar.open("Report exported successfully","Close",{duration:3e3})},error:n=>{console.error("Error exporting report:",n),this.snackBar.open("Failed to export report","Close",{duration:3e3})}})}refreshData(){this.loadAnalytics()}formatCurrency(e){return`\u20b9${e.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`}formatPercentage(e){return`${e.toFixed(1)}%`}formatTime(e){return e<60?`${Math.round(e)} mins`:`${Math.floor(e/60)}h ${Math.round(e%60)}m`}formatDistance(e){return`${e.toFixed(1)} km`}getRatingStars(e){const n=Math.floor(e),i=e%1>=.5,o=[];for(let c=0;c<n;c++)o.push("star");for(i&&o.length<5&&o.push("star_half");o.length<5;)o.push("star_border");return o}getMetricIcon(e){switch(e){case"deliveries":return"local_shipping";case"success":return"check_circle";case"time":return"schedule";case"revenue":return"currency_rupee";case"partners":return"group";case"rating":return"star";case"ontime":return"timer";case"distance":return"navigation";default:return"analytics"}}getMetricColor(e){switch(e){case"deliveries":case"revenue":return"primary";case"success":case"rating":return"accent";default:return"basic"}}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(ai),t.rXU($.UG))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-delivery-analytics"]],decls:84,vars:13,consts:[[1,"analytics-container"],[1,"analytics-header"],[1,"date-range-selector"],["appearance","outline"],["matInput","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["startPicker",""],["endPicker",""],["mat-raised-button","","color","primary",3,"click"],[1,"metrics-grid"],[1,"metric-card"],[1,"metric-header"],[1,"metric-value"],[1,"charts-section"],[1,"chart-card"],[1,"chart-placeholder"]],template:function(n,i){if(1&n&&(t.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),t.EFF(5,"analytics"),t.k0s(),t.EFF(6," Delivery Analytics Dashboard "),t.k0s(),t.j41(7,"mat-card-subtitle"),t.EFF(8,"Performance metrics and insights"),t.k0s()(),t.j41(9,"mat-card-content")(10,"div",2)(11,"mat-form-field",3)(12,"mat-label"),t.EFF(13,"Start Date"),t.k0s(),t.j41(14,"input",4),t.bIt("ngModelChange",function(c){return i.startDate=c}),t.k0s(),t.nrm(15,"mat-datepicker-toggle",5)(16,"mat-datepicker",null,6),t.k0s(),t.j41(18,"mat-form-field",3)(19,"mat-label"),t.EFF(20,"End Date"),t.k0s(),t.j41(21,"input",4),t.bIt("ngModelChange",function(c){return i.endDate=c}),t.k0s(),t.nrm(22,"mat-datepicker-toggle",5)(23,"mat-datepicker",null,7),t.k0s(),t.j41(25,"button",8),t.bIt("click",function(){return i.loadAnalytics()}),t.j41(26,"mat-icon"),t.EFF(27,"refresh"),t.k0s(),t.EFF(28," Refresh Data "),t.k0s()()()(),t.j41(29,"div",9)(30,"mat-card",10)(31,"mat-card-content")(32,"div",11)(33,"mat-icon"),t.EFF(34,"local_shipping"),t.k0s(),t.j41(35,"span"),t.EFF(36,"Total Deliveries"),t.k0s()(),t.j41(37,"div",12),t.EFF(38),t.k0s()()(),t.j41(39,"mat-card",10)(40,"mat-card-content")(41,"div",11)(42,"mat-icon"),t.EFF(43,"check_circle"),t.k0s(),t.j41(44,"span"),t.EFF(45,"Success Rate"),t.k0s()(),t.j41(46,"div",12),t.EFF(47),t.nI1(48,"number"),t.k0s()()(),t.j41(49,"mat-card",10)(50,"mat-card-content")(51,"div",11)(52,"mat-icon"),t.EFF(53,"schedule"),t.k0s(),t.j41(54,"span"),t.EFF(55,"Avg Delivery Time"),t.k0s()(),t.j41(56,"div",12),t.EFF(57),t.k0s()()(),t.j41(58,"mat-card",10)(59,"mat-card-content")(60,"div",11)(61,"mat-icon"),t.EFF(62,"payments"),t.k0s(),t.j41(63,"span"),t.EFF(64,"Total Revenue"),t.k0s()(),t.j41(65,"div",12),t.EFF(66),t.k0s()()()(),t.j41(67,"div",13)(68,"mat-card",14)(69,"mat-card-header")(70,"mat-card-title"),t.EFF(71,"Delivery Trends"),t.k0s()(),t.j41(72,"mat-card-content")(73,"div",15)(74,"p"),t.EFF(75,"Chart will be implemented here"),t.k0s()()()(),t.j41(76,"mat-card",14)(77,"mat-card-header")(78,"mat-card-title"),t.EFF(79,"Partner Performance"),t.k0s()(),t.j41(80,"mat-card-content")(81,"div",15)(82,"p"),t.EFF(83,"Partner performance chart will be implemented here"),t.k0s()()()()()()),2&n){const o=t.sdS(17),c=t.sdS(24);t.R7$(14),t.Y8G("matDatepicker",o)("ngModel",i.startDate),t.R7$(1),t.Y8G("for",o),t.R7$(6),t.Y8G("matDatepicker",c)("ngModel",i.endDate),t.R7$(1),t.Y8G("for",c),t.R7$(16),t.JRh(i.metrics.totalDeliveries||0),t.R7$(9),t.SpI("",t.i5U(48,10,i.metrics.successRate||0,"1.1-1"),"%"),t.R7$(10),t.SpI("",i.metrics.avgDeliveryTime||0," min"),t.R7$(9),t.SpI("\u20b9",i.metrics.totalRevenue||0,"")}},dependencies:[h.me,h.BC,h.vS,_.RN,_.m2,_.MM,_.Lc,_.dh,x.$z,D.rl,D.nJ,D.yw,B.fg,Q.Vh,Q.bZ,Q.bU,w.An,a.QX],styles:[".analytics-container[_ngcontent-%COMP%]{padding:1rem}.analytics-header[_ngcontent-%COMP%]{margin-bottom:2rem}.date-range-selector[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center;flex-wrap:wrap}.metrics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin-bottom:2rem}.metric-card[_ngcontent-%COMP%]   .metric-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem;color:#666}.metric-card[_ngcontent-%COMP%]   .metric-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.metric-card[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#2196f3}.charts-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:2rem}.chart-card[_ngcontent-%COMP%]{min-height:300px}.chart-placeholder[_ngcontent-%COMP%]{height:200px;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5;border-radius:4px;color:#666}"]})}}return r})();function si(r,s){1&r&&(t.j41(0,"div",6),t.nrm(1,"mat-spinner"),t.j41(2,"p"),t.EFF(3,"Loading documents..."),t.k0s()())}function ci(r,s){1&r&&(t.j41(0,"div",7)(1,"mat-icon"),t.EFF(2,"folder_open"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No Documents Found"),t.k0s(),t.j41(5,"p"),t.EFF(6,"This delivery partner hasn't uploaded any documents yet."),t.k0s()())}function li(r,s){if(1&r&&(t.j41(0,"p")(1,"strong"),t.EFF(2,"License Number:"),t.k0s(),t.EFF(3),t.k0s()),2&r){const e=t.XpG(2).$implicit;t.R7$(3),t.SpI(" ",e.licenseNumber,"")}}function di(r,s){if(1&r&&(t.j41(0,"p")(1,"strong"),t.EFF(2,"Vehicle Number:"),t.k0s(),t.EFF(3),t.k0s()),2&r){const e=t.XpG(2).$implicit;t.R7$(3),t.SpI(" ",e.vehicleNumber,"")}}function pi(r,s){if(1&r&&(t.j41(0,"div",20),t.DNE(1,li,4,1,"p",21),t.DNE(2,di,4,1,"p",21),t.k0s()),2&r){const e=t.XpG().$implicit;t.R7$(1),t.Y8G("ngIf",e.licenseNumber),t.R7$(1),t.Y8G("ngIf",e.vehicleNumber)}}function gi(r,s){if(1&r){const e=t.RV6();t.j41(0,"img",22),t.bIt("error",function(i){t.eBV(e);const o=t.XpG().$implicit,c=t.XpG(2);return t.Njj(c.onImageError(i,o))}),t.k0s()}if(2&r){const e=t.XpG().$implicit,n=t.XpG(2);t.Y8G("src",n.getDocumentUrl(e),t.B4B)("alt",e.documentName)}}function mi(r,s){if(1&r&&(t.j41(0,"div",23)(1,"mat-icon"),t.EFF(2,"description"),t.k0s(),t.j41(3,"p"),t.EFF(4),t.k0s(),t.j41(5,"a",18)(6,"mat-icon"),t.EFF(7,"download"),t.k0s(),t.EFF(8," Download "),t.k0s()()),2&r){const e=t.XpG().$implicit,n=t.XpG(2);t.R7$(4),t.JRh(e.fileType),t.R7$(1),t.Y8G("href",n.getDocumentUrl(e),t.B4B)}}function ui(r,s){if(1&r&&(t.j41(0,"div",10)(1,"div",11)(2,"h3"),t.EFF(3),t.k0s(),t.j41(4,"mat-chip"),t.EFF(5),t.k0s()(),t.j41(6,"div",12)(7,"p")(8,"strong"),t.EFF(9,"Filename:"),t.k0s(),t.EFF(10),t.k0s(),t.j41(11,"p")(12,"strong"),t.EFF(13,"Size:"),t.k0s(),t.EFF(14),t.k0s(),t.j41(15,"p")(16,"strong"),t.EFF(17,"Uploaded:"),t.k0s(),t.EFF(18),t.nI1(19,"date"),t.k0s(),t.DNE(20,pi,3,2,"div",13),t.k0s(),t.j41(21,"div",14),t.DNE(22,gi,1,2,"img",15),t.DNE(23,mi,9,2,"div",16),t.k0s(),t.j41(24,"div",17)(25,"a",18)(26,"mat-icon"),t.EFF(27,"open_in_new"),t.k0s(),t.EFF(28," Open Full Size "),t.k0s(),t.j41(29,"a",19)(30,"mat-icon"),t.EFF(31,"download"),t.k0s(),t.EFF(32," Download "),t.k0s()()()),2&r){const e=s.$implicit,n=t.XpG(2);t.R7$(3),t.JRh(n.getDocumentDisplayName(e.documentType)),t.R7$(1),t.HbH("status-chip status-"+e.verificationStatus.toLowerCase()),t.R7$(1),t.SpI(" ",e.verificationStatus," "),t.R7$(5),t.SpI(" ",e.originalFilename,""),t.R7$(4),t.SpI(" ",n.formatFileSize(e.fileSize),""),t.R7$(4),t.SpI(" ",t.i5U(19,12,e.createdAt,"dd/MM/yyyy HH:mm"),""),t.R7$(2),t.Y8G("ngIf",e.licenseNumber||e.vehicleNumber),t.R7$(2),t.Y8G("ngIf",n.isImageFile(e.fileType)),t.R7$(1),t.Y8G("ngIf",!n.isImageFile(e.fileType)),t.R7$(2),t.Y8G("href",n.getDocumentUrl(e),t.B4B),t.R7$(4),t.Y8G("href",n.getDocumentUrl(e),t.B4B)}}function _i(r,s){if(1&r&&(t.j41(0,"div",8),t.DNE(1,ui,33,15,"div",9),t.k0s()),2&r){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",e.documents)}}let hi=(()=>{class r{constructor(e,n){this.route=e,this.deliveryPartnerService=n,this.partnerName="",this.documents=[],this.loading=!0}ngOnInit(){this.route.params.subscribe(e=>{this.partnerId=+e.id,this.partnerName=e.name||"Delivery Partner",this.loadDocuments()})}loadDocuments(){this.loading=!0,this.deliveryPartnerService.getPartnerDocuments(this.partnerId).subscribe({next:e=>{this.documents=e.data||[],this.loading=!1},error:e=>{console.error("Error loading documents:",e),this.loading=!1}})}getDocumentDisplayName(e){return{DRIVER_PHOTO:"Driver Photo",DRIVING_LICENSE:"Driving License",VEHICLE_PHOTO:"Vehicle Photo",RC_BOOK:"RC Book"}[e]||e.replace("_"," ")}getDocumentUrl(e){return`${f.c.apiUrl||"http://localhost:8080/api"}/delivery/partners/documents/${e.id}/view`}isImageFile(e){return!!e&&e.startsWith("image/")}formatFileSize(e){if(0===e)return"0 Bytes";const o=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,o)).toFixed(2))+" "+["Bytes","KB","MB","GB"][o]}onImageError(e,n){console.error("Image load error for document:",n.id),e.target.alt="Image could not be loaded",e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2VlZWVlZSIvPgo8dGV4dCB4PSI1MCUiIHk9IjUwJSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSIjOTk5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iMC4zZW0iPkltYWdlIG5vdCBhdmFpbGFibGU8L3RleHQ+Cjwvc3ZnPg=="}goBack(){window.history.back()}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(G.nX),t.rXU(rt.WS))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-simple-document-viewer"]],decls:11,vars:4,consts:[[1,"simple-viewer-container"],[1,"header"],["mat-raised-button","","color","primary",3,"click"],["class","loading",4,"ngIf"],["class","no-documents",4,"ngIf"],["class","documents-grid",4,"ngIf"],[1,"loading"],[1,"no-documents"],[1,"documents-grid"],["class","document-item",4,"ngFor","ngForOf"],[1,"document-item"],[1,"document-header"],[1,"document-info"],["class","metadata",4,"ngIf"],[1,"document-preview"],["class","document-image",3,"src","alt","error",4,"ngIf"],["class","non-image-file",4,"ngIf"],[1,"document-actions"],["target","_blank","mat-raised-button","","color","primary",3,"href"],["download","","mat-raised-button","","color","accent",3,"href"],[1,"metadata"],[4,"ngIf"],[1,"document-image",3,"src","alt","error"],[1,"non-image-file"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return i.goBack()}),t.j41(5,"mat-icon"),t.EFF(6,"arrow_back"),t.k0s(),t.EFF(7," Back to Users "),t.k0s()(),t.DNE(8,si,4,0,"div",3),t.DNE(9,ci,7,0,"div",4),t.DNE(10,_i,2,1,"div",5),t.k0s()),2&n&&(t.R7$(3),t.SpI("\u{1f4c4} ",i.partnerName," - Uploaded Documents"),t.R7$(5),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.documents.length),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.documents.length>0))},dependencies:[a.Sq,a.bT,x.It,x.$z,w.An,T.Jl,N.LG,a.vh],styles:[".simple-viewer-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:2px solid #e0e0e0}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px}.loading[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:0 auto 20px}.no-documents[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.no-documents[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:20px;color:#ccc}.documents-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:30px;margin-top:20px}.document-item[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:12px;padding:20px;background:white;box-shadow:0 2px 8px #0000001a}.document-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.document-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333;font-size:18px}.status-chip[_ngcontent-%COMP%]{font-size:12px;padding:4px 12px;border-radius:16px}.status-chip.status-verified[_ngcontent-%COMP%]{background:#e8f5e8;color:#2e7d32}.status-chip.status-pending[_ngcontent-%COMP%]{background:#fff3e0;color:#f57c00}.status-chip.status-rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.document-info[_ngcontent-%COMP%]{margin-bottom:20px}.document-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:14px;color:#666}.metadata[_ngcontent-%COMP%]{margin-top:10px;padding-top:10px;border-top:1px solid #eee}.document-preview[_ngcontent-%COMP%]{margin-bottom:20px;text-align:center;min-height:200px;display:flex;align-items:center;justify-content:center;background:#f8f9fa;border-radius:8px;padding:20px}.document-image[_ngcontent-%COMP%]{max-width:100%;max-height:300px;border-radius:8px;box-shadow:0 2px 8px #0000001a}.non-image-file[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;color:#666}.non-image-file[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.document-actions[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:center}.document-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]})}}return r})();function fi(r,s){1&r&&(t.j41(0,"th",60),t.EFF(1,"Partner ID"),t.k0s())}function Ci(r,s){if(1&r&&(t.j41(0,"td",61)(1,"span",62),t.EFF(2),t.k0s()()),2&r){const e=s.$implicit;t.R7$(2),t.SpI("DP",e.partnerId,"")}}function Pi(r,s){1&r&&(t.j41(0,"th",60),t.EFF(1,"Name"),t.k0s())}function vi(r,s){if(1&r&&(t.j41(0,"td",61)(1,"div",63)(2,"mat-icon",64),t.EFF(3,"person"),t.k0s(),t.j41(4,"span",65),t.EFF(5),t.k0s()()()),2&r){const e=s.$implicit;t.R7$(5),t.JRh(e.partnerName)}}function Oi(r,s){1&r&&(t.j41(0,"th",60),t.EFF(1,"Phone"),t.k0s())}function Mi(r,s){if(1&r&&(t.j41(0,"td",61)(1,"a",66),t.EFF(2),t.k0s()()),2&r){const e=s.$implicit;t.R7$(1),t.Mz_("href","tel:",e.phone,"",t.B4B),t.R7$(1),t.JRh(e.phone)}}function bi(r,s){1&r&&(t.j41(0,"th",60),t.EFF(1,"Status"),t.k0s())}function ki(r,s){if(1&r&&(t.j41(0,"td",61)(1,"span",67),t.EFF(2),t.k0s()()),2&r){const e=s.$implicit,n=t.XpG();t.R7$(1),t.Y8G("ngClass",n.getStatusClass(e.status)),t.R7$(1),t.SpI(" ",e.status," ")}}function Fi(r,s){1&r&&(t.j41(0,"th",60),t.EFF(1,"Rating"),t.k0s())}function Ei(r,s){if(1&r&&(t.j41(0,"td",61)(1,"div",68)(2,"mat-icon",69),t.EFF(3,"star"),t.k0s(),t.j41(4,"span"),t.EFF(5),t.nI1(6,"number"),t.k0s()()()),2&r){const e=s.$implicit;t.R7$(5),t.JRh(t.i5U(6,1,e.rating,"1.1-1"))}}function xi(r,s){1&r&&(t.j41(0,"th",60),t.EFF(1,"Deliveries"),t.k0s())}function yi(r,s){if(1&r&&(t.j41(0,"td",61)(1,"span",70),t.EFF(2),t.k0s()()),2&r){const e=s.$implicit;t.R7$(2),t.JRh(e.totalDeliveries)}}function Di(r,s){1&r&&(t.j41(0,"th",71),t.EFF(1,"Online"),t.k0s())}function Ii(r,s){if(1&r&&(t.j41(0,"td",61)(1,"mat-icon",72),t.EFF(2),t.k0s()()),2&r){const e=s.$implicit;t.R7$(1),t.Y8G("ngClass",e.isOnline?"online":"offline"),t.R7$(1),t.SpI(" ",e.isOnline?"wifi":"wifi_off"," ")}}function Ri(r,s){1&r&&(t.j41(0,"th",71),t.EFF(1,"Actions"),t.k0s())}function ji(r,s){if(1&r){const e=t.RV6();t.j41(0,"td",61)(1,"button",73)(2,"mat-icon"),t.EFF(3,"more_horiz"),t.k0s()(),t.j41(4,"mat-menu",null,74)(6,"button",75),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.viewPartnerDetails(o))}),t.j41(7,"mat-icon"),t.EFF(8,"visibility"),t.k0s(),t.j41(9,"span"),t.EFF(10,"View Details"),t.k0s()(),t.j41(11,"button",76),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.assignOrder(o))}),t.j41(12,"mat-icon"),t.EFF(13,"assignment"),t.k0s(),t.j41(14,"span"),t.EFF(15,"Assign Order"),t.k0s()(),t.j41(16,"button",75),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.callPartner(o.phone))}),t.j41(17,"mat-icon"),t.EFF(18,"phone"),t.k0s(),t.j41(19,"span"),t.EFF(20,"Call Partner"),t.k0s()(),t.j41(21,"button",75),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.messagePartner(o))}),t.j41(22,"mat-icon"),t.EFF(23,"message"),t.k0s(),t.j41(24,"span"),t.EFF(25,"Send Message"),t.k0s()(),t.j41(26,"button",76),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.trackPartner(o))}),t.j41(27,"mat-icon"),t.EFF(28,"location_on"),t.k0s(),t.j41(29,"span"),t.EFF(30,"Track Location"),t.k0s()(),t.nrm(31,"mat-divider"),t.j41(32,"button",77),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.togglePartnerStatus(o))}),t.j41(33,"mat-icon"),t.EFF(34),t.k0s(),t.j41(35,"span"),t.EFF(36),t.k0s()()()()}if(2&r){const e=s.$implicit,n=t.sdS(5);t.R7$(1),t.Y8G("matMenuTriggerFor",n),t.R7$(10),t.Y8G("disabled",!e.isOnline),t.R7$(15),t.Y8G("disabled",!e.isOnline),t.R7$(6),t.Y8G("ngClass","ACTIVE"===e.status?"danger":"success"),t.R7$(2),t.JRh("ACTIVE"===e.status?"block":"check_circle"),t.R7$(2),t.JRh("ACTIVE"===e.status?"Suspend":"Activate")}}function wi(r,s){1&r&&t.nrm(0,"tr",78)}const Si=function(r,s){return{"online-row":r,"offline-row":s}};function Ti(r,s){if(1&r&&t.nrm(0,"tr",79),2&r){const e=s.$implicit;t.Y8G("ngClass",t.l_i(1,Si,e.isOnline,!e.isOnline))}}function $i(r,s){1&r&&(t.j41(0,"div",80),t.nrm(1,"mat-spinner",81),t.j41(2,"p"),t.EFF(3,"Loading partners..."),t.k0s()())}function Ai(r,s){1&r&&(t.j41(0,"div",82)(1,"mat-icon"),t.EFF(2,"group_off"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No Partners Found"),t.k0s(),t.j41(5,"p"),t.EFF(6,"No delivery partners match your current filters."),t.k0s()())}const Ni=function(){return[10,25,50,100]};let Li=(()=>{class r{constructor(e,n,i,o,c){this.partnerService=e,this.assignmentService=n,this.http=i,this.dialog=o,this.snackBar=c,this.destroy$=new U.B,this.displayedColumns=["partnerId","name","phone","status","rating","deliveries","online","actions"],this.statusFilter="All Status",this.searchTerm="",this.isLoading=!0,this.isProcessing=!1,this.totalPartners=0,this.onlinePartners=0,this.activeAssignments=0,this.dataSource=new C.I6([])}ngOnInit(){this.loadAssignmentData(),this.setupAutoRefresh(),this.setupFilters()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadAssignmentData(){this.isLoading=!0,this.http.get(`${f.c.apiUrl}/mobile/delivery-partner/admin/partners`).pipe((0,u.Q)(this.destroy$)).subscribe({next:e=>{if(e.success&&e.partners){const n=e.partners.map(i=>({partnerId:i.partnerId,partnerName:i.name||"Unknown",phone:i.phone||"-",email:i.email||"-",status:i.isActive?"ACTIVE":"PENDING",isOnline:i.isOnline||!1,isAvailable:i.isAvailable||!1,rideStatus:i.rideStatus||"OFFLINE",rating:i.rating||0,totalDeliveries:i.totalDeliveries||0,totalEarnings:i.totalEarnings||0,lastActivity:i.lastActivity,lastLogin:i.lastLogin}));this.dataSource.data=n,e.statistics?(this.totalPartners=e.statistics.total||n.length,this.onlinePartners=e.statistics.online||0,this.activeAssignments=e.statistics.available||0):(this.totalPartners=n.length,this.onlinePartners=n.filter(i=>i.isOnline).length,this.activeAssignments=n.filter(i=>i.isAvailable).length)}this.isLoading=!1},error:e=>{console.error("Error loading delivery partners:",e),this.snackBar.open("Failed to load delivery partners","Close",{duration:3e3}),this.dataSource.data=[],this.isLoading=!1}})}setupAutoRefresh(){(0,Y.Y)(3e4).pipe((0,u.Q)(this.destroy$)).subscribe(()=>{this.refreshData()})}setupFilters(){this.dataSource.filterPredicate=(e,n)=>{const i=this.searchTerm.toLowerCase(),o="All Status"===this.statusFilter||"ACTIVE"===this.statusFilter&&"ACTIVE"===e.status||"PENDING"===this.statusFilter&&"PENDING"===e.status||"ONLINE"===this.statusFilter&&e.isOnline,c=!i||e.partnerId.toString().includes(i)||e.partnerName.toLowerCase().includes(i)||e.phone.includes(i);return o&&c}}onStatusFilterChange(){this.applyFilter()}applyFilter(){this.dataSource.filter=Math.random().toString()}refreshData(){this.loadAssignmentData()}getStatusClass(e){return`status-${e.toLowerCase()}`}viewPartnerDetails(e){this.snackBar.open(`Viewing details for ${e.partnerName}`,"Close",{duration:2e3})}assignOrder(e){this.snackBar.open(`Assigning order to ${e.partnerName}`,"Close",{duration:2e3})}callPartner(e){window.open(`tel:${e}`,"_blank")}messagePartner(e){this.snackBar.open(`Opening message for ${e.partnerName}`,"Close",{duration:2e3})}trackPartner(e){this.snackBar.open(`Tracking ${e.partnerName}`,"Close",{duration:2e3})}togglePartnerStatus(e){this.isProcessing=!0;const n="ACTIVE"===e.status?"SUSPENDED":"ACTIVE";this.partnerService.updatePartnerStatus(e.partnerId,n).pipe((0,u.Q)(this.destroy$)).subscribe({next:()=>{this.snackBar.open(`Partner ${n.toLowerCase()}`,"Close",{duration:2e3}),this.loadAssignmentData(),this.isProcessing=!1},error:i=>{console.error("Error updating partner status:",i),this.snackBar.open("Failed to update status","Close",{duration:2e3}),this.isProcessing=!1}})}exportData(){this.snackBar.open("Exporting assignment data...","Close",{duration:2e3})}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(rt.WS),t.rXU(Z.N),t.rXU(M.Qq),t.rXU(y.bZ),t.rXU($.UG))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-order-assignments"]],viewQuery:function(n,i){if(1&n&&(t.GBs(q.iy,5),t.GBs(z.B4,5)),2&n){let o;t.mGM(o=t.lsd())&&(i.paginator=o.first),t.mGM(o=t.lsd())&&(i.sort=o.first)}},decls:147,vars:17,consts:[[1,"order-assignments-container"],[1,"page-header"],[1,"header-left"],[1,"breadcrumb"],[1,"header-right"],[1,"search-container"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search...",3,"ngModel","ngModelChange","keyup"],["matPrefix",""],[1,"notifications"],["mat-icon-button","",1,"notification-btn"],[1,"notification-badge"],[1,"user-menu"],["mat-icon-button",""],[1,"user-avatar"],[1,"stats-row"],[1,"stat-item"],[1,"stat-content"],[1,"stat-number"],[1,"stat-label"],[1,"stat-item","online"],[1,"stat-item","active"],[1,"alert-banner"],[1,"alert-icon"],[1,"alert-text"],[1,"alert-count"],[1,"filters-container"],[1,"filter-group"],["appearance","outline",1,"filter-field"],[1,"filter-label"],["appearance","outline",1,"filter-select"],[3,"ngModel","ngModelChange","selectionChange"],["value","All Status"],["value","ACTIVE"],["value","PENDING"],["value","SUSPENDED"],["value","BLOCKED"],["value","ONLINE"],[1,"filter-actions"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-stroked-button","",3,"click"],[1,"table-container"],["mat-table","","matSort","",1,"partners-table",3,"dataSource"],["matColumnDef","partnerId"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","phone"],["matColumnDef","status"],["matColumnDef","rating"],["matColumnDef","deliveries"],["matColumnDef","online"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["showFirstLastButtons","",1,"table-paginator",3,"pageSizeOptions","pageSize"],[1,"table-info"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"partner-id"],[1,"name-cell"],[1,"user-icon"],[1,"partner-name"],[1,"phone-link",3,"href"],[1,"status-badge",3,"ngClass"],[1,"rating-cell"],[1,"star-icon"],[1,"deliveries-count"],["mat-header-cell",""],[1,"online-status",3,"ngClass"],["mat-icon-button","",1,"actions-btn",3,"matMenuTriggerFor"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"ngClass","click"],["mat-header-row",""],["mat-row","",3,"ngClass"],[1,"loading-container"],["diameter","40"],[1,"empty-state"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),t.EFF(4,"Order Assignments"),t.k0s(),t.j41(5,"div",3)(6,"span"),t.EFF(7,"Home"),t.k0s(),t.j41(8,"mat-icon"),t.EFF(9,"chevron_right"),t.k0s(),t.j41(10,"span"),t.EFF(11,"Delivery"),t.k0s(),t.j41(12,"mat-icon"),t.EFF(13,"chevron_right"),t.k0s(),t.j41(14,"span"),t.EFF(15,"Admin"),t.k0s(),t.j41(16,"mat-icon"),t.EFF(17,"chevron_right"),t.k0s(),t.j41(18,"span"),t.EFF(19,"Assignments"),t.k0s()()(),t.j41(20,"div",4)(21,"div",5)(22,"mat-form-field",6)(23,"mat-label"),t.EFF(24,"Search shops, products, orders"),t.k0s(),t.j41(25,"input",7),t.bIt("ngModelChange",function(c){return i.searchTerm=c})("keyup",function(){return i.applyFilter()}),t.k0s(),t.j41(26,"mat-icon",8),t.EFF(27,"search"),t.k0s()()(),t.j41(28,"div",9)(29,"button",10)(30,"mat-icon"),t.EFF(31,"notifications"),t.k0s(),t.j41(32,"span",11),t.EFF(33,"3"),t.k0s()()(),t.j41(34,"div",12)(35,"button",13)(36,"mat-icon"),t.EFF(37,"settings"),t.k0s()(),t.j41(38,"div",14),t.EFF(39,"TH"),t.k0s()()()(),t.j41(40,"div",15)(41,"div",16)(42,"mat-icon"),t.EFF(43,"group"),t.k0s(),t.j41(44,"div",17)(45,"span",18),t.EFF(46),t.k0s(),t.j41(47,"span",19),t.EFF(48,"Total Partners"),t.k0s()()(),t.j41(49,"div",20)(50,"mat-icon"),t.EFF(51,"wifi"),t.k0s(),t.j41(52,"div",17)(53,"span",18),t.EFF(54),t.k0s(),t.j41(55,"span",19),t.EFF(56,"Online Now"),t.k0s()()(),t.j41(57,"div",21)(58,"mat-icon"),t.EFF(59,"local_shipping"),t.k0s(),t.j41(60,"div",17)(61,"span",18),t.EFF(62),t.k0s(),t.j41(63,"span",19),t.EFF(64,"Active Assignments"),t.k0s()()()(),t.j41(65,"div",22)(66,"mat-icon",23),t.EFF(67,"warning"),t.k0s(),t.j41(68,"span",24),t.EFF(69,"Order Issues"),t.k0s(),t.j41(70,"span",25),t.EFF(71,"3"),t.k0s()(),t.j41(72,"div",26)(73,"div",27)(74,"mat-form-field",28)(75,"mat-label"),t.EFF(76,"Search Partners"),t.k0s(),t.j41(77,"input",7),t.bIt("ngModelChange",function(c){return i.searchTerm=c})("keyup",function(){return i.applyFilter()}),t.k0s(),t.j41(78,"mat-icon",8),t.EFF(79,"search"),t.k0s()()(),t.j41(80,"div",27)(81,"span",29),t.EFF(82,"Status Filter"),t.k0s(),t.j41(83,"mat-form-field",30)(84,"mat-select",31),t.bIt("ngModelChange",function(c){return i.statusFilter=c})("selectionChange",function(){return i.onStatusFilterChange()}),t.j41(85,"mat-option",32),t.EFF(86,"All Status"),t.k0s(),t.j41(87,"mat-option",33),t.EFF(88,"Active"),t.k0s(),t.j41(89,"mat-option",34),t.EFF(90,"Pending"),t.k0s(),t.j41(91,"mat-option",35),t.EFF(92,"Suspended"),t.k0s(),t.j41(93,"mat-option",36),t.EFF(94,"Blocked"),t.k0s()()()(),t.j41(95,"div",27)(96,"span",29),t.EFF(97,"Online Filter"),t.k0s(),t.j41(98,"mat-form-field",30)(99,"mat-select",31),t.bIt("ngModelChange",function(c){return i.statusFilter=c})("selectionChange",function(){return i.onStatusFilterChange()}),t.j41(100,"mat-option",32),t.EFF(101,"All"),t.k0s(),t.j41(102,"mat-option",37),t.EFF(103,"Online Only"),t.k0s()()()(),t.j41(104,"div",38)(105,"button",39),t.bIt("click",function(){return i.refreshData()}),t.j41(106,"mat-icon"),t.EFF(107,"refresh"),t.k0s(),t.EFF(108," Refresh "),t.k0s(),t.j41(109,"button",40),t.bIt("click",function(){return i.exportData()}),t.j41(110,"mat-icon"),t.EFF(111,"download"),t.k0s(),t.EFF(112," Export "),t.k0s()()(),t.j41(113,"div",41)(114,"table",42),t.qex(115,43),t.DNE(116,fi,2,0,"th",44),t.DNE(117,Ci,3,1,"td",45),t.bVm(),t.qex(118,46),t.DNE(119,Pi,2,0,"th",44),t.DNE(120,vi,6,1,"td",45),t.bVm(),t.qex(121,47),t.DNE(122,Oi,2,0,"th",44),t.DNE(123,Mi,3,2,"td",45),t.bVm(),t.qex(124,48),t.DNE(125,bi,2,0,"th",44),t.DNE(126,ki,3,2,"td",45),t.bVm(),t.qex(127,49),t.DNE(128,Fi,2,0,"th",44),t.DNE(129,Ei,7,4,"td",45),t.bVm(),t.qex(130,50),t.DNE(131,xi,2,0,"th",44),t.DNE(132,yi,3,1,"td",45),t.bVm(),t.qex(133,51),t.DNE(134,Di,2,0,"th",52),t.DNE(135,Ii,3,2,"td",45),t.bVm(),t.qex(136,53),t.DNE(137,Ri,2,0,"th",52),t.DNE(138,ji,37,6,"td",45),t.bVm(),t.DNE(139,wi,1,0,"tr",54),t.DNE(140,Ti,1,4,"tr",55),t.k0s(),t.DNE(141,$i,4,0,"div",56),t.DNE(142,Ai,7,0,"div",57),t.k0s(),t.nrm(143,"mat-paginator",58),t.j41(144,"div",59)(145,"span"),t.EFF(146),t.k0s()()()),2&n&&(t.R7$(25),t.Y8G("ngModel",i.searchTerm),t.R7$(21),t.JRh(i.totalPartners),t.R7$(8),t.JRh(i.onlinePartners),t.R7$(8),t.JRh(i.activeAssignments),t.R7$(15),t.Y8G("ngModel",i.searchTerm),t.R7$(7),t.Y8G("ngModel",i.statusFilter),t.R7$(15),t.Y8G("ngModel",i.statusFilter),t.R7$(6),t.Y8G("disabled",i.isLoading),t.R7$(9),t.Y8G("dataSource",i.dataSource),t.R7$(25),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading&&0===i.dataSource.data.length),t.R7$(1),t.Y8G("pageSizeOptions",t.lJ4(16,Ni))("pageSize",10),t.R7$(3),t.SpI("",i.dataSource.data.length," partners"))},dependencies:[a.YU,a.bT,h.me,h.BC,h.vS,x.$z,x.iY,D.rl,D.nJ,D.JW,B.fg,V.VO,J.wT,C.Zl,C.tL,C.ji,C.cC,C.YV,C.iL,C.KS,C.$R,C.YZ,C.NB,q.iy,z.B4,z.aE,w.An,N.LG,X.kk,X.fb,X.Cp,lt.q,a.QX],styles:[".order-assignments-container[_ngcontent-%COMP%]{padding:0;background:#f8fafc;min-height:100vh}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:20px 24px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 8px #0000001a}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;font-size:28px;font-weight:600}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{display:flex;align-items:center;opacity:.9;font-size:14px}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;margin:0 8px}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:350px}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mdc-outlined-text-field{background:rgba(255,255,255,.1);border-radius:8px}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field-outline{color:#ffffff4d}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field-label{color:#fffc}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     input{color:#fff}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .notifications[_ngcontent-%COMP%]{position:relative}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .notifications[_ngcontent-%COMP%]   .notification-btn[_ngcontent-%COMP%]{position:relative;color:#fff}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .notifications[_ngcontent-%COMP%]   .notification-btn[_ngcontent-%COMP%]   .notification-badge[_ngcontent-%COMP%]{position:absolute;top:-2px;right:-2px;background:#ff4757;color:#fff;border-radius:50%;width:18px;height:18px;font-size:10px;display:flex;align-items:center;justify-content:center;font-weight:600}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:rgba(255,255,255,.2);display:flex;align-items:center;justify-content:center;font-weight:600;font-size:14px;color:#fff}.order-assignments-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:flex;gap:16px;padding:24px}.order-assignments-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{background:white;border-radius:12px;padding:20px;display:flex;align-items:center;gap:16px;box-shadow:0 1px 3px #0000001a;min-width:200px}.order-assignments-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:48px;height:48px;font-size:24px;background:#f1f5f9;border-radius:12px;display:flex;align-items:center;justify-content:center;color:#64748b}.order-assignments-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{display:block;font-size:24px;font-weight:700;color:#1e293b;line-height:1.2}.order-assignments-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:14px;color:#64748b;font-weight:500}.order-assignments-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-item.online[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{background:#dcfce7;color:#16a34a}.order-assignments-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat-item.active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{background:#dbeafe;color:#2563eb}.order-assignments-container[_ngcontent-%COMP%]   .alert-banner[_ngcontent-%COMP%]{margin:0 24px 24px;background:#fef3c7;border:1px solid #f59e0b;border-radius:8px;padding:12px 16px;display:flex;align-items:center;gap:12px}.order-assignments-container[_ngcontent-%COMP%]   .alert-banner[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{color:#d97706}.order-assignments-container[_ngcontent-%COMP%]   .alert-banner[_ngcontent-%COMP%]   .alert-text[_ngcontent-%COMP%]{font-weight:500;color:#92400e}.order-assignments-container[_ngcontent-%COMP%]   .alert-banner[_ngcontent-%COMP%]   .alert-count[_ngcontent-%COMP%]{background:#dc2626;color:#fff;border-radius:12px;padding:4px 8px;font-size:12px;font-weight:600;min-width:20px;text-align:center}.order-assignments-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]{background:white;margin:0 24px 24px;padding:20px;border-radius:12px;box-shadow:0 1px 3px #0000001a;display:flex;align-items:center;gap:20px;flex-wrap:wrap}.order-assignments-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.order-assignments-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#374151}.order-assignments-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-field[_ngcontent-%COMP%], .order-assignments-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{min-width:200px}.order-assignments-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-field[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper, .order-assignments-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.order-assignments-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{margin-left:auto;display:flex;gap:12px}.order-assignments-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:8px;font-weight:500}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{background:white;margin:0 24px;border-radius:12px;box-shadow:0 1px 3px #0000001a;overflow:hidden}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]{width:100%}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc;font-weight:600;color:#374151;border-bottom:1px solid #e5e7eb;padding:16px}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #f3f4f6}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .partner-id[_ngcontent-%COMP%]{font-family:Monaco,Menlo,monospace;font-weight:600;color:#6366f1;background:#eef2ff;padding:4px 8px;border-radius:6px;font-size:12px}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .name-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .name-cell[_ngcontent-%COMP%]   .user-icon[_ngcontent-%COMP%]{color:#6b7280}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .name-cell[_ngcontent-%COMP%]   .partner-name[_ngcontent-%COMP%]{font-weight:500;color:#111827}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .phone-link[_ngcontent-%COMP%]{color:#2563eb;text-decoration:none;font-weight:500}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .phone-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .vehicle-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .vehicle-cell[_ngcontent-%COMP%]   .vehicle-icon[_ngcontent-%COMP%]{color:#6b7280}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:16px;font-size:12px;font-weight:600;text-transform:uppercase}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .status-badge.status-active[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .status-badge.status-pending[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .status-badge.status-suspended[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .status-badge.status-blocked[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .verification-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .verification-cell[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .verification-cell[_ngcontent-%COMP%]   mat-icon.verification-verified[_ngcontent-%COMP%]{color:#059669}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .verification-cell[_ngcontent-%COMP%]   mat-icon.verification-pending[_ngcontent-%COMP%]{color:#d97706}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .verification-cell[_ngcontent-%COMP%]   mat-icon.verification-rejected[_ngcontent-%COMP%]{color:#dc2626}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .rating-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .rating-cell[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%]{color:#fbbf24;font-size:16px}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .deliveries-count[_ngcontent-%COMP%]{font-weight:600;color:#374151}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .online-status.online[_ngcontent-%COMP%]{color:#059669}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .online-status.offline[_ngcontent-%COMP%], .order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .actions-btn[_ngcontent-%COMP%]{color:#6b7280}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   .actions-btn[_ngcontent-%COMP%]:hover{color:#374151}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   tr.online-row[_ngcontent-%COMP%]:hover{background:#f0fdf4}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   tr.offline-row[_ngcontent-%COMP%]{opacity:.7}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .partners-table[_ngcontent-%COMP%]   tr.offline-row[_ngcontent-%COMP%]:hover{background:#f9fafb}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-bottom:16px}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin:0}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;color:#d1d5db;margin-bottom:16px}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#374151;margin:0 0 8px}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin:0}.order-assignments-container[_ngcontent-%COMP%]   .table-paginator[_ngcontent-%COMP%]{background:white;margin:0 24px;border-radius:0 0 12px 12px}.order-assignments-container[_ngcontent-%COMP%]   .table-info[_ngcontent-%COMP%]{text-align:center;padding:16px;color:#6b7280;font-size:14px}  .mat-mdc-menu-panel .mat-mdc-menu-item.danger{color:#dc2626}  .mat-mdc-menu-panel .mat-mdc-menu-item.danger mat-icon{color:#dc2626}  .mat-mdc-menu-panel .mat-mdc-menu-item.success{color:#059669}  .mat-mdc-menu-panel .mat-mdc-menu-item.success mat-icon{color:#059669}@media (max-width: 768px){.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;text-align:center}.order-assignments-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:250px}.order-assignments-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{flex-direction:column}.order-assignments-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.order-assignments-container[_ngcontent-%COMP%]   .filters-container[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{margin-left:0;margin-top:16px}.order-assignments-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto}}"]})}}return r})();function Gi(r,s){if(1&r&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&r){const e=t.XpG();t.R7$(1),t.SpI(" Partner ",e.getPaymentDirection()," partner ")}}function Bi(r,s){if(1&r&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&r){const e=t.XpG();t.R7$(1),t.SpI(" You will pay ",e.getPaymentDirection()," partner ")}}let Vi=(()=>{class r{constructor(e,n){this.dialogRef=e,this.data=n,this.paymentMethod="CASH",this.notes=""}onCancel(){this.dialogRef.close()}onConfirm(){this.dialogRef.close({paymentMethod:this.paymentMethod,notes:this.notes})}formatCurrency(e){return`\u20b9${Math.abs(e).toFixed(2)}`}getPaymentDirection(){return this.data.netAmount>0?"received from":"paid to"}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(y.CP),t.rXU(y.Vh))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-payment-confirm-dialog"]],standalone:!0,features:[t.aNF],decls:61,vars:13,consts:[["mat-dialog-title",""],[1,"payment-summary"],[1,"partner-info"],[1,"amount-breakdown"],[1,"breakdown-row"],[1,"amount-collected"],[1,"amount-commission"],[1,"breakdown-divider"],[1,"breakdown-row","total-row"],[1,"payment-direction"],[4,"ngIf"],["appearance","outline",1,"full-width"],[3,"ngModel","ngModelChange"],["value","CASH"],["value","BANK_TRANSFER"],["value","UPI"],["value","CHEQUE"],["matInput","","placeholder","Add any notes about this payment...","rows","3",3,"ngModel","ngModelChange"],[1,"warning-box"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(n,i){1&n&&(t.j41(0,"h2",0)(1,"mat-icon"),t.EFF(2,"payment"),t.k0s(),t.EFF(3," Confirm Payment Settlement\n"),t.k0s(),t.j41(4,"mat-dialog-content")(5,"div",1)(6,"div",2)(7,"h3"),t.EFF(8),t.k0s(),t.j41(9,"p"),t.EFF(10),t.k0s()(),t.j41(11,"div",3)(12,"div",4)(13,"span"),t.EFF(14,"Cash Collected (COD):"),t.k0s(),t.j41(15,"strong",5),t.EFF(16),t.k0s()(),t.j41(17,"div",4)(18,"span"),t.EFF(19,"Commission Owed:"),t.k0s(),t.j41(20,"strong",6),t.EFF(21),t.k0s()(),t.nrm(22,"div",7),t.j41(23,"div",8)(24,"span"),t.EFF(25,"Net Amount:"),t.k0s(),t.j41(26,"strong"),t.EFF(27),t.k0s()(),t.j41(28,"div",9)(29,"mat-icon"),t.EFF(30),t.k0s(),t.DNE(31,Gi,2,1,"span",10),t.DNE(32,Bi,2,1,"span",10),t.k0s()(),t.j41(33,"mat-form-field",11)(34,"mat-label"),t.EFF(35,"Payment Method"),t.k0s(),t.j41(36,"mat-select",12),t.bIt("ngModelChange",function(c){return i.paymentMethod=c}),t.j41(37,"mat-option",13),t.EFF(38,"Cash"),t.k0s(),t.j41(39,"mat-option",14),t.EFF(40,"Bank Transfer"),t.k0s(),t.j41(41,"mat-option",15),t.EFF(42,"UPI"),t.k0s(),t.j41(43,"mat-option",16),t.EFF(44,"Cheque"),t.k0s()()(),t.j41(45,"mat-form-field",11)(46,"mat-label"),t.EFF(47,"Notes (Optional)"),t.k0s(),t.j41(48,"textarea",17),t.bIt("ngModelChange",function(c){return i.notes=c}),t.k0s()(),t.j41(49,"div",18)(50,"mat-icon"),t.EFF(51,"info"),t.k0s(),t.j41(52,"p"),t.EFF(53),t.k0s()()()(),t.j41(54,"mat-dialog-actions",19)(55,"button",20),t.bIt("click",function(){return i.onCancel()}),t.EFF(56,"Cancel"),t.k0s(),t.j41(57,"button",21),t.bIt("click",function(){return i.onConfirm()}),t.j41(58,"mat-icon"),t.EFF(59,"check_circle"),t.k0s(),t.EFF(60," Confirm Payment "),t.k0s()()),2&n&&(t.R7$(8),t.JRh(i.data.partnerName),t.R7$(2),t.JRh(i.data.partnerPhone),t.R7$(6),t.JRh(i.formatCurrency(i.data.cashCollected)),t.R7$(5),t.SpI("-",i.formatCurrency(i.data.commissionEarned),""),t.R7$(5),t.HbH(i.data.netAmount>0?"amount-positive":"amount-negative"),t.R7$(1),t.SpI(" ",i.formatCurrency(i.data.netAmount)," "),t.R7$(3),t.JRh(i.data.netAmount>0?"arrow_downward":"arrow_upward"),t.R7$(1),t.Y8G("ngIf",i.data.netAmount>0),t.R7$(1),t.Y8G("ngIf",i.data.netAmount<0),t.R7$(4),t.Y8G("ngModel",i.paymentMethod),t.R7$(12),t.Y8G("ngModel",i.notes),t.R7$(5),t.SpI("This action will mark the payment as settled. Make sure you have ",i.data.netAmount>0?"received":"paid"," the amount offline before confirming."))},dependencies:[a.MD,a.bT,y.hM,y.BI,y.Yi,y.E7,x.Hl,x.$z,D.RG,D.rl,D.nJ,B.fS,B.fg,V.Ve,V.VO,J.wT,w.m_,w.An,h.YN,h.me,h.BC,h.vS],styles:["h2[mat-dialog-title][_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0;padding:20px 24px;background-color:#f5f5f5;border-bottom:1px solid #e0e0e0}h2[mat-dialog-title][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2}mat-dialog-content[_ngcontent-%COMP%]{padding:24px}.payment-summary[_ngcontent-%COMP%]   .partner-info[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:16px;border-bottom:2px solid #e0e0e0}.payment-summary[_ngcontent-%COMP%]   .partner-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:20px;font-weight:600;color:#333}.payment-summary[_ngcontent-%COMP%]   .partner-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.payment-summary[_ngcontent-%COMP%]   .amount-breakdown[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:20px;border-radius:8px;margin-bottom:24px}.payment-summary[_ngcontent-%COMP%]   .amount-breakdown[_ngcontent-%COMP%]   .breakdown-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;font-size:14px}.payment-summary[_ngcontent-%COMP%]   .amount-breakdown[_ngcontent-%COMP%]   .breakdown-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666}.payment-summary[_ngcontent-%COMP%]   .amount-breakdown[_ngcontent-%COMP%]   .breakdown-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.payment-summary[_ngcontent-%COMP%]   .amount-breakdown[_ngcontent-%COMP%]   .breakdown-row[_ngcontent-%COMP%]   strong.amount-collected[_ngcontent-%COMP%]{color:#2e7d32}.payment-summary[_ngcontent-%COMP%]   .amount-breakdown[_ngcontent-%COMP%]   .breakdown-row[_ngcontent-%COMP%]   strong.amount-commission[_ngcontent-%COMP%]{color:#f57c00}.payment-summary[_ngcontent-%COMP%]   .amount-breakdown[_ngcontent-%COMP%]   .breakdown-row[_ngcontent-%COMP%]   strong.amount-positive[_ngcontent-%COMP%]{color:#2e7d32}.payment-summary[_ngcontent-%COMP%]   .amount-breakdown[_ngcontent-%COMP%]   .breakdown-row[_ngcontent-%COMP%]   strong.amount-negative[_ngcontent-%COMP%]{color:#d32f2f}.payment-summary[_ngcontent-%COMP%]   .amount-breakdown[_ngcontent-%COMP%]   .breakdown-row.total-row[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:2px solid #e0e0e0;font-size:16px}.payment-summary[_ngcontent-%COMP%]   .amount-breakdown[_ngcontent-%COMP%]   .breakdown-row.total-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:#333}.payment-summary[_ngcontent-%COMP%]   .amount-breakdown[_ngcontent-%COMP%]   .breakdown-row.total-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:24px}.payment-summary[_ngcontent-%COMP%]   .amount-breakdown[_ngcontent-%COMP%]   .breakdown-divider[_ngcontent-%COMP%]{height:1px;background-color:#e0e0e0;margin:16px 0}.payment-summary[_ngcontent-%COMP%]   .amount-breakdown[_ngcontent-%COMP%]   .payment-direction[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:12px;padding:12px;background-color:#e3f2fd;border-radius:6px;color:#1976d2;font-size:14px;font-weight:500}.payment-summary[_ngcontent-%COMP%]   .amount-breakdown[_ngcontent-%COMP%]   .payment-direction[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.payment-summary[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.payment-summary[_ngcontent-%COMP%]   .warning-box[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px;background-color:#fff3e0;border-left:4px solid #f57c00;border-radius:4px;margin-top:16px}.payment-summary[_ngcontent-%COMP%]   .warning-box[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f57c00;font-size:24px;width:24px;height:24px;flex-shrink:0}.payment-summary[_ngcontent-%COMP%]   .warning-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#333;font-size:13px;line-height:1.5}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e0e0e0;background-color:#f5f5f5}mat-dialog-actions[_ngcontent-%COMP%]   button[mat-raised-button][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:18px;width:18px;height:18px}"]})}}return r})();function Ui(r,s){1&r&&(t.j41(0,"div",14),t.nrm(1,"mat-spinner"),t.k0s())}function Yi(r,s){1&r&&(t.j41(0,"div",15)(1,"p"),t.EFF(2,"\u2713 All payments settled"),t.k0s()())}function zi(r,s){if(1&r){const e=t.RV6();t.j41(0,"div",18),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.viewDetails(o))}),t.j41(1,"div",19)(2,"div",20)(3,"div",21),t.EFF(4),t.k0s(),t.j41(5,"div",22),t.EFF(6),t.k0s()(),t.j41(7,"div",23)(8,"span",24),t.EFF(9),t.k0s()()(),t.j41(10,"div",25)(11,"div",26)(12,"span",27),t.EFF(13,"Cash Collected (COD only):"),t.k0s(),t.j41(14,"span",28),t.EFF(15),t.k0s()(),t.j41(16,"div",26)(17,"span",27),t.EFF(18,"Commission Earned (All):"),t.k0s(),t.j41(19,"span",29),t.EFF(20),t.k0s()(),t.j41(21,"div",30)(22,"span",27),t.EFF(23),t.k0s(),t.j41(24,"span"),t.EFF(25),t.k0s()()(),t.j41(26,"div",31)(27,"button",32),t.bIt("click",function(i){const c=t.eBV(e).$implicit;return t.XpG(2).markAsPaid(c),t.Njj(i.stopPropagation())}),t.EFF(28," \u{1f4b3} Settle Payment "),t.k0s()()()}if(2&r){const e=s.$implicit,n=t.XpG(2);t.R7$(4),t.JRh(e.partnerName),t.R7$(2),t.SpI("\u{1f4f1} ",e.partnerPhone,""),t.R7$(3),t.SpI("",e.totalOrders," orders"),t.R7$(6),t.JRh(n.formatCurrency(e.cashCollected)),t.R7$(5),t.JRh(n.formatCurrency(e.commissionEarned)),t.R7$(3),t.JRh(e.netAmount>=0?"To Deposit to Office:":"Office Owes Partner:"),t.R7$(1),t.HbH(e.netAmount>=0?"value positive":"value negative"),t.R7$(1),t.SpI(" ",n.formatCurrency(n.Math.abs(e.netAmount))," ")}}function Xi(r,s){if(1&r&&(t.j41(0,"div",16),t.DNE(1,zi,29,9,"div",17),t.k0s()),2&r){const e=t.XpG();t.R7$(1),t.Y8G("ngForOf",e.payments)}}let Hi=(()=>{class r{constructor(e,n,i){this.http=e,this.dialog=n,this.snackBar=i,this.Math=Math,this.displayedColumns=["partnerName","totalOrders","cashCollected","commissionEarned","netAmount","actions"],this.payments=[],this.loading=!1,this.totalPartners=0}ngOnInit(){this.loadPayments()}loadPayments(){this.loading=!0,this.http.get(`${f.c.apiUrl}/admin/delivery-partners/payments`).subscribe({next:e=>{e.success&&(this.payments=e.payments,this.totalPartners=e.totalPartners),this.loading=!1},error:e=>{console.error("Error loading payments:",e),this.snackBar.open("Error loading payments","Close",{duration:3e3}),this.loading=!1}})}markAsPaid(e){this.dialog.open(Vi,{width:"500px",data:e}).afterClosed().subscribe(i=>{i&&this.processPayment(e,i)})}processPayment(e,n){this.loading=!0,this.http.post(`${f.c.apiUrl}/admin/delivery-partners/${e.partnerId}/mark-paid`,{amount:e.netAmount,paymentMethod:n.paymentMethod,notes:n.notes}).subscribe({next:o=>{o.success&&(this.snackBar.open("Payment marked as paid successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.loadPayments()),this.loading=!1},error:o=>{console.error("Error marking payment:",o),this.snackBar.open("Error processing payment","Close",{duration:3e3}),this.loading=!1}})}formatCurrency(e){return`\u20b9${e.toFixed(2)}`}getAmountClass(e){return e>0?"amount-positive":"amount-negative"}getAmountTooltip(e){return e>0?"Partner owes you this amount":e<0?"You owe partner this amount":"No pending amount"}getTotalCash(){return this.payments.reduce((e,n)=>e+n.cashCollected,0)}getTotalCommission(){return this.payments.reduce((e,n)=>e+n.commissionEarned,0)}viewDetails(e){console.log("View details for:",e.partnerName)}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(M.Qq),t.rXU(y.bZ),t.rXU($.UG))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-partner-payments"]],standalone:!0,features:[t.aNF],decls:40,vars:7,consts:[[1,"payment-dashboard"],[1,"summary-section"],[1,"summary-card"],[1,"card-icon","partners"],[1,"card-content"],[1,"card-label"],[1,"card-value"],[1,"card-icon","pending"],[1,"card-icon","cash"],[1,"card-icon","commission"],[1,"partners-section"],["class","loading",4,"ngIf"],["class","no-data",4,"ngIf"],["class","partner-list",4,"ngIf"],[1,"loading"],[1,"no-data"],[1,"partner-list"],["class","partner-card",3,"click",4,"ngFor","ngForOf"],[1,"partner-card",3,"click"],[1,"partner-header"],[1,"partner-info"],[1,"partner-name"],[1,"partner-contact"],[1,"partner-orders"],[1,"orders-badge"],[1,"partner-amounts"],[1,"amount-item"],[1,"label"],[1,"value"],[1,"value","commission"],[1,"amount-item","total"],[1,"partner-actions"],["mat-raised-button","","color","primary",3,"click"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.EFF(4,"\u{1f465}"),t.k0s(),t.j41(5,"div",4)(6,"div",5),t.EFF(7,"Total Partners"),t.k0s(),t.j41(8,"div",6),t.EFF(9),t.k0s()()(),t.j41(10,"div",2)(11,"div",7),t.EFF(12,"\u23f3"),t.k0s(),t.j41(13,"div",4)(14,"div",5),t.EFF(15,"Pending Payments"),t.k0s(),t.j41(16,"div",6),t.EFF(17),t.k0s()()(),t.j41(18,"div",2)(19,"div",8),t.EFF(20,"\u{1f4b5}"),t.k0s(),t.j41(21,"div",4)(22,"div",5),t.EFF(23,"Cash with Partners (COD)"),t.k0s(),t.j41(24,"div",6),t.EFF(25),t.k0s()()(),t.j41(26,"div",2)(27,"div",9),t.EFF(28,"\u{1f4b0}"),t.k0s(),t.j41(29,"div",4)(30,"div",5),t.EFF(31,"Total Commission (All Orders)"),t.k0s(),t.j41(32,"div",6),t.EFF(33),t.k0s()()()(),t.j41(34,"div",10)(35,"h2"),t.EFF(36,"Delivery Partner Payments"),t.k0s(),t.DNE(37,Ui,2,0,"div",11),t.DNE(38,Yi,3,0,"div",12),t.DNE(39,Xi,2,1,"div",13),t.k0s()()),2&n&&(t.R7$(9),t.JRh(i.totalPartners),t.R7$(8),t.JRh(i.payments.length),t.R7$(8),t.JRh(i.formatCurrency(i.getTotalCash())),t.R7$(8),t.JRh(i.formatCurrency(i.getTotalCommission())),t.R7$(4),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.payments.length),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.payments.length>0))},dependencies:[a.MD,a.Sq,a.bT,C.tP,x.Hl,x.$z,w.m_,_.Hu,y.hM,$._T,N.D6,N.LG,T.YN,ct.uc],styles:[".payment-dashboard[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto;background:#f5f7fa;min-height:100vh}.summary-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}.summary-card[_ngcontent-%COMP%]{background:white;border-radius:12px;padding:24px;display:flex;align-items:center;gap:16px;box-shadow:0 2px 8px #00000014;transition:transform .2s,box-shadow .2s}.summary-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 16px #0000001f}.summary-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:48px;width:64px;height:64px;display:flex;align-items:center;justify-content:center;border-radius:12px}.summary-card[_ngcontent-%COMP%]   .card-icon.partners[_ngcontent-%COMP%]{background:#e3f2fd}.summary-card[_ngcontent-%COMP%]   .card-icon.pending[_ngcontent-%COMP%]{background:#fff3e0}.summary-card[_ngcontent-%COMP%]   .card-icon.cash[_ngcontent-%COMP%]{background:#e8f5e9}.summary-card[_ngcontent-%COMP%]   .card-icon.commission[_ngcontent-%COMP%]{background:#f3e5f5}.summary-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{flex:1}.summary-card[_ngcontent-%COMP%]   .card-label[_ngcontent-%COMP%]{font-size:13px;color:#666;text-transform:uppercase;letter-spacing:.5px;margin-bottom:8px}.summary-card[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#333}.partners-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:600;color:#333;margin:0 0 20px}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px;background:white;border-radius:12px}.no-data[_ngcontent-%COMP%]{text-align:center;padding:60px;background:white;border-radius:12px;color:#2e7d32;font-size:18px;font-weight:500}.partner-list[_ngcontent-%COMP%]{display:grid;gap:16px}.partner-card[_ngcontent-%COMP%]{background:white;border-radius:12px;padding:24px;box-shadow:0 2px 8px #0000000f;cursor:pointer;transition:all .2s}.partner-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #0000001f;transform:translateY(-2px)}.partner-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid #f0f0f0}.partner-info[_ngcontent-%COMP%]{flex:1}.partner-info[_ngcontent-%COMP%]   .partner-name[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#333;margin-bottom:6px}.partner-info[_ngcontent-%COMP%]   .partner-contact[_ngcontent-%COMP%]{font-size:14px;color:#666}.partner-orders[_ngcontent-%COMP%]   .orders-badge[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;padding:6px 16px;border-radius:20px;font-size:13px;font-weight:600}.partner-amounts[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:20px}.amount-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#f8f9fa;border-radius:8px}.amount-item.total[_ngcontent-%COMP%]{background:#e3f2fd}.amount-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:13px;color:#666;font-weight:500}.amount-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#333}.amount-item[_ngcontent-%COMP%]   .value.commission[_ngcontent-%COMP%]{color:#f57c00}.amount-item[_ngcontent-%COMP%]   .value.positive[_ngcontent-%COMP%]{color:#2e7d32}.amount-item[_ngcontent-%COMP%]   .value.negative[_ngcontent-%COMP%]{color:#d32f2f}.partner-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.partner-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 24px;font-size:14px;font-weight:600}@media (max-width: 768px){.payment-dashboard[_ngcontent-%COMP%]{padding:12px}.summary-section[_ngcontent-%COMP%], .partner-amounts[_ngcontent-%COMP%]{grid-template-columns:1fr}.partner-header[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.card-value[_ngcontent-%COMP%]{font-size:24px!important}}"]})}}return r})();function Ji(r,s){1&r&&(t.j41(0,"div",4),t.nrm(1,"mat-spinner"),t.j41(2,"p"),t.EFF(3,"Loading available orders..."),t.k0s()())}function Ki(r,s){1&r&&(t.j41(0,"mat-header-cell"),t.EFF(1,"Order #"),t.k0s())}function Wi(r,s){if(1&r&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&r){const e=s.$implicit;t.R7$(1),t.JRh(e.orderNumber)}}function Qi(r,s){1&r&&(t.j41(0,"mat-header-cell"),t.EFF(1,"Customer"),t.k0s())}function qi(r,s){if(1&r&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&r){const e=s.$implicit;t.R7$(1),t.JRh(e.customerName)}}function Zi(r,s){1&r&&(t.j41(0,"mat-header-cell"),t.EFF(1,"Shop"),t.k0s())}function tr(r,s){if(1&r&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&r){const e=s.$implicit;t.R7$(1),t.JRh(e.shopName)}}function er(r,s){1&r&&(t.j41(0,"mat-header-cell"),t.EFF(1,"Delivery To"),t.k0s())}function nr(r,s){if(1&r&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&r){const e=s.$implicit;t.R7$(1),t.JRh(e.deliveryAddress)}}function ir(r,s){1&r&&(t.j41(0,"mat-header-cell"),t.EFF(1,"Earning"),t.k0s())}function rr(r,s){if(1&r&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&r){const e=s.$implicit;t.R7$(1),t.SpI("\u20b9",e.deliveryFee,"")}}function ar(r,s){1&r&&(t.j41(0,"mat-header-cell"),t.EFF(1,"Actions"),t.k0s())}function or(r,s){if(1&r){const e=t.RV6();t.j41(0,"mat-cell")(1,"button",17),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.acceptOrder(o.id))}),t.EFF(2," Accept "),t.k0s(),t.j41(3,"button",18),t.bIt("click",function(){const o=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.rejectOrder(o.id))}),t.EFF(4," Reject "),t.k0s()()}}function sr(r,s){1&r&&t.nrm(0,"mat-header-row")}function cr(r,s){1&r&&t.nrm(0,"mat-row")}function lr(r,s){1&r&&(t.j41(0,"div",19)(1,"mat-icon"),t.EFF(2,"assignment"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No available orders at the moment"),t.k0s()())}function dr(r,s){if(1&r&&(t.j41(0,"div")(1,"mat-table",5),t.qex(2,6),t.DNE(3,Ki,2,0,"mat-header-cell",7),t.DNE(4,Wi,2,1,"mat-cell",8),t.bVm(),t.qex(5,9),t.DNE(6,Qi,2,0,"mat-header-cell",7),t.DNE(7,qi,2,1,"mat-cell",8),t.bVm(),t.qex(8,10),t.DNE(9,Zi,2,0,"mat-header-cell",7),t.DNE(10,tr,2,1,"mat-cell",8),t.bVm(),t.qex(11,11),t.DNE(12,er,2,0,"mat-header-cell",7),t.DNE(13,nr,2,1,"mat-cell",8),t.bVm(),t.qex(14,12),t.DNE(15,ir,2,0,"mat-header-cell",7),t.DNE(16,rr,2,1,"mat-cell",8),t.bVm(),t.qex(17,13),t.DNE(18,ar,2,0,"mat-header-cell",7),t.DNE(19,or,5,0,"mat-cell",8),t.bVm(),t.DNE(20,sr,1,0,"mat-header-row",14),t.DNE(21,cr,1,0,"mat-row",15),t.k0s(),t.DNE(22,lr,5,0,"div",16),t.k0s()),2&r){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.dataSource),t.R7$(19),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(1),t.Y8G("ngIf",0===e.dataSource.data.length)}}let pr=(()=>{class r{constructor(e,n,i){this.orderAssignmentService=e,this.authService=n,this.snackBar=i,this.displayedColumns=["orderNumber","customerName","shopName","deliveryAddress","deliveryFee","actions"],this.dataSource=new C.I6([]),this.isLoading=!0,this.partnerId=null}ngOnInit(){const e=this.authService.getCurrentUser();e?(this.partnerId=e.id,this.loadAvailableOrders()):this.isLoading=!1}loadAvailableOrders(){this.partnerId&&(this.isLoading=!0,this.orderAssignmentService.getAvailableOrdersForPartner(this.partnerId).subscribe({next:e=>{this.dataSource.data=e.success&&e.orders?e.orders.map(n=>({id:n.id,orderNumber:n.orderNumber||"-",customerName:n.customerName||"-",shopName:n.shopName||"-",shopAddress:n.shopAddress||"-",deliveryAddress:n.deliveryAddress||"-",totalAmount:n.totalAmount||0,deliveryFee:n.deliveryFee||0,status:n.status||"ASSIGNED",createdAt:n.createdAt})):[],this.isLoading=!1},error:e=>{console.error("Error loading available orders:",e),this.snackBar.open("Failed to load available orders","Close",{duration:3e3}),this.dataSource.data=[],this.isLoading=!1}}))}acceptOrder(e){this.partnerId&&this.orderAssignmentService.acceptAssignment(Number(e),this.partnerId).subscribe({next:()=>{this.snackBar.open("Order accepted successfully!","Close",{duration:3e3}),this.loadAvailableOrders()},error:n=>{console.error("Error accepting order:",n),this.snackBar.open("Failed to accept order","Close",{duration:3e3})}})}rejectOrder(e){this.partnerId&&this.orderAssignmentService.rejectAssignment(Number(e),this.partnerId,"Not available").subscribe({next:()=>{this.snackBar.open("Order rejected","Close",{duration:3e3}),this.loadAvailableOrders()},error:n=>{console.error("Error rejecting order:",n),this.snackBar.open("Failed to reject order","Close",{duration:3e3})}})}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(Z.N),t.rXU(ut.u),t.rXU($.UG))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-available-orders"]],decls:10,vars:2,consts:[[1,"available-orders-container"],[1,"orders-card"],["class","loading-container",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],[1,"orders-table",3,"dataSource"],["matColumnDef","orderNumber"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","customerName"],["matColumnDef","shopName"],["matColumnDef","deliveryAddress"],["matColumnDef","deliveryFee"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","no-orders",4,"ngIf"],["mat-raised-button","","color","primary",2,"margin-right","8px",3,"click"],["mat-stroked-button","","color","warn",3,"click"],[1,"no-orders"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),t.EFF(4,"Available Orders"),t.k0s(),t.j41(5,"mat-card-subtitle"),t.EFF(6,"Accept orders to start earning"),t.k0s()(),t.j41(7,"mat-card-content"),t.DNE(8,Ji,4,0,"div",2),t.DNE(9,dr,23,4,"div",3),t.k0s()()()),2&n&&(t.R7$(8),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading))},dependencies:[a.bT,_.RN,_.m2,_.MM,_.Lc,_.dh,x.$z,C.Zl,C.tL,C.ji,C.cC,C.YV,C.iL,C.KS,C.$R,C.YZ,C.NB,w.An,N.LG],styles:[".available-orders-container[_ngcontent-%COMP%]{padding:1rem}.orders-card[_ngcontent-%COMP%]{margin-bottom:2rem}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:2rem}.loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-bottom:1rem}.orders-table[_ngcontent-%COMP%]{width:100%;margin-top:1rem}.no-orders[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:2rem;text-align:center;color:#666}.no-orders[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:1rem}"]})}}return r})();var gr=g(1034);let gt=(()=>{class r{constructor(e){this.router=e,this.title="",this.icon="construction"}ngOnInit(){const e=this.router.url;e.includes("performance")?(this.title="Performance",this.icon="trending_up"):e.includes("profile")?(this.title="Profile",this.icon="person"):e.includes("vehicle")?(this.title="Vehicle Info",this.icon="two_wheeler"):e.includes("help")?(this.title="Help Center",this.icon="help"):e.includes("emergency")?(this.title="Emergency",this.icon="emergency"):(this.title="Coming Soon",this.icon="construction")}static{this.\u0275fac=function(n){return new(n||r)(t.rXU(G.Ix))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-partner-placeholder"]],decls:12,vars:2,consts:[[1,"placeholder-container"],[1,"placeholder-card"],[1,"placeholder-icon"],["mat-raised-button","","color","primary","routerLink","/delivery/partner/orders"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"mat-icon",2),t.EFF(3),t.k0s(),t.j41(4,"h2"),t.EFF(5),t.k0s(),t.j41(6,"p"),t.EFF(7,"This feature is coming soon!"),t.k0s(),t.j41(8,"button",3)(9,"mat-icon"),t.EFF(10,"arrow_back"),t.k0s(),t.EFF(11," Back to My Orders "),t.k0s()()()),2&n&&(t.R7$(3),t.JRh(i.icon),t.R7$(2),t.JRh(i.title))},dependencies:[G.Wk,x.$z,w.An],styles:[".placeholder-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:60vh;padding:24px}.placeholder-card[_ngcontent-%COMP%]{text-align:center;padding:48px;background:white;border-radius:16px;box-shadow:0 2px 8px #0000001a;max-width:400px}.placeholder-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#667eea;margin-bottom:16px}h2[_ngcontent-%COMP%]{margin:0 0 8px;color:#333}p[_ngcontent-%COMP%]{color:#666;margin:0 0 24px}"]})}}return r})();var O=g(38);const mr=[{path:"dashboard",component:Xt,canActivate:[I.q],title:"Delivery Dashboard"},{path:"partner/register",component:ke,title:"Delivery Partner Registration"},{path:"partner/dashboard",component:fe,canActivate:[I.q,S.K],data:{roles:[O.g.SUPER_ADMIN,O.g.DELIVERY_PARTNER],title:"Delivery Partner Dashboard"}},{path:"partner/orders",component:kt,canActivate:[I.q,S.K],data:{roles:[O.g.SUPER_ADMIN,O.g.DELIVERY_PARTNER],title:"My Orders"}},{path:"partner/available",component:pr,canActivate:[I.q,S.K],data:{roles:[O.g.SUPER_ADMIN,O.g.DELIVERY_PARTNER],title:"Available Orders"}},{path:"partner/deliveries",component:kt,canActivate:[I.q,S.K],data:{roles:[O.g.SUPER_ADMIN,O.g.DELIVERY_PARTNER],title:"My Deliveries"}},{path:"partner/earnings",component:Ot,canActivate:[I.q,S.K],data:{roles:[O.g.SUPER_ADMIN,O.g.DELIVERY_PARTNER],title:"Earnings"}},{path:"partner/performance",component:gt,canActivate:[I.q,S.K],data:{roles:[O.g.SUPER_ADMIN,O.g.DELIVERY_PARTNER],title:"Performance"}},{path:"partner/profile",component:gt,canActivate:[I.q,S.K],data:{roles:[O.g.SUPER_ADMIN,O.g.DELIVERY_PARTNER],title:"Profile"}},{path:"partner/documents",component:gr.u,canActivate:[I.q,S.K],data:{roles:[O.g.SUPER_ADMIN,O.g.DELIVERY_PARTNER],title:"Documents"}},{path:"partner/vehicle",component:gt,canActivate:[I.q,S.K],data:{roles:[O.g.SUPER_ADMIN,O.g.DELIVERY_PARTNER],title:"Vehicle Info"}},{path:"partner/help",component:gt,canActivate:[I.q,S.K],data:{roles:[O.g.SUPER_ADMIN,O.g.DELIVERY_PARTNER],title:"Help Center"}},{path:"partner/emergency",component:gt,canActivate:[I.q,S.K],data:{roles:[O.g.SUPER_ADMIN,O.g.DELIVERY_PARTNER],title:"Emergency"}},{path:"admin/partners",component:dn,canActivate:[I.q,S.K],data:{roles:[O.g.SUPER_ADMIN,O.g.ADMIN],title:"Manage Partners"}},{path:"tracking/:assignmentId",component:Fn,title:"Order Tracking"},{path:"analytics",component:oi,canActivate:[I.q,S.K],data:{roles:[O.g.SUPER_ADMIN,O.g.ADMIN],title:"Delivery Analytics"}},{path:"documents/view/:id/:name",component:hi,canActivate:[I.q],title:"View Documents"},{path:"admin/assignments",component:Li,canActivate:[I.q,S.K],data:{roles:[O.g.SUPER_ADMIN,O.g.ADMIN],title:"Order Assignments"}},{path:"admin/tracking",component:Gn,canActivate:[I.q,S.K],data:{roles:[O.g.SUPER_ADMIN,O.g.ADMIN],title:"Live Tracking Dashboard"}},{path:"partner-payments",component:Hi,canActivate:[I.q,S.K],data:{roles:[O.g.SUPER_ADMIN,O.g.ADMIN],title:"Partner Payments"}},{path:"",redirectTo:"admin/partners",pathMatch:"full"}];let ur=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({imports:[G.iI.forChild(mr),G.iI]})}}return r})();var _r=g(3887);let hr=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=t.$C({type:r})}static{this.\u0275inj=t.G2t({providers:[rt.WS,Z.N,Ct,E],imports:[a.MD,h.X1,h.YN,ur,_r.G,ot.s5,_.Hu,x.Hl,D.RG,B.fS,V.Ve,Q.X6,J.WX,C.tP,q.Ou,z.NQ,w.m_,T.YN,N.D6,$._T,y.hM,et.MY,nt.RI,st.mV,_t.PO,ht.Y,X.Cn,ct.uc,it.aP,lt.w,H.Fg]})}}return r})()}}]);