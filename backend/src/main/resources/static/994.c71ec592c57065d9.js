"use strict";(self.webpackChunkshop_management_frontend=self.webpackChunkshop_management_frontend||[]).push([[994],{7994:(Si,W,l)=>{l.r(W),l.d(W,{AdminModule:()=>Ii});var u=l(177),$=l(1188),s=l(9417),m=l(9159),y=l(6695),I=l(2042),_=l(8834),F=l(9213),O=l(9631),p=l(2102),N=l(2798),d=l(5596),P=l(5351),S=l(5084),T=l(6600),V=l(2765),G=l(6471),D=l(4823),k=l(9183),E=l(5416),Y=l(450),B=l(5571),U=l(9115),X=l(5951),z=l(7575),J=l(1997),dt=l(8032),f=l.n(dt),t=l(7705),g=l(7673),M=l(5558),C=l(9437),h=l(6354),R=l(2525),v=l(1626);let pt=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${R.c.apiUrl}`}getDashboardStats(){return this.http.get(`${this.apiUrl}/admin/dashboard/stats`).pipe((0,M.n)(e=>(0,g.of)(e.data)),(0,C.W)(()=>(0,g.of)({totalUsers:1547,totalShops:234,totalOrders:8923,totalRevenue:1234567,activeUsers:892,pendingShops:23,todayOrders:156,todayRevenue:23456,userGrowth:12.5,shopGrowth:8.3,orderGrowth:15.7,revenueGrowth:22.1})))}getAllUsers(e=0,o=20){return this.http.get(`${this.apiUrl}/admin/users`,{params:{page:e.toString(),size:o.toString()}}).pipe((0,M.n)(i=>(0,g.of)(i.data||[])),(0,C.W)(()=>{const i=[{id:1,username:"superadmin",email:"admin@nammaooru.com",firstName:"Super",lastName:"Admin",role:"SUPER_ADMIN",status:"ACTIVE",isActive:!0,emailVerified:!0,createdAt:(new Date).toISOString(),lastLoginAt:(new Date).toISOString()},{id:2,username:"shopowner1",email:"shop1@example.com",firstName:"Rajesh",lastName:"Kumar",role:"SHOP_OWNER",status:"ACTIVE",isActive:!0,emailVerified:!0,createdAt:new Date(Date.now()-6048e5).toISOString(),lastLoginAt:new Date(Date.now()-72e5).toISOString()}];return(0,g.of)(i)}))}getAllShops(e=0,o=20){return this.http.get(`${this.apiUrl}/admin/shops`,{params:{page:e.toString(),size:o.toString()}}).pipe((0,M.n)(i=>(0,g.of)(i.data||[])),(0,C.W)(()=>{const i=[{id:1,name:"Annamalai Stores",description:"Fresh vegetables and groceries",ownerName:"Annamalai",ownerEmail:"annamalai@stores.com",ownerPhone:"+91 98765 43210",category:"Grocery",status:"APPROVED",isActive:!0,addressLine1:"123 T.Nagar Main Road",city:"Chennai",state:"Tamil Nadu",postalCode:"600017",createdAt:new Date(Date.now()-2592e6).toISOString(),approvedAt:new Date(Date.now()-216e7).toISOString()},{id:2,name:"Saravana Medical",description:"Medicines and healthcare products",ownerName:"Dr. Saravanan",ownerEmail:"saravana@medical.com",ownerPhone:"+91 98765 43211",category:"Pharmacy",status:"PENDING",isActive:!1,addressLine1:"456 Adyar Main Road",city:"Chennai",state:"Tamil Nadu",postalCode:"600020",createdAt:new Date(Date.now()-1728e5).toISOString()}];return(0,g.of)(i)}))}updateUserStatus(e,o){return this.http.put(`${this.apiUrl}/admin/users/${e}/status`,{status:o}).pipe((0,M.n)(i=>(0,g.of)(i.data)),(0,C.W)(()=>{const i={id:e,username:"mockuser",email:"mock@example.com",firstName:"Mock",lastName:"User",role:"CUSTOMER",status:o,isActive:"ACTIVE"===o,emailVerified:!0,createdAt:(new Date).toISOString()};return(0,g.of)(i)}))}approveShop(e,o){return this.http.post(`${this.apiUrl}/admin/shops/${e}/approve`,{notes:o}).pipe((0,M.n)(i=>(0,g.of)(i.data)),(0,C.W)(()=>{const i={id:e,name:"Mock Shop",description:"Mock description",ownerName:"Mock Owner",ownerEmail:"mock@shop.com",ownerPhone:"+91 9876543210",category:"Mock Category",status:"APPROVED",isActive:!0,addressLine1:"Mock Address",city:"Chennai",state:"Tamil Nadu",postalCode:"600001",createdAt:(new Date).toISOString(),approvedAt:(new Date).toISOString()};return(0,g.of)(i)}))}rejectShop(e,o){return this.http.post(`${this.apiUrl}/admin/shops/${e}/reject`,{reason:o}).pipe((0,M.n)(i=>(0,g.of)(i.data)),(0,C.W)(()=>{const i={id:e,name:"Mock Shop",description:"Mock description",ownerName:"Mock Owner",ownerEmail:"mock@shop.com",ownerPhone:"+91 9876543210",category:"Mock Category",status:"REJECTED",isActive:!1,addressLine1:"Mock Address",city:"Chennai",state:"Tamil Nadu",postalCode:"600001",createdAt:(new Date).toISOString(),rejectedAt:(new Date).toISOString(),rejectionReason:o};return(0,g.of)(i)}))}getSystemMetrics(){return this.http.get(`${this.apiUrl}/admin/system/metrics`).pipe((0,M.n)(e=>(0,g.of)(e.data)),(0,C.W)(()=>{const e={cpuUsage:Math.floor(30*Math.random())+20,memoryUsage:Math.floor(20*Math.random())+60,diskUsage:Math.floor(15*Math.random())+45,activeConnections:Math.floor(100*Math.random())+50,responseTime:Math.floor(50*Math.random())+100,errorRate:2*Math.random()};return(0,g.of)(e)}))}getRecentActivity(){return this.http.get(`${this.apiUrl}/admin/activity/recent`).pipe((0,M.n)(e=>(0,g.of)(e.data||[])),(0,C.W)(()=>{const e=[{id:1,type:"USER_REGISTRATION",message:"New user registered: john.doe@example.com",timestamp:new Date(Date.now()-6e5).toISOString(),severity:"info"},{id:2,type:"SHOP_APPLICATION",message:"New shop application: Chennai Fresh Mart",timestamp:new Date(Date.now()-15e5).toISOString(),severity:"warning"},{id:3,type:"ORDER_PLACED",message:"High value order placed: \u20b95,000",timestamp:new Date(Date.now()-27e5).toISOString(),severity:"success"}];return(0,g.of)(e)}))}getUsersByRole(e){return this.http.get(`${this.apiUrl}/admin/users/role/${e}`).pipe((0,M.n)(o=>(0,g.of)(o.data||[])),(0,C.W)(()=>this.getAllUsers().pipe((0,h.T)(o=>o.filter(i=>i.role===e)))))}getShopsByStatus(e){return this.http.get(`${this.apiUrl}/admin/shops/status/${e}`).pipe((0,M.n)(o=>(0,g.of)(o.data||[])),(0,C.W)(()=>this.getAllShops().pipe((0,h.T)(o=>o.filter(i=>i.status===e)))))}searchUsers(e){return this.http.get(`${this.apiUrl}/admin/users/search`,{params:{q:e}}).pipe((0,M.n)(o=>(0,g.of)(o.data||[])),(0,C.W)(()=>this.getAllUsers().pipe((0,h.T)(o=>o.filter(i=>i.username.toLowerCase().includes(e.toLowerCase())||i.email.toLowerCase().includes(e.toLowerCase())||i.firstName.toLowerCase().includes(e.toLowerCase())||i.lastName.toLowerCase().includes(e.toLowerCase()))))))}searchShops(e){return this.http.get(`${this.apiUrl}/admin/shops/search`,{params:{q:e}}).pipe((0,M.n)(o=>(0,g.of)(o.data||[])),(0,C.W)(()=>this.getAllShops().pipe((0,h.T)(o=>o.filter(i=>i.name.toLowerCase().includes(e.toLowerCase())||i.ownerName.toLowerCase().includes(e.toLowerCase())||i.category.toLowerCase().includes(e.toLowerCase()))))))}createUser(e){return this.http.post(`${this.apiUrl}/admin/users`,e).pipe((0,M.n)(o=>(0,g.of)(o.data)),(0,C.W)(()=>{const o={id:Math.floor(1e4*Math.random()),username:e.username||"newuser",email:e.email||"new@example.com",firstName:e.firstName||"New",lastName:e.lastName||"User",role:e.role||"CUSTOMER",status:"ACTIVE",isActive:!0,emailVerified:!1,createdAt:(new Date).toISOString()};return(0,g.of)(o)}))}deleteUser(e){return this.http.delete(`${this.apiUrl}/admin/users/${e}`).pipe((0,M.n)(()=>(0,g.of)(!0)),(0,C.W)(()=>(0,g.of)(!0)))}exportData(e){return this.http.get(`${this.apiUrl}/admin/export/${e}`,{responseType:"blob"}).pipe((0,C.W)(()=>{const o=`id,name,email,created_at\n1,Mock User,mock@example.com,${(new Date).toISOString()}`,i=new Blob([o],{type:"text/csv"});return(0,g.of)(i)}))}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(v.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gt(n,a){if(1&n&&(t.j41(0,"mat-option",37),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.SpI(" ",e.label," ")}}function ut(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Name"),t.k0s())}function _t(n,a){if(1&n&&(t.j41(0,"td",39)(1,"div",40)(2,"strong"),t.EFF(3),t.k0s(),t.j41(4,"div",41),t.EFF(5),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(3),t.Lme("",e.firstName," ",e.lastName,""),t.R7$(2),t.SpI("ID: ",e.id,"")}}function ft(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Email"),t.k0s())}function Ct(n,a){1&n&&(t.j41(0,"div",44)(1,"mat-icon",45),t.EFF(2,"verified"),t.k0s(),t.EFF(3," Verified "),t.k0s())}function ht(n,a){if(1&n&&(t.j41(0,"td",39)(1,"div",42)(2,"div"),t.EFF(3),t.k0s(),t.DNE(4,Ct,4,0,"div",43),t.k0s()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.email),t.R7$(1),t.Y8G("ngIf",e.emailVerified)}}function Mt(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Mobile"),t.k0s())}function Pt(n,a){1&n&&(t.j41(0,"div",44)(1,"mat-icon",45),t.EFF(2,"verified"),t.k0s(),t.EFF(3," Verified "),t.k0s())}function Ft(n,a){if(1&n&&(t.j41(0,"td",39)(1,"div",42)(2,"div"),t.EFF(3),t.k0s(),t.DNE(4,Pt,4,0,"div",43),t.k0s()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.mobileNumber),t.R7$(1),t.Y8G("ngIf",e.mobileVerified)}}function kt(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"City"),t.k0s())}function bt(n,a){if(1&n&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.SpI(" ",e.city||"N/A"," ")}}function vt(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Status"),t.k0s())}function xt(n,a){if(1&n&&(t.j41(0,"td",39)(1,"mat-chip"),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG();t.R7$(1),t.HbH(o.getStatusClass(e.status||"ACTIVE")),t.R7$(1),t.SpI(" ",o.getStatusLabel(e.status||"ACTIVE")," ")}}function Ot(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Orders"),t.k0s())}function Et(n,a){if(1&n&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.SpI(" ",e.role," ")}}function Rt(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Total Spent"),t.k0s())}function jt(n,a){if(1&n&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,o=t.XpG();t.R7$(1),t.SpI(" ",o.getRoleLabel(e.role)," ")}}function yt(n,a){1&n&&(t.j41(0,"th",38),t.EFF(1,"Joined"),t.k0s())}function It(n,a){if(1&n&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,o=t.XpG();t.R7$(1),t.SpI(" ",o.formatDate(e.createdAt||"")," ")}}function St(n,a){1&n&&(t.j41(0,"th",46),t.EFF(1,"Actions"),t.k0s())}function Dt(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",53),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG();return t.Njj(r.verifyUserEmail(i))}),t.j41(1,"mat-icon"),t.EFF(2,"email"),t.k0s()()}}function $t(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",39)(1,"div",47)(2,"button",48),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.viewUser(r))}),t.j41(3,"mat-icon"),t.EFF(4,"visibility"),t.k0s()(),t.j41(5,"button",49),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.editUser(r))}),t.j41(6,"mat-icon"),t.EFF(7,"edit"),t.k0s()(),t.j41(8,"button",50),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.toggleUserStatus(r))}),t.j41(9,"mat-icon"),t.EFF(10),t.k0s()(),t.DNE(11,Dt,3,0,"button",51),t.j41(12,"button",52),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.deleteUser(r))}),t.j41(13,"mat-icon"),t.EFF(14,"delete"),t.k0s()()()()}if(2&n){const e=a.$implicit;t.R7$(8),t.Y8G("color",e.isActive?"warn":"primary")("matTooltip",e.isActive?"Deactivate":"Activate"),t.R7$(2),t.JRh(e.isActive?"block":"check_circle"),t.R7$(1),t.Y8G("ngIf",!e.emailVerified)}}function Nt(n,a){1&n&&t.nrm(0,"tr",54)}function Tt(n,a){if(1&n){const e=t.RV6();t.j41(0,"tr",55),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.viewUser(r))}),t.k0s()}}function wt(n,a){1&n&&(t.j41(0,"div",56),t.nrm(1,"mat-spinner"),t.k0s())}function Gt(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",57)(1,"mat-icon"),t.EFF(2,"people_outline"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No users found"),t.k0s(),t.j41(5,"p"),t.EFF(6,"Try adjusting your search criteria or create a new user."),t.k0s(),t.j41(7,"button",2),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.createUser())}),t.j41(8,"mat-icon"),t.EFF(9,"add"),t.k0s(),t.EFF(10," Add First User "),t.k0s()()}}const At=function(){return[5,10,25,50,100]};let Lt=(()=>{class n{constructor(e,o){this.adminService=e,this.router=o,this.displayedColumns=["fullName","email","mobileNumber","city","status","totalOrders","totalSpent","createdAt","actions"],this.dataSource=new m.I6,this.isLoading=!1,this.totalElements=0,this.pageSize=10,this.pageIndex=0,this.searchTerm="",this.selectedStatus="",this.selectedRole="",this.statusOptions=[{value:"",label:"All Statuses"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"SUSPENDED",label:"Suspended"}],this.roleOptions=[{value:"",label:"All Roles"},{value:"SUPER_ADMIN",label:"Super Admin"},{value:"ADMIN",label:"Admin"},{value:"SHOP_OWNER",label:"Shop Owner"},{value:"CUSTOMER",label:"Customer"}],this.userStats={totalUsers:0,activeUsers:0,verifiedUsers:0,adminUsers:0}}ngOnInit(){this.loadUsers(),this.loadUserStats()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.sortingDataAccessor=(e,o)=>{switch(o){case"fullName":return`${e.firstName} ${e.lastName}`.toLowerCase();case"status":return e.status||"";case"role":return e.role||"";case"createdAt":return new Date(e.createdAt||"").getTime();default:return e[o]||""}}}loadUsers(){this.isLoading=!0,this.adminService.getAllUsers(this.pageIndex,this.pageSize).subscribe({next:e=>{let o=e;this.searchTerm&&(o=e.filter(i=>i.username.toLowerCase().includes(this.searchTerm.toLowerCase())||i.email.toLowerCase().includes(this.searchTerm.toLowerCase())||i.firstName.toLowerCase().includes(this.searchTerm.toLowerCase())||i.lastName.toLowerCase().includes(this.searchTerm.toLowerCase()))),this.selectedStatus&&(o=o.filter(i=>i.status===this.selectedStatus)),this.selectedRole&&(o=o.filter(i=>i.role===this.selectedRole)),this.dataSource.data=o,this.totalElements=o.length,this.isLoading=!1},error:e=>{console.error("Error loading users:",e),this.dataSource.data=[],this.totalElements=0,this.isLoading=!1}})}loadUserStats(){this.adminService.getDashboardStats().subscribe({next:e=>{this.userStats={totalUsers:e.totalUsers,activeUsers:e.activeUsers,verifiedUsers:e.activeUsers,adminUsers:e.totalUsers}},error:e=>{console.error("Error loading user stats:",e)}})}onSearchChange(){this.pageIndex=0,this.loadUsers()}onStatusChange(){this.pageIndex=0,this.loadUsers()}onRoleChange(){this.pageIndex=0,this.loadUsers()}onPageChange(e){this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.loadUsers()}createUser(){this.router.navigate(["/admin/users/create"])}viewUser(e){this.router.navigate(["/admin/users",e.id])}editUser(e){this.router.navigate(["/admin/users",e.id,"edit"])}deleteUser(e){f().fire({title:"Delete User",text:`Are you sure you want to delete "${e.firstName} ${e.lastName}"? This action cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete",cancelButtonText:"Cancel"}).then(o=>{o.isConfirmed&&this.adminService.deleteUser(e.id).subscribe({next:()=>{f().fire("Deleted!","User has been deleted successfully.","success"),this.loadUsers(),this.loadUserStats()},error:i=>{console.error("Error deleting user:",i),f().fire("Error!","Failed to delete user. Please try again.","error")}})})}toggleUserStatus(e){const o=e.isActive?"INACTIVE":"ACTIVE",i=e.isActive?"deactivate":"activate";f().fire({title:`${i.charAt(0).toUpperCase()+i.slice(1)} User`,text:`Are you sure you want to ${i} "${e.firstName} ${e.lastName}"?`,icon:"question",showCancelButton:!0,confirmButtonText:`Yes, ${i}`,cancelButtonText:"Cancel"}).then(r=>{r.isConfirmed&&this.adminService.updateUserStatus(e.id,o).subscribe({next:c=>{f().fire("Success!",`User ${i}d successfully.`,"success"),this.loadUsers()},error:c=>{console.error("Error updating user status:",c),f().fire("Error!",`Failed to ${i} user. Please try again.`,"error")}})})}sendWelcomeEmail(e){f().fire({title:"Send Welcome Email",text:`Send welcome email to ${e.firstName} ${e.lastName} (${e.email})?`,icon:"info",showCancelButton:!0,confirmButtonText:"Send Email",cancelButtonText:"Cancel"}).then(o=>{o.isConfirmed&&f().fire("Success!","Welcome email sent successfully.","success")})}verifyUserEmail(e){f().fire({title:"Verify Email",text:`Send email verification to ${e.email}?`,icon:"question",showCancelButton:!0,confirmButtonText:"Send Verification",cancelButtonText:"Cancel"}).then(o=>{o.isConfirmed&&(f().fire("Success!","Email verification sent successfully.","success"),this.loadUsers())})}getStatusClass(e){switch(e){case"ACTIVE":return"status-active";case"INACTIVE":return"status-inactive";case"SUSPENDED":return"status-suspended";default:return""}}getStatusLabel(e){switch(e){case"ACTIVE":return"Active";case"INACTIVE":return"Inactive";case"SUSPENDED":return"Suspended";default:return e}}getRoleLabel(e){switch(e){case"SUPER_ADMIN":return"Super Admin";case"ADMIN":return"Admin";case"SHOP_OWNER":return"Shop Owner";case"CUSTOMER":return"Customer";default:return e}}formatDate(e){return new Date(e).toLocaleDateString()}exportUsers(){f().fire({title:"Export Users",text:"Choose export format:",icon:"question",showCancelButton:!0,confirmButtonText:"Export CSV",cancelButtonText:"Cancel",showDenyButton:!0,denyButtonText:"Export Excel"}).then(e=>{e.isConfirmed?this.performExport("csv"):e.isDenied&&this.performExport("xlsx")})}performExport(e){this.adminService.exportData("users").subscribe({next:o=>{const i=window.URL.createObjectURL(o),r=document.createElement("a");r.href=i,r.download=`users-${(new Date).toISOString().split("T")[0]}.${e}`,r.click(),window.URL.revokeObjectURL(i),f().fire("Success!","Users exported successfully.","success")},error:o=>{console.error("Error exporting users:",o),f().fire("Error!","Failed to export users. Please try again.","error")}})}clearFilters(){this.searchTerm="",this.selectedStatus="",this.selectedRole="",this.pageIndex=0,this.loadUsers()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(pt),t.rXU($.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-customer-list"]],viewQuery:function(o,i){if(1&o&&(t.GBs(y.iy,5),t.GBs(I.B4,5)),2&o){let r;t.mGM(r=t.lsd())&&(i.paginator=r.first),t.mGM(r=t.lsd())&&(i.sort=r.first)}},decls:96,vars:16,consts:[[1,"user-list-container"],[1,"header-section"],["mat-raised-button","","color","primary",3,"click"],[1,"stats-section"],[1,"stat-card"],[1,"stat-number"],[1,"stat-label"],[1,"filters-card"],[1,"filters-row"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by name, email, or mobile",3,"ngModel","ngModelChange","keyup.enter"],["matSuffix",""],["appearance","outline"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"filter-actions"],["mat-button","",3,"click"],[1,"table-card"],[1,"table-container"],["mat-table","","matSort","",1,"user-table",3,"dataSource"],["matColumnDef","fullName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","mobileNumber"],["matColumnDef","city"],["matColumnDef","status"],["matColumnDef","totalOrders"],["matColumnDef","totalSpent"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","user-row",3,"click",4,"matRowDef","matRowDefColumns"],["class","loading-container",4,"ngIf"],["class","no-data",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"user-name"],[1,"user-id"],[1,"contact-info"],["class","verification-status",4,"ngIf"],[1,"verification-status"],[1,"verified-icon"],["mat-header-cell",""],[1,"action-buttons"],["mat-icon-button","","matTooltip","View Details",3,"click"],["mat-icon-button","","matTooltip","Edit Customer",3,"click"],["mat-icon-button","",3,"color","matTooltip","click"],["mat-icon-button","","matTooltip","Send Verification Email","color","accent",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Delete Customer","color","warn",3,"click"],["mat-icon-button","","matTooltip","Send Verification Email","color","accent",3,"click"],["mat-header-row",""],["mat-row","",1,"user-row",3,"click"],[1,"loading-container"],[1,"no-data"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"User Management"),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return i.createUser()}),t.j41(5,"mat-icon"),t.EFF(6,"add"),t.k0s(),t.EFF(7," Add User "),t.k0s()(),t.j41(8,"div",3)(9,"mat-card",4)(10,"mat-card-content")(11,"div",5),t.EFF(12),t.k0s(),t.j41(13,"div",6),t.EFF(14,"Total Users"),t.k0s()()(),t.j41(15,"mat-card",4)(16,"mat-card-content")(17,"div",5),t.EFF(18),t.k0s(),t.j41(19,"div",6),t.EFF(20,"Active Users"),t.k0s()()(),t.j41(21,"mat-card",4)(22,"mat-card-content")(23,"div",5),t.EFF(24),t.k0s(),t.j41(25,"div",6),t.EFF(26,"Verified Users"),t.k0s()()(),t.j41(27,"mat-card",4)(28,"mat-card-content")(29,"div",5),t.EFF(30),t.k0s(),t.j41(31,"div",6),t.EFF(32,"Admin Users"),t.k0s()()()(),t.j41(33,"mat-card",7)(34,"mat-card-content")(35,"div",8)(36,"mat-form-field",9)(37,"mat-label"),t.EFF(38,"Search Customers"),t.k0s(),t.j41(39,"input",10),t.bIt("ngModelChange",function(c){return i.searchTerm=c})("keyup.enter",function(){return i.onSearchChange()}),t.k0s(),t.j41(40,"mat-icon",11),t.EFF(41,"search"),t.k0s()(),t.j41(42,"mat-form-field",12)(43,"mat-label"),t.EFF(44,"Status"),t.k0s(),t.j41(45,"mat-select",13),t.bIt("ngModelChange",function(c){return i.selectedStatus=c})("selectionChange",function(){return i.onStatusChange()}),t.DNE(46,gt,2,2,"mat-option",14),t.k0s()(),t.j41(47,"div",15)(48,"button",16),t.bIt("click",function(){return i.onSearchChange()}),t.j41(49,"mat-icon"),t.EFF(50,"search"),t.k0s(),t.EFF(51," Search "),t.k0s(),t.j41(52,"button",16),t.bIt("click",function(){return i.clearFilters()}),t.j41(53,"mat-icon"),t.EFF(54,"clear"),t.k0s(),t.EFF(55," Clear "),t.k0s(),t.j41(56,"button",16),t.bIt("click",function(){return i.exportUsers()}),t.j41(57,"mat-icon"),t.EFF(58,"download"),t.k0s(),t.EFF(59," Export "),t.k0s()()()()(),t.j41(60,"mat-card",17)(61,"mat-card-content")(62,"div",18)(63,"table",19),t.qex(64,20),t.DNE(65,ut,2,0,"th",21),t.DNE(66,_t,6,3,"td",22),t.bVm(),t.qex(67,23),t.DNE(68,ft,2,0,"th",21),t.DNE(69,ht,5,2,"td",22),t.bVm(),t.qex(70,24),t.DNE(71,Mt,2,0,"th",21),t.DNE(72,Ft,5,2,"td",22),t.bVm(),t.qex(73,25),t.DNE(74,kt,2,0,"th",21),t.DNE(75,bt,2,1,"td",22),t.bVm(),t.qex(76,26),t.DNE(77,vt,2,0,"th",21),t.DNE(78,xt,3,3,"td",22),t.bVm(),t.qex(79,27),t.DNE(80,Ot,2,0,"th",21),t.DNE(81,Et,2,1,"td",22),t.bVm(),t.qex(82,28),t.DNE(83,Rt,2,0,"th",21),t.DNE(84,jt,2,1,"td",22),t.bVm(),t.qex(85,29),t.DNE(86,yt,2,0,"th",21),t.DNE(87,It,2,1,"td",22),t.bVm(),t.qex(88,30),t.DNE(89,St,2,0,"th",31),t.DNE(90,$t,15,4,"td",22),t.bVm(),t.DNE(91,Nt,1,0,"tr",32),t.DNE(92,Tt,1,0,"tr",33),t.k0s(),t.DNE(93,wt,2,0,"div",34),t.DNE(94,Gt,11,0,"div",35),t.k0s(),t.j41(95,"mat-paginator",36),t.bIt("page",function(c){return i.onPageChange(c)}),t.k0s()()()()),2&o&&(t.R7$(12),t.JRh(i.userStats.totalUsers),t.R7$(6),t.JRh(i.userStats.activeUsers),t.R7$(6),t.JRh(i.userStats.verifiedUsers),t.R7$(6),t.JRh(i.userStats.adminUsers),t.R7$(9),t.Y8G("ngModel",i.searchTerm),t.R7$(6),t.Y8G("ngModel",i.selectedStatus),t.R7$(1),t.Y8G("ngForOf",i.statusOptions),t.R7$(17),t.Y8G("dataSource",i.dataSource),t.R7$(28),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading&&0===i.dataSource.data.length),t.R7$(1),t.Y8G("length",i.totalElements)("pageSize",i.pageSize)("pageSizeOptions",t.lJ4(15,At)))},dependencies:[u.Sq,u.bT,s.me,s.BC,s.vS,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,y.iy,I.B4,I.aE,_.$z,_.iY,F.An,O.fg,p.rl,p.nJ,p.yw,N.VO,T.wT,d.RN,d.m2,G.Jl,D.oV,k.LG],styles:[".customer-list-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#1976d2;font-weight:500}.header-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:stretch}}.stats-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;margin-bottom:24px}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{text-align:center;box-shadow:0 2px 4px #0000001a}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:20px}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:28px;font-weight:600;color:#1976d2;margin-bottom:8px}.stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:14px;color:#666;text-transform:uppercase;letter-spacing:.5px}.filters-card[_ngcontent-%COMP%]{margin-bottom:24px;box-shadow:0 2px 4px #0000001a}.filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{flex:2;min-width:250px}.filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:150px}.filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}@media (max-width: 768px){.filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%], .filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:none;width:100%}.filters-card[_ngcontent-%COMP%]   .filters-row[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{justify-content:center;margin-top:16px}}.table-card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{position:relative;min-height:400px}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]{width:100%}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]   .customer-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .3s ease}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]   .customer-row[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:4px}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]   .customer-id[_ngcontent-%COMP%]{font-size:12px;color:#666}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .verification-status[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px;color:#4caf50;margin-top:4px}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .verification-status[_ngcontent-%COMP%]   .verified-icon[_ngcontent-%COMP%]{font-size:16px;margin-right:4px}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:4px}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0000001a}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;color:#666}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px;color:#ccc}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-weight:500}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;color:#999}.table-card[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}mat-chip.status-active[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#2e7d32}mat-chip.status-inactive[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00}mat-chip.status-blocked[_ngcontent-%COMP%]{background-color:#ffebee;color:#d32f2f}mat-chip.status-pending[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}@media (max-width: 1200px){.customer-list-container[_ngcontent-%COMP%]{padding:16px}}@media (max-width: 768px){.customer-list-container[_ngcontent-%COMP%]{padding:8px}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table-container[_ngcontent-%COMP%]   .customer-table[_ngcontent-%COMP%]{min-width:800px}.action-buttons[_ngcontent-%COMP%]{flex-wrap:wrap}}mat-paginator[_ngcontent-%COMP%]{background:transparent;border-top:1px solid #e0e0e0;margin-top:16px}mat-form-field[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(255,255,255,.8);display:flex;align-items:center;justify-content:center;z-index:1000}"]})}}return n})();var K=l(5680);function Ut(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("firstName")," ")}}function Vt(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("lastName")," ")}}function Yt(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("email")," ")}}function Bt(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("mobileNumber")," ")}}function Xt(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("alternateMobileNumber")," ")}}function zt(n,a){if(1&n&&(t.j41(0,"mat-option",43),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.SpI(" ",e.label," ")}}function Jt(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("postalCode")," ")}}function Ht(n,a){if(1&n&&(t.j41(0,"mat-option",43),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.SpI(" ",e.label," ")}}function qt(n,a){1&n&&(t.j41(0,"mat-icon"),t.nrm(1,"mat-spinner",44),t.k0s())}let Q=(()=>{class n{constructor(e,o,i,r){this.fb=e,this.customerService=o,this.router=i,this.route=r,this.isEditMode=!1,this.customerId=null,this.isLoading=!1,this.isSubmitting=!1,this.genderOptions=[{value:"MALE",label:"Male"},{value:"FEMALE",label:"Female"},{value:"OTHER",label:"Other"},{value:"PREFER_NOT_TO_SAY",label:"Prefer not to say"}],this.statusOptions=[{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"BLOCKED",label:"Blocked"},{value:"PENDING_VERIFICATION",label:"Pending Verification"}],this.customerForm=this.createForm()}ngOnInit(){this.route.params.subscribe(e=>{if(e.id){const o=parseInt(e.id,10);isNaN(o)?(console.error("Invalid customer ID:",e.id),this.router.navigate(["/admin/customers"])):(this.isEditMode=!0,this.customerId=o,this.loadCustomer())}})}createForm(){return this.fb.group({firstName:["",[s.k0.required,s.k0.minLength(2)]],lastName:["",[s.k0.required,s.k0.minLength(2)]],email:["",[s.k0.required,s.k0.email]],mobileNumber:["",[s.k0.required,s.k0.pattern(/^[6-9][0-9]{9}$/)]],alternateMobileNumber:["",[s.k0.pattern(/^[6-9][0-9]{9}$/)]],gender:[""],dateOfBirth:[""],addressLine1:[""],addressLine2:[""],city:[""],state:[""],postalCode:["",[s.k0.pattern(/^[0-9]{6}$/)]],country:["India"],emailNotifications:[!0],smsNotifications:[!0],promotionalEmails:[!1],preferredLanguage:["English"],status:["ACTIVE"],isActive:[!0],referredBy:[""],notes:[""]})}loadCustomer(){this.customerId&&(this.isLoading=!0,this.customerService.getCustomerById(this.customerId).subscribe({next:e=>{this.populateForm(e),this.isLoading=!1},error:e=>{console.error("Error loading customer:",e),this.isLoading=!1}}))}populateForm(e){this.customerForm.patchValue({firstName:e.firstName,lastName:e.lastName,email:e.email,mobileNumber:e.mobileNumber,alternateMobileNumber:e.alternateMobileNumber,gender:e.gender,dateOfBirth:e.dateOfBirth,addressLine1:e.addressLine1,addressLine2:e.addressLine2,city:e.city,state:e.state,postalCode:e.postalCode,country:e.country,emailNotifications:e.emailNotifications,smsNotifications:e.smsNotifications,promotionalEmails:e.promotionalEmails,preferredLanguage:e.preferredLanguage,status:e.status,isActive:e.isActive,referredBy:e.referredBy,notes:e.notes})}onSubmit(){if(this.customerForm.valid){this.isSubmitting=!0;const e=this.customerForm.value;this.isEditMode&&this.customerId?this.customerService.updateCustomer(this.customerId,e).subscribe({next:o=>{f().fire("Success!","Customer updated successfully.","success").then(()=>{this.router.navigate(["/admin/customers"])})},error:o=>{console.error("Error updating customer:",o),this.isSubmitting=!1,f().fire("Error!","Failed to update customer. Please try again.","error")}}):this.customerService.createCustomer(e).subscribe({next:o=>{f().fire("Success!","Customer created successfully.","success").then(()=>{this.router.navigate(["/admin/customers"])})},error:o=>{console.error("Error creating customer:",o),this.isSubmitting=!1,f().fire("Error!","Failed to create customer. Please try again.","error")}})}else this.markFormGroupTouched()}onCancel(){this.router.navigate(["/admin/customers"])}markFormGroupTouched(){Object.keys(this.customerForm.controls).forEach(e=>{this.customerForm.get(e)?.markAsTouched()})}getErrorMessage(e){const o=this.customerForm.get(e);if(o?.hasError("required"))return`${this.getFieldLabel(e)} is required`;if(o?.hasError("email"))return"Please enter a valid email address";if(o?.hasError("pattern")){if("mobileNumber"===e||"alternateMobileNumber"===e)return"Please enter a valid 10-digit mobile number";if("postalCode"===e)return"Please enter a valid 6-digit postal code"}return o?.hasError("minlength")?`${this.getFieldLabel(e)} must be at least ${o.errors?.minlength.requiredLength} characters`:""}getFieldLabel(e){return{firstName:"First Name",lastName:"Last Name",email:"Email",mobileNumber:"Mobile Number",alternateMobileNumber:"Alternate Mobile Number",postalCode:"Postal Code"}[e]||e}isFieldInvalid(e){const o=this.customerForm.get(e);return!(!o?.invalid||!o?.dirty&&!o?.touched)}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(s.ok),t.rXU(K.m),t.rXU($.Ix),t.rXU($.nX))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-customer-form"]],decls:139,vars:16,consts:[[1,"customer-form-container"],[1,"customer-form",3,"formGroup","ngSubmit"],[1,"form-section"],[1,"form-row"],["appearance","outline",1,"half-width"],["matInput","","formControlName","firstName","placeholder","Enter first name"],[4,"ngIf"],["matInput","","formControlName","lastName","placeholder","Enter last name"],["matInput","","type","email","formControlName","email","placeholder","Enter email address"],["matInput","","formControlName","mobileNumber","placeholder","10-digit mobile number"],["matInput","","formControlName","alternateMobileNumber","placeholder","Optional alternate number"],["formControlName","gender"],["value",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","dateOfBirth","readonly","",3,"matDatepicker"],["matSuffix","",3,"for"],["dobPicker",""],["appearance","outline",1,"full-width"],["matInput","","formControlName","addressLine1","placeholder","House/Flat number, Street name"],["matInput","","formControlName","addressLine2","placeholder","Landmark, Area (Optional)"],["appearance","outline",1,"third-width"],["matInput","","formControlName","city","placeholder","City"],["matInput","","formControlName","state","placeholder","State"],["matInput","","formControlName","postalCode","placeholder","6-digit PIN code"],["matInput","","formControlName","country","placeholder","Country"],[1,"checkbox-group"],["formControlName","emailNotifications"],["formControlName","smsNotifications"],["formControlName","promotionalEmails"],["formControlName","preferredLanguage"],["value","English"],["value","Hindi"],["value","Kannada"],["value","Telugu"],["value","Tamil"],["formControlName","status"],[1,"checkbox-group","half-width"],["formControlName","isActive"],["matInput","","formControlName","referredBy","placeholder","Referral code or customer"],["matInput","","formControlName","notes","rows","3","placeholder","Additional notes about the customer"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"disabled","click"],[3,"value"],["diameter","16"]],template:function(o,i){if(1&o&&(t.j41(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),t.EFF(4),t.k0s()(),t.j41(5,"mat-card-content")(6,"form",1),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(7,"div",2)(8,"h3"),t.EFF(9,"Basic Information"),t.k0s(),t.j41(10,"div",3)(11,"mat-form-field",4)(12,"mat-label"),t.EFF(13,"First Name"),t.k0s(),t.nrm(14,"input",5),t.DNE(15,Ut,2,1,"mat-error",6),t.k0s(),t.j41(16,"mat-form-field",4)(17,"mat-label"),t.EFF(18,"Last Name"),t.k0s(),t.nrm(19,"input",7),t.DNE(20,Vt,2,1,"mat-error",6),t.k0s()(),t.j41(21,"div",3)(22,"mat-form-field",4)(23,"mat-label"),t.EFF(24,"Email"),t.k0s(),t.nrm(25,"input",8),t.DNE(26,Yt,2,1,"mat-error",6),t.k0s(),t.j41(27,"mat-form-field",4)(28,"mat-label"),t.EFF(29,"Mobile Number"),t.k0s(),t.nrm(30,"input",9),t.DNE(31,Bt,2,1,"mat-error",6),t.k0s()(),t.j41(32,"div",3)(33,"mat-form-field",4)(34,"mat-label"),t.EFF(35,"Alternate Mobile Number"),t.k0s(),t.nrm(36,"input",10),t.DNE(37,Xt,2,1,"mat-error",6),t.k0s(),t.j41(38,"mat-form-field",4)(39,"mat-label"),t.EFF(40,"Gender"),t.k0s(),t.j41(41,"mat-select",11)(42,"mat-option",12),t.EFF(43,"Not Specified"),t.k0s(),t.DNE(44,zt,2,2,"mat-option",13),t.k0s()()(),t.j41(45,"div",3)(46,"mat-form-field",4)(47,"mat-label"),t.EFF(48,"Date of Birth"),t.k0s(),t.nrm(49,"input",14)(50,"mat-datepicker-toggle",15)(51,"mat-datepicker",null,16),t.k0s()()(),t.j41(53,"div",2)(54,"h3"),t.EFF(55,"Address Information"),t.k0s(),t.j41(56,"div",3)(57,"mat-form-field",17)(58,"mat-label"),t.EFF(59,"Address Line 1"),t.k0s(),t.nrm(60,"input",18),t.k0s()(),t.j41(61,"div",3)(62,"mat-form-field",17)(63,"mat-label"),t.EFF(64,"Address Line 2"),t.k0s(),t.nrm(65,"input",19),t.k0s()(),t.j41(66,"div",3)(67,"mat-form-field",20)(68,"mat-label"),t.EFF(69,"City"),t.k0s(),t.nrm(70,"input",21),t.k0s(),t.j41(71,"mat-form-field",20)(72,"mat-label"),t.EFF(73,"State"),t.k0s(),t.nrm(74,"input",22),t.k0s(),t.j41(75,"mat-form-field",20)(76,"mat-label"),t.EFF(77,"Postal Code"),t.k0s(),t.nrm(78,"input",23),t.DNE(79,Jt,2,1,"mat-error",6),t.k0s()(),t.j41(80,"div",3)(81,"mat-form-field",4)(82,"mat-label"),t.EFF(83,"Country"),t.k0s(),t.nrm(84,"input",24),t.k0s()()(),t.j41(85,"div",2)(86,"h3"),t.EFF(87,"Preferences"),t.k0s(),t.j41(88,"div",3)(89,"div",25)(90,"mat-checkbox",26),t.EFF(91," Email Notifications "),t.k0s(),t.j41(92,"mat-checkbox",27),t.EFF(93," SMS Notifications "),t.k0s(),t.j41(94,"mat-checkbox",28),t.EFF(95," Promotional Emails "),t.k0s()()(),t.j41(96,"div",3)(97,"mat-form-field",4)(98,"mat-label"),t.EFF(99,"Preferred Language"),t.k0s(),t.j41(100,"mat-select",29)(101,"mat-option",30),t.EFF(102,"English"),t.k0s(),t.j41(103,"mat-option",31),t.EFF(104,"Hindi"),t.k0s(),t.j41(105,"mat-option",32),t.EFF(106,"Kannada"),t.k0s(),t.j41(107,"mat-option",33),t.EFF(108,"Telugu"),t.k0s(),t.j41(109,"mat-option",34),t.EFF(110,"Tamil"),t.k0s()()()()(),t.j41(111,"div",2)(112,"h3"),t.EFF(113,"Status & Additional Information"),t.k0s(),t.j41(114,"div",3)(115,"mat-form-field",4)(116,"mat-label"),t.EFF(117,"Status"),t.k0s(),t.j41(118,"mat-select",35),t.DNE(119,Ht,2,2,"mat-option",13),t.k0s()(),t.j41(120,"div",36)(121,"mat-checkbox",37),t.EFF(122," Active Account "),t.k0s()()(),t.j41(123,"div",3)(124,"mat-form-field",4)(125,"mat-label"),t.EFF(126,"Referred By"),t.k0s(),t.nrm(127,"input",38),t.k0s()(),t.j41(128,"div",3)(129,"mat-form-field",17)(130,"mat-label"),t.EFF(131,"Notes"),t.k0s(),t.nrm(132,"textarea",39),t.k0s()()(),t.j41(133,"div",40)(134,"button",41),t.DNE(135,qt,2,0,"mat-icon",6),t.EFF(136),t.k0s(),t.j41(137,"button",42),t.bIt("click",function(){return i.onCancel()}),t.EFF(138," Cancel "),t.k0s()()()()()()),2&o){const r=t.sdS(52);t.R7$(4),t.SpI(" ",i.isEditMode?"Edit Customer":"Create New Customer"," "),t.R7$(2),t.Y8G("formGroup",i.customerForm),t.R7$(9),t.Y8G("ngIf",i.isFieldInvalid("firstName")),t.R7$(5),t.Y8G("ngIf",i.isFieldInvalid("lastName")),t.R7$(6),t.Y8G("ngIf",i.isFieldInvalid("email")),t.R7$(5),t.Y8G("ngIf",i.isFieldInvalid("mobileNumber")),t.R7$(6),t.Y8G("ngIf",i.isFieldInvalid("alternateMobileNumber")),t.R7$(7),t.Y8G("ngForOf",i.genderOptions),t.R7$(5),t.Y8G("matDatepicker",r),t.R7$(1),t.Y8G("for",r),t.R7$(29),t.Y8G("ngIf",i.isFieldInvalid("postalCode")),t.R7$(40),t.Y8G("ngForOf",i.statusOptions),t.R7$(15),t.Y8G("disabled",i.isSubmitting||i.customerForm.invalid),t.R7$(1),t.Y8G("ngIf",i.isSubmitting),t.R7$(1),t.SpI(" ",i.isEditMode?"Update Customer":"Create Customer"," "),t.R7$(1),t.Y8G("disabled",i.isSubmitting)}},dependencies:[u.Sq,u.bT,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,_.$z,F.An,O.fg,p.rl,p.nJ,p.TL,p.yw,N.VO,T.wT,d.RN,d.m2,d.MM,d.dh,S.Vh,S.bZ,S.bU,V.So,k.LG],styles:[".customer-form-container[_ngcontent-%COMP%]{max-width:1000px;margin:20px auto;padding:20px}.customer-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:30px;border-bottom:1px solid #e0e0e0;padding-bottom:20px}.customer-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.customer-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1976d2;margin-bottom:20px;font-weight:500;font-size:16px}.customer-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px;align-items:flex-start;flex-wrap:wrap}@media (max-width: 768px){.customer-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}.customer-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{flex:1;width:100%}.customer-form[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]{flex:1;min-width:250px}@media (max-width: 768px){.customer-form[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]{width:100%;min-width:100%}}.customer-form[_ngcontent-%COMP%]   .third-width[_ngcontent-%COMP%]{flex:1;min-width:200px}@media (max-width: 768px){.customer-form[_ngcontent-%COMP%]   .third-width[_ngcontent-%COMP%]{width:100%;min-width:100%}}.customer-form[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:12px 0}.customer-form[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-bottom:8px}.customer-form[_ngcontent-%COMP%]   .checkbox-group.half-width[_ngcontent-%COMP%]{justify-content:center}.customer-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:flex-end;margin-top:30px;padding-top:20px;border-top:1px solid #e0e0e0}@media (max-width: 768px){.customer-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse}.customer-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.customer-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}.customer-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}mat-form-field[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}mat-card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a;border-radius:8px}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:16px;border-bottom:1px solid #e0e0e0;margin-bottom:24px}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#1976d2}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:0}.loading-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px}.mat-error[_ngcontent-%COMP%]{font-size:12px;margin-top:4px}@media (max-width: 1024px){.customer-form-container[_ngcontent-%COMP%]{margin:10px;padding:10px}}@media (max-width: 768px){.customer-form-container[_ngcontent-%COMP%]{margin:5px;padding:5px}.customer-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px}mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:20px}}.form-success[_ngcontent-%COMP%]{color:#4caf50;background-color:#e8f5e8;border:1px solid #4caf50;border-radius:4px;padding:12px;margin-bottom:16px}.form-error[_ngcontent-%COMP%]{color:#f44336;background-color:#ffebee;border:1px solid #f44336;border-radius:4px;padding:12px;margin-bottom:16px}"]})}}return n})();function Wt(n,a){1&n&&(t.j41(0,"mat-icon",19),t.EFF(1,"verified"),t.k0s())}function Kt(n,a){1&n&&(t.j41(0,"mat-icon",20),t.EFF(1,"verified"),t.k0s())}function Qt(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Alternate Mobile"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.customer.alternateMobileNumber)}}function Zt(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Gender"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.getGenderLabel(e.customer.gender))}}function te(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Date of Birth"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.formatDate(e.customer.dateOfBirth))}}function ee(n,a){if(1&n&&(t.j41(0,"div",22)(1,"label"),t.EFF(2,"Address Line 1"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.JRh(e.customer.addressLine1)}}function ne(n,a){if(1&n&&(t.j41(0,"div",22)(1,"label"),t.EFF(2,"Address Line 2"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.JRh(e.customer.addressLine2)}}function oe(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"City"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.JRh(e.customer.city)}}function ie(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"State"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.JRh(e.customer.state)}}function ae(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Postal Code"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.JRh(e.customer.postalCode)}}function re(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Country"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(4),t.JRh(e.customer.country)}}function se(n,a){if(1&n&&(t.j41(0,"mat-card",7)(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3,"Address Information"),t.k0s()(),t.j41(4,"mat-card-content")(5,"div",8),t.DNE(6,ee,5,1,"div",21),t.DNE(7,ne,5,1,"div",21),t.DNE(8,oe,5,1,"div",12),t.DNE(9,ie,5,1,"div",12),t.DNE(10,ae,5,1,"div",12),t.DNE(11,re,5,1,"div",12),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(6),t.Y8G("ngIf",e.customer.addressLine1),t.R7$(1),t.Y8G("ngIf",e.customer.addressLine2),t.R7$(1),t.Y8G("ngIf",e.customer.city),t.R7$(1),t.Y8G("ngIf",e.customer.state),t.R7$(1),t.Y8G("ngIf",e.customer.postalCode),t.R7$(1),t.Y8G("ngIf",e.customer.country)}}function ce(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Referred By"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.customer.referredBy)}}function me(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Preferred Language"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.customer.preferredLanguage)}}function le(n,a){if(1&n&&(t.j41(0,"div",15)(1,"div",16),t.EFF(2),t.k0s(),t.j41(3,"div",17),t.EFF(4,"Last Order"),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(2),t.JRh(e.formatDate(e.customer.lastOrderDate))}}function de(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Last Login"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.formatDateTime(e.customer.lastLoginDate))}}function pe(n,a){if(1&n&&(t.j41(0,"div",9)(1,"label"),t.EFF(2,"Created By"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.customer.createdBy)}}function ge(n,a){if(1&n&&(t.j41(0,"mat-card",7)(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3,"Notes"),t.k0s()(),t.j41(4,"mat-card-content")(5,"p",23),t.EFF(6),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(6),t.JRh(e.customer.notes)}}function ue(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.goBack())}),t.j41(3,"mat-icon"),t.EFF(4,"arrow_back"),t.k0s()(),t.j41(5,"h2"),t.EFF(6,"Customer Details"),t.k0s(),t.j41(7,"button",5),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.editCustomer())}),t.j41(8,"mat-icon"),t.EFF(9,"edit"),t.k0s(),t.EFF(10," Edit Customer "),t.k0s()(),t.j41(11,"div",6)(12,"mat-card",7)(13,"mat-card-header")(14,"mat-card-title"),t.EFF(15,"Basic Information"),t.k0s()(),t.j41(16,"mat-card-content")(17,"div",8)(18,"div",9)(19,"label"),t.EFF(20,"Full Name"),t.k0s(),t.j41(21,"span"),t.EFF(22),t.k0s()(),t.j41(23,"div",9)(24,"label"),t.EFF(25,"Email"),t.k0s(),t.j41(26,"span"),t.EFF(27),t.DNE(28,Wt,2,0,"mat-icon",10),t.k0s()(),t.j41(29,"div",9)(30,"label"),t.EFF(31,"Mobile Number"),t.k0s(),t.j41(32,"span"),t.EFF(33),t.DNE(34,Kt,2,0,"mat-icon",11),t.k0s()(),t.DNE(35,Qt,5,1,"div",12),t.DNE(36,Zt,5,1,"div",12),t.DNE(37,te,5,1,"div",12),t.k0s()()(),t.DNE(38,se,12,6,"mat-card",13),t.j41(39,"mat-card",7)(40,"mat-card-header")(41,"mat-card-title"),t.EFF(42,"Account Status"),t.k0s()(),t.j41(43,"mat-card-content")(44,"div",8)(45,"div",9)(46,"label"),t.EFF(47,"Status"),t.k0s(),t.j41(48,"mat-chip"),t.EFF(49),t.k0s()(),t.j41(50,"div",9)(51,"label"),t.EFF(52,"Account Active"),t.k0s(),t.j41(53,"span")(54,"mat-icon"),t.EFF(55),t.k0s(),t.EFF(56),t.k0s()(),t.j41(57,"div",9)(58,"label"),t.EFF(59,"Verified"),t.k0s(),t.j41(60,"span")(61,"mat-icon"),t.EFF(62),t.k0s(),t.EFF(63),t.k0s()(),t.DNE(64,ce,5,1,"div",12),t.k0s()()(),t.j41(65,"mat-card",7)(66,"mat-card-header")(67,"mat-card-title"),t.EFF(68,"Preferences"),t.k0s()(),t.j41(69,"mat-card-content")(70,"div",8)(71,"div",9)(72,"label"),t.EFF(73,"Email Notifications"),t.k0s(),t.j41(74,"span")(75,"mat-icon"),t.EFF(76),t.k0s(),t.EFF(77),t.k0s()(),t.j41(78,"div",9)(79,"label"),t.EFF(80,"SMS Notifications"),t.k0s(),t.j41(81,"span")(82,"mat-icon"),t.EFF(83),t.k0s(),t.EFF(84),t.k0s()(),t.j41(85,"div",9)(86,"label"),t.EFF(87,"Promotional Emails"),t.k0s(),t.j41(88,"span")(89,"mat-icon"),t.EFF(90),t.k0s(),t.EFF(91),t.k0s()(),t.DNE(92,me,5,1,"div",12),t.k0s()()(),t.j41(93,"mat-card",7)(94,"mat-card-header")(95,"mat-card-title"),t.EFF(96,"Customer Metrics"),t.k0s()(),t.j41(97,"mat-card-content")(98,"div",14)(99,"div",15)(100,"div",16),t.EFF(101),t.k0s(),t.j41(102,"div",17),t.EFF(103,"Total Orders"),t.k0s()(),t.j41(104,"div",15)(105,"div",16),t.EFF(106),t.k0s(),t.j41(107,"div",17),t.EFF(108,"Total Spent"),t.k0s()(),t.j41(109,"div",15)(110,"div",16),t.EFF(111),t.k0s(),t.j41(112,"div",17),t.EFF(113,"Referrals"),t.k0s()(),t.DNE(114,le,5,1,"div",18),t.k0s()()(),t.j41(115,"mat-card",7)(116,"mat-card-header")(117,"mat-card-title"),t.EFF(118,"Account Timeline"),t.k0s()(),t.j41(119,"mat-card-content")(120,"div",8)(121,"div",9)(122,"label"),t.EFF(123,"Member Since"),t.k0s(),t.j41(124,"span"),t.EFF(125),t.k0s()(),t.j41(126,"div",9)(127,"label"),t.EFF(128,"Last Updated"),t.k0s(),t.j41(129,"span"),t.EFF(130),t.k0s()(),t.DNE(131,de,5,1,"div",12),t.DNE(132,pe,5,1,"div",12),t.k0s()()(),t.DNE(133,ge,7,1,"mat-card",13),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(22),t.Lme("",e.customer.firstName," ",e.customer.lastName,""),t.R7$(5),t.SpI(" ",e.customer.email," "),t.R7$(1),t.Y8G("ngIf",e.customer.emailVerified),t.R7$(5),t.SpI(" ",e.customer.mobileNumber," "),t.R7$(1),t.Y8G("ngIf",e.customer.mobileVerified),t.R7$(1),t.Y8G("ngIf",e.customer.alternateMobileNumber),t.R7$(1),t.Y8G("ngIf",e.customer.gender),t.R7$(1),t.Y8G("ngIf",e.customer.dateOfBirth),t.R7$(1),t.Y8G("ngIf",e.customer.addressLine1||e.customer.city),t.R7$(10),t.HbH(e.getStatusClass(e.customer.status||"ACTIVE")),t.R7$(1),t.SpI(" ",e.customer.status||"ACTIVE"," "),t.R7$(5),t.HbH(e.customer.isActive?"status-active":"status-inactive"),t.R7$(1),t.SpI(" ",e.customer.isActive?"check_circle":"cancel"," "),t.R7$(1),t.SpI(" ",e.customer.isActive?"Yes":"No"," "),t.R7$(5),t.HbH(e.customer.isVerified?"status-active":"status-inactive"),t.R7$(1),t.SpI(" ",e.customer.isVerified?"verified_user":"pending"," "),t.R7$(1),t.SpI(" ",e.customer.isVerified?"Yes":"No"," "),t.R7$(1),t.Y8G("ngIf",e.customer.referredBy),t.R7$(11),t.HbH(e.customer.emailNotifications?"status-active":"status-inactive"),t.R7$(1),t.SpI(" ",e.customer.emailNotifications?"notifications_active":"notifications_off"," "),t.R7$(1),t.SpI(" ",e.customer.emailNotifications?"Enabled":"Disabled"," "),t.R7$(5),t.HbH(e.customer.smsNotifications?"status-active":"status-inactive"),t.R7$(1),t.SpI(" ",e.customer.smsNotifications?"sms":"sms_failed"," "),t.R7$(1),t.SpI(" ",e.customer.smsNotifications?"Enabled":"Disabled"," "),t.R7$(5),t.HbH(e.customer.promotionalEmails?"status-active":"status-inactive"),t.R7$(1),t.SpI(" ",e.customer.promotionalEmails?"mark_email_read":"mark_email_unread"," "),t.R7$(1),t.SpI(" ",e.customer.promotionalEmails?"Enabled":"Disabled"," "),t.R7$(1),t.Y8G("ngIf",e.customer.preferredLanguage),t.R7$(9),t.JRh(e.customer.totalOrders||0),t.R7$(5),t.JRh(e.formatCurrency(e.customer.totalSpent||0)),t.R7$(5),t.JRh(e.customer.referralCount||0),t.R7$(3),t.Y8G("ngIf",e.customer.lastOrderDate),t.R7$(11),t.JRh(e.formatDateTime(e.customer.createdAt||"")),t.R7$(5),t.JRh(e.formatDateTime(e.customer.updatedAt||"")),t.R7$(1),t.Y8G("ngIf",e.customer.lastLoginDate),t.R7$(1),t.Y8G("ngIf",e.customer.createdBy),t.R7$(1),t.Y8G("ngIf",e.customer.notes)}}function _e(n,a){1&n&&(t.j41(0,"div",24),t.nrm(1,"mat-spinner"),t.j41(2,"p"),t.EFF(3,"Loading customer details..."),t.k0s()())}let fe=(()=>{class n{constructor(e,o,i){this.route=e,this.router=o,this.customerService=i,this.customer=null,this.isLoading=!0,this.customerId=+this.route.snapshot.params.id}ngOnInit(){this.loadCustomer()}loadCustomer(){this.isLoading=!0,this.customerService.getCustomerById(this.customerId).subscribe({next:e=>{this.customer=e,this.isLoading=!1},error:e=>{console.error("Error loading customer:",e),this.isLoading=!1,f().fire({title:"Error!",text:"Failed to load customer details. Redirecting to customer list.",icon:"error",confirmButtonText:"OK"}).then(()=>{this.router.navigate(["/admin/customers"])})}})}editCustomer(){this.router.navigate(["/admin/customers",this.customerId,"edit"])}goBack(){this.router.navigate(["/admin/customers"])}formatCurrency(e){return this.customerService.formatCurrency(e||0)}formatDate(e){return this.customerService.formatDate(e)}formatDateTime(e){return this.customerService.formatDateTime(e)}getStatusClass(e){switch(e){case"ACTIVE":return"status-active";case"INACTIVE":return"status-inactive";case"BLOCKED":return"status-blocked";case"PENDING_VERIFICATION":return"status-pending";default:return""}}getGenderLabel(e){switch(e){case"MALE":return"Male";case"FEMALE":return"Female";case"OTHER":return"Other";case"PREFER_NOT_TO_SAY":return"Prefer not to say";default:return"Not specified"}}static{this.\u0275fac=function(o){return new(o||n)(t.rXU($.nX),t.rXU($.Ix),t.rXU(K.m))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-customer-detail"]],decls:2,vars:2,consts:[["class","customer-detail-container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"customer-detail-container"],[1,"header-section"],["mat-icon-button","",1,"back-button",3,"click"],["mat-raised-button","","color","primary",3,"click"],[1,"detail-content"],[1,"info-card"],[1,"info-grid"],[1,"info-item"],["class","verified-icon","matTooltip","Email Verified",4,"ngIf"],["class","verified-icon","matTooltip","Mobile Verified",4,"ngIf"],["class","info-item",4,"ngIf"],["class","info-card",4,"ngIf"],[1,"metrics-grid"],[1,"metric-item"],[1,"metric-value"],[1,"metric-label"],["class","metric-item",4,"ngIf"],["matTooltip","Email Verified",1,"verified-icon"],["matTooltip","Mobile Verified",1,"verified-icon"],["class","info-item full-width",4,"ngIf"],[1,"info-item","full-width"],[1,"notes-content"],[1,"loading-container"]],template:function(o,i){1&o&&(t.DNE(0,ue,134,44,"div",0),t.DNE(1,_e,4,0,"div",1)),2&o&&(t.Y8G("ngIf",!i.isLoading&&i.customer),t.R7$(1),t.Y8G("ngIf",i.isLoading))},dependencies:[u.bT,_.$z,_.iY,F.An,d.RN,d.m2,d.MM,d.dh,G.Jl,D.oV,k.LG],styles:[".customer-detail-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.header-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:24px}.header-section[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{margin-right:8px}.header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{flex:1;margin:0;color:#1976d2;font-weight:500}.header-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]{flex-wrap:wrap;gap:12px}.header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{order:2;flex-basis:100%}.header-section[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{order:1;margin-right:0}.header-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.back-button){order:3;width:100%}}.detail-content[_ngcontent-%COMP%]{display:grid;gap:24px}@media (min-width: 1024px){.detail-content[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}.info-card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a;border-radius:8px}@media (min-width: 1024px){.info-card[_ngcontent-%COMP%]:first-child{grid-column:1/-1}}.info-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:16px;border-bottom:1px solid #e0e0e0;margin-bottom:16px}.info-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#1976d2}.info-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:0}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px}@media (max-width: 768px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-grid[_ngcontent-%COMP%]   .info-item.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#666;text-transform:uppercase;letter-spacing:.5px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#333;display:flex;align-items:center;gap:8px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .verified-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:16px}.metrics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:24px}.metrics-grid[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]{text-align:center;padding:16px;background-color:#f8f9fa;border-radius:8px}.metrics-grid[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1976d2;margin-bottom:4px}.metrics-grid[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   .metric-label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase;letter-spacing:.5px}mat-chip.status-active[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#2e7d32}mat-chip.status-inactive[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00}mat-chip.status-blocked[_ngcontent-%COMP%]{background-color:#ffebee;color:#d32f2f}mat-chip.status-pending[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}mat-icon.status-active[_ngcontent-%COMP%]{color:#4caf50}mat-icon.status-inactive[_ngcontent-%COMP%]{color:#ff9800}mat-icon.verified-icon[_ngcontent-%COMP%]{color:#4caf50}.notes-content[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:16px;border-radius:8px;border-left:4px solid #1976d2;margin:0;line-height:1.5;color:#333}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px;gap:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}@media (max-width: 1024px){.customer-detail-container[_ngcontent-%COMP%]{padding:16px}.detail-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.customer-detail-container[_ngcontent-%COMP%]{padding:8px}.info-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:16px}.metrics-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:16px}.metrics-grid[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]{padding:12px}.metrics-grid[_ngcontent-%COMP%]   .metric-item[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-size:20px}}@media print{.header-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.info-card[_ngcontent-%COMP%]{break-inside:avoid;box-shadow:none;border:1px solid #e0e0e0}}"]})}}return n})(),Ce=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${R.c.apiUrl}/delivery-fees`,this.superAdminApiUrl=`${R.c.apiUrl}/super-admin/delivery-fees`}getAllRanges(){return this.http.get(`${this.superAdminApiUrl}`)}getActiveRanges(){return this.http.get(`${this.apiUrl}/active`)}createRange(e){return this.http.post(`${this.superAdminApiUrl}`,e)}updateRange(e,o){return this.http.put(`${this.superAdminApiUrl}/${e}`,o)}deleteRange(e){return this.http.delete(`${this.superAdminApiUrl}/${e}`)}getRangeById(e){return this.http.get(`${this.superAdminApiUrl}/${e}`)}toggleRangeStatus(e){return this.http.patch(`${this.superAdminApiUrl}/${e}/toggle-status`,{})}calculateFee(e){return this.http.post(`${this.apiUrl}/calculate`,e)}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(v.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function he(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",6)(1,"h3"),t.EFF(2,"Add New Delivery Fee Range"),t.k0s(),t.j41(3,"div",7)(4,"mat-form-field")(5,"mat-label"),t.EFF(6,"Min Distance (km)"),t.k0s(),t.j41(7,"input",8),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newRange.minDistanceKm=i)}),t.k0s()(),t.j41(8,"mat-form-field")(9,"mat-label"),t.EFF(10,"Max Distance (km)"),t.k0s(),t.j41(11,"input",8),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newRange.maxDistanceKm=i)}),t.k0s()(),t.j41(12,"mat-form-field")(13,"mat-label"),t.EFF(14,"Delivery Fee (\u20b9)"),t.k0s(),t.j41(15,"input",9),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newRange.deliveryFee=i)}),t.k0s()(),t.j41(16,"mat-form-field")(17,"mat-label"),t.EFF(18,"Partner Commission (\u20b9)"),t.k0s(),t.j41(19,"input",9),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.newRange.partnerCommission=i)}),t.k0s()()(),t.j41(20,"div",10)(21,"button",11),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.addRange())}),t.EFF(22,"Add Range"),t.k0s(),t.j41(23,"button",12),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.cancelAdding())}),t.EFF(24,"Cancel"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(7),t.Y8G("ngModel",e.newRange.minDistanceKm),t.R7$(4),t.Y8G("ngModel",e.newRange.maxDistanceKm),t.R7$(4),t.Y8G("ngModel",e.newRange.deliveryFee),t.R7$(4),t.Y8G("ngModel",e.newRange.partnerCommission)}}function Me(n,a){1&n&&(t.j41(0,"div",13),t.nrm(1,"mat-spinner",14),t.j41(2,"p"),t.EFF(3,"Loading delivery fee ranges..."),t.k0s()())}function Pe(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Distance Range"),t.k0s())}function Fe(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(1),t.JRh(o.getDistanceRangeText(e))}}function ke(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",31)(1,"mat-form-field",32)(2,"input",8),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(3);return t.Njj(r.editingRange.minDistanceKm=i)}),t.k0s()(),t.j41(3,"span"),t.EFF(4,"to"),t.k0s(),t.j41(5,"mat-form-field",32)(6,"input",8),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(3);return t.Njj(r.editingRange.maxDistanceKm=i)}),t.k0s()(),t.j41(7,"span"),t.EFF(8,"km"),t.k0s()()}if(2&n){const e=t.XpG(3);t.R7$(2),t.Y8G("ngModel",e.editingRange.minDistanceKm),t.R7$(4),t.Y8G("ngModel",e.editingRange.maxDistanceKm)}}function be(n,a){if(1&n&&(t.j41(0,"td",28),t.DNE(1,Fe,2,1,"span",29),t.DNE(2,ke,9,2,"div",30),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)!==e.id),t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)===e.id)}}function ve(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Delivery Fee"),t.k0s())}function xe(n,a){if(1&n&&(t.j41(0,"span",35),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.SpI("\u20b9",e.deliveryFee,"")}}function Oe(n,a){if(1&n){const e=t.RV6();t.j41(0,"mat-form-field",36)(1,"input",9),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(3);return t.Njj(r.editingRange.deliveryFee=i)}),t.k0s()()}if(2&n){const e=t.XpG(3);t.R7$(1),t.Y8G("ngModel",e.editingRange.deliveryFee)}}function Ee(n,a){if(1&n&&(t.j41(0,"td",28),t.DNE(1,xe,2,1,"span",33),t.DNE(2,Oe,2,1,"mat-form-field",34),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)!==e.id),t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)===e.id)}}function Re(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Partner Commission"),t.k0s())}function je(n,a){if(1&n&&(t.j41(0,"span",39),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.SpI("\u20b9",e.partnerCommission,"")}}function ye(n,a){if(1&n){const e=t.RV6();t.j41(0,"mat-form-field",40)(1,"input",9),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(3);return t.Njj(r.editingRange.partnerCommission=i)}),t.k0s()()}if(2&n){const e=t.XpG(3);t.R7$(1),t.Y8G("ngModel",e.editingRange.partnerCommission)}}function Ie(n,a){if(1&n&&(t.j41(0,"td",28),t.DNE(1,je,2,1,"span",37),t.DNE(2,ye,2,1,"mat-form-field",38),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)!==e.id),t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)===e.id)}}function Se(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Status"),t.k0s())}function De(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.HbH(e.isActive?"status-active":"status-inactive"),t.R7$(1),t.SpI(" ",e.isActive?"Active":"Inactive"," ")}}function $e(n,a){if(1&n){const e=t.RV6();t.j41(0,"mat-slide-toggle",43),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(3);return t.Njj(r.editingRange.isActive=i)}),t.k0s()}if(2&n){const e=t.XpG(3);t.Y8G("ngModel",e.editingRange.isActive)}}function Ne(n,a){if(1&n&&(t.j41(0,"td",28),t.DNE(1,De,2,3,"span",41),t.DNE(2,$e,1,1,"mat-slide-toggle",42),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)!==e.id),t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)===e.id)}}function Te(n,a){1&n&&(t.j41(0,"th",27),t.EFF(1,"Actions"),t.k0s())}function we(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",46)(1,"button",47),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.startEditing(i))}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s()(),t.j41(4,"button",48),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.deleteRange(i.id))}),t.j41(5,"mat-icon"),t.EFF(6,"delete"),t.k0s()()()}}function Ge(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",49)(1,"button",47),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.updateRange(i.editingRange))}),t.j41(2,"mat-icon"),t.EFF(3,"save"),t.k0s()(),t.j41(4,"button",50),t.bIt("click",function(){t.eBV(e);const i=t.XpG(3);return t.Njj(i.cancelEditing())}),t.j41(5,"mat-icon"),t.EFF(6,"cancel"),t.k0s()()()}}function Ae(n,a){if(1&n&&(t.j41(0,"td",28),t.DNE(1,we,7,0,"div",44),t.DNE(2,Ge,7,0,"div",45),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)!==e.id),t.R7$(1),t.Y8G("ngIf",(null==o.editingRange?null:o.editingRange.id)===e.id)}}function Le(n,a){1&n&&t.nrm(0,"tr",51)}function Ue(n,a){1&n&&t.nrm(0,"tr",52)}function Ve(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",53)(1,"mat-icon"),t.EFF(2,"local_shipping"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No delivery fee ranges configured"),t.k0s(),t.j41(5,"p"),t.EFF(6,"Add your first delivery fee range to get started"),t.k0s(),t.j41(7,"button",11),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.startAdding())}),t.EFF(8," Add Range "),t.k0s()()}}const Z=function(){return["distanceRange","deliveryFee","partnerCommission","status","actions"]};function Ye(n,a){if(1&n&&(t.j41(0,"div",15)(1,"table",16),t.qex(2,17),t.DNE(3,Pe,2,0,"th",18),t.DNE(4,be,3,2,"td",19),t.bVm(),t.qex(5,20),t.DNE(6,ve,2,0,"th",18),t.DNE(7,Ee,3,2,"td",19),t.bVm(),t.qex(8,21),t.DNE(9,Re,2,0,"th",18),t.DNE(10,Ie,3,2,"td",19),t.bVm(),t.qex(11,22),t.DNE(12,Se,2,0,"th",18),t.DNE(13,Ne,3,2,"td",19),t.bVm(),t.qex(14,23),t.DNE(15,Te,2,0,"th",18),t.DNE(16,Ae,3,2,"td",19),t.bVm(),t.DNE(17,Le,1,0,"tr",24),t.DNE(18,Ue,1,0,"tr",25),t.k0s(),t.DNE(19,Ve,9,0,"div",26),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.ranges),t.R7$(16),t.Y8G("matHeaderRowDef",t.lJ4(4,Z)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(5,Z)),t.R7$(1),t.Y8G("ngIf",0===e.ranges.length)}}let Be=(()=>{class n{constructor(e,o){this.deliveryFeeService=e,this.snackBar=o,this.ranges=[],this.isLoading=!1,this.newRange={minDistanceKm:0,maxDistanceKm:0,deliveryFee:0,partnerCommission:0,isActive:!0},this.editingRange=null,this.isAddingRange=!1}ngOnInit(){this.loadRanges()}loadRanges(){this.isLoading=!0,this.deliveryFeeService.getAllRanges().subscribe({next:e=>{e.success?this.ranges=e.data||[]:this.snackBar.open("Failed to load delivery fee ranges","Close",{duration:3e3}),this.isLoading=!1},error:e=>{console.error("Error loading ranges:",e),this.snackBar.open("Error loading delivery fee ranges","Close",{duration:3e3}),this.isLoading=!1}})}addRange(){this.validateRange(this.newRange)&&this.deliveryFeeService.createRange(this.newRange).subscribe({next:e=>{e.success?(this.snackBar.open("Delivery fee range created successfully","Close",{duration:3e3}),this.loadRanges(),this.resetNewRange(),this.isAddingRange=!1):this.snackBar.open(e.message||"Failed to create range","Close",{duration:3e3})},error:e=>{console.error("Error creating range:",e),this.snackBar.open("Error creating delivery fee range","Close",{duration:3e3})}})}updateRange(e){!e.id||!this.validateRange(e)||this.deliveryFeeService.updateRange(e.id,e).subscribe({next:o=>{o.success?(this.snackBar.open("Delivery fee range updated successfully","Close",{duration:3e3}),this.loadRanges(),this.editingRange=null):this.snackBar.open(o.message||"Failed to update range","Close",{duration:3e3})},error:o=>{console.error("Error updating range:",o),this.snackBar.open("Error updating delivery fee range","Close",{duration:3e3})}})}deleteRange(e){confirm("Are you sure you want to delete this delivery fee range?")&&this.deliveryFeeService.deleteRange(e).subscribe({next:o=>{o.success?(this.snackBar.open("Delivery fee range deleted successfully","Close",{duration:3e3}),this.loadRanges()):this.snackBar.open(o.message||"Failed to delete range","Close",{duration:3e3})},error:o=>{console.error("Error deleting range:",o),this.snackBar.open("Error deleting delivery fee range","Close",{duration:3e3})}})}startEditing(e){this.editingRange={...e}}cancelEditing(){this.editingRange=null}startAdding(){this.isAddingRange=!0,this.resetNewRange()}cancelAdding(){this.isAddingRange=!1,this.resetNewRange()}resetNewRange(){this.newRange={minDistanceKm:0,maxDistanceKm:0,deliveryFee:0,partnerCommission:0,isActive:!0}}validateRange(e){return e.minDistanceKm<0||e.maxDistanceKm<=0?(this.snackBar.open("Distance values must be positive","Close",{duration:3e3}),!1):e.minDistanceKm>=e.maxDistanceKm?(this.snackBar.open("Maximum distance must be greater than minimum distance","Close",{duration:3e3}),!1):e.deliveryFee<=0||e.partnerCommission<=0?(this.snackBar.open("Fee and commission must be positive values","Close",{duration:3e3}),!1):!(e.partnerCommission>=e.deliveryFee&&(this.snackBar.open("Partner commission must be less than delivery fee","Close",{duration:3e3}),1))}getDistanceRangeText(e){return e.maxDistanceKm>=999?`${e.minDistanceKm}+ km`:`${e.minDistanceKm} - ${e.maxDistanceKm} km`}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(Ce),t.rXU(E.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-delivery-fee-management"]],decls:11,vars:4,consts:[[1,"delivery-fee-management"],[1,"page-header"],["mat-raised-button","","color","primary",3,"disabled","click"],["class","add-range-form",4,"ngIf"],["class","loading",4,"ngIf"],["class","ranges-table",4,"ngIf"],[1,"add-range-form"],[1,"form-row"],["matInput","","type","number","min","0","step","0.1",3,"ngModel","ngModelChange"],["matInput","","type","number","min","0","step","1",3,"ngModel","ngModelChange"],[1,"form-actions"],["mat-raised-button","","color","primary",3,"click"],["mat-button","",3,"click"],[1,"loading"],["diameter","40"],[1,"ranges-table"],["mat-table","",1,"mat-elevation-8",3,"dataSource"],["matColumnDef","distanceRange"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","deliveryFee"],["matColumnDef","partnerCommission"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","empty-state",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["class","edit-distance",4,"ngIf"],[1,"edit-distance"],[1,"distance-input"],["class","fee-amount",4,"ngIf"],["class","fee-input",4,"ngIf"],[1,"fee-amount"],[1,"fee-input"],["class","commission-amount",4,"ngIf"],["class","commission-input",4,"ngIf"],[1,"commission-amount"],[1,"commission-input"],[3,"class",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelChange"],["class","action-buttons",4,"ngIf"],["class","edit-actions",4,"ngIf"],[1,"action-buttons"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],[1,"edit-actions"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"empty-state"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3,"Delivery Fee Management"),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return i.startAdding()}),t.j41(5,"mat-icon"),t.EFF(6,"add"),t.k0s(),t.EFF(7," Add New Range "),t.k0s()(),t.DNE(8,he,25,4,"div",3),t.DNE(9,Me,4,0,"div",4),t.DNE(10,Ye,20,6,"div",5),t.k0s()),2&o&&(t.R7$(4),t.Y8G("disabled",i.isAddingRange),t.R7$(4),t.Y8G("ngIf",i.isAddingRange),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading))},dependencies:[u.bT,s.me,s.Q0,s.BC,s.VZ,s.vS,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,_.$z,_.iY,F.An,O.fg,p.rl,p.nJ,k.LG,Y.sG],styles:[".delivery-fee-management[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.delivery-fee-management[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:32px;padding-bottom:16px;border-bottom:1px solid #e0e0e0}.delivery-fee-management[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:600;color:#333}.delivery-fee-management[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.delivery-fee-management[_ngcontent-%COMP%]   .add-range-form[_ngcontent-%COMP%]{background:white;padding:24px;border-radius:8px;box-shadow:0 2px 8px #0000001a;margin-bottom:24px}.delivery-fee-management[_ngcontent-%COMP%]   .add-range-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#333}.delivery-fee-management[_ngcontent-%COMP%]   .add-range-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:20px}.delivery-fee-management[_ngcontent-%COMP%]   .add-range-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.delivery-fee-management[_ngcontent-%COMP%]   .add-range-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end}.delivery-fee-management[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px}.delivery-fee-management[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]{background:white;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000001a}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:600;color:#333}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .fee-amount[_ngcontent-%COMP%], .delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .commission-amount[_ngcontent-%COMP%]{font-weight:600;color:#2e7d32}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-active[_ngcontent-%COMP%]{color:#2e7d32;font-weight:500}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-inactive[_ngcontent-%COMP%]{color:#d32f2f;font-weight:500}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .edit-distance[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .edit-distance[_ngcontent-%COMP%]   .distance-input[_ngcontent-%COMP%]{width:80px}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .edit-distance[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#666}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .fee-input[_ngcontent-%COMP%], .delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .commission-input[_ngcontent-%COMP%]{width:100px}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%], .delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .edit-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;text-align:center}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#ccc;margin-bottom:16px}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#666}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 24px;color:#999}@media (max-width: 768px){.delivery-fee-management[_ngcontent-%COMP%]{padding:16px}.delivery-fee-management[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:stretch}.delivery-fee-management[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.delivery-fee-management[_ngcontent-%COMP%]   .add-range-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-size:14px}.delivery-fee-management[_ngcontent-%COMP%]   .ranges-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px}}"]})}}return n})(),H=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${R.c.apiUrl}/promotions`}getAllPromoCodes(e){let o=new v.Nl;return e&&(e.status&&(o=o.set("status",e.status)),e.shopId&&(o=o.set("shopId",e.shopId.toString())),void 0!==e.page&&(o=o.set("page",e.page.toString())),void 0!==e.size&&(o=o.set("size",e.size.toString()))),this.http.get(this.apiUrl,{params:o}).pipe((0,h.T)(i=>i.content||i.data||i))}getPromoCodeById(e){return this.http.get(`${this.apiUrl}/${e}`).pipe((0,h.T)(o=>o.data||o))}getActivePromoCodes(e){let o=new v.Nl;return e&&(o=o.set("shopId",e.toString())),this.http.get(`${this.apiUrl}/active`,{params:o}).pipe((0,h.T)(i=>i.data||i))}createPromoCode(e){return this.http.post(this.apiUrl,e).pipe((0,h.T)(o=>o.data||o))}updatePromoCode(e,o){return this.http.put(`${this.apiUrl}/${e}`,o).pipe((0,h.T)(i=>i.data||i))}deletePromoCode(e){return this.http.delete(`${this.apiUrl}/${e}`)}validatePromoCode(e){return this.http.post(`${this.apiUrl}/validate`,e)}getPromoCodeStats(e){return this.http.get(`${this.apiUrl}/${e}/stats`).pipe((0,h.T)(o=>o.data||o))}getPromoCodeUsageHistory(e,o=0,i=20){const r=(new v.Nl).set("page",o.toString()).set("size",i.toString());return this.http.get(`${this.apiUrl}/${e}/usage`,{params:r}).pipe((0,h.T)(c=>c.data||c))}getCustomerUsageHistory(e){return this.http.get(`${this.apiUrl}/my-usage?customerId=${e}`).pipe((0,h.T)(o=>o.data||o))}activatePromoCode(e){return this.http.patch(`${this.apiUrl}/${e}/activate`,{}).pipe((0,h.T)(o=>o.data||o))}deactivatePromoCode(e){return this.http.patch(`${this.apiUrl}/${e}/deactivate`,{}).pipe((0,h.T)(o=>o.data||o))}getFormattedDiscount(e){switch(e.type){case"PERCENTAGE":return`${e.discountValue}% OFF`;case"FIXED_AMOUNT":return`\u20b9${e.discountValue} OFF`;case"FREE_SHIPPING":return"FREE DELIVERY";default:return"SPECIAL OFFER"}}getFormattedMinOrder(e){return e.minimumOrderAmount&&e.minimumOrderAmount>0?`Min order: \u20b9${e.minimumOrderAmount}`:"No minimum order"}isExpired(e){return new Date(e.endDate)<new Date}getStatusBadgeColor(e){switch(e){case"ACTIVE":return"success";case"INACTIVE":return"warning";case"EXPIRED":return"danger";default:return"secondary"}}uploadPromoImage(e){const o=new FormData;return o.append("file",e),o.append("folder","promos"),this.http.post(`${R.c.apiUrl}/uploads/image`,o).pipe((0,h.T)(i=>({imageUrl:i.data?.url||i.url||i.imageUrl||i})))}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(v.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Xe(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("code")," ")}}function ze(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("title")," ")}}function Je(n,a){if(1&n&&(t.j41(0,"mat-option",47)(1,"mat-icon"),t.EFF(2),t.k0s(),t.EFF(3),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(2),t.JRh(e.icon),t.R7$(1),t.SpI(" ",e.label," ")}}function He(n,a){1&n&&(t.j41(0,"span",24),t.EFF(1,"\u20b9\xa0"),t.k0s())}function qe(n,a){1&n&&(t.j41(0,"span",48),t.EFF(1,"%"),t.k0s())}function We(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("discountValue")," ")}}function Ke(n,a){1&n&&(t.j41(0,"div",9)(1,"mat-form-field",10)(2,"mat-label"),t.EFF(3,"Maximum Discount Amount"),t.k0s(),t.nrm(4,"input",49),t.j41(5,"span",24),t.EFF(6,"\u20b9\xa0"),t.k0s(),t.j41(7,"mat-hint"),t.EFF(8,"Cap the discount at this amount (optional)"),t.k0s()()())}function Qe(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("startDate")," ")}}function Ze(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.SpI(" ",e.getErrorMessage("endDate")," ")}}function tn(n,a){if(1&n&&(t.j41(0,"mat-radio-button",47),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.SpI(" ",e.label," ")}}function en(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",50),t.nrm(1,"img",51),t.j41(2,"div",52)(3,"button",53),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.removeImage())}),t.j41(4,"mat-icon"),t.EFF(5,"delete"),t.k0s()()()()}if(2&n){const e=t.XpG();let o;t.R7$(1),t.Y8G("src",e.imagePreview||(null==(o=e.promoForm.get("imageUrl"))?null:o.value),t.B4B)}}function nn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",54),t.bIt("click",function(){t.eBV(e),t.XpG();const i=t.sdS(129);return t.Njj(i.click())}),t.j41(1,"mat-icon",55),t.EFF(2,"cloud_upload"),t.k0s(),t.j41(3,"span",56),t.EFF(4,"Click to select banner image"),t.k0s(),t.j41(5,"span",57),t.EFF(6,"Recommended: 1200 x 400px, Max 5MB"),t.k0s()()}}function on(n,a){1&n&&t.nrm(0,"mat-spinner",63)}function an(n,a){1&n&&(t.j41(0,"mat-icon"),t.EFF(1,"cloud_upload"),t.k0s())}function rn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",58)(1,"span",59),t.EFF(2),t.k0s(),t.j41(3,"button",60),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.uploadImage())}),t.DNE(4,on,1,0,"mat-spinner",61),t.DNE(5,an,2,0,"mat-icon",13),t.j41(6,"span"),t.EFF(7),t.k0s()(),t.j41(8,"button",62),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.removeImage())}),t.EFF(9,"Cancel"),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(2),t.JRh(e.selectedFile.name),t.R7$(1),t.Y8G("disabled",e.isUploading),t.R7$(1),t.Y8G("ngIf",e.isUploading),t.R7$(1),t.Y8G("ngIf",!e.isUploading),t.R7$(2),t.JRh(e.isUploading?"Uploading...":"Upload"),t.R7$(1),t.Y8G("disabled",e.isUploading)}}function sn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",64)(1,"button",65),t.bIt("click",function(){t.eBV(e),t.XpG();const i=t.sdS(129);return t.Njj(i.click())}),t.j41(2,"mat-icon"),t.EFF(3,"edit"),t.k0s(),t.EFF(4," Change Image "),t.k0s()()}}function cn(n,a){1&n&&t.nrm(0,"mat-spinner",66)}function mn(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.JRh(e.isEditMode?"Update":"Create")}}let tt=(()=>{class n{constructor(e,o,i,r,c){this.fb=e,this.promoCodeService=o,this.snackBar=i,this.dialogRef=r,this.data=c,this.isEditMode=!1,this.isLoading=!1,this.isUploading=!1,this.selectedFile=null,this.imagePreview=null,this.discountTypes=[{value:"PERCENTAGE",label:"Percentage Discount",icon:"percent"},{value:"FIXED_AMOUNT",label:"Fixed Amount",icon:"attach_money"},{value:"FREE_SHIPPING",label:"Free Delivery",icon:"local_shipping"}],this.statusOptions=[{value:"ACTIVE",label:"Active",color:"primary"},{value:"INACTIVE",label:"Inactive",color:"warn"}],this.isEditMode="edit"===c.mode}ngOnInit(){this.initForm(),this.isEditMode&&this.data.promoCode&&this.populateForm(this.data.promoCode)}initForm(){const e=new Date,o=new Date;o.setMonth(o.getMonth()+1),this.promoForm=this.fb.group({code:["",[s.k0.required,s.k0.pattern(/^[A-Z0-9]+$/),s.k0.minLength(4),s.k0.maxLength(20)]],title:["",[s.k0.required,s.k0.maxLength(100)]],description:["",s.k0.maxLength(500)],type:["PERCENTAGE",s.k0.required],discountValue:[0,[s.k0.required,s.k0.min(0)]],minimumOrderAmount:[0,s.k0.min(0)],maximumDiscountAmount:[null],startDate:[e,s.k0.required],endDate:[o,s.k0.required],status:["ACTIVE",s.k0.required],usageLimit:[null,s.k0.min(1)],usageLimitPerCustomer:[null,s.k0.min(1)],firstTimeOnly:[!1],applicableToAllShops:[!0],imageUrl:[""]}),this.promoForm.get("type")?.valueChanges.subscribe(i=>{const r=this.promoForm.get("discountValue");r?.setValidators("PERCENTAGE"===i?[s.k0.required,s.k0.min(0),s.k0.max(100)]:[s.k0.required,s.k0.min(0)]),r?.updateValueAndValidity()}),this.isEditMode&&this.promoForm.get("code")?.disable()}populateForm(e){this.promoForm.patchValue({code:e.code,title:e.title,description:e.description,type:e.type,discountValue:e.discountValue,minimumOrderAmount:e.minimumOrderAmount||0,maximumDiscountAmount:e.maximumDiscountAmount,startDate:new Date(e.startDate),endDate:new Date(e.endDate),status:e.status,usageLimit:e.usageLimit,usageLimitPerCustomer:e.usageLimitPerCustomer,firstTimeOnly:e.firstTimeOnly,applicableToAllShops:e.applicableToAllShops,imageUrl:e.imageUrl}),e.imageUrl&&(this.imagePreview=e.imageUrl)}onSubmit(){if(this.promoForm.valid){this.isLoading=!0;const e=this.promoForm.getRawValue(),o={...e,code:e.code.toUpperCase(),startDate:this.formatDateToISO(e.startDate),endDate:this.formatDateToISO(e.endDate)};(this.isEditMode&&this.data.promoCode?this.promoCodeService.updatePromoCode(this.data.promoCode.id,o):this.promoCodeService.createPromoCode(o)).subscribe({next:()=>{this.isLoading=!1,this.showSnackBar(this.isEditMode?"Promo code updated successfully":"Promo code created successfully","success"),this.dialogRef.close(!0)},error:r=>{console.error("Error saving promo code:",r),this.isLoading=!1,this.showSnackBar(r.error?.message||"Failed to save promo code","error")}})}else this.markFormGroupTouched(this.promoForm),this.showSnackBar("Please fill all required fields correctly","error")}formatDateToISO(e){return e.toISOString()}markFormGroupTouched(e){Object.keys(e.controls).forEach(o=>{e.get(o)?.markAsTouched()})}getErrorMessage(e){const o=this.promoForm.get(e);return o?.hasError("required")?"This field is required":o?.hasError("pattern")?"Only uppercase letters and numbers allowed":o?.hasError("minlength")?`Minimum ${o.errors?.minlength.requiredLength} characters`:o?.hasError("maxlength")?`Maximum ${o.errors?.maxlength.requiredLength} characters`:o?.hasError("min")?`Minimum value is ${o.errors?.min.min}`:o?.hasError("max")?`Maximum value is ${o.errors?.max.max}`:""}onCancel(){this.dialogRef.close(!1)}generateRandomCode(){let o="";for(let i=0;i<8;i++)o+="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(36*Math.random()));this.promoForm.patchValue({code:o})}onFileSelected(e){const o=e.target;if(o.files&&o.files[0]){const i=o.files[0];if(!i.type.startsWith("image/"))return void this.showSnackBar("Please select an image file","error");if(i.size>5242880)return void this.showSnackBar("Image size should be less than 5MB","error");this.selectedFile=i;const r=new FileReader;r.onload=c=>{this.imagePreview=c.target?.result},r.readAsDataURL(i)}}uploadImage(){this.selectedFile&&(this.isUploading=!0,this.promoCodeService.uploadPromoImage(this.selectedFile).subscribe({next:e=>{this.promoForm.patchValue({imageUrl:e.imageUrl}),this.isUploading=!1,this.showSnackBar("Image uploaded successfully","success")},error:e=>{console.error("Error uploading image:",e),this.isUploading=!1,this.showSnackBar("Failed to upload image","error")}}))}removeImage(){this.selectedFile=null,this.imagePreview=null,this.promoForm.patchValue({imageUrl:""})}showSnackBar(e,o){this.snackBar.open(e,"Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:"success"===o?"snackbar-success":"snackbar-error"})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(s.ok),t.rXU(H),t.rXU(E.UG),t.rXU(P.CP),t.rXU(P.Vh))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-promo-code-form"]],decls:140,vars:28,consts:[[1,"dialog-container"],[1,"dialog-header"],["mat-dialog-title",""],[1,"header-icon"],["mat-icon-button","","mat-dialog-close",""],[1,"dialog-content"],[1,"promo-form",3,"formGroup"],[1,"form-section"],[1,"section-title"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","code","placeholder","e.g., WELCOME50",2,"text-transform","uppercase",3,"readonly"],["mat-icon-button","","matSuffix","","type","button","matTooltip","Generate random code",3,"disabled","click"],[4,"ngIf"],["matInput","","formControlName","title","placeholder","e.g., Welcome Offer"],["matInput","","formControlName","description","rows","3","placeholder","Brief description of the offer"],["align","end"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"half-width"],["matInput","","type","number","formControlName","discountValue","min","0"],["matPrefix","",4,"ngIf"],["matSuffix","",4,"ngIf"],["matInput","","type","number","formControlName","minimumOrderAmount","min","0"],["matPrefix",""],["class","form-row",4,"ngIf"],["matInput","","type","number","formControlName","usageLimit","min","1"],["matInput","","type","number","formControlName","usageLimitPerCustomer","min","1"],["formControlName","firstTimeOnly","color","primary"],["formControlName","applicableToAllShops","color","primary"],["matInput","","formControlName","startDate",3,"matDatepicker"],["matSuffix","",3,"for"],["startPicker",""],["matInput","","formControlName","endDate",3,"matDatepicker"],["endPicker",""],["formControlName","status",1,"status-group"],[1,"image-upload-container"],["type","file","accept","image/*",2,"display","none",3,"change"],["fileInput",""],["class","image-preview-area",4,"ngIf"],["class","upload-placeholder",3,"click",4,"ngIf"],["class","upload-actions",4,"ngIf"],["class","change-image-btn",4,"ngIf"],["align","end",1,"dialog-actions"],["mat-button","",3,"disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"],["diameter","20","class","button-spinner",4,"ngIf"],[3,"value"],["matSuffix",""],["matInput","","type","number","formControlName","maximumDiscountAmount","min","0"],[1,"image-preview-area"],["alt","Promo banner preview",1,"preview-image",3,"src"],[1,"image-overlay"],["mat-icon-button","","color","warn","matTooltip","Remove image","type","button",3,"click"],[1,"upload-placeholder",3,"click"],[1,"upload-icon"],[1,"upload-text"],[1,"upload-hint"],[1,"upload-actions"],[1,"file-name"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],["diameter","18",4,"ngIf"],["mat-button","","type","button",3,"disabled","click"],["diameter","18"],[1,"change-image-btn"],["mat-stroked-button","","type","button",3,"click"],["diameter","20",1,"button-spinner"]],template:function(o,i){if(1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2",2)(3,"mat-icon",3),t.EFF(4),t.k0s(),t.EFF(5),t.k0s(),t.j41(6,"button",4)(7,"mat-icon"),t.EFF(8,"close"),t.k0s()()(),t.j41(9,"mat-dialog-content",5)(10,"form",6)(11,"div",7)(12,"h3",8)(13,"mat-icon"),t.EFF(14,"info"),t.k0s(),t.EFF(15," Basic Information "),t.k0s(),t.j41(16,"div",9)(17,"mat-form-field",10)(18,"mat-label"),t.EFF(19,"Promo Code *"),t.k0s(),t.nrm(20,"input",11),t.j41(21,"button",12),t.bIt("click",function(){return i.generateRandomCode()}),t.j41(22,"mat-icon"),t.EFF(23,"casino"),t.k0s()(),t.j41(24,"mat-hint"),t.EFF(25,"Uppercase letters and numbers only"),t.k0s(),t.DNE(26,Xe,2,1,"mat-error",13),t.k0s()(),t.j41(27,"div",9)(28,"mat-form-field",10)(29,"mat-label"),t.EFF(30,"Title *"),t.k0s(),t.nrm(31,"input",14),t.DNE(32,ze,2,1,"mat-error",13),t.k0s()(),t.j41(33,"div",9)(34,"mat-form-field",10)(35,"mat-label"),t.EFF(36,"Description"),t.k0s(),t.nrm(37,"textarea",15),t.j41(38,"mat-hint",16),t.EFF(39),t.k0s()()()(),t.j41(40,"div",7)(41,"h3",8)(42,"mat-icon"),t.EFF(43,"discount"),t.k0s(),t.EFF(44," Discount Settings "),t.k0s(),t.j41(45,"div",9)(46,"mat-form-field",10)(47,"mat-label"),t.EFF(48,"Discount Type *"),t.k0s(),t.j41(49,"mat-select",17),t.DNE(50,Je,4,3,"mat-option",18),t.k0s()()(),t.j41(51,"div",9)(52,"mat-form-field",19)(53,"mat-label"),t.EFF(54,"Discount Value *"),t.k0s(),t.nrm(55,"input",20),t.DNE(56,He,2,0,"span",21),t.DNE(57,qe,2,0,"span",22),t.DNE(58,We,2,1,"mat-error",13),t.k0s(),t.j41(59,"mat-form-field",19)(60,"mat-label"),t.EFF(61,"Minimum Order Amount"),t.k0s(),t.nrm(62,"input",23),t.j41(63,"span",24),t.EFF(64,"\u20b9\xa0"),t.k0s(),t.j41(65,"mat-hint"),t.EFF(66,"Orders below this won't qualify"),t.k0s()()(),t.DNE(67,Ke,9,0,"div",25),t.k0s(),t.j41(68,"div",7)(69,"h3",8)(70,"mat-icon"),t.EFF(71,"people"),t.k0s(),t.EFF(72," Usage Limits "),t.k0s(),t.j41(73,"div",9)(74,"mat-form-field",19)(75,"mat-label"),t.EFF(76,"Total Usage Limit"),t.k0s(),t.nrm(77,"input",26),t.j41(78,"mat-hint"),t.EFF(79,"Total times this code can be used"),t.k0s()(),t.j41(80,"mat-form-field",19)(81,"mat-label"),t.EFF(82,"Per Customer Limit"),t.k0s(),t.nrm(83,"input",27),t.j41(84,"mat-hint"),t.EFF(85,"Times each customer can use this"),t.k0s()()(),t.j41(86,"div",9)(87,"mat-checkbox",28),t.EFF(88," First-time customers only "),t.k0s()(),t.j41(89,"div",9)(90,"mat-checkbox",29),t.EFF(91," Applicable to all shops "),t.k0s()()(),t.j41(92,"div",7)(93,"h3",8)(94,"mat-icon"),t.EFF(95,"calendar_today"),t.k0s(),t.EFF(96," Validity Period "),t.k0s(),t.j41(97,"div",9)(98,"mat-form-field",19)(99,"mat-label"),t.EFF(100,"Start Date *"),t.k0s(),t.nrm(101,"input",30)(102,"mat-datepicker-toggle",31)(103,"mat-datepicker",null,32),t.DNE(105,Qe,2,1,"mat-error",13),t.k0s(),t.j41(106,"mat-form-field",19)(107,"mat-label"),t.EFF(108,"End Date *"),t.k0s(),t.nrm(109,"input",33)(110,"mat-datepicker-toggle",31)(111,"mat-datepicker",null,34),t.DNE(113,Ze,2,1,"mat-error",13),t.k0s()()(),t.j41(114,"div",7)(115,"h3",8)(116,"mat-icon"),t.EFF(117,"toggle_on"),t.k0s(),t.EFF(118," Status "),t.k0s(),t.j41(119,"div",9)(120,"mat-radio-group",35),t.DNE(121,tn,2,2,"mat-radio-button",18),t.k0s()()(),t.j41(122,"div",7)(123,"h3",8)(124,"mat-icon"),t.EFF(125,"image"),t.k0s(),t.EFF(126," Promotional Banner (Optional) "),t.k0s(),t.j41(127,"div",36)(128,"input",37,38),t.bIt("change",function(c){return i.onFileSelected(c)}),t.k0s(),t.DNE(130,en,6,1,"div",39),t.DNE(131,nn,7,0,"div",40),t.DNE(132,rn,10,6,"div",41),t.DNE(133,sn,5,0,"div",42),t.k0s()()()(),t.j41(134,"mat-dialog-actions",43)(135,"button",44),t.bIt("click",function(){return i.onCancel()}),t.EFF(136," Cancel "),t.k0s(),t.j41(137,"button",45),t.bIt("click",function(){return i.onSubmit()}),t.DNE(138,cn,1,0,"mat-spinner",46),t.DNE(139,mn,2,1,"span",13),t.k0s()()()),2&o){const r=t.sdS(104),c=t.sdS(112);let b,j,x,A,L,ot,it,at,rt,st,ct,mt,lt;t.R7$(4),t.JRh(i.isEditMode?"edit":"add_circle"),t.R7$(1),t.SpI(" ",i.isEditMode?"Edit Promo Code":"Create New Promo Code"," "),t.R7$(5),t.Y8G("formGroup",i.promoForm),t.R7$(10),t.Y8G("readonly",i.isEditMode),t.R7$(1),t.Y8G("disabled",i.isEditMode),t.R7$(5),t.Y8G("ngIf",null==(b=i.promoForm.get("code"))?null:b.touched),t.R7$(6),t.Y8G("ngIf",null==(j=i.promoForm.get("title"))?null:j.touched),t.R7$(7),t.SpI(" ",(null==(x=i.promoForm.get("description"))||null==x.value?null:x.value.length)||0,"/500 "),t.R7$(11),t.Y8G("ngForOf",i.discountTypes),t.R7$(6),t.Y8G("ngIf","FIXED_AMOUNT"===(null==(A=i.promoForm.get("type"))?null:A.value)),t.R7$(1),t.Y8G("ngIf","PERCENTAGE"===(null==(L=i.promoForm.get("type"))?null:L.value)),t.R7$(1),t.Y8G("ngIf",null==(ot=i.promoForm.get("discountValue"))?null:ot.touched),t.R7$(9),t.Y8G("ngIf","PERCENTAGE"===(null==(it=i.promoForm.get("type"))?null:it.value)),t.R7$(34),t.Y8G("matDatepicker",r),t.R7$(1),t.Y8G("for",r),t.R7$(3),t.Y8G("ngIf",null==(at=i.promoForm.get("startDate"))?null:at.touched),t.R7$(4),t.Y8G("matDatepicker",c),t.R7$(1),t.Y8G("for",c),t.R7$(3),t.Y8G("ngIf",null==(rt=i.promoForm.get("endDate"))?null:rt.touched),t.R7$(8),t.Y8G("ngForOf",i.statusOptions),t.R7$(9),t.Y8G("ngIf",i.imagePreview||(null==(st=i.promoForm.get("imageUrl"))?null:st.value)),t.R7$(1),t.Y8G("ngIf",!(i.imagePreview||null!=(ct=i.promoForm.get("imageUrl"))&&ct.value)),t.R7$(1),t.Y8G("ngIf",i.selectedFile&&!(null!=(mt=i.promoForm.get("imageUrl"))&&mt.value)),t.R7$(1),t.Y8G("ngIf",null==(lt=i.promoForm.get("imageUrl"))?null:lt.value),t.R7$(2),t.Y8G("disabled",i.isLoading),t.R7$(2),t.Y8G("disabled",i.isLoading||i.promoForm.invalid),t.R7$(1),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading)}},dependencies:[u.Sq,u.bT,s.qT,s.me,s.Q0,s.BC,s.cb,s.VZ,s.j4,s.JD,_.$z,_.iY,F.An,O.fg,p.rl,p.nJ,p.MV,p.TL,p.JW,p.yw,N.VO,T.wT,P.tx,P.BI,P.Yi,P.E7,S.Vh,S.bZ,S.bU,V.So,D.oV,k.LG,X.VT,X._g],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:90vh}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #e0e0e0}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0;font-size:24px;font-weight:600;color:#333}.header-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:28px;width:28px;height:28px}.dialog-content[_ngcontent-%COMP%]{padding:24px;overflow-y:auto}.promo-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.form-section[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:20px;border-left:4px solid #4CAF50}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:16px;font-weight:600;color:#333;margin:0 0 16px}.section-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:20px;width:20px;height:20px}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px}.form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.full-width[_ngcontent-%COMP%]{width:100%}.half-width[_ngcontent-%COMP%]{flex:1}mat-form-field[_ngcontent-%COMP%]{font-size:14px}.status-group[_ngcontent-%COMP%]{display:flex;gap:24px}.dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e0e0e0;gap:12px}.button-spinner[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}mat-checkbox[_ngcontent-%COMP%]{font-size:14px}  .mat-form-field-prefix,   .mat-form-field-suffix{align-self:center}  .mat-option{display:flex;align-items:center;gap:8px}  .mat-option mat-icon{font-size:20px;width:20px;height:20px}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{flex-direction:column}.half-width[_ngcontent-%COMP%]{width:100%}.status-group[_ngcontent-%COMP%]{flex-direction:column;gap:12px}}.image-upload-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.image-preview-area[_ngcontent-%COMP%]{position:relative;width:100%;max-width:400px;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000001a}.preview-image[_ngcontent-%COMP%]{width:100%;height:150px;object-fit:cover;display:block}.image-overlay[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:rgba(255,255,255,.9);border-radius:50%}.upload-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 24px;border:2px dashed #ccc;border-radius:8px;cursor:pointer;transition:all .3s ease;background:#fafafa}.upload-placeholder[_ngcontent-%COMP%]:hover{border-color:#4caf50;background:#f0f9f0}.upload-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#9e9e9e;margin-bottom:8px}.upload-placeholder[_ngcontent-%COMP%]:hover   .upload-icon[_ngcontent-%COMP%]{color:#4caf50}.upload-text[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#666;margin-bottom:4px}.upload-hint[_ngcontent-%COMP%]{font-size:12px;color:#999}.upload-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;background:#e8f5e9;border-radius:8px}.file-name[_ngcontent-%COMP%]{flex:1;font-size:13px;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.upload-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.upload-actions[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:4px}.change-image-btn[_ngcontent-%COMP%]{margin-top:8px}.change-image-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}  .snackbar-success{background-color:#4caf50!important;color:#fff!important}  .snackbar-error{background-color:#f44336!important;color:#fff!important}"]})}}return n})();function ln(n,a){1&n&&(t.j41(0,"div",10),t.nrm(1,"mat-spinner"),t.k0s())}function dn(n,a){if(1&n&&(t.j41(0,"p",45),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.SpI(" ",e.data.promoCode.description," ")}}function pn(n,a){if(1&n&&(t.j41(0,"div",27),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.SpI(" of ",e.data.promoCode.usageLimit," limit ")}}function gn(n,a){if(1&n&&(t.j41(0,"mat-card",46)(1,"mat-card-content")(2,"div",47)(3,"h4"),t.EFF(4,"Usage Progress"),t.k0s(),t.j41(5,"span",48),t.EFF(6),t.k0s()(),t.nrm(7,"mat-progress-bar",49),t.j41(8,"div",50)(9,"span"),t.EFF(10),t.k0s(),t.j41(11,"span"),t.EFF(12),t.k0s()()()()),2&n){const e=t.XpG(2);t.R7$(6),t.SpI(" ",e.getRemainingUses()," uses remaining "),t.R7$(1),t.Y8G("value",e.getUsagePercentage())("color",e.getUsagePercentage()>80?"warn":"primary"),t.R7$(3),t.Lme("",e.stats.totalUsage," / ",e.data.promoCode.usageLimit,""),t.R7$(2),t.SpI("",e.getUsagePercentage().toFixed(1),"%")}}function un(n,a){1&n&&(t.j41(0,"th",51),t.EFF(1,"Customer"),t.k0s())}function _n(n,a){if(1&n&&(t.j41(0,"td",52)(1,"div",53)(2,"mat-icon"),t.EFF(3,"person"),t.k0s(),t.j41(4,"div")(5,"div",54),t.EFF(6),t.k0s(),t.j41(7,"div",55),t.EFF(8),t.k0s()()()()),2&n){const e=a.$implicit;t.R7$(6),t.JRh(e.customer.name),t.R7$(2),t.JRh(e.customer.email)}}function fn(n,a){1&n&&(t.j41(0,"th",51),t.EFF(1,"Order"),t.k0s())}function Cn(n,a){if(1&n&&(t.j41(0,"td",52)(1,"div",56),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.order.orderNumber)}}function hn(n,a){1&n&&(t.j41(0,"th",51),t.EFF(1,"Discount"),t.k0s())}function Mn(n,a){if(1&n&&(t.j41(0,"td",52)(1,"span",57),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatCurrency(e.discountApplied))}}function Pn(n,a){1&n&&(t.j41(0,"th",51),t.EFF(1,"Order Amount"),t.k0s())}function Fn(n,a){if(1&n&&(t.j41(0,"td",52),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.SpI(" ",o.formatCurrency(e.orderAmount)," ")}}function kn(n,a){1&n&&(t.j41(0,"th",51),t.EFF(1,"Used At"),t.k0s())}function bn(n,a){if(1&n&&(t.j41(0,"td",52)(1,"div",58),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatDate(e.usedAt))}}function vn(n,a){1&n&&t.nrm(0,"tr",59)}function xn(n,a){1&n&&t.nrm(0,"tr",60)}function On(n,a){1&n&&(t.j41(0,"tr",61)(1,"td",62)(2,"mat-icon"),t.EFF(3,"inbox"),t.k0s(),t.j41(4,"p"),t.EFF(5,"No usage history yet"),t.k0s()()())}const En=function(){return[10,25,50]};function Rn(n,a){if(1&n&&(t.j41(0,"div",11)(1,"mat-card",12)(2,"mat-card-content")(3,"div",13)(4,"div",14),t.EFF(5),t.k0s(),t.j41(6,"mat-chip",15),t.EFF(7),t.k0s()(),t.j41(8,"h3"),t.EFF(9),t.k0s(),t.DNE(10,dn,2,1,"p",16),t.j41(11,"div",17)(12,"div",18)(13,"mat-icon"),t.EFF(14,"discount"),t.k0s(),t.j41(15,"span"),t.EFF(16),t.k0s()(),t.j41(17,"div",18)(18,"mat-icon"),t.EFF(19,"calendar_today"),t.k0s(),t.j41(20,"span"),t.EFF(21),t.k0s()()()()(),t.j41(22,"div",19)(23,"mat-card",20)(24,"mat-card-content")(25,"div",21)(26,"mat-icon"),t.EFF(27,"receipt"),t.k0s()(),t.j41(28,"div",22)(29,"div",23),t.EFF(30),t.k0s(),t.j41(31,"div",24),t.EFF(32,"Total Usage"),t.k0s(),t.DNE(33,pn,2,1,"div",25),t.k0s()()(),t.j41(34,"mat-card",20)(35,"mat-card-content")(36,"div",26)(37,"mat-icon"),t.EFF(38,"people"),t.k0s()(),t.j41(39,"div",22)(40,"div",23),t.EFF(41),t.k0s(),t.j41(42,"div",24),t.EFF(43,"Unique Customers"),t.k0s(),t.j41(44,"div",27),t.EFF(45,"customers used this code"),t.k0s()()()(),t.j41(46,"mat-card",20)(47,"mat-card-content")(48,"div",28)(49,"mat-icon"),t.EFF(50,"money_off"),t.k0s()(),t.j41(51,"div",22)(52,"div",23),t.EFF(53),t.k0s(),t.j41(54,"div",24),t.EFF(55,"Total Discount"),t.k0s(),t.j41(56,"div",27),t.EFF(57,"discount amount given"),t.k0s()()()(),t.j41(58,"mat-card",20)(59,"mat-card-content")(60,"div",29)(61,"mat-icon"),t.EFF(62,"shopping_cart"),t.k0s()(),t.j41(63,"div",22)(64,"div",23),t.EFF(65),t.k0s(),t.j41(66,"div",24),t.EFF(67,"Avg Order Value"),t.k0s(),t.j41(68,"div",27),t.EFF(69,"average per order"),t.k0s()()()()(),t.DNE(70,gn,13,6,"mat-card",30),t.j41(71,"mat-card",31)(72,"mat-card-header")(73,"mat-card-title")(74,"mat-icon"),t.EFF(75,"history"),t.k0s(),t.EFF(76," Usage History "),t.k0s()(),t.j41(77,"mat-card-content")(78,"div",32)(79,"table",33),t.qex(80,34),t.DNE(81,un,2,0,"th",35),t.DNE(82,_n,9,2,"td",36),t.bVm(),t.qex(83,37),t.DNE(84,fn,2,0,"th",35),t.DNE(85,Cn,3,1,"td",36),t.bVm(),t.qex(86,38),t.DNE(87,hn,2,0,"th",35),t.DNE(88,Mn,3,1,"td",36),t.bVm(),t.qex(89,39),t.DNE(90,Pn,2,0,"th",35),t.DNE(91,Fn,2,1,"td",36),t.bVm(),t.qex(92,40),t.DNE(93,kn,2,0,"th",35),t.DNE(94,bn,3,1,"td",36),t.bVm(),t.DNE(95,vn,1,0,"tr",41),t.DNE(96,xn,1,0,"tr",42),t.DNE(97,On,6,0,"tr",43),t.k0s()(),t.nrm(98,"mat-paginator",44),t.k0s()()()),2&n){const e=t.XpG();t.R7$(5),t.JRh(e.data.promoCode.code),t.R7$(1),t.Y8G("color",e.promoCodeService.getStatusBadgeColor(e.data.promoCode.status)),t.R7$(1),t.SpI(" ",e.data.promoCode.status," "),t.R7$(2),t.JRh(e.data.promoCode.title),t.R7$(1),t.Y8G("ngIf",e.data.promoCode.description),t.R7$(6),t.JRh(e.getFormattedDiscount()),t.R7$(5),t.Lme("",e.formatDate(e.data.promoCode.startDate)," - ",e.formatDate(e.data.promoCode.endDate),""),t.R7$(9),t.JRh(e.stats.totalUsage),t.R7$(3),t.Y8G("ngIf",e.data.promoCode.usageLimit),t.R7$(8),t.JRh(e.stats.uniqueCustomers),t.R7$(12),t.JRh(e.formatCurrency(e.stats.totalDiscountGiven)),t.R7$(12),t.JRh(e.formatCurrency(e.stats.averageOrderValue)),t.R7$(5),t.Y8G("ngIf",e.data.promoCode.usageLimit),t.R7$(9),t.Y8G("dataSource",e.dataSource),t.R7$(16),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(2),t.Y8G("pageSizeOptions",t.lJ4(18,En))}}let jn=(()=>{class n{constructor(e,o){this.promoCodeService=e,this.data=o,this.stats=null,this.isLoading=!0,this.displayedColumns=["customer","order","discount","orderAmount","usedAt"],this.dataSource=new m.I6([])}ngOnInit(){this.loadStats(),this.loadUsageHistory()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}loadStats(){this.promoCodeService.getPromoCodeStats(this.data.promoCode.id).subscribe({next:e=>{this.stats=e,this.isLoading=!1},error:e=>{console.error("Error loading stats:",e),this.isLoading=!1}})}loadUsageHistory(){this.promoCodeService.getPromoCodeUsageHistory(this.data.promoCode.id,0,100).subscribe({next:e=>{this.dataSource.data=e.content},error:e=>{console.error("Error loading usage history:",e)}})}formatDate(e){return new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}formatCurrency(e){return`\u20b9${e.toFixed(2)}`}getFormattedDiscount(){return this.promoCodeService.getFormattedDiscount(this.data.promoCode)}getRemainingUses(){return this.data.promoCode.usageLimit&&this.stats?this.data.promoCode.usageLimit-this.stats.totalUsage:null}getUsagePercentage(){return this.data.promoCode.usageLimit&&this.stats?this.stats.totalUsage/this.data.promoCode.usageLimit*100:0}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(H),t.rXU(P.Vh))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-promo-code-stats"]],viewQuery:function(o,i){if(1&o&&t.GBs(y.iy,5),2&o){let r;t.mGM(r=t.lsd())&&(i.paginator=r.first)}},decls:15,vars:3,consts:[[1,"stats-dialog"],[1,"dialog-header"],["mat-dialog-title",""],[1,"header-icon"],["mat-icon-button","","mat-dialog-close",""],[1,"dialog-content"],["class","loading-container",4,"ngIf"],["class","stats-container",4,"ngIf"],["align","end"],["mat-raised-button","","mat-dialog-close","","color","primary"],[1,"loading-container"],[1,"stats-container"],[1,"promo-info-card"],[1,"promo-header"],[1,"promo-code-badge"],[3,"color"],["class","promo-description",4,"ngIf"],[1,"promo-details"],[1,"detail-item"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon","total-usage"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],["class","stat-sublabel",4,"ngIf"],[1,"stat-icon","unique-customers"],[1,"stat-sublabel"],[1,"stat-icon","total-discount"],[1,"stat-icon","avg-order"],["class","progress-card",4,"ngIf"],[1,"history-card"],[1,"table-container"],["mat-table","",1,"usage-table",3,"dataSource"],["matColumnDef","customer"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","order"],["matColumnDef","discount"],["matColumnDef","orderAmount"],["matColumnDef","usedAt"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"promo-description"],[1,"progress-card"],[1,"progress-header"],[1,"remaining-uses"],["mode","determinate",3,"value","color"],[1,"progress-footer"],["mat-header-cell",""],["mat-cell",""],[1,"customer-info"],[1,"customer-name"],[1,"customer-email"],[1,"order-number"],[1,"discount-amount"],[1,"date-time"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","5",1,"mat-cell","no-data"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2",2)(3,"mat-icon",3),t.EFF(4,"bar_chart"),t.k0s(),t.EFF(5),t.k0s(),t.j41(6,"button",4)(7,"mat-icon"),t.EFF(8,"close"),t.k0s()()(),t.j41(9,"mat-dialog-content",5),t.DNE(10,ln,2,0,"div",6),t.DNE(11,Rn,99,19,"div",7),t.k0s(),t.j41(12,"mat-dialog-actions",8)(13,"button",9),t.EFF(14," Close "),t.k0s()()()),2&o&&(t.R7$(5),t.SpI(" Promo Code Statistics: ",i.data.promoCode.code," "),t.R7$(5),t.Y8G("ngIf",i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isLoading&&i.stats))},dependencies:[u.bT,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,m.ky,y.iy,_.$z,_.iY,F.An,d.RN,d.m2,d.MM,d.dh,P.tx,P.BI,P.Yi,P.E7,G.Jl,k.LG,z.HM],styles:[".stats-dialog[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:90vh}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #e0e0e0}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0;font-size:24px;font-weight:600;color:#333}.header-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:28px;width:28px;height:28px}.dialog-content[_ngcontent-%COMP%]{padding:24px;overflow-y:auto}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:48px}.stats-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.promo-info-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4CAF50,#45a049);color:#fff}.promo-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.promo-code-badge[_ngcontent-%COMP%]{display:inline-block;padding:8px 16px;background:rgba(255,255,255,.2);border-radius:8px;font-weight:700;font-size:18px;letter-spacing:1px}.promo-info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:20px;font-weight:600}.promo-description[_ngcontent-%COMP%]{margin:0 0 16px;opacity:.9}.promo-details[_ngcontent-%COMP%]{display:flex;gap:24px;flex-wrap:wrap}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px}.detail-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.stat-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a;transition:transform .2s,box-shadow .2s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 12px #00000026}.stat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;padding:20px}.stat-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:60px;height:60px;border-radius:12px}.stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#fff}.stat-icon.total-usage[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2196F3,#1976D2)}.stat-icon.unique-customers[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9C27B0,#7B1FA2)}.stat-icon.total-discount[_ngcontent-%COMP%]{background:linear-gradient(135deg,#F44336,#D32F2F)}.stat-icon.avg-order[_ngcontent-%COMP%]{background:linear-gradient(135deg,#FF9800,#F57C00)}.stat-content[_ngcontent-%COMP%]{flex:1}.stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#333;line-height:1;margin-bottom:8px}.stat-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#666;margin-bottom:4px}.stat-sublabel[_ngcontent-%COMP%]{font-size:12px;color:#999}.progress-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a}.progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.progress-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#333}.remaining-uses[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#4caf50}mat-progress-bar[_ngcontent-%COMP%]{height:12px;border-radius:6px}.progress-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:8px;font-size:12px;color:#666}.history-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a}.history-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:16px 0}.history-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:18px;font-weight:600;color:#333}.table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-top:16px}.usage-table[_ngcontent-%COMP%]{width:100%;background:white}.customer-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.customer-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:24px;width:24px;height:24px}.customer-name[_ngcontent-%COMP%]{font-weight:600;color:#333}.customer-email[_ngcontent-%COMP%]{font-size:12px;color:#999}.order-number[_ngcontent-%COMP%]{font-family:monospace;font-weight:600;color:#2196f3}.discount-amount[_ngcontent-%COMP%]{color:#4caf50;font-weight:700}.date-time[_ngcontent-%COMP%]{font-size:13px;color:#666}.no-data[_ngcontent-%COMP%]{text-align:center;padding:48px;color:#999}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}@media (max-width: 768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.promo-details[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.progress-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}}"]})}}return n})();function yn(n,a){1&n&&(t.j41(0,"th",35),t.EFF(1,"Code"),t.k0s())}function In(n,a){if(1&n&&(t.j41(0,"td",36)(1,"div",37),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.SpI(" ",e.code," ")}}function Sn(n,a){1&n&&(t.j41(0,"th",35),t.EFF(1,"Title"),t.k0s())}function Dn(n,a){if(1&n&&(t.j41(0,"span",40),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.SpI(" ",e.description," ")}}function $n(n,a){if(1&n&&(t.j41(0,"td",36)(1,"div",38),t.EFF(2),t.DNE(3,Dn,2,1,"span",39),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.SpI(" ",e.title," "),t.R7$(1),t.Y8G("ngIf",e.description)}}function Nn(n,a){1&n&&(t.j41(0,"th",35),t.EFF(1,"Type"),t.k0s())}function Tn(n,a){if(1&n&&(t.j41(0,"td",36)(1,"mat-chip"),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit;t.R7$(1),t.HbH("type-chip type-"+e.type.toLowerCase()),t.R7$(1),t.SpI(" ",e.type.replace("_"," ")," ")}}function wn(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"Discount"),t.k0s())}function Gn(n,a){if(1&n&&(t.j41(0,"span",44),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.SpI(" (Max: \u20b9",e.maximumDiscountAmount,") ")}}function An(n,a){if(1&n&&(t.j41(0,"td",36)(1,"div",42)(2,"strong"),t.EFF(3),t.k0s(),t.DNE(4,Gn,2,1,"span",43),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG();t.R7$(3),t.JRh(o.getFormattedDiscount(e)),t.R7$(1),t.Y8G("ngIf",e.maximumDiscountAmount)}}function Ln(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"Min Order"),t.k0s())}function Un(n,a){if(1&n&&(t.j41(0,"td",36),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,o=t.XpG();t.R7$(1),t.SpI(" ",o.getFormattedMinOrder(e)," ")}}function Vn(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"Usage"),t.k0s())}function Yn(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",36)(1,"div",45),t.EFF(2),t.j41(3,"mat-icon",46),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.openStatsDialog(r))}),t.EFF(4," bar_chart "),t.k0s()()()}if(2&n){const e=a.$implicit,o=t.XpG();t.R7$(2),t.SpI(" ",o.getUsageText(e)," ")}}function Bn(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"Valid Period"),t.k0s())}function Xn(n,a){if(1&n&&(t.j41(0,"td",36)(1,"div",47)(2,"div"),t.EFF(3),t.k0s(),t.j41(4,"div",48),t.EFF(5,"to"),t.k0s(),t.j41(6,"div"),t.EFF(7),t.k0s()()()),2&n){const e=a.$implicit,o=t.XpG();t.R7$(3),t.JRh(o.formatDate(e.startDate)),t.R7$(3),t.AVh("expired-date",o.isExpired(e)),t.R7$(1),t.JRh(o.formatDate(e.endDate))}}function zn(n,a){1&n&&(t.j41(0,"th",35),t.EFF(1,"Status"),t.k0s())}function Jn(n,a){if(1&n&&(t.j41(0,"td",36)(1,"mat-chip",49),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG();t.R7$(1),t.Y8G("color",o.getStatusBadgeColor(e.status)),t.R7$(1),t.SpI(" ",e.status," ")}}function Hn(n,a){1&n&&(t.j41(0,"th",41),t.EFF(1,"Actions"),t.k0s())}function qn(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",36)(1,"button",50)(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",null,51)(6,"button",52),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.openEditDialog(r))}),t.j41(7,"mat-icon"),t.EFF(8,"edit"),t.k0s(),t.j41(9,"span"),t.EFF(10,"Edit"),t.k0s()(),t.j41(11,"button",52),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.openStatsDialog(r))}),t.j41(12,"mat-icon"),t.EFF(13,"bar_chart"),t.k0s(),t.j41(14,"span"),t.EFF(15,"View Stats"),t.k0s()(),t.j41(16,"button",52),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.toggleStatus(r))}),t.j41(17,"mat-icon"),t.EFF(18),t.k0s(),t.j41(19,"span"),t.EFF(20),t.k0s()(),t.nrm(21,"mat-divider"),t.j41(22,"button",53),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.deletePromoCode(r))}),t.j41(23,"mat-icon"),t.EFF(24,"delete"),t.k0s(),t.j41(25,"span"),t.EFF(26,"Delete"),t.k0s()()()()}if(2&n){const e=a.$implicit,o=t.sdS(5);t.R7$(1),t.Y8G("matMenuTriggerFor",o),t.R7$(17),t.JRh("ACTIVE"===e.status?"toggle_off":"toggle_on"),t.R7$(2),t.JRh("ACTIVE"===e.status?"Deactivate":"Activate")}}function Wn(n,a){1&n&&t.nrm(0,"tr",54)}function Kn(n,a){1&n&&t.nrm(0,"tr",55)}function Qn(n,a){1&n&&(t.j41(0,"tr",56)(1,"td",57)(2,"div",58)(3,"mat-icon"),t.EFF(4,"inbox"),t.k0s(),t.j41(5,"p"),t.EFF(6,"No promo codes found"),t.k0s()()()())}function Zn(n,a){1&n&&(t.j41(0,"div",59),t.nrm(1,"mat-spinner"),t.k0s())}const to=function(){return[10,25,50,100]};let eo=(()=>{class n{constructor(e,o,i){this.promoCodeService=e,this.dialog=o,this.snackBar=i,this.displayedColumns=["code","title","type","discount","minOrder","usage","dates","status","actions"],this.isLoading=!1,this.filterStatus="ALL",this.dataSource=new m.I6([])}ngOnInit(){this.loadPromoCodes()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}loadPromoCodes(){this.isLoading=!0,this.promoCodeService.getAllPromoCodes("ALL"!==this.filterStatus?{status:this.filterStatus}:void 0).subscribe({next:o=>{this.dataSource.data=o,this.isLoading=!1},error:o=>{console.error("Error loading promo codes:",o),this.showSnackBar("Failed to load promo codes","error"),this.isLoading=!1}})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}filterByStatus(e){this.filterStatus=e,this.loadPromoCodes()}openCreateDialog(){this.dialog.open(tt,{width:"800px",maxHeight:"90vh",data:{mode:"create"}}).afterClosed().subscribe(o=>{o&&(this.loadPromoCodes(),this.showSnackBar("Promo code created successfully","success"))})}openEditDialog(e){this.dialog.open(tt,{width:"800px",maxHeight:"90vh",data:{mode:"edit",promoCode:e}}).afterClosed().subscribe(i=>{i&&(this.loadPromoCodes(),this.showSnackBar("Promo code updated successfully","success"))})}openStatsDialog(e){this.dialog.open(jn,{width:"900px",maxHeight:"90vh",data:{promoCode:e}})}toggleStatus(e){const o="ACTIVE"===e.status?"deactivate":"activate",i="activate"===o?"activated":"deactivated";("activate"===o?this.promoCodeService.activatePromoCode(e.id):this.promoCodeService.deactivatePromoCode(e.id)).subscribe({next:()=>{this.loadPromoCodes(),this.showSnackBar(`Promo code ${i} successfully`,"success")},error:c=>{console.error(`Error ${o}ing promo code:`,c),this.showSnackBar(`Failed to ${o} promo code`,"error")}})}deletePromoCode(e){confirm(`Are you sure you want to delete promo code "${e.code}"?`)&&this.promoCodeService.deletePromoCode(e.id).subscribe({next:()=>{this.loadPromoCodes(),this.showSnackBar("Promo code deleted successfully","success")},error:o=>{console.error("Error deleting promo code:",o),this.showSnackBar("Failed to delete promo code","error")}})}getFormattedDiscount(e){return this.promoCodeService.getFormattedDiscount(e)}getFormattedMinOrder(e){return this.promoCodeService.getFormattedMinOrder(e)}getStatusBadgeColor(e){return this.promoCodeService.getStatusBadgeColor(e)}isExpired(e){return this.promoCodeService.isExpired(e)}formatDate(e){return new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}getUsageText(e){return e.usageLimit?`${e.currentUsageCount||0}/${e.usageLimit} (${e.usageLimit-(e.currentUsageCount||0)} left)`:`${e.currentUsageCount||0} uses`}showSnackBar(e,o){this.snackBar.open(e,"Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top",panelClass:"success"===o?"snackbar-success":"snackbar-error"})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(H),t.rXU(P.bZ),t.rXU(E.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-promo-code-list"]],viewQuery:function(o,i){if(1&o&&(t.GBs(y.iy,5),t.GBs(I.B4,5)),2&o){let r;t.mGM(r=t.lsd())&&(i.paginator=r.first),t.mGM(r=t.lsd())&&(i.sort=r.first)}},decls:64,vars:7,consts:[[1,"promo-code-container"],[1,"header-section"],[1,"page-title"],[1,"title-icon"],["mat-raised-button","","color","primary",3,"click"],[1,"filter-card"],[1,"filter-row"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by code or title",3,"keyup"],["matPrefix",""],[1,"status-toggle",3,"value","valueChange","change"],["value","ALL"],["value","ACTIVE"],["value","INACTIVE"],["value","EXPIRED"],[1,"table-card"],[1,"table-container"],["mat-table","","matSort","",1,"promo-table",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","type"],["matColumnDef","discount"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","minOrder"],["matColumnDef","usage"],["matColumnDef","dates"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],["class","loading-overlay",4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"promo-code-badge"],[1,"promo-title"],["class","promo-description",4,"ngIf"],[1,"promo-description"],["mat-header-cell",""],[1,"discount-info"],["class","max-discount",4,"ngIf"],[1,"max-discount"],[1,"usage-info"],["matTooltip","View detailed stats",1,"stats-icon",3,"click"],[1,"date-range"],[1,"date-separator"],[3,"color"],["mat-icon-button","","aria-label","Actions menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"delete-action",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","9",1,"mat-cell"],[1,"no-data"],[1,"loading-overlay"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2",2)(3,"mat-icon",3),t.EFF(4,"local_offer"),t.k0s(),t.EFF(5," Promo Code Management "),t.k0s(),t.j41(6,"button",4),t.bIt("click",function(){return i.openCreateDialog()}),t.j41(7,"mat-icon"),t.EFF(8,"add"),t.k0s(),t.EFF(9," Create Promo Code "),t.k0s()(),t.j41(10,"mat-card",5)(11,"mat-card-content")(12,"div",6)(13,"mat-form-field",7)(14,"mat-label"),t.EFF(15,"Search"),t.k0s(),t.j41(16,"input",8),t.bIt("keyup",function(c){return i.applyFilter(c)}),t.k0s(),t.j41(17,"mat-icon",9),t.EFF(18,"search"),t.k0s()(),t.j41(19,"mat-button-toggle-group",10),t.bIt("valueChange",function(c){return i.filterStatus=c})("change",function(){return i.filterByStatus(i.filterStatus)}),t.j41(20,"mat-button-toggle",11),t.EFF(21,"All"),t.k0s(),t.j41(22,"mat-button-toggle",12),t.EFF(23,"Active"),t.k0s(),t.j41(24,"mat-button-toggle",13),t.EFF(25,"Inactive"),t.k0s(),t.j41(26,"mat-button-toggle",14),t.EFF(27,"Expired"),t.k0s()()()()(),t.j41(28,"mat-card",15)(29,"mat-card-content")(30,"div",16)(31,"table",17),t.qex(32,18),t.DNE(33,yn,2,0,"th",19),t.DNE(34,In,3,1,"td",20),t.bVm(),t.qex(35,21),t.DNE(36,Sn,2,0,"th",19),t.DNE(37,$n,4,2,"td",20),t.bVm(),t.qex(38,22),t.DNE(39,Nn,2,0,"th",19),t.DNE(40,Tn,3,3,"td",20),t.bVm(),t.qex(41,23),t.DNE(42,wn,2,0,"th",24),t.DNE(43,An,5,2,"td",20),t.bVm(),t.qex(44,25),t.DNE(45,Ln,2,0,"th",24),t.DNE(46,Un,2,1,"td",20),t.bVm(),t.qex(47,26),t.DNE(48,Vn,2,0,"th",24),t.DNE(49,Yn,5,1,"td",20),t.bVm(),t.qex(50,27),t.DNE(51,Bn,2,0,"th",24),t.DNE(52,Xn,8,4,"td",20),t.bVm(),t.qex(53,28),t.DNE(54,zn,2,0,"th",19),t.DNE(55,Jn,3,2,"td",20),t.bVm(),t.qex(56,29),t.DNE(57,Hn,2,0,"th",24),t.DNE(58,qn,27,3,"td",20),t.bVm(),t.DNE(59,Wn,1,0,"tr",30),t.DNE(60,Kn,1,0,"tr",31),t.DNE(61,Qn,7,0,"tr",32),t.k0s()(),t.nrm(62,"mat-paginator",33),t.k0s()(),t.DNE(63,Zn,2,0,"div",34),t.k0s()),2&o&&(t.R7$(19),t.Y8G("value",i.filterStatus),t.R7$(12),t.Y8G("dataSource",i.dataSource),t.R7$(28),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(2),t.Y8G("pageSizeOptions",t.lJ4(6,to)),t.R7$(1),t.Y8G("ngIf",i.isLoading))},dependencies:[u.bT,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,m.ky,y.iy,I.B4,I.aE,_.$z,_.iY,F.An,O.fg,p.rl,p.nJ,p.JW,d.RN,d.m2,G.Jl,D.oV,k.LG,B.ec,B.pc,U.kk,U.fb,U.Cp,J.q],styles:[".promo-code-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:28px;font-weight:600;color:#333;margin:0}.title-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#4caf50}.filter-card[_ngcontent-%COMP%]{margin-bottom:24px}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;flex-wrap:wrap}.search-field[_ngcontent-%COMP%]{flex:1;min-width:300px}.status-toggle[_ngcontent-%COMP%]{flex-shrink:0}.table-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.promo-table[_ngcontent-%COMP%]{width:100%;background:white}.promo-code-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;background:linear-gradient(135deg,#4CAF50,#45a049);color:#fff;font-weight:700;font-size:14px;border-radius:6px;letter-spacing:.5px;box-shadow:0 2px 4px #4caf504d}.promo-title[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.promo-description[_ngcontent-%COMP%]{font-size:12px;color:#666}.type-chip[_ngcontent-%COMP%]{font-size:11px;font-weight:600;text-transform:uppercase}.type-chip.type-percentage[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.type-chip.type-fixed_amount[_ngcontent-%COMP%]{background-color:#f3e5f5;color:#7b1fa2}.type-chip.type-free_shipping[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#388e3c}.discount-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.max-discount[_ngcontent-%COMP%]{font-size:11px;color:#999}.usage-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.stats-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#4caf50;cursor:pointer;transition:color .2s}.stats-icon[_ngcontent-%COMP%]:hover{color:#45a049}.date-range[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;font-size:12px}.date-separator[_ngcontent-%COMP%]{font-size:10px;color:#999}.expired-date[_ngcontent-%COMP%]{color:#f44336;font-weight:600}.delete-action[_ngcontent-%COMP%]{color:#f44336}.delete-action[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336}.no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;color:#999}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(255,255,255,.8);display:flex;align-items:center;justify-content:center;z-index:1000}@media (max-width: 768px){.promo-code-container[_ngcontent-%COMP%]{padding:16px}.header-section[_ngcontent-%COMP%]{flex-direction:column;gap:16px;align-items:stretch}.filter-row[_ngcontent-%COMP%]{flex-direction:column}.search-field[_ngcontent-%COMP%], .status-toggle[_ngcontent-%COMP%]{width:100%}}  .snackbar-success{background-color:#4caf50;color:#fff}  .snackbar-error{background-color:#f44336;color:#fff}"]})}}return n})(),no=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${R.c.apiUrl}/marketing`}sendBulkMarketingMessage(e){return this.http.post(`${this.apiUrl}/send-bulk`,e)}getAvailableTemplates(){return this.http.get(`${this.apiUrl}/templates`)}getMarketingStats(){return this.http.get(`${this.apiUrl}/stats`)}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(v.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function oo(n,a){if(1&n&&(t.j41(0,"mat-card",22)(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3,"Customer Statistics"),t.k0s()(),t.j41(4,"mat-card-content")(5,"div",23)(6,"div",24)(7,"div",25),t.EFF(8),t.k0s(),t.j41(9,"div",26),t.EFF(10,"Total Customers"),t.k0s()(),t.j41(11,"div",24)(12,"div",25),t.EFF(13),t.k0s(),t.j41(14,"div",26),t.EFF(15,"Active Customers"),t.k0s()(),t.j41(16,"div",24)(17,"div",25),t.EFF(18),t.k0s(),t.j41(19,"div",26),t.EFF(20,"With Mobile Number"),t.k0s()(),t.j41(21,"div",27)(22,"div",25),t.EFF(23),t.k0s(),t.j41(24,"div",26),t.EFF(25,"Eligible for Marketing"),t.k0s()()()()()),2&n){const e=t.XpG();t.R7$(8),t.JRh(e.stats.totalCustomers),t.R7$(5),t.JRh(e.stats.activeCustomers),t.R7$(5),t.JRh(e.stats.customersWithMobile),t.R7$(5),t.JRh(e.stats.eligibleForMarketing)}}function io(n,a){if(1&n&&(t.j41(0,"mat-option",28),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.templateName),t.R7$(1),t.SpI(" ",e.displayName," ")}}function ao(n,a){if(1&n&&(t.j41(0,"mat-hint"),t.EFF(1),t.k0s()),2&n){const e=t.XpG();let o;t.R7$(1),t.SpI(" ",null==(o=e.getSelectedTemplate())?null:o.description," ")}}function ro(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Please select a template "),t.k0s())}function so(n,a){if(1&n&&(t.j41(0,"div",29)(1,"mat-icon"),t.EFF(2,"info"),t.k0s(),t.j41(3,"div",30)(4,"strong"),t.EFF(5,"Parameter Description:"),t.k0s(),t.EFF(6),t.k0s()()),2&n){const e=t.XpG();let o;t.R7$(6),t.SpI(" ",null==(o=e.getSelectedTemplate())?null:o.parameterDescription," ")}}function co(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Image URL is required for marketing messages "),t.k0s())}function mo(n,a){if(1&n&&(t.j41(0,"mat-form-field",5)(1,"mat-label"),t.EFF(2,"Marketing Image URL"),t.k0s(),t.nrm(3,"input",31),t.j41(4,"mat-hint",12),t.EFF(5," The image that will appear in the WhatsApp message header "),t.k0s(),t.DNE(6,co,2,0,"mat-error",8),t.k0s()),2&n){const e=t.XpG();let o;t.R7$(6),t.Y8G("ngIf",null==(o=e.marketingForm.get("imageUrl"))?null:o.hasError("required"))}}function lo(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Message content is required "),t.k0s())}function po(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Message must not exceed 500 characters "),t.k0s())}function go(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Second message content is required "),t.k0s())}function uo(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Message must not exceed 500 characters "),t.k0s())}function _o(n,a){if(1&n&&(t.j41(0,"mat-form-field",5)(1,"mat-label"),t.EFF(2,"Message Content (Parameter 2)"),t.k0s(),t.j41(3,"textarea",32),t.EFF(4,"          "),t.k0s(),t.j41(5,"mat-hint",12),t.EFF(6),t.k0s(),t.j41(7,"mat-hint",13),t.EFF(8),t.k0s(),t.DNE(9,go,2,0,"mat-error",8),t.DNE(10,uo,2,0,"mat-error",8),t.k0s()),2&n){const e=t.XpG();let o,i,r;t.R7$(3),t.Mz_("placeholder","Enter the second message content that will replace ",2," in the template"),t.R7$(3),t.SpI(" This text will be inserted into the template at the ",2," placeholder "),t.R7$(2),t.SpI(" ",(null==(o=e.marketingForm.get("messageParam2"))||null==o.value?null:o.value.length)||0,"/500 "),t.R7$(1),t.Y8G("ngIf",null==(i=e.marketingForm.get("messageParam2"))?null:i.hasError("required")),t.R7$(1),t.Y8G("ngIf",null==(r=e.marketingForm.get("messageParam2"))?null:r.hasError("maxlength"))}}function fo(n,a){if(1&n&&(t.j41(0,"mat-option",28),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.value),t.R7$(1),t.SpI(" ",e.label," ")}}function Co(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Please select target audience "),t.k0s())}function ho(n,a){1&n&&(t.j41(0,"mat-icon"),t.EFF(1,"send"),t.k0s())}function Mo(n,a){1&n&&t.nrm(0,"mat-spinner",33)}function Po(n,a){1&n&&(t.j41(0,"span"),t.EFF(1,"Send Messages"),t.k0s())}function Fo(n,a){1&n&&(t.j41(0,"span"),t.EFF(1,"Sending..."),t.k0s())}function ko(n,a){if(1&n&&(t.j41(0,"mat-card",34)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),t.EFF(4),t.k0s(),t.EFF(5," Send Results "),t.k0s()(),t.j41(6,"mat-card-content")(7,"div",35)(8,"p",36),t.EFF(9),t.k0s(),t.j41(10,"div",37)(11,"div",38)(12,"mat-icon"),t.EFF(13,"done"),t.k0s(),t.j41(14,"div")(15,"div",25),t.EFF(16),t.k0s(),t.j41(17,"div",26),t.EFF(18,"Successful"),t.k0s()()(),t.j41(19,"div",39)(20,"mat-icon"),t.EFF(21,"close"),t.k0s(),t.j41(22,"div")(23,"div",25),t.EFF(24),t.k0s(),t.j41(25,"div",26),t.EFF(26,"Failed"),t.k0s()()(),t.j41(27,"div",40)(28,"mat-icon"),t.EFF(29,"people"),t.k0s(),t.j41(30,"div")(31,"div",25),t.EFF(32),t.k0s(),t.j41(33,"div",26),t.EFF(34,"Total"),t.k0s()()()(),t.nrm(35,"mat-progress-bar",41),t.j41(36,"div",42),t.EFF(37),t.k0s(),t.j41(38,"div",43)(39,"p")(40,"strong"),t.EFF(41,"Template Used:"),t.k0s(),t.EFF(42),t.k0s(),t.j41(43,"p")(44,"strong"),t.EFF(45,"Message Content:"),t.k0s(),t.EFF(46),t.k0s()()()()()),2&n){const e=t.XpG();t.R7$(3),t.AVh("success",e.lastResult.success)("error",!e.lastResult.success),t.R7$(1),t.SpI(" ",e.lastResult.success?"check_circle":"error"," "),t.R7$(5),t.JRh(e.lastResult.message),t.R7$(7),t.JRh(e.lastResult.successCount),t.R7$(8),t.JRh(e.lastResult.failureCount),t.R7$(8),t.JRh(e.lastResult.totalCustomers),t.R7$(3),t.Y8G("value",e.getSuccessRate())("color",e.getSuccessRate()>80?"primary":"warn"),t.R7$(2),t.SpI(" Success Rate: ",e.getSuccessRate().toFixed(1),"% "),t.R7$(5),t.SpI(" ",e.lastResult.templateUsed,""),t.R7$(4),t.SpI(" ",e.lastResult.messageParam,"")}}let bo=(()=>{class n{constructor(e,o,i){this.fb=e,this.marketingService=o,this.snackBar=i,this.templates=[],this.stats=null,this.isLoading=!1,this.isSending=!1,this.lastResult=null,this.targetAudienceOptions=[{value:"ALL_CUSTOMERS",label:"All Active Customers"}],this.initializeForm()}ngOnInit(){this.loadTemplates(),this.loadStats()}initializeForm(){this.marketingForm=this.fb.group({templateName:["",s.k0.required],messageParam:["",[s.k0.required,s.k0.maxLength(500)]],messageParam2:[""],imageUrl:[""],targetAudience:["ALL_CUSTOMERS",s.k0.required]}),this.marketingForm.get("templateName")?.valueChanges.subscribe(e=>{this.updateFormValidators(e)})}updateFormValidators(e){const o=this.marketingForm.get("messageParam2"),i=this.marketingForm.get("imageUrl");o?.clearValidators(),i?.clearValidators(),"marketingmsg"===e&&(i?.setValidators([s.k0.required]),o?.setValidators([s.k0.required,s.k0.maxLength(500)])),o?.updateValueAndValidity(),i?.updateValueAndValidity()}isMarketingMsgTemplate(){return"marketingmsg"===this.marketingForm.get("templateName")?.value}loadTemplates(){this.isLoading=!0,this.marketingService.getAvailableTemplates().subscribe({next:e=>{this.templates=e,this.isLoading=!1,e.length>0&&this.marketingForm.patchValue({templateName:e[0].templateName})},error:e=>{console.error("Error loading templates:",e),this.snackBar.open("Failed to load templates","Close",{duration:3e3,panelClass:["error-snackbar"]}),this.isLoading=!1}})}loadStats(){this.marketingService.getMarketingStats().subscribe({next:e=>{this.stats=e},error:e=>{console.error("Error loading stats:",e)}})}getSelectedTemplate(){const e=this.marketingForm.get("templateName")?.value;return this.templates.find(o=>o.templateName===e)}onSendMessages(){if(this.marketingForm.invalid)return void this.snackBar.open("Please fill in all required fields","Close",{duration:3e3,panelClass:["error-snackbar"]});const e=this.marketingForm.value;confirm(`Are you sure you want to send marketing messages to ${this.stats?.eligibleForMarketing||0} customers?\n\nTemplate: ${this.getSelectedTemplate()?.displayName}\nMessage: ${e.messageParam}\n\nThis action cannot be undone.`)&&(this.isSending=!0,this.lastResult=null,this.marketingService.sendBulkMarketingMessage(e).subscribe({next:r=>{this.isSending=!1,this.lastResult=r,r.success?(this.snackBar.open(`Successfully sent ${r.successCount} messages!`,"Close",{duration:5e3,panelClass:["success-snackbar"]}),this.marketingForm.patchValue({messageParam:""}),this.loadStats()):this.snackBar.open(`Failed to send messages: ${r.message}`,"Close",{duration:5e3,panelClass:["error-snackbar"]})},error:r=>{console.error("Error sending marketing messages:",r),this.isSending=!1,this.snackBar.open("Failed to send marketing messages. Please try again.","Close",{duration:5e3,panelClass:["error-snackbar"]})}}))}getSuccessRate(){return this.lastResult&&0!==this.lastResult.totalCustomers?this.lastResult.successCount/this.lastResult.totalCustomers*100:0}onReset(){this.marketingForm.reset({templateName:this.templates.length>0?this.templates[0].templateName:"",targetAudience:"ALL_CUSTOMERS"}),this.lastResult=null}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(s.ok),t.rXU(no),t.rXU(E.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-marketing-messages"]],decls:75,vars:23,consts:[[1,"marketing-messages-container"],[1,"header-card"],["class","stats-card",4,"ngIf"],[1,"form-card"],[1,"marketing-form",3,"formGroup"],["appearance","outline",1,"full-width"],["formControlName","templateName","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","template-info",4,"ngIf"],["appearance","outline","class","full-width",4,"ngIf"],["matInput","","formControlName","messageParam","rows","4","required","","maxlength","500",3,"placeholder"],["align","start"],["align","end"],["formControlName","targetAudience","required",""],[1,"form-actions"],["mat-raised-button","","color","primary",3,"disabled","click"],["diameter","20",4,"ngIf"],["mat-stroked-button","",3,"disabled","click"],["class","results-card",4,"ngIf"],[1,"notice-card"],[1,"notice-content"],[1,"stats-card"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],[1,"stat-item","highlight"],[3,"value"],[1,"template-info"],[1,"info-text"],["matInput","","formControlName","imageUrl","placeholder","Enter image URL (e.g., https://example.com/image.jpg)","required",""],["matInput","","formControlName","messageParam2","rows","4","required","","maxlength","500",3,"placeholder"],["diameter","20"],[1,"results-card"],[1,"result-summary"],[1,"result-message"],[1,"result-stats"],[1,"result-stat","success"],[1,"result-stat","failure"],[1,"result-stat","total"],["mode","determinate",3,"value","color"],[1,"success-rate"],[1,"result-details"]],template:function(o,i){if(1&o&&(t.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),t.EFF(5,"campaign"),t.k0s(),t.EFF(6," WhatsApp Marketing Messages "),t.k0s(),t.j41(7,"mat-card-subtitle"),t.EFF(8," Send bulk marketing messages to customers via WhatsApp using MSG91 "),t.k0s()()(),t.DNE(9,oo,26,4,"mat-card",2),t.j41(10,"mat-card",3)(11,"mat-card-header")(12,"mat-card-title"),t.EFF(13,"Send Marketing Message"),t.k0s()(),t.j41(14,"mat-card-content")(15,"form",4)(16,"mat-form-field",5)(17,"mat-label"),t.EFF(18,"Select Template"),t.k0s(),t.j41(19,"mat-select",6),t.DNE(20,io,2,2,"mat-option",7),t.k0s(),t.DNE(21,ao,2,1,"mat-hint",8),t.DNE(22,ro,2,0,"mat-error",8),t.k0s(),t.DNE(23,so,7,1,"div",9),t.DNE(24,mo,7,1,"mat-form-field",10),t.j41(25,"mat-form-field",5)(26,"mat-label"),t.EFF(27),t.k0s(),t.j41(28,"textarea",11),t.EFF(29,"          "),t.k0s(),t.j41(30,"mat-hint",12),t.EFF(31),t.k0s(),t.j41(32,"mat-hint",13),t.EFF(33),t.k0s(),t.DNE(34,lo,2,0,"mat-error",8),t.DNE(35,po,2,0,"mat-error",8),t.k0s(),t.DNE(36,_o,11,5,"mat-form-field",10),t.j41(37,"mat-form-field",5)(38,"mat-label"),t.EFF(39,"Target Audience"),t.k0s(),t.j41(40,"mat-select",14),t.DNE(41,fo,2,2,"mat-option",7),t.k0s(),t.j41(42,"mat-hint"),t.EFF(43," Messages will be sent to active customers who have SMS notifications enabled "),t.k0s(),t.DNE(44,Co,2,0,"mat-error",8),t.k0s(),t.j41(45,"div",15)(46,"button",16),t.bIt("click",function(){return i.onSendMessages()}),t.DNE(47,ho,2,0,"mat-icon",8),t.DNE(48,Mo,1,0,"mat-spinner",17),t.DNE(49,Po,2,0,"span",8),t.DNE(50,Fo,2,0,"span",8),t.k0s(),t.j41(51,"button",18),t.bIt("click",function(){return i.onReset()}),t.j41(52,"mat-icon"),t.EFF(53,"refresh"),t.k0s(),t.EFF(54," Reset "),t.k0s()()()()(),t.DNE(55,ko,47,14,"mat-card",19),t.j41(56,"mat-card",20)(57,"mat-card-content")(58,"div",21)(59,"mat-icon"),t.EFF(60,"warning"),t.k0s(),t.j41(61,"div")(62,"h4"),t.EFF(63,"Important Information"),t.k0s(),t.j41(64,"ul")(65,"li"),t.EFF(66,"Messages will only be sent to active customers with SMS notifications enabled"),t.k0s(),t.j41(67,"li"),t.EFF(68,"Customers must have a valid mobile number"),t.k0s(),t.j41(69,"li"),t.EFF(70,"Templates must be pre-approved in MSG91"),t.k0s(),t.j41(71,"li"),t.EFF(72,"There is a small delay between messages to avoid rate limiting"),t.k0s(),t.j41(73,"li"),t.EFF(74,"Please review the message content carefully before sending"),t.k0s()()()()()()()),2&o){let r,c,b,j,x;t.R7$(9),t.Y8G("ngIf",i.stats),t.R7$(6),t.Y8G("formGroup",i.marketingForm),t.R7$(5),t.Y8G("ngForOf",i.templates),t.R7$(1),t.Y8G("ngIf",i.getSelectedTemplate()),t.R7$(1),t.Y8G("ngIf",null==(r=i.marketingForm.get("templateName"))?null:r.hasError("required")),t.R7$(1),t.Y8G("ngIf",i.getSelectedTemplate()),t.R7$(1),t.Y8G("ngIf",i.isMarketingMsgTemplate()),t.R7$(3),t.JRh(i.isMarketingMsgTemplate()?"Message Content (Parameter 1)":"Message Content"),t.R7$(1),t.Mz_("placeholder","Enter the message content that will replace ",1," in the template"),t.R7$(3),t.SpI(" This text will be inserted into the template at the ",1," placeholder "),t.R7$(2),t.SpI(" ",(null==(c=i.marketingForm.get("messageParam"))||null==c.value?null:c.value.length)||0,"/500 "),t.R7$(1),t.Y8G("ngIf",null==(b=i.marketingForm.get("messageParam"))?null:b.hasError("required")),t.R7$(1),t.Y8G("ngIf",null==(j=i.marketingForm.get("messageParam"))?null:j.hasError("maxlength")),t.R7$(1),t.Y8G("ngIf",i.isMarketingMsgTemplate()),t.R7$(5),t.Y8G("ngForOf",i.targetAudienceOptions),t.R7$(3),t.Y8G("ngIf",null==(x=i.marketingForm.get("targetAudience"))?null:x.hasError("required")),t.R7$(2),t.Y8G("disabled",i.marketingForm.invalid||i.isSending||i.isLoading),t.R7$(1),t.Y8G("ngIf",!i.isSending),t.R7$(1),t.Y8G("ngIf",i.isSending),t.R7$(1),t.Y8G("ngIf",!i.isSending),t.R7$(1),t.Y8G("ngIf",i.isSending),t.R7$(1),t.Y8G("disabled",i.isSending||i.isLoading),t.R7$(4),t.Y8G("ngIf",i.lastResult)}},dependencies:[u.Sq,u.bT,s.qT,s.me,s.BC,s.cb,s.YS,s.tU,s.j4,s.JD,_.$z,F.An,O.fg,p.rl,p.nJ,p.MV,p.TL,N.VO,T.wT,d.RN,d.m2,d.MM,d.Lc,d.dh,k.LG,z.HM],styles:[".marketing-messages-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.marketing-messages-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-bottom:24px;box-shadow:0 2px 8px #0000001a}.marketing-messages-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:16px}.marketing-messages-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:24px;font-weight:500}.marketing-messages-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.marketing-messages-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{margin-left:44px;font-size:14px;color:#0009}.marketing-messages-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}.marketing-messages-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{color:#fff}.marketing-messages-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:20px;margin-top:16px}.marketing-messages-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{text-align:center;padding:16px;background:rgba(255,255,255,.1);border-radius:8px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.marketing-messages-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item.highlight[_ngcontent-%COMP%]{background:rgba(255,255,255,.2);border:2px solid rgba(255,255,255,.3)}.marketing-messages-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin-bottom:8px}.marketing-messages-container[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:14px;opacity:.9}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]   .template-info[_ngcontent-%COMP%]{display:flex;gap:12px;padding:12px;background-color:#e3f2fd;border-radius:8px;border-left:4px solid #2196f3;margin-bottom:8px}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]   .template-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2196f3;font-size:20px;width:20px;height:20px}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]   .template-info[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{flex:1;font-size:14px;line-height:1.5}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]   .template-info[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:4px}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.marketing-messages-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .marketing-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:8px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon.success[_ngcontent-%COMP%]{color:#4caf50;font-size:28px;width:28px;height:28px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon.error[_ngcontent-%COMP%]{color:#f44336;font-size:28px;width:28px;height:28px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-message[_ngcontent-%COMP%]{font-size:16px;margin-bottom:20px;padding:12px;background-color:#f5f5f5;border-radius:4px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px;margin-bottom:20px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;border-radius:8px;background-color:#f5f5f5}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat.success[_ngcontent-%COMP%]{background-color:#e8f5e9;border-left:4px solid #4caf50}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat.success[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat.failure[_ngcontent-%COMP%]{background-color:#ffebee;border-left:4px solid #f44336}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat.failure[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat.total[_ngcontent-%COMP%]{background-color:#e3f2fd;border-left:4px solid #2196f3}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat.total[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2196f3}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]   .result-stat[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;color:#0009}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{margin-bottom:8px;height:8px;border-radius:4px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .success-rate[_ngcontent-%COMP%]{text-align:center;font-size:14px;font-weight:500;margin-bottom:20px;color:#000000b3}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]{padding:16px;background-color:#f5f5f5;border-radius:4px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:14px}.marketing-messages-container[_ngcontent-%COMP%]   .results-card[_ngcontent-%COMP%]   .result-summary[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#000000b3}.marketing-messages-container[_ngcontent-%COMP%]   .notice-card[_ngcontent-%COMP%]{background-color:#fff3e0;border-left:4px solid #ff9800}.marketing-messages-container[_ngcontent-%COMP%]   .notice-card[_ngcontent-%COMP%]   .notice-content[_ngcontent-%COMP%]{display:flex;gap:16px}.marketing-messages-container[_ngcontent-%COMP%]   .notice-card[_ngcontent-%COMP%]   .notice-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9800;font-size:32px;width:32px;height:32px}.marketing-messages-container[_ngcontent-%COMP%]   .notice-card[_ngcontent-%COMP%]   .notice-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:#e65100}.marketing-messages-container[_ngcontent-%COMP%]   .notice-card[_ngcontent-%COMP%]   .notice-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.marketing-messages-container[_ngcontent-%COMP%]   .notice-card[_ngcontent-%COMP%]   .notice-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;color:#000000b3;line-height:1.5}@media (max-width: 768px){.marketing-messages-container[_ngcontent-%COMP%]{padding:16px}.marketing-messages-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)!important}.marketing-messages-container[_ngcontent-%COMP%]   .result-stats[_ngcontent-%COMP%]{grid-template-columns:1fr!important}}"]})}}return n})();var q=l(8810);let vo=(()=>{class n{constructor(e){this.http=e,this.API_URL=`${R.c.apiUrl}/notifications`}sendBroadcastNotification(e){return this.http.post(`${this.API_URL}/broadcast`,{title:e.title,message:e.message,priority:e.priority,type:e.type,recipientType:"ALL_CUSTOMERS",sendPush:!0}).pipe((0,h.T)(i=>i),(0,C.W)(i=>(console.error("Error sending broadcast notification:",i),(0,q.$)(()=>i))))}sendNotificationToUser(e){return this.http.post(this.API_URL,{title:e.title,message:e.message,priority:e.priority,type:e.type,recipientType:"SPECIFIC_USER",recipientId:e.recipientId,sendPush:!0}).pipe((0,h.T)(i=>i),(0,C.W)(i=>(console.error("Error sending notification:",i),(0,q.$)(()=>i))))}getNotificationEnums(){return this.http.get(`${this.API_URL}/enums`).pipe((0,C.W)(e=>(console.error("Error fetching notification enums:",e),(0,q.$)(()=>e))))}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(v.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function xo(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Title is required "),t.k0s())}function Oo(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Message is required "),t.k0s())}function Eo(n,a){if(1&n&&(t.j41(0,"mat-option",20),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e),t.R7$(1),t.SpI(" ",e," ")}}function Ro(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Type is required "),t.k0s())}function jo(n,a){if(1&n&&(t.j41(0,"mat-option",20),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e),t.R7$(1),t.SpI(" ",e," ")}}function yo(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Priority is required "),t.k0s())}function Io(n,a){if(1&n&&(t.j41(0,"mat-option",20),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e),t.R7$(1),t.SpI(" ","ALL_CUSTOMERS"===e?"All Customers":"Specific User"," ")}}function So(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Recipient type is required "),t.k0s())}function Do(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Customer ID is required for specific user "),t.k0s())}function $o(n,a){if(1&n&&(t.j41(0,"mat-form-field",9)(1,"mat-label"),t.EFF(2,"Customer ID"),t.k0s(),t.nrm(3,"input",21),t.DNE(4,Do,2,0,"mat-error",6),t.k0s()),2&n){const e=t.XpG();let o;t.R7$(4),t.Y8G("ngIf",null==(o=e.notificationForm.get("recipientId"))?null:o.hasError("required"))}}function No(n,a){1&n&&(t.j41(0,"mat-icon"),t.EFF(1,"send"),t.k0s())}function To(n,a){1&n&&t.nrm(0,"mat-spinner",22)}let wo=(()=>{class n{constructor(e,o,i){this.fb=e,this.pushNotificationService=o,this.snackBar=i,this.loading=!1,this.recipientTypes=["ALL_CUSTOMERS","SPECIFIC_USER"],this.notificationTypes=[],this.priorities=[]}ngOnInit(){this.initializeForm(),this.loadEnums()}initializeForm(){this.notificationForm=this.fb.group({title:["",[s.k0.required,s.k0.maxLength(100)]],message:["",[s.k0.required,s.k0.maxLength(500)]],priority:["HIGH",s.k0.required],type:["INFO",s.k0.required],recipientType:["ALL_CUSTOMERS",s.k0.required],recipientId:[null]}),this.notificationForm.get("recipientType")?.valueChanges.subscribe(e=>{const o=this.notificationForm.get("recipientId");"SPECIFIC_USER"===e?o?.setValidators([s.k0.required]):(o?.clearValidators(),o?.setValue(null)),o?.updateValueAndValidity()})}loadEnums(){this.pushNotificationService.getNotificationEnums().subscribe({next:e=>{this.notificationTypes=e.notificationTypes||["REMINDER","SUCCESS","PAYMENT","ANNOUNCEMENT","ERROR","ORDER_UPDATE","WARNING","ORDER","SYSTEM","PROMOTION","INFO"],this.priorities=e.notificationPriorities||["HIGH","MEDIUM","LOW"]},error:e=>{console.error("Error loading enums:",e),this.notificationTypes=["REMINDER","SUCCESS","PAYMENT","ANNOUNCEMENT","ERROR","ORDER_UPDATE","WARNING","ORDER","SYSTEM","PROMOTION","INFO"],this.priorities=["HIGH","MEDIUM","LOW"]}})}onSubmit(){if(this.notificationForm.invalid)return void this.markFormGroupTouched(this.notificationForm);this.loading=!0;const e=this.notificationForm.value,o={title:e.title,message:e.message,priority:e.priority,type:e.type,recipientType:e.recipientType,recipientId:e.recipientId,sendPush:!0};("ALL_CUSTOMERS"===o.recipientType?this.pushNotificationService.sendBroadcastNotification(o):this.pushNotificationService.sendNotificationToUser(o)).subscribe({next:r=>{this.loading=!1,this.snackBar.open("Push notification sent successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.notificationForm.reset({priority:"HIGH",type:"INFO",recipientType:"ALL_CUSTOMERS"})},error:r=>{this.loading=!1,console.error("Error sending notification:",r),this.snackBar.open(r.error?.message||"Failed to send push notification","Close",{duration:5e3,panelClass:["error-snackbar"]})}})}markFormGroupTouched(e){Object.keys(e.controls).forEach(o=>{const i=e.get(o);i?.markAsTouched(),i instanceof s.gE&&this.markFormGroupTouched(i)})}get isSpecificUser(){return"SPECIFIC_USER"===this.notificationForm.get("recipientType")?.value}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(s.ok),t.rXU(vo),t.rXU(E.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-push-notification-sender"]],decls:85,vars:17,consts:[[1,"push-notification-container"],[3,"formGroup","ngSubmit"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","title","placeholder","Enter notification title","maxlength","100"],["align","end"],[4,"ngIf"],["matInput","","formControlName","message","rows","4","placeholder","Enter notification message","maxlength","500"],[1,"form-row","two-columns"],["appearance","outline"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["formControlName","priority"],["formControlName","recipientType"],["appearance","outline",4,"ngIf"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20",4,"ngIf"],["mat-button","","type","button",3,"disabled","click"],[1,"info-card"],[3,"value"],["matInput","","type","number","formControlName","recipientId","placeholder","Enter customer ID"],["diameter","20"]],template:function(o,i){if(1&o&&(t.j41(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),t.EFF(5,"notifications_active"),t.k0s(),t.EFF(6," Send Push Notification "),t.k0s(),t.j41(7,"mat-card-subtitle"),t.EFF(8,"Send notifications to customers via Firebase Cloud Messaging"),t.k0s()(),t.j41(9,"mat-card-content")(10,"form",1),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(11,"div",2)(12,"mat-form-field",3)(13,"mat-label"),t.EFF(14,"Notification Title"),t.k0s(),t.nrm(15,"input",4),t.j41(16,"mat-hint",5),t.EFF(17),t.k0s(),t.DNE(18,xo,2,0,"mat-error",6),t.k0s()(),t.j41(19,"div",2)(20,"mat-form-field",3)(21,"mat-label"),t.EFF(22,"Message"),t.k0s(),t.nrm(23,"textarea",7),t.j41(24,"mat-hint",5),t.EFF(25),t.k0s(),t.DNE(26,Oo,2,0,"mat-error",6),t.k0s()(),t.j41(27,"div",8)(28,"mat-form-field",9)(29,"mat-label"),t.EFF(30,"Notification Type"),t.k0s(),t.j41(31,"mat-select",10),t.DNE(32,Eo,2,2,"mat-option",11),t.k0s(),t.DNE(33,Ro,2,0,"mat-error",6),t.k0s(),t.j41(34,"mat-form-field",9)(35,"mat-label"),t.EFF(36,"Priority"),t.k0s(),t.j41(37,"mat-select",12),t.DNE(38,jo,2,2,"mat-option",11),t.k0s(),t.DNE(39,yo,2,0,"mat-error",6),t.k0s()(),t.j41(40,"div",8)(41,"mat-form-field",9)(42,"mat-label"),t.EFF(43,"Recipient Type"),t.k0s(),t.j41(44,"mat-select",13),t.DNE(45,Io,2,2,"mat-option",11),t.k0s(),t.DNE(46,So,2,0,"mat-error",6),t.k0s(),t.DNE(47,$o,5,1,"mat-form-field",14),t.k0s(),t.j41(48,"div",15)(49,"button",16),t.DNE(50,No,2,0,"mat-icon",6),t.DNE(51,To,1,0,"mat-spinner",17),t.EFF(52),t.k0s(),t.j41(53,"button",18),t.bIt("click",function(){return i.notificationForm.reset({priority:"HIGH",type:"INFO",recipientType:"ALL_CUSTOMERS"})}),t.EFF(54," Reset "),t.k0s()()()()(),t.j41(55,"mat-card",19)(56,"mat-card-header")(57,"mat-card-title")(58,"mat-icon"),t.EFF(59,"info"),t.k0s(),t.EFF(60," Information "),t.k0s()(),t.j41(61,"mat-card-content")(62,"ul")(63,"li")(64,"strong"),t.EFF(65,"All Customers:"),t.k0s(),t.EFF(66," Sends notification to all customers who have the mobile app installed"),t.k0s(),t.j41(67,"li")(68,"strong"),t.EFF(69,"Specific User:"),t.k0s(),t.EFF(70," Sends notification to a specific customer by their ID"),t.k0s(),t.j41(71,"li")(72,"strong"),t.EFF(73,"Priority Levels:"),t.k0s(),t.j41(74,"ul")(75,"li"),t.EFF(76,"HIGH: Shows immediately with sound"),t.k0s(),t.j41(77,"li"),t.EFF(78,"MEDIUM: Shows with default notification"),t.k0s(),t.j41(79,"li"),t.EFF(80,"LOW: Silent notification"),t.k0s()()(),t.j41(81,"li")(82,"strong"),t.EFF(83,"Notification Types:"),t.k0s(),t.EFF(84," Used for categorizing and filtering notifications in the app"),t.k0s()()()()()),2&o){let r,c,b,j,x,A,L;t.R7$(10),t.Y8G("formGroup",i.notificationForm),t.R7$(7),t.SpI("",(null==(r=i.notificationForm.get("title"))||null==r.value?null:r.value.length)||0,"/100"),t.R7$(1),t.Y8G("ngIf",null==(c=i.notificationForm.get("title"))?null:c.hasError("required")),t.R7$(7),t.SpI("",(null==(b=i.notificationForm.get("message"))||null==b.value?null:b.value.length)||0,"/500"),t.R7$(1),t.Y8G("ngIf",null==(j=i.notificationForm.get("message"))?null:j.hasError("required")),t.R7$(6),t.Y8G("ngForOf",i.notificationTypes),t.R7$(1),t.Y8G("ngIf",null==(x=i.notificationForm.get("type"))?null:x.hasError("required")),t.R7$(5),t.Y8G("ngForOf",i.priorities),t.R7$(1),t.Y8G("ngIf",null==(A=i.notificationForm.get("priority"))?null:A.hasError("required")),t.R7$(6),t.Y8G("ngForOf",i.recipientTypes),t.R7$(1),t.Y8G("ngIf",null==(L=i.notificationForm.get("recipientType"))?null:L.hasError("required")),t.R7$(1),t.Y8G("ngIf",i.isSpecificUser),t.R7$(2),t.Y8G("disabled",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading),t.R7$(1),t.Y8G("ngIf",i.loading),t.R7$(1),t.SpI(" ",i.loading?"Sending...":"Send Notification"," "),t.R7$(1),t.Y8G("disabled",i.loading)}},dependencies:[u.Sq,u.bT,s.qT,s.me,s.Q0,s.BC,s.cb,s.tU,s.j4,s.JD,_.$z,F.An,O.fg,p.rl,p.nJ,p.MV,p.TL,N.VO,T.wT,d.RN,d.m2,d.MM,d.Lc,d.dh,k.LG],styles:[".push-notification-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.push-notification-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-bottom:20px}.push-notification-container[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:20px}.push-notification-container[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:24px;font-weight:500}.push-notification-container[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.push-notification-container[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{margin-bottom:16px}.push-notification-container[_ngcontent-%COMP%]   .form-row.two-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}@media (max-width: 768px){.push-notification-container[_ngcontent-%COMP%]   .form-row.two-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}}.push-notification-container[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.push-notification-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:24px;align-items:center}.push-notification-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .push-notification-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:8px}.push-notification-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block}.push-notification-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{background-color:#f5f5f5}.push-notification-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#1976d2}.push-notification-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.push-notification-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;line-height:1.6}.push-notification-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1976d2}.push-notification-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:4px}  .success-snackbar{background-color:#4caf50!important;color:#fff!important}  .error-snackbar{background-color:#f44336!important;color:#fff!important}"]})}}return n})();var Go=l(1413),w=l(6977),Ao=l(6781);function Lo(n,a){1&n&&(t.j41(0,"div",5),t.nrm(1,"mat-spinner",6),t.j41(2,"p"),t.EFF(3,"Loading shop owners..."),t.k0s()())}function Uo(n,a){1&n&&(t.j41(0,"div",10)(1,"mat-icon"),t.EFF(2,"store"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No shop owners found"),t.k0s()())}function Vo(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",23)(1,"mat-slide-toggle",24),t.bIt("change",function(){const r=t.eBV(e).$implicit,c=t.XpG().$implicit,b=t.XpG(3);return t.Njj(b.togglePermission(c,r))}),t.EFF(2),t.k0s()()}if(2&n){const e=a.$implicit,o=t.XpG().$implicit,i=t.XpG(3);t.AVh("active",i.hasPermission(o,e)),t.R7$(1),t.Y8G("checked",i.hasPermission(o,e))("disabled",i.saving[o.userId]),t.R7$(1),t.SpI(" ",i.getPermissionLabel(e)," ")}}function Yo(n,a){1&n&&(t.j41(0,"div",25),t.nrm(1,"mat-spinner",26),t.j41(2,"span"),t.EFF(3,"Saving..."),t.k0s()())}function Bo(n,a){if(1&n){const e=t.RV6();t.j41(0,"mat-card",13)(1,"mat-card-header")(2,"div",14),t.EFF(3),t.k0s(),t.j41(4,"mat-card-title"),t.EFF(5),t.k0s(),t.j41(6,"mat-card-subtitle"),t.EFF(7),t.k0s()(),t.j41(8,"mat-card-content")(9,"div",15)(10,"span",16)(11,"mat-icon"),t.EFF(12,"lock_open"),t.k0s(),t.EFF(13),t.k0s(),t.j41(14,"div",17)(15,"button",18),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(3);return t.Njj(c.grantAllPermissions(r))}),t.j41(16,"mat-icon"),t.EFF(17,"done_all"),t.k0s()(),t.j41(18,"button",19),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(3);return t.Njj(c.revokeAllPermissions(r))}),t.j41(19,"mat-icon"),t.EFF(20,"clear_all"),t.k0s()()()(),t.nrm(21,"mat-divider"),t.j41(22,"div",20),t.DNE(23,Vo,3,5,"div",21),t.k0s(),t.DNE(24,Yo,4,0,"div",22),t.k0s()()}if(2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(3),t.SpI(" ",(e.fullName||"S").charAt(0)," "),t.R7$(2),t.JRh(e.fullName||e.username),t.R7$(2),t.JRh(e.email),t.R7$(6),t.SpI(" ",o.getPermissionCount(e)," permissions "),t.R7$(2),t.Y8G("disabled",o.saving[e.userId]),t.R7$(3),t.Y8G("disabled",o.saving[e.userId]),t.R7$(5),t.Y8G("ngForOf",e.allAvailablePermissions),t.R7$(1),t.Y8G("ngIf",o.saving[e.userId])}}function Xo(n,a){if(1&n&&(t.j41(0,"div",11),t.DNE(1,Bo,25,8,"mat-card",12),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.shopOwners)}}function zo(n,a){if(1&n&&(t.j41(0,"div",7),t.DNE(1,Uo,5,0,"div",8),t.DNE(2,Xo,2,1,"div",9),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("ngIf",0===e.shopOwners.length),t.R7$(1),t.Y8G("ngIf",e.shopOwners.length>0)}}let Jo=(()=>{class n{constructor(e,o){this.menuPermissionService=e,this.snackBar=o,this.destroy$=new Go.B,this.shopOwners=[],this.allPermissions=[],this.loading=!0,this.saving={},this.permissionLabels={MENU_DASHBOARD:"Dashboard",MENU_SHOP_PROFILE:"Shop Profile",MENU_MY_PRODUCTS:"My Products",MENU_BROWSE_PRODUCTS:"Browse Products",MENU_COMBOS:"Combos",MENU_BULK_IMPORT:"Bulk Import",MENU_ORDER_MANAGEMENT:"Order Management",MENU_NOTIFICATIONS:"Notifications",MENU_PROMO_CODES:"Promo Codes"}}ngOnInit(){this.loadData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadData(){this.loading=!0,this.menuPermissionService.getAllMenuPermissions().pipe((0,w.Q)(this.destroy$)).subscribe({next:e=>{this.allPermissions=e,this.loadShopOwners()},error:e=>{console.error("Error loading permissions:",e),this.snackBar.open("Error loading permissions","Close",{duration:3e3}),this.loading=!1}})}loadShopOwners(){this.menuPermissionService.getAllShopOwnersWithPermissions().pipe((0,w.Q)(this.destroy$)).subscribe({next:e=>{this.shopOwners=e,this.loading=!1},error:e=>{console.error("Error loading shop owners:",e),this.snackBar.open("Error loading shop owners","Close",{duration:3e3}),this.loading=!1}})}hasPermission(e,o){return e.menuPermissions.includes(o)}togglePermission(e,o){this.saving[e.userId]||(this.saving[e.userId]=!0,this.hasPermission(e,o)?this.menuPermissionService.removeMenuPermission(e.userId,o).pipe((0,w.Q)(this.destroy$)).subscribe({next:()=>{e.menuPermissions=e.menuPermissions.filter(r=>r!==o),this.snackBar.open(`Permission removed for ${e.fullName}`,"Close",{duration:2e3}),this.saving[e.userId]=!1},error:r=>{console.error("Error removing permission:",r),this.snackBar.open("Error removing permission","Close",{duration:3e3}),this.saving[e.userId]=!1}}):this.menuPermissionService.addMenuPermission(e.userId,o).pipe((0,w.Q)(this.destroy$)).subscribe({next:()=>{e.menuPermissions.push(o),this.snackBar.open(`Permission granted for ${e.fullName}`,"Close",{duration:2e3}),this.saving[e.userId]=!1},error:r=>{console.error("Error adding permission:",r),this.snackBar.open("Error adding permission","Close",{duration:3e3}),this.saving[e.userId]=!1}}))}grantAllPermissions(e){this.saving[e.userId]||(this.saving[e.userId]=!0,this.menuPermissionService.grantAllMenuPermissions(e.userId).pipe((0,w.Q)(this.destroy$)).subscribe({next:()=>{e.menuPermissions=[...e.allAvailablePermissions],this.snackBar.open(`All permissions granted for ${e.fullName}`,"Close",{duration:2e3}),this.saving[e.userId]=!1},error:o=>{console.error("Error granting all permissions:",o),this.snackBar.open("Error granting permissions","Close",{duration:3e3}),this.saving[e.userId]=!1}}))}revokeAllPermissions(e){this.saving[e.userId]||(this.saving[e.userId]=!0,this.menuPermissionService.revokeAllMenuPermissions(e.userId).pipe((0,w.Q)(this.destroy$)).subscribe({next:()=>{e.menuPermissions=[],this.snackBar.open(`All permissions revoked for ${e.fullName}`,"Close",{duration:2e3}),this.saving[e.userId]=!1},error:o=>{console.error("Error revoking all permissions:",o),this.snackBar.open("Error revoking permissions","Close",{duration:3e3}),this.saving[e.userId]=!1}}))}getPermissionLabel(e){return this.permissionLabels[e]||e}getPermissionCount(e){return`${e.menuPermissions.length}/${e.allAvailablePermissions.length}`}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(Ao.O),t.rXU(E.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-menu-permissions"]],decls:8,vars:2,consts:[[1,"menu-permissions-container"],[1,"page-header"],[1,"subtitle"],["class","loading-container",4,"ngIf"],["class","content",4,"ngIf"],[1,"loading-container"],["diameter","50"],[1,"content"],["class","no-data",4,"ngIf"],["class","shop-owners-grid",4,"ngIf"],[1,"no-data"],[1,"shop-owners-grid"],["class","shop-owner-card",4,"ngFor","ngForOf"],[1,"shop-owner-card"],["mat-card-avatar","",1,"avatar"],[1,"permissions-header"],[1,"permissions-count"],[1,"quick-actions"],["mat-icon-button","","matTooltip","Grant All Permissions",3,"disabled","click"],["mat-icon-button","","matTooltip","Revoke All Permissions",3,"disabled","click"],[1,"permissions-list"],["class","permission-item",3,"active",4,"ngFor","ngForOf"],["class","saving-overlay",4,"ngIf"],[1,"permission-item"],["color","primary",3,"checked","disabled","change"],[1,"saving-overlay"],["diameter","24"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3,"Shop Owner Menu Permissions"),t.k0s(),t.j41(4,"p",2),t.EFF(5,"Control which menu items shop owners can access"),t.k0s()(),t.DNE(6,Lo,4,0,"div",3),t.DNE(7,zo,3,2,"div",4),t.k0s()),2&o&&(t.R7$(6),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading))},dependencies:[u.Sq,u.bT,_.iY,F.An,d.RN,d.QG,d.m2,d.MM,d.Lc,d.dh,D.oV,k.LG,Y.sG,J.q],styles:[".menu-permissions-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:500;color:#333}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:8px 0 0;color:#666;font-size:14px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;color:#666}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px}.no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;color:#999}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px}.shop-owners-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:24px}.shop-owner-card[_ngcontent-%COMP%]{position:relative}.shop-owner-card[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:500;border-radius:50%;width:40px;height:40px}.shop-owner-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:16px}.shop-owner-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.shop-owner-card[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:13px}.permissions-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0}.permissions-header[_ngcontent-%COMP%]   .permissions-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#666;font-size:14px}.permissions-header[_ngcontent-%COMP%]   .permissions-count[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#4caf50}.permissions-header[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]{display:flex;gap:4px}.permissions-header[_ngcontent-%COMP%]   .quick-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}mat-divider[_ngcontent-%COMP%]{margin:8px 0 16px}.permissions-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.permission-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px 12px;border-radius:8px;background-color:#f5f5f5;transition:background-color .2s ease}.permission-item.active[_ngcontent-%COMP%]{background-color:#e8f5e9}.permission-item[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{width:100%}.permission-item[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mdc-form-field{width:100%}.permission-item[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]     .mdc-label{flex:1;font-size:14px}.saving-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(255,255,255,.85);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;border-radius:4px;z-index:10}.saving-overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#666}@media (max-width: 768px){.menu-permissions-container[_ngcontent-%COMP%]{padding:16px}.shop-owners-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}}"]})}}return n})();var et=l(7505);let Ho=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${R.c.apiUrl}/marketplace`}getPendingPosts(e=0,o=20){return this.http.get(`${this.apiUrl}/pending`,{params:{page:e.toString(),size:o.toString()}})}getAllPosts(e=0,o=20){return this.http.get(`${this.apiUrl}/admin/all`,{params:{page:e.toString(),size:o.toString()}})}approvePost(e){return this.http.put(`${this.apiUrl}/${e}/approve`,{})}rejectPost(e){return this.http.put(`${this.apiUrl}/${e}/reject`,{})}deletePost(e){return this.http.delete(`${this.apiUrl}/${e}`)}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(v.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function qo(n,a){1&n&&(t.j41(0,"div",8),t.nrm(1,"mat-spinner",9),t.j41(2,"p"),t.EFF(3,"Loading posts..."),t.k0s()())}function Wo(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"No posts are waiting for approval."),t.k0s())}function Ko(n,a){1&n&&(t.j41(0,"p"),t.EFF(1,"No marketplace posts yet."),t.k0s())}function Qo(n,a){if(1&n&&(t.j41(0,"div",10)(1,"mat-icon",11),t.EFF(2,"storefront"),t.k0s(),t.j41(3,"h3"),t.EFF(4,"No posts found"),t.k0s(),t.DNE(5,Wo,2,0,"p",12),t.DNE(6,Ko,2,0,"p",12),t.k0s()),2&n){const e=t.XpG();t.R7$(5),t.Y8G("ngIf","pending"===e.activeTab),t.R7$(1),t.Y8G("ngIf","all"===e.activeTab)}}function Zo(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"Image"),t.k0s())}function ti(n,a){if(1&n&&t.nrm(0,"img",34),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.Y8G("src",o.getImageUrl(e.imageUrl),t.B4B)}}function ei(n,a){1&n&&(t.j41(0,"mat-icon",35),t.EFF(1,"image"),t.k0s())}function ni(n,a){if(1&n&&(t.j41(0,"td",30)(1,"div",31),t.DNE(2,ti,1,1,"img",32),t.DNE(3,ei,2,0,"mat-icon",33),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.imageUrl),t.R7$(1),t.Y8G("ngIf",!e.imageUrl)}}function oi(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"Title"),t.k0s())}function ii(n,a){if(1&n&&(t.j41(0,"div",38),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.description)}}function ai(n,a){if(1&n&&(t.j41(0,"td",30)(1,"div",36),t.EFF(2),t.k0s(),t.DNE(3,ii,2,1,"div",37),t.k0s()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.title),t.R7$(1),t.Y8G("ngIf",e.description)}}function ri(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"Price"),t.k0s())}function si(n,a){if(1&n&&(t.j41(0,"td",30)(1,"span",39),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatPrice(e.price))}}function ci(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"Seller"),t.k0s())}function mi(n,a){if(1&n&&(t.j41(0,"span",44),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.location)}}function li(n,a){if(1&n&&(t.j41(0,"td",30)(1,"div",40)(2,"span",41),t.EFF(3),t.k0s(),t.j41(4,"span",42),t.EFF(5),t.k0s(),t.DNE(6,mi,2,1,"span",43),t.k0s()()),2&n){const e=a.$implicit;t.R7$(3),t.JRh(e.sellerName),t.R7$(2),t.JRh(e.sellerPhone),t.R7$(1),t.Y8G("ngIf",e.location)}}function di(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"Category"),t.k0s())}function pi(n,a){if(1&n&&(t.j41(0,"span",46),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(1),t.JRh(e.category)}}function gi(n,a){if(1&n&&(t.j41(0,"td",30),t.DNE(1,pi,2,1,"span",45),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.category)}}function ui(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"Voice"),t.k0s())}function _i(n,a){if(1&n&&(t.j41(0,"audio",49),t.nrm(1,"source",50),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("src",o.getVoiceUrl(e.voiceUrl),t.B4B)}}function fi(n,a){1&n&&(t.j41(0,"span",51),t.EFF(1,"-"),t.k0s())}function Ci(n,a){if(1&n&&(t.j41(0,"td",30),t.DNE(1,_i,2,1,"audio",47),t.DNE(2,fi,2,0,"span",48),t.k0s()),2&n){const e=a.$implicit;t.R7$(1),t.Y8G("ngIf",e.voiceUrl),t.R7$(1),t.Y8G("ngIf",!e.voiceUrl)}}function hi(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"Status"),t.k0s())}function Mi(n,a){if(1&n&&(t.j41(0,"td",30)(1,"span",52),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(1),t.Y8G("ngClass","status-"+(null==e.status?null:e.status.toLowerCase())),t.R7$(1),t.SpI(" ",o.getStatusLabel(e.status)," ")}}function Pi(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"Date"),t.k0s())}function Fi(n,a){if(1&n&&(t.j41(0,"td",30)(1,"span",53),t.EFF(2),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(2);t.R7$(2),t.JRh(o.formatDate(e.createdAt))}}function ki(n,a){1&n&&(t.j41(0,"th",29),t.EFF(1,"Actions"),t.k0s())}function bi(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",58),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.approvePost(i))}),t.j41(1,"mat-icon"),t.EFF(2,"check_circle"),t.k0s()()}}function vi(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",59),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.rejectPost(i))}),t.j41(1,"mat-icon"),t.EFF(2,"cancel"),t.k0s()()}}function xi(n,a){if(1&n){const e=t.RV6();t.j41(0,"td",30)(1,"div",54),t.DNE(2,bi,3,0,"button",55),t.DNE(3,vi,3,0,"button",56),t.j41(4,"button",57),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.deletePost(r))}),t.j41(5,"mat-icon"),t.EFF(6,"delete"),t.k0s()()()()}if(2&n){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf","PENDING_APPROVAL"===e.status),t.R7$(1),t.Y8G("ngIf","PENDING_APPROVAL"===e.status)}}function Oi(n,a){1&n&&t.nrm(0,"tr",60)}function Ei(n,a){1&n&&t.nrm(0,"tr",61)}function Ri(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",62)(1,"button",63),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage-1))}),t.j41(2,"mat-icon"),t.EFF(3,"chevron_left"),t.k0s(),t.EFF(4," Previous "),t.k0s(),t.j41(5,"span",64),t.EFF(6),t.k0s(),t.j41(7,"button",63),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(i.currentPage+1))}),t.EFF(8," Next "),t.j41(9,"mat-icon"),t.EFF(10,"chevron_right"),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("disabled",0===e.currentPage),t.R7$(5),t.E5c("Page ",e.currentPage+1," of ",e.totalPages," (",e.totalItems," posts)"),t.R7$(1),t.Y8G("disabled",e.currentPage>=e.totalPages-1)}}const nt=function(){return["image","title","price","seller","category","voice","status","date","actions"]};function ji(n,a){if(1&n&&(t.j41(0,"div",13)(1,"table",14),t.qex(2,15),t.DNE(3,Zo,2,0,"th",16),t.DNE(4,ni,4,2,"td",17),t.bVm(),t.qex(5,18),t.DNE(6,oi,2,0,"th",16),t.DNE(7,ai,4,2,"td",17),t.bVm(),t.qex(8,19),t.DNE(9,ri,2,0,"th",16),t.DNE(10,si,3,1,"td",17),t.bVm(),t.qex(11,20),t.DNE(12,ci,2,0,"th",16),t.DNE(13,li,7,3,"td",17),t.bVm(),t.qex(14,21),t.DNE(15,di,2,0,"th",16),t.DNE(16,gi,2,1,"td",17),t.bVm(),t.qex(17,22),t.DNE(18,ui,2,0,"th",16),t.DNE(19,Ci,3,2,"td",17),t.bVm(),t.qex(20,23),t.DNE(21,hi,2,0,"th",16),t.DNE(22,Mi,3,2,"td",17),t.bVm(),t.qex(23,24),t.DNE(24,Pi,2,0,"th",16),t.DNE(25,Fi,3,1,"td",17),t.bVm(),t.qex(26,25),t.DNE(27,ki,2,0,"th",16),t.DNE(28,xi,7,2,"td",17),t.bVm(),t.DNE(29,Oi,1,0,"tr",26),t.DNE(30,Ei,1,0,"tr",27),t.k0s(),t.DNE(31,Ri,11,5,"div",28),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("dataSource",e.posts),t.R7$(28),t.Y8G("matHeaderRowDef",t.lJ4(4,nt)),t.R7$(1),t.Y8G("matRowDefColumns",t.lJ4(5,nt)),t.R7$(1),t.Y8G("ngIf",e.totalPages>1)}}let yi=(()=>{class n{constructor(e,o){this.marketplaceService=e,this.snackBar=o,this.posts=[],this.loading=!0,this.activeTab="pending",this.currentPage=0,this.totalPages=0,this.totalItems=0,this.pageSize=20}ngOnInit(){this.loadPosts()}loadPosts(){this.loading=!0,("pending"===this.activeTab?this.marketplaceService.getPendingPosts(this.currentPage,this.pageSize):this.marketplaceService.getAllPosts(this.currentPage,this.pageSize)).subscribe({next:o=>{const i=o.data;this.posts=i?.content||[],this.totalPages=i?.totalPages||0,this.totalItems=i?.totalItems||0,this.loading=!1},error:o=>{console.error("Error loading marketplace posts:",o),this.loading=!1,this.snackBar.open("Failed to load posts","Close",{duration:3e3})}})}switchTab(e){this.activeTab=e,this.currentPage=0,this.loadPosts()}approvePost(e){this.marketplaceService.approvePost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" approved`,"OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to approve post","Close",{duration:3e3})}})}rejectPost(e){confirm(`Reject "${e.title}"?`)&&this.marketplaceService.rejectPost(e.id).subscribe({next:()=>{this.snackBar.open(`"${e.title}" rejected`,"OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to reject post","Close",{duration:3e3})}})}deletePost(e){confirm(`Delete "${e.title}" permanently?`)&&this.marketplaceService.deletePost(e.id).subscribe({next:()=>{this.snackBar.open("Post deleted","OK",{duration:3e3}),this.loadPosts()},error:()=>{this.snackBar.open("Failed to delete post","Close",{duration:3e3})}})}getImageUrl(e){return(0,et.V)(e)}getVoiceUrl(e){return e?(0,et.V)(e):""}getStatusColor(e){switch(e){case"PENDING_APPROVAL":return"warn";case"APPROVED":return"primary";case"REJECTED":return"accent";default:return""}}getStatusLabel(e){switch(e){case"PENDING_APPROVAL":return"Pending";case"APPROVED":return"Approved";case"REJECTED":return"Rejected";case"SOLD":return"Sold";default:return e}}formatPrice(e){return null==e?"Negotiable":"\u20b9"+e.toLocaleString("en-IN")}formatDate(e){return e?new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}onPageChange(e){this.currentPage=e,this.loadPosts()}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(Ho),t.rXU(E.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-marketplace-management"]],decls:14,vars:5,consts:[[1,"marketplace-management"],[1,"header"],[1,"subtitle"],[1,"tabs"],["mat-flat-button","",3,"color","click"],["class","loading-container",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","posts-container",4,"ngIf"],[1,"loading-container"],["diameter","40"],[1,"empty-state"],[1,"empty-icon"],[4,"ngIf"],[1,"posts-container"],["mat-table","",1,"posts-table",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","price"],["matColumnDef","seller"],["matColumnDef","category"],["matColumnDef","voice"],["matColumnDef","status"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","pagination",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"post-image"],["alt","Product","loading","lazy",3,"src",4,"ngIf"],["class","no-image",4,"ngIf"],["alt","Product","loading","lazy",3,"src"],[1,"no-image"],[1,"post-title"],["class","post-description",4,"ngIf"],[1,"post-description"],[1,"price"],[1,"seller-info"],[1,"seller-name"],[1,"seller-phone"],["class","seller-location",4,"ngIf"],[1,"seller-location"],["class","category-chip",4,"ngIf"],[1,"category-chip"],["controls","","preload","none","class","voice-player",4,"ngIf"],["class","no-voice",4,"ngIf"],["controls","","preload","none",1,"voice-player"],[3,"src"],[1,"no-voice"],[1,"status-badge",3,"ngClass"],[1,"date"],[1,"action-buttons"],["mat-icon-button","","color","primary","matTooltip","Approve",3,"click",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Reject",3,"click",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-icon-button","","color","primary","matTooltip","Approve",3,"click"],["mat-icon-button","","color","warn","matTooltip","Reject",3,"click"],["mat-header-row",""],["mat-row",""],[1,"pagination"],["mat-button","",3,"disabled","click"],[1,"page-info"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Marketplace Management"),t.k0s(),t.j41(4,"p",2),t.EFF(5,"Review and manage customer buy & sell posts"),t.k0s()(),t.j41(6,"div",3)(7,"button",4),t.bIt("click",function(){return i.switchTab("pending")}),t.EFF(8," Pending Approval "),t.k0s(),t.j41(9,"button",4),t.bIt("click",function(){return i.switchTab("all")}),t.EFF(10," All Posts "),t.k0s()(),t.DNE(11,qo,4,0,"div",5),t.DNE(12,Qo,7,2,"div",6),t.DNE(13,ji,32,6,"div",7),t.k0s()),2&o&&(t.R7$(7),t.Y8G("color","pending"===i.activeTab?"primary":void 0),t.R7$(2),t.Y8G("color","all"===i.activeTab?"primary":void 0),t.R7$(2),t.Y8G("ngIf",i.loading),t.R7$(1),t.Y8G("ngIf",!i.loading&&0===i.posts.length),t.R7$(1),t.Y8G("ngIf",!i.loading&&i.posts.length>0))},dependencies:[u.YU,u.bT,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,_.$z,_.iY,F.An,D.oV,k.LG],styles:[".marketplace-management[_ngcontent-%COMP%]{padding:24px}.marketplace-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:24px}.marketplace-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600}.marketplace-management[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:4px 0 0;color:#666;font-size:14px}.marketplace-management[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:24px}.marketplace-management[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:140px}.marketplace-management[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:48px}.marketplace-management[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666}.marketplace-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:64px 24px}.marketplace-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc}.marketplace-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.marketplace-management[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.marketplace-management[_ngcontent-%COMP%]   .posts-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #00000014}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]{width:100%}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:8px;overflow:hidden;background:#f5f5f5;display:flex;align-items:center;justify-content:center}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-image[_ngcontent-%COMP%]   .no-image[_ngcontent-%COMP%]{color:#ccc;font-size:28px}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-title[_ngcontent-%COMP%]{font-weight:600;font-size:14px;color:#333}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .post-description[_ngcontent-%COMP%]{font-size:12px;color:#888;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:600;color:#4caf50;font-size:14px}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-name[_ngcontent-%COMP%]{font-weight:500;font-size:13px}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-phone[_ngcontent-%COMP%]{font-size:12px;color:#666}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .seller-info[_ngcontent-%COMP%]   .seller-location[_ngcontent-%COMP%]{font-size:11px;color:#999}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .category-chip[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;padding:2px 10px;border-radius:12px;font-size:12px;font-weight:500}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .voice-player[_ngcontent-%COMP%]{width:180px;height:32px}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .no-voice[_ngcontent-%COMP%]{color:#ccc}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:3px 10px;border-radius:12px;font-size:12px;font-weight:500;white-space:nowrap}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-pending_approval[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-approved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .status-badge.status-sold[_ngcontent-%COMP%]{background:#f3e5f5;color:#6a1b9a}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#888;white-space:nowrap}.marketplace-management[_ngcontent-%COMP%]   .posts-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:2px}.marketplace-management[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:16px;padding:16px;border-top:1px solid #eee}.marketplace-management[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:13px;color:#666}"]})}}return n})(),Ii=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[u.MD,s.X1,s.YN,m.tP,y.Ou,I.NQ,_.Hl,F.m_,O.fS,p.RG,N.Ve,d.Hu,P.hM,S.X6,T.WX,V.g7,G.YN,D.uc,k.D6,E._T,Y.mV,B.Vg,U.Cn,X.Wk,z.PO,J.w,$.iI.forChild([{path:"",redirectTo:"customers",pathMatch:"full"},{path:"customers",component:Lt},{path:"customers/create",component:Q},{path:"customers/:id",component:fe},{path:"customers/:id/edit",component:Q},{path:"delivery-fees",component:Be},{path:"promo-codes",component:eo},{path:"push-notifications",component:wo},{path:"marketing",component:bo},{path:"menu-permissions",component:Jo},{path:"marketplace",component:yi},{path:"shops",loadChildren:()=>Promise.resolve().then(l.bind(l,267)).then(e=>e.ShopModule)}])]})}}return n})()}}]);