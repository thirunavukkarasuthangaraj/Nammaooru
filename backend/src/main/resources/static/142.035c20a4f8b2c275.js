"use strict";(self.webpackChunkshop_management_frontend=self.webpackChunkshop_management_frontend||[]).push([[142],{1142:(Ht,v,s)=>{s.r(v),s.d(v,{OrdersModule:()=>Jt});var d=s(177),g=s(9417),c=s(9159),C=s(6695),_=s(2042),y=s(9631),D=s(2798),u=s(8834),f=s(9213),O=s(5596),h=s(6471),I=s(5351),E=s(5416),P=s(9183),M=s(9115),k=s(1975),R=s(1997),p=s(1188),j=s(8032),l=s.n(j),w=s(605),t=s(7705),F=s(8544),b=s(2102),S=s(6600);function N(n,o){if(1&n&&(t.j41(0,"mat-option",13),t.EFF(1),t.k0s()),2&n){const e=o.$implicit;t.Y8G("value",e.value),t.R7$(1),t.SpI(" ",e.label," ")}}function T(n,o){1&n&&(t.j41(0,"mat-header-cell",31),t.EFF(1,"Order #"),t.k0s())}function $(n,o){if(1&n&&(t.j41(0,"mat-cell")(1,"span",32),t.EFF(2),t.k0s()()),2&n){const e=o.$implicit;t.R7$(2),t.JRh(e.orderNumber)}}function L(n,o){1&n&&(t.j41(0,"mat-header-cell",31),t.EFF(1,"Customer"),t.k0s())}function G(n,o){if(1&n&&(t.j41(0,"mat-cell")(1,"div",33)(2,"span",34),t.EFF(3),t.k0s(),t.j41(4,"span",35),t.EFF(5),t.k0s()()()),2&n){const e=o.$implicit;t.R7$(3),t.JRh(e.customerName||"Walk-in Customer"),t.R7$(2),t.SpI("",e.itemCount," items")}}function A(n,o){1&n&&(t.j41(0,"mat-header-cell",31),t.EFF(1,"Shop"),t.k0s())}function B(n,o){if(1&n&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&n){const e=o.$implicit;t.R7$(1),t.JRh(e.shopName)}}function V(n,o){1&n&&(t.j41(0,"mat-header-cell",31),t.EFF(1,"Status"),t.k0s())}function Y(n,o){if(1&n&&(t.j41(0,"mat-cell")(1,"mat-chip",36),t.EFF(2),t.k0s()()),2&n){const e=o.$implicit,r=t.XpG(2);t.R7$(1),t.Y8G("color",r.getStatusColor(e.status)),t.R7$(1),t.SpI(" ",r.formatStatus(e.status)," ")}}function U(n,o){1&n&&(t.j41(0,"mat-header-cell",31),t.EFF(1,"Payment"),t.k0s())}function z(n,o){if(1&n&&(t.j41(0,"mat-cell")(1,"mat-chip",36),t.EFF(2),t.k0s()()),2&n){const e=o.$implicit,r=t.XpG(2);t.R7$(1),t.Y8G("color",r.getPaymentStatusColor(e.paymentStatus)),t.R7$(1),t.SpI(" ",r.formatStatus(e.paymentStatus)," ")}}function X(n,o){1&n&&(t.j41(0,"mat-header-cell",31),t.EFF(1,"Total"),t.k0s())}function J(n,o){if(1&n&&(t.j41(0,"mat-cell")(1,"span",37),t.EFF(2),t.nI1(3,"number"),t.k0s()()),2&n){const e=o.$implicit;t.R7$(2),t.Lme("","\u20b9","",t.i5U(3,2,e.totalAmount,"1.2-2"),"")}}function H(n,o){1&n&&(t.j41(0,"mat-header-cell",31),t.EFF(1,"Order Date"),t.k0s())}function Q(n,o){if(1&n&&(t.j41(0,"mat-cell")(1,"span",38),t.EFF(2),t.nI1(3,"date"),t.k0s()()),2&n){const e=o.$implicit;t.R7$(2),t.JRh(t.i5U(3,1,e.createdAt,"dd/MM/yyyy HH:mm"))}}function K(n,o){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1,"Actions"),t.k0s())}function Z(n,o){if(1&n){const e=t.RV6();t.j41(0,"button",41),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.updateOrderStatus(a))}),t.j41(1,"mat-icon"),t.EFF(2,"update"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Update Status"),t.k0s()()}}function W(n,o){if(1&n){const e=t.RV6();t.j41(0,"button",41),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.cancelOrder(a))}),t.j41(1,"mat-icon"),t.EFF(2,"cancel"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Cancel Order"),t.k0s()()}}function q(n,o){if(1&n){const e=t.RV6();t.j41(0,"mat-cell")(1,"button",39),t.bIt("click",function(a){return a.stopPropagation()}),t.j41(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",null,40)(6,"button",41),t.bIt("click",function(){const i=t.eBV(e).$implicit,m=t.XpG(2);return t.Njj(m.viewOrder(i))}),t.j41(7,"mat-icon"),t.EFF(8,"visibility"),t.k0s(),t.j41(9,"span"),t.EFF(10,"View Details"),t.k0s()(),t.DNE(11,Z,5,0,"button",42),t.DNE(12,W,5,0,"button",42),t.k0s()()}if(2&n){const e=o.$implicit,r=t.sdS(5);t.R7$(1),t.Y8G("matMenuTriggerFor",r),t.R7$(10),t.Y8G("ngIf","DELIVERED"!==e.status&&"CANCELLED"!==e.status&&"COMPLETED"!==e.status),t.R7$(1),t.Y8G("ngIf",e.canBeCancelled)}}function tt(n,o){1&n&&t.nrm(0,"mat-header-row")}function et(n,o){if(1&n){const e=t.RV6();t.j41(0,"mat-row",43),t.bIt("click",function(){const i=t.eBV(e).$implicit,m=t.XpG(2);return t.Njj(m.viewOrder(i))}),t.k0s()}}const nt=function(){return[5,10,25,100]};function rt(n,o){if(1&n){const e=t.RV6();t.j41(0,"div",14)(1,"div",15)(2,"mat-table",16),t.qex(3,17),t.DNE(4,T,2,0,"mat-header-cell",18),t.DNE(5,$,3,1,"mat-cell",19),t.bVm(),t.qex(6,20),t.DNE(7,L,2,0,"mat-header-cell",18),t.DNE(8,G,6,2,"mat-cell",19),t.bVm(),t.qex(9,21),t.DNE(10,A,2,0,"mat-header-cell",18),t.DNE(11,B,2,1,"mat-cell",19),t.bVm(),t.qex(12,22),t.DNE(13,V,2,0,"mat-header-cell",18),t.DNE(14,Y,3,2,"mat-cell",19),t.bVm(),t.qex(15,23),t.DNE(16,U,2,0,"mat-header-cell",18),t.DNE(17,z,3,2,"mat-cell",19),t.bVm(),t.qex(18,24),t.DNE(19,X,2,0,"mat-header-cell",18),t.DNE(20,J,4,5,"mat-cell",19),t.bVm(),t.qex(21,25),t.DNE(22,H,2,0,"mat-header-cell",18),t.DNE(23,Q,4,4,"mat-cell",19),t.bVm(),t.qex(24,26),t.DNE(25,K,2,0,"mat-header-cell",27),t.DNE(26,q,13,3,"mat-cell",19),t.bVm(),t.DNE(27,tt,1,0,"mat-header-row",28),t.DNE(28,et,1,0,"mat-row",29),t.k0s()(),t.j41(29,"mat-paginator",30),t.bIt("page",function(a){t.eBV(e);const i=t.XpG();return t.Njj(i.onPageChange(a))}),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(2),t.Y8G("dataSource",e.dataSource),t.R7$(25),t.Y8G("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.R7$(1),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(1),t.Y8G("length",e.totalOrders)("pageSize",e.pageSize)("pageIndex",e.currentPage)("pageSizeOptions",t.lJ4(8,nt))}}function ot(n,o){1&n&&(t.j41(0,"div",44),t.nrm(1,"mat-spinner",45),t.j41(2,"p"),t.EFF(3,"Loading orders..."),t.k0s()())}function at(n,o){1&n&&(t.j41(0,"div",46)(1,"mat-icon"),t.EFF(2,"inbox"),t.k0s(),t.j41(3,"p"),t.EFF(4,"No orders found"),t.k0s()())}let it=(()=>{class n{constructor(e,r,a,i){this.orderService=e,this.dialog=r,this.snackBar=a,this.router=i,this.displayedColumns=["orderNumber","customerName","shopName","status","paymentStatus","totalAmount","createdAt","actions"],this.dataSource=new c.I6,this.allOrders=[],this.loading=!1,this.searchText="",this.statusFilter="",this.totalOrders=0,this.pageSize=10,this.currentPage=0,this.autoRefreshEnabled=!0,this.refreshInterval=6e4,this.statusOptions=[{value:"",label:"All Statuses"},{value:"PENDING",label:"Pending"},{value:"CONFIRMED",label:"Confirmed"},{value:"PREPARING",label:"Preparing"},{value:"READY_FOR_PICKUP",label:"Ready for Pickup"},{value:"OUT_FOR_DELIVERY",label:"Out for Delivery"},{value:"DELIVERED",label:"Delivered"},{value:"COMPLETED",label:"Completed"},{value:"SELF_PICKUP_COLLECTED",label:"Self Pickup Collected"},{value:"CANCELLED",label:"Cancelled"}]}ngOnInit(){this.loadOrders(),this.startAutoRefresh()}ngOnDestroy(){this.stopAutoRefresh()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}loadOrders(){this.loading=!0,this.orderService.getAllOrders(this.currentPage,this.pageSize).subscribe({next:e=>{this.allOrders=e.data.content,this.dataSource.data=this.allOrders,this.totalOrders=e.data.totalElements,this.loading=!1},error:e=>{console.error("Error loading orders:",e),this.dataSource.data=[],this.totalOrders=0,this.loading=!1}})}formatStatus(e){return e?e.replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase()):""}applyFilter(){let e=[...this.allOrders];if(this.searchText){const r=this.searchText.toLowerCase();e=e.filter(a=>a.orderNumber.toLowerCase().includes(r)||a.customerName.toLowerCase().includes(r)||a.shopName.toLowerCase().includes(r))}this.statusFilter&&(e=e.filter(r=>r.status===this.statusFilter)),this.dataSource.data=e}clearFilters(){this.searchText="",this.statusFilter="",this.loadOrders()}viewOrder(e){this.router.navigate(["/orders",e.id])}updateOrderStatus(e){l().fire({title:"Update Order Status",input:"select",inputOptions:{PENDING:"Pending",CONFIRMED:"Confirmed",PREPARING:"Preparing",READY_FOR_PICKUP:"Ready for Pickup",OUT_FOR_DELIVERY:"Out for Delivery",DELIVERED:"Delivered",COMPLETED:"Completed",CANCELLED:"Cancelled"},inputValue:e.status,showCancelButton:!0,confirmButtonText:"Update",cancelButtonText:"Cancel"}).then(r=>{r.isConfirmed&&r.value!==e.status&&this.orderService.updateOrderStatus(e.id,r.value).subscribe({next:()=>{l().fire("Success!","Order status updated successfully","success"),this.loadOrders()},error:a=>{l().fire("Error!","Failed to update order status","error")}})})}cancelOrder(e){l().fire({title:"Cancel Order",text:"Please provide a reason for cancellation:",input:"textarea",inputPlaceholder:"Cancellation reason...",showCancelButton:!0,confirmButtonText:"Cancel Order",cancelButtonText:"Close",confirmButtonColor:"#d33"}).then(r=>{r.isConfirmed&&r.value&&this.orderService.cancelOrder(e.id,r.value).subscribe({next:()=>{l().fire("Success!","Order cancelled successfully","success"),this.loadOrders()},error:a=>{l().fire("Error!","Failed to cancel order","error")}})})}onPageChange(e){this.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.loadOrders()}getStatusColor(e){switch(e){case"PENDING":case"CANCELLED":return"warn";case"CONFIRMED":case"PREPARING":case"DELIVERED":case"COMPLETED":case"SELF_PICKUP_COLLECTED":return"primary";case"READY_FOR_PICKUP":case"OUT_FOR_DELIVERY":return"accent";default:return""}}getPaymentStatusColor(e){switch(e){case"PAID":case"COLLECTED":return"primary";case"PENDING":case"FAILED":return"warn";case"REFUNDED":return"accent";default:return""}}startAutoRefresh(){this.autoRefreshEnabled&&!this.refreshSubscription&&(this.refreshSubscription=(0,w.Y)(this.refreshInterval).subscribe(()=>{this.loadOrdersQuietly()}))}stopAutoRefresh(){this.refreshSubscription&&(this.refreshSubscription.unsubscribe(),this.refreshSubscription=void 0)}loadOrdersQuietly(){this.orderService.getAllOrders(this.currentPage,this.pageSize).subscribe({next:e=>{const r=this.dataSource.data.length,a=e.data.content.length;if(this.allOrders=e.data.content,this.dataSource.data=e.data.content,this.totalOrders=e.data.totalElements,a>r){const i=a-r;l().fire({title:"New Orders",text:`${i} new order${i>1?"s":""} received.`,icon:"info",timer:3e3,showConfirmButton:!1,position:"top-end",toast:!0})}},error:e=>{console.error("Error loading orders quietly:",e)}})}toggleAutoRefresh(){this.autoRefreshEnabled=!this.autoRefreshEnabled,this.autoRefreshEnabled?(this.startAutoRefresh(),l().fire({title:"Auto-refresh Enabled",text:`Orders will refresh every ${this.refreshInterval/1e3} seconds.`,icon:"info",timer:2e3,showConfirmButton:!1})):(this.stopAutoRefresh(),l().fire({title:"Auto-refresh Disabled",text:"Orders will no longer refresh automatically.",icon:"info",timer:2e3,showConfirmButton:!1}))}static{this.\u0275fac=function(r){return new(r||n)(t.rXU(F.Q),t.rXU(I.bZ),t.rXU(E.UG),t.rXU(p.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-order-list"]],viewQuery:function(r,a){if(1&r&&(t.GBs(C.iy,5),t.GBs(_.B4,5)),2&r){let i;t.mGM(i=t.lsd())&&(a.paginator=i.first),t.mGM(i=t.lsd())&&(a.sort=i.first)}},decls:23,vars:6,consts:[[1,"orders-container"],[1,"header-section"],[1,"filters-section"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Order number, customer, shop...",3,"ngModel","ngModelChange","keyup"],["matSuffix",""],["appearance","outline",1,"status-filter"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"clear-btn",3,"click"],["class","table-container",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","no-data",4,"ngIf"],[3,"value"],[1,"table-container"],[1,"table-scroll"],["matSort","",1,"orders-table",3,"dataSource"],["matColumnDef","orderNumber"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","customerName"],["matColumnDef","shopName"],["matColumnDef","status"],["matColumnDef","paymentStatus"],["matColumnDef","totalAmount"],["matColumnDef","createdAt"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","order-row",3,"click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize","pageIndex","pageSizeOptions","page"],["mat-sort-header",""],[1,"order-number"],[1,"customer-info"],[1,"customer-name"],[1,"item-count"],[3,"color"],[1,"amount"],[1,"date"],["mat-icon-button","","color","primary",3,"matMenuTriggerFor","click"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"order-row",3,"click"],[1,"loading-container"],["diameter","40"],[1,"no-data"]],template:function(r,a){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Orders Management"),t.k0s(),t.j41(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t.EFF(7,"Search orders"),t.k0s(),t.j41(8,"input",4),t.bIt("ngModelChange",function(m){return a.searchText=m})("keyup",function(){return a.applyFilter()}),t.k0s(),t.j41(9,"mat-icon",5),t.EFF(10,"search"),t.k0s()(),t.j41(11,"mat-form-field",6)(12,"mat-label"),t.EFF(13,"Filter by Status"),t.k0s(),t.j41(14,"mat-select",7),t.bIt("ngModelChange",function(m){return a.statusFilter=m})("selectionChange",function(){return a.applyFilter()}),t.DNE(15,N,2,2,"mat-option",8),t.k0s()(),t.j41(16,"button",9),t.bIt("click",function(){return a.clearFilters()}),t.j41(17,"mat-icon"),t.EFF(18,"clear"),t.k0s(),t.EFF(19," Clear "),t.k0s()()(),t.DNE(20,rt,30,9,"div",10),t.DNE(21,ot,4,0,"div",11),t.DNE(22,at,5,0,"div",12),t.k0s()),2&r&&(t.R7$(8),t.Y8G("ngModel",a.searchText),t.R7$(6),t.Y8G("ngModel",a.statusFilter),t.R7$(1),t.Y8G("ngForOf",a.statusOptions),t.R7$(5),t.Y8G("ngIf",!a.loading),t.R7$(1),t.Y8G("ngIf",a.loading),t.R7$(1),t.Y8G("ngIf",!a.loading&&0===a.dataSource.data.length))},dependencies:[d.Sq,d.bT,g.me,g.BC,g.vS,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,C.iy,_.B4,_.aE,y.fg,b.rl,b.nJ,b.yw,D.VO,S.wT,u.$z,u.iY,f.An,h.Jl,P.LG,M.kk,M.fb,M.Cp,d.QX,d.vh],styles:[".orders-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 64px);padding:20px 24px 0;max-width:1400px;margin:0 auto;overflow:hidden}.orders-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]{flex-shrink:0;margin-bottom:16px}.orders-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;color:#333;font-weight:500;font-size:22px}.orders-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-end;flex-wrap:wrap}.orders-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{flex:1;min-width:250px}.orders-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .status-filter[_ngcontent-%COMP%]{width:200px}.orders-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{height:56px}.orders-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;background:white;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden;min-height:0}.orders-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-scroll[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:auto}.orders-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .orders-table[_ngcontent-%COMP%]{width:100%}.orders-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .orders-table[_ngcontent-%COMP%]   .mat-mdc-header-row[_ngcontent-%COMP%]{background:#fafafa;position:sticky;top:0;z-index:2}.orders-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .orders-table[_ngcontent-%COMP%]   .order-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .2s}.orders-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .orders-table[_ngcontent-%COMP%]   .order-row[_ngcontent-%COMP%]:hover{background-color:#f0f7ff}.orders-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .orders-table[_ngcontent-%COMP%]   .order-number[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600;color:#1976d2;font-size:13px;word-break:break-all}.orders-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .orders-table[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.orders-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .orders-table[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]{font-weight:500;font-size:14px}.orders-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .orders-table[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]{font-size:12px;color:#888}.orders-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .orders-table[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:600;color:#2e7d32;white-space:nowrap}.orders-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .orders-table[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#666;font-size:13px;white-space:nowrap}.orders-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   mat-paginator[_ngcontent-%COMP%]{flex-shrink:0;border-top:1px solid #e0e0e0}.orders-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.orders-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.orders-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.orders-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#ccc}.orders-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px}@media (max-width: 768px){.orders-container[_ngcontent-%COMP%]{padding:12px 16px 0}.orders-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.orders-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%], .orders-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .status-filter[_ngcontent-%COMP%]{width:100%;min-width:unset}}"]})}}return n})();function st(n,o){if(1&n){const e=t.RV6();t.j41(0,"button",31),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2);return t.Njj(a.updateOrderStatus())}),t.j41(1,"mat-icon"),t.EFF(2,"update"),t.k0s(),t.EFF(3," Update Status "),t.k0s()}}function ct(n,o){if(1&n){const e=t.RV6();t.j41(0,"button",32),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2);return t.Njj(a.cancelOrder())}),t.j41(1,"mat-icon"),t.EFF(2,"cancel"),t.k0s(),t.EFF(3," Cancel Order "),t.k0s()}}function lt(n,o){if(1&n&&(t.j41(0,"div",16)(1,"span",17),t.EFF(2,"Estimated Delivery:"),t.k0s(),t.j41(3,"span",18),t.EFF(4),t.nI1(5,"date"),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(t.i5U(5,1,e.order.estimatedDeliveryTime,"dd/MM/yyyy HH:mm"))}}function dt(n,o){if(1&n&&(t.j41(0,"div",16)(1,"span",17),t.EFF(2,"Actual Delivery:"),t.k0s(),t.j41(3,"span",18),t.EFF(4),t.nI1(5,"date"),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(t.i5U(5,1,e.order.actualDeliveryTime,"dd/MM/yyyy HH:mm"))}}function mt(n,o){if(1&n&&(t.j41(0,"div",16)(1,"span",17),t.EFF(2,"Cancellation Reason:"),t.k0s(),t.j41(3,"span",18),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.order.cancellationReason)}}function _t(n,o){if(1&n&&(t.j41(0,"p",44)(1,"strong"),t.EFF(2,"Special Instructions:"),t.k0s(),t.EFF(3),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(3),t.SpI(" ",e.specialInstructions," ")}}function ut(n,o){if(1&n&&(t.j41(0,"div",33)(1,"div",34),t.nrm(2,"img",35),t.k0s(),t.j41(3,"div",36)(4,"h4"),t.EFF(5),t.k0s(),t.j41(6,"p",37),t.EFF(7),t.k0s(),t.j41(8,"p",38),t.EFF(9),t.k0s(),t.DNE(10,_t,4,1,"p",39),t.k0s(),t.j41(11,"div",40)(12,"div",41),t.EFF(13),t.k0s(),t.j41(14,"div",42),t.EFF(15),t.nI1(16,"number"),t.k0s(),t.j41(17,"div",43),t.EFF(18),t.nI1(19,"number"),t.k0s()()()),2&n){const e=o.$implicit;t.R7$(2),t.Y8G("src",e.productImageUrl||"/assets/placeholder-product.png",t.B4B)("alt",e.productName),t.R7$(3),t.JRh(e.productName),t.R7$(2),t.JRh(e.productDescription),t.R7$(2),t.SpI("SKU: ",e.productSku,""),t.R7$(1),t.Y8G("ngIf",e.specialInstructions),t.R7$(3),t.SpI("Qty: ",e.quantity,""),t.R7$(2),t.SpI("\u20b9",t.i5U(16,9,e.unitPrice,"1.2-2")," each"),t.R7$(3),t.SpI("\u20b9",t.i5U(19,12,e.totalPrice,"1.2-2"),"")}}function pt(n,o){if(1&n&&(t.j41(0,"div",24)(1,"span",25),t.EFF(2,"Discount:"),t.k0s(),t.j41(3,"span",45),t.EFF(4),t.nI1(5,"number"),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.SpI("-\u20b9",t.i5U(5,1,e.order.discountAmount,"1.2-2"),"")}}function gt(n,o){if(1&n&&(t.j41(0,"mat-card",46)(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3,"Order Notes"),t.k0s()(),t.j41(4,"mat-card-content")(5,"p"),t.EFF(6),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(6),t.JRh(e.order.notes)}}function Ct(n,o){if(1&n){const e=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"button",5),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.goBack())}),t.j41(4,"mat-icon"),t.EFF(5,"arrow_back"),t.k0s()(),t.j41(6,"div",6)(7,"h2"),t.EFF(8,"Order Details"),t.k0s(),t.j41(9,"span",7),t.EFF(10),t.k0s()()(),t.j41(11,"div",8)(12,"div",9)(13,"mat-chip",10),t.EFF(14),t.nI1(15,"titlecase"),t.k0s(),t.j41(16,"mat-chip",10),t.EFF(17),t.nI1(18,"titlecase"),t.k0s()()(),t.j41(19,"div",11),t.DNE(20,st,4,0,"button",12),t.DNE(21,ct,4,0,"button",13),t.k0s()(),t.j41(22,"div",14)(23,"mat-card",15)(24,"mat-card-header")(25,"mat-card-title"),t.EFF(26,"Customer Information"),t.k0s()(),t.j41(27,"mat-card-content")(28,"div",16)(29,"span",17),t.EFF(30,"Name:"),t.k0s(),t.j41(31,"span",18),t.EFF(32),t.k0s()(),t.j41(33,"div",16)(34,"span",17),t.EFF(35,"Email:"),t.k0s(),t.j41(36,"span",18),t.EFF(37),t.k0s()(),t.j41(38,"div",16)(39,"span",17),t.EFF(40,"Phone:"),t.k0s(),t.j41(41,"span",18),t.EFF(42),t.k0s()()()(),t.j41(43,"mat-card",15)(44,"mat-card-header")(45,"mat-card-title"),t.EFF(46,"Shop Information"),t.k0s()(),t.j41(47,"mat-card-content")(48,"div",16)(49,"span",17),t.EFF(50,"Shop Name:"),t.k0s(),t.j41(51,"span",18),t.EFF(52),t.k0s()(),t.j41(53,"div",16)(54,"span",17),t.EFF(55,"Address:"),t.k0s(),t.j41(56,"span",18),t.EFF(57),t.k0s()()()(),t.j41(58,"mat-card",15)(59,"mat-card-header")(60,"mat-card-title"),t.EFF(61,"Delivery Information"),t.k0s()(),t.j41(62,"mat-card-content")(63,"div",16)(64,"span",17),t.EFF(65,"Contact:"),t.k0s(),t.j41(66,"span",18),t.EFF(67),t.k0s()(),t.j41(68,"div",16)(69,"span",17),t.EFF(70,"Phone:"),t.k0s(),t.j41(71,"span",18),t.EFF(72),t.k0s()(),t.j41(73,"div",16)(74,"span",17),t.EFF(75,"Address:"),t.k0s(),t.j41(76,"span",18),t.EFF(77),t.k0s()(),t.DNE(78,lt,6,4,"div",19),t.DNE(79,dt,6,4,"div",19),t.k0s()(),t.j41(80,"mat-card",15)(81,"mat-card-header")(82,"mat-card-title"),t.EFF(83,"Order Timeline"),t.k0s()(),t.j41(84,"mat-card-content")(85,"div",16)(86,"span",17),t.EFF(87,"Order Placed:"),t.k0s(),t.j41(88,"span",18),t.EFF(89),t.nI1(90,"date"),t.k0s()(),t.j41(91,"div",16)(92,"span",17),t.EFF(93,"Last Updated:"),t.k0s(),t.j41(94,"span",18),t.EFF(95),t.nI1(96,"date"),t.k0s()(),t.j41(97,"div",16)(98,"span",17),t.EFF(99,"Order Age:"),t.k0s(),t.j41(100,"span",18),t.EFF(101),t.k0s()(),t.DNE(102,mt,5,1,"div",19),t.k0s()()(),t.j41(103,"mat-card",20)(104,"mat-card-header")(105,"mat-card-title"),t.EFF(106),t.k0s()(),t.j41(107,"mat-card-content")(108,"div",21),t.DNE(109,ut,20,15,"div",22),t.k0s()()(),t.j41(110,"mat-card",23)(111,"mat-card-header")(112,"mat-card-title"),t.EFF(113,"Order Summary"),t.k0s()(),t.j41(114,"mat-card-content")(115,"div",24)(116,"span",25),t.EFF(117,"Subtotal:"),t.k0s(),t.j41(118,"span",26),t.EFF(119),t.nI1(120,"number"),t.k0s()(),t.j41(121,"div",24)(122,"span",25),t.EFF(123,"Tax:"),t.k0s(),t.j41(124,"span",26),t.EFF(125),t.nI1(126,"number"),t.k0s()(),t.j41(127,"div",24)(128,"span",25),t.EFF(129,"Delivery Fee:"),t.k0s(),t.j41(130,"span",26),t.EFF(131),t.nI1(132,"number"),t.k0s()(),t.DNE(133,pt,6,4,"div",27),t.nrm(134,"mat-divider"),t.j41(135,"div",28)(136,"span",25),t.EFF(137,"Total Amount:"),t.k0s(),t.j41(138,"span",26),t.EFF(139),t.nI1(140,"number"),t.k0s()(),t.j41(141,"div",29)(142,"span",25),t.EFF(143,"Payment Method:"),t.k0s(),t.j41(144,"span",26),t.EFF(145),t.k0s()()()(),t.DNE(146,gt,7,1,"mat-card",30),t.k0s()}if(2&n){const e=t.XpG();t.R7$(10),t.JRh(e.order.orderNumber),t.R7$(3),t.Y8G("color",e.getStatusColor(e.order.status)),t.R7$(1),t.SpI(" ",t.bMT(15,30,e.order.status)," "),t.R7$(2),t.Y8G("color",e.getPaymentStatusColor(e.order.paymentStatus)),t.R7$(1),t.SpI(" ",t.bMT(18,32,e.order.paymentStatus)," "),t.R7$(3),t.Y8G("ngIf","DELIVERED"!==e.order.status&&"CANCELLED"!==e.order.status),t.R7$(1),t.Y8G("ngIf",e.order.canBeCancelled),t.R7$(11),t.JRh(e.order.customerName),t.R7$(5),t.JRh(e.order.customerEmail),t.R7$(5),t.JRh(e.order.customerPhone),t.R7$(10),t.JRh(e.order.shopName),t.R7$(5),t.JRh(e.order.shopAddress),t.R7$(10),t.JRh(e.order.deliveryContactName),t.R7$(5),t.JRh(e.order.deliveryPhone),t.R7$(5),t.JRh(e.order.fullDeliveryAddress),t.R7$(1),t.Y8G("ngIf",e.order.estimatedDeliveryTime),t.R7$(1),t.Y8G("ngIf",e.order.actualDeliveryTime),t.R7$(10),t.JRh(t.i5U(90,34,e.order.createdAt,"dd/MM/yyyy HH:mm")),t.R7$(6),t.JRh(t.i5U(96,37,e.order.updatedAt,"dd/MM/yyyy HH:mm")),t.R7$(6),t.JRh(e.order.orderAge),t.R7$(1),t.Y8G("ngIf",e.order.cancellationReason),t.R7$(4),t.SpI("Order Items (",e.order.itemCount," items)"),t.R7$(3),t.Y8G("ngForOf",e.order.orderItems),t.R7$(10),t.SpI("\u20b9",t.i5U(120,40,e.order.subtotal,"1.2-2"),""),t.R7$(6),t.SpI("\u20b9",t.i5U(126,43,e.order.taxAmount,"1.2-2"),""),t.R7$(6),t.SpI("\u20b9",t.i5U(132,46,e.order.deliveryFee,"1.2-2"),""),t.R7$(2),t.Y8G("ngIf",e.order.discountAmount>0),t.R7$(6),t.SpI("\u20b9",t.i5U(140,49,e.order.totalAmount,"1.2-2"),""),t.R7$(6),t.JRh(e.order.paymentMethodLabel),t.R7$(1),t.Y8G("ngIf",e.order.notes)}}function Ot(n,o){1&n&&(t.j41(0,"div",47),t.nrm(1,"mat-spinner"),t.j41(2,"p"),t.EFF(3,"Loading order details..."),t.k0s()())}let ft=(()=>{class n{constructor(e,r,a,i){this.route=e,this.router=r,this.orderService=a,this.snackBar=i,this.order=null,this.loading=!1}ngOnInit(){const e=this.route.snapshot.paramMap.get("id");e&&this.loadOrder(+e)}loadOrder(e){this.loading=!0,this.orderService.getOrderById(e).subscribe({next:r=>{this.order=r,this.loading=!1},error:r=>{console.error("Error loading order:",r),l().fire({title:"Error!",text:"Failed to load order details. Please try again.",icon:"error",confirmButtonText:"OK"}).then(()=>{this.router.navigate(["/orders"])}),this.loading=!1}})}goBack(){this.router.navigate(["/orders"])}getStatusColor(e){switch(e){case"PENDING":case"CANCELLED":return"warn";case"CONFIRMED":case"PREPARING":case"DELIVERED":return"primary";case"READY_FOR_PICKUP":case"OUT_FOR_DELIVERY":return"accent";default:return""}}getPaymentStatusColor(e){switch(e){case"PAID":return"primary";case"PENDING":case"FAILED":return"warn";case"REFUNDED":return"accent";default:return""}}updateOrderStatus(){this.order&&l().fire({title:"Update Order Status",input:"select",inputOptions:{PENDING:"Pending",CONFIRMED:"Confirmed",PREPARING:"Preparing",READY_FOR_PICKUP:"Ready for Pickup",OUT_FOR_DELIVERY:"Out for Delivery",DELIVERED:"Delivered",CANCELLED:"Cancelled"},inputValue:this.order.status,showCancelButton:!0,confirmButtonText:"Update",cancelButtonText:"Cancel"}).then(e=>{e.isConfirmed&&e.value!==this.order.status&&this.orderService.updateOrderStatus(this.order.id,e.value).subscribe({next:r=>{this.order=r,l().fire("Success!","Order status updated successfully","success")},error:r=>{l().fire("Error!","Failed to update order status","error")}})})}cancelOrder(){this.order&&l().fire({title:"Cancel Order",text:"Please provide a reason for cancellation:",input:"textarea",inputPlaceholder:"Cancellation reason...",showCancelButton:!0,confirmButtonText:"Cancel Order",cancelButtonText:"Close",confirmButtonColor:"#d33"}).then(e=>{e.isConfirmed&&e.value&&this.orderService.cancelOrder(this.order.id,e.value).subscribe({next:r=>{this.order=r,l().fire("Success!","Order cancelled successfully","success")},error:r=>{l().fire("Error!","Failed to cancel order","error")}})})}static{this.\u0275fac=function(r){return new(r||n)(t.rXU(p.nX),t.rXU(p.Ix),t.rXU(F.Q),t.rXU(E.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-order-detail"]],decls:2,vars:2,consts:[["class","order-detail-container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"order-detail-container"],[1,"header-section"],[1,"header-left"],["mat-icon-button","",1,"back-btn",3,"click"],[1,"title-section"],[1,"order-number"],[1,"header-center"],[1,"status-badges"],[3,"color"],[1,"header-actions"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],[1,"content-grid"],[1,"info-card"],[1,"info-row"],[1,"label"],[1,"value"],["class","info-row",4,"ngIf"],[1,"items-card"],[1,"items-list"],["class","item-row",4,"ngFor","ngForOf"],[1,"summary-card"],[1,"summary-row"],[1,"summary-label"],[1,"summary-value"],["class","summary-row",4,"ngIf"],[1,"summary-row","total"],[1,"payment-method"],["class","notes-card",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],[1,"item-row"],[1,"item-image"],[3,"src","alt"],[1,"item-details"],[1,"item-description"],[1,"item-sku"],["class","item-instructions",4,"ngIf"],[1,"item-pricing"],[1,"quantity"],[1,"unit-price"],[1,"total-price"],[1,"item-instructions"],[1,"summary-value","discount"],[1,"notes-card"],[1,"loading-container"]],template:function(r,a){1&r&&(t.DNE(0,Ct,147,52,"div",0),t.DNE(1,Ot,4,0,"div",1)),2&r&&(t.Y8G("ngIf",!a.loading&&a.order),t.R7$(1),t.Y8G("ngIf",a.loading))},dependencies:[d.Sq,d.bT,u.$z,u.iY,f.An,O.RN,O.m2,O.MM,O.dh,h.Jl,P.LG,R.q,d.QX,d.PV,d.vh],styles:[".order-detail-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.order-detail-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:24px}.order-detail-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{color:#1976d2}.order-detail-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]{flex:1}.order-detail-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-weight:500}.order-detail-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .order-number[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600;color:#1976d2;font-size:18px}.order-detail-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .status-badges[_ngcontent-%COMP%]{display:flex;gap:8px}.order-detail-container[_ngcontent-%COMP%]   .content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:24px;margin-bottom:24px}.order-detail-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:12px;align-items:flex-start}.order-detail-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#666;min-width:120px}.order-detail-container[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{text-align:right;word-break:break-word;flex:1}.order-detail-container[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]{margin-bottom:24px}.order-detail-container[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]{display:flex;gap:16px;padding:16px;border:1px solid #e0e0e0;border-radius:8px;margin-bottom:16px}.order-detail-container[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.order-detail-container[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{flex-shrink:0;width:80px;height:80px}.order-detail-container[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:8px}.order-detail-container[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]{flex:1}.order-detail-container[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;color:#333;font-weight:500}.order-detail-container[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]{margin:0 0 4px;color:#666;font-size:14px}.order-detail-container[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-sku[_ngcontent-%COMP%]{margin:0 0 8px;color:#999;font-size:12px;font-family:Courier New,monospace}.order-detail-container[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-details[_ngcontent-%COMP%]   .item-instructions[_ngcontent-%COMP%]{margin:0;color:#666;font-size:13px;font-style:italic}.order-detail-container[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-pricing[_ngcontent-%COMP%]{text-align:right;min-width:120px}.order-detail-container[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-pricing[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:4px}.order-detail-container[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-pricing[_ngcontent-%COMP%]   .unit-price[_ngcontent-%COMP%]{font-size:13px;color:#999;margin-bottom:4px}.order-detail-container[_ngcontent-%COMP%]   .items-card[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-pricing[_ngcontent-%COMP%]   .total-price[_ngcontent-%COMP%]{font-weight:600;color:#2e7d32;font-size:16px}.order-detail-container[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{margin-bottom:24px}.order-detail-container[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:12px}.order-detail-container[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-weight:500;color:#666}.order-detail-container[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-weight:500}.order-detail-container[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .discount[_ngcontent-%COMP%]{color:#2e7d32}.order-detail-container[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-row.total[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#333;padding-top:12px}.order-detail-container[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .payment-method[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:16px;padding-top:12px;border-top:1px solid #e0e0e0}.order-detail-container[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .payment-method[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-weight:500;color:#666}.order-detail-container[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .payment-method[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-weight:500;color:#1976d2}.order-detail-container[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin:16px 0}.order-detail-container[_ngcontent-%COMP%]   .notes-card[_ngcontent-%COMP%]{margin-bottom:24px}.order-detail-container[_ngcontent-%COMP%]   .notes-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;line-height:1.6}.order-detail-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.order-detail-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}@media (max-width: 768px){.order-detail-container[_ngcontent-%COMP%]{padding:16px}.order-detail-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.order-detail-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .status-badges[_ngcontent-%COMP%]{width:100%;justify-content:center}.order-detail-container[_ngcontent-%COMP%]   .content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.order-detail-container[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.order-detail-container[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-image[_ngcontent-%COMP%]{align-self:center}.order-detail-container[_ngcontent-%COMP%]   .items-list[_ngcontent-%COMP%]   .item-row[_ngcontent-%COMP%]   .item-pricing[_ngcontent-%COMP%]{text-align:center}}"]})}}return n})();function ht(n,o){if(1&n){const e=t.RV6();t.j41(0,"button",8),t.bIt("click",function(){const i=t.eBV(e).$implicit,m=t.XpG();return t.Njj(m.onTabChange(i.value))}),t.j41(1,"mat-icon"),t.EFF(2),t.k0s(),t.EFF(3),t.k0s()}if(2&n){const e=o.$implicit,r=t.XpG();t.AVh("active",r.activeTab===e.value),t.R7$(2),t.JRh(e.icon),t.R7$(1),t.SpI(" ",e.label," ")}}function Pt(n,o){1&n&&(t.j41(0,"mat-header-cell",27),t.EFF(1,"Order #"),t.k0s())}function Mt(n,o){if(1&n&&(t.j41(0,"mat-cell")(1,"span",28),t.EFF(2),t.k0s()()),2&n){const e=o.$implicit;t.R7$(2),t.JRh(e.orderNumber)}}function Et(n,o){1&n&&(t.j41(0,"mat-header-cell",27),t.EFF(1,"Customer"),t.k0s())}function Ft(n,o){if(1&n&&(t.j41(0,"mat-cell")(1,"span",29),t.EFF(2),t.k0s()()),2&n){const e=o.$implicit;t.R7$(2),t.JRh(e.customerName||"Walk-in Customer")}}function bt(n,o){1&n&&(t.j41(0,"mat-header-cell",27),t.EFF(1,"Shop"),t.k0s())}function xt(n,o){if(1&n&&(t.j41(0,"mat-cell"),t.EFF(1),t.k0s()),2&n){const e=o.$implicit;t.R7$(1),t.JRh(e.shopName)}}function vt(n,o){1&n&&(t.j41(0,"mat-header-cell",27),t.EFF(1,"Status"),t.k0s())}function yt(n,o){if(1&n&&(t.j41(0,"mat-cell")(1,"mat-chip",30),t.EFF(2),t.k0s()()),2&n){const e=o.$implicit,r=t.XpG(3);t.R7$(1),t.Y8G("color",r.getStatusColor(e.status)),t.R7$(1),t.SpI(" ",r.formatStatus(e.status)," ")}}function Dt(n,o){1&n&&(t.j41(0,"mat-header-cell",27),t.EFF(1,"Payment"),t.k0s())}function It(n,o){if(1&n&&(t.j41(0,"mat-cell")(1,"mat-chip",30),t.EFF(2),t.k0s()()),2&n){const e=o.$implicit,r=t.XpG(3);t.R7$(1),t.Y8G("color",r.getPaymentStatusColor(e.paymentStatus)),t.R7$(1),t.SpI(" ",r.formatStatus(e.paymentStatus)," ")}}function Rt(n,o){1&n&&(t.j41(0,"mat-header-cell",27),t.EFF(1,"Total"),t.k0s())}function kt(n,o){if(1&n&&(t.j41(0,"mat-cell")(1,"span",31),t.EFF(2),t.nI1(3,"number"),t.k0s()()),2&n){const e=o.$implicit;t.R7$(2),t.Lme("","\u20b9","",t.i5U(3,2,e.totalAmount,"1.2-2"),"")}}function jt(n,o){1&n&&(t.j41(0,"mat-header-cell",27),t.EFF(1,"Date"),t.k0s())}function wt(n,o){if(1&n&&(t.j41(0,"mat-cell")(1,"span",32),t.EFF(2),t.nI1(3,"date"),t.k0s()()),2&n){const e=o.$implicit;t.R7$(2),t.JRh(t.i5U(3,1,e.createdAt,"dd/MM/yyyy HH:mm"))}}function St(n,o){1&n&&(t.j41(0,"mat-header-cell"),t.EFF(1,"Actions"),t.k0s())}function Nt(n,o){if(1&n){const e=t.RV6();t.j41(0,"mat-cell")(1,"button",33),t.bIt("click",function(a){const m=t.eBV(e).$implicit;return t.XpG(3).viewOrder(m),t.Njj(a.stopPropagation())}),t.j41(2,"mat-icon"),t.EFF(3,"visibility"),t.k0s()()()}}function Tt(n,o){1&n&&t.nrm(0,"mat-header-row")}function $t(n,o){if(1&n){const e=t.RV6();t.j41(0,"mat-row",34),t.bIt("click",function(){const i=t.eBV(e).$implicit,m=t.XpG(3);return t.Njj(m.viewOrder(i))}),t.k0s()}}function Lt(n,o){if(1&n&&(t.j41(0,"mat-table",13),t.qex(1,14),t.DNE(2,Pt,2,0,"mat-header-cell",15),t.DNE(3,Mt,3,1,"mat-cell",16),t.bVm(),t.qex(4,17),t.DNE(5,Et,2,0,"mat-header-cell",15),t.DNE(6,Ft,3,1,"mat-cell",16),t.bVm(),t.qex(7,18),t.DNE(8,bt,2,0,"mat-header-cell",15),t.DNE(9,xt,2,1,"mat-cell",16),t.bVm(),t.qex(10,19),t.DNE(11,vt,2,0,"mat-header-cell",15),t.DNE(12,yt,3,2,"mat-cell",16),t.bVm(),t.qex(13,20),t.DNE(14,Dt,2,0,"mat-header-cell",15),t.DNE(15,It,3,2,"mat-cell",16),t.bVm(),t.qex(16,21),t.DNE(17,Rt,2,0,"mat-header-cell",15),t.DNE(18,kt,4,5,"mat-cell",16),t.bVm(),t.qex(19,22),t.DNE(20,jt,2,0,"mat-header-cell",15),t.DNE(21,wt,4,4,"mat-cell",16),t.bVm(),t.qex(22,23),t.DNE(23,St,2,0,"mat-header-cell",24),t.DNE(24,Nt,4,0,"mat-cell",16),t.bVm(),t.DNE(25,Tt,1,0,"mat-header-row",25),t.DNE(26,$t,1,0,"mat-row",26),t.k0s()),2&n){const e=t.XpG(2);t.Y8G("dataSource",e.dataSource),t.R7$(25),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",e.displayedColumns)}}function Gt(n,o){if(1&n&&(t.j41(0,"div",35)(1,"mat-icon"),t.EFF(2,"check_circle"),t.k0s(),t.j41(3,"p"),t.EFF(4),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.SpI("No ",e.activeTab.toLowerCase()," orders found")}}const At=function(){return[5,10,25]};function Bt(n,o){if(1&n){const e=t.RV6();t.j41(0,"mat-paginator",36),t.bIt("page",function(a){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onPageChange(a))}),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("length",e.totalOrders)("pageSize",e.pageSize)("pageIndex",e.currentPage)("pageSizeOptions",t.lJ4(4,At))}}function Vt(n,o){if(1&n&&(t.j41(0,"div",9),t.DNE(1,Lt,27,3,"mat-table",10),t.DNE(2,Gt,5,1,"div",11),t.DNE(3,Bt,1,5,"mat-paginator",12),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("ngIf",e.dataSource.data.length>0),t.R7$(1),t.Y8G("ngIf",0===e.dataSource.data.length),t.R7$(1),t.Y8G("ngIf",e.dataSource.data.length>0)}}function Yt(n,o){1&n&&(t.j41(0,"div",37),t.nrm(1,"mat-spinner",38),t.j41(2,"p"),t.EFF(3,"Loading orders..."),t.k0s()())}let Ut=(()=>{class n{constructor(e,r){this.orderService=e,this.router=r,this.displayedColumns=["orderNumber","customerName","shopName","status","paymentStatus","totalAmount","createdAt","actions"],this.dataSource=new c.I6,this.loading=!1,this.totalOrders=0,this.pageSize=10,this.currentPage=0,this.activeTab="CANCELLED",this.issueTypes=[{value:"CANCELLED",label:"Cancelled Orders",icon:"cancel",color:"#f44336"},{value:"FAILED",label:"Failed Payments",icon:"payment",color:"#ff9800"},{value:"REFUNDED",label:"Refunded Orders",icon:"money_off",color:"#9c27b0"}]}ngOnInit(){this.loadIssueOrders()}ngAfterViewInit(){this.dataSource.sort=this.sort}loadIssueOrders(){this.loading=!0,"FAILED"===this.activeTab||"REFUNDED"===this.activeTab?this.orderService.getAllOrders(this.currentPage,this.pageSize).subscribe({next:e=>{this.dataSource.data=(e.data?.content||[]).filter(a=>a.paymentStatus===this.activeTab),this.totalOrders=this.dataSource.data.length,this.loading=!1},error:()=>{this.dataSource.data=[],this.totalOrders=0,this.loading=!1}}):this.orderService.getOrdersByStatus(this.activeTab,this.currentPage,this.pageSize).subscribe({next:e=>{const r=e.data||e;this.dataSource.data=r.content||[],this.totalOrders=r.totalElements||this.dataSource.data.length,this.loading=!1},error:()=>{this.dataSource.data=[],this.totalOrders=0,this.loading=!1}})}onTabChange(e){this.activeTab=e,this.currentPage=0,this.loadIssueOrders()}onPageChange(e){this.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.loadIssueOrders()}viewOrder(e){this.router.navigate(["/orders",e.id])}formatStatus(e){return e?e.replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase()):""}getStatusColor(e){switch(e){case"CANCELLED":case"PENDING":return"warn";case"CONFIRMED":case"DELIVERED":case"COMPLETED":case"SELF_PICKUP_COLLECTED":return"primary";default:return"accent"}}getPaymentStatusColor(e){switch(e){case"PAID":case"COLLECTED":return"primary";case"PENDING":case"FAILED":return"warn";case"REFUNDED":return"accent";default:return""}}goBack(){this.router.navigate(["/orders"])}static{this.\u0275fac=function(r){return new(r||n)(t.rXU(F.Q),t.rXU(p.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-order-issues"]],viewQuery:function(r,a){if(1&r&&(t.GBs(C.iy,5),t.GBs(_.B4,5)),2&r){let i;t.mGM(i=t.lsd())&&(a.paginator=i.first),t.mGM(i=t.lsd())&&(a.sort=i.first)}},decls:12,vars:3,consts:[[1,"order-issues-container"],[1,"header-section"],[1,"header-top"],["mat-icon-button","",1,"back-btn",3,"click"],[1,"tab-buttons"],["mat-stroked-button","",3,"active","click",4,"ngFor","ngForOf"],["class","table-container",4,"ngIf"],["class","loading-container",4,"ngIf"],["mat-stroked-button","",3,"click"],[1,"table-container"],["matSort","","class","issues-table",3,"dataSource",4,"ngIf"],["class","no-data",4,"ngIf"],["showFirstLastButtons","",3,"length","pageSize","pageIndex","pageSizeOptions","page",4,"ngIf"],["matSort","",1,"issues-table",3,"dataSource"],["matColumnDef","orderNumber"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","customerName"],["matColumnDef","shopName"],["matColumnDef","status"],["matColumnDef","paymentStatus"],["matColumnDef","totalAmount"],["matColumnDef","createdAt"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef"],["class","order-row",3,"click",4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[1,"order-number"],[1,"customer-name"],[3,"color"],[1,"amount"],[1,"date"],["mat-icon-button","","color","primary",3,"click"],[1,"order-row",3,"click"],[1,"no-data"],["showFirstLastButtons","",3,"length","pageSize","pageIndex","pageSizeOptions","page"],[1,"loading-container"],["diameter","40"]],template:function(r,a){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t.bIt("click",function(){return a.goBack()}),t.j41(4,"mat-icon"),t.EFF(5,"arrow_back"),t.k0s()(),t.j41(6,"h2"),t.EFF(7,"Order Issues"),t.k0s()(),t.j41(8,"div",4),t.DNE(9,ht,4,4,"button",5),t.k0s()(),t.DNE(10,Vt,4,3,"div",6),t.DNE(11,Yt,4,0,"div",7),t.k0s()),2&r&&(t.R7$(9),t.Y8G("ngForOf",a.issueTypes),t.R7$(1),t.Y8G("ngIf",!a.loading),t.R7$(1),t.Y8G("ngIf",a.loading))},dependencies:[d.Sq,d.bT,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,C.iy,_.B4,_.aE,u.$z,u.iY,f.An,h.Jl,P.LG,d.QX,d.vh],styles:[".order-issues-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.order-issues-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]{margin-bottom:24px}.order-issues-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .header-top[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:16px}.order-issues-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .header-top[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{color:#666}.order-issues-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .header-top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-weight:500}.order-issues-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .tab-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}.order-issues-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .tab-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;border-radius:20px;padding:6px 16px;font-size:13px;transition:all .2s}.order-issues-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .tab-buttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#1976d2;color:#fff;border-color:#1976d2}.order-issues-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .tab-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.order-issues-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{background:white;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.order-issues-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .issues-table[_ngcontent-%COMP%]{width:100%}.order-issues-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .issues-table[_ngcontent-%COMP%]   .order-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .2s}.order-issues-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .issues-table[_ngcontent-%COMP%]   .order-row[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.order-issues-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .issues-table[_ngcontent-%COMP%]   .order-number[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600;color:#1976d2;font-size:13px}.order-issues-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .issues-table[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]{font-weight:500}.order-issues-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .issues-table[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:600;color:#2e7d32}.order-issues-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .issues-table[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#666;font-size:13px}.order-issues-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.order-issues-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.order-issues-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.order-issues-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#4caf50}.order-issues-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px}@media (max-width: 768px){.order-issues-container[_ngcontent-%COMP%]{padding:16px}.order-issues-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .tab-buttons[_ngcontent-%COMP%]{flex-direction:column}.order-issues-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow-x:auto}}"]})}}return n})();var x=s(4978);const zt=[{path:"",component:it,canActivate:[x.q]},{path:"issues",component:Ut,canActivate:[x.q]},{path:":id",component:ft,canActivate:[x.q]}];let Xt=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[p.iI.forChild(zt),p.iI]})}}return n})(),Jt=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[d.MD,Xt,g.X1,g.YN,c.tP,C.Ou,_.NQ,y.fS,D.Ve,u.Hl,f.m_,O.Hu,h.YN,I.hM,E._T,P.D6,M.Cn,k.Y,R.w]})}}return n})()}}]);